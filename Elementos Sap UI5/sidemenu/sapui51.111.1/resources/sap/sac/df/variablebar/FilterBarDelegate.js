sap.ui.define("sap/sac/df/variablebar/FilterBarDelegate",["sap/ui/mdc/FilterBarDelegate","sap/sac/df/variablebar/FilterBarHandler","sap/sac/df/variablebar/TypeUtil","sap/sac/df/thirdparty/lodash"],function(e,r,a,t){"use strict";var i=Object.assign({},e);i._getDataProvider=function(e){var r=e._oFilterBarHandler._getDataProvider();if(r){return Promise.resolve(r)}return new Promise(function(r){e._getMultiDimModel().attachEventOnce("queryAdded",null,function(){r(e._oFilterBarHandler._getDataProvider())},i)})};i.fetchProperties=function(e){return i._getDataProvider(e).then(function(){var r=[];t.forEach(e._oFilterBarHandler._getVariables(),function(a){var t=a.MergedVariable?a.MergedVariable:a;var n={source:{format:"yyyy-MM-dd",pattern:"yyyy-MM-dd"}};var o=t.ValueType==="Date";var l={name:t.Name,label:t.Description,typeConfig:i.getTypeUtil().getTypeConfig(t.ValueType,o?n:null,null),dataType:t.ValueType,maxConditions:o||!t.SupportsMultipleValues?1:-1,group:a.Group?a.Group:"_basicSearch",groupLabel:e.getModel("i18n").getResourceBundle().getText(a.Group?a.Group:""),required:t.Mandatory,hasValueHelp:t.SupportsValueHelp,caseSensitive:false};r.push(l)});return r})};i.addItem=function(e,a,t){return i._getDataProvider(a).then(function(){var i=a._oFilterBarHandler._getVariable(e);var n=t?t.modifier.checkControlId(r.getFilterFieldId(a,e)):false;var o=n&&sap.ui.getCore().byId(r.getFilterFieldId(a,e));o=o?o:r.createFilterField(i,a);return o})};i.addCondition=function(e,r){return i._getDataProvider(r).then(function(a){var t=r._oFilterBarHandler._getVariable(e);var i=t.MemberFilter;var n=r.getConditions()[e];var o=[];var l=[];i.forEach(function(e){if(e.Low||e.Text){o.push(e)}});if(o.length){l=[].concat(o)}var u={ComparisonOperator:"EQUAL"};var d=false;if(n){n.forEach(function(e){var r=i.find(function(r){return e.values[0]===r.Low});if(!r||!i.length){d=true;u.Low=e.values[0];if(e.values[1]){u.Text=e.values[1]}l.push(u)}})}return Promise.resolve(d?a.setVariableValue(e,l):true)})};i.removeCondition=function(e,r){return i._getDataProvider(r).then(function(a){var t=r._oFilterBarHandler._getVariable(e);var i=r.getConditions()[e];var n=t.MemberFilter;var o=[];n.forEach(function(e){var r=i.find(function(r){return r.values[0]===e.Low});if(r){o.push(e)}});return Promise.resolve(a.setVariableValue(e,o))})};i.getTypeUtil=function(){return a};return i});
//# sourceMappingURL=FilterBarDelegate.js.map