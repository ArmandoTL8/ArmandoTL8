/*
 * SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
 */
sap.ui.define("sap/sac/df/fa/FlexAnalysisContextMenuProvider",["sap/ui/base/Object","sap/sac/df/firefly/library"],function(e,t){"use strict";var n="Gds.Qb.Table.ContextMenu";var i=e.extend("sap.sac.df.fa.FlexAnalysisContextMenuProvider",{constructor:function(e){this.flexAnalysis=e;this.actions={}},isActionVisible:function(e,t){return true},isActionEnabled:function(e,t){return true},onActionTriggered:function(e,t){var n=this.actions[e];if(n){n.triggerAction(e,this.convertContext(t))}},provideMenuConfig:function(e,i,r){var o=t.PrFactory.createStructure();var s=[];if(Object.keys(this.actions).length>0&&e.getUiContext()===n){var a=this.convertContext(e);var u=o.putNewList("MenuExtensions");var c=u.addNewStructure();c.putNewList("UiContext").addString(n);var l=c.putNewList("Extension");var d=this.actions;Object.keys(d).forEach(function(e){var t=d[e];var n=l.addNewStructure();n.putString("Operation","AppendInto");n.putString("Reference","$Root");var i=n.putNewList("Items");var r=i.addNewStructure();r.putString("Action",e);s.push(t.getActionDescription(e,a).then(function(e){this.putString("Text",e.Text);if(e.Icon){this.putString("Icon",e.Icon)}}.bind(r)));s.push(t.isActionVisible(e,a).then(function(e){this.putBoolean("Visible",e)}.bind(r)));s.push(t.isActionEnabled(e,a).then(function(e){this.putBoolean("Enabled",e)}.bind(r)))})}Promise.all(s).then(function(){i.onDynamicMenuConfigProvided(a,"flexAnalysisProvider",o,r)})},registerAction:function(e,t){this.actions[e]=t},unregisterAction:function(e){delete this.actions[e]},isReleaseLocked:function(){return true},convertContext:function(e){var n=this.flexAnalysis.getParent().getModel(this.flexAnalysis.getMultiDimModelId());var i=n.getDataProvider(this.flexAnalysis.getDataProvider());var r={DataProvider:i.Name,Grid:{SelectedDataCells:[]}};var o=i.getQueryManager().getActiveResultSetContainer();var s=t.AuGdsGenericContextResolveUtil.resolveSingleColumnTuple(e);var a=t.AuGdsGenericContextResolveUtil.resolveSingleRowTuple(e);if(s&&a){var u=s.getAxisIndex()+o.getOffsetColumns();var c=a.getAxisIndex()+o.getOffsetRows();var l=t.AuGdsGenericContextResolveUtil.resolveSingleDocumentId(e);r.Grid.SelectedDataCells.push({rowIndex:c,columnIndex:u,documentId:l})}return r}});return i});
//# sourceMappingURL=FlexAnalysisContextMenuProvider.js.map