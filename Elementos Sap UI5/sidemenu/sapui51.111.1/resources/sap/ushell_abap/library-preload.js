//@ui5-bundle sap/ushell_abap/library-preload.js
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/adapters/abap/AdapterContainer", ["sap/base/util/ObjectPath","sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/core/format/DateFormat","sap/ushell_abap/pbServices/ui2/ODataService","sap/ushell/services/_Personalization/constants"],function(e,t,jQuery,n,r,i){"use strict";var o="PersContainers",a="yyyyMMddHHmmss",s=new Date(9999,1,1,0,0,0),c=new Date(9999,1,1,0,0,0,0),u="ADMIN#sap-ushell-container-expireUTCTimestamp",p="ADMIN#sap-ushell-container-storageUTCTimestamp",f="ADMIN#sap-ushell-container-scope";function y(e){var n="sap.ushell.personalization#";if(e.substring(0,n.length)!==n){t.error("Unexpected ContainerKey "+e);return e}return e.substring(n.length,n.length+40)}var l=function(t,n,r,i){this._oService=n;this._oScope=r;this["sap-cache-id"]=e.get("_oService._oConfig.services.personalization.cacheId",this);this._sContainerKey=y(t);this._sAppName=i||"";this._category=this._determineCategory(r);this._oJSONContainer={category:this._category,clientExpirationTime:c,appName:this._sAppName,component:"",id:this._sContainerKey,PersContainerItems:[]};this._oPropertyBag={};this._aOperationQueue=[]};l.prototype._reset=function(){this._oJSONContainer.PersContainerItems=[]};l.prototype._obtainODataWrapper=function(){return this._oService._oWrapper};l.prototype.load=function(){var e=new jQuery.Deferred,n=this,i=this._obtainODataWrapper(),a=o+"(category='"+this._category+"',id='"+encodeURIComponent(this._sContainerKey)+"')?$expand=PersContainerItems";if(this._category&&this._category==="P"&&this["sap-cache-id"]){a=a+"&sap-cache-id="+this["sap-cache-id"]}r.call(this,i,function(){return false});i.read(a,function(t){n._oJSONContainer=t;n._oJSONContainer.category=n._category;n._oJSONContainer.id=n._sContainerKey;n._oJSONContainer.appName=n._sAppName;n._oJSONContainer.PersContainerItems=n._oJSONContainer.PersContainerItems&&n._oJSONContainer.PersContainerItems.results||[];e.resolve(n)},function(r){t.warning(r);n._reset();e.resolve(n)});return e.promise()};l.prototype.save=function(){t.debug("[000] save","AdapterContainer");var e=new jQuery.Deferred,n=this,i=this._obtainODataWrapper(),a=o;r.call(this,i,function(){return false});i.create(a,this._oJSONContainer,function(){e.resolve(n)},function(t){e.reject(t)});return e.promise()};l.prototype.del=function(){var e=new jQuery.Deferred,t=this,n=this._obtainODataWrapper(),i=o+"(category='"+this._category+"',id='"+encodeURIComponent(this._sContainerKey)+"')";r.call(this,n,function(){return false});n.del(i,function(n){e.resolve(t)},function(t){e.reject(t)});this._reset();return e.promise()};l.prototype.getItemKeys=function(){var e=[];this._oJSONContainer.PersContainerItems.forEach(function(t){if(t.category==="V"){e.push("VARIANTSET#"+t.id)}else if(t.category==="I"){e.push("ITEM#"+t.id)}});if(this._oJSONContainer.validity>=0){e.push(p);e.push(u);e.push(f)}return e};l.prototype.containsItem=function(e){return this.getItemKeys().indexOf(e)>=0};function h(e){if(e===undefined||e===null){return null}var t=n.getDateInstance({pattern:a});return t.parse(JSON.parse(e),true)}function d(e){var r=n.getDateInstance({pattern:a});if(e===null){e=c}if(typeof e==="string"){if(/\/Date\(([0-9]+)\)\//.exec(e)){e=new Date(parseInt(/\/Date\(([0-9]+)\)\//.exec(e)[1],10))}else{t.error("Expected Date format "+e)}}if(+e===+c){return undefined}return r.format(e,true)}l.prototype._findItemIndex=function(e,t){var n;for(n=0;n<this._oJSONContainer.PersContainerItems.length;n=n+1){if(this._oJSONContainer.PersContainerItems[n].id===e&&this._oJSONContainer.PersContainerItems[n].category===t){return n}}return undefined};l.prototype._locateItem=function(e){var n={index:-1};if(e===u){return{containerProperty:"clientExpirationTime",initialValue:c,convToABAP:h,convFromABAP:d}}if(e===f){return{containerProperty:"validity",initialValue:0,convToABAP:function(e){if(!e){return null}return JSON.parse(e).validity},convFromABAP:function(e,t){if(e<=0){return undefined}t=t||{};t.validity=e;return t}}}if(e===p){return{containerProperty:" ignore",initialValue:s,convToABAP:h,convFromABAP:d}}if(e.indexOf("ITEM#")===0){n.trueItemKey=e.substring("ITEM#".length,"ITEM#".length+40);n.category="I"}else if(e.indexOf("VARIANTSET#")===0){n.trueItemKey=e.substring("VARIANTSET#".length,"VARIANTSET#".length+40);n.category="V"}else if(e.indexOf("ADMIN#")!==0){t.error("Unknown itemkey prefix"+e)}n.index=this._findItemIndex(n.trueItemKey,n.category);return n};l.prototype.getItemValue=function(e){var t="",n,r=this._locateItem(e);if(r.containerProperty===" ignore"){return undefined}if(r.index>=0){t=this._oJSONContainer.PersContainerItems[r.index].value;try{n=JSON.parse(t)}catch(e){if(t==="X"){n=true}else{n=undefined}}}if(r.containerProperty){if(typeof r.convFromABAP==="function"){return r.convFromABAP(this._oJSONContainer[r.containerProperty],n)}return this._oJSONContainer[r.containerProperty]}return n};l.prototype.setItemValue=function(e,t){var n=JSON.stringify(t),r=this._locateItem(e);if(r.containerProperty===" ignore"){return}if(r.containerProperty){if(typeof r.convToABAP==="function"){this._oJSONContainer[r.containerProperty]=r.convToABAP(n)}else{this._oJSONContainer[r.containerProperty]=n}if(!r.trueItemKey){return}}if(r.index>=0){this._oJSONContainer.PersContainerItems[r.index].value=n;return}this._oJSONContainer.PersContainerItems.push({value:n,id:r.trueItemKey,category:r.category,containerId:this._sContainerKey,containerCategory:this._category})};l.prototype.delItem=function(e){var t=this._locateItem(e);if(t.containerProperty===" ignore"){return}if(t.containerProperty){this._oJSONContainer[t.containerProperty]=t.initialValue;return}if(t.index>=0){this._oJSONContainer.PersContainerItems.splice(t.index,1);return}};l.prototype._determineCategory=function(e){if(!e){return"U"}var t=i;if(e.keyCategory&&e.keyCategory===t.keyCategory.FIXED_KEY&&e.writeFrequency&&e.writeFrequency===t.writeFrequency.LOW&&e.clientStorageAllowed&&e.clientStorageAllowed===true){return"P"}return"U"};return l},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/adapters/abap/AppStateAdapter", ["sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/utils","sap/ushell_abap/pbServices/ui2/ODataWrapper","sap/ushell_abap/pbServices/ui2/Error","sap/ushell_abap/pbServices/ui2/ODataService"],function(e,jQuery,a,r,t,p,s){"use strict";var o=function(a,r,o){this._oConfig=o&&o.config;var n=(e.get("services.appState.baseUrl",o)||"/sap/opu/odata/UI2/INTEROP")+"/";var i={baseUrl:n,"sap-language":sap.ushell.Container.getUser().getLanguage(),"sap-client":sap.ushell.Container.getLogonSystem().getClient()};this._oWrapper=t.createODataWrapper(i);function u(e){throw new p(e,"sap.ushell_abap.adapters.abap.AppStateAdapter")}s.call(this,this._oWrapper,u)};o.prototype.saveAppState=function(e,r,t,p,s){var o=new jQuery.Deferred,n="GlobalContainers",i={id:e,sessionKey:r,component:s,appName:p,value:t};this._oWrapper.create(n,i,function(){o.resolve()},function(e){o.reject(e);a.error(e)});return o.promise()};o.prototype.loadAppState=function(e){var t=new jQuery.Deferred,p="GlobalContainers(id='"+encodeURIComponent(e)+"')";if(!e){throw new r.Error("The sKey is mandatory to read the data from the persistence layer")}this._oWrapper.openBatchQueue();this._oWrapper.read(p,function(e){t.resolve(e.id,e.value)},function(e){a.error(e);t.reject(e)},false);this._oWrapper.submitBatchQueue(function(){},function(e){a.error(e);t.reject(e)});return t.promise()};return o},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/adapters/abap/ClientSideTargetResolutionAdapter", ["sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/util/isPlainObject","sap/base/util/deepExtend","sap/ushell/utils","sap/ushell/utils/UrlParsing","sap/base/Log","sap/ushell_abap/pbServices/ui2/ODataWrapper","sap/ushell_abap/pbServices/ui2/Utils","sap/ui/thirdparty/URI"],function(jQuery,e,t,a,r,i,n,s,o,l){"use strict";var p="sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter",u=["sap-wd-configId","SAP-WD-CONFIGID","sap-client","SAP-CLIENT","System","SYSTEM","sap-language","SAP-LANGUAGE","sap-wd-htmlrendermode","sap-wd-deltarendering","wdallowvaluesuggest","sap-wd-lightspeed","sap-wd-remotedesktop","sap-wd-flashdebug","sap-accessibility","sap-theme","sap-*","SAP-*","wd*","WD*"];var f=function(e,t,a){var i=this;var o=sap.ushell.Container,l="";if(o){l=o.getLogonSystem().getProductName()||""}this._oLocalSystemAlias={http:{id:"",host:"",port:"",pathPrefix:"/sap/bc/"},https:{id:"",host:"",port:"",pathPrefix:"/sap/bc/"},rfc:{id:"",systemId:"",host:"",service:0,loginGroup:"",sncNameR3:"",sncQoPR3:""},id:"",label:"local",client:"",language:"",properties:{productName:l}};this.hasSegmentedAccess=true;this._oAdapterConfig=a&&a.config;this._wdLengthLimit=1800;this._oODataWrapper=undefined;this._getODataWrapper=function(){if(!this._oODataWrapper){this._oODataWrapper=s.createODataWrapper("/sap/opu/odata/UI2/INTEROP/")}return this._oODataWrapper};this._aTargetMappings=[];this._aInbounds=[];this._aInitialSegment=undefined;this._oSystemAliasBuffer=new r.Map;this._oURLTemplates={};this._storeFromFullStartupResponse=function(e){if(e){if(e.targetMappings){i._aTargetMappings=e.targetMappings}if(e.systemAliases){i._writeUserSystemAliasesToBuffer(e.systemAliases)}if(e.urlTemplates){i._oURLTemplates=e.urlTemplates}}};this._fallbackToFullStartupRequest=function(e,t){n.debug("Falling back to full start_up request from adapter","","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");i._requestAllTargetMappings().done(function(t){i._storeFromFullStartupResponse(t);e()}).fail(function(e){t(e)})};this._iTargetMappingsUnusedPromiseRejectCount=0;this._oInitialSegmentPromise=a&&a.config&&a.config.initialSegmentPromise||new Promise(function(e,t){i._iTargetMappingsUnusedPromiseRejectCount++;if(i._iTargetMappingsUnusedPromiseRejectCount===2){i._fallbackToFullStartupRequest(e,t)}});this._oNavTargetPromise=a&&a.config&&a.config.navTargetDataPromise||new Promise(function(e,t){i._iTargetMappingsUnusedPromiseRejectCount++;if(i._iTargetMappingsUnusedPromiseRejectCount===2){i._fallbackToFullStartupRequest(e,t)}});this._oInitialSegmentPromise.then(function(e){if(e===null){n.debug("Initial target mappings segment promise resolved with 'null'","Will not process initial target mappings segments again (mostly likely because this is no longer needed)","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");return}if(i._aTargetMappings.length===0){n.debug("Segmented start_up response returned","storing system aliases and inbounds from segment","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");var t=e[0],a=e[1],r=e[2];if(e.length>3){i._oURLTemplates=e[3]}i._aTargetMappings=a;i._writeUserSystemAliasesToBuffer(r);i._aInitialSegment=t}else{n.debug("Segmented start_up response returned","ignoring response because the full target mapping response returned before","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter")}}).catch(function(e){n.error("Initial segment promise was rejected.",e,"sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter")});this._oNavTargetPromise.then(function(e){n.debug("Full start_up response returned","storing system aliases and inbounds","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");i._storeFromFullStartupResponse(e)})};f.prototype._adjustNavTargetResult=function(e){if(e){var t=e.url,a,r={applicationType:e.applicationType,additionalInformation:e.applicationData},i,s,p,u;if(e.text){r.text=e.text}if(e.applicationType==="URL"||e.applicationType==="SAPUI5"){s=/^SAPUI5\.Component=(.*)/.exec(e.applicationData);i=s&&s[1];if(i||e.applicationDependencies){if(i){r.ui5ComponentName=i}if(e.applicationDependencies){try{p=JSON.parse(e.applicationDependencies);u=p.self;if(!r.ui5ComponentName&&u.name){r.ui5ComponentName=u.name;r.additionalInformation="SAPUI5.Component="+r.ui5ComponentName}if(u&&u.url&&typeof u.url==="string"){a=t&&new l(t);if(a){if(u.url.toUpperCase().indexOf(a.path().toUpperCase())!==0){n.debug("Component URL defined in target mapping "+"does not match the URL retrieved from application index. "+"The URL of the application index is used for further processing.","Target mapping URL: "+e.url+"\nApplication index URL: "+u.url,"sap.ushell_abap.bootstrap.abap")}a.path(u.url);t=a.toString();n.debug("ResolveLink result's component url has been replaced with the url specified "+"in Application Dependencies, which includes cache buster token")}else{t=u.url}}r.applicationDependencies=p}catch(e){n.error("Parsing of applicationDependencies attribute in resolveLink result failed for SAPUI5 component '"+i+"'",e,"sap.ushell_abap.bootstrap.abap")}}t=o.addCacheBusterTokenUsingUshellConfig(t)}}r.url=t;return r}};f.prototype.resolveHashFragmentFallback=function(e,t,a){var r=this._constructShellHashForLpdCust(t,a),i=a&&a["sap-system"]&&a["sap-system"][0],n=new jQuery.Deferred;this._resolveHashFragmentBE(r||e).done(function(e){if(e&&i){e["sap-system"]=e["sap-system"]||i}n.resolve(e)}).fail(n.reject.bind(n));return n.promise()};f.prototype.getInbounds=function(e){var t=new jQuery.Deferred,a=this;this._oInitialSegmentPromise.then(function(r){if(r===null){return}if(a._isInSegment(e,a._aInitialSegment)){n.debug("Got inbounds from initial segment","","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");a._aInbounds=a._formatDirectStart(a._aTargetMappings);t.resolve(a._aInbounds)}else{n.debug("Did not get inbound in initial segment","","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter")}});this._oNavTargetPromise.then(function(){n.debug("Got inbounds from full start_up response","","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");a._aInbounds=a._formatDirectStart(a._aTargetMappings);a.getInbounds=function(){return(new jQuery.Deferred).resolve(a._aInbounds).promise()};t.resolve(a._aInbounds)},function(e){t.reject(e)});return t.promise()};f.prototype._isInSegment=function(e,t){if(!Array.isArray(t)||!Array.isArray(e)){return false}return e.every(function(e){return!t.every(function(t){return!(e.semanticObject===t.semanticObject&&e.action===t.action)})})};f.prototype._requestAllTargetMappings=function(){var t=o.getParameterMap();var a=new jQuery.Deferred;var i="/sap/bc/ui2/start_up?so=%2A&action=%2A&",n=e.create("services.targetMappings",this._oAdapterConfig).cacheId&&"&sap-cache-id="+e.create("services.targetMappings",this._oAdapterConfig).cacheId||"";function s(e){var a=t[e];if(a){i+=e+"="+encodeURIComponent(a[0])+"&"}}s("sap-language");s("sap-client");o.get(i+"&shellType="+r.getShellType()+"&depth=0"+n,false,function(e){var t=JSON.parse(e);if(!t){a.reject("Malformed Full TM Result")}a.resolve(t)},function(e){a.reject(e)});return a.promise()};f.prototype._formatDirectStart=function(e){var r=this;if(!e){this._aInitialSegment=undefined;return[]}function i(e,i){var s={};var o=e.match(/^([^-]+)-([^~]+)/);if(!o){n.warning("The target mapping id "+e+" is not valid","this target mapping will be discarded","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");return undefined}if(!i.hasOwnProperty("text")){i.text=""}s.semanticObject=o[1];s.action=o[2];s.id=e;s.title=i.text;s.permanentKey="X-SAP-UI2-PAGE:"+i.catalogId+":"+i.tmChipId;s.contentProviderId="";var l={};["applicationType","applicationDependencies","applicationData","postParameters","text","url","systemAlias"].forEach(function(e){l[e]=i[e]});s.resolutionResult=f.prototype._adjustNavTargetResult(l);s.resolutionResult.additionalInformation=s.resolutionResult.additionalInformation||"";s.resolutionResult.appId=s.permanentKey;var p=s.resolutionResult,u=p.applicationType;if(e.indexOf("Shell-startWCF")===0&&u==="URL"){s.resolutionResult.systemAliasSemantics="apply"}s.resolutionResult.applicationType=r._formatApplicationType(e,s.resolutionResult);s.resolutionResult.systemAlias=i.systemAlias||"";s.deviceTypes=i.formfactors;s.resolutionResult["sap.ui"]={};s.resolutionResult["sap.ui"].technology=s.resolutionResult.applicationType;if(s.resolutionResult["sap.ui"].technology==="SAPUI5"){s.resolutionResult["sap.ui"].technology="UI5"}if(s.resolutionResult["sap.ui"].technology==="TR"){s.resolutionResult["sap.ui"].technology="GUI"}if(!s.deviceTypes){s.deviceTypes=i.formFactors||{}}s.deviceTypes.desktop=s.deviceTypes.desktop||false;s.deviceTypes.phone=s.deviceTypes.phone||false;s.deviceTypes.tablet=s.deviceTypes.tablet||false;if(Array.isArray(i.signature)){s.signature={};s.signature.additionalParameters=i.allowParams?"allowed":"ignored";s.signature.parameters={};i.signature.forEach(function(e){var t={};var a;var i=e.name;if(e.defaultValue&&e.defaultValue.value){t.defaultValue={};t.defaultValue.value=e.defaultValue.value;t.defaultValue.format=e.defaultValue.format||"plain";a=r._extractUserDefaultValue(t.defaultValue.value);if(a){t.defaultValue={value:a,format:"reference"}}}if(e.filter&&e.filter.value){t.filter={};t.filter.value=e.filter.value;t.filter.format=e.filter.format||"plain";a=r._extractUserDefaultValue(t.filter.value);if(a){t.filter={value:a,format:"reference"}}}if(e.renameTo){t.renameTo=e.renameTo}t.required=e.required||false;s.signature.parameters[i]=t})}else{s.signature=a({parameters:{}},i.signature);s.signature.additionalParameters=s.signature.additionalParameters||(i.allowParams?"allowed":"ignored");Object.keys(s.signature.parameters).forEach(function(e){var t=s.signature.parameters[e];if(t.filter){t.filter.format=t.filter.format||"plain"}if(t.defaultValue){t.defaultValue.format=t.defaultValue.format||"plain"}t.required=t.required||false;if(t.filter&&t.filter.hasOwnProperty("format")&&!t.filter.hasOwnProperty("value")){delete t.filter}if(t.defaultValue&&t.defaultValue.hasOwnProperty("format")&&!t.defaultValue.hasOwnProperty("value")){delete t.defaultValue}})}var d=s.signature&&s.signature.parameters&&s.signature.parameters["sap-hide-intent-link"];if(d&&d.hasOwnProperty("defaultValue")){s.hideIntentLink=d.defaultValue.value==="true"}if(d&&!d.required&&d.hasOwnProperty("defaultValue")){delete s.signature.parameters["sap-hide-intent-link"]}if(typeof i.parameterMappings==="object"){Object.keys(i.parameterMappings).forEach(function(e){var t=i.parameterMappings[e];if(e&&t.target){s.signature.parameters[e]=s.signature.parameters[e]||{};s.signature.parameters[e].renameTo=t.target}})}if(s.resolutionResult.applicationType==="URL"&&t(i.urlTemplate)){s.templateContext=r.getUrlTemplateContext(i)}return s}var s=[];Object.keys(e).forEach(function(t){var a=i(t,e[t]);if(a){s.push(a)}});return s};f.prototype._formatApplicationType=function(e,t){var a=t.applicationType,r=t.url||"";function i(t,a){n.warning("Cannot detect application type for TargetMapping id '"+e+"', will default to "+a+" application type","TargetMapping URL is '"+r+"'",p)}if(a==="SAPUI5"){return"SAPUI5"}if(a==="URL"&&t.additionalInformation&&t.additionalInformation.indexOf("SAPUI5.Component=")===0){return"SAPUI5"}if(a==="WDA"||a==="TR"||a==="WCF"){return a}if(e.indexOf("Shell-startWCF")===0&&a==="URL"){return"WCF"}if(a==="NWBC"){if(r.indexOf("/~canvas;window=app/wda")>=0){return"WDA"}if(r.indexOf("/~canvas;window=app/transaction")>=0){return"TR"}i(t,"TR");return"TR"}if(a!=="URL"){i(t,"URL")}return"URL"};f.prototype._extractUserDefaultValue=function(e){var t,a=new RegExp("^%%(UserDefault[.].+)%%$"),r=a.exec(e);return r?r[1]:t};f.prototype._formatSignature=function(e,t){var a=this,r={parameters:{},additionalParameters:t===false?"ignored":"allowed"};if(!e.results){return r}e.results.forEach(function(t){var i,s=t.name,o,l;if(Object.prototype.hasOwnProperty.call(r.parameters,s)){n.error("Duplicate property name "+s+" in "+JSON.stringify(e),"ClientSideTargetResolutionAdapter._formatSignature")}r.parameters[s]={required:a._getObjectDefaulting(t,"required",false)};i=r.parameters[s];o=a._getObjectDefaulting(t,"value","");if(t.regexp===true){i.filter={value:o===""?".*":o,format:"regexp"};return}if(t.required===false){l=a._extractUserDefaultValue(o);if(l){i.defaultValue={value:l,format:"reference"};return}if(o!==""){i.defaultValue={value:o}}return}if(t.required===true&&t.value){l=a._extractUserDefaultValue(o);if(l){i.filter={value:l,format:"reference"};return}if(o!==""){i.filter={value:o}}}});return r};f.prototype._mergeParameterMappingsIntoSignature=function(e,t){var a=t.results;if(!a){return}a.forEach(function(t){var a=t.source;var r=t.target;if(r){e.parameters[a]=e.parameters[a]||{};if(e.parameters[a].renameTo){n.warning("duplicate parameter mapping for'"+a+"'","OData Parameter mappings is "+JSON.stringify(t,null,"   "),p)}e.parameters[a].renameTo=r}})};f.prototype._formatDeviceTypes=function(e){var t={},a=this;["desktop","tablet","phone"].forEach(function(r){t[r]=a._getObjectDefaulting(e,r,false)});return t};f.prototype._getObjectDefaulting=function(t,a,r){var i=e.get(a||"",t);return i===undefined?r:i};f.prototype._constructShellHashForLpdCust=function(a,r){var s="",o,l=e.get("resolutionResult._original",a);if(!t(l)){o="the given target mapping is not an object"}if(!o&&!l.hasOwnProperty("id")){o="no id found in target mapping _original object"}if(!o&&typeof l.id!=="string"){o="the target mapping id was not a string"}if(!o&&l.id.length===0){o="the target mapping id was an empty string"}if(o){n.error("Cannot construct Shell Hash for LPD_CUST resolution",o,"sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");return undefined}s+=l.id;var p=i.paramsToString(r);if(p.length>0){s+="?"+p}return s};f.prototype._openBatchQueueUnlessOpen=function(e){if(e.isBatchQueueOpen()){return false}e.openBatchQueue();return true};f.prototype._resolveHashFragmentBE=function(e){var t=new jQuery.Deferred,a=this,i,s=o.getFormFactor();function l(e){return encodeURIComponent(e).replace(/'/g,"''")}i=this._openBatchQueueUnlessOpen(this._getODataWrapper());function p(e,t){if(e){t+=t.indexOf("?")<0?"?":"&";t+=e}return t}this._oODataWrapper.read("ResolveLink?linkId='"+l(e)+"'&shellType='"+r.getShellType()+"'"+(s?"&formFactor='"+l(s)+"'":""),function(r){var i,s="",o;if(r.results.length){if(r.results.length>1){for(i=0;i<r.results.length;i+=1){delete r.results[i].__metadata;s+=(i===0?"used target: ":"\nignored target: ")+JSON.stringify(r.results[i])}n.error("INTEROP service's ResolveLink operation "+"returned "+r.results.length+" targets for hash '#"+e+"', first one is used.",s,"sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter")}r=r.results[0];o=f.prototype._adjustNavTargetResult(r);o.url=p(r.postParameters,o.url);if(o&&o.applicationType==="SAPUI5"){o.applicationType="URL"}a._compactTooLongWdaUrl(o).done(function(e){t.resolve(e)}).fail(function(a){t.reject("Could not resolve link '"+e+"' due to compactation failure"+a)})}else{t.reject("Could not resolve link '"+e+"'")}},function(e){t.reject(e)});if(i){a._getODataWrapper().submitBatchQueue(function(){},t.reject.bind(t))}return t.promise()};f.prototype._compactTooLongWdaUrl=function(e){var t=new jQuery.Deferred;var a=e&&e.url;if(e&&e.applicationType==="NWBC"&&a&&a.indexOf("/ui2/nwbc/~canvas;window=")===0&&a.length>this._getWDAUrlShorteningLengthLimit()){this._compactUrl(a).done(function(a){e.url=a;t.resolve(e)}).fail(t.reject)}else{t.resolve(e)}return t.promise()};f.prototype._compactUrl=function(e){var t=e.match(/\?.*/);var a=t&&t[0];var r=this._getWDAUrlShorteningLengthLimit()-200;var n=new jQuery.Deferred;if(a&&a.length<r){return n.resolve(e).promise()}var s=i.parseParameters(t[0]);sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(t){t.compactParams(s,u,undefined).done(function(t){var a=e.match(/^[^?]*/)[0]+"?"+i.paramsToString(t);n.resolve(a)}).fail(n.reject)}).catch(n.reject);return n.promise()};f.prototype._getWDAUrlShorteningLengthLimit=function(){var e=r.getParameterValueBoolean("sap-ushell-nowdaurlshortening");if(e){return 6e6}return this._wdLengthLimit};f.prototype.resolveSystemAlias=function(e){var t,a=new jQuery.Deferred,r=this,i;i=this._readSystemAliasFromBuffer(e);if(i){n.debug("System alias '"+e+"' was already buffered","","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");window.setTimeout(function(){a.resolve(i)},0)}else{n.debug("System alias '"+e+"' is not in buffer","","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");var s=function(){i=r._readSystemAliasFromBuffer(e);if(i){n.debug("System alias '"+e+"' is now in buffer","Skipping INTEROP service call","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");a.resolve(i)}else{n.debug("System alias '"+e+"' still not in buffer","Resolving via INTEROP service","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");r._readSystemAliasViaInterop(e).fail(function(e){a.reject(e)}).done(function(e){i=r._fixSystemAlias(e);if(i&&i.id){r._writeSystemAliasToBuffer(i);a.resolve(i)}else{t="Data returned for system alias is not valid";n.warning("ClientSideTargetResolutionAdapter: "+t);a.reject(t)}})}};this._oInitialSegmentPromise.then(s,s)}return a.promise()};f.prototype._writeUserSystemAliasesToBuffer=function(e){var a=this;if(typeof e==="undefined"){return}if(t(e)){Object.keys(e).forEach(function(t){a._writeSystemAliasToBuffer(a._fixSystemAlias(e[t]))});return}e.forEach(function(e){a._writeSystemAliasToBuffer(a._fixSystemAlias(e))})};f.prototype._readSystemAliasFromBuffer=function(e){var t=this._oSystemAliasBuffer.get(e);if(e===""){if(!t){return this._oLocalSystemAlias}t.properties=a({},this._oLocalSystemAlias.properties,t.properties||{})}return t};f.prototype._writeSystemAliasToBuffer=function(e){if(e&&e.id){this._oSystemAliasBuffer.put(e.id,e)}return e};f.prototype._fixSystemAlias=function(e){e=e||{};delete e.__metadata;var t={};t.id=e.id||"";t.client=e.client||"";t.language=e.language||"";["http","https"].forEach(function(r){if(e.hasOwnProperty(r)){delete e[r].__metadata;if(e[r].id!==""){t[r]=a({id:"",host:"",port:"",pathPrefix:""},e[r])}}});if(e.hasOwnProperty("rfc")&&e.rfc.id){delete e.rfc.__metadata;t.rfc=a({id:"",systemId:"",host:"",service:0,loginGroup:"",sncNameR3:"",sncQoPR3:""},e.rfc)}return t};f.prototype._readSystemAliasViaInterop=function(e){var t=new jQuery.Deferred,a="SystemAliases(id='"+encodeURIComponent(e)+"')?$format=json";this._getODataWrapper().read(a,function(e){t.resolve(e)},function(e){t.reject(e)});return t.promise()};f.prototype.getSystemAliases=function(){return this._oSystemAliasBuffer&&this._oSystemAliasBuffer.entries||{}};f.prototype.getUrlTemplateContext=function(e){var t=this._oURLTemplates[e.urlTemplate.id];if(!t){n.error("No URL template found.");return null}var a={systemAliases:this.getSystemAliases(),urlTemplates:this._oURLTemplates};return{payload:t.payload,site:a,siteAppSection:e}};return f},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/adapters/abap/ConfigurationDefaultsAdapter", ["sap/ushell_abap/bootstrap/evo/abap.constants","sap/base/util/deepClone"],function(e,t){"use strict";return function(){this.getDefaultConfig=function(){return Promise.resolve(t(e.defaultUshellConfig))}}},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/adapters/abap/ContainerAdapter", ["sap/ui/thirdparty/jquery","sap/ushell/System","sap/ushell/User","sap/ushell/utils","sap/ushell_abap/bootstrap/evo/abap.bootstrap.utils","sap/ushell_abap/pbServices/ui2/ODataWrapper","sap/ui/thirdparty/URI","sap/ui/thirdparty/datajs","sap/base/util/ObjectPath","sap/base/Log"],function(jQuery,e,t,a,i,s,r,n,o,l){"use strict";var u=function(d,c,f){var p,m="/sap/public/bc/icf/logoff";this._logoutViaHiddenIFrame=function(e,t){var a=document.createElement("iframe"),i=t.replace(/"/g,'\\"');window.addEventListener("message",function(a){if(a.data===t){e.resolve()}});a.style.visibility="hidden";a.setAttribute("src",t);function s(){parent.postMessage(i,"*")}a.addEventListener("load",s);a.addEventListener("error",s);document.body.appendChild(a)};this.getSystem=function(){return d};this.getUser=function(){return p};this._determineAccessibility=function(e){var t=a.getParameterValueBoolean("sap-accessibility");if(t!==undefined){return t}t=e.accessibility;if(t!==undefined){return t}return false};this._setThemeAccessibilityFlags=function(e){if(e.userProfile&&e.userProfile.length){var t,a;t=e.userProfile.filter(function(e){return e.id&&e.id==="THEME"})[0];if(t&&t.value){e.setThemePermitted=t.editState===3}else{e.oUserProfileDataTheme=false}a=e.userProfile.filter(function(e){return e.id&&e.id==="ACCESSIBILITY"})[0];if(a&&a.id){e.setAccessibilityPermitted=a.editState===3}else{e.setAccessibilityPermitted=false}if(a&&a.value==="true"){e.accessibility=true}if(a&&a.value==="false"){e.accessibility=false}e.accessiblity=this._determineAccessibility(e)}};this._setUserProfileFlags=function(e){if(e.userProfile&&e.userProfile.length&&Array.isArray(e.userProfile)){var t={};e.setContentDensityPermitted=false;e.userProfile.forEach(function(a){if(a.id in t){return}t[a.id]=a.id;if(a.id==="CONTENT_DENSITY"){e.contentDensity=a.value;e.setContentDensityPermitted=a&&a.editState===3||false}if(a.id==="TRACKING_USAGE_ANALYTICS"){if(typeof a.value==="string"){if(a.value.toLowerCase()==="true"||a.value.toLowerCase()==="false"){a.value=a.value.toLowerCase()==="true"||false}else{a.value=undefined}}if(typeof a.value==="undefined"||typeof a.value==="boolean"){e.trackUsageAnalytics=a.value}else{e.trackUsageAnalytics=undefined}}if(a.id==="MYHOME_IMPORT_FROM_CLASSIC"){e.importBookmarks=a.value}if(a.id==="MYHOME_ENABLEMENT"){switch(a.value){case"false":e.showMyHome=false;break;case"true":e.showMyHome=true;break;default:e.showMyHome=undefined;break}}if(a.id==="THEME_DARKMODE_AUTO_DETECTION"){switch(a.value){case"false":e.detectDarkMode=false;break;case"true":e.detectDarkMode=true;break;default:e.detectDarkMode=undefined;break}}})}};this.load=function(){var a=new jQuery.Deferred,i=f.config,r=i.systemProperties;d=new e({alias:d.getAlias(),platform:d.getPlatform(),baseUrl:i.baseUrl,client:i.client,clientRole:i.clientRole,system:i.system,productName:r&&r.productName,systemName:r&&r.systemName,systemRole:r&&r.systemRole,tenantRole:r&&r.tenantRole,productVersion:i.productVersion,isTrialSystem:i.isTrialSystem});this._setThemeAccessibilityFlags(i);this._setUserProfileFlags(i);p=new t(i);s["sap-language"]=i.language;s["sap-client"]=i.client;if(i.target){u.startUpApplication={adjustedInitialTarget:i.adjustedInitialTarget,target:i.target}}this._setUserImage(p);return a.resolve().promise()};this.addFurtherRemoteSystems=function(){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("PageBuilding").then(function(a){a.getFactory().getPageBuildingService().readAllCatalogsForUser("type eq 'H' or type eq 'REMOTE'",function(a){var i="/sap/opu/odata/sap/SM_CATALOG_SRV/";if(a.results){a.results.forEach(function(t){var a=/^\/sap\/hba\//.test(t.baseUrl);if(t.type==="H"||t.baseUrl===i||a){sap.ushell.Container.addRemoteSystem(new e({alias:t.systemAlias,platform:a||t.type==="H"?"hana":"abap",baseUrl:t.type==="H"?"":";o="}))}})}t.resolve()},function(e){l.error("Reading REMOTE catalogs failed: "+e,null,"sap.ushell_abap.adapters.abap.ContainerAdapter");t.reject()})}).catch(t.reject);return t.promise()};this.getCurrentUrl=function(){return window.location.href};this.sessionKeepAlive=function(){var e="/sap/opu/odata/UI2/PAGE_BUILDER_PERS";var t=i.createAndOpenXHR(e,null,"HEAD");t.onreadystatechange=function(){if(this.readyState===4){l.debug("server session was extended")}};t.send()};this.logout=function(e){var t=new jQuery.Deferred,i;if(e){if(a.hasNativeLogoutCapability()){var s=new r(m).absoluteTo(this.getCurrentUrl()).search("").toString();window.external.getPrivateEpcm().doLogOff(s)}else{this.logoutRedirect()}l.info("ABAP system logged out: "+d.getAlias(),null,"sap.ushell_abap.adapters.abap.ContainerAdapter");t.resolve()}else{i=d.adjustUrl(m);l.info("Logging out from system '"+d.getAlias()+"' via hidden iframe");this._logoutViaHiddenIFrame(t,i)}return t.promise()};this.logoutRedirect=function(){var e=d.adjustUrl(m);this._setDocumentLocation(e)};this._setDocumentLocation=function(e){window.document.location=e};this._setUserImage=function(e){function t(){var e=window["sap-ushell-config"],t=o.get("renderers.fiori2.componentData.config.enableUserImage",e);return!!t}if(t()&&e&&e.isJamActive&&e.isJamActive()){n.read("/sap/bc/ui2/smi/rest_tunnel/Jam/api/v1/OData/Self?$format=json",function(t){var a=t.results.Id,i="/sap/bc/ui2/smi/rest_tunnel/Jam/api/v1/OData/Members('"+a+"')/ProfilePhoto/$value";e.setImage(i)},function(){l.error("Could not recieve JAM user data")})}}};return u},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/adapters/abap/LaunchPageAdapter", ["sap/ui/thirdparty/URI","sap/ushell/components/cards/ManifestPropertyHelper","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/util/isEmptyObject","sap/m/GenericTile","sap/ushell/Config","sap/base/util/deepExtend","sap/ushell/utils/chipsUtils","sap/ushell_abap/pbServices/ui2/Utils","sap/ushell_abap/pbServices/ui2/Page","sap/ushell_abap/pbServices/ui2/Error","sap/base/Log","sap/m/library","sap/ushell/ui/tile/StaticTile","sap/ushell/utils","sap/ushell_abap/pbServices/ui2/contracts/preview"],function(e,t,jQuery,i,r,n,a,o,s,u,l,c,g,f,p,d,h){"use strict";var v=f.LoadState;var _="sap.ushell_abap.adapters.abap.LaunchPageAdapter",C="/UI2/Fiori2LaunchpadHome",m="/UI2/FLPD_CATALOG",y="X-SAP-UI2-CHIP:/UI2/DYNAMIC_APPLAUNCHER",b="X-SAP-UI2-CHIP:/UI2/STATIC_APPLAUNCHER",T="X-SAP-UI2-CHIP:/UI2/CARD",I={catalogTileNotFound:"catalogTileNotFound",referenceTileNotFound:"referenceTileNotFound",noTargetMapping:"noTargetMapping",emptyConfiguration:"emptyConfiguration",tileIntentSupportException:"tileIntentSupportException"};var P="/UI2/FLPNoActionChip";var S=function(f,w,O){var k,A,E,j=new u.Map,x=O&&O.config||{},D=x.services&&x.services.launchPage,B={},N=this;this._oCurrentPageSet=null;this._bPageSetFullyLoaded=false;this._aOtherChipsPromises=[];h.setEnvironmentType("runtime");function L(e,t,i){try{return e.getImplementationAsSapui5()}catch(e){g.error(i+": "+(e.message||e),e.stack,_);return new p({icon:"sap-icon://error",info:"",infoState:"Critical",subtitle:e.message||e,title:t}).addStyleClass("sapUshellTileError")}}S.prototype._getBagText=function(e,t,i){if(e.getBagIds().indexOf(t)>-1&&e.getBag(t).getTextNames().indexOf(i)>-1){return e.getBag(t).getText(i)}return undefined};S.prototype._getConfigurationProperty=function(e,t,i){var r,n;try{r=e.getConfigurationParameter(t);n=JSON.parse(r)}catch(e){return undefined}if(n[i]!==undefined){return n[i]}return undefined};S.prototype._orderBasedOnConfiguration=function(e,t){var i=e&&u.isArray(e.order)?e.order:[],r={},n=[],a,o,s,l;i=i.concat(e&&u.isArray(e.linkOrder)?e.linkOrder:[]);for(s=0,l=t.length;s<l;s+=1){a=t[s];r[a.getId()]=a}for(s=0,l=i.length;s<l;s+=1){o=i[s];if(Object.prototype.hasOwnProperty.call(r,o)){n.push(r[o]);delete r[o]}}for(s=0,l=t.length;s<l;s+=1){a=t[s];if(Object.prototype.hasOwnProperty.call(r,a.getId())){n.push(a)}}return n};function R(e,t,i){if(i==="link"){return F(e.linkOrder,t.getId())}return F(e.order,t.getId())}function F(e,t){var i=e.indexOf(t);if(i<0){return i}e.splice(i,1);return i}function U(e,t,i,r){if(r==="link"){i=i-e.order.length;e.linkOrder.splice(i,0,t)}else{e.order.splice(i,0,t)}}function G(e,t){var i=t.getGroupTiles(e),r={order:[],linkOrder:[]};i.forEach(function(e){var i=t.getTileType(e);if(i==="link"){r.linkOrder.push(e.getId())}else{r.order.push(e.getId())}});return r}function M(){var e;try{e=JSON.parse(N._oCurrentPageSet.getConfiguration());e.order.splice(0,0,N._oCurrentPageSet.getDefaultPage().getId())}catch(t){e={order:[N._oCurrentPageSet.getDefaultPage().getId()]}}return S.prototype._orderBasedOnConfiguration(e,N._oCurrentPageSet.getPages())}this.hideGroups=function(e){var t,i=new jQuery.Deferred;if(!e||!(e instanceof Array)){i.reject("Input parameter must be of type Array.")}else{t=JSON.parse(N._oCurrentPageSet.getConfiguration()||"{}");t.hiddenGroups=e;N._oCurrentPageSet.setConfiguration(JSON.stringify(t),i.resolve.bind(i),i.reject.bind(i))}return i.promise()};this.isGroupVisible=function(e){var t=N._oCurrentPageSet.getConfiguration(),i,r,n;if(!t){return true}i=JSON.parse(t);if(!i||!i.hiddenGroups){return true}r=i.hiddenGroups;for(n=0;n<r.length;n+=1){if(r[n]===e.getId()){return false}}return true};S.prototype._triggerChipInstanceLoad=function(e){function t(){if(e._loadingDeferred){e._loadingDeferred.resolve()}delete e._loadingDeferred;delete e.$loadingPromise}function i(t){g.error("Failed to load tile: "+t,e.toString(),_);if(e._loadingDeferred){e._loadingDeferred.reject()}delete e._loadingDeferred;delete e.$loadingPromise}e.load(t,i)};this._loadApplaunchersAndDelayLoadingOfOtherChips=function(e,t){var i=0,r=[],n=[];function a(){if(i<=0){t()}}function o(e){e._loadingDeferred=new jQuery.Deferred;e.$loadingPromise=e._loadingDeferred.promise();N._aOtherChipsPromises.push(new Promise(function(t,i){e.$loadingPromise.done(t).fail(i)}));if(window["sap-ui-debug"]===true){S.prototype._triggerChipInstanceLoad(e)}else{sap.ui.require(["sap/ushell/EventHub"],function(t){var i=t.on("CoreResourcesComplementLoaded");i.do(function(t){if(t.status==="success"){S.prototype._triggerChipInstanceLoad(e);i.off()}else{g.error("Did not load custom tile as core resources where not loaded",null,_)}})})}}function s(e){function t(){i-=1;a()}i+=1;e.load(t,function(i){g.error("Failed to load tile: "+i,e.toString(),_);t()})}e.forEach(function(e){e.getChipInstances().forEach(function(e){if($(e)){n.push(e)}else if(K(e)){}else if(q(e)||z(e)){s(e)}else{r.push(e)}})});r.forEach(function(e){o(e)});n.forEach(function(e){o(e)});a()};S.prototype._readTargetMappings=function(){var e=new jQuery.Deferred,t,r,n;function a(e){var t=[];var i=e.targetMappings||e||{};Object.keys(i).forEach(function(e){var r={};["semanticObject","semanticAction","formFactors"].forEach(function(t){r[t]=i[e][t]});t.push(r)});return t}if(i.get("compactTMPromise",x)){x.compactTMPromise.then(function(t){var i=a(t||{});e.resolve({results:i})},function(t){e.reject(t)});return e.promise()}t=i.create("services.targetMappings",x);r=t.cacheId||"";n="/sap/bc/ui2/start_up?so=%2A&action=%2A&tm-compact=true&shellType="+d.getShellType()+"&depth=0";if(r){n+=(n.indexOf("?")<0?"?":"&")+"sap-cache-id="+r}var o=t.sUI2CacheDisable;if(o){n+=(n.indexOf("?")<0?"?":"&")+"sap-ui2-cache-disable="+o}u.get(n,false,function(t){var i=JSON.parse(t),r=i.targetMappings||{},n=a(r);e.resolve({results:n})},function(t){e.reject(t)});return e.promise()};S.prototype._makeTargetMappingSupportKey=function(e,t){return e+"-"+t};S.prototype._isWrapperOnly=function(e){return!e.getConfiguration()};function J(e,t){var i=[];t.forEach(function(t){var r=t.getRemoteCatalog(),n;if(t.getBaseChipId()==="X-SAP-UI2-CHIP:/UI2/ACTION"){return}n=e.createChipInstance({chipId:t.getId(),remoteCatalogId:r&&r.getId()});i.push(n)});return i}function H(e){var t=N._oCurrentPageSet.getDefaultPage().getAllCatalogs(),i,r=t.getCatalogs(),n=[],a;for(a=0;a<r.length;a+=1){i=r[a];n.push({data:{},errorMessage:undefined,id:i.getId(),title:i.isStub()?i.getId():i.getTitle(),tiles:i.isStub()?[]:J(e,i.getChips()),ui2catalog:i})}return n}function q(e){var t=e.getChip().getBaseChipId();return t===y||t===b}function z(e){var t=e.getChip().getBaseChipId();return T===t}function $(e){return!!e.getChip().getRemoteCatalog()}function K(e){return!$(e)&&e.getChip().getBaseChipId()===undefined}function V(e){var t,i=e.getConfigurationParameter("tileConfiguration");try{t=JSON.parse(i||"{}")}catch(t){g.error("Tile with ID '"+e.getId()+"' has a corrupt configuration containing a 'tileConfiguration' value '"+i+"' which could not be parsed. If present, a (stringified) JSON is expected as value.",t.message,"sap.ushell_abap.adapters.abap.LaunchPageAdapter");return{}}return t}function W(e){var t={},i,r,n;try{i=JSON.parse(e.getChip()._getChipRawConfigurationString());r=JSON.parse(i&&i.tileConfiguration||"{}");n=JSON.parse(r&&r.TILE_PROPERTIES||"{}");if(n.semanticObject&&n.semanticAction){t.navigation_use_semantic_object=true;t.navigation_semantic_object=n.semanticObject;t.navigation_semantic_action=n.semanticAction}}catch(e){return{}}return t}function X(e){var t,i,r;if(e.getChip().getBaseChipId()==="X-SAP-UI2-CHIP:/UI2/AR_SRVC_NEWS"){return{navigation_use_semantic_object:true,navigation_semantic_object:"NewsFeed",navigation_semantic_action:"displayNewsList",navigation_semantic_parameters:"",navigation_target_url:"#NewsFeed-displayNewsList"}}t=W(e);if(t.navigation_use_semantic_object){return t}try{r=JSON.parse(e.getChip()._getChipRawConfigurationString());i=JSON.parse(r&&r.tileConfiguration||"{}")}catch(e){return{}}return i}this._parseFullChipId=function(e){var t=e.split(":"),i=t.pop(),r=null;if(t.length>2){r=t.shift()}return{id:i,prefix:r,catalog:t.join(":")}};this.getTargetMappingSupport=function(){return j};this._parseReferenceLost=function(e){var t,i=e||Object.prototype.toString.apply(i);if(!i.match(/^Reference lost: Note \d+ Page.+\s,\sInstance ID.+$/)){g.warning("The string that describes a lost reference is in an unexpected format","This is expected to be a string exactly like 'Reference lost: Note <#> Page <CATALOG_ID> , Instance ID <CHIP_ID>' instead of the given '"+e+"'","sap.ushell_abap.adapters.abap.LaunchPageAdapter");return{id:"Unknown",catalog:"Unknown"}}t=i.split(" , ").map(function(e){return e.split(" ").pop()});return{id:t[1],catalog:t[0]}};this._flattenArray=function(e){var t=this;if(Object.prototype.toString.apply(e)!=="[object Array]"){return e}return e.reduce(function(e,i){return e.concat(t._flattenArray(i))},[])};this._findAndReportTileErrors=function(e,t){var i=this._getPossibleTileErrors(e,t);if(i.length>0){this._reportTileErrors(i)}};this._getPossibleTileErrors=function(e,t){var i=this;return e.map(function(e){return{group:{id:e.getId(),title:e.getTitle()},errors:i._getPossibleTileErrorsFromOnePage(e,t)}})};this._getPossibleTileErrorsFromOnePage=function(e,t){var i=this;var r=e.getChipInstances().reduce(function(e,r){var n,a,o,s,u,l,c,g;g=r.getChip();a=i._parseFullChipId(g.getId());if(!g.isInitiallyDefined()){e.push({type:I.catalogTileNotFound,chipInstanceId:r.getId(),chipId:a.id,chipCatalogId:a.catalog})}else if(g.isReference()&&g.isBrokenReference()){u=i._parseReferenceLost(g.getTitle());e.push({type:I.referenceTileNotFound,chipInstanceId:r.getId(),referenceChipId:a.id,referenceChipCatalogId:a.catalog,missingReferredChipId:u.id,missingReferredCatalogId:u.catalog})}else{try{n=i._checkTileIntentSupport(r,t)}catch(e){n={isSupported:false,reason:I.tileIntentSupportException,exception:e}}if(!n.isSupported){s=i._getBagText(r,"tileProperties","display_title_text");o=i._getBagText(r,"tileProperties","display_subtitle_text");switch(n.reason){case I.noTargetMapping:if(q(r)){l=V(r)}else{l=X(r)}e.push({type:I.noTargetMapping,chipInstanceId:r.getId(),chipInstanceTitle:s||l.display_title_text||r.getTitle(),chipInstanceSubtitle:o||l.display_subtitle_text,tileURL:l.navigation_target_url||"#"+l.navigation_semantic_object+"-"+l.navigation_semantic_action+(l.navigation_semantic_parameters?"?"+l.navigation_semantic_parameters:"")});break;case I.emptyConfiguration:c=r.getConfigurationParameter("tileConfiguration");e.push({type:I.emptyConfiguration,chipInstanceId:r.getId(),chipInstanceTitle:s||r.getTitle(),chipInstanceSubtitle:o||null,tileConfiguration:c});break;case I.tileIntentSupportException:e.push({type:I.tileIntentSupportException,exception:n.exception,chipInstanceId:r.getId()});break;case I.referenceTileNotFound:break;default:}}}return e},[]);return r};this._formatTileError=function(e){switch(e.type){case I.catalogTileNotFound:return"comes from catalog tile with ID '"+e.chipId+"' but this cannot be found in catalog '"+e.chipCatalogId+"' (CATALOG TILE NOT FOUND).";case I.referenceTileNotFound:return"comes from reference tile '"+e.referenceChipId+"'"+" in catalog '"+e.referenceChipCatalogId+"'"+" which in turn refers to the tile '"+e.missingReferredChipId+"'"+" from catalog '"+e.missingReferredCatalogId+"', but this is missing (REFERENCED TILE NOT FOUND).";case I.noTargetMapping:return"was hidden because a target mapping for the tile URL '"+e.tileURL+"' was not found (TARGET MAPPING NOT FOUND).";case I.emptyConfiguration:return"the tile configuration '"+e.tileConfiguration+"' is empty or invalid (BAD CONFIGURATION).";case I.tileIntentSupportException:return"exception occurred while checking tile intent support: "+e.exception+" (EXCEPTION RAISED).";default:return"unknown error type '"+e.type+"' (UNKNOWN ERROR). Error data: "+JSON.stringify(e,null,3)}};this._reportTileErrors=function(e){var t=this;var i=[];var r=[];function n(e,t){var i=[e,t].map(function(e,t){return t===1&&e?"("+e+")":e}).filter(function(e){return typeof e==="string"&&e.length>0}).join(" ");return i.length>0?"'"+i+"'":""}e.forEach(function(e){var a="  in Group '"+e.group.title+"' with Group ID '"+e.group.id+"'",o=[],s=[];e.errors.forEach(function(e){var i=["  - tile instance",n(e.chipInstanceTitle,e.chipInstanceSubtitle),"with ID '"+e.chipInstanceId+"'"].filter(function(e){return e.length>0}).join(" ");if(e.type===I.noTargetMapping){s.push([i,"    "+t._formatTileError(e)].join("\n"))}else{o.push([i,"    "+t._formatTileError(e)].join("\n"))}});if(o.length>0){r.push([a,o.join("\n")].join("\n"))}if(s.length>0){i.push([a,s.join("\n")].join("\n"))}});if(r.length>0){r.unshift("Tile error(s) were detected:");g.error(r.join("\n"),null,"sap.ushell_abap.adapters.abap.LaunchPageAdapter")}if(i.length>0){i.unshift("Tile warning(s) were detected:");g.warning(i.join("\n"),null,"sap.ushell_abap.adapters.abap.LaunchPageAdapter")}};this.getGroups=function(){if(this._bPageSetFullyLoaded){return(new jQuery.Deferred).resolve(M()).promise()}if(!A){A=new jQuery.Deferred;var e=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("PageBuilding").then(function(t){var i=t.getFactory().getPageBuildingService().readPageSet;if(D&&D.cacheId){i.cacheBusterTokens.put(C,D.cacheId)}if(D&&D["sap-ui2-cache-disable"]&&i){var r=i.appendedParameters||{};r["sap-ui2-cache-disable"]=D["sap-ui2-cache-disable"];i.appendedParameters=r}var n=this._readTargetMappings().done(function(e){var t=u.getFormFactor();e.results.forEach(function(e){var i=S.prototype._makeTargetMappingSupportKey(e.semanticObject,e.semanticAction);j.put(i,j.get(i)||!!(e.formFactors&&e.formFactors[t]))})});if(a.last("/core/spaces/enabled")){var o=t.getFactory();var s=new l(o,{id:P});N._oCurrentPageSet={getDefaultPage:function(){return s},getPages:function(){return[s]},appendPage:function(){throw new Error("Not implemented in Pages Runtime")},isPageRemovable:function(){return false},removePage:function(){throw new Error("Not implemented in Pages Runtime")},isPageResettable:function(){return true},resetPage:function(){},getConfiguration:function(){return"{}"},setConfiguration:function(){},filter:function(){}};A.resolve([])}else{var c=t.getPageSet(C);c.fail(e.reject.bind(e)).done(function(t){this._oCurrentPageSet=t;this._oCurrentPageSet.filter([C],[m]);this._loadApplaunchersAndDelayLoadingOfOtherChips(t.getPages(),e.resolve.bind(e,t))}.bind(this));jQuery.when(n,e).done(function(e,t){this._bPageSetFullyLoaded=true;if(g.getLevel()>=g.Level.DEBUG){this._findAndReportTileErrors(t.getPages(),j)}A.resolve(M())}.bind(this)).fail(A.reject.bind(A))}}.bind(this))}return A.promise()};this.getGroupsAndWaitForAllChips=function(){return new Promise(function(e,t){N.getGroups().done(e).fail(t)}).then(function(e){return Promise.allSettled(N._aOtherChipsPromises).then(function(){return e})})};this.getDefaultGroup=function(){var e=new jQuery.Deferred;this.getGroups().done(function(){e.resolve(N._oCurrentPageSet.getDefaultPage())}).fail(e.reject.bind(e));return e.promise()};this.getGroupTitle=function(e){return e.getTitle()};this.getGroupId=function(e){return e.getId()};this.getGroupTiles=function(e){var t;try{t=JSON.parse(e.getLayout())}catch(t){g.warning("Group "+e.getId()+": invalid layout: "+e.getLayout(),null,_)}return this._orderBasedOnConfiguration(t,e.getChipInstances())};this.addGroup=function(e){var t=new jQuery.Deferred;N._oCurrentPageSet.appendPage(e,m,t.resolve.bind(t),t.reject.bind(t,M()));return t.promise()};this.removeGroup=function(e){var t=new jQuery.Deferred;if(N._oCurrentPageSet.isPageRemovable(e)){N._oCurrentPageSet.removePage(e,t.resolve.bind(t),t.reject.bind(t,M()))}else{t.reject(M())}return t.promise()};this.resetGroup=function(e){var t=new jQuery.Deferred,i=this;if(i._oCurrentPageSet.isPageRemovable(e)){t.reject(M())}else if(i._oCurrentPageSet.isPageResettable(e)){i._oCurrentPageSet.resetPage(e,function(){i._loadApplaunchersAndDelayLoadingOfOtherChips([e],t.resolve.bind(t,e))},t.reject.bind(t,M()))}else{t.resolve(e)}return t.promise()};this.isGroupRemovable=function(e){return N._oCurrentPageSet.isPageRemovable(e)};this.isGroupLocked=function(e){return e.isPersonalizationLocked()};this.isLinkPersonalizationSupported=function(e){if(!e){return true}if(!e.isStub()){var t=e.getContract&&e.getContract("types"),i=t&&t.getAvailableTypes()||[];return i.indexOf("link")!==-1}return false};this.isTileIntentSupported=function(e){var t,i,r,n,a=this._checkTileIntentSupport(e,j);if(!a.isSupported&&a.reason===I.noTargetMapping){if(q(e)){t=V(e)}else{t=X(e)}n=this._getBagText(e,"tileProperties","display_title_text")||t.display_title_text;r=this._getBagText(e,"tileProperties","display_subtitle_text")||t.display_subtitle_text;i=t.navigation_target_url;g.warning("Group tile with ID '"+e.getId()+"' is filtered out as the current user has no target mapping assigned for the intent '"+i+"'","\nGroup Tile ID: '"+e.getId()+"'\n"+"Title: '"+n+"'\n"+"Subtitle: '"+r+"'\n"+"Intent: '"+i+"' - ","sap.ushell_abap.adapters.abap.LaunchPageAdapter")}return a.isSupported};this._checkTileIntentSupport=function(e,t){var i,n;var a=S.prototype._makeTargetMappingSupportKey;if(!q(e)){i=X(e);if(!i.navigation_use_semantic_object||!i.navigation_semantic_object||!i.navigation_semantic_action){return{isSupported:true}}n=t.get(a(i.navigation_semantic_object,i.navigation_semantic_action));if(!n){n=t.get(a("*",i.navigation_semantic_action))}if(!n){return{isSupported:false,reason:I.noTargetMapping}}return{isSupported:true}}if(e.isStub()){throw new c("Applauncher Tile not loaded completely","sap.ushell_abap.adapters.abap.LaunchPageAdapter")}if(e.getChip()&&typeof e.getChip().isBrokenReference==="function"&&e.getChip().isBrokenReference()){return{isSupported:false,reason:I.referenceTileNotFound}}i=V(e);if(r(i)){return{isSupported:false,reason:I.emptyConfiguration}}if(!i.navigation_use_semantic_object){return{isSupported:true}}n=t.get(a(i.navigation_semantic_object,i.navigation_semantic_action));if(n){return{isSupported:true}}return{isSupported:false,reason:I.noTargetMapping}};this.moveGroup=function(e,t){var i=new jQuery.Deferred;function r(e){var t,r=[];e.forEach(function(e){r.push(e.getId())});t=JSON.parse(N._oCurrentPageSet.getConfiguration()||"{}");t.order=r;N._oCurrentPageSet.setConfiguration(JSON.stringify(t),i.resolve.bind(i),i.reject.bind(i,M()))}this.getGroups().done(function(i){var n=i.indexOf(e);i.splice(n,1);i.splice(t,0,e);r(i)});return i.promise()};this.setGroupTitle=function(e,t){var i=new jQuery.Deferred;e.setTitle(t,i.resolve.bind(i),function(){i.reject(e.getTitle())});return i.promise()};this.addTile=function(e,t){var i=new jQuery.Deferred,r=e.getChip();if(e.isStub()){i.reject(M(),"Tile was not added to the group as the tile failed loading")}else{if(!t){t=N._oCurrentPageSet.getDefaultPage()}t.addChipInstance(r,i.resolve.bind(i),i.reject.bind(i,M()))}return i.promise()};this.removeTile=function(e,t){var i=new jQuery.Deferred;e.removeChipInstance(t,i.resolve.bind(i),i.reject.bind(i,M()));return i.promise()};this.moveTile=function(e,t,i,r,n,a){var o=new jQuery.Deferred,s=this._isWrapperOnly(e),l=new u.Map,c,f=o.reject.bind(o,M()),p=2;function d(e){p-=1;c=c||e;if(p<=0){o.resolve(c)}}if(!n){n=r}var h=G(r,this);var v=G(n,this);var C=this.getTileType(e);t=R(h,e,C);if(t<0){g.error("moveTile: tile not found in source group",null,_);f();return o.promise()}if(r===n){U(h,e.getId(),i,a);r.setLayout(JSON.stringify(h),o.resolve.bind(o,e),f)}else{sap.ushell.Container.getServiceAsync("PageBuilding").then(function(t){var o=t.getFactory().getPageBuildingService();var u=e.getBagIds();u.forEach(function(t){var i={texts:[],properties:[]},r=e.getBag(t);r.getOwnTextNames().forEach(function(e){i.texts.push({name:e,value:r.getText(e)})});r.getOwnPropertyNames().forEach(function(e){i.properties.push({name:e,value:r.getProperty(e)})});if(i.texts.length>0||i.properties.length>0){l.put(t,i)}});o.openBatchQueue();var c=this.getGroupTiles(n);n.addChipInstance(s?e.getChip():e,function(e){var t,r;c.splice(i,0,e);u.forEach(function(i){r=l.get(i);if(r){t=e.getBag(i);r.texts.forEach(function(e){t.setText(e.name,e.value)});r.properties.forEach(function(e){t.setProperty(e.name,e.value)});t.save(function(){},function(){g.error("Bag "+i+": could not be saved",null,_)})}});U(v,e.getId(),i,a);n.setLayout(JSON.stringify(v),d.bind(this,e),f)},f,e.isStub());r.removeChipInstance(e,d,f);r.setLayout(JSON.stringify(h),undefined,f);o.submitBatchQueue(undefined,f)}.bind(this))}return o.promise()};this.getTileId=function(e){return e.getId()};this.getTileType=function(e){var t=e.getPage(),i;try{i=JSON.parse(t.getLayout());if(i.linkOrder&&i.linkOrder.indexOf(e.getId())>-1){return"link"}}catch(e){g.warning("Group "+t.getId()+": invalid layout: "+t.getLayout(),null,_)}if(e.isStub()===false){var r=e.getContract("types");if(r&&r.getAvailableTypes().indexOf("card")>-1){return"card"}}return"tile"};this.getCardManifest=function(e){var i,r,n;try{i=e.getConfigurationParameter("cardManifest");r=JSON.parse(i);n=t.getCardData(e);r=t.mergeCardData(r,n);return r}catch(t){g.error("Manifest of card with id '"+e.getId()+"' could not be read. "+t.message)}};this.getTileTitle=function(e){return e.getTitle()};this.getTileView=function(e){var t=this;var i=new jQuery.Deferred;var r;function a(){var a;r=e.getContract("types");if(r){a=t.getTileType(e);r.setType(a)}e.getImplementationAsSapui5Async().then(function(e){if(a==="link"){var t,r,o,s;if(!e.hasModel()){e=e.getComponentInstance().getRootControl()}t=e.getModel();r=e.getController();o=t&&t.getProperty?t.getProperty("/nav/navigation_target_url"):undefined;s=new n({mode:"{view>/mode}",header:"{view>/config/display_title_text}",subheader:"{view>/config/display_subtitle_text}",sizeBehavior:"{view>/sizeBehavior}",size:"Auto",url:r.formatters&&r.formatters.leanURL(o),press:[r.onPress,r]});s.setModel(t,"view");i.resolve(s);return}i.resolve(e)}).catch(o)}function o(e){i.reject("Tile not successfully loaded"+(e?": "+e:""))}if(!e.$loadingPromise){if(!e.isStub()){u.callHandler(a,o,!q(e))}else{o()}}else{e.$loadingPromise.fail(o).done(function(){try{a()}catch(e){o(e.message||e)}})}return i.promise()};this.getTileSize=function(e){var t=!e.isStub()&&e.getConfigurationParameter("row")||"1",i=!e.isStub()&&e.getConfigurationParameter("col")||"1";return t+"x"+i};this.refreshTile=function(e){e.refresh()};this.setTileVisible=function(e,t){var i=!e.isStub()&&e.getContract("visible"),r,n;if(i){i.setVisible(t);return}if(e.isStub()&&e.$loadingPromise){r=this.getTileId(e);n=B[r];B[r]=t;if(n===undefined){e.$loadingPromise.done(function(){var t=e.getContract("visible");if(t){t.setVisible(B[r])}})}return}};this.getTileActions=function(e){var t=!e.isStub()&&e.getContract("actions");if(t){return t.getActions()}return[]};this.getTileTarget=function(){return null};this.getTileDebugInfo=function(e){var t,i=e.getChip(),r=i.getCatalog(),n={chipId:i.getId(),chipInstanceId:e.getId(),chipTitle:i.getTitle(),chipDescription:i.getDescription(),completelyLoaded:!e.isStub()};if(r){n.catalogId=r.getId()}t=JSON.stringify(n);return t};this.getCatalogs=function(){var e,t=E,i=k===false;if(t&&!t.$notified&&!i){e=t}else{E=new jQuery.Deferred;e=E;e.done(function(){if(e===E){k=true}}).always(function(){if(e===E){E=null}});if(t){if(i){k=undefined}t.always(function(){this._startLoading(e,i)}.bind(this))}else{this._startLoading(e,i)}}return e.promise()};this._refreshRemoteCatalogs=function(e){return sap.ushell.Container.getServiceAsync("PageBuilding").then(function(t){var i=0;var r=t.getFactory();var n=H(r);n.forEach(function(t){var a=t.ui2catalog;if(a.isStub()||a.getType()==="H"||a.getType()==="REMOTE"){i+=1;a.refresh(function(){t.title=a.getTitle();t.tiles=J(r,a.getChips());e.notify(t);i-=1;if(i<=0){e.resolve(n)}},function(r){g.error("Failed to load catalog: "+r,a.toString(),_);t.errorMessage=r||"Error";e.notify(t);i-=1;if(i<=0){e.resolve(n)}})}else{e.notify(t);e.$notified=true}});if(i<=0){e.resolve(n)}})};this._useKnownCatalogs=function(e){return sap.ushell.Container.getServiceAsync("PageBuilding").then(function(t){var i=H(t.getFactory());i.forEach(function(t){e.notify(t)});e.resolve(i)})};this._doGetCatalogs=function(e,t){var i=this._oCurrentPageSet.getDefaultPage().getAllCatalogs();if(i.isStub()){i.load(function(){this._refreshRemoteCatalogs(e)}.bind(this),e.reject,"type eq 'CATALOG_PAGE' or type eq 'H' or type eq 'SM_CATALOG' or type eq 'REMOTE'",true,"title",true)}else if(t){this._refreshRemoteCatalogs(e)}else{this._useKnownCatalogs(e)}};this._startLoading=function(e,t){var i;if(D&&D.cacheId){i=sap.ushell.Container.getServiceAsync("PageBuilding").then(function(e){var t=e.getFactory().getPageBuildingService().readAllCatalogs.cacheBusterTokens;t.put(C,D.cacheId);if(a.last("/core/spaces/enabled")){t.put(P,D.cacheId)}}).catch(e.reject)}else{i=Promise.resolve()}i.then(function(){if(N._bPageSetFullyLoaded){this._doGetCatalogs(e,t)}else{this.getGroups().done(function(){this._doGetCatalogs(e,t)}.bind(this)).fail(e.reject)}}.bind(this)).catch(e.reject)};this.isCatalogsValid=function(){return!!k};this.getCatalogData=function(e){return e.ui2catalog.getCatalogData()};this.getCatalogError=function(e){return e.errorMessage};this.getCatalogId=function(e){return e.id};this.getCatalogTitle=function(e){return e.title};this.getCatalogTiles=function(e){var t,i,r=new jQuery.Deferred,n=0;function a(){n-=1;if(n===0){r.resolve(e.tiles)}}function o(e,t){g.error("Failed to load catalog tile: "+t,e.toString(),_);a()}for(t=0;t<e.tiles.length;t+=1){i=e.tiles[t];if(i.isStub()){n+=1;i.load(a,o.bind(null,i))}}if(n===0){r.resolve(e.tiles)}return r.promise()};this.getCatalogTileNumberUnit=s.getCatalogTileNumberUnit;this.getCatalogTileId=function(e){var t=e.getChip(),i=t.getId();if(t.getCatalog()&&t.getCatalog().getCatalogData()&&t.getCatalog().getCatalogData().systemAlias){i+="_"+t.getCatalog().getCatalogData().systemAlias}return i};this.getStableCatalogTileId=function(e){var t=e.getChip();var i=t.getReferenceChipId();if(i==="O"){i=null}if(!i){i=this.getCatalogTileId(e)}return i};this.getCatalogTileTitle=function(e){return e.getChip().getTitle()};this.getCatalogTileSize=s.getCatalogTileSize;this.getCatalogTileView=function(e,t){t=typeof t!=="undefined"?t:true;var i=this.getCatalogTileTitle(e);if(e.isStub()){g.warning("CHIP (instance) is just a stub!",e.toString(true),_);return new p({icon:"sap-icon://hide",info:"",infoState:"Critical",subtitle:"",title:i}).addStyleClass("sapUshellTileError")}if(t){var r=e.getContract("preview");if(r){r.setEnabled(true)}else{return new p({title:i,subtitle:"",info:"",infoState:"Neutral",icon:"sap-icon://folder-full"})}}return L(e,i,"Cannot get catalog tile view as SAPUI5")};this.getCatalogTileViewControl=function(e,t){var i=new jQuery.Deferred;t=typeof t!=="undefined"?t:true;var r=this.getCatalogTileTitle(e);if(e.isStub()){g.warning("CHIP (instance) is just a stub!",e.toString(true),_);i.resolve(this._createErrorTile(r,"CHIP was just a stub!"));return i.promise()}if(t){var n=e.getContract("preview");if(n){n.setEnabled(true)}else{i.resolve(this._createPreviewTile(r));return i.promise()}}e.getImplementationAsSapui5Async().catch(function(e){g.error("Cannot get catalog tile view as SAPUI5: "+(e.message||e),e.stack,_);return this._createErrorTile(r,e.message||e)}.bind(this)).then(i.resolve);return i.promise()};this._createErrorTile=function(e,t){var i=new n({state:v.Failed,header:e,subheader:t||""}).addStyleClass("sapUshellTileError");return i};this._createPreviewTile=function(e){return new p({title:e,subtitle:"",info:"",infoState:"Neutral",icon:"sap-icon://folder-full"})};this.getCatalogTileTargetURL=s.getCatalogTileTargetURL;this.getCatalogTilePreviewSubtitle=s.getCatalogTilePreviewSubtitle;this.getCatalogTilePreviewTitle=s.getCatalogTilePreviewTitle;this.getCatalogTilePreviewInfo=s.getCatalogTilePreviewInfo;this.getCatalogTilePreviewIndicatorDataSource=s.getCatalogTilePreviewIndicatorDataSource;this.getCatalogTilePreviewIcon=s.getCatalogTilePreviewIcon;this.getCatalogTileKeywords=function(e){var t={},i=e.getTitle(),r=this.getCatalogTilePreviewSubtitle(e),n=e.getChip().getDescription();function a(e,t){if(u.isArray(t)){t.forEach(function(t){if(e.hasOwnProperty(t)){return}e[t]=null})}}function o(e){var t=S.prototype._getBagText(e,"tileProperties","display_search_keywords");if(!u.isString(t)||t===""){return[]}return t.trim().split(/\s*,\s*/g)}function s(e){var t=S.prototype._getBagText(e,"tileProperties","display_info_text");if(t){return[t]}return[]}function l(e){var t=S.prototype._getConfigurationProperty(e,"tileConfiguration","display_number_unit");if(t){return[t]}return[]}function c(e){var t;if(e.isStub()){return[]}t=e.getContract("search");if(t){return t.getKeywords()}return[]}a(t,o(e));a(t,s(e));a(t,l(e));a(t,c(e));if(i){a(t,[i])}if(r){a(t,[r])}if(n){a(t,[n])}return Object.keys(t)};this.addBookmark=function(e,t){var i=b,r={display_icon_url:e.icon||"",display_info_text:e.info||"",display_subtitle_text:e.subtitle||"",display_title_text:e.title},n=new jQuery.Deferred;var a={tileProperties:{texts:{display_title_text:r.display_title_text,display_subtitle_text:r.display_subtitle_text,display_info_text:r.display_info_text}}};if(e.serviceUrl){i=y;r.display_number_unit=e.numberUnit;r.service_refresh_interval=e.serviceRefreshInterval||0;r.service_url=e.serviceUrl}if(t&&!(t instanceof l)){n.reject("The given object is not a group");return n.promise()}r={tileConfiguration:JSON.stringify(r)};this._createBookmarkTile(i,e.url,r,a,e.title,t).then(function(){n.resolve()}).catch(function(e){n.reject(e.toString())});return n.promise()};this.addCustomBookmark=function(e,t){var i=e.vizConfig["sap.flp"].chipConfig;var r=new jQuery.Deferred;if(t&&!(t instanceof l)){r.reject("The given object is not a group");return r.promise()}this._createBookmarkTile(i.chipId,e.url,i.configuration,i.bags,e.title,t).then(function(){r.resolve()}).catch(function(e){r.reject(e.toString())});return r.promise()};this._getTileTargetConfiguration=function(t){return sap.ushell.Container.getServiceAsync("URLParsing").then(function(i){var r={navigation_target_url:t,navigation_use_semantic_object:false};var n=new e;var a=new e(t);var o=a.host()+a.path()===n.host()+n.path();var s=S.prototype._makeTargetMappingSupportKey;if(t[0]==="#"||o){var u=i.parseShellHash(i.getShellHash(t));if(u&&j.get(s(u.semanticObject,u.action))!==undefined){r.navigation_use_semantic_object=true;r.navigation_semantic_object=u.semanticObject;r.navigation_semantic_action=u.action;r.navigation_semantic_parameters=i.paramsToString(u.params)}}return r})};this._updateBags=function(e,t){var i=[];var r=[];if(!t){t={};i.push(Promise.resolve([]))}Object.keys(t).forEach(function(n){var a;var o=false;var s=t[n];var u=e.getBag(n);try{for(a in s.properties){u.setProperty(a,s.properties[a]);o=true}for(a in s.texts){u.setText(a,s.texts[a]);o=true}i.push(new Promise(function(e,t){if(o){r.push(n);u.save(e,t)}else{e()}}))}catch(e){i.push(Promise.reject(e))}});return Promise.all(i).then(function(){return r})};this._checkBookmarkConfiguration=function(e){return new Promise(function(t,i){try{var r=V(e);if(!r.navigation_target_url){throw new Error("tileConfiguration.navigation_target_url was not set")}this.getTileSize(e);t()}catch(t){var n="Chip configuration check failed: "+t.toString();g.error(n,e.getId(),_);i(n)}}.bind(this))};this._createBookmarkTile=function(e,t,i,r,n,a){return Promise.all([sap.ushell.Container.getServiceAsync("PageBuilding"),this._getTileTargetConfiguration(t)]).then(function(t){var r=t[0];var s=t[1];if(!i.tileConfiguration){i.tileConfiguration=JSON.stringify(s)}else{var u=JSON.parse(i.tileConfiguration);u=o({},u,s);i.tileConfiguration=JSON.stringify(u)}var l=r.getFactory();var c=l.getPageBuildingService();return new Promise(function(t,r){if(this._bPageSetFullyLoaded){a=a||this._oCurrentPageSet.getDefaultPage();var o=l.createChipInstance({chipId:e,pageId:a.getId(),title:n,configuration:JSON.stringify(i),layoutData:""});a.addChipInstance(o,t,r,undefined)}else{try{c.createPageChipInstanceFromRawData({chipId:e,configuration:JSON.stringify(i),pageId:"/UI2/Fiori2LaunchpadHome",title:n},function(e){l.createChipInstance(e,t,r,undefined)},r)}catch(e){r(e)}}}.bind(this))}.bind(this)).then(function(e){return this._updateBags(e,r).then(function(){return this._checkBookmarkConfiguration(e)}.bind(this)).catch(function(t){return new Promise(function(i,r){e.remove(r.bind(undefined,t),r.bind(undefined,t))})})}.bind(this))};S.prototype._isBookmarkFor=function(e,t){var i=e.getChip().getBaseChipId();if(i!==undefined){var r=V(e).navigation_target_url;if(typeof t==="string"){return q(e)&&r===t}return t.chipId===i&&t.url===r}return false};S.prototype._visitBookmarks=function(e,t){var i=[];var r=new jQuery.Deferred;N.getGroupsAndWaitForAllChips().then(function(n){var a=0;n.forEach(function(r){r.getChipInstances().forEach(function(r){if(N._isBookmarkFor(r,e)){a+=1;if(t){i.push(t(r))}}})});if(i.length===0){r.resolve(a)}else{jQuery.when.apply(jQuery,i).fail(function(e){r.reject(e)}).done(function(){r.resolve(a)})}}).catch(function(e){r.reject(e.message||e)});return r.promise()};this._visitCustomBookmarks=function(e,t){if(!e.chipId){return Promise.reject("_visitCustomBookmarks: Required parameter is missing: oIdentifier.chipId")}return new Promise(function(i,r){this.getGroups().fail(r).done(function(n){var a=[];var o=0;n.forEach(function(i){i.getChipInstances().forEach(function(i){if(S.prototype._isBookmarkFor(i,e)){o+=1;if(t){a.push(t(i))}}})});Promise.all(a).then(function(){i(o)}).catch(r)})}.bind(this))};this.countBookmarks=function(e){return S.prototype._visitBookmarks(e)};this.countCustomBookmarks=function(e){return this._visitCustomBookmarks(e)};this.deleteBookmarks=function(e){return S.prototype._visitBookmarks(e,function(e){var t=new jQuery.Deferred;e.remove(t.resolve.bind(t),t.reject.bind(t));return t.promise()})};this.deleteCustomBookmarks=function(e){return this._visitCustomBookmarks(e,function(e){return new Promise(function(t,i){e.remove(t,i)})})};this.updateBookmarks=function(e,t){return S.prototype._visitBookmarks(e,function(e){var i=V(e),r=new jQuery.Deferred;var n={tileProperties:{texts:{}}};if(t.title){n.tileProperties.texts.display_title_text=t.title}if(typeof t.subtitle==="string"){n.tileProperties.texts.display_subtitle_text=t.subtitle}if(typeof t.info==="string"){n.tileProperties.texts.display_info_text=t.info}var a={display_icon_url:typeof t.icon==="string"?t.icon:i.display_icon_url,display_info_text:typeof t.info==="string"?t.info:i.display_info_text,display_subtitle_text:typeof t.subtitle==="string"?t.subtitle:i.display_subtitle_text,display_title_text:t.title||i.display_title_text,display_number_unit:typeof t.numberUnit==="string"?t.numberUnit:i.display_number_unit,service_refresh_interval:t.serviceRefreshInterval||i.service_refresh_interval,service_url:t.serviceUrl||i.service_url};var s={};this._getTileTargetConfiguration(t.url||i.navigation_target_url).then(function(e){a=o({},a,e);s.tileConfiguration=JSON.stringify(a)}).then(function(){return new Promise(function(t,i){e.updateConfiguration(s,t,i)})}).then(function(){e.getContract("configuration").fireConfigurationUpdated(Object.keys(s));return this._updateBags(e,n)}.bind(this)).then(function(t){if(t.length){e.getContract("bag").fireBagsUpdated(t)}r.resolve()}).catch(function(e){r.reject(e.toString())});return r.promise()}.bind(this))};this.updateCustomBookmarks=function(e,t){var r=i.get(["vizConfig","sap.flp","chipConfig"],t)||{};var n=r.configuration||{};var a=r.bags||{};var s=t.url;return this._visitCustomBookmarks(e,function(e){return this._getTileTargetConfiguration(s).then(function(t){var i;if(!n.tileConfiguration){i=V(e);i=o({},i,t);n.tileConfiguration=JSON.stringify(i)}else{i=JSON.parse(n.tileConfiguration);i=o({},i,t);n.tileConfiguration=JSON.stringify(i)}return new Promise(function(t,i){try{e.updateConfiguration(n,t,i)}catch(e){i(e)}})}).then(function(){e.getContract("configuration").fireConfigurationUpdated(Object.keys(n));return this._checkBookmarkConfiguration(e)}.bind(this)).then(function(){return this._updateBags(e,a)}.bind(this)).then(function(i){if(i.length){e.getContract("bag").fireBagsUpdated(i)}return new Promise(function(i,r){if(t.title){e.setTitle(t.title,true,i,r)}else{i()}})})}.bind(this))};this.onCatalogTileAdded=function(){k=false};this.isCustomTile=function(e){return!q(e)}};S.prototype._getCatalogTileIndex=function(){this._oCatalogTileIndexPromise=sap.ushell.Container.getServiceAsync("PageBuilding").then(function(e){var t=e.getFactory().getPageBuildingService();return new Promise(function(e,i){t.readAllCatalogs(P,e,i,"type eq 'CATALOG_PAGE' or type eq 'H' or type eq 'SM_CATALOG' or type eq 'REMOTE'","title",true)})}).then(function(e){var t={};e.results.forEach(function(e){e.Chips.results.forEach(function(e){var i;if(a.last("/core/stableIDs/enabled")&&e.referenceChipId){i=e.referenceChipId}else{i=e.id}if(!t[i]){t[i]=e}})});return t}).catch(function(){return{}});return this._oCatalogTileIndexPromise};return S},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/adapters/abap/MenuAdapter", ["sap/ushell/Config","sap/base/Log","sap/ushell/library"],function(e,t,n){"use strict";var r=n.ContentNodeType;var a=function(){};a.prototype.isMenuEnabled=function(){var t=e.last("/core/menu/enabled");var n=this._getAssignedSpaces().length;return Promise.resolve(t&&n>0)};a.prototype.getMenuEntries=function(){var t=e.last("/core/homeApp/enabled");var n=e.last("/core/spaces/myHome/enabled");var r=e.last("/core/spaces/myHome/userEnabled");var a=e.last("/core/spaces/myHome/myHomeSpaceId");var i=this._getAssignedSpaces();if(t&&n||n&&!r){for(var s=0;s<i.length;s++){if(i[s].id===a){i=i.slice(1);break}}}var o=this._buildMenuEntries(i);return Promise.resolve(o)};a.prototype.getContentNodeEntries=function(){var e=this._getAssignedSpaces();this._removeMyHomeForContentNodes(e);var t=this._buildMenuEntries(e);return Promise.resolve(t)};a.prototype.getContentNodes=function(){var e=this._getAssignedSpaces();this._removeMyHomeForContentNodes(e);var t=this._buildContentNodes(e);return Promise.resolve(t)};a.prototype._buildMenuEntries=function(e){var t=e.filter(this._isSpaceNotEmpty.bind(null,"FLP menu")).map(function(e){var t={title:e.title||e.id,"help-id":"Space-"+e.id,description:e.description,icon:undefined,type:"IBN",target:{semanticObject:"Launchpad",action:"openFLPPage",parameters:[{name:"spaceId",value:e.id},{name:"pageId",value:e.pages[0].id}],innerAppRoute:undefined},menuEntries:[]};var n=e.pages.map(function(t){return{title:t.title||t.id,"help-id":"Page-"+t.id,description:t.description,icon:undefined,type:"IBN",target:{semanticObject:"Launchpad",action:"openFLPPage",parameters:[{name:"spaceId",value:e.id},{name:"pageId",value:t.id}],innerAppRoute:undefined},menuEntries:[]}});if(n.length>1){t.menuEntries=n}return t});return t};a.prototype._buildContentNodes=function(e){var t=e.filter(this._isSpaceNotEmpty.bind(null,"content nodes")).map(function(e){return{id:e.id,label:e.title||e.id,type:r.Space,isContainer:false,children:e.pages.map(function(e){return{id:e.id,label:e.title||e.id,type:r.Page,isContainer:true}})}});return t};a.prototype._isSpaceNotEmpty=function(e,n){if(!n.pages||n.pages.length===0){t.warning("FLP space "+n.id+" without page omitted in "+e+".","","sap.ushell_abap.adapters.abap.MenuAdapter");return false}return true};a.prototype._removeMyHomeForContentNodes=function(t){var n=e.last("/core/homeApp/enabled");var r=e.last("/core/spaces/myHome/enabled");var a=e.last("/core/spaces/myHome/userEnabled");var i=e.last("/core/spaces/myHome/myHomeSpaceId");if(n){return}if(r&&!a){if(t[0]&&t[0].id===i){t.shift()}}};a.prototype._getAssignedSpaces=function(){var e=document.querySelector("meta[name='sap.ushell.assignedSpaces']");if(!e){return[]}var t=JSON.parse(e.getAttribute("content"));return t};return a},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/adapters/abap/NavTargetResolutionAdapter", [],function(){"use strict";return function(n){}},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/adapters/abap/PageBuildingAdapter", ["sap/base/util/ObjectPath","sap/base/Log","sap/ushell_abap/pbServices/ui2/Factory"],function(e,a,r){"use strict";return function(t,i,o){var s,c="PERS",p="/sap/opu/odata/UI2/PAGE_BUILDER_PERS/",u=o.config.remoteCatalogServices||{},n=e.get("config.services.pageBuilding.baseUrl",o);this.getFactory=function(){return s};i=i?i.toUpperCase():"";if(i==="CONF"||i==="CUST"){c=i;p="/sap/opu/odata/UI2/PAGE_BUILDER_"+c+"/"}else if(n&&e.get("config.services.pageBuilding.relativeUrl",o)){p=n}var l=e.get("sap-ushell-config.services.Container.adapter.config.services.pbFioriHome.cacheId");s=r.createFactory(p,undefined,c==="PERS",l);["/sap/hba/apps/kpi/s/odata/hana_chip_catalog.xsodata/","/sap/hba/r/sb/core/odata/modeler/SMART_BUSINESS.xsodata/","/sap/hba/r/sb/core/odata/runtime/SMART_BUSINESS.xsodata/","/sap/opu/odata/sap/SM_CATALOG_SRV/"].forEach(function(e){if(!Object.prototype.hasOwnProperty.call(u,e)){u[e]="sap.ushell_abap.pbServices.ui2.RemoteCatalogService"}});Object.keys(u).forEach(function(e){var r=u[e];if(r==="sap.ui2.srvc.RemoteCatalogService"){r="sap.ushell_abap.pbServices.ui2.RemoteCatalogService"}var t=(r||"").replace(/\./g,"/");var i;if(!(i=sap.ui.require(t))){a.error("FLP PageBuildingAdapter: remote catalog service "+t+" must be loaded before use.");i=sap.ui.requireSync(t)}s.addRemoteCatalogService(e,new i)})}},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/adapters/abap/PagePersistenceAdapter", ["sap/base/util/ObjectPath","sap/ushell/utils/HttpClient","sap/ushell/resources","sap/ushell/utils/chipsUtils","sap/ushell/Config","sap/ui/core/Configuration"],function(e,t,i,a,r,n){"use strict";function s(){var t=window["sap-ushell-config"].services&&window["sap-ushell-config"].services.PagePersistence||{};return(e.get("config.serviceUrl",t.adapter)||"").replace(/\/?$/,"/")}var o=function(){this.S_COMPONENT_NAME="sap.ushell_abap.adapters.abap.PagePersistenceAdapter"};o.prototype.getPage=function(e){return Promise.all([this._readPage(e),sap.ushell.Container.getServiceAsync("URLParsing")]).then(function(e){var t=e[0];var i=e[1];return this._convertODataToReferenceData(t,i)}.bind(this)).catch(this._rejectWithError.bind(this))};o.prototype.getPages=function(e){return Promise.all([this._readPages(e),sap.ushell.Container.getServiceAsync("URLParsing")]).then(function(e){var t=e[0].results;var i=e[1];return t.map(function(e){return this._convertODataToReferenceData(e,i)}.bind(this))}.bind(this)).catch(this._rejectWithError.bind(this))};o.prototype._readPage=function(e){return new Promise(function(i,a){var r={"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0","Accept-Language":n.getLanguage()||"",Accept:"application/json, text/plain"};var o=sap.ushell.Container.getUser().getLanguage();if(o){r["sap-language"]=o}var p=sap.ushell.Container.getLogonSystem();var c=p?p.getClient():"";if(c){r["sap-client"]=c}var l=s();var u=new t(l,{headers:r});var d=l+"pageSet('"+encodeURIComponent(e)+"')"+"?$expand=sections/viz,vizReferences/chipBags/properties,tileTypes/vizOptions/displayFormats/supported";u.get(d).then(function(e){i(JSON.parse(e.responseText).d)}).catch(a)})};o.prototype._readPages=function(e){return new Promise(function(i,a){var r={"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0","Accept-Language":n.getLanguage()||"",Accept:"application/json, text/plain","content-type":"multipart/mixed; boundary=batch_bd56-ff53-571c"};var o=sap.ushell.Container.getUser().getLanguage();if(o){r["sap-language"]=o}var p=sap.ushell.Container.getLogonSystem();var c=p?p.getClient():"";if(c){r["sap-client"]=c}var l="pageSet?$expand="+encodeURIComponent("sections/viz,vizReferences/chipBags/properties,tileTypes/vizOptions/displayFormats/supported")+"&$filter=";var u=e.length?"id eq '"+e.join("' or id eq '")+"'":"";var d=s();var g=d+"$batch";var h=new t(d,{headers:r});var f=this._createBatchData(l+encodeURIComponent(u).replace(/[!'()*]/g,escape));h.post(g,{data:f}).then(function(e){var t=this._retrieveBatchData(e);i(t)}.bind(this)).catch(a)}.bind(this))};o.prototype._createBatchData=function(e){var t=sap.ushell.Container.getUser().getLanguage();var i=sap.ushell.Container.getLogonSystem()?sap.ushell.Container.getLogonSystem().getClient():"";var a=["--batch_bd56-ff53-571c","Content-Type: application/http","Content-Transfer-Encoding: binary","","GET "+e+" HTTP/1.1","sap-cancel-on-close: true","sap-language: "+(t||""),"sap-client: "+(i||""),"sap-contextid-accept: header","Accept: application/json","Accept-Language: "+(t||""),"DataServiceVersion: 2.0","MaxDataServiceVersion: 2.0","X-Requested-With: XMLHttpRequest","","","","--batch_bd56-ff53-571c--"];return a.join("\r\n")};o.prototype._retrieveBatchData=function(e){var t=e.responseText.split("\r\n");var i=[];for(var a=0;a<t.length;a++){if(t[a].startsWith("{")){i=t[a]}}return JSON.parse(i).d};o.prototype._convertODataToReferenceData=function(e,t){var i={};var n=r.last("/core/stableIDs/enabled");var s={page:{id:e.id,title:e.title,description:e.description,createdBy:e.createdBy,createdByFullname:e.createdByFullname||e.createdBy,modifiedBy:e.modifiedBy,modifiedByFullname:e.modifiedByFullname||e.modifiedBy,sections:e.sections.results.map(function(e){return{id:e.id,sectionIndex:e.sectionIndex,title:e.title,viz:e.viz.results.map(function(e){return{catalogTileId:e.catalogTileId,id:e.id,itemIndex:e.itemIndex,targetMappingId:e.targetMappingId,vizId:n?e.catalogTileIdStable:e.catalogTileId,inboundPermanentKey:n?e.targetMappingIdStable:e.targetMappingId,displayFormatHint:e.displayFormatHint}}).sort(function(e,t){return e.itemIndex-t.itemIndex})}}).sort(function(e,t){return e.sectionIndex-t.sectionIndex})},visualizations:e.vizReferences.results.reduce(function(e,r){var s=this._getSimplifiedChip(r);var o={vizType:r.tileType,title:r.title,subTitle:r.subTitle,icon:r.iconUrl,info:a.getInfoFromSimplifiedChip(s),keywords:a.getKeywordsFromSimplifiedChip(s),size:a.getTileSizeFromSimplifiedChip(s),indicatorDataSource:a.getIndicatorDataSourceFromSimplifiedChip(s),url:a.getTargetUrlFromSimplifiedChip(s,t),numberUnit:a.getNumberUnitFromSimplifiedChip(s),isCustomTile:a.isCustomTileFromSimplifiedChip(s),_instantiationData:{platform:"ABAP",simplifiedChipFormat:true,chip:s}};if(n){o.vizId=r.catalogTileIdStable;e[r.catalogTileIdStable]=o;if(r.fromPersonalization&&r.id!==r.catalogTileIdStable){i[r.id]=o}}else{e[r.id]=o}return e}.bind(this),{}),vizTypes:e.tileTypes.results.reduce(function(e,t){var i=t.vizOptions.displayFormats;var a=t.id;e[a]={id:a,url:t.url,vizOptions:{displayFormats:{supported:i.supported.results.map(function(e){return e.id}),default:i.preferred}}};return e},{})};if(n){s.unstableVisualizations=Object.keys(i).length>0?i:null}return s};o.prototype._getSimplifiedChip=function(e){var t={};var i;try{i=JSON.parse(e.configuration)}catch(e){i={}}e.chipBags.results.forEach(function(e){t[e.id]={texts:{},properties:{}};e.properties.results.forEach(function(i){if(i.translatable){t[e.id].texts[i.id]=i.value}else{t[e.id].properties[i.id]=i.value}})});return{chipId:e.tileType,configuration:i,bags:t}};o.prototype._rejectWithError=function(e){var t={component:this.S_COMPONENT_NAME,description:i.i18n.getText("PagePersistenceAdapter.CannotLoadPage"),detail:e};return Promise.reject(t)};return o},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/adapters/abap/PersonalizationAdapter", ["sap/ushell_abap/adapters/abap/AdapterContainer","sap/ushell_abap/pbServices/ui2/ODataWrapper","sap/ushell_abap/pbServices/ui2/ODataService","sap/ushell_abap/pbServices/ui2/Error","sap/base/util/ObjectPath","sap/base/Log"],function(a,e,t,r,p,s){"use strict";var n=function(a,n,i){s.debug("[000] PersonalizationAdapter: constructor","PersonalizationAdapter");this._oConfig=i&&i.config;var o=(p.get("config.services.personalization.baseUrl",i)||"/sap/opu/odata/UI2/INTEROP")+"/";var u={baseUrl:o,"sap-language":sap.ushell.Container.getUser().getLanguage(),"sap-client":sap.ushell.Container.getLogonSystem().getClient()};this._oWrapper=e.createODataWrapper(u);function l(a){throw new r(a,"sap.ushell_abap.adapters.abap.PersonalizationAdapter")}t.call(this,this._oWrapper,l)};n.prototype.supportsGetWithoutSubsequentLoad=true;n.prototype.getAdapterContainer=function(e,t,r){return new a(e,this,t,r)};n.prototype.delAdapterContainer=function(a,e){return this.getAdapterContainer(a,e).del()};return n},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/adapters/abap/SearchAdapter", [],function(){"use strict";return function(n){}},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/adapters/abap/SupportTicketAdapter", ["sap/base/util/isEmptyObject","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/ushell/utils","sap/ushell/resources","sap/ushell_abap/pbServices/ui2/ODataWrapper","sap/ushell_abap/pbServices/ui2/ODataService"],function(t,e,jQuery,a,n,i,r){"use strict";return function(){function n(e){var a;if(e&&!t(e)){a=JSON.stringify(e);return a.replace(/\{|\}|\\n|,/g,"\n")}return""}this.createTicket=function(t){var s,u="/sap/opu/odata/UI2/INTEROP/",c="Messages",o,l,p,g,b=sap.ushell.Container;if(!t.text){throw new a.Error("Support Ticket data does not contain text member")}o=e.get("clientContext.navigationData.applicationInformation.url",t);l=e.get("clientContext.navigationData.navigationHash",t);p=e.get("clientContext.navigationData.tileDebugInfo",t);o=typeof o==="string"?o:"";l=typeof l==="string"?l:"";p=typeof p==="string"&&p.length>0?JSON.parse(p).catalogId||"":"";t.text=t.text.trim();t.subject=t.subject.trim();if(t.subject.length>40){t.text=t.subject+"\n"+t.text;t.subject=t.subject.substring(0,40).slice(0,-3)+"..."}t.url=o;t.catalogId=p;t.hash=l;t.clientContext=n(t.clientContext);s=new jQuery.Deferred;var f={baseUrl:u,"sap-language":b.getUser().getLanguage(),"sap-client":b.getLogonSystem().getClient()};g=new i.createODataWrapper(f);r.call(this,g,function(){return false});g.create(c,t,function(t){s.resolve(t.messageNumber)},function(t){s.reject(t)});return s.promise()}}},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/adapters/abap/Ui5ComponentLoaderAdapter", [],function(){"use strict";function n(){}return n},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/adapters/abap/UserInfoAdapter", ["sap/ushell_abap/pbServices/ui2/ODataWrapper","sap/ui/thirdparty/datajs","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/resources"],function(e,r,jQuery,a,t){"use strict";var s;var n="default";return function(){this._updateODataObjectBasedOnDatatype=function(e,r){if(jQuery.type(e)==="string"){r.value=e.toString();r.dataType="Edm.String"}if(jQuery.type(e)==="boolean"){r.value=e.toString();r.dataType="Edm.Boolean"}return r};this.getThemeList=function(){var e=new jQuery.Deferred,t="/sap/opu/odata/UI2/INTEROP/Themes";r.read({requestUri:t},function(r,a){var t,s=[];for(t=0;t<r.results.length;t=t+1){s.push(r.results[t])}e.resolve({options:s})},function(r){a.error(r.message,null,"sap.ushell_abap.adapters.abap.UserInfoAdapter");e.reject(r.message)});return e.promise()};this.getLanguageList=function(){var e=new jQuery.Deferred,s=encodeURI("/sap/opu/odata/UI2/INTEROP/UserProfilePropertyValues?$filter=id eq 'PREFERRED_LOGON_LANGUAGE'");r.read({requestUri:s},function(r){var a=[{text:t.i18n.getText("userSettings.browserLanguage"),key:n}];var s=r.results.map(function(e){return{text:e.description,key:e.value}}).sort(function(e,r){return e.text.localeCompare(r.text)});a=a.concat(s);e.resolve(a)},function(r){a.error(r.message,null,"sap.ushell_abap.adapters.abap.UserInfoAdapter");e.reject(r.message)});return e.promise()};this.getUserProfilePropertyValueLists=function(){var e=new jQuery.Deferred;var r;var t={};var s=["NUMBER_FORMAT","TIME_ZONE","TIME_FORMAT","DATE_FORMAT"];var n=this._createWrapper("/sap/opu/odata/UI2/INTEROP/");n.openBatchQueue();var u;for(var p=0;p<s.length;p++){u=s[p];r=encodeURI("UserProfilePropertyValues?$filter=id eq '"+u+"'&$select=description,value");n.read(r,function(e){t[this]=e.results}.bind(u),function(e){a.error(e.message,null,"sap.ushell_abap.adapters.abap.UserInfoAdapter")})}n.submitBatchQueue(function(){e.resolve(t)},function(r){a.error(r.message,null,"sap.ushell_abap.adapters.abap.UserInfoAdapter");e.reject(r.message)});return e.promise()};this._createWrapper=function(r){return e.createODataWrapper(r,false,function(e){})};this.updateUserPreferences=function(e){a.debug("[000] updateUserPreferences","UserInfoAdapter");var r=this,t,u,p,o,i,d=function(){o-=1;if(o===0){t.resolve()}},f=function(e,r){t.reject(e,r)};a.debug("[000] updateUserPreferences: _createWrapper","UserInfoAdapter");s=this._createWrapper("/sap/opu/odata/UI2/INTEROP/");t=new jQuery.Deferred;a.debug("[000] updateUserPreferences: oDataWrapper.openBatchQueue","UserInfoAdapter");s.openBatchQueue();p=e.getChangedProperties()||[];a.debug("[000] updateUserPreferences: getChangedProperties","UserInfoAdapter");o=p.length;p.forEach(function(e){var t=e.name,p=e.newValue;if(t.toUpperCase()==="LANGUAGE"){t="PREFERRED_LOGON_LANGUAGE";p=p===n?undefined:p}u="UserProfileProperties("+["id='"+t+"'","shellType='FLP')"].join(",");i={id:t,shellType:"FLP",value:p};r._updateODataObjectBasedOnDatatype(p,i);a.debug("[000] updateUserPreferences: oDataWrapper: put","UserInfoAdapter");s.put(u,i,d,f)});a.debug("[000] updateUserPreferences: submitBatchQueue","UserInfoAdapter");s.submitBatchQueue(function(){if(o===0){t.resolve()}},f);return t.promise()}}},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/adapters/hana/ContainerAdapter", ["sap/ui/thirdparty/jquery","sap/base/Log"],function(jQuery,e){"use strict";return function(a){var r;this.getSystem=function(){return a};this.getUser=function(){return r};this.logout=function(){var r=new jQuery.Deferred;jQuery.ajax({type:"HEAD",url:a.adjustUrl("/sap/hana/xs/formLogin/token.xsjs"),headers:{"X-CSRF-Token":"Fetch"},success:function(n,s,t){jQuery.ajax({type:"POST",url:a.adjustUrl("/sap/hana/xs/formLogin/logout.xscfunc"),headers:{"X-CSRF-Token":t.getResponseHeader("X-CSRF-Token")},success:function(){e.info("HANA system logged out: "+a.getAlias(),null,"sap.ushell_abap.adapters.hana.ContainerAdapter");r.resolve()},error:function(){e.error("Logging out HANA system failed: "+a.getAlias(),null,"sap.ushell_abap.adapters.hana.ContainerAdapter");r.resolve()}})},error:function(){e.error("Fetching X-CSRF-Token failed: "+a.getAlias(),null,"sap.ushell_abap.adapters.hana.ContainerAdapter");r.resolve()}});return r.promise()}}},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/bootstrap/evo/XhrLogonEventHandler", ["./abap.bootstrap.utils","sap/base/util/ObjectPath","sap/base/Log"],function(e,t,o){"use strict";var i="sap-ushell-reloaded";function r(e,t){this._oWindow=e||window;this._sXhrLogonMode=t;this._bPending=false}r.prototype.handleEvent=function(e){if(this._bPending){return true}if(e.type==="logon"){this._bPending=true;if(this._sXhrLogonMode==="logoffAndRedirect"){this._showErrorAndReload({key:"bootstrap.xhr.authenticationRequired",text:"Authentication required"},{key:"bootstrap.xhr.sessionExpired",text:"Your session has expired. Press OK to reload."},this._logoffAndRedirect,this._handleAuthenticationRequiredNoUi5.bind(this))}else{this._showErrorAndReload({key:"bootstrap.xhr.authenticationRequired",text:"Authentication required"},{key:"bootstrap.xhr.sessionExpired",text:"Your session has expired. Press OK to reload."},this._reloadPage,this._handleAuthenticationRequiredNoUi5.bind(this))}}else{o.error("Cannot handle event with type: "+e.type,null,"sap.ushell_abap.bootstrap.evo.XhrLogonEventHandler")}return true};r.prototype._getUpdatedLocationSearchForReload=function(e){var t=Date.now(),o=new RegExp(["(.*)([?&])",i,"(=[^&]*)?(.*)"].join("")),r,n=false;if(typeof e!=="string"){throw new Error("Illegal argument: sCurrentLocationSearch must be a string")}r=e.replace(o,function(e,o,r,a,s){n=true;return[o,r,i,"=",t,s].join("")});if(!n){if(e){r=[e,"&",i,"=",t].join("")}else{r=["?",i,"=",t].join("")}}return r};r.prototype._reloadPage=function(){var e=this;e._oWindow.setTimeout(function(){e._oWindow.location.search=e._getUpdatedLocationSearchForReload(e._oWindow.location.search)},0)};r.prototype._logoffAndRedirect=function(){var o=e.getLocationHref(),i=t.get("sap-ushell-config.services.Container.adapter.config.client"),r;r=new URI("/sap/public/bc/icf/logoff").absoluteTo(o).search("sap-client="+i+"&propagateLogoff=false&redirectURL="+encodeURIComponent(o)).toString();document.location=r};r.prototype._isPageReloaded=function(){return new RegExp(["[?&]",i].join("")).test(this._oWindow.location.search)};r.prototype._handleAuthenticationRequiredNoUi5=function(e){if(!this._isPageReloaded()){o.error("Illegal state: XHR authentication (mode=reload) requested before SAPUI5 is initialized. "+"This should not happen if the FioriLaunchpad.html page is loaded from the server. Trying to reload page once.",null,"sap.ushell_abap.bootstrap.evo.XhrLogonEventHandler");var t="Authentication required\n\nYour session might have expired. Press OK to reload.";this._oWindow.alert(t);e.call(this)}else{o.error("Illegal state: XHR authentication (mode=reload) requested before SAPUI5 is initialized and page reload has been triggered once."+" Stopping reload to avoid endless loop. This state cannot be overcome. Please ensure that the FioriLaunchpad.html"+" page is not cached, but always loaded from the server.",null,"sap.ushell_abap.bootstrap.evo.XhrLogonEventHandler")}};r.prototype._showErrorAndReload=function(e,t,o,i){var r;var n;if(sap.ui.require("sap/ui/core/Core")&&sap.ui.require("sap/m/MessageBox")){var a=sap.ui.require("sap/m/MessageBox");var s=a.Action;var d=a.Icon;if(sap.ui.require("sap/ushell/resources")){r=this._getText(e);n=this._getText(t)}if(sap.ui.require("sap/ui/core/BusyIndicator")){var l=sap.ui.require("sap/ui/core/BusyIndicator");if(typeof l.show==="function"&&typeof l.hide==="function"){l.hide();l.show=function(){}}}a.show(n,{icon:d.ERROR,title:r,actions:[s.OK],onClose:o.bind(this)})}else{i.call(this,o)}};r.prototype._getText=function(e){var t=sap.ushell.resources.i18n.getText(e.key);if(t&&t!==e.key){return t}return e.text};return r},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/bootstrap/evo/abap-def-dev", ["./abap.configure.ushell","./abap.load.launchpad","./boottask","sap/ushell/bootstrap/common/common.configure.ui5","sap/ushell/bootstrap/common/common.configure.ui5.extractLibs","sap/ushell/bootstrap/common/common.debug.mode","sap/ushell/bootstrap/common/common.load.bootstrapExtension"],function(a,o,s,t,p,e,l){"use strict";var n;window["sap-ui-debug"]=e.isDebug();n=a();t({ushellConfig:n,libs:p(n),theme:"sap_fiori_3",platform:"abap",platformAdapters:{abap:"sap.ushell_abap.adapters.abap",hana:"sap.ushell_abap.adapters.hana"},bootTask:s.start,onInitCallback:o});l(n)});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/bootstrap/evo/abap-def", ["./abap.configure.ushell","./abap.load.launchpad","./boottask","sap/ushell/bootstrap/common/common.configure.ui5","sap/ushell/bootstrap/common/common.configure.ui5.extractLibs","sap/ushell/bootstrap/common/common.load.bootstrapExtension","sap/ushell/bootstrap/common/common.debug.mode","sap/ushell/bootstrap/common/common.load.core-min"],function(a,o,s,l,e,t,p,m){"use strict";var n;window["sap-ui-debug"]=p.isDebug();n=a();l({ushellConfig:n,libs:e(n),theme:"sap_belize",platform:"abap",platformAdapters:{abap:"sap.ushell_abap.adapters.abap",hana:"sap.ushell_abap.adapters.hana"},bootTask:s.start,onInitCallback:o});m.load(n.ushell.customPreload);t(n)});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/bootstrap/evo/abap.bootstrap.utils", ["sap/base/util/ObjectPath","sap/ushell_abap/pbServices/ui2/Utils"],function(e,t){"use strict";var r={};r.getUrlParameterValue=function(e,r){var n=r||t.getParameterMap();return n[e]&&n[e][0]};r.createAndOpenXHR=function(e,t,n){n=n||"GET";var a=new XMLHttpRequest;a.open(n,e,true);if(t){r.addCommonHeadersToXHR(a,t)}return a};r.addCommonHeadersToXHR=function(e,t){e.setRequestHeader("Accept","application/json");if(t.client){e.setRequestHeader("sap-client",t.client)}if(t.language){e.setRequestHeader("sap-language",t.language)}return e};r.getCacheIdAsQueryParameter=function(t){var r=e.get("services.targetMappings.cacheId",t);if(typeof r==="string"){return"&sap-cache-id="+r}return""};r.mergeConfig=function(e,t,n){var a=n?JSON.parse(JSON.stringify(t)):t;if(typeof t!=="object"){return}Object.keys(a).forEach(function(t){if(Object.prototype.toString.apply(e[t])==="[object Object]"&&Object.prototype.toString.apply(a[t])==="[object Object]"){r.mergeConfig(e[t],a[t],false);return}e[t]=a[t]})};r.getLocationOrigin=function(){return location.protocol+"//"+location.host};r.getLocationHref=function(){return location.href};return r});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/bootstrap/evo/abap.configure.ushell", ["./abap.constants","sap/ushell/bootstrap/common/common.configure.ushell","sap/base/util/ObjectPath","sap/base/Log"],function(e,a,t,r){"use strict";function s(e){var a="sap/ushell_abap/bootstrap/evo/abap.configure.ushell";var t=e.messages;if(t&&t.length>0){for(var s=0;s<t.length;s+=1){if(t[s].severity==="error"){r.error(t[s].text,null,a)}else if(t[s].severity==="warning"){r.warning(t[s].text,null,a)}}}}function n(e){if(e.startupConfig){var a=t.get("services.Container.adapter.config.systemProperties",e);var r=t.create("services.Container.adapter",e);r.config=e.startupConfig;if(a){r.config.systemProperties=a}}}function o(e){var a=t.get("ushell.spaces.configurable",e);if(a){var r=t.get("startupConfig.userProfile",e)||[];var s=r.filter(function(e){return e.id==="SPACES_ENABLEMENT"})[0];var n=s&&s.value;if(n==="true"){t.set("ushell.spaces.enabled",true,e)}else if(n==="false"){t.set("ushell.spaces.enabled",false,e)}}}function i(e){var a=t.create("services.CommonDataModel.adapter",e);a.module="sap.ushell.adapters.cdm.PagesCommonDataModelAdapter"}function l(e){var a=t.get("bootstrapPlugins",e)||{};Object.keys(a).forEach(function(e){var t=a[e];if(t.hasOwnProperty("formFactors")){var r=t.formFactors,s={};s.desktop=r.desktop||false;s.tablet=r.tablet||false;s.phone=r.phone||false;t.deviceTypes=s;delete t.formFactors}})}function f(e){var a=t.get("startupConfig.userProfile",e)||[];var r=a.filter(function(e){return e.id==="PREFERRED_LOGON_LANGUAGE"})[0];if(r&&r.value!==undefined){var s=r.value!=="";e.startupConfig.isLanguagePersonalized=s}}function u(){var r=a(e);s(r);f(r);n(r);o(r);if(t.get("ushell.spaces.enabled",r)){i(r)}l(r);return r}return u});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/bootstrap/evo/abap.constants", [],function(){"use strict";return{defaultUshellConfig:{defaultRenderer:"fiori2",ushell:{home:{tilesWrappingType:"Hyphenated"},darkMode:{enabled:true},spaces:{myHome:{enabled:true}},customPreload:{enabled:true,coreResources:["sap/ushell_abap/bootstrap/evo/core-min-0.js","sap/ushell_abap/bootstrap/evo/core-min-1.js","sap/ushell_abap/bootstrap/evo/core-min-2.js","sap/ushell_abap/bootstrap/evo/core-min-3.js"],coreResourcesComplement:["sap/ushell_abap/bootstrap/evo/core-ext-light-0.js","sap/ushell_abap/bootstrap/evo/core-ext-light-1.js","sap/ushell_abap/bootstrap/evo/core-ext-light-2.js","sap/ushell_abap/bootstrap/evo/core-ext-light-3.js"]}},renderers:{fiori2:{componentData:{config:{sessionTimeoutReminderInMinutes:5,sessionTimeoutIntervalInMinutes:-1,sessionTimeoutTileStopRefreshIntervalInMinutes:15,enableContentDensity:true,enableAutomaticSignout:true,enablePersonalization:true,enableAbout:true,enableTagFiltering:false,enableSearch:true,enableSetTheme:true,enableSetLanguage:true,enableAccessibility:true,enableHelp:false,enableUserDefaultParameters:true,preloadLibrariesForRootIntent:false,enableNotificationsUI:false,enableRecentActivity:true,tilesWrappingType:"Hyphenated",applications:{"Shell-home":{enableEasyAccess:true,enableHideGroups:false,homePageGroupDisplay:"scroll",enableTileActionsIcon:false}},rootIntent:"Shell-home"}}}},services:{Personalization:{config:{appVariantStorage:{enabled:true,adapter:{module:"sap.ushell.adapters.AppVariantPersonalizationAdapter"}}}},CrossApplicationNavigation:{config:{"sap-ushell-enc-test":false}},NavTargetResolution:{config:{enableClientSideTargetResolution:true}},ShellNavigation:{config:{reload:false}},UserDefaultParameterPersistence:{adapter:{module:"sap.ushell.adapters.local.UserDefaultParameterPersistenceAdapter"}},Notifications:{config:{enabled:false,serviceUrl:"/sap/opu/odata4/iwngw/notification/default/iwngw/notification_srv/0001",webSocketUrl:"/sap/bc/apc/iwngw/notification_push_apc",pollingIntervalInSeconds:30,enableNotificationsPreview:false}},AllMyApps:{config:{enabled:true,showHomePageApps:true,showCatalogApps:true}},NavigationDataProvider:{adapter:{module:"sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter"}},PagePersistence:{adapter:{config:{serviceUrl:"/sap/opu/odata/UI2/FDM_PAGE_RUNTIME_SRV/"}}},Menu:{adapter:{config:{enabled:false}}}},xhrLogon:{mode:"frame"},bootstrapPlugins:{UiAdaptationPersonalization:{component:"sap.ushell.plugins.rta-personalize",enabled:false}},ui5:{libs:{"sap.ui.core":true,"sap.m":true,"sap.ushell":true}},apps:{placeholder:{enabled:true}}}}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/bootstrap/evo/abap.load.launchpad", ["./boottask","sap/ushell_abap/pbServices/ui2/contracts/bag","sap/ushell_abap/pbServices/ui2/contracts/configuration","sap/ushell_abap/pbServices/ui2/contracts/configurationUi","sap/ushell_abap/pbServices/ui2/contracts/fullscreen","sap/ushell_abap/pbServices/ui2/contracts/preview","sap/ushell_abap/pbServices/ui2/contracts/visible","sap/ushell_abap/pbServices/ui2/contracts/refresh","sap/ushell_abap/pbServices/ui2/contracts/search","sap/ushell_abap/pbServices/ui2/contracts/url","sap/ushell_abap/pbServices/ui2/contracts/actions","sap/ushell_abap/pbServices/ui2/contracts/types"],function(s){"use strict";return function(){sap.ui.require(["sap/ushell/iconfonts"],function(s){window.sap.ushell.Container.createRenderer("fiori2",true).then(function(s){s.placeAt("canvas","only")});s.registerFiori2IconFont()});s.afterBootstrap()}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/bootstrap/evo/abap.request.pageset", ["./abap.bootstrap.utils","sap/ushell/bootstrap/common/common.util","sap/ui/thirdparty/jquery","sap/ushell_abap/pbServices/ui2/Utils","sap/base/Log"],function(e,a,jQuery,s,i){"use strict";var t={},r="/sap/opu/odata/UI2/PAGE_BUILDER_PERS",n="Pages/PageChipInstances/Chip/ChipBags/ChipProperties,"+"Pages/PageChipInstances/RemoteCatalog,"+"Pages/PageChipInstances/ChipInstanceBags/ChipInstanceProperties,"+"AssignedPages,DefaultPage",c="PageSets('%2FUI2%2FFiori2LaunchpadHome')";var u=a.isSapStatisticsSet();function l(e){var a=p(e),s=f(a);h(a,e,function(e,a,i){d(s,e,a,i)})}function p(a){var s=e.getUrlParameterValue("sap-ui2-cache-disable");if(s&&a&&a.services&&a.services.pbFioriHome){a.services.pbFioriHome["sap-ui2-cache-disable"]=s}return o(a,"pbFioriHome",r,c,n)}function o(e,a,s,t,r){var n,c,u=false;if(e.services){if(e.services[a]){c=e.services[a]}else{c={};e.services[a]=c;u=true}}else{c={};e.services={};e.services[a]=c;u=true}if(!c.baseUrl||!c.relativeUrl){c.baseUrl=s;c.relativeUrl=t;u=true}if(u){i.warning("URL for "+a+" service not found in startup service result; fallback to default; cache invalidation might fail",null,"sap.ushell_abap.bootstrap")}if(c.baseUrl.lastIndexOf("/")!==c.baseUrl.length-1){c.baseUrl+="/"}if(c.relativeUrl[0]==="/"){c.relativeUrl=c.relativeUrl.slice(1)}n=c.baseUrl+c.relativeUrl;if(!/\$expand=/.test(n)&&r){n+=(n.indexOf("?")<0?"?":"&")+"$expand="+r}if(c.cacheId){n+=(n.indexOf("?")<0?"?":"&")+"sap-cache-id="+c.cacheId}if(c["sap-ui2-cache-disable"]){n+=(n.indexOf("?")<0?"?":"&")+"sap-ui2-cache-disable="+c["sap-ui2-cache-disable"]}return n}function d(e,a,s,i){if(a===200){e.resolve(JSON.parse(i).d,s)}else{e.reject(i)}}function f(e){var a=new jQuery.Deferred;sap.ui.require(["sap/ui/thirdparty/datajs"],function(i){OData.read.$cache=OData.read.$cache||new s.Map;OData.read.$cache.put(e,a.promise())});return a}function h(a,s,i){var t;t=e.createAndOpenXHR(a,s);if(u){t.setRequestHeader("sap-statistics","true")}t.onreadystatechange=function(){if(this.readyState!==4){return}i(t.status,undefined,t.responseText)};t.send()}t.requestPageSet=l;t._getAndAdjustServiceURL=o;t._getAndAdjustPageSetServiceURL=p;t._setSapStatistics=function(e){u=e};return t});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/bootstrap/evo/abap.request.startup", ["./abap.bootstrap.utils","sap/base/util/ObjectPath","sap/base/Log","sap/ushell_abap/pbServices/ui2/Utils","sap/ushell/utils"],function(e,t,r,a,n){"use strict";var s={};function i(t,r,s){var i="/sap/bc/ui2/start_up?",o=a.getParameterMap(),u;if(t){i+=t+"&"}function c(e){var t=o[e];if(t){i+=e+"="+encodeURIComponent(t[0])+"&"}}r.forEach(c);i+="shellType="+n.getShellType()+"&depth=0";if(s){i+=e.getCacheIdAsQueryParameter(s);u=e.createAndOpenXHR(i,s)}return new Promise(function(e,t){a.get(i,false,function(t){var r=JSON.parse(t);e(r)},t,u)})}s.requestStartupConfig=function(){var e=t.get("sap-ushell-config.services.Container.adapter.config");if(e){return Promise.resolve(e)}return i("",["sap-language","sap-client"])};s.requestFullTM=function(e){return i("so=%2A&action=%2A&systemAliasesFormat=object",["sap-language","sap-client","sap-ui2-cache-disable"],e).then(function(e){if(e){if(e.client){return Promise.reject("A start up response was returned in a target mappings request.")}return Promise.resolve(e)}return Promise.resolve({})},function(e){r.error("navTargetDataPromise rejected: "+e);return Promise.reject(e)})};s.requestDirectStart=function(e,t,r){var n=a.getFormFactor(),s="";s="so="+t.semanticObject+"&action="+t.action;s+="&systemAliasesFormat=object";Object.keys(r).forEach(function(e){s+="&"+e+"="+r[e]});if(n){s+="&formFactor="+encodeURIComponent(n)}return i(s,["sap-language","sap-client"],e).then(function(e){return Promise.resolve(e)})};return s});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/bootstrap/evo/abap.theme.handler", ["sap/ui/thirdparty/URI","sap/base/Log","sap/ushell/bootstrap/common/common.read.metatags"],function(e,r,i){"use strict";var t={};function a(e){var t=i.readMetaTags("sap-allowedThemeOrigins",function(e){return e.trim()});var a="";if(t.length>0){a=t[0]}else{r.debug("No meta tag sap-allowedThemeOrigins was found. No allowed origin for theme-url was applied.")}return!!a&&a.split(",").some(function(r){return r==="*"||e===r.trim()})}t.isThemeRootSafe=function(r){var i=new e(r).search(""),t=i.origin().toString();if(t===""||a(t)||i.origin()===window.location.origin){return true}return false};return t});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/bootstrap/evo/abap.xhrlogon.configure", ["sap/ushell/bootstrap/common/common.util","sap/base/Log"],function(n,e){"use strict";var r={start:i,initXhrLogonIgnoreList:t,createUi5ConnectedXhrLogger:o};return r;function o(){return["error","warning","info","debug"].reduce(function(n,r){n[r]=function(n){return e[r](n)};return n},{})}function t(e){var r=n.getLocationOrigin(),o=sap.ui.require.toUrl("");if(o&&o.indexOf(r+"/")===-1){e.ignore.add(o)}}function i(n,e){e.start();r.initXhrLogonIgnoreList(e.XHRLogonManager.getInstance());XMLHttpRequest.logger=o();n.oFrameLogonManager=e.FrameLogonManager.getInstance()}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/bootstrap/evo/abap.xhrlogon.handler", ["./abap.xhrlogon.load","./abap.xhrlogon.configure","./abap.bootstrap.utils","./XhrLogonEventHandler","sap/base/Log"],function(e,n,o,r,a){"use strict";var t={};t.getLogonMode=function(e){return o.getUrlParameterValue("sap-ushell-xhrLogon-mode")||e&&e.xhrLogon&&e.xhrLogon.mode||"frame"};t.initXhrLogon=function(o){var r=t.getLogonMode(o),g=t.createXhrLogonEventHandler(window,r),l=e.LogonManager.getInstance(),i=e.XHRLogonManager.getInstance();e.start();if(r==="reload"||r==="logoffAndRedirect"){l.unregisterAllHandlers();l.registerAuthHandler("*",function(e){g.handleEvent(e)})}else if(r!=="frame"){a.warning("Unknown setting for xhrLogonMode: '"+r+"'. Using default mode 'frame'.",null,"sap.ushell_abap.bootstrap.evo.abap.xhrlogon.handler")}XMLHttpRequest.logger=n.createUi5ConnectedXhrLogger();n.initXhrLogonIgnoreList(i)};t.createXhrLogonEventHandler=function(e,n){return new r(e,n)};return t});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/bootstrap/evo/abap.xhrlogon.load", [],function(){"use strict";var e={};var t={};
/*!
 * SAP XHR Library v2.1.0
 * (c) Copyright 2013-2019 SAP SE or an SAP affiliate company.
*/(function(n){if(typeof t==="object"&&typeof e!=="undefined"){e.exports=n()}else if(typeof define==="function"&&define.amd){define([],n)}else{var r;if(typeof window!=="undefined"){r=window}else if(typeof global!=="undefined"){r=global}else if(typeof self!=="undefined"){r=self}else{r=this}r.xhrlib=n()}})(function(){var e,t,n;return function(){function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return i(n||e)},c,c.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}return e}()({1:[function(e,t,n){"use strict";var r;function i(e,t,n,r,i,o){this.filters=[];this.xhr=e;this.method=t;this.url=n;this.async=!!r;if(i!==undefined){this.username=i}if(o!==undefined){this.password=o}}t.exports=i;r=i.prototype;r._process=function(e){var t,n,r,i;t=this.filters;i=t.length;for(r=0;r<i;++r){n=t[r];if(typeof n[e]==="function"){n[e](this)}}};r.aborting=function(){this._process("aborting")};r.aborted=function(){this._process("aborted")};r.opening=function(){this._process("opening")};r.opened=function(){this._process("opened")};r.sending=function(){this._process("sending")};r.sent=function(){this._process("sent")};r.reopening=function(){this._process("reopening")};r["catch"]=function(e){var t,n,r;t=this.filters;r=t.length;for(n=0;n<r;++n){if(typeof t[n]["catch"]==="function"){try{t[n]["catch"](e,this);e=null;break}catch(t){e=t}}}if(e){throw e}}},{}],2:[function(e,t,n){"use strict";var r;var i=e("./Channel.js");var o=e("./IgnoreList.js");function s(){this._filterFactories=[];this.ignore=new o}t.exports=s;r=s.prototype;function a(e){var t;t=typeof e;return t==="function"||t==="object"&&e!==null&&typeof e.addFilter==="function"}function u(e,t){if(typeof e==="function"){e(t)}else{e.addFilter(t)}}r.reset=function(){this._filterFactories=[];this.ignore=new o};r.addFilterFactory=function(e){var t,n,r,i;if(!a(e)){throw new TypeError("addFilterFactory expects a FilterFactory or a function parameter")}n=this._filterFactories;t=true;i=n.length;for(r=0;r<i;++r){if(n[r]===e){t=false;break}}if(t){this._filterFactories.push(e)}};r.removeFilterFactory=function(e){var t,n,r;t=this._filterFactories;r=t.length;for(n=0;n<r;++n){if(t[n]===e){t.splice(n,1);break}}};r.getFilterFactories=function(){return this._filterFactories.slice()};r.create=function(e,t,n,r,o,s){var a,h,c,l;a=new i(e,t,n,r,o,s);if(!this.ignore.ignored(n)){h=this._filterFactories;l=h.length;for(c=0;c<l;++c){u(h[c],a)}}return a}},{"./Channel.js":1,"./IgnoreList.js":7}],3:[function(e,t,n){"use strict";var r=e("./util.js");var i,o;var s={error:10,warn:20,info:30,debug:40};if(window.console&&typeof window.console.log==="function"){o={error:console.error?console.error:console.log,warn:console.warn?console.warn:console.log,info:console.log,debug:console.log}}else{o={};o.error=o.warn=o.info=o.debug=function(){}}function a(e,t){this.name=e;this.setLevel(t)}t.exports=a;i=a.prototype;i.format=function(e,t){return r.time()+" "+this.name+" ["+t.toUpperCase()+"] "+e};i.setLevel=function(e){if(e){e=typeof e==="number"?~~e:s[e]}this.level=e||s.warn};i.error=function(e){if(this.level>=s.error){o.error(this.format(e,"error"))}};i.warning=function(e){if(this.level>=s.warn){o.warn(this.format(e,"warn"))}};i.info=function(e){if(this.level>=s.info){o.info(this.format(e,"info"))}};i.debug=function(e){if(this.level>=s.debug){o.debug(this.format(e,"debug"))}}},{"./util.js":20}],4:[function(e,t,n){"use strict";var r=e("./events.js");var i=e("./EventHandlers.js");var o;var s="authenticationrequired";function a(){this.prefix="xhrlibFrame"+Date.now().toString(36);this.handlers=new i([s])}t.exports=a;o=a.prototype;a.frameCounter=0;o.addEventListener=function(e,t){this.handlers.add(e,t)};o.removeEventListener=function(e,t){this.handlers.remove(e,t)};o.dispatchAuthenticationRequired=function(){var e=this,t=r.createEvent(s);setTimeout(function(){e.handlers.dispatch(t)},0)};o.create=function(){var e,t,n=this;this.destroy();if(this.handlers.hasSubscribers(s)){this.dispatchAuthenticationRequired();return null}a.frameCounter+=1;e=this.prefix+a.frameCounter;this.frame=document.createElement("iframe");this.frame.id=e;this.frame.style.display="none";if(document.readyState==="complete"){document.body.appendChild(this.frame)}else{t=function(){if(document.readyState==="complete"){document.body.appendChild(n.frame);r.removeEventListener(document,"readystatechange",t)}};r.addEventListener(document,"readystatechange",t)}return this.frame};o.destroy=function(){if(this.frame){document.body.removeChild(this.frame);this.frame=null}};o.show=function(e){var t=this.frame;if(!e&&this.handlers.hasSubscribers(s)){this.dispatchAuthenticationRequired()}else if(t){t.style.display="block";t.style.position="absolute";t.style.top=0;t.style.left=0;t.style.width="100%";t.style.height="100%";t.style.zIndex=99999;t.style.border=0;t.style.background="white";setTimeout(function(){try{t.contentWindow.focus()}catch(e){void e}},100)}}},{"./EventHandlers.js":5,"./events.js":16}],5:[function(e,t,n){"use strict";var r;var i=e("./Log.js").logger;function o(e){var t,n;n=e.length;for(t=0;t<n;++t){this["_"+e[t]]=[]}this.subscriptions={};this.bufferedEvents=[]}t.exports=o;function s(e){return e&&(typeof e==="function"||typeof e.handleEvent==="function")}function a(e,t,n){try{if(typeof e==="function"){return e.call(t.currentTarget,t)}else{return e.handleEvent(t)}}catch(e){if(n){n.warning("Exception in "+t.type+" event handler: "+e.message+"\n"+e.stack)}throw e}}o.isHandler=s;o.fireEvent=a;r=o.prototype;r.add=function(e,t){var n,r,i,o;if(!s(t)){throw new TypeError("Invalid event handler")}r=this["_"+e];if(r){n=true;o=r.length;for(i=0;i<o;++i){if(r[i]===t){n=false;break}}if(n){r.push(t)}}return n};r.remove=function(e,t){var n,r,i,o=false;if(s(t)){n=this["_"+e];if(n){i=n.length;for(r=0;r<i;++r){if(n[r]===t){o=true;if(i===1){this["_"+e]=[]}else{n.splice(r,1)}break}}}}return o};r.dispatch=function(e){var t,n,r=e.type,o=this["_"+r];if(!o||!o.length){return}if(this.suspend){this.bufferedEvents.push(e)}else{o=o.slice();n=o.length;for(t=0;t<n;++t){a(o[t],e,i)}}};r.clearEvents=function(){this.bufferedEvents=[]};r.releaseEvents=function(){var e,t,n;n=this.bufferedEvents;t=n.length;if(t>0){this.clearEvents();for(e=0;e<t;++e){this.dispatch(n[e])}}};r.hasSubscribers=function(e){var t=this["_"+e];return t&&t.length>0};r.subscribed=function(e){return this.subscriptions[e]?true:false};r.subscribe=function(e){this.subscriptions[e]=true};r.unsubscribe=function(e){delete this.subscriptions[e]}},{"./Log.js":8}],6:[function(e,t,n){"use strict";var r=e("./DefaultLogonFrameProvider.js");var i=e("./LogonManager.js");var o=e("./XHRLogonManager.js");var s=e("./Log.js").logger;var a=e("./UrlObject.js");var u=e("./UrlTimeout.js");var h,c;function l(){s.debug("Creating FrameLogonManager");this._lfp=new r;this._timeout=new u(l.defaultTimeout)}t.exports=l;c=l.prototype;l.defaultTimeout=600;l.getInstance=function(e){if(!h&&!e){h=new l}return h};l.start=function(){l.getInstance().start()};l.shutdown=function(){if(h){h.shutdown();h=null}};Object.defineProperties(c,{logonFrameProvider:{get:function(){return this._lfp},set:function(e){if(e){this._lfp=e}else{this._lfp=new r}}}});c.start=function(){var e=i.getInstance();e.addEventListener(i.LogonEvent.LOGON_COMPLETE,this);e.addEventListener(i.LogonEvent.LOGON_FAILED,this);e.registerAuthHandler(o.logonScheme(o.Scheme.IFRAME),this)};c.shutdown=function(){var e=i.getInstance();this.cancelLogon();e.removeEventListener(i.LogonEvent.LOGON_COMPLETE,this);e.removeEventListener(i.LogonEvent.LOGON_FAILED,this);e.unregisterAuthHandler(o.logonScheme(o.Scheme.IFRAME),this)};c.getTimeout=function(e){return this._timeout.getTimeout(e)};c.setTimeout=function(e,t){this._timeout.setTimeout(e,t)};c.getFrameLoadHandler=function(e,t,n){var r,i;n=n||this.defaultTimeout;r=function(){if(i){clearTimeout(i)}i=setTimeout(function(){e.show()},n)};return r};c.onLogon=function(e){var t,n,r,i;this.onLogonEnd();s.debug("Processing iframe logon for realm "+e.realm);i=this.getTimeout(e.channel.url);t=new a(e.channel.url);t.setParameter("xhr-logon","iframe");n=this.logonFrameProvider;r=n.create();if(r){if(!r.onload){r.onload=this.getFrameLoadHandler(n,r.id,i)}r.xhrTimeout=i;r.src=t.href}this.pending={provider:n,realm:e.realm}};c.onLogonEnd=function(e){if(this.pending&&(!arguments.length||e===this.pending.realm)){this.pending.provider.destroy();this.pending=undefined}};c.cancelLogon=function(){if(this.pending){s.debug("Cancelling logon for realm "+this.pending.realm);i.getInstance().abortLogon(this.pending.realm);this.onLogonEnd(this.pending.realm)}};c.handleEvent=function(e){var t;switch(e.type){case i.LogonEvent.LOGON:t=e.request;if(t){this.onLogon(t);return true}break;case i.LogonEvent.LOGON_COMPLETE:this.onLogonEnd(e.response.realm);break;case i.LogonEvent.LOGON_FAILED:this.onLogonEnd(e.response.realm);break}return false}},{"./DefaultLogonFrameProvider.js":4,"./Log.js":8,"./LogonManager.js":9,"./UrlObject.js":11,"./UrlTimeout.js":12,"./XHRLogonManager.js":15}],7:[function(e,t,n){"use strict";var r;function i(){this.clear()}t.exports=i;r=i.prototype;r.add=function(e){switch(typeof e){case"string":this.p.push(e);break;case"object":if(e instanceof RegExp){this.r.push(e)}else{throw new TypeError("Unsupported ignore rule type")}break;case"function":this.f.push(e);break;default:throw new TypeError("Unsupported ignore rule type")}this.empty=false};r.ignored=function(e){var t=false;if(!this.empty){t=this._prefix(e)||this._regexp(e)||this._function(e)}return t};r.clear=function(){this.empty=true;this.p=[];this.r=[];this.f=[]};r._prefix=function(e){var t,n,r,i;if(!e){return false}i=false;t=this.p;r=t.length;for(n=0;n<r;++n){if(e.startsWith(t[n])){i=true;break}}return i};r._regexp=function(e){var t,n,r,i;i=false;t=this.r;r=t.length;for(n=0;n<r;++n){if(t[n].test(e)){i=true;break}}return i};r._function=function(e){var t,n,r,i;i=false;t=this.f;r=t.length;for(n=0;n<r;++n){try{if(t[n](e)){i=true;break}}catch(e){}}return i}},{}],8:[function(e,t,n){"use strict";var r=e("./ConsoleLogger.js");var i,o,s=["error","warning","info","debug"];o=new r("sap.xhrlib");function a(e){this.logger=e}t.exports=a;function u(e,t){var n,r=t.length;for(n=0;n<r;++n){if(typeof e[t[n]]!=="function"){return false}}return true}function h(e){return e&&typeof e==="object"&&u(e,s)}Object.defineProperty(a,"logger",{get:function(){return i},set:function(e){if(!e){i.logger=o}else if(h(e)){i.logger=e}}});s.forEach(function(e){a.prototype[e]=function(t){try{return this.logger[e](t)}catch(e){}}});a.setLevel=function(e){if(typeof i.logger.setLevel==="function"){i.logger.setLevel(e)}};i=new a(o)},{"./ConsoleLogger.js":3}],9:[function(e,t,n){"use strict";e("./xhr.js");var r=e("./events.js").createEvent;var i=e("./EventHandlers.js");var o=e("./Log.js").logger;var s,a,u,h;a={UNAUTHENTICATED:0,PENDING:1,AUTHENTICATED:2};s={LOGON:"logon",LOGON_COMPLETE:"logoncomplete",LOGON_FAILED:"logonfailed",LOGON_ABORTED:"logonaborted"};function c(){o.info("Creating Logon Manager");this.queue=[];this.realms={};this.authHandlers={};this._schemes=[];this.handlers=new i([s.LOGON,s.LOGON_ABORTED,s.LOGON_COMPLETE,s.LOGON_FAILED])}t.exports=c;c.getInstance=function(e){if(!u&&!e){u=new c}return u};c.shutdown=function(){if(u){u.shutdown();u=undefined}};c.LogonEvent=s;c.Status=a;h=c.prototype;Object.defineProperties(h,{schemes:{get:function(){return this._schemes.slice()}}});h._collectSchemes=function(){var e,t=[],n=this.authHandlers;for(e in n){if(n.hasOwnProperty(e)){t.push(e)}}this._schemes=t.sort()};h.addEventListener=function(e,t){this.handlers.add(e,t)};h.removeEventListener=function(e,t){this.handlers.remove(e,t)};h.registerAuthHandler=function(e,t){var n,r,o=this.authHandlers[e],s=true;if(!i.isHandler(t)){throw new TypeError("Invalid authentication handler")}if(o){for(n=0,r=o.length;n<r;++n){if(o[n]===t){s=false;break}}if(s){o.push(t)}}else{o=[t];this.authHandlers[e]=o;this._collectSchemes()}return s};h.unregisterAuthHandler=function(e,t){var n,r,o=this.authHandlers[e],s=false;if(!i.isHandler(t)){return false}if(o){for(n=0,r=o.length;n<r;++n){if(o[n]===t){s=true;if(r===1){delete this.authHandlers[e];this._collectSchemes()}else{o.splice(n,1)}break}}}return s};h.unregisterAllHandlers=function(e){if(e){delete this.authHandlers[e]}else{this.authHandlers={}}this._collectSchemes()};h.getAuthHandlers=function(e){var t=this.authHandlers[e];var n=this.authHandlers["*"];if(t){return n?t.concat(n):t.slice()}return n||[]};h.isSchemeHandled=function(e){return this.getAuthHandlers(e).length>0};h.dispatchEvent=function(e){this.handlers.dispatch(e)};h.createLogonEvent=function(e){var t=r(s.LOGON);t.request=e;return t};h.dispatchLogonEvent=function(e){var t=this.createLogonEvent(e);this.dispatchEvent(t)};h.dispatchLogonCompletedEvent=function(e){var t=r(s.LOGON_COMPLETE);t.response=e;this.dispatchEvent(t)};h.dispatchLogonFailedEvent=function(e){var t=r(s.LOGON_FAILED);t.response=e;this.dispatchEvent(t)};h.dispatchLogonAbortedEvent=function(e){var t=r(s.LOGON_ABORTED);t.realm=e;this.dispatchEvent(t)};h.dispatchLogonRequest=function(e){var t,n,r=false,s=this.createLogonEvent(e),a=this.getAuthHandlers(e.scheme);if(a){for(t=0,n=a.length;t<n;++t){r=i.fireEvent(a[t],s,o);if(r){break}}}return r};h.getAuthenticationStatus=function(e){return this.realms[e]||a.UNAUTHENTICATED};h.isQueued=function(e){var t,n,r;if(this.pending&&this.pending.channel&&this.pending.channel.xhr===e){return true}for(t=0,n=this.queue.length;t<n;++t){r=this.queue[t];if(r.channel&&r.channel.xhr===e){return true}}return false};h.requestLogon=function(e){var t,n;if(!e||!e.channel||!e.scheme){o.warning("Ignoring invalid Logon request");return}if(this.isQueued(e.channel.xhr)){o.debug("Ignoring authentication request for already queued request "+e.channel.url);return}o.info("Authentication requested for "+e.channel.url+" with scheme "+e.scheme);this.dispatchLogonEvent(e);if(this.isSchemeHandled(e.scheme)){n=e.realm;if(typeof n!=="string"){n=""+n}if(this.pending){o.debug("Pending authentication process, queueing request");if(this.getAuthenticationStatus(n)===a.AUTHENTICATED){this.realms[n]=a.UNAUTHENTICATED}this.queue.push(e);t=true}else{o.debug("Dispatching authentication request");this.realms[n]=a.PENDING;this.pending=e;t=this.dispatchLogonRequest(e)}}else{o.info("No authentication handler registered for scheme "+e.scheme)}if(!t){o.warning("Unsupported authentication request for scheme "+e.scheme);if(this.pending===e){this.pending=undefined}this.abort([e]);if(this.queue.length>0){this.requestLogon(this.queue.shift())}}};h.logonCompleted=function(e){var t,n,r,i,s,u,h,c;t=e.realm;r=this.queue;i=[];s=[];n=e.success;this.realms[t]=n?a.AUTHENTICATED:a.UNAUTHENTICATED;if(this.pending&&t===this.pending.realm){i.push(this.pending);this.pending=undefined}h=r.length;for(u=0;u<h;++u){c=r[u];if(c.realm===t){i.push(c)}else{s.push(c)}}this.queue=s;if(i.length>0){if(n){o.info("Authentication succeeded for realm "+t+", repeating requests.");this.retry(i)}else{o.warning("Authentication failed for realm "+t);this.abort(i)}}if(n){this.dispatchLogonCompletedEvent(e)}else{this.dispatchLogonFailedEvent(e)}if(!this.pending&&this.queue.length>0){this.requestLogon(this.queue.shift())}};h.abortLogon=function(e){var t,n,r,i,s,u;if(!e&&this.pending){e=this.pending.realm}if(e){t=this.queue;n=[];r=[];this.realms[e]=a.UNAUTHENTICATED;if(this.pending){if(e===this.pending.realm){n.push(this.pending)}else{t.push(this.pending)}}this.pending=undefined;s=t.length;for(i=0;i<s;++i){u=t[i];if(u.realm===e){n.push(u)}else{r.push(u)}}this.queue=r;if(n.length>0){o.warning("Authentication aborted for realm "+e);this.abort(n)}this.dispatchLogonAbortedEvent(e)}else{o.info("No pending authentication, ignoring abort")}if(this.queue.length>0){this.requestLogon(this.queue.shift())}};h.retry=function(e){var t,n,r,i;n=e.length;for(t=0;t<n;++t){try{r=e[t].channel;if(r.async){i=r.xhr;i.repeat()}}catch(e){o.warning("Error while repeating request: "+e.message);throw e}}};h.abort=function(e){var t,n,r,i;n=e.length;for(t=0;t<n;++t){try{r=e[t].channel;if(r.async){i=r.xhr;i.resumeEvents(true)}}catch(e){o.warning("Error while aborting request: "+e.message);throw e}}};h.abortAll=function(){var e;e=this.queue;this.queue=[];if(this.pending){e.push(this.pending);this.pending=undefined}this.abort(e)};h.shutdown=function(){o.info("Logon Manager shutdown");this.abortAll()}},{"./EventHandlers.js":5,"./Log.js":8,"./events.js":16,"./xhr.js":21}],10:[function(e,t,n){"use strict";var r;function i(){}t.exports=i;r=i.prototype;function o(){var e,t;e=document.createElement("div");e.style.fontSize="1.25rem";e.style.textAlign="center";e.style.marginBottom="16px";e.style.color="#003283";t=document.createTextNode("Authentication required");e.appendChild(t);return e}function s(e,t){var n,r,i,o,s;n=document.createElement("div");n.style.width="256px";n.style.margin="0 auto";r=document.createElement("button");setTimeout(function(){r.focus()},300);r.onclick=function(){e()};r.style.width="120px";r.style.height="32px";r.style.color="#ffffff";r.style.backgroundColor="#5496cd";r.style.border="1px solid #367db8";r.style.borderRadius="4px";r.style.testShadow="0 1px #000000";r.style.outline="none";r.onblur=function(){r._focus=false;r.style.testShadow="0 1px #000000";r.style.backgroundColor="#5496cd";r.style.borderColor="#367db8"};r.onfocus=function(){r._focus=true;r.style.testShadow="none";r.style.backgroundColor="#427cac";r.style.borderColor="#427cac"};r.onmouseover=function(){if(!r._focus){r.style.backgroundColor="#367db8";r.style.borderColor="#367db8"}};r.onmouseout=function(){if(!r._focus){r.style.backgroundColor="#5496cd";r.style.borderColor="#367db8"}};i=document.createTextNode("To sign in");r.appendChild(i);o=document.createElement("button");o.type="button";o.onclick=function(){t()};o.style.marginLeft="16px";o.style.width="120px";o.style.height="32px";o.style.color="#346187";o.style.backgroundColor="#f7f7f7";o.style.border="1px solid #ababab";o.style.borderRadius="4px";o.style.outline="none";o.onblur=function(){o._focus=false;o.style.backgroundColor="#f7f7f7";o.style.borderColor="#ababab"};o.onfocus=function(){o._focus=true;o.style.backgroundColor="#bfbfbf";o.style.borderColor="#ababab"};o.onmouseover=function(){if(!o._focus){o.style.backgroundColor="rgba(191, 191, 191, 0.5)";o.style.borderColor="rgba(191, 191, 191, 0.5)"}};o.onmouseout=function(){if(!o._focus){o.style.backgroundColor="#f7f7f7";o.style.borderColor="#ababab"}};s=document.createTextNode("Cancel");o.appendChild(s);n.appendChild(r);n.appendChild(o);return n}function a(e,t){var n=document.createElement("div");n.style.width="288px";n.style.margin="0 auto";n.style.padding="8px";n.style.backgroundColor="#daeef8";n.style.border="1px solid #00abfc";n.style.borderRadius="4px";n.style.fontSize="1rem";n.appendChild(o());n.appendChild(s(e,t));return n}r.createAlertDialog=function(e,t){var n=document.createElement("div");n.style.position="absolute";n.style.top="0";n.style.left="0";n.style.height="100%";n.style.width="100%";n.style.margin="0";n.style.padding="16px 0";n.style.zIndex="99999";n.appendChild(a(e,t));return n};r.show=function(e,t){if(!e){throw new TypeError("Missing mandatory onOpen option")}this.close();this.alertDialog=this.createAlertDialog(e,t);document.body.appendChild(this.alertDialog)};r.close=function(){if(this.alertDialog){this.alertDialog.parentNode.removeChild(this.alertDialog);this.alertDialog=null}}},{}],11:[function(e,t,n){"use strict";var r,i,o,s,a,u=window.location;if(typeof window.URL==="function"){o=function(e){return new URL(e,window.location.href)}}else{o=function(e){if(!i){i=document.createElement("a")}i.href=e;return i}}function h(e){if(e==="/"){return"/"}var t=e.lastIndexOf("/");return t===-1?"/":e.substring(0,t+1)}s=h(u.pathname);function c(e){var t=e.split("/"),n=s,r,i,o;for(r=0,i=t.length;r<i;++r){o=t[r];switch(o){case".":break;case"..":if(n!=="/"){n=n[n.length-1]==="/"?h(n.substring(0,n.length-1)):h(n)}break;default:n=n[n.length-1]==="/"?n+o:n+"/"+o;break}}return n}function l(e){this._parse(e)}t.exports=l;l.getHost=function(e){var t=e.hostname,n=e.port;switch(e.protocol){case"http:":if(n&&n!=="80"){t+=":"+n}break;case"https:":if(n&&n!=="443"){t+=":"+n}break;default:break}return t};r=l.prototype;r._parse=function(e){e=String(e)||u.href;var t=o(e),n;this.protocol=t.protocol||u.protocol;if(t.hostname){this.hostname=t.hostname;this.port=t.port}else{n=e[0]!=="/";this.hostname=u.hostname;this.port=u.port}if(this.protocol==="http:"&&this.port==="80"){this.port=""}else if(this.protocol==="https:"&&this.port==="443"){this.port=""}if(n){this.pathname=c(t.pathname)}else{this.pathname=t.pathname[0]==="/"?t.pathname:"/"+t.pathname}this.hash=t.hash;this.parameters=l.parseSearch(t.search)};l.parseSearch=function(e){var t,n,r;r={};if(e){t=/[?&]([^&=]+)=?([^&]*)/g;n=t.exec(e);while(n){r[n[1]]=n[2];n=t.exec(e)}}return r};r.getParameter=function(e){var t=this.parameters[e];return t===undefined||t===null?t:decodeURIComponent(t)};r.removeParameter=function(e){delete this.parameters[e]};r.setParameter=function(e,t){this.parameters[e]=encodeURIComponent(t)};Object.defineProperties(r,{crossOrigin:{get:function(){return this.origin!==a}},host:{get:function(){return l.getHost(this)}},href:{get:function(){return this.protocol+"//"+this.host+this.pathname+this.search+this.hash},set:function(e){this._parse(e)}},origin:{get:function(){return this.protocol+"//"+this.host}},search:{get:function(){var e,t,n,r;e="";t=this.parameters;for(n in t){if(t.hasOwnProperty(n)){r=t[n];if(e.length>0){e+="&"}e+=n;if(r){e+="=";e+=r}}}return e.length>0?"?"+e:e}}});a=window.location.protocol+"//"+l.getHost(window.location)},{}],12:[function(e,t,n){"use strict";var r=e("./util.js").lowerBound;var i=e("./Log.js").logger;var o;function s(e){this.defaultTimeout=e||600;this.timeout={};this.idxTimeout=[]}t.exports=s;o=s.prototype;o.indexTimeouts=function(){var e,t=[],n=this.timeout;for(e in n){if(n.hasOwnProperty(e)){t.push(e)}}this.idxTimeout=t.sort()};o.getTimeout=function(e){var t,n=r(e,this.idxTimeout);if(n>=0){t=this.idxTimeout[n];if(e.substring(0,t.length)===t){return this.timeout[t]}}return this.defaultTimeout};o.setTimeout=function(e,t){if(!e){return}if(typeof e!=="string"){e=""+e}if(t){i.info("Setting timeout "+t+" on "+e);this.timeout[e]=t}else{i.info("Reset timeout to default on "+e);delete this.timeout[e]}this.indexTimeouts()}},{"./Log.js":8,"./util.js":20}],13:[function(e,t,n){"use strict";var r=e("./events.js");var i=e("./LogonManager.js");var o=e("./XHRLogonManager.js");var s=e("./DefaultLogonFrameProvider.js");var a=e("./OpenWindowAlert.js");var u=e("./Log.js").logger;var h=e("./UrlObject.js");var c=e("./UrlTimeout.js");var l,f;function d(){u.debug("Creating WindowLogonManager");this.alertDialog=new a;this.frameProvider=new s;this.timeout=new c(d.defaultTimeout);this.pollingInterval=5e3}t.exports=d;f=d.prototype;d.defaultTimeout=600;d.getInstance=function(e){if(!l&&!e){l=new d}return l};d.start=function(){d.getInstance().start()};d.shutdown=function(){if(l){l.shutdown();l=null}};f.start=function(){var e=i.getInstance();e.addEventListener(i.LogonEvent.LOGON_COMPLETE,this);e.addEventListener(i.LogonEvent.LOGON_FAILED,this);e.registerAuthHandler(o.logonScheme(o.Scheme.STRICT_WINDOW),this);e.registerAuthHandler(o.logonScheme(o.Scheme.WINDOW),this)};f.shutdown=function(){var e=i.getInstance();this.cancelLogon();e.removeEventListener(i.LogonEvent.LOGON_COMPLETE,this);e.removeEventListener(i.LogonEvent.LOGON_FAILED,this);e.unregisterAuthHandler(o.logonScheme(o.Scheme.IFRAME),this);e.unregisterAuthHandler(o.logonScheme(o.Scheme.STRICT_WINDOW),this);e.unregisterAuthHandler(o.logonScheme(o.Scheme.WINDOW),this)};f.getTimeout=function(e){return this.timeout.getTimeout(e)};f.setTimeout=function(e,t){this.timeout.setTimeout(e,t)};f.handleLegacyIFrame=function(){var e=o.logonScheme(o.Scheme.IFRAME),t=i.getInstance();t.unregisterAllHandlers(e);t.registerAuthHandler(e,this)};f.onLogon=function(e){var t=true;this.onLogonEnd();u.debug("Processing "+e.scheme+" logon for realm "+e.realm);switch(o.xhrScheme(e.scheme)){case o.Scheme.WINDOW:this.onWindowLogon(e);break;case o.Scheme.STRICT_WINDOW:this.onStrictWindowLogon(e);break;case o.Scheme.IFRAME:this.onWindowLogon(e,true);break;default:t=false;u.warning("WindowLogonManager unsupported request scheme "+e.scheme);break}return t};f.onWindowLogon=function(e,t){var n,r,i,o,s=this;if(t){u.debug("Processing iframe logon as window logon for realm "+e.realm)}else{u.debug("Processing window logon for realm "+e.realm)}i=this.getTimeout(e.channel.url);n=new h(e.channel.url);n.setParameter("xhr-logon",t?"iframe":"window");r=this.frameProvider.create();r.onload=function(){if(o){clearTimeout(o)}o=setTimeout(function(){s.createWindow(t)},i)};r.xhrTimeout=i;r.src=n.href;this.pending={realm:e.realm,frame:r.id,url:n.href}};f.onStrictWindowLogon=function(e){var t=new h(e.channel.url);t.setParameter("xhr-logon","strict-window");u.debug("Processing strict-window logon for realm "+e.realm);this.pending={realm:e.realm,url:t.href};this.createWindow()};f.createWindow=function(e){var t,n=this;if(!this.pending){return}t=window.open(this.pending.url,"_blank");if(!t||t.closed){u.warning("Failed to open logon window, alerting user");this.alertDialog.show(function(){n.createWindow(e)},function(){n.cancelLogon()});return}this.window=t;try{t.opener=window}catch(e){void e}this.windowMonitorId=setInterval(function(){if(!n.window||n.window.closed){n.cancelLogon()}},300);if(e){n.pollIntervalId=setInterval(function(){n.poll()},n.pollingInterval)}r.addEventListener(t,"load",function(){u.info("Logon window opened");if(n.closed){return}if(e){setTimeout(function(){n.poll()},300)}n.windowIntervalId=setInterval(function(){try{if(e&&typeof n.window.notifyParent==="function"){n.poll()}}catch(e){u.warning("Logon polling failed: "+e.message)}},300)});r.addEventListener(t,"close",function(){n.cancelLogon()});setTimeout(function(){try{if(n.window){n.window.focus()}}catch(e){u.warning("Failed to switch focus to logon window")}},300)};f.poll=function(){var e;if(this.pending){e=this.frameProvider.create();this.pending.frame=e.id;e.src=this.pending.url}};f.stopPolling=function(){if(this.windowMonitorId){clearInterval(this.windowMonitorId);this.windowMonitorId=undefined}if(this.windowIntervalId){clearInterval(this.windowIntervalId);this.windowIntervalId=undefined}if(this.pollIntervalId){clearInterval(this.pollIntervalId);this.pollIntervalId=undefined}};f.onLogonEnd=function(e){if(this.pending&&(!arguments.length||e===this.pending.realm)){this.stopPolling();this.frameProvider.destroy();this.alertDialog.close();if(this.window){this.window.close();this.window=undefined}this.pending=undefined}};f.cancelLogon=function(){if(this.pending){u.debug("Cancelling logon for realm "+this.pending.realm);i.getInstance().abortLogon(this.pending.realm);this.onLogonEnd(this.pending.realm)}};f.handleEvent=function(e){var t;switch(e.type){case i.LogonEvent.LOGON:t=e.request;if(t){return this.onLogon(t)}break;case i.LogonEvent.LOGON_COMPLETE:this.onLogonEnd(e.response.realm);break;case i.LogonEvent.LOGON_FAILED:this.onLogonEnd(e.response.realm);break}return false}},{"./DefaultLogonFrameProvider.js":4,"./Log.js":8,"./LogonManager.js":9,"./OpenWindowAlert.js":10,"./UrlObject.js":11,"./UrlTimeout.js":12,"./XHRLogonManager.js":15,"./events.js":16}],14:[function(e,t,n){"use strict";var r=e("./httpUtil.js");var i=e("./UrlObject.js");var o,s,a=2,u=4;function h(e,t){this.manager=e;this.channel=t;this.ignore=this.manager.ignore&&this.manager.ignore.ignored(t.url);if(!this.ignore){t.xhr._addEventListener("readystatechange",this)}}t.exports=h;o=h.prototype;h.parseHeader=function(e){var t,n=r.parseHeader(e);if(n.accept){n.accept=n.accept.split(",");for(t=0;t<n.accept.length;++t){n.accept[t]=n.accept[t].trim()}}return n};o.sending=function(e){var t,n,r=new i(e.url);if(r.crossOrigin&&!e.xhr.withCredentials){this.ignore=true}if(this.ignore){return}t=e.xhr;n=this.manager.accept().join(",");if(t.getRequestHeader("X-XHR-Logon")===undefined){t.setRequestHeader("X-XHR-Logon","accept="+JSON.stringify(n))}if(t.getRequestHeader("X-Requested-With")===undefined){t.setRequestHeader("X-Requested-With","XMLHttpRequest")}};o.handleEvent=function(e){var t,n,r,i,o,c,l,f;t=this.channel;n=t.xhr;if(n.readyState<a){return}if(n.readyState===a){if(s===undefined){try{o=n.status;s=!!o}catch(e){s=false}if(!o){return}}else if(!s){return}}if(n.status===403){r=n.getResponseHeader("x-xhr-logon");if(r){if(t.async){n.suspendEvents()}if(t.async||this.manager.triggerLogonOnSyncRequest){i=h.parseHeader(r);l=i.accept;if(l){for(f=0;f<l.length;++f){if(l[f]==="repeat"){l.splice(f,1);c=true;break}}}if(n.readyState===u){if(c&&!t.repeated){t.repeated=true;l=this.manager.accept(l);n.setRepeatHeader("X-XHR-Logon",'accept="'+l.join(",")+'"');n.repeat()}else{this.manager.requestLogon(t,e,i)}}}}}}},{"./UrlObject.js":11,"./httpUtil.js":17}],15:[function(e,t,n){"use strict";var r=e("./xhr.js");var i=e("./IgnoreList.js");var o=e("./Log.js").logger;var s=e("./XHRLogonFilter.js");var a=e("./LogonManager.js");var u=e("./events.js");var h="xhrlogon.";var c=/^\s*\{\s*"xhrLogon"\s*:/;var l,f;function d(){o.info("Creating XHR Logon Manager")}t.exports=d;f=d.prototype;d.getInstance=function(e){if(!l&&!e){l=new d}return l};d.start=function(){d.getInstance().start()};d.shutdown=function(){if(l){l.shutdown();l=undefined}};d.logonScheme=function(e){return h+e};d.xhrScheme=function(e){return e.startsWith(h)?e.substring(h.length):"none"};f.triggerLogonOnSyncRequest=true;d.Scheme={NONE:"none",REPEAT:"repeat",IFRAME:"iframe",WINDOW:"window",STRICT_WINDOW:"strict-window"};d.defaultAccept=[d.Scheme.REPEAT,d.Scheme.IFRAME,d.Scheme.WINDOW,d.Scheme.STRICT_WINDOW];f.start=function(){if(!this.started){o.info("XHR Logon Manager startup");this.ignore=new i;this._initializeTrustedOrigins();this._registerFilterFactory();this.acceptOrder=d.defaultAccept.slice();u.addEventListener(window,"message",this.getEventHandler());this.started=true}};f.shutdown=function(){if(this.started){o.info("XHR Logon Manager shutdown");u.removeEventListener(window,"message",this.getEventHandler());this._unregisterFilterFactory();this.started=false}};function g(e){return e>=200&&e<300||e===304}function p(){var e,t,n,r=[],i=a.getInstance().schemes;for(e=0,t=i.length;e<t;++e){n=i[e];if(n.startsWith(h)){r.push(n.substring(h.length))}}r.push(d.Scheme.REPEAT);return r}f.accept=function(e){var t,n,r,i=[],o=a.getInstance();e=e||p();if(e.length){for(t=0,n=e.length;t<n;++t){r=e[t];if(o.isSchemeHandled(d.logonScheme(r))){i.push(r)}}}if(!i.length){i.push(d.Scheme.NONE)}return i};f.acceptScheme=function(e){if(!e||!e.length){return d.Scheme.NONE}var t,n,r,i=d.Scheme.NONE,o={},s=a.getInstance();for(t=0,n=e.length;t<n;++t){o[e[t]]=true}for(t=0,n=this.acceptOrder.length;t<n;++t){r=this.acceptOrder[t];if(s.isSchemeHandled(d.logonScheme(r))&&o[r]){i=r;break}}return i};var v="SAP NetWeaver Application Server [";function m(e){if(!e){return""}if(e.startsWith(v)){return e.substring(0,v.length+3)+"]"}return e}f.requestLogon=function(e,t,n){var r=this.acceptScheme(n.accept);a.getInstance().requestLogon({channel:e,realm:m(n.realm),scheme:d.logonScheme(r),event:t})};f.registerAuthHandler=function(e,t){e=d.logonScheme(e);return a.getInstance().registerAuthHandler(e,t)};f.unregisterAuthHandler=function(e,t){e=d.logonScheme(e);return a.getInstance().unregisterAuthHandler(e,t)};f.handleEvent=function(e){var t,n;t=e.data;if(c.test(t)){try{if(this.isTrusted(e.origin)){n=JSON.parse(t);if(typeof n.xhrLogon!=="object"){o.warning("Invalid xhrLogon message: "+t)}else{n.xhrLogon.realm=m(n.xhrLogon.realm);n.xhrLogon.success=g(n.xhrLogon.status);a.getInstance().logonCompleted(n.xhrLogon)}}else{o.warning("Received xhrlogon message from untrusted origin "+e.origin)}}catch(e){o.warning("Invalid xhrLogon message: "+t)}}};f._initializeTrustedOrigins=function(){var e,t,n;n={};e=window.location;t=e.protocol;n[t+"//"+e.host]=true;switch(t){case"http:":if(e.port===""){n["http://"+e.hostname+":80"]=true}else if(e.port==="80"){n["http://"+e.hostname]=true}break;case"https:":if(e.port===""){n["https://"+e.hostname+":443"]=true}else if(e.port==="443"){n["https://"+e.hostname]=true}break;default:break}this._trustedOrigins=n};f.isTrusted=function(e){return!!this._trustedOrigins[e]};f.addTrustedOrigin=function(e){this._trustedOrigins[e]=true};f.getEventHandler=function(){var e,t;e=this._eventHandler;if(!e){t=this;e=function(e){t.handleEvent(e)};this._eventHandler=e}return e};f._getFilterFactory=function(){var e,t;e=this._filterFactory;if(!e){t=this;e=function(e){e.filters.push(new s(t,e))};this._filterFactory=e}return e};f._registerFilterFactory=function(){if(r.channelFactory){r.channelFactory.addFilterFactory(this._getFilterFactory())}};f._unregisterFilterFactory=function(){if(r.channelFactory){r.channelFactory.removeFilterFactory(this._getFilterFactory());delete this._filterFactory}}},{"./IgnoreList.js":7,"./Log.js":8,"./LogonManager.js":9,"./XHRLogonFilter.js":14,"./events.js":16,"./xhr.js":21}],16:[function(e,t,n){"use strict";var r;function i(e,t,n){var r;r=document.createEvent("Event");r.initEvent(e,t,n);return r}function o(e,t,n){var o,s;if(r){o=i(e,t,n)}else{try{if(t||n){s={bubbles:t,cancelable:n}}o=new Event(e,s)}catch(s){r=true;o=i(e,t,n)}}return o}function s(e,t,n,r){if(e.addEventListener){e.addEventListener(t,n,r)}else if(e.attachEvent){e.attachEvent("on"+t,n)}}function a(e,t,n,r){if(e.removeEventListener){e.removeEventListener(t,n,r)}else if(e.detachEvent){e.detachEvent("on"+t,n)}}t.exports={createEvent:o,addEventListener:s,removeEventListener:a}},{}],17:[function(e,t,n){"use strict";var r=/(?:,|^)\s*(?:,\s*)*(\w+)\s*=\s*(?:"((?:[^"\\]|\\.)*)"|(\w*))/g;function i(e){var t={},n,i,o;if(e===undefined){return t}if(typeof e!=="string"){throw new TypeError("Invalid header value")}n=r.exec(e);while(n!==null){i=n[1];o=n[2]===undefined?n[3]:n[2];t[i]=o?o.replace(/\\(.)/g,"$1"):"";n=r.exec(e)}return t}t.exports={parseHeader:i}},{}],18:[function(e,t,n){"use strict";e("./polyfill.js");e("./xhr.js");var r=e("./LogonManager.js");var i=e("./FrameLogonManager.js");var o=e("./WindowLogonManager.js");var s=e("./XHRLogonManager.js");function a(e){e=e||{};r.getInstance();s.start();i.start();o.start();if(e.iframeAsWindow){o.getInstance().handleLegacyIFrame()}}function u(){s.shutdown();i.shutdown();o.shutdown();o.shutdown()}t.exports={start:a,shutdown:u,FrameLogonManager:i,LogonManager:r,URL:e("./UrlObject.js"),WindowLogonManager:o,XHRLogonManager:s}},{"./FrameLogonManager.js":6,"./LogonManager.js":9,"./UrlObject.js":11,"./WindowLogonManager.js":13,"./XHRLogonManager.js":15,"./polyfill.js":19,"./xhr.js":21}],19:[function(e,t,n){"use strict";var r;if(!String.prototype.startsWith){String.prototype.startsWith=function(e,t){e=String(e);t=Number(t)||0;t=t<0?0:Math.floor(t);return this.substr(t,e.length)===e}}if(!String.prototype.trim){r=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(r,"")}}if(!Date.now){Date.now=function(){return(new Date).getTime()}}},{}],20:[function(e,t,n){"use strict";var r=["","0","00","000","0000"];function i(e,t){var n,r,i=0,o=t.length-1;if(o<0||e<t[0]){return-1}if(e>=t[o]){return o}--o;while(i<o){n=i+o+1>>1;r=t[n];if(e<r){o=n-1}else{i=n}}return i}function o(e,t){var n=""+e;if(n.length<t){n=r[t-n.length]+n}return n}function s(){var e=new Date;var t=o(e.getHours(),2)+":"+o(e.getMinutes(),2)+":";t+=o(e.getSeconds(),2)+"."+o(e.getMilliseconds(),3);return t}t.exports={lowerBound:i,pad:o,time:s}},{}],21:[function(e,t,n){"use strict";function r(){var t=e("./Log.js");var n=e("./ChannelFactory.js");var r=e("./EventHandlers.js");var i,o,s,a,u=0,h=t.logger;i=["loadstart","progress","abort","error","load","timeout","loadend"];o=i.concat("readystatechange");var c=window.navigator.userAgent.toLowerCase().indexOf("firefox")!==-1;s=XMLHttpRequest;XMLHttpRequest._SAP_ENHANCED=true;a=s.prototype;XMLHttpRequest.channelFactory=new n;function l(e,t){var n,r,i,o,s,a;r=t.length;for(n=0;n<r;++n){i=t[n];a=e[i];if(a){s="_"+i;o=e[s];if(!o){e[s]=a}}}}l(a,["abort","open","setRequestHeader","send","addEventListener","removeEventListener"]);a._getHandlers=function(){var e=this._handlers;if(!e){e=new r(o);this._handlers=e}return e};a.handleEvent=function(e){this._getHandlers().dispatch(e)};a.suspendEvents=function(){this._getHandlers().suspend=true};a.resumeEvents=function(e){var t=this._getHandlers();t.suspend=false;if(e){t.releaseEvents()}else{t.clearEvents()}};a.clearEvents=function(){this._getHandlers().clearEvents()};a.getEventHandler=function(){var e=this,t=this._fnHandler;if(!t){t=function(t){e.handleEvent(t)};this._fnHandler=t}return t};a._checkEventSubscription=function(e,t){t=t||this._getHandlers();if(!t.subscribed(e)){this._addEventListener(e,this.getEventHandler());t.subscribe(e)}};a._checkEventSubscriptions=function(){var e,t,n;e=this._getHandlers();n=o.length;for(t=0;t<n;++t){this._checkEventSubscription(o[t],e)}};a.addEventListener=function(e,t){this._getHandlers().add(e,t)};a.removeEventListener=function(e,t){this._getHandlers().remove(e,t)};function f(e){Object.defineProperty(a,"on"+e,{configurable:true,get:function(){return this["_on"+e]||null},set:function(t){var n="_on"+e;if(this[n]){this.removeEventListener(e,this[n])}if(typeof t==="function"||typeof t==="object"){this[n]=t;if(r.isHandler(t)){this.addEventListener(e,t)}}else{this[n]=null}}})}o.forEach(function(e){f(e)});a.abort=function(){var e;try{e=this._channel;if(e){h.debug("Aborting request "+e.method+" "+e.url);e.aborting();this._abort();e.aborted()}else{h.debug("Aborting request");this._abort()}}catch(t){h.warning("Failed to abort request: "+t.message);if(e){e["catch"](t)}else{throw t}}};a.open=function(e,t,n,r,i){var o,a,c,l;this._id=++u;h.debug("Opening request #"+this._id+" "+e+" "+t);a=arguments.length;if(a<=2){n=true}c=e;l=t;this._getHandlers().clearEvents();o=s.channelFactory.create(this,e,t,n,r,i);this._channel=o;try{this._clearParams();o.opening();e=o.method;t=o.url;if(l!==t||c!==e){h.debug("Rewriting request #"+this._id+" to "+e+" "+t)}if(a<=2){this._open(e,t)}else{this._open(e,t,n,r,i)}o.opened();this._checkEventSubscriptions();this._removeEventListener("readystatechange",this.getEventHandler());this._addEventListener("readystatechange",this.getEventHandler())}catch(n){h.warning("Failed to open request #"+this._id+" "+e+" "+t+": "+n.message);o["catch"](n)}};a.setRequestHeader=function(e,t){var n,r;if(typeof t!=="string"){t=""+t}this._setRequestHeader(e,t);r=e.toLowerCase();n=this.headers;if(n[r]===undefined){n[r]=t}else{n[r]+=", "+t}};a.setRequestHeaders=function(e){var t,n,r,i;if(typeof e==="object"){n=Object.getOwnPropertyNames(e);i=n.length;for(r=0;r<i;++r){t=n[r];this.setRequestHeader(t,e[t])}}};a.send=function(e){var t,n,r;try{t=this._channel;if(t){n=t.method;r=t.url;h.debug("Sending request #"+this._id+" "+n+" "+r);t.sending()}this._saveParams(e);this._send(e);if(t){t.sent()}}catch(e){if(n){h.warning("Failed to send request #"+this._id+" "+n+" "+r+": "+e.message)}else{h.warning("Failed to send request #"+this._id+": "+e.message)}if(t){t["catch"](e)}else{throw e}}};a.getRequestHeader=function(e){return this.headers[e.toLowerCase()]};a.deleteRepeatHeader=function(e){delete this.headers[e.toLowerCase()]};a.setRepeatHeader=function(e,t){this.headers[e.toLowerCase()]=t};a.reopen=function(){var e=this._channel,t,n;if(e){t=e.method;n=e.url;h.debug("Reopening request #"+this._id+" "+t+" "+n)}else{throw new TypeError("Cannot reopen request")}try{e.reopening();e.opening();this._open(t,n,e.async,e.username,e.password);e.opened();this._restoreParams();this.resumeEvents()}catch(r){h.warning("Failed to reopen request #"+this._id+" "+t+" "+n+": "+r.message);e["catch"](r)}};a.repeat=function(){var e=this._channel,t=this;if(!e){throw new TypeError("Cannot repeat request")}if(c){setTimeout(function(){t.abort();t.reopen();t.send(t._data)},0)}else{this.abort();this.reopen();this.send(this._data)}};a.toString=function(){var e=this._channel,t="[object XMLHttpRequest]";if(e){t+="#"+this._id+" "+e.method+" "+e.url}return t};Object.defineProperties(a,{channel:{get:function(){return this._channel}},headers:{get:function(){var e=this._headers;if(!e){e={};this._headers=e}return e}},id:{get:function(){return this._id}}});a._clearParams=function(){delete this._headers;delete this._withCredentials;delete this._timeout;delete this._data};a._restoreParams=function(){var e,t;if(this._headers){t=this._headers;this._headers={};this.setRequestHeaders(t)}if(this._withCredentials){this.withCredentials=true}e=this._timeout;if(e){this.timeout=e}};a._saveParams=function(e){var t;if(e!==undefined&&e!==null){this._data=e}if(this.withCredentials){this._withCredentials=true}t=this.timeout;if(t){this._timeout=t}};Object.defineProperties(XMLHttpRequest,{logger:{get:function(){return t.logger},set:function(e){t.logger=e}}})}if(!XMLHttpRequest._SAP_ENHANCED){r()}t.exports=XMLHttpRequest},{"./ChannelFactory.js":2,"./EventHandlers.js":5,"./Log.js":8}]},{},[18])(18)});return e.exports});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/bootstrap/evo/boottask", ["./abap.xhrlogon.load","sap/ushell/utils","./abap.bootstrap.utils","./abap.request.startup","./abap.request.pageset","./abap.xhrlogon.handler","./abap.theme.handler","sap/ushell/EventHub","sap/ui/performance/trace/initTraces","sap/base/util/ObjectPath","sap/base/Log","sap/ushell_abap/pbServices/ui2/Utils"],function(e,a,t,r,i,n,s,o,l,c,u,p){"use strict";var g={};var f=new RegExp("^(#)?([A-Za-z0-9_]+)-([A-Za-z0-9_]+)"),h,d;function m(e){function a(e){if(!e){return false}return e.indexOf("Shell-home")===0||e.indexOf("Launchpad-openFLPPage")===0||e.indexOf("Shell-appfinder")===0||e.indexOf("Shell-catalog")===0||e.indexOf("shell-catalog")===0||e.indexOf("Action-search")===0}function t(){return window["sap-ushell_abap-bootstrap-abap-noInitialTarget"]!==undefined}var r=e.match(f);var i=r&&r[2];var n=r&&r[3];var s=e&&!a(e)&&!t()&&i&&n;return s}function v(){var e,a=t.getLocationHref(),r=a.indexOf("#");if(r<0){return""}e=decodeURI(a.slice(r+1));return e}function b(){var e=v(),a=e.indexOf("&/");return a<0?e:e.slice(0,a)}function P(e){var a=e.match(f);return a?{semanticObject:a[2],action:a[3]}:undefined}function S(e){if(!e||e==="#"){return true}return e.indexOf("Shell-home")===0||e.indexOf("Launchpad-openFLPPage")===0||e.indexOf("Shell-appfinder")===0||e.indexOf("Shell-catalog")===0||e.indexOf("shell-catalog")===0}function y(e){if(e===undefined){return undefined}try{return JSON.parse(JSON.stringify(e))}catch(e){u.error("Could not clone object",null,"sap.ushell_abap.bootstrap");return undefined}}function C(e){return e.indexOf("sap_")===0}function F(e,a,t){var r=sap.ui.require("sap/ui/core/Configuration");var i=r.getFormatSettings();u.debug("setSapui5Settings()",JSON.stringify(e),"sap.ushell_abap.bootstrap.abap");if(e.language){r.setLanguage(e.language,e.ABAPLanguage)}if(e.legacyDateFormat){i.setLegacyDateFormat(e.legacyDateFormat)}if(e.legacyDateCalendarCustomizing){i.setLegacyDateCalendarCustomizing(e.legacyDateCalendarCustomizing)}if(e.legacyNumberFormat){i.setLegacyNumberFormat(e.legacyNumberFormat)}if(e.legacyTimeFormat){i.setLegacyTimeFormat(e.legacyTimeFormat)}if(typeof a==="object"){i.addCustomCurrencies(a)}if(t!==""&&typeof t==="string"){r.setTimezone(t)}}function A(e){(c.get("sap-ushell-config.services.Container.adapter.config")||c.create("sap-ushell-config.services.Container.adapter.config")).bootTheme=y(e)}function T(e){if(!e){u.error("extractSystemThemeRoot: mandatory parameter oStartupServiceResult not supplied")}if(e.themeRoot){return e.themeRoot}if(e.client){u.warning("Theme root was not contained in startup service result. A fallback to /sap/public/bc/themes/~client-<client number> is used",null,"sap.ushell_abap.bootstrap");return"/sap/public/bc/themes/~client-"+e.client}u.error("extractSystemThemeRoot: Could not determine system theme root")}function w(e){var a,t;if(e&&e.userProfile&&e.userProfile.filter){a=e.userProfile.filter(function(e){return e.id==="THEME"});t=a.length?a[0]:{};if(t.value){return t.value}}if(e&&e.theme){return e.theme}return""}function x(e,a){if(e&&C(e)){return""}return a}function L(e,a){var t;t=w(e);return{theme:t,root:x(t,a)}}function R(e){var a,r;a=t.getUrlParameterValue("sap-theme");if(a){if(a.indexOf("@")>0){r=a.split("@",2);return{theme:r[0],root:r[1]}}return{theme:a,root:x(a,e)}}return undefined}function O(){var e=p.getParameterMap()["sap-theme"]&&p.getParameterMap()["sap-theme"][0];if(e){return e}return undefined}function _(e){var a=e;var t=e.indexOf("@");if(t>=0){var r=a.slice(t+1);return s.isThemeRootSafe(r)}return true}function z(e,a){var t;var r={};var i;var n=O();var s=sap.ui.require("sap/ui/core/Core");if(n&&_(n)){t=R(a);i=t;u.debug("theme: URL theme = '"+i.theme+"' theme root = '"+i.root+"'",null,"sap.ushell_abap.bootstrap");if(i.root){s.setThemeRoot(i.theme,i.root.replace(/\/?$/,"/UI5/"))}}else if(e){i=e;u.debug("theme: startup service theme = '"+i.theme+"' theme root = '"+i.root+"'",null,"sap.ushell_abap.bootstrap");if(i.root){s.applyTheme(i.theme,i.root+"/UI5/")}else{s.applyTheme(i.theme)}}else{r.theme=c.get("sap-ui-config.theme");if(r.theme){r.root=c.get("sap-ui-config.themeRoots."+r.theme||"");if(!r.root){r.root=x(r.theme,a)}i={theme:r.theme,root:r.root};u.debug("theme: html file theme = '"+i.theme+"' theme root = '"+i.root+"'",null,"sap.ushell_abap.bootstrap")}else{i={theme:"",root:""};u.error("Could not determine theme",null,"sap.ushell_abap.bootstrap")}}A(i);return i}function D(e){var a=p.getParameterMap(),r=t.getUrlParameterValue("sap-locale",a),i={},n,s;n=c.get("sap-ushell-config.services.SupportTicket.config")||c.create("sap-ushell-config.services.SupportTicket.config");if(n.enabled!==false){n.enabled=e.isEmbReportingActive===true}n=c.get("sap-ushell-config.services.ClientSideTargetResolution.adapter.config.services")||c.create("sap-ushell-config.services.ClientSideTargetResolution.adapter.config.services");n.targetMappings=e.services&&e.services.targetMappings;n=c.get("sap-ushell-config.services.LaunchPage.adapter.config.services")||c.create("sap-ushell-config.services.LaunchPage.adapter.config.services");n.targetMappings=e.services&&e.services.targetMappings;n.launchPage=e.services&&e.services.pbFioriHome;n=c.get("sap-ushell-config.services.VisualizationDataProvider.adapter")||c.create("sap-ushell-config.services.VisualizationDataProvider.adapter");n.module="sap.ushell_abap.adapters.abap.LaunchPageAdapter";n=c.get("sap-ushell-config.services.VisualizationDataProvider.adapter.config.services")||c.create("sap-ushell-config.services.VisualizationDataProvider.adapter.config.services");n.targetMappings=e.services&&e.services.targetMappings;n.launchPage=e.services&&e.services.pbFioriHome;n=c.get("sap-ushell-config.services.PageBuilding.adapter.config.services")||c.create("sap-ushell-config.services.PageBuilding.adapter.config.services");n.pageBuilding=e.services&&e.services.pbFioriHome;n=c.get("sap-ushell-config.services.Personalization.adapter.config.services")||c.create("sap-ushell-config.services.Personalization.adapter.config.services");n.personalization=e.services&&e.services.personalization;if(!r){i={language:e.languageBcp47||e.language,ABAPLanguage:e.language,legacyDateFormat:e.dateFormat,legacyDateCalendarCustomizing:e.tislcal,legacyNumberFormat:e.numberFormat===""?" ":e.numberFormat,legacyTimeFormat:e.timeFormat}}s=c.get("sap-ushell-config.startupConfig.timeZoneIana");if(s===undefined){s=c.set("sap-ushell-config.startupConfig.timeZoneIana","")}z(d,h);F(i,e.currencyFormats,s)}function M(e){var a=b(),t=v(),i=P(a),n=[i],s={},o={},l;var u=c.get("sap-ushell-config.services.AppState.config")||c.create("sap-ushell-config.services.AppState.config");var p=c.get("sap-ushell-config.services.ClientSideTargetResolution.adapter.config")||c.create("sap-ushell-config.services.ClientSideTargetResolution.adapter.config");function g(e,a){var t=a.match(e);var r=[];if(!t){return}r=t[2].toString().split("=");o[r[0]]=r[1]}function f(e,a,t,r,i){if(a&&a[i]&&t&&t[r]){e[t[r]]=a[i]}}if(m(a)){g(/(\?|&)(sap-xapp-state=[A-Z0-9]+)/,a);g(/(\?|&)(sap-intent-param=[A-Z0-9]+)/,a);g(/(\?|&)(sap-system=[A-Z0-9]+)/,a);g(/(\?|&|[/])(sap-iapp-state=[A-Z0-9]+)/,t);l=r.requestDirectStart(e,i,o);u.initialAppStatesPromise=l.then(function(e){f(s,e,o,"sap-intent-param","iparState");f(s,e,o,"sap-iapp-state","iappState");f(s,e,o,"sap-xapp-state","xappState");u.initialAppStates=s;return Promise.resolve(s)});p.initialSegmentPromise=l.then(function(e){if(e.targetMappings){return Promise.resolve([n,e.targetMappings,e.systemAliases,e.urlTemplates])}return Promise.resolve(null)})}else{u.initialAppStatesPromise=Promise.resolve({});p.initialSegmentPromise=Promise.resolve(null)}}function q(){var e=new Promise(function(e,a){var t,r;r=function(){u.info("Direct application start: resolving component waitFor promise after shell renderer created event fired.");e();sap.ushell.Container.detachRendererCreatedEvent(r)};o.once("ShellNavigationInitialized").do(function(){t=sap.ushell.Container.getRenderer();if(t){u.info("Direct application start: resolving component waitFor promise immediately (shell renderer already created).");e()}else{sap.ushell.Container.attachRendererCreatedEvent(r)}})});return e}function H(){var a=b();if(S(a)&&window["sap-ushell-config"].ushell&&window["sap-ushell-config"].ushell.spaces&&window["sap-ushell-config"].ushell.spaces.enabled){I(a)}var t=e.FrameLogonManager.getInstance();sap.ushell.Container.oFrameLogonManager=t;if(m(a)){var r,i;window["sap-ushell-async-libs-promise-directstart"]=new Promise(function(e,a){r=e;i=a});window["sap-ushell-async-libs-promise-directstart"].catch(function(e){});sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(e){e.resolveHashFragment("#"+b()).done(function(e){sap.ui.require(["sap/ushell/services/AppConfiguration"],function(t){t.setCurrentApplication(e);if(e&&e.ui5ComponentName){sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(t){t.createComponent(e,P(a),q(),"Application").done(function(e){r({resolvedHashFragment:e,dependenciesLoaded:true})}).fail(function(e){i(e)})})}else{r({resolvedHashFragment:e,dependenciesLoaded:false})}})}).fail(function(e){i(e)})})}}function I(e){if(e&&e.indexOf("Shell-appfinder")===0){return}sap.ushell.Container.getServiceAsync("Personalization").then(function(e){var a={container:"sap.ushell.cdm3-1.personalization",item:"data"};var t={validity:"Infinity",keyCategory:e.constants.keyCategory.GENERATED_KEY,writeFrequency:e.constants.writeFrequency.HIGH,clientStorageAllowed:false};return e.getPersonalizer(a,t).getPersData()});sap.ui.require(["sap/ushell/components/pages/controller/PagesAndSpaceId"],function(a){var t=a._getPageAndSpaceId(e);var r=sap.ushell.Container.getServiceAsync("PagePersistence");Promise.all([t,r]).then(function(e){var a=e[0];var t=e[1];t.getPage(a.pageId)}).catch(function(e){u.error(e)})})}function N(e){n.initXhrLogon(window["sap-ushell-config"]);l();r.requestStartupConfig().then(function(e){var a=b();(c.get("sap-ushell-config.services.Container.adapter")||c.create("sap-ushell-config.services.Container.adapter")).config=e;var t=c.get("sap-ushell-config.services.LaunchPage.adapter.config")||c.create("sap-ushell-config.services.LaunchPage.adapter.config");var n=c.get("sap-ushell-config.services.ClientSideTargetResolution.adapter.config")||c.create("sap-ushell-config.services.ClientSideTargetResolution.adapter.config");if(c.get("sap-ushell-config.ushell.spaces.enabled")){c.set("sap-ushell-config.services.VisualizationDataProvider.adapter.config",t);c.set("sap-ushell-config.services.NavigationDataProvider.adapter.config",n)}M(e);h=T(e);d=L(e,h);if(!O()&&d){u.debug("theme: load theme from startup service via window",null,"sap.ushell_abap.bootstrap")}if(S(a)&&!c.get("sap-ushell-config.ushell.spaces.enabled")){i.requestPageSet(e)}var s=r.requestFullTM(e);n.navTargetDataPromise=s;t.compactTMPromise=s;return Promise.resolve(e)},function(e){u.error("start_up request failed: "+e,null,"sap.ushell_abap.bootstrap");return Promise.resolve({})}).then(function(a){D(a);e()})}g.start=N;g.afterBootstrap=H;g._getShellHash=b;g._getFullShellHash=v;g._createWaitForRendererCreatedPromise=q;g._loadPage=I;return g});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/integration/fileshares/AppRuntimeFileShareSupport", ["sap/ui/core/Core","sap/ui/core/Manifest","sap/base/Log","sap/ushell/Container"],function(e,t,a){"use strict";var r={_getDataSourcePromise:null};var n="sap.ushell_abap.integration.fileshares.AppRuntimeFileShareSupport";var s="FileShare";var i="manage";var o="/sap/bc/ui2/start_up?so="+s+"&action="+i+"&systemAliasesFormat=object&formFactor=desktop&shellType=FLP&depth=0";r.getDataSource=function(){if(!r._getDataSourcePromise){var s=sap.ushell.Container.getLogonSystem().getClient();var i=sap.ushell.Container.getUser().getLanguage();var p=o+"&sap-language="+i+"&sap-client="+s;r._getDataSourcePromise=fetch(p,{method:"GET",headers:{"Content-Type":"application/json; utf-8",Accept:"application/json","Accept-Language":e.getConfiguration().getLanguageTag()}}).then(function(e){if(e.ok===false){a.error("Could not fetch data, request failed","error: "+e.status+", "+e.statusText+",\nurl: "+p,n);return Promise.reject(e.statusText)}return e.json()}).then(function(e){if(e&&e.targetMappings&&Object.keys(e.targetMappings).length>0){var r=e.targetMappings[Object.keys(e.targetMappings)[0]].applicationDependencies;if(r){var s;try{s=JSON.parse(r).manifest}catch(t){a.error("Could not parse JSON data of applicationDependencies for targetMapping '"+Object.keys(e.targetMappings)[0]+"': "+t.message,null,n)}if(s){return t.load({manifestUrl:s,async:true})}}}var i=["No manifest URL defined:",JSON.stringify(e)].join(" ");a.error(i,null,n);throw new Error(i)}).then(function(e){return e.getEntry("/sap.app/dataSources/mainService")})}return r._getDataSourcePromise};return r});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/integration/fileshares/NavTargetResolutionFileShareSupport", ["sap/base/Log","sap/ui/core/Manifest"],function(e,a){"use strict";var r={};var n="sap.ushell_abap.integration.fileshares.NavTargetResolutionFileShareSupport";var t="#FileShare-manage";r.getDataSource=function(){if(!r._getDataSourcePromise){r._getDataSourcePromise=sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(e){return e.resolveHashFragment(t)}).then(function(r){var t=r&&r.applicationDependencies&&r.applicationDependencies.manifest;if(t){return a.load({manifestUrl:t,async:true})}var i=["No manifest URL defined in resolved navigation target:",JSON.stringify(r)].join(" ");e.error(i,null,n);throw new Error(i)}).then(function(e){return e.getEntry("/sap.app/dataSources/mainService")})}return r._getDataSourcePromise};return r});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/library", ["sap/ui/core/library","sap/m/library"],function(a,p){"use strict";var i=sap.ui.getCore().initLibrary({name:"sap.ushell_abap",version:"1.111.1",dependencies:["sap.ui.core","sap.m"],noLibraryCSS:true,extensions:{"sap.ui.support":{diagnosticPlugins:["sap/ushell_abap/support/plugins/app-infra/AppInfraOnSapNetWeaverSupportPlugin"]}}});return i});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/pbServices/ui2/AllCatalogs", ["sap/ushell_abap/pbServices/ui2/Error","sap/base/Log"],function(t,l){"use strict";var a=function(a,i){var s=[],e=true,n=this;function o(){if(e){throw new t(n+": collection is just a stub","AllCatalogs")}}this.getCatalogs=function(){o();return s.slice()};this.isStub=function(){return e};this.load=function(o,u,r,g,f,c){if(!e){throw new t(n+": collection is not a stub anymore","AllCatalogs")}function h(){var t,l,a;if(!g){for(t=0,l=s.length;t<l;t+=1){a=s[t];if(a.isStub()){a.load(h,u);return}}}o()}function d(t){var i,o;l.debug("Loaded: "+n,null,"AllCatalogs");e=false;s=[];for(i=0,o=t.results.length;i<o;i+=1){s.push(a.createCatalog(t.results[i]))}l.debug("Initialized: "+n,null,"AllCatalogs");h()}a.getPageBuildingService().readAllCatalogs(i,d,u,r,f,!!c)};this.toString=function(t){var l=['AllCatalogs({sPageId:"',i,'",bIsStub:',e];if(t){l.push(",aCatalogs:",JSON.stringify(s))}l.push("})");return l.join("")};if(!i){throw new t("Missing page ID","AllCatalogs")}l.debug("Created: "+this,null,"AllCatalogs")};return a});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/pbServices/ui2/Bag", ["sap/ushell_abap/pbServices/ui2/Utils","sap/ushell_abap/pbServices/ui2/Error","sap/base/Log"],function(e,t,r){"use strict";var n=function(n,a,i,s){var u,l=false,o=false,p=this;function f(){if(l){throw new t("The previous reset operation is not finished yet","Bag")}}function c(){if(o){throw new t("The previous save operation is not finished yet","Bag")}}function h(t,r){var n=t.Properties&&t.Properties.results||t.ChipInstanceProperties&&t.ChipInstanceProperties.results||t.ChipProperties&&t.ChipProperties.results||[];u=u||new e.Map;n.forEach(function(e){var t=e.name,n;if(!r||r.containsKey(t)){n=u.put(t,e);e.$currentValue=n?n.$currentValue:e.value}});delete t.ChipInstanceProperties;delete t.ChipProperties;delete t.Properties}function g(t,r){var n;if(t.length===0){u.keys().forEach(function(e){if(r===(u.get(e).translatable==="X")){t.push(e)}});return t}n=new e.Map;t.forEach(function(e){n.put(e)});u.keys().forEach(function(e){if(r===(u.get(e).translatable==="X")){n.put(e)}});return n.keys()}function d(){if(a.instanceId){return{pageId:a.pageId,instanceId:a.instanceId}}return{id:a.pageId}}function b(e,r,n){var a;if(!e){throw new t("Property name must not be empty","sap.ushell_abap.pbServices.ui2.Bag")}if(typeof e!=="string"){throw new t("Property name must be a string","sap.ushell_abap.pbServices.ui2.Bag")}a=u.get(e);if(a&&a.translatable==="X"!==n){throw new t("'"+e+"' already exists as a "+(n?"non-translatable":"translatable text")+" property","sap.ushell_abap.pbServices.ui2.Bag")}if(typeof r!=="string"){throw new t("Property value must be a string","sap.ushell_abap.pbServices.ui2.Bag")}f();if(!a){a={name:e,translatable:n?"X":" "};u.put(e,a)}a.$currentValue=r;return p}this.getId=function(){return a.id};this.getOwnPropertyNames=function(){return g([],false)};this.getOwnTextNames=function(){return g([],true)};this.getProperty=function(e,r){var n=u.get(e);if(n&&n.translatable==="X"){throw new t("'"+e+"' is a translatable text property","sap.ushell_abap.pbServices.ui2.Bag")}if(n){return n.$currentValue}if(i){return i.getProperty(e,r)}return r};this.getPropertyNames=function(){var e=i?i.getPropertyNames():[];return g(e,false)};this.getText=function(e){var r=u.get(e);if(r&&r.translatable!=="X"){throw new t("'"+e+"' is a non-translatable property","sap.ushell_abap.pbServices.ui2.Bag")}if(r){return r.$currentValue}if(i){return i.getText(e)}return e};this.getTextNames=function(){var e=i?i.getTextNames():[];return g(e,true)};this.reset=function(r,i){var o=d(),g=n.getPageBuildingService();function b(e){l=false;a=e;u=undefined;h(a);if(s){s(p)}r()}if(typeof r!=="function"){throw new t("Missing success handler","sap.ushell_abap.pbServices.ui2.Bag")}c();f();l=true;i=i||g.getDefaultErrorHandler();if(a.$tmp){e.callHandler(b.bind(null,a),i,true);return}g.deleteBag(o,a.id,function(){a.$tmp=true;g.readBag(o,a.id,b,b.bind(null,a))},function(){l=false;i.apply(null,arguments)})};this.resetProperty=function(e){var t;t=u.get(e);if(t){t.$currentValue=undefined;if(!Object.prototype.hasOwnProperty.call(t,"value")){u.remove(e)}}return this};this.save=function(r,i){var l=0,g=new e.Map,b={},v={},y=d(),w=n.getPageBuildingService();if(typeof r!=="function"){throw new t("Missing success handler","sap.ushell_abap.pbServices.ui2.Bag")}if(typeof i!=="function"){throw new t("Missing error handler","sap.ushell_abap.pbServices.ui2.Bag")}c();f();w.openBatchQueue();u.keys().forEach(function(e){var t,r=u.get(e);function n(t,r){b[e]=t;v[e]=r}if(r.$currentValue!==r.value){l+=1;if(Object.prototype.hasOwnProperty.call(r,"value")){if(r.$currentValue===undefined){g.put(e);w.deleteProperty(r,function(){if(r.$currentValue===undefined){u.remove(e)}else{delete r.value}},n)}else{t=JSON.parse(JSON.stringify(r));t.value=r.$currentValue;w.updateProperty(t,function(){r.value=t.value},n)}}else{w.createProperty(y,a.id,e,r.$currentValue,r.translatable,function(t){t.$currentValue=r.$currentValue;u.put(e,t)},n)}}});if(g.keys().length){w.readBag(y,a.id,function(e){h(e,g)})}o=true;w.submitBatchQueue(function(){o=false;if(s&&l>Object.keys(b).length){s(p)}if(Object.keys(b).length>0){i(b,v)}else{a.$tmp=false;r()}})};this.setProperty=function(e,t){return b(e,t,false)};this.setText=function(e,t){return b(e,t,true)};this.toString=function(e){var t=['Bag({id:"',a.id,'",pageId:"',a.pageId];if(a.instanceId){t.push('",instanceId:"',a.instanceId)}t.push('"');if(e){t.push(",oAlterEgo:",JSON.stringify(a));t.push(",oPropertiesByName:",u.toString());t.push(",bResetting:",l);t.push(",bSaving:",o)}t.push("})");return t.join("")};this.update=function(e){if(!e||a.id!==e.id){throw new t("Bag data belongs to another bag","sap.ushell_abap.pbServices.ui2.Bag")}u=undefined;h(e)};this._getChangeHandler=function(){return s};this._getRawBagData=function(){return a};this._getParentBag=function(){return i};h(a);r.debug("Created: "+this,null,"sap.ushell_abap.pbServices.ui2.Bag")};return n});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/pbServices/ui2/Catalog", ["sap/ushell_abap/pbServices/ui2/Error","sap/ushell_abap/pbServices/ui2/Utils","sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/core/Core"],function(e,t,i,jQuery,n){"use strict";var a=function(a,r){var o,s,l=[],u,d=true,g,f,c,h=[],p=this;function C(){if(d){throw new e(p+": page is just a stub","Page")}}function S(){if(!o){throw new e(p+": catalog is just an ID","Catalog")}}this.exit=function(){var e=p.toString();if(s){s.exit()}o=undefined;r=undefined;l=[];d=true;u=undefined;c=undefined;h=[];Object.keys(p).forEach(function(e){if(!/getCatalogData|getId|isStub|toString/.test(e)){delete p[e]}});a.forgetCatalog(p);i.debug("Exited: "+e,null,"Catalog")};this.getRemoteBaseUrl=function(){return p.addSystemToServiceUrl(o.type==="H"?"/sap/hba/apps/kpi/s/odata/hana_chip_catalog.xsodata/":o.baseUrl)};this.getRemoteCatalogService=function(){return a.getRemoteCatalogService(o)||{readChips:function(e,n,a,r,s){i.error("Catalog '"+o.id+"', type '"+o.type+"' not supported",null,"Catalog");t.callHandler(r.bind(null,{results:[]}),undefined,true)}}};function v(){var e,t,n;i.debug("Loaded: "+p,null,"Catalog");if(o.Chips){n=o.Chips.results||o.Chips;delete o.Chips;l=[];for(e=0,t=n.length;e<t;e+=1){l[e]=a.createChip(n[e])}d=false;i.debug("Initialized: "+p,null,"Catalog")}delete o.CatalogPage}this.read=function(e,i,n){var r;function s(e){o=e;v();r.resolve()}function l(e){o.Chips=e;v();r.resolve()}function d(e){e.results.forEach(function(e){e.remoteCatalogId=f});l(e)}function c(){v();g=arguments;r.reject.apply(this,arguments)}function h(t){var i;if(t.remoteId){o=t;try{i=p.getRemoteBaseUrl()}catch(e){c(e.toString());return}p.getRemoteCatalogService().readChips(i,o.remoteId,undefined,d,c)}else if(o&&e){l(t.Chips)}else{s(t)}}if(!u||u.state()!=="pending"){r=new jQuery.Deferred;u=r.promise();if(!o||e&&!o.remoteId){a.getPageBuildingService().readCatalog(f,h,r.reject.bind(r))}else{h.bind(this)(o)}}n=n||a.getPageBuildingService().getDefaultErrorHandler();u.done(t.callHandler.bind(null,i,n));u.fail(n)};this.addSystemToServiceUrl=function(t,i){if(t.indexOf("/")!==0||t.indexOf("//")===0){throw new e("addSystemToServiceUrl: Invalid URL: "+t,"Catalog")}i=i||this.getSystemAlias();if(/^[^?]*(;o=([\/;?]|$))/.test(t)){t=t.replace(/;o=([\/;?]|$)/,(i?";o="+i:"")+"$1")}else if(!/^[^?]*;o=/.test(t)&&i){t=t.replace(/(\/[^?]*?)(\/$|$|(\/?\?.*))/,"$1;o="+i+"$2")}n.getEventBus().publish("sap.ushell.Container","addRemoteSystemForServiceUrl",t);return t};this.clone=function(e,t,i,n){var r,s=function(e,t){return n(e,undefined,t)};if(o&&o.type==="REMOTE"){r=this.getCatalogData();delete r.id;r.domainId=e;if(t!==undefined){r.title=t}a.createNewCatalog(r,i,n)}else{a.getPageBuildingService().cloneCatalog(this.getId(),e,t,function(e){a.createCatalog(e.id,i,s)},s)}};this.getCatalogData=function(){var e;if(!o){return undefined}e=JSON.parse(JSON.stringify(o));delete e.__metadata;return e};this.getCatalogPage=function(){S();if(o.type!=="P"&&o.type!=="CATALOG_PAGE"){return undefined}if(!s){s=a.createPage(f)}return s};this.getChips=function(){if(d){throw new e(p+": catalog is just a stub","Catalog")}return l.slice()};this.getDomainId=function(){return o&&o.domainId};this.getId=function(){return f};this.getSystemAlias=function(){return o&&o.systemAlias||undefined};this.getTitle=function(){S();return o.title};this.getType=function(){S();return o&&o.type};this.isOutdated=function(){S();return s&&!s.isStub()&&s.isOutdated()||o.outdated==="X"};this.isReadOnly=function(){C();return o.isReadOnly==="X"};this.isStub=function(){return d};this.getCachedRemoteFailureArguments=function(){return g};this.load=function(t,i){if(!d){throw new e("Catalog is not a stub anymore","Catalog")}this.read(false,t,i)};this.readChips=function(e,i,n){function r(e){e.results.forEach(function(e){a.createChip(e)});t.callHandler(i,n)}function s(e){e.results.forEach(function(e){e.remoteCatalogId=f});r(e)}function l(t){o=t;if(o.remoteId){this.getRemoteCatalogService().readChips(this.getRemoteBaseUrl(),o.remoteId,e,s,n)}else{a.getPageBuildingService().readCatalogChips(f,e,r,n)}}if(!o){a.getPageBuildingService().readCatalog(f,l.bind(this),n,true)}else{l.bind(this)(o)}};this.readRegisteredChips=function(e,i){function n(){var e=new jQuery.Deferred,t=h;h=[];if(t.length){p.readChips(t,e.resolve.bind(e),e.reject.bind(e))}else{e.resolve()}return e.promise()}if(!c||c.state()!=="pending"){c=n()}i=i||a.getPageBuildingService().getDefaultErrorHandler();c.fail(i).done(t.callHandler.bind(null,e,i))};this.refresh=function(e,t){this.read(true,e,t)};this.registerChip=function(t){if(c&&c.state()==="pending"){throw new e("Invalid state: registerChip while readRegisteredChips pending","Catalog")}h.push(t.getId())};this.remove=function(t,n){S();if(u&&u.state()==="pending"){throw new e("Catalog is being refreshed: "+this,"Catalog")}i.debug("Removing: "+this,null,"Catalog");a.getPageBuildingService().deleteCatalog(o,function(){this.exit();t()}.bind(this),n)};this.toString=function(e){var t=['Catalog({sId:"',f,'"',",bIsStub:",d];if(e){t.push(",oAlterEgo:",JSON.stringify(o),",oFactory:",a.toString(e),",aChips:",JSON.stringify(l))}t.push("})");return t.join("")};this.update=function(t,i,n){var r;S();if(Object.hasOwnProperty.call(t,"__metadata")){throw new e("Unsupported __metadata update","Catalog")}r=JSON.parse(JSON.stringify(o));Object.keys(t).forEach(function(e){r[e]=t[e]});d=true;g=undefined;a.getPageBuildingService().updateCatalog(r,function(){o=r;this.read(true,i,n)}.bind(this),function(){d=false;n=n||a.getPageBuildingService().getDefaultErrorHandler();n.apply(null,arguments)})};if(typeof r==="object"){f=r.id;if(r.remoteId){delete r.Chips}o=r;v()}else if(typeof r==="string"){f=r}if(!f){throw new e("Missing ID","Catalog")}i.debug("Created: "+this,null,"Catalog")};return a});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/pbServices/ui2/Chip", ["sap/ushell_abap/pbServices/ui2/Bag","sap/ushell_abap/pbServices/ui2/Utils","sap/ushell_abap/pbServices/ui2/Error","sap/ushell_abap/pbServices/ui2/ChipDefinition","sap/base/Log","sap/ui/core/Manifest"],function(e,t,i,n,r,a){"use strict";var o={};var s={};function u(e){return Object.prototype.hasOwnProperty.call(o,e)?o[e]:null}var p=function(o,p){var c=this,l,f,h,g,d,C,m,w,I;function P(){if(!g){throw new i(c+": CHIP is just a stub","sap.ushell_abap.pbServices.ui2.Chip")}}function v(i){var n;l=new t.Map;if(!i){return}for(n=0;n<i.length;n+=1){l.put(i[n].id,new e(p,i[n]))}}function y(e){var t=e.basePath,n,r,a,o=e.viewName;if(e.componentName){e.$Namespace=e.componentName}else{r=/^(?:([^\/]+)\/)?(.*)\.view\.(.*)$/.exec(o);if(!r){throw new i(c+": Illegal view name: "+o,"Chip")}a=r[1];o=r[2];e.$ViewType=r[3].toUpperCase();if(a){o=a+"."+o}else{n=o.lastIndexOf(".");if(n<1){throw new i(c+": Missing namespace: "+o,"Chip")}a=o.substring(0,n)}e.$Namespace=a;e.$ViewName=o}var s=e.virtualNamespace;if(s){e.$VirtualNamespace=s}e.$UrlPrefix=e.$Namespace.replace(/\./g,"/");if(t!=="."){t=t.replace(/\/?$/,"/");e.$UrlPrefix=t+e.$UrlPrefix}e.$UrlPrefix=c.toAbsoluteUrl(e.$UrlPrefix)}function b(){h={};if(g.contracts.configuration&&g.contracts.configuration.parameters){h=JSON.parse(JSON.stringify(g.contracts.configuration.parameters))}c.updateConfiguration(h,o.configuration)}function U(e){var t,n;if(g){throw new i(c+": cannot initialize twice",null,"Chip")}g=e;g.contracts=g.contracts||{};if(!g.implementation||!g.implementation.sapui5){throw new i(c+": Missing SAPUI5 implementation","Chip")}y(g.implementation.sapui5);b();r.debug("Initialized: "+c,null,"Chip");if(m){for(t=0,n=m.length;t<n;t+=2){m[t]()}m=null}}this.updateBags=function(t){var i,n,r=l.keys();for(i=0;i<t.length;i+=1){n=t[i].id;if(l.containsKey(n)){l.get(n).update(t[i]);r.splice(r.indexOf(n),1)}else{l.put(n,new e(p,t[i]))}}for(i=0;i<r.length;i+=1){l.remove(r[i])}};this.createApi=function(e,t){var n={},r,a,o,s;P();s=g.contracts;if(s){for(o in s){if(Object.prototype.hasOwnProperty.call(s,o)){a=u(o);if(!a){throw new i(this+": Contract '"+o+"' is not supported","Chip")}n[o]={};r=a.call(n[o],e);if(t){t.put(o,r)}}}}return n};this.getAvailableTypes=function(){var e;P();if(g.contracts.types&&g.contracts.types.parameters&&typeof g.contracts.types.parameters.supportedTypes==="string"&&g.contracts.types.parameters.supportedTypes!==""){e=g.contracts.types.parameters.supportedTypes.toLowerCase();return e.split(",")}return[]};this.getDefaultType=function(){var e=this.getAvailableTypes();if(g.contracts.types&&g.contracts.types.parameters&&typeof g.contracts.types.parameters.defaultType==="string"&&g.contracts.types.parameters.defaultType!==""){var t=g.contracts.types.parameters.defaultType;t=t.toLowerCase();if(e.indexOf(t)>-1){return t}throw new i("The chip has the default type: "+t+" which is not supported")}if(e.indexOf("tile")>-1){return"tile"}if(e.length>0){return e[0]}return""};this.getBag=function(e){if(!e){throw new i("Missing bag ID","Chip")}return l.get(e)};this.getBagIds=function(){return l.keys()};this.getBaseChipId=function(){return o.baseChipId};this.getCatalog=function(){if(w){return w}return o.$proxy?undefined:p.createCatalog(o.catalogId)};this.getConfigurationParameter=function(e){P();return h[e]};this._getChipRawConfigurationString=function(){return o.configuration};this.getDescription=function(){return o.description};this.getId=function(){return o.id};this.getReferenceChipId=function(){return o.referenceChipId};this.getImplementationAsSapui5=function(e){var t,i,n;r.error("Deprecated API call of 'Chip.getImplementationAsSapui5'. Please use 'getImplementationAsSapui5Async' instead",null,"sap.ushell_abap.pbServices.ui2.Chip");P();t={chip:e};i=g.implementation.sapui5;n=this.getBaseChipId();if(n!=="X-SAP-UI2-CHIP:/UI2/STATIC_APPLAUNCHER"&&n!=="X-SAP-UI2-CHIP:/UI2/DYNAMIC_APPLAUNCHER"){if(i.$VirtualNamespace){i.$absolutePath=this.toAbsoluteUrl(i.basePath);sap.ui.loader.config({paths:JSON.parse('{"'+i.$Namespace.replace(/\./g,"/")+'":"'+i.$absolutePath+'"}')})}else{sap.ui.loader.config({paths:JSON.parse('{"'+i.$Namespace.replace(/\./g,"/")+'":"'+i.$UrlPrefix+'"}')})}}if(i.componentName){var a=sap.ui.requireSync("sap/ui/core/ComponentContainer");var o=new a;this.oComponentPromise=new Promise(function(e,n){sap.ui.require(["sap/ui/core/Component"],function(r){r.create({name:i.componentName,componentData:t}).then(function(e){o.setComponent(e)}).then(e).catch(n)})});return o}return sap.ui.view({type:i.$ViewType,viewName:i.$ViewName,viewData:t})};this.getImplementationAsSapui5Async=function(e){try{P()}catch(e){return Promise.reject(e)}return new Promise(function(t,i){sap.ui.require(["sap/ui/core/ComponentContainer","sap/ui/core/Component","sap/ui/core/mvc/View"],function(n,r,a){var o={chip:e};var s=g.implementation.sapui5;var u=this.getBaseChipId();if(u!=="X-SAP-UI2-CHIP:/UI2/STATIC_APPLAUNCHER"&&u!=="X-SAP-UI2-CHIP:/UI2/DYNAMIC_APPLAUNCHER"){if(s.$VirtualNamespace){s.$absolutePath=this.toAbsoluteUrl(s.basePath);sap.ui.loader.config({paths:JSON.parse('{"'+s.$Namespace.replace(/\./g,"/")+'":"'+s.$absolutePath+'"}')})}else{sap.ui.loader.config({paths:JSON.parse('{"'+s.$Namespace.replace(/\./g,"/")+'":"'+s.$UrlPrefix+'"}')})}}if(s.componentName){var p;if(u==="X-SAP-UI2-CHIP:/UI2/STATIC_APPLAUNCHER"||u==="X-SAP-UI2-CHIP:/UI2/DYNAMIC_APPLAUNCHER"){p=Promise.resolve(false)}else{p=this._loadManifest(s.$UrlPrefix+"/manifest.json")}return p.then(function(e){return r.create({name:s.componentName,componentData:o,manifest:e})}).then(function(e){return new n({component:e})}).then(t).catch(i)}return a.create({type:s.$ViewType,viewName:s.$ViewName,viewData:o}).then(t).catch(i)}.bind(this))}.bind(this))};this._loadManifest=function(e){if(!s[e]){s[e]=a.load({manifestUrl:e,async:true}).then(function(e){return e.getRawJson()}).catch(function(){return null})}return s[e]};this.getRemoteCatalog=function(){return w};this.getTitle=function(){return o.title||g&&g.appearance&&g.appearance.title};this.isBasedOn=function(e){var t="X-SAP-UI2-PAGE:"+e.getPage().getId()+":"+e.getId();function i(e){return e===t||e.indexOf(t+":")===0}return o.referenceChipId&&i(o.referenceChipId)||i(o.id)};this.isReference=function(){return!!o.referenceChipId};this.isBrokenReference=function(){return o.referenceChipId==="O"};this.isStub=function(){return!g};this.load=function(e,a){function s(e,t){d=e;C=t;var i,n;if(m){for(i=1,n=m.length;i<n;i+=2){m[i](e,t)}m=null}}function u(){if(p){p.createChipDefinition(o.url,U,s);return}t.get(o.url,true,function(e){r.debug("Loaded: "+c,null,"Chip");U(new n(e))},s)}function l(){if(!o.url){if(I){throw new i("Remote catalog did not deliver CHIP '"+o.id+"'","Chip")}throw new i("Missing module URL","Chip")}I=false;f=t.absoluteUrl(o.url);u()}if(!this.isStub()){throw new i("Chip is not a stub anymore","Chip")}if(typeof e!=="function"){throw new i("Missing success handler","Chip")}a=a||p.getPageBuildingService().getDefaultErrorHandler();if(d){t.callHandler(a.bind(null,d,C),null,true);return}if(m){m.push(e,a);return}if(o.url){u()}else if(o.remoteCatalogId){this.getRemoteCatalog().readRegisteredChips(l,s);I=true}else{p.getPageBuildingService().readChip(o.id,function(e){o=e;l()},s)}m=[e,a]};this.refresh=function(e,t){function n(t){o.title=t.title;o.configuration=t.configuration;o.referenceChipId=t.referenceChipId;v(t.ChipBags&&t.ChipBags.results);if(!c.isStub()){c.updateConfiguration(h,o.configuration)}e()}function r(e){if(e.results[0]){n(e.results[0])}else{t=t||p.getPageBuildingService().getDefaultErrorHandler();t("Could not refresh CHIP. No update received from catalog "+o.remoteCatalogId)}}if(typeof e!=="function"){throw new i("Missing success handler","Chip")}if(!o.url){throw new i(c+": CHIP is just a stub","Chip")}if(o.remoteCatalogId){this.getRemoteCatalog().readChips([o.id],r,t)}else{p.getPageBuildingService().readChip(o.id,n,t)}};this.update=function(e){if(typeof e!=="object"||e.id!==this.getId()){throw new i("Invalid update data: "+this,"Chip")}if(e.ChipBags&&e.ChipBags.results){this.updateBags(e.ChipBags&&e.ChipBags.results)}if(o.url){return}if(!e.url){return}o=e;f=t.absoluteUrl(o.url);r.debug("Updated: "+this,null,"Chip")};this.updateConfiguration=function(e,t){var n,a,o;if(!t){return}if(typeof t==="string"){try{n=JSON.parse(t)}catch(e){r.warning(this+': ignoring invalid configuration "'+t+'"',null,"Chip");return}}else{n=t}for(a in n){if(Object.prototype.hasOwnProperty.call(n,a)){if(Object.prototype.hasOwnProperty.call(h,a)){o=n[a];if(o===undefined){delete e[a]}else if(typeof o!=="string"){throw new i("Value for '"+a+"' must be a string","Chip")}else{e[a]=o}}else{r.warning(this+": ignoring unknown configuration parameter "+a,null,"Chip")}}}};this.toAbsoluteUrl=function(e){return t.absoluteUrl(e,f)};this.toString=function(e){var t=['Chip({sChipUrl:"',f,'"'];if(e){t.push(",oAlterEgo:",JSON.stringify(o),",oBags:",l.toString(),",oDefinition:",JSON.stringify(g))}t.push("})");return t.join("")};this.isInitiallyDefined=function(e){return e}.bind(null,o&&!o.hasOwnProperty("$proxy"));this._setDefinition=function(e){g=e};if(!o){throw new i("Missing CHIP description","Chip")}f=t.absoluteUrl(o.url);if(o.remoteCatalogId){w=p.createCatalog(o.remoteCatalogId);if(!o.url){w.registerChip(this)}}v(o.ChipBags&&o.ChipBags.results);r.debug("Created: "+this,null,"Chip")};p.addContract=function(e,t){if(u(e)){throw new i("Cannot register contract '"+e+"' twice","Chip")}o[e]=t};p.removeContract=function(e){delete o[e]};if(!o.navigation){p.addContract("navigation",function(e){this.navigateToUrl=function(e,t){throw new i("'navigation' contract not implemented!")}})}return p});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/pbServices/ui2/ChipDefinition", ["sap/ushell_abap/pbServices/ui2/Error"],function(t){"use strict";var e="http://schemas.sap.com/sapui2/services/Chip/1";function i(t){return t.localName||t.baseName}function n(t,e){var n,a,s,r;if(typeof t.getAttributeNS==="function"){return t.getAttributeNS(null,e)}a=t.attributes;for(s=0,r=a.length;s<r;s+=1){n=a[s];if(!n.namespaceURI&&i(n)===e){return n.nodeValue}}return""}function a(t){return t.textContent||t.text||""}function s(t,n,a){var s,r=n.childNodes,c,o,u;for(o=0,u=r.length;o<u;o+=1){s=r[o];if(s.namespaceURI===e){c=a[i(s)];if(c){c.call(t,s)}}}}var r=function(c){var o=this;if(c instanceof r){c=JSON.parse(JSON.stringify(c));["appearance","contracts","id","implementation"].forEach(function(t){if(Object.prototype.hasOwnProperty.call(c,t)){o[t]=c[t]}});return}if(i(c.documentElement)!=="chip"||c.documentElement.namespaceURI!==e){throw new t("Missing root <chip>","ChipDefinition")}s(this,c.documentElement,{appearance:function(t){this.appearance={};s(this.appearance,t,{description:function(t){this.description=a(t)},title:function(t){this.title=a(t)}})},contracts:function(t){this.contracts={};s(this.contracts,t,{consume:function(t){var e=n(t,"id");this[e]={};s(this[e],t,{parameters:function(t){this.parameters={};s(this.parameters,t,{parameter:function(t){var e=n(t,"name");this[e]=a(t)}})}})}})},id:function(t){this.id=a(t)},implementation:function(t){this.implementation={};s(this.implementation,t,{sapui5:function(t){this.sapui5={basePath:"."};var e;s(this.sapui5,t,{basePath:function(t){this.basePath=a(t)},componentName:function(t){this.componentName=a(t);e=n(t,"virtualNamespace")},viewName:function(t){this.viewName=a(t);e=n(t,"virtualNamespace")}});if(e){this.sapui5.virtualNamespace=e==="true"}}})}});c=null};return r});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/pbServices/ui2/Error", ["sap/base/Log"],function(r){"use strict";var e=function(e,n,u){var t=new Error(e);u=u===undefined?true:u;t.name="Error";if(u===true){r.error(e,null,n)}return t};return e});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/pbServices/ui2/Factory", ["sap/ushell_abap/pbServices/ui2/Chip","sap/ushell_abap/pbServices/ui2/Error","sap/ushell_abap/pbServices/ui2/Catalog","sap/ushell_abap/pbServices/ui2/ChipDefinition","sap/ushell_abap/pbServices/ui2/PageBuildingService","sap/ushell_abap/pbServices/ui2/ChipInstance","sap/ushell_abap/pbServices/ui2/Page","sap/ushell_abap/pbServices/ui2/PageSet","sap/ushell_abap/pbServices/ui2/Utils","sap/base/Log","sap/base/util/LoaderExtensions"],function(e,a,t,i,n,r,l,s,o,c,u){"use strict";var p=function(n){var p={},h={},g={},d,f=this;this.addRemoteCatalogService=function(e,t){if(!e){throw new a("Invalid base URL","sap.ushell_abap.pbServices.ui2.Factory")}if(typeof t.readChips!=="function"){throw new a("Invalid remote catalog service","sap.ushell_abap.pbServices.ui2.Factory")}e=e.replace(/\/$/,"");if(d.containsKey(e)){throw new a("Base URL '"+e+"' already registered","sap.ushell_abap.pbServices.ui2.Factory")}d.put(e,t)};this.createCatalog=function(e,a,i){var n=this,r,l=typeof e==="object"?e.id:e;function s(){var e;i=i||n.getPageBuildingService().getDefaultErrorHandler();if(i){e=Array.prototype.slice.call(arguments);e.splice(1,0,r);i.apply(null,e)}}function c(){s.apply(null,r.getCachedRemoteFailureArguments())}if(Object.prototype.hasOwnProperty.call(h,l)){r=h[l].catalog;if(typeof e==="object"&&r.getCatalogData()===undefined){t.call(r,this,e)}}else{r=new t(this,e);h[l]={catalog:r,chips:{}}}if(a){if(r.isStub()){r.load(a.bind(null,r),s)}else if(r.getCachedRemoteFailureArguments()!==undefined){o.callHandler(c,c,true)}else{o.callHandler(a.bind(null,r),s,true)}}return r};this.createChip=function(a,t,i){var n=a.remoteCatalogId,r=a.id,l,s;if(n){this.createCatalog(n);l=h[n].chips}else{l=p}if(Object.prototype.hasOwnProperty.call(l,r)){s=l[r];s.update(a)}else{s=new e(a,this);l[r]=s}if(t){if(s.isStub()){s.load(t.bind(null,s),i)}else{i=i||this.getPageBuildingService().getDefaultErrorHandler();o.callHandler(t.bind(null,s),i,true)}}return s};this.createChipDefinition=function(e,t,n){var r,l;function s(e,a,t,n){o.callHandler(a.bind(null,new i(e)),t,n)}function c(a){var t,n;var r=new i(a);g[e]=r;for(t=0,n=l.length;t<n;t+=2){s(r,l[t],l[t+1],false)}}function p(a){var t,i,n;if(typeof a==="string"){n=a}else{n=a.message}g[e]=n;for(t=0,i=l.length;t<i;t+=2){l[t+1](n)}}if(!e){throw new a("Missing URL","Factory")}if(typeof t!=="function"){throw new a("Missing success handler","Factory")}n=n||this.getPageBuildingService().getDefaultErrorHandler();e=o.addCacheBusterTokenUsingUshellConfig(e);if(Object.prototype.hasOwnProperty.call(g,e)){r=l=g[e];if(o.isArray(l)){l.push(t,n)}else if(r instanceof i){s(r,t,n,true)}else{o.callHandler(n.bind(null,r),null,true)}return}l=[t,n];g[e]=l;u.loadResource({dataType:"xml",url:e,async:true}).then(c).catch(p)};this.createChipInstance=function(e,a,t,i){var n,l;e.Chip=e.Chip||{$proxy:true};e.Chip.id=e.Chip.id||e.chipId;e.Chip.remoteCatalogId=e.Chip.remoteCatalogId||e.remoteCatalogId;if(e.RemoteCatalog&&e.RemoteCatalog.id){this.createCatalog(e.RemoteCatalog)}n=this.createChip(e.Chip);l=new r(this,e,n,i);if(a){l.load(a.bind(null,l),t)}return l};this.createNewCatalog=function(e,a,t){this.getPageBuildingService().createCatalog(e,function(e){var i=f.createCatalog(e);i.load(a.bind(null,i),function(e,a){t(e,i,a)})},function(e,a){t(e,undefined,a)})};this.createNewPageBasedCatalog=function(e,a,t,i){this.getPageBuildingService().createPageBasedCatalog(e,a,function(e){f.createCatalog(e,t,i)},i)};this.createPage=function(e,a,t,i){var n;n=new l(this,e);if(a){n.load(a.bind(null,n),t,i)}return n};this.createPageSet=function(e,a,t){var i;i=new s(this,e);if(a){i.load(a.bind(null,i),t)}return i};this.forgetCatalog=function(e){delete h[e.getId()]};this.getPageBuildingService=function(){return n};this.getRemoteCatalogService=function(e){var a=e.type==="H"?"/sap/hba/apps/kpi/s/odata/hana_chip_catalog.xsodata":e.baseUrl;return a?d.get(a.replace(/\/$/,"")):undefined};this.toString=function(e){var a=["Factory({oPbs:",n.toString(e)];if(e){a.push(",mChips:",JSON.stringify(p))}a.push("})");return a.join("")};d=new o.Map;if(!n){throw new a("Missing page building service","Factory")}c.debug("Created: "+this,null,"Factory")};p.createFactory=function(e,a,t,i){return new p(n.createPageBuildingService(e,a,t,i))};return p});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/pbServices/ui2/ODataService", ["sap/ushell_abap/pbServices/ui2/Utils","sap/ushell_abap/pbServices/ui2/Error"],function(e,r){"use strict";var n=new e.Map;var t=function(e,t){var s;this.getCsrfToken=function(){if(n.get(s)&&n.get(s).token){return n.get(s).token}return""};this.getDefaultErrorHandler=function(){return t};this.openBatchQueue=function(){e.openBatchQueue()};this.refreshCsrfToken=function(i,o){var a;if(typeof i!=="function"){throw new r("Success callback is not a function","ODataService")}o=o||t;a=n.get(s);if(!a.fetchingInProgress){a.token=undefined;a.fetchingInProgress=true;e.read("",function(){if(!n.get(s)||!n.get(s).token){o("No CSRF token delivered");a.errorHandlers.forEach(function(e){e("No CSRF token delivered")})}else{i();a.successHandlers.forEach(function(e){e()})}a.successHandlers=[];a.errorHandlers=[];a.fetchingInProgress=false},function(){a.fetchingInProgress=false;o.apply(null,arguments)})}else{a.successHandlers.push(i);a.errorHandlers.push(o)}};this.setCsrfToken=function(e){var t;if(e&&typeof e!=="string"){throw new r("Invalid CSRF token: "+e,"ODataService")}t=n.get(s);t.token=e};this.setDefaultErrorHandler=function(e){if(e&&typeof e!=="function"){throw new r("Error callback is not a function","ODataService")}t=e||function(){}};this.submitBatchQueue=function(){e.submitBatchQueue.apply(e,arguments)};this.toString=function(r){var n=["ODataService({"];if(r){n.push('csrfToken:"',this.getCsrfToken(),'"');n.push(",oODataWrapper:",e.toString(true))}n.push("})");return n.join("")};if(!e){throw new r("Missing OData wrapper","ODataService")}s=e.getBaseUrl();if(!n.get(s)){n.put(s,{fetchingInProgress:false,successHandlers:[],errorHandlers:[]})}this.setDefaultErrorHandler(t)};t.resetSharedCsrfTokens=function(){n=new e.Map};return t});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/pbServices/ui2/ODataWrapper", ["sap/ui/thirdparty/datajs","sap/ushell_abap/pbServices/ui2/Utils","sap/ushell_abap/pbServices/ui2/ODataService","sap/ushell_abap/pbServices/ui2/Error","sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/core/Core"],function(e,t,a,r,n,jQuery,s){"use strict";function i(){}function o(e,a){if(t.isArray(e)){e.forEach(function(e){e.reject(a)})}else{e.reject(a)}}var u;u=function(e,a){var c="saplb",p,l,d,h=this,g,b;function O(e){var t={};t.baseUrl=e[0];if(typeof e[2]==="boolean"){t.supportsChangeSets=e[2]}return t}this.getBatchQueue=function(){return p};u.headerValue=function(e,t){e=e.toLowerCase();for(var a in t){if(Object.prototype.hasOwnProperty.call(t,a)&&a.toLowerCase()===e){return t[a]}}return undefined};function S(t){var a=e["sap-language"]||u["sap-language"],r=e["sap-statistics"]||u["sap-statistics"],n=e["sap-client"]||u["sap-client"];t=t||{};if(a){t["sap-language"]=a}if(r||r==="false"){t["sap-statistics"]=""+r}if(n){t["sap-client"]=n}return t}function y(e){e=e||{};var t=u.oStickySessionConfiguration[g];if(typeof t==="undefined"){return e}if(t&&t.enabled&&typeof t.value!=="undefined"){e[c]=t.value}return e}this.detectStickySession=function(e){var t,a=u.oStickySessionConfiguration[g];if(!a||!a.enabled){return}t=u.headerValue(c,e);if(typeof t==="undefined"){return}if(a.value!==t){a.value=t}};u.csrfTokenValue=function(e){var t=u.headerValue("x-csrf-token",e);if(t==="Required"){return t}var a=u.headerValue("cache-control",e);if(a===undefined||a.indexOf("max-age=0")>-1||a.indexOf("no-cache")>-1){return t||""}return""};this.doRequest=function(e,r,o,c,f,p,l){n.debug("[000] do request, sMethod",r,"ODataWrapper");var d;c=c||i;f=f||a.getDefaultErrorHandler();h.check(c,f);d={Accept:"application/json","Accept-Language":s.getConfiguration().getLanguage()||"","X-CSRF-Token":a.getCsrfToken()};S(d);y(d);OData.request({requestUri:e,method:r,data:o,headers:d},function(a,s){this.detectStickySession((s||{}).headers);n.debug("Received OData response for "+r+' "'+e+'"',null,"ODataWrapper");t.callHandler(c.bind(null,a),f)}.bind(this),function(t){function s(){f.apply(null,arguments)}function i(){c.apply(null,arguments)}if(!l&&t.response.statusCode===403&&u.csrfTokenValue(t.response.headers).toLowerCase()==="required"){n.debug("CSRF token required for "+r+' "'+e+'", refreshing it',JSON.stringify(t.response),"ODataWrapper");a.refreshCsrfToken(this.doRequest.bind(h,e,r,o,i,s,p,true),s)}else{h.onError(r,e,f,null,t)}}.bind(this),p);n.debug("Sent OData request for "+r+' "'+e+'"',null,"ODataWrapper")};this.toRelativeUrl=function(e){var t=e.indexOf(g);if(t<0){throw new r('Not relative to base URL "'+g+'": '+e,"ODataWrapper")}return e.slice(t+g.length)};this.toRequestUrl=function(e){if(/^\//.test(e)){throw new r("Not a relative URL: "+e,"ODataWrapper")}return g+e};this.readOrBatch=function(e,t,a){var r,i=this.toRequestUrl(e),o=y(S());if(p){n.debug('Queued OData request for GET "'+e+'"',null,"ODataWrapper");p.push({method:"GET",requestUri:e,headers:o});r=(new jQuery.Deferred).done(t).fail(a);d.push(r);l=false;return}o.Accept="application/json";o["Accept-Language"]=s.getConfiguration().getLanguage()||"";o["X-CSRF-Token"]="Fetch";OData.read({requestUri:i,headers:o},t,a);n.debug('Sent OData request for GET "'+i+'"',null,"ODataWrapper")};this.requestOrBatch=function(e,r,s,o,u){var c,f={data:s,method:r,requestUri:e,headers:y(S())},g=this.toRequestUrl(e);if(p){o=o||i;u=u||a.getDefaultErrorHandler();h.check(o,u);n.debug("Queued OData request for "+r+' "'+e+'"',null,"ODataWrapper");if(!l){p.push({__changeRequests:[]});d.push([]);l=b}p[p.length-1].__changeRequests.push(f);c=(new jQuery.Deferred).done(function(e,a){n.debug("Received OData response for "+r+' "'+g+'"',null,"ODataWrapper");t.callHandler(o.bind(null,e),u)}).fail(h.onError.bind(h,r,g,u,null));d[d.length-1].push(c);return}this.doRequest(g,r,s,o,u)};this.isStickySessionEnabled=function(){return(u.oStickySessionConfiguration[g]||{}).enabled||false};this.enableStickySession=function(){u.oStickySessionConfiguration[g].enabled=true};this.check=function(e,t){if(!e){throw new r("Missing success callback","ODataWrapper")}if(typeof e!=="function"){throw new r("Success callback is not a function","ODataWrapper")}if(!t){throw new r("Missing error callback","ODataWrapper")}if(typeof t!=="function"){throw new r("Error callback is not a function","ODataWrapper")}};this.create=function(e,t,a,r){n.debug("[000] create: url",e,"ODataWrapper");this.requestOrBatch(e,"POST",t,a,r)};this.del=function(e,t,a){var r=e;if(typeof r!=="string"){r=this.toRelativeUrl(e.__metadata.uri)}this.requestOrBatch(r,"DELETE",null,function(e){if(t){t()}},a)};this.getBaseUrl=function(){return g};this.getODataService=function(){return a};this.onError=function(e,t,a,r,s){var i,o="Error ";if(s.response&&s.response.statusCode){o+="("+s.response.statusCode+", "+s.response.statusText+") "}o+="in OData response for "+e+' "'+t+'": '+s.message;if(s.response&&s.response.body){try{i=JSON.parse(s.response.body).error;if(i){if(i.hasOwnProperty("message")&&i.message.hasOwnProperty("value")){o+="\nDetails: "+i.message.value}if(s.response.statusCode&&!i.httpStatus){i.httpStatus=s.response.statusCode}}}catch(e){}}n.error(o,JSON.stringify(s.response),"ODataWrapper");if(r){r.reject(o,i)}a(o,i)};this.openBatchQueue=function(){if(p){throw new r("Batch queue already open","ODataWrapper")}p=[];d=[];l=false};this.isBatchQueueOpen=function(){return!!p};this.read=function(e,r,s,i){var o,c=this.toRequestUrl(e),f;function p(e,i){this.detectStickySession(i.headers);a.setCsrfToken(u.csrfTokenValue(i.headers)||a.getCsrfToken());n.debug('Received OData response for GET "'+c+'"',null,"ODataWrapper");f=u.headerValue("sap-message",i.headers);if(f){n.warning("SAP message for GET "+c,f,"ODataWrapper")}if(o){o.resolve(JSON.parse(JSON.stringify(e)),a.getCsrfToken())}t.callHandler(r.bind(null,e),s)}s=s||a.getDefaultErrorHandler();this.check(r,s);if(i){OData.read.$cache=OData.read.$cache||new t.Map;o=OData.read.$cache.get(c);if(o){n.debug('Using cached response for GET "'+c+'"',null,"ODataWrapper");o.done(function(e,n){a.setCsrfToken(a.getCsrfToken()||n);t.callHandler(r.bind(null,JSON.parse(JSON.stringify(e))),s)}).fail(s);return}o=new jQuery.Deferred;OData.read.$cache.put(c,o.promise())}this.readOrBatch(e,p.bind(this),this.onError.bind(this,"GET",c,s,o))};this.batch=function(e,t,a){var r=this.toRequestUrl("$batch");this.doRequest(r,"POST",e,t,a,OData.batchHandler)};this.submitBatchQueue=function(e,s){var i=d;function u(r){var n=r.__batchResponses.length,u=i.length;if(u!==n){h.onError("POST",this.toRequestUrl("$batch"),s,null,{message:"Protocol error! Expected "+u+" responses, but received "+n});return}r.__batchResponses.forEach(function(e,t){var a=i[t];if(e.response){o(a,e)}else if(e.__changeResponses){e.__changeResponses.forEach(function(e,t){a[t].resolve(e.data,e)})}else{a.resolve(e.data,e)}});if(e){t.callHandler(e,a.getDefaultErrorHandler())}}if(!p){throw new r("No open batch queue to submit","ODataWrapper")}if(p.length>0){n.debug("[000] submit batch queue: batch","ODataWrpper");this.batch({__batchRequests:p},u.bind(this),s)}else if(e){t.callHandler(e,a.getDefaultErrorHandler(),true)}n.debug("[000] submit batch queue","ODataWrapper");p=undefined;d=undefined};this.toString=function(e){var t=['ODataWrapper({sBaseUrl:"',g,'"'];t.push("})");return t.join("")};this.put=function(e,t,a,r){n.debug("[000] put: request or batch, payload.id",t.id,"ODataWrapper");this.requestOrBatch(e,"PUT",t,function(e){if(a){a()}},r)};this.update=function(e,t,a){var r={__metadata:{type:e.__metadata&&e.__metadata.type}},n,s=this.toRelativeUrl(e.__metadata.uri);for(n in e){if(Object.prototype.hasOwnProperty.call(e,n)&&n.indexOf("$")!==0&&typeof e[n]!=="object"){r[n]=e[n]}}this.put(s,r,t,a)};if(typeof e==="string"){e=O(arguments)}else if(typeof e==="object"){e=f(e)}if(!e||!e.baseUrl||typeof e.baseUrl!=="string"){throw new r("Missing base URL","ODataWrapper")}if(!a||typeof a!=="object"){throw new r("Missing OData service facade","ODataWrapper")}e.baseUrl=e.baseUrl.replace(/\/$/,"")+"/";g=e.baseUrl;b=e.supportsChangeSets;if(typeof u.oStickySessionConfiguration==="undefined"){n.error("ODataWrapper.oStickySessionConfiguration is not defined!","the ODataWrapper constructor was called before the static property was defined","ODataWrapper")}else if(typeof u.oStickySessionConfiguration[g]==="undefined"){u.oStickySessionConfiguration[g]={enabled:false,value:undefined}}};function c(e){var t={};var a={};t.baseUrl=e[0];if(typeof e[1]==="boolean"){t.supportsChangeSets=e[1]}if(typeof e[2]==="function"){a.defaultFailure=e[2]}a.settings=t;return a}function f(e){if(e===undefined){return undefined}try{return JSON.parse(JSON.stringify(e))}catch(e){return undefined}}if(typeof u.oStickySessionConfiguration==="undefined"){u.oStickySessionConfiguration={}}u.checkSapStatisticsSetting=function(e){try{u["sap-statistics"]=s.getConfiguration().getStatistics()}catch(t){u["sap-statistics"]=/sap-statistics=(true|x|X)/.test(e)}};u.checkSapStatisticsSetting(window.location.search);u._Service=function e(t,r){var n=new u(t,this);a.call(this,n,r);return n};u.createODataWrapper=function(e,t){n.debug("[000] createOdataWrapper","ODataWrapper");if(typeof arguments[0]==="string"){var a=c(arguments);e=a.settings;if(a.defaultFailure){t=a.defaultFailure}}else if(typeof arguments[0]==="object"){e=f(e)}return new u._Service(e,t)};return u});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/pbServices/ui2/PageBuildingService", ["sap/ushell_abap/pbServices/ui2/Utils","sap/ushell_abap/pbServices/ui2/ODataService","sap/ushell_abap/pbServices/ui2/ODataWrapper","sap/ushell_abap/pbServices/ui2/Error"],function(e,n,t,i){"use strict";var a=function(t,r,s,o){var c,g=this;function d(e){return e.replace(/'/g,"''").replace(/&/g,"%26")}function p(e,n,t){var i;if(typeof e==="string"){i=e}else{if(e.instanceId){return"ChipInstanceBags(pageId='"+encodeURIComponent(e.pageId)+"',instanceId='"+encodeURIComponent(e.instanceId)+"',id='"+encodeURIComponent(n)+"')"+(t?"?$expand=ChipInstanceProperties":"")}i=e.id}return"Bags(pageId='"+encodeURIComponent(i)+"',id='"+encodeURIComponent(n)+"')"+(t?"?$expand=Properties":"")}a.extractBatchResponseEntry=function(e){if(e.statusCode==="201"){return e.data}if(e.statusCode==="204"){return undefined}return e.message||""};this.batch=function(n,t,i,r){var s=[];function o(e){var n,t=[];for(n=0;n<e.length;n+=1){t[n]=a.extractBatchResponseEntry(e[n])}return t}i=i||function(){};r=r||g.getDefaultErrorHandler();c.check(i,r);n=n||[];t=t||[];if(n.length>0){s.push({__changeRequests:n})}s=s.concat(t);if(s.length===0){e.callHandler(i.bind(null,[],[]),r,true);return}c.batch({__batchRequests:s},function(t){var a=t.__batchResponses,g=a[0].__changeResponses;if(a[0].response&&a[0].message){c.onError("POST",c.getBaseUrl()+"$batch",r,undefined,t.__batchResponses[0]);return}if(g&&g.length!==n.length||a.length!==s.length){r("Number of requests differs from number of responses in $batch");return}if(g){e.callHandler(i.bind(null,o(g),o(a.slice(1))),r,false)}else{e.callHandler(i.bind(null,[],o(a)),r,false)}},r)};this.isPersonalization=function(){return!!s};this.readMetadata=function(n,t,i){var a=c.getBaseUrl()+"$metadata"+(i?"?"+Date.now():"");t=t||this.getDefaultErrorHandler();c.check(n,t);OData.read(a,function(i){e.callHandler(n.bind(null,i),t)},c.onError.bind(c,"GET",a,t,undefined),OData.metadataHandler)};this.deleteBag=function(e,n,t,a){if(!e){throw new i("Missing parent ID or object","PageBuildingService")}if(!n){throw new i("Missing bag ID","PageBuildingService")}c.del(p(e,n,false),t,a)};this.readBag=function(e,n,t,a){if(!e){throw new i("Missing parent ID or object","PageBuildingService")}if(!n){throw new i("Missing bag ID","PageBuildingService")}c.read(p(e,n,true),t,a)};this.readAllCatalogs=function(e,n,t,i,a,r){var s="id";r=r===undefined?true:r;if(a&&typeof a==="string"){s=a}var o="Pages('"+encodeURIComponent(e)+"')/allCatalogs?$expand=Chips/ChipBags/ChipProperties&"+"$orderby="+s;if(i&&typeof i==="string"){o=o+"&$filter="+encodeURIComponent(i)}if(this.readAllCatalogs.cacheBusterTokens&&this.readAllCatalogs.cacheBusterTokens.get(e)){o+="&sap-cache-id="+this.readAllCatalogs.cacheBusterTokens.get(e)}c.read(o,n,t,r)};this.readCatalogs=function(e,n,t){var i="Catalogs?$orderby=id";if(t&&typeof t==="string"){i=i+"&$filter="+encodeURIComponent(t)}c.read(i,e,n)};this.readAllCatalogsForUser=function(e,n,t){var i=e?"?$filter="+encodeURIComponent(e):"";c.read("Pages('unused')/allCatalogs"+i,n,t)};this.getReferencingCatalogIds=function(e,n,t){if(typeof n!=="function"){n=t;t=arguments[3]}function a(t){var i=[],a=t.results||[];a.forEach(function(n){if(n.referenceChipId===e){if(i.indexOf(n.catalogId)===-1){i.push(n.catalogId)}}});n(i)}if(typeof e!=="string"){throw new i("sReferencedChipId must be a string","PageBuildingService")}if(typeof n!=="function"){throw new i("fnSuccess is mandatory","PageBuildingService")}c.read("Chips?$filter="+encodeURIComponent("referenceChipId eq '"+d(e)+"'"),a,function(e){new i(e,"PageBuildingService");t.apply(null,arguments)})};this.createPageBasedCatalog=function(e,n,t,a){if(!e){throw new i("Missing domain ID","PageBuildingService")}c.create("Catalogs",{domainId:e,title:n,type:"CATALOG_PAGE"},t,a)};this.createCatalog=function(e,n,t){c.create("Catalogs",e,n,t)};this.deleteCatalog=function(e,n,t){c.del(e,n,t)};this.cloneCatalog=function(e,n,t,a,r){if(!e){throw new i("Missing source catalog ID","PageBuildingService")}if(!n){throw new i("Missing new domain ID","PageBuildingService")}if(n.indexOf(":")>=0){throw new i("Illegal domain ID: "+n,"PageBuildingService")}c.create("CloneCatalog?sourceId='"+encodeURIComponent(e)+"'&targetId='"+encodeURIComponent(n)+(t!==undefined?"'&title='"+encodeURIComponent(t)+"'":"'"),{},a,r)};this.clonePageChipInstance=function(e,n,t,a,r){if(!e){throw new i("Missing source page ID","PageBuildingService")}if(!n){throw new i("Missing source CHIP instance ID","PageBuildingService")}if(!t){throw new i("Missing target page ID","PageBuildingService")}c.create("ClonePageChipInstance?sourcePageId='"+encodeURIComponent(e)+"'&sourceChipInstanceId='"+encodeURIComponent(n)+"'&targetPageId='"+encodeURIComponent(t)+"'",{},function(e){c.read("PageChipInstances(pageId='"+encodeURIComponent(e.pageId)+"',instanceId='"+encodeURIComponent(e.instanceId)+"')"+"?$expand=ChipInstanceBags/ChipInstanceProperties",a,r)},r)};this.readCatalog=function(e,n,t,a,r){var s;if(!e){throw new i("Missing catalog ID","PageBuildingService")}s="Catalogs('"+encodeURIComponent(e)+"')";if(!a){s+="?$expand=Chips";if(!r){s+="/ChipBags/ChipProperties"}}c.read(s,n,t)};this.updateCatalog=function(e,n,t){c.update(e,n,t)};this.readCatalogChips=function(e,n,t,a){var r,s="",o="?$filter=";if(!e){throw new i("Missing catalog ID","PageBuildingService")}r="Catalogs('"+encodeURIComponent(e)+"')/Chips";if(n){if(!n.length){throw new i("No CHIP IDs given","PageBuildingService")}n.forEach(function(e){s=s+o+"id%20eq%20'"+encodeURIComponent(e)+"'";o="%20or%20"});if(c.getBaseUrl().length+r.length+s.length>2e3){s=""}}c.read(r+s,t,a)};this.createPage=function(e,n,t,a,r,s){if(!e){throw new i("Missing page ID","PageBuildingService")}c.create("Pages",{id:e,catalogId:n,layout:t,title:a},r,s)};this.readPages=function(e,n,t){var i="Pages?";if(!t){i+="$expand=Catalog&"}c.read(i+"$orderby=id",e,n)};this.readPage=function(e,n,t,a){var r="Pages('"+encodeURIComponent(e)+"')";if(!e){throw new i("Missing page ID","PageBuildingService")}if(a===undefined){r+="?$expand=Bags/Properties,PageChipInstances/Chip/ChipBags/ChipProperties,"+"PageChipInstances/RemoteCatalog,"+"PageChipInstances/ChipInstanceBags/ChipInstanceProperties"}else if(a!==""){r+="?$expand="+a}c.read(r,n,t)};this.readPageSet=function(e,n,t,a){var r;var s=this;var o;a=a===undefined?true:a;if(!e){throw new i("Missing page set ID","PageBuildingService")}r="PageSets('"+encodeURIComponent(e)+"')?$expand="+"Pages/PageChipInstances/Chip/ChipBags/ChipProperties,"+"Pages/PageChipInstances/RemoteCatalog,"+"Pages/PageChipInstances/ChipInstanceBags/ChipInstanceProperties,"+"AssignedPages,"+"DefaultPage";if(this.readPageSet.cacheBusterTokens&&this.readPageSet.cacheBusterTokens.get(e)){r+="&sap-cache-id="+this.readPageSet.cacheBusterTokens.get(e)}if(this.readPageSet.appendedParameters){o=Object.keys(this.readPageSet.appendedParameters);if(o.length>0){o.sort();o.forEach(function(e){r+="&"+encodeURIComponent(e)+"="+encodeURIComponent(s.readPageSet.appendedParameters[e])})}}c.read(r,n,t,a)};this.updatePageSet=function(e,n,t){c.update(e,n,t)};this.createPageInPageSet=function(e,n,t,a,r){if(!e){throw new i("Missing page set ID","PageBuildingService")}c.create("PageSets('"+encodeURIComponent(e)+"')/Pages",{catalogId:t||"",layout:"",title:n||""},a,r)};this.updatePage=function(e,n,t){c.update(e,n,t)};this.deletePage=function(e,n,t){if(!e){throw new i("Missing page ID","PageBuildingService")}c.del("Pages('"+encodeURIComponent(e)+"')",n,t)};this.createPageChipInstance=function(e,n,t,i,a,r,s,o){this.createPageChipInstanceFromRawData({pageId:e,instanceId:n,chipId:t,title:i,configuration:a,layoutData:r},s,o)};this.createPageChipInstanceFromRawData=function(e,n,t){if(typeof e!=="object"){throw new i("Invalid raw data","PageBuildingService")}if(!e.pageId){throw new i("Missing page ID","PageBuildingService")}if(!e.chipId){throw new i("Missing CHIP ID","PageBuildingService")}e.instanceId=e.instanceId||"";e.title=e.title||"";e.configuration=e.configuration||"";e.layoutData=e.layoutData||"";c.create("PageChipInstances",e,n,t)};this.updatePageChipInstance=function(e,n,t){c.update(e,n,t)};this.deletePageChipInstance=function(e,n,t,a){if(!e){throw new i("Missing page ID","PageBuildingService")}if(!n){throw new i("Missing instance ID","PageBuildingService")}c.del("PageChipInstances(pageId='"+encodeURIComponent(e)+"',instanceId='"+encodeURIComponent(n)+"')",t,a)};this.updateBagProperties=function(e,n,t,a,r,s,o){var g=[],d=[],p,l,h,u,f="__metadata";function I(e){var n={__metadata:{type:e[f].type,uri:e[f].uri}},t;for(t in e){if(Object.prototype.hasOwnProperty.call(e,t)&&t!==f&&t.indexOf("$")!==0&&typeof e[t]!=="object"){n[t]=e[t]}}return n}if(!e){throw new i("Missing parent object","PageBuildingService")}if(!n){throw new i("Missing bag ID","PageBuildingService")}if(typeof r==="function"){this.updateBagProperties(e,n,t,a,[],r,s);return}t=t||[];a=a||[];r=r||[];if(t.length===0&&a.length===0&&r.length===0){throw new i("No properties to update, create or reset","PageBuildingService")}for(p=0;p<t.length;p+=1){h=t[p];u=h[f].uri;l=u.indexOf(c.getBaseUrl());if(l>=0){u=u.slice(l+c.getBaseUrl().length)}g.push({requestUri:u,method:"PUT",data:I(h)})}u=e.instanceId?"ChipInstanceProperties":"Properties";for(p=0;p<a.length;p+=1){h=a[p];if(!h.name){throw new i("Missing property name","PageBuildingService")}if(e.instanceId){h.instanceId=e.instanceId;h.pageId=e.pageId}else{h.pageId=e.id}h.bagId=n;g.push({requestUri:u,method:"POST",data:h})}for(p=0;p<r.length;p+=1){h=r[p];u=h[f].uri;l=u.indexOf(c.getBaseUrl());if(l>=0){u=u.slice(l+c.getBaseUrl().length)}g.push({requestUri:u,method:"DELETE"});d.push({requestUri:u,method:"GET"})}this.batch(g,d,function(e,n){var i=e.slice(a.length+t.length),r;for(r=0;r<i.length;r+=1){if(i[r]===undefined){if(typeof n[r]==="object"){i[r]=n[r]}}}if(s){s(e.slice(0,t.length),e.slice(t.length,a.length+t.length),i)}},o)};this.createProperty=function(e,n,t,a,r,s,o){var g;if(!e){throw new i("Missing parent ID or object","PageBuildingService")}if(!n){throw new i("Missing bag ID","PageBuildingService")}if(!t){throw new i("Missing property name","PageBuildingService")}if(typeof r==="function"){this.createProperty(e,n,t,a,undefined,r,s);return}g={bagId:n,name:t,pageId:e,translatable:r,value:a};if(typeof e!=="string"){if(e.instanceId){g.instanceId=e.instanceId;g.pageId=e.pageId}else{g.pageId=e.id}}c.create(g.instanceId?"ChipInstanceProperties":"Properties",g,s,o)};this.updateProperty=function(e,n,t){c.update(e,n,t)};this.deleteProperty=function(e,n,t){c.del(e,n,t)};this.readChip=function(e,n,t){if(!e){throw new i("Missing CHIP ID","PageBuildingService")}var a="Chips('"+encodeURIComponent(e)+"')?$expand=ChipBags/ChipProperties";if(o!==undefined){a=a+"&sap-cache-id="+o}c.read(a,n,t)};if(typeof t==="string"){c=a._createODataWrapper(t,this)}else{c=t}this.readAllCatalogs.cacheBusterTokens=new e.Map;this.readPageSet.cacheBusterTokens=new e.Map;if(!c.isStickySessionEnabled()&&!s){c.enableStickySession()}n.call(this,c,r)};a._createODataWrapper=function(e,n){return new t(e,n,true)};a.createPageBuildingService=function(e,n,t,i){return new a(e,n,t,i)};return a});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/pbServices/ui2/PageSet", ["sap/ushell_abap/pbServices/ui2/Utils","sap/ushell_abap/pbServices/ui2/Page","sap/ushell_abap/pbServices/ui2/Error","sap/base/Log"],function(e,t,i,n){"use strict";var a={assigned:1,userCreated:2,personalized:3,defaultPage:4};var s=function(s,g){var u,r,o,f=[],l,d=true,c=this;function p(){if(d){throw new i(c+": page set is just a stub","sap.ushell_abap.pbServices.ui2.PageSet")}}this.getPageType=function(e){var t=e.getId(),n;p();if(!l.containsKey(t)){throw new i("Unknown page "+t,"sap.ushell_abap.pbServices.ui2.PageSet")}n=l.get(t);if(n===a.assigned&&e.isPersonalized()){n=a.personalized}return n};function h(i){var g=i.DefaultPage.id,u=i.AssignedPages&&i.AssignedPages.results||[];r=i;l=new e.Map;u.forEach(function(e){l.put(e.id,a.assigned)});r.Pages.results.forEach(function(e){var i=new t(s,e),n=i.getId();f.push(i);if(g===n){o=i;l.put(n,a.defaultPage)}else if(!l.containsKey(n)){l.put(n,a.userCreated)}});delete r.AssignedPages;delete r.DefaultPage;delete r.Pages;d=false;n.debug("Initialized: "+c,null,"PageSet")}this.appendPage=function(e,g,r,o){p();if(typeof r!=="function"){throw new i("Missing success handler","PageSet")}s.getPageBuildingService().createPageInPageSet(u,e,g,function(e){var i=new t(s,e);f.push(i);l.put(i.getId(),a.userCreated);n.debug("Appended new page with ID "+i.getId()+" to pageset "+c,null,"PageSet");r(i)},o)};this.isPageRemovable=function(e){return this.getPageType(e)===a.userCreated};this.isPageResettable=function(e){return this.getPageType(e)===a.personalized};this.removePage=function(e,t,n){if(!this.isPageRemovable(e)){throw new i("Cannot remove page "+e.getId(),"PageSet")}e.remove(function(){f.splice(f.indexOf(e),1);l.remove(e.getId());if(t){t()}},n)};this.resetPage=function(e,t,n){if(!this.isPageResettable(e)){throw new i("Cannot reset page "+e.getId(),"sap.ushell_abap.pbServices.ui2.PageSet")}e.remove(function(){e.load(t,n,true)},n)};this.filter=function(e,t){var i,n=[],a;p();e=e||[];t=t||[];for(i=0;i<f.length;i+=1){a=f[i];if(e.indexOf(a.getId())!==-1){n.push(a)}else if(a.getCatalog()&&t.indexOf(a.getCatalog().getId())!==-1){n.push(a)}}f=n};this.getConfiguration=function(){p();return r.configuration};this.setConfiguration=function(t,n,a){p();if(typeof n!=="function"){throw new i("Missing success handler","PageSet")}if(r.configuration===t){e.callHandler(n,a,true);return}r.configuration=t;s.getPageBuildingService().updatePageSet(r,function(e){n()},a)};this.getDefaultPage=function(){p();return o};this.getId=function(){return u};this.getPages=function(){p();return f.slice()};this.isStub=function(){return d};this.load=function(e,t){if(!d){throw new i("Page set is not a stub anymore","PageSet")}s.getPageBuildingService().readPageSet(u,function(t){n.debug("Loaded: "+c,null,"PageSet");h(t);e()},t,true)};this.toString=function(e){var t=['PageSet({sId:"',u,'",bIsStub:',d];if(e){t.push(",oAlterEgo:",JSON.stringify(r),",oFactory:",s.toString(e),",aPages:",JSON.stringify(f))}t.push("})");return t.join("")};u=g;if(!u){throw new i("Missing page set ID","PageSet")}n.debug("Created: "+this,null,"PageSet")};return s});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/pbServices/ui2/RemoteCatalogService", ["sap/ushell_abap/pbServices/ui2/PageBuildingService"],function(e){"use strict";var i=function(){this.readChips=function(i,a,n,r,u){e.createPageBuildingService(i).readCatalogChips(a,n,r,u)}};return i});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/pbServices/ui2/Utils", ["sap/ui/thirdparty/URI","sap/base/Log","sap/ushell_abap/pbServices/ui2/Error","sap/ui/Device"],function(e,t,r,n){"use strict";var i=function(){};if(!Function.prototype.bind){Function.prototype.bind=function(e){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var t=Array.prototype.slice.call(arguments,1),r=this,n=function(){},i=function(){return r.apply(this instanceof n?this:e,t.concat(Array.prototype.slice.call(arguments)))};n.prototype=this.prototype;i.prototype=new n;return i}}var s;i.absoluteUrl=function(e,t){t=t||location.href;if(t.indexOf("://")<0&&t.charAt(0)!=="/"){throw new r("Illegal base URL: "+t)}if(!e||e.indexOf("://")>=0||e.charAt(0)==="/"){return i.addCacheBusterTokenUsingUshellConfig(e)}if(t.search(/^([^:]*:)?\/\/[^/]+$/)<0){t=t.replace(/\/[^/]*$/,"")}return i.addCacheBusterTokenUsingUshellConfig(t+"/"+e)};i.callHandler=function(e,r,n){var s;if(n){setTimeout(function(){i.callHandler(e,r,false)},0);return}try{e()}catch(e){s=e.message||e.toString();t.error("Call to success handler failed: "+s,e.stack);if(r){r(s)}}};i.get=function(e,n,o,a,u,c){if(typeof o!=="function"){throw new r("Missing success handler")}if(typeof a!=="function"){throw new r("Missing error handler")}if(n&&c){throw new r("Caching of XML responses not supported")}if(typeof i.addCacheBusterTokenUsingUshellConfig==="function"){e=i.addCacheBusterTokenUsingUshellConfig(e)}u=u||new XMLHttpRequest;u.onreadystatechange=function(){var r,u;if(this.readyState!==4){return}if(this.status!==200){t.error("Error "+this.status+" in response for URL "+e,null);a(e+": "+this.status+" "+this.statusText,this.responseText);return}t.debug("Received response for URL "+e,null);if(n){u=this.responseXML;if(u===null||!u.documentElement){a(e+": no valid XML");return}r=u}else{r=this.responseText;if(c){s.put(e,r)}}i.callHandler(o.bind(null,r),a)};if(!n&&s.containsKey(e)){t.debug("Return cached response for URL "+e,null);i.callHandler(o.bind(null,s.get(e)),a)}else{try{if(u.readyState<XMLHttpRequest.OPENED){u.open("GET",e,true)}else{t.debug("XHR Request was already opened for "+e,null)}u.send();t.debug("Sent request to URL "+e,null)}catch(r){t.error("Error '"+(r.message||r)+"' in request to URL "+e,null);throw r}}};i.addCacheBusterToken=function(e,t,r,n){if(t.test(e)){e=e.replace(t,r);e=e.replace(/\[CacheBusterToken\]/g,n)}return e};i.removeCBAndNormalizeUrl=function(t){var r,n,i,s;if(typeof t!=="string"||t===""||o(t)){return t}function o(t){var r=new e(t),n=r.path();if(r.is("absolute")){return false}if(n&&n.charAt(0)==="/"){return false}return true}r=t.match(/(.*)(\/~[\w-]+~[A-Z0-9]?)(.*)/);if(r){n=r[1];i=r[2];s=r[3]}function a(t){return new e(t).normalizePathname().toString()}function u(t){var r=new e(t).segment(),n,i=0;for(n=0;n<r.length&&i>=0;n+=1){if(r[n]===".."){i=i-1}else{i=i+1}}return i<0}if(i){if(s&&u(s)){t=n+s}}return a(t)};i.addCacheBusterTokenUsingUshellConfig=function(e){var t=window["sap-ushell-config"]&&window["sap-ushell-config"].cacheBusting,r=t&&t.patterns,n=e,s=[],o,a=[];s=i.getParameterMap();o=s["sap-ushell-nocb"]&&s["sap-ushell-nocb"][0];if((o==="true"||o==="X")&&typeof e==="string"){e=e.replace(/\/~[\w-]+~[A-Z0-9]?/,"");return e}if(!t||typeof e!=="string"||e===""||/[/=]~[\w-]+~[A-Z0-9]?[/#?&]/.test(e)||/[/=]~[\w-]+~[A-Z0-9]?$/.test(e)){return e}if(t&&t.urls){if(e.charAt(e.length-1)==="/"){e=e.substr(0,e.length-1)}if(t.urls.hasOwnProperty(e)){return e+"/"+t.urls[e].cacheBusterToken}if(t.urls.hasOwnProperty(e+"/")){return e+"/"+t.urls[e+"/"].cacheBusterToken}}if(!r){return e}Object.keys(r).forEach(function(e){if(r.hasOwnProperty(e)){var t=r[e];t.pattern=new RegExp(e);a.push(t)}});a.sort(function(e,t){return e.order-t.order});a.every(function(r){if(r.pattern.test(e)){if(!r.cacheBusterToken){r.cacheBusterToken=t.cacheBusterToken}n=i.addCacheBusterToken(e,r.pattern,r.replacement,r.cacheBusterToken);return false}return true});return n};i.clearCache=function(){s=new i.Map};i.getFormFactor=function(){if(n.system.desktop){return n.system.SYSTEMTYPE.DESKTOP}if(n.system.tablet){return n.system.SYSTEMTYPE.TABLET}if(n.system.phone){return n.system.SYSTEMTYPE.PHONE}};i.getParameterMap=function(e){var t;var n;var i={};var s;var o;var a;var u;var c;var l=arguments.length>0?e:location.search;if(l&&l.charAt(0)!=="?"){throw new r("Illegal search string "+l)}if(!l||l==="?"){return{}}u=l.substring(1).replace(/\+/g," ").split(/[&;]/);c=u.length<500?u.length:500;for(t=0,n=c;t<n;t+=1){s=u[t];o="";a=s.indexOf("=");if(a>=0){o=s.slice(a+1);o=decodeURIComponent(o);s=s.slice(0,a)}s=decodeURIComponent(s);if(!Object.prototype.hasOwnProperty.call(i,s)){i[s]=[]}i[s].push(o)}return i};i.getParameterValue=function(e,t){var n,s;if(typeof t!=="string"){throw new r("Missing parameter name")}e=e.split("#")[0];s=e.indexOf("?");if(s>=0){n=i.getParameterMap(e.slice(s));if(n[t]){return n[t][0]}}return""};i.isArray=function(e){return Object.prototype.toString.apply(e)==="[object Array]"};i.isString=function e(t){return/String/.test(Object.prototype.toString.call(t))};i.parseXml=function(e){var t;if(!e||typeof e!=="string"){return null}t=(new DOMParser).parseFromString(e,"text/xml");if(t.getElementsByTagName("parsererror").length){throw new r("Invalid XML: "+e)}return t};i.Map=function(){this.entries={}};i.Map.prototype.put=function(e,t){var r=this.get(e);this.entries[e]=t;return r};i.Map.prototype.containsKey=function(e){if(typeof e!=="string"){throw new r("Not a string key: "+e)}return Object.prototype.hasOwnProperty.call(this.entries,e)};i.Map.prototype.get=function(e){if(this.containsKey(e)){return this.entries[e]}return undefined};i.Map.prototype.keys=function(){return Object.keys(this.entries)};i.Map.prototype.remove=function(e){delete this.entries[e]};i.Map.prototype.toString=function(){var e=["Map("];e.push(JSON.stringify(this.entries));e.push(")");return e.join("")};i.clearCache();return i});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/pbServices/ui2/contracts/actions", ["sap/ushell_abap/pbServices/ui2/Chip","sap/ushell_abap/pbServices/ui2/Error","sap/base/Log"],function(t,e,n){"use strict";t.addContract("actions",function(t){var n;this.setActionsProvider=function(t){if(typeof t!=="function"){throw new e("CHIP actions provider is not a function","chip.actions")}n=t};return{getActions:function(){if(n){return n()}return[]}}});t.addContract("types",function(t){var i,r;this.attachSetType=function(t){if(typeof t!=="function"){throw new e("Change event handler is not a function","chip.types")}if(r===t){return}r=t;if(i){r(i)}};return{getAvailableTypes:function(){return t.getChip().getAvailableTypes()},getDefaultType:function(){return t.getChip().getDefaultType()},setType:function(t){var o;if(typeof t!=="string"||t===""){throw new e("The given type is not a string","contract.types")}o=t.toLowerCase();if(this.getAvailableTypes().indexOf(o)<0){throw new e("The CHIP does not support type '"+o+"'","contract.types")}i=o;if(!r){return}try{r(o)}catch(t){n.error("Could not set CHIP type '"+o+"': "+(t.message||t.toString()),null,"chip.types")}}}})});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/pbServices/ui2/contracts/bag", ["sap/ushell_abap/pbServices/ui2/Chip","sap/ushell_abap/pbServices/ui2/Utils","sap/ushell_abap/pbServices/ui2/Error"],function(t,e,a){"use strict";t.addContract("bag",function(t){var i;this.getBag=function(e){return t.getBag(e)};this.getBagIds=function(){return t.getBagIds()};this.getOriginalLanguage=function(){return t.getPage()&&t.getPage().getOriginalLanguage()};this.attachBagsUpdated=function(t){if(typeof t!=="function"){throw new a("The given handler is not a function","chip.bag")}i=t};return{fireBagsUpdated:function(t){if(!e.isArray(t)||t.length<1){throw new a("At least one bag ID must be given","contract.bag")}if(i){i(t)}}}})});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/pbServices/ui2/contracts/configuration", ["sap/ushell_abap/pbServices/ui2/Chip","sap/ushell_abap/pbServices/ui2/Error","sap/ushell_abap/pbServices/ui2/Utils"],function(t,i,n){"use strict";t.addContract("configuration",function(t){var e;this.getParameterValueAsString=function(i){return t.getConfigurationParameter(i)};this.attachConfigurationUpdated=function(t){if(typeof t!=="function"){throw new i("The given handler is not a function","chip.configuration")}e=t};return{fireConfigurationUpdated:function(t){if(!n.isArray(t)||t.length<1){throw new i("At least one configuration property key must be given","contract.configuration")}if(e){e(t)}}}});t.addContract("writeConfiguration",function(t){this.setParameterValues=function(i,n,e){t.updateConfiguration(i,n,e)}})});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/pbServices/ui2/contracts/configurationUi", ["sap/ushell_abap/pbServices/ui2/Chip","sap/ushell_abap/pbServices/ui2/Error"],function(n,i){"use strict";n.addContract("configurationUi",function(n){var t,e,o,u=false,f,c,r;this.attachCancel=function(n){if(typeof n!=="function"){throw new i("Cancel event handler is not a function","chip.configurationUi")}t=n};this.attachSave=function(n){if(typeof n!=="function"){throw new i("Save event handler is not a function","chip.configurationUi")}f=n};this.display=function(){if(e){e()}};this.isEnabled=function(){return u};this.isReadOnly=function(){return n.isReadOnly()};this.setDirtyProvider=function(n){o=n};this.setUiProvider=function(n){c=n};this.setAsyncUiProvider=function(n){r=n};return{attachDisplay:function(n){if(typeof n!=="function"){throw new i("Display event handler is not a function","ChipInstance")}e=n},fireCancel:function(){if(t){t()}},fireSave:function(){return f?f():undefined},getUi:function(n){return c?c(n):undefined},getUiAsync:function(n){return r?r(n):undefined},isDirty:function(){return o?o():undefined},setEnabled:function(n){u=n}}})});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/pbServices/ui2/contracts/fullscreen", ["sap/ushell_abap/pbServices/ui2/Chip"],function(e){"use strict";e.addContract("fullscreen",function(e){this.getFullscreen=function(){return e.getFullscreen()};this.setFullscreen=function(t){e.setFullscreen(t)};this.attachFullscreen=function(t){e.attachFullscreen(t)}})});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/pbServices/ui2/contracts/preview", ["sap/ushell_abap/pbServices/ui2/Chip"],function(e){"use strict";var t={};t.setEnvironmentType=function(e){if(e!=="runtime"&&e!=="designtime"){throw new Error("setEnvironmentType only accepts the values 'runtime' or 'designtime'")}this.environment=e};t.getEnvironmentType=function(){return this.environment};e.addContract("preview",function(e){var n=false,i,r,u,o;this.getDescription=function(){return e.getChip().getDescription()};this.getTitle=function(){return e.getTitle()};this.isEnabled=function(){return n};this.getEnvironmentType=function(){return t.getEnvironmentType()};this.setPreviewIcon=function(e){i=e};this.setPreviewSubtitle=function(e){r=e};this.setPreviewTitle=function(e){u=e};this.setTargetUrl=function(e){o=e};return{getPreviewIcon:function(){return i},getPreviewSubtitle:function(){return r},getPreviewTitle:function(){return u},getTargetUrl:function(){return o},setEnabled:function(e){n=e}}});return t});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/pbServices/ui2/contracts/search", ["sap/ushell_abap/pbServices/ui2/Chip","sap/ushell_abap/pbServices/ui2/Error","sap/ushell_abap/pbServices/ui2/Utils"],function(i,t,e){"use strict";i.addContract("search",function(i){var r,s;this.setKeywords=function(i){if(!e.isArray(i)){throw new t("Not an array: "+i,"chip.search")}s=i.slice()};this.attachHighlight=function(i){if(typeof i!=="function"){throw new t("Not a function: "+i,"chip.search")}r=i};return{getKeywords:function(){return s?s.slice():[]},fireHighlight:function(i){if(r){r(i)}}}})});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/pbServices/ui2/contracts/url", ["sap/ushell_abap/pbServices/ui2/Chip"],function(t){"use strict";t.addContract("url",function(t){this.addSystemToServiceUrl=function(e,i){return t.getChip().getCatalog().addSystemToServiceUrl(e,i)};this.getApplicationSystem=function(){return t.getChip().getCatalog().getSystemAlias()};this.toAbsoluteUrl=function(e){return t.getChip().toAbsoluteUrl(e)}})});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/ui5appruntime/AppInfoAdapter", ["sap/base/Log","sap/ui/thirdparty/URI","sap/ui/thirdparty/jquery","sap/base/util/UriParameters"],function(e,a,jQuery,r){"use strict";var n=e.getLogger("sap/ushell_abap/ui5appruntime/AppInfoAdapter",e.Level.INFO);function p(){}p.prototype.getAppInfo=function(e){var a=r.fromQuery(window.location.search);if(e===undefined){e=a.get("sap-ui-app-id")}if(e){return this._loadAppIndexData("/sap/bc/ui2/app_index/ui5_app_info_json",e)}return Promise.reject(new Error("Cannot load app info - no app-id provided and URL parameter 'sap-ui-app-id' not set"))};p.prototype._loadAppIndexData=function(e,r){var p=new a(e).query({id:r}).toString();return new Promise(function(e,a){jQuery.ajax({type:"GET",dataType:"json",url:p}).done(function(n){var o=n[r];if(o){e(n[r])}else{a(new Error("UI5 app index data loaded from "+p+" does not contain app "+r))}}).fail(function(e){n.error(e.responseText);a(new Error("Failed to load UI5 app index data loaded from "+p+": "+e.responseText))})})};return new p});
sap.ui.require.preload({
	"sap/ushell_abap/bootstrap/evo/abap-def-loader.js":'// Copyright (c) 2009-2022 SAP SE, All Rights Reserved\nvar sAsyncLoader=document.getElementById("sap-ui-bootstrap").getAttribute("data-sap-ui-async");if(sAsyncLoader&&sAsyncLoader.toLowerCase()==="true"){sap.ui.require(["sap/ushell_abap/bootstrap/evo/abap-def"])}else{sap.ui.requireSync("sap/ushell_abap/bootstrap/evo/abap-def")}\n//# sourceMappingURL=abap-def-loader.js.map',
	"sap/ushell_abap/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ushell_abap","type":"library","embeds":[],"applicationVersion":{"version":"1.111.1"},"title":"SAP library: sap.ushell_abap","description":"SAP library: sap.ushell_abap","ach":"CA-FLP-FE-UI","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":[]},"sap.ui5":{"dependencies":{"minUI5Version":"1.111","libs":{"sap.ui.core":{"minVersion":"1.111.1"},"sap.m":{"minVersion":"1.111.1"},"sap.ushell":{"minVersion":"1.111.1"},"sap.ui.layout":{"minVersion":"1.111.1","lazy":true},"sap.ui.fl":{"minVersion":"1.111.1","lazy":true},"sap.f":{"minVersion":"1.111.1","lazy":true}}},"library":{"i18n":false,"css":false,"content":{"controls":[],"elements":[],"types":[],"interfaces":[]}}}}',
	"sap/ushell_abap/pbServices/ui2/ChipInstance.js":function(){
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
this.sap=this.sap||{};sap.ui.define(["sap/ushell_abap/pbServices/ui2/Bag","sap/ushell_abap/pbServices/ui2/Utils","sap/ushell_abap/pbServices/ui2/Error","sap/base/Log"],function(e,t,n,i){"use strict";var r=function(r,a,u,s){var c,o,f,l=new t.Map,h=false,d=[],p,g,I,C=this;function S(){a.referenceChipInstanceId="";a.referencePageId=""}function y(){S();if(s){s.updateScope()}}function P(){if(!c){throw new n(C+": CHIP instance is just a stub","ChipInstance")}}function m(e,n){if(!c){c=u.createApi(C,l)}i.debug("Initialized: "+C,null,"ChipInstance");t.callHandler(e,n)}function v(t){var n,i=u.getBagIds(),s;for(n=0;n<t.length;n+=1){o.put(t[n].id,new e(r,t[n],u.getBag(t[n].id),y))}for(n=0;n<i.length;n+=1){s={pageId:a.pageId,instanceId:a.instanceId,id:i[n],$tmp:true};if(!o.containsKey(s.id)){o.put(s.id,new e(r,s,u.getBag(s.id),y))}}}function b(){if(u.isStub()){throw new n(this+": initializeConfiguration expects that the CHIP is no stub anymore","ChipInstance",false)}if(!f){f={};u.updateConfiguration(f,a.configuration)}}this.persist=function(e,t){r.getPageBuildingService().updatePageChipInstance(a,function(){S();if(s){s.updateScope()}if(e){e()}},t)};this.attachFullscreen=function(e){if(typeof e!=="function"){throw new n(this+": fullscreen event handler is not a function","ChipInstance")}d.push(e)};this.attachRefresh=function(e){if(e&&typeof e!=="function"){throw new n(this+": refresh event handler is not a function","ChipInstance")}p=e};this.attachTitleChange=function(e){I=e};this.detachAll=function(){d=[];p=null};this.exit=function(){i.debug("Exit: "+C,null,"ChipInstance");c=null;o=new t.Map;f=null;g=null;I=null};this.getApi=function(){return c};this.getBagIds=function(){return o.keys()};this.getBag=function(t){var i;if(!t){throw new n("Missing bag ID","ChipInstance")}i=o.get(t);if(i){return i}i=new e(r,{pageId:a.pageId,instanceId:a.instanceId,id:t,$tmp:true},null,y);o.put(t,i);return i};this.getChip=function(){return u};this.getConfiguration=function(){return a.configuration};this.getConfigurationParameter=function(e){b();if(Object.prototype.hasOwnProperty.call(f,e)){return f[e]}return u.getConfigurationParameter(e)};this.getContract=function(e){P();return l.get(e)};this.getFullscreen=function(){return h};this.getId=function(){return a.instanceId};this.getImplementationAsSapui5=function(){i.error("Deprecated API call of 'ChipInstance.getImplementationAsSapui5'. Please use 'getImplementationAsSapui5Async' instead",null,"sap.ushell_abap.pbServices.ui2.ChipInstance");P();return u.getImplementationAsSapui5(c)};this.getImplementationAsSapui5Async=function(){try{P()}catch(e){return Promise.reject(e)}return u.getImplementationAsSapui5Async(c)};this.getLayoutData=function(){return a.layoutData};this.getPage=function(){return s};this.getTitle=function(){return g||a.title||u.getTitle()};this.getUpdated=function(e){function t(){i.error("Parse Error: CHIP instance's updated property has unexpected format","value of updated property: '"+a.updated+"'","ChipInstance")}var n,r;if(a.updated&&!e){n=/\((\d*)\)/.exec(a.updated);if(!n){t();return undefined}r=new Date(parseInt(n[1],10));if(isNaN(r.getTime())){t();return undefined}return r}return a.updated};this.isOutdated=function(){return a.outdated==="X"};this.isReadOnly=function(){P();return a.isReadOnly==="X"};this.isReference=function(){return!!a.referenceChipInstanceId||!!a.referencePageId};this.isBrokenReference=function(){return a.referenceChipInstanceId==="O"||a.referencePageId==="O"};this.getOriginalId=function(){return a.referenceChipInstanceId===""||a.referenceChipInstanceId==="O"?undefined:a.referenceChipInstanceId};this.getOriginalPageId=function(){return a.referencePageId===""||a.referencePageId==="O"?undefined:a.referencePageId};this.isStub=function(){return!c};this.load=function(e,n){var i;n=n||r.getPageBuildingService().getDefaultErrorHandler();i=m.bind(null,e,n);if(u.isStub()){u.load(i,n)}else{t.callHandler(i,n,true)}};this.remove=function(e,t){if(s&&s.removeChipInstance(C,e,t)){return}this.exit();r.getPageBuildingService().deletePageChipInstance(a.pageId,a.instanceId,e,t)};this.refresh=function(){if(p){try{p();return true}catch(e){i.error(C+": call to refresh handler failed: "+(e.message||e.toString()),null,"ChipInstance");return false}}return false};this.setFullscreen=function(e){var t,n;if(h!==e){h=e;for(t=0,n=d.length;t<n;t+=1){d[t]()}}};this.setLayoutData=function(e,n,i){if(a.layoutData===e){if(n){i=i||r.getPageBuildingService().getDefaultErrorHandler();t.callHandler(n,i,true)}return}a.layoutData=e;this.persist(n,i)};this.setTitle=function(e,n,i,u){var s;u=u||r.getPageBuildingService().getDefaultErrorHandler();if(g!==e){g=e;if(I){t.callHandler(I.bind(null,this),u,!n)}}if(n&&a.title!==g){s=a.title;a.title=g;g=undefined;this.persist(i,function(){a.title=s;g=undefined;u.apply(null,arguments)})}else if(i){t.callHandler(i,u,true)}};this.toString=function(e){var t=["ChipInstance({oChip:",u.toString(e),",bFullscreen:",h];if(e){t.push(",oAlterEgo:",JSON.stringify(a),",oApi:",JSON.stringify(c),",oBags:",o.toString(),",oConfiguration:",JSON.stringify(f),",oFactory:",r.toString(e),",aFullscreenHandlers.length:",d.length,',sTitle:"',g,'"')}t.push("})");return t.join("")};this.updateConfiguration=function(e,t,n){b();u.updateConfiguration(f,e);a.configuration=JSON.stringify(f);this.persist(t,n)};o=new t.Map;v(a.ChipInstanceBags&&a.ChipInstanceBags.results||[]);delete a.Chip;i.debug("Created: "+this,null,"ChipInstance")};return r});
},
	"sap/ushell_abap/pbServices/ui2/Page.js":function(){
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
this.sap=this.sap||{};sap.ui.define(["sap/ushell_abap/pbServices/ui2/Bag","sap/ushell_abap/pbServices/ui2/AllCatalogs","sap/ushell_abap/pbServices/ui2/Utils","sap/ushell_abap/pbServices/ui2/Error","sap/base/Log","sap/ui/thirdparty/jquery"],function(e,t,i,n,a,jQuery){"use strict";var s=function(s,r){var g,u,o,l,c,d=[],f=true,h=true,p=this;function P(){if(h){throw new n(p+": page is just a stub","Page")}}function I(t){var i,n=!!(t.Bags&&t.Bags.results),a=n?t.Bags.results:[],r=t.PageChipInstances&&t.PageChipInstances.results||[],g=a.length,u=r.length;f=!n;delete t.Bags;delete t.Catalog;delete t.PageChipInstances;o=t;h=false;for(i=0;i<g;i+=1){l.put(a[i].id,new e(s,a[i]))}for(i=0;i<u;i+=1){d[i]=s.createChipInstance(r[i],null,null,p)}}function v(e,t){s.getPageBuildingService().updatePage(o,function(t){p.updateScope();if(e){e()}},t)}this.addChipInstance=function(e,t,i,n){var a=s.getPageBuildingService(),r,g;function u(e){var a=s.createChipInstance(e,n?null:t,i,p);d.push(a);p.updateScope();if(n){t(a)}}P();if(e.getChip){g=e;r=g.getChip()}else{r=e}if(r.getRemoteCatalog()){a.createPageChipInstanceFromRawData({pageId:o.id,chipId:r.getId(),configuration:g&&g.getConfiguration()||"",title:g&&g.getTitle(),remoteCatalogId:r.getRemoteCatalog().getId()},u,i)}else{a.createPageChipInstance(o.id,null,r.getId(),g&&g.getTitle(),g&&g.getConfiguration()||"","",u,i)}};this.addChipInstanceReference=function(e,t,i){var n=s.getPageBuildingService();function a(n){var a=s.createChipInstance(n,e.isStub()?null:t,i,p);d.push(a);if(e.isStub()){t(a)}}P();n.clonePageChipInstance(e.getPage().getId(),e.getId(),this.getId(),a,i)};this.exit=function(){var e,t;a.debug("Exiting: "+this,null,"Page");for(e=0,t=d.length;e<t;e+=1){d[e].exit()}o=null;l=new i.Map;c=null;d=[];h=true;a.debug("Exited: "+this,null,"Page")};this.getAllCatalogs=function(){if(!u){u=new t(s,g)}return u};this.getBagIds=function(){if(f){throw new n(p+": page is just a stub, load bags on demand","Page")}return l.keys()};this.getBag=function(t){var i;if(f){throw new n(p+": page is just a stub, load bags on demand","Page")}if(!t){throw new n("Missing bag ID","Page")}if(l.containsKey(t)){return l.get(t)}i=new e(s,{pageId:this.getId(),id:t,$tmp:true});l.put(t,i);return i};this.loadBag=function(t){var i;if(!t){throw new n("Missing bag ID","Page")}if(l.containsKey(t)){i=l.get(t)}else{i=new jQuery.Deferred;l.put(t,i);s.getPageBuildingService().readBag(g,t,function(t){i.resolve(new e(s,t))},function(){i.resolve(new e(s,{pageId:g,id:t,$tmp:true}))})}return i.promise()};this.getCatalog=function(){P();if(!c&&o.catalogId){c=s.createCatalog(o.catalogId)}return c};this.getChipInstances=function(){P();return d.slice()};this.getId=function(){return g};this.getLayout=function(){P();return o.layout};this.setLayout=function(e,t,n){P();if(o.layout===e){if(t){n=n||s.getPageBuildingService().getDefaultErrorHandler();i.callHandler(t,n,true)}return}o.layout=e;v(t,n)};this.getOriginalLanguage=function(){P();return o.originalLanguage};this.getScope=function(){P();return o.scope};this.getTitle=function(){P();return o.title};this.setTitle=function(e,t,n){P();if(o.title===e){if(t){n=n||s.getPageBuildingService().getDefaultErrorHandler();i.callHandler(t,n,true)}return}o.title=e;v(t,n)};this.isCatalogPage=function(){P();return o.isCatalogPage==="X"};this.isPersonalizationLocked=function(){P();return o.isPersLocked==="X"};this.setPersonalizationLocked=function(e,t,a){P();if(s.getPageBuildingService().isPersonalization()){throw new n("Personalization locking cannot be changed at personalization scope","Page")}if(o.isPersLocked==="X"&&e||o.isPersLocked!=="X"&&!e){if(t){a=a||s.getPageBuildingService().getDefaultErrorHandler();i.callHandler(t,a,true)}return}o.isPersLocked=e?"X":" ";v(t,a)};this.isOutdated=function(){P();return o.outdated==="X"};this.isReadOnly=function(){P();return o.isReadOnly==="X"};this.isPersonalized=function(){P();return o.scope==="PERSONALIZATION"};this.isStub=function(){return h};this.load=function(e,t,i){var r;if(!h){throw new n("Page is not a stub anymore","Page")}function u(){if(r===0){a.debug("Initialized: "+p,null,"Page");e()}}function o(){r-=1;u()}s.getPageBuildingService().readPage(g,function(e){var n,s=e.PageChipInstances&&e.PageChipInstances.results||[],g=s.length;a.debug("Loaded: "+p,null,"Page");I(e);r=i?0:g;if(!i){for(n=0;n<g;n+=1){d[n].load(o,t)}}u()},t)};this.remove=function(e,t){this.exit();s.getPageBuildingService().deletePage(g,e,t)};this.removeChipInstance=function(e,t,i){var n=d.indexOf(e);P();if(n>=0){d.splice(n,1);e.remove(function(){p.updateScope();if(t){t.apply(this,arguments)}},function(){d.splice(n,0,e);i=i||s.getPageBuildingService().getDefaultErrorHandler();i.apply(this,arguments)});return true}return false};this.toString=function(e){var t=['Page({sId:"',g,'",bIsStub:',h,",bIsLoadingBagsOnDemand:",f];if(e){t.push(",oAlterEgo:",JSON.stringify(o),",oCatalog:",c?c.toString(e):c,",oFactory:",s.toString(e),",aChipInstances:",JSON.stringify(d))}t.push("})");return t.join("")};this.updateScope=function(){if(s.getPageBuildingService().isPersonalization()){o.scope="PERSONALIZATION"}};if(typeof r==="object"){g=r.id;I(r)}else if(typeof r==="string"){g=r}if(!g){throw new n("Missing ID","Page")}l=new i.Map;a.debug("Created: "+this,null,"Page")};return s});
},
	"sap/ushell_abap/pbServices/ui2/contracts/refresh.js":function(){
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.require(["sap/ushell_abap/pbServices/ui2/Chip"],function(e){"use strict";e.addContract("refresh",function(e){this.attachRefresh=function(t){e.attachRefresh(t)}})});
},
	"sap/ushell_abap/pbServices/ui2/contracts/types.js":function(){
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
(function(){"use strict"})();
},
	"sap/ushell_abap/pbServices/ui2/contracts/visible.js":function(){
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.require(["sap/ushell_abap/pbServices/ui2/Chip","sap/ushell_abap/pbServices/ui2/Error","sap/base/Log"],function(i,e,t){"use strict";i.addContract("visible",function(i){var r=true,n;function s(){try{n(r)}catch(e){t.error(i+": call to visible handler failed: "+(e.message||e.toString()),null,"chip.visible")}}this.attachVisible=function(i){if(typeof i!=="function"){throw new e("Not a function: "+i,"chip.visible")}if(n===i){return}n=i;s()};this.isVisible=function(){return r};return{setVisible:function(i){if(r===i){return}r=i;if(n){s()}}}})});
}
});
//# sourceMappingURL=library-preload.js.map
