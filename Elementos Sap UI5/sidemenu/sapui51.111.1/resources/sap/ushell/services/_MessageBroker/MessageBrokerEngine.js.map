{"version":3,"file":"MessageBrokerEngine.js","names":["sap","ui","define","Log","deepExtend","Application","oAcceptedOrigins","oClientsPerChannel","oActiveClients","MessageBrokerEngine","this","processPostMessage","oPostMessageData","Promise","resolve","reject","oMessageData","oMessageDataBody","body","oMessage","sOrigin","origin","oIframe","source","requestId","request_id","error","_handlePostMessageRequest","then","oResponse","catch","sError","bind","subscribe","sClientId","aSubscribedChannels","data","fnMessageCallback","fnClientConnectionCallback","length","sChannelKey","oChannel","oFullClientData","clientId","subscribedChannels","messageCallback","clientConnectionCallback","iframe","isUI5","channelId","push","oActiveClientData","aConnectedClients","Object","values","keys","_emitEvent","unsubscribe","aChannelClients","oClientKey","oClient","splice","publish","sChannelId","sMessageId","sMessageName","aTargetClientIds","aTargetClients","sClientKey","sTargetClientId","concat","oTargetClient","find","_deepCopy","_sendMessage","sErrorMsg","addAcceptedOrigin","removeAcceptedOrigin","getAcceptedOrigins","getConnectedClients","oNotifiedClients","oParams","messageName","oMessageBody","_buildPostMessageObject","_sendPostMessageToClient","_sendMessageToUI5Client","oRequestingClient","oStoredClient","oRequestingClientClone","_sendMessageToEmbeddedClient","sActionType","correlationMessageId","_callApi","sEndpoint","aParams","apply","sStatus","bPostMsgResponse","sRequestId","targetClientIds","oEndpointParams","oPostMessageParams","oResponseObject","Array","isArray","activeClients","_noresponse_","finally","status","sTargetDomain","bWaitForResponse","postMessageToIframeObject","sObjectType","sServiceName","request","response","event","oObjectParams","sMethod","_buildFunctionName","sPrefix","sType","charAt","toUpperCase","substring","oEntity"],"sources":["MessageBrokerEngine-dbg.js"],"mappings":"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"}