// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log","sap/base/util/deepExtend","sap/base/util/UriParameters","sap/ui/core/Component","sap/ui/core/util/AsyncHintsHelper","sap/ui/thirdparty/jquery","sap/ui/thirdparty/URI","sap/ushell/bootstrap/common/common.load.core-min"],function(e,r,a,n,t,jQuery,i,s){"use strict";function o(e,r){var a=new jQuery.Deferred;e.componentData=r;if(e.manifest===undefined){e.manifest=false}else if(r.technicalParameters&&r.technicalParameters.hasOwnProperty("sap-ui-fl-version")){if(typeof e.manifest==="string"&&e.manifest.length>0){var t=new i(e.manifest);t.addQuery("version",r.technicalParameters["sap-ui-fl-version"][0]);e.manifest=t.toString()}}n.create(e).then(function(e){a.resolve(e)},function(e){a.reject(e)});return a.promise()}function p(e){var r=true;if(e.hasOwnProperty("loadCoreExt")){r=e.loadCoreExt}return r}function u(e,r){var a=true;if(e.hasOwnProperty("loadDefaultDependencies")){a=e.loadDefaultDependencies}if(r&&r.hasOwnProperty("loadDefaultDependencies")){a=a&&r.loadDefaultDependencies}return a}function c(e){var r=e.semanticObject||null;var a=e.action||null;if(!r||!a){return null}return"application-"+r+"-"+a+"-component"}function l(e){return e&&e.indexOf("?")>=0}function f(e){var r=new RegExp("[/]~[\\w-]+~[A-Z0-9]?");return e.replace(r,"")}function d(e){if(!e){return e}var r=e.indexOf("?");if(r>=0){return e.slice(0,r)}return e}function m(r,a,n,t,i){var s="The issue is most likely caused by application "+r,o="Failed to load UI5 component with properties: '"+i+"'.";if(t){o+=" Error likely caused by:\n"+t}else{o+=" Error: '"+a+"'"}if(n==="parsererror"){s+=", as one or more of its resources could not be parsed"}s+=". Please create a support incident and assign it to the support component of the respective application.";e.error(s,o,r)}function y(e){var r=a.fromURL(e||window.location.href).mParams,n=r["sap-xapp-state"],t;delete r["sap-xapp-state"];t={startupParameters:r};if(n){t["sap-xapp-state"]=n}return t}function h(r,a){if(!Array.isArray(a)){return}a.forEach(function(a){var n=String.prototype.toLowerCase.call(a.severity||"");n=["trace","debug","info","warning","error","fatal"].indexOf(n)!==-1?n:"error";e[n](a.text,a.details,r)})}function v(r){if(!Array.isArray(r)){e.error("Ui5ComponentLoader: loadBundle called with invalid arguments");return null}return Promise.all(r.map(function(e){return sap.ui.loader._.loadJSResourceAsync(e)})).catch(function(a){e.error("Ui5ComponentLoader: failed to load bundle resources: ["+r.join(", ")+"]");return Promise.reject(a)})}function P(e,a,n,i,s,o,p,u,c){var l=r({},s);if(!l.asyncHints){l.asyncHints=a?{libs:["sap.ca.scfld.md","sap.ca.ui","sap.me","sap.ui.unified"]}:{}}if(e){l.asyncHints.preloadBundles=l.asyncHints.preloadBundles||[];l.asyncHints.preloadBundles=l.asyncHints.preloadBundles.concat(c)}if(i){l.asyncHints.waitFor=i}if(!l.name){l.name=o}if(p){l.url=d(p)}if(u){l.id=u}if(n&&l.asyncHints){t.modifyUrls(l.asyncHints,f)}return l}function g(e,a,n,t){var i=r({startupParameters:{}},e);if(n){i.config=n}if(t){i.technicalParameters=t}if(l(a)){var s=y(a);i.startupParameters=s.startupParameters;if(s["sap-xapp-state"]){i["sap-xapp-state"]=s["sap-xapp-state"]}}return i}return{constructAppComponentId:c,getParameterMap:y,logAnyApplicationDependenciesMessages:h,logInstantiateComponentError:m,shouldLoadCoreExt:p,shouldLoadDefaultDependencies:u,urlHasParameters:l,removeParametersFromUrl:d,createUi5Component:o,loadBundle:v,createComponentProperties:P,createComponentData:g}},false);
//# sourceMappingURL=utils.js.map