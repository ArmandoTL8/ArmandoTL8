{"version":3,"file":"AppLifeCycleAgent.js","names":["sap","ui","define","AppRuntimePostMessageAPI","AppRuntimeService","extend","UriParameters","URI","Device","BusyIndicator","FesrEnhancer","EventHub","Log","hasher","Core","oUrlParsing","AppRuntimeContext","assert","resources","AppLifeCycleAgent","that","this","sAppResolutionModule","oAppResolution","bEnableAppResolutionCache","oAppResolutionCache","fnCreateApplication","oCachedApplications","oRouterDisableRetriggerApplications","oAppDirtyStateProviders","oAppBackNavigationFunc","oRunningApp","fnRenderApp","oShellUIService","sDatalossMessage","oShellNavigationService","init","sModule","ofnCreateApplication","ofnRenderApp","bEnableCache","sAppId","oAppInfo","undefined","addAppInfoToCache","registerCommHandlers","oServiceCalls","create","executeServiceCallFn","oMessageData","oMsg","JSON","parse","oMessage","data","destroy","store","restore","on","do","oData","componentId","disable","sendMessageToOuterShell","isStateful","isKeepAlive","isIframeValid","isIframeBusy","browserI18n","getTranslationModel","window","navigator","language","getResourceBundle","getText","addEventListener","ushell","Container","getDirtyFlag","Promise","fnResolve","fnReject","sUrl","sAppIntent","bValue","startInteraction","body","getIsScube","fromURL","get","disableCFLPUpdate","replaceHash","sHash","browser","chrome","show","_resetBackNavigationCallback","getEventBus","publish","getAppInfo","then","values","expandSapIntentParams","query","oURLParameters","oResolvedHashFragment","oParsedHash","oResolutionResult","appDestroy","oApplication","sId","e","error","document","URL","stack","resolve","sStorageKey","sCacheId","cleanDirtyStateProviderArray","setAppShortId","oCachedEntry","oApp","_getBackNavigationCallback","getComponentInstance","setVisible","getAsyncDirtyStateProviders","isKeepAliveSupported","deactivate","suspend","getRouter","stop","bRouterDisableRetrigger","setAsyncDirtyStateProviders","setBackNavigation","activate","initialize","oUrlParameters","hasOwnProperty","sAppStateKey","sParameters","oUrlParametersExpanded","sError","addAppParamsToIntent","getApplicationParameters","oStartupParameters","sSapIntentParam","sStartupParametersWithoutSapIntentParam","buildFinalParamsString","sSimpleParams","sIntentParams","sParams","length","startsWith","toString","sMoreParams","appId","removeSearch","getServiceAsync","oNavTargetResolution","resolveHashFragmentLocal","done","parseShellHash","fail","sMsg","fnGetAppInfo","stringify","require","replace","oObj","setComponent","setShellUIService","oService","setShellNavigationService","checkDataLossAndContinue","getNavigationContext","confirm","setDirtyFlag"],"sources":["AppLifeCycleAgent-dbg.js"],"mappings":"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"}