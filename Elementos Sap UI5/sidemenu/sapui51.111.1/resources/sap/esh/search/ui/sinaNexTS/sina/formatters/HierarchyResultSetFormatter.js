/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){function e(e,r,t){if(t){return r?r(e):e}if(!e||!e.then){e=Promise.resolve(e)}return r?e.then(r):e}sap.ui.define(["../ComparisonOperator","../ComplexCondition","../Filter","../HierarchyDisplayType","../HierarchyNodePath","../LogicalOperator","../SearchQuery","../SearchResultSetItemAttribute","../SearchResultSetItemAttributeGroup","../SimpleCondition","./Formatter"],function(r,t,a,i,n,o,u,c,f,s,l){function h(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}}function p(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}function y(e,r,t){if(r)p(e.prototype,r);if(t)p(e,t);Object.defineProperty(e,"prototype",{writable:false});return e}function v(e,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});if(r)d(e,r)}function d(e,r){d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(r,t){r.__proto__=t;return r};return d(e,r)}function b(e){var r=O();return function t(){var a=S(e),i;if(r){var n=S(this).constructor;i=Reflect.construct(a,arguments,n)}else{i=a.apply(this,arguments)}return m(this,i)}}function m(e,r){if(r&&(typeof r==="object"||typeof r==="function")){return r}else if(r!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return g(e)}function g(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function O(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}function S(e){S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function e(r){return r.__proto__||Object.getPrototypeOf(r)};return S(e)}
/*!
   * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	
   */var w=r["ComparisonOperator"];var P=t["ComplexCondition"];var A=a["Filter"];var N=i["HierarchyDisplayType"];var j=n["HierarchyNodePath"];var R=o["LogicalOperator"];var T=u["SearchQuery"];var _=c["SearchResultSetItemAttribute"];var C=f["SearchResultSetItemAttributeGroup"];var D=s["SimpleCondition"];var H=l["Formatter"];var F=function(r){v(a,r);var t=b(a);function a(){h(this,a);return t.apply(this,arguments)}y(a,[{key:"initAsync",value:function e(){return Promise.resolve()}},{key:"format",value:function e(r){return r}},{key:"formatAsync",value:function r(t){try{var a,i;var n=function e(r,t,a,i){var n=[];if(t!==null&&t!==void 0&&t.length&&r){var o=r.getBusinessObjectDataSources();o.forEach(function(e){if(e.hierarchyHelperDatasource===i){n.push(e)}else if(e.hierarchyName===t){return}else{e.attributesMetadata.forEach(function(r){if(r.hierarchyName===a&&r.id===t&&r.hierarchyDisplayType===N.HierarchyResultView||r.hierarchyDisplayType===N.StaticHierarchyFacet){n.push(e)}})}})}return n};var o=function e(r){var t=[];r.titleAttributes.forEach(function(e){if(e instanceof C&&Array.isArray(e.attributes)){e.attributes.forEach(function(e){if(e.attribute&&e.attribute.value.startsWith("sap-icon://")!==true){t.push(e.attribute.valueFormatted)}})}else if(e instanceof _){if(e.value.startsWith("sap-icon://")!==true){t.push(e.valueFormatted)}}});return t.join("; ")};var u=function e(r,t,i,n,o){var u=new D({attribute:t,operator:w.ChildOf,value:i,valueLabel:n});var c=new P({operator:R.And,conditions:[u]});var f=new P({operator:R.And,conditions:[c]});var s=new A({dataSource:o,searchTerm:"*",rootCondition:f,sina:r.sina});r.defaultNavigationTarget=a(s,r.sina)};a=function e(r,t,a){if(t.configuration.updateUrl===true){var i=t.configuration.pageSize||10;var n={top:i,filter:encodeURIComponent(JSON.stringify(r.toJson()))};var o=t.configuration.renderSearchUrl(n);return t._createNavigationTarget({targetUrl:o,label:a||o,target:"_self"})}else{return t._createNavigationTarget({targetFunction:t.filterBasedSearch,label:a||"",filter:r})}};var c=function e(r,t,n,o){var u=new D({attribute:t,operator:w.DescendantOf,value:n,valueLabel:o});var c=new P({operator:R.And,conditions:[u]});var f=new P({operator:R.And,conditions:[c]});i.forEach(function(e){var t=new A({dataSource:e,searchTerm:"*",rootCondition:f,sina:r.sina});r.navigationTargets.push(a(t,r.sina,e.labelPlural))})};if(!(t.query instanceof T)||t.query.top>99){return e(t)}var f=t.query.filter.dataSource;if(t.sina.configuration.FF_hierarchyBreadcrumbs!==true||f.isHierarchyDefinition!==true&&!f.hierarchyHelperDatasource){return e(t)}var s=f.hierarchyAttribute;var l=f.hierarchyName;i=[];if(f.hierarchyHelperDatasource){s=f.hierarchyHelperDatasource.hierarchyAttribute;i.push(f)}else{i=n(f.sina,s,l,f)}if(i.length===0){return e(t)}t.items.forEach(function(e){var r="";var t="";var a="";var n=o(e);var l=e.attributes.find(function(e){return e.id===s});if(l){var h,p;r=l.id;t=l.value;a=n||l.value;if(Array.isArray(e.hierarchyNodePaths)&&e.hierarchyNodePaths.length>0&&e.hierarchyNodePaths[0]instanceof j&&e.hierarchyNodePaths[0].name===r&&Array.isArray(e.hierarchyNodePaths[0].path)&&e.hierarchyNodePaths[0].path.length>0){var y=e.hierarchyNodePaths[0].path;var v=y[y.length-1];t=v.id}u(e,r,t,a,f);if(((h=i[0])===null||h===void 0?void 0:(p=h.attributeMetadataMap[r])===null||p===void 0?void 0:p.hierarchyDisplayType)==N.HierarchyResultView){c(e,r,t,a)}}});return e(t)}catch(e){return Promise.reject(e)}}}]);return a}(H);var E={__esModule:true};E.HierarchyResultSetFormatter=F;return E})})();
//# sourceMappingURL=HierarchyResultSetFormatter.js.map