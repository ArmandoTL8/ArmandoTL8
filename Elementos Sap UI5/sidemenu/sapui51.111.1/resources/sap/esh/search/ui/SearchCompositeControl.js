/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["./error/ErrorHandler","./i18n","sap/ui/model/resource/ResourceModel","sap/esh/search/ui/controls/SearchFieldGroup","sap/esh/search/ui/SearchModel","sap/esh/search/ui/controls/SearchLayoutResponsive","sap/esh/search/ui/controls/SearchResultContainer","sap/esh/search/ui/controls/SearchResultList","sap/esh/search/ui/controls/SearchResultTable","sap/esh/search/ui/controls/SearchResultGrid","sap/esh/search/ui/controls/SearchSpreadsheet","sap/esh/search/ui/controls/SearchText","sap/esh/search/ui/controls/SearchLink","sap/esh/search/ui/controls/SearchCountBreadcrumbs","sap/esh/search/ui/controls/SearchResultListItem","sap/esh/search/ui/controls/CustomSearchResultListItem","sap/esh/search/ui/controls/SearchTileHighlighter","sap/esh/search/ui/controls/SearchFilterBar","sap/esh/search/ui/controls/SearchFacetFilter","sap/esh/search/ui/SearchHelper","sap/ui/core/Control","sap/ui/core/InvisibleText","sap/ui/core/Icon","sap/ui/core/IconPool","sap/ui/layout/VerticalLayout","sap/ui/model/BindingMode","sap/m/Button","sap/m/library","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/m/ToggleButton","sap/m/Bar","sap/m/IconTabBar","sap/m/IconTabFilter","sap/m/OverflowToolbarLayoutData","sap/m/OverflowToolbar","sap/m/ToolbarSeparator","sap/m/Label","sap/m/Text","sap/m/Column","sap/m/ColumnListItem","sap/m/CustomListItem","sap/m/ActionSheet","sap/m/FlexBox","sap/m/GenericTile","sap/m/TileContent","sap/m/ViewSettingsDialog","sap/m/ViewSettingsItem","sap/m/MessagePopover","sap/m/MessageItem","sap/m/HBox","sap/m/VBox","sap/f/GridContainer","sap/f/GridContainerSettings","sap/f/GridContainerItemLayoutData","sap/m/TablePersoController","./error/errors","./sinaNexTS/providers/abap_odata/UserEventLogger","sap/base/Log","sap/m/IllustratedMessage","sap/m/IllustratedMessageType","sap/m/IllustratedMessageSize","sap/esh/search/ui/error/errors","sap/ui/core/ResizeHandler","./controls/OpenShowMoreDialog","sap/m/ToolbarSpacer","./UIEvents"],function(e,t,r,a,s,i,o,n,l,u,h,c,d,g,p,f,v,S,m,b,y,C,D,T,R,w,I,B,M,L,P,F,V,A,E,x,H,U,G,O,_,N,j,z,k,W,K,Q,q,J,X,Y,Z,ee,te,re,ae,se,ie,oe,ne,le,ue,he,ce,de,ge){function pe(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}function fe(e,t){var r=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=ve(e))||t&&e&&typeof e.length==="number"){if(r)e=r;var a=0;var s=function(){};return{s:s,n:function(){if(a>=e.length)return{done:true};return{done:false,value:e[a++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=true,o=false,n;return{s:function(){r=r.call(e)},n:function(){var e=r.next();i=e.done;return e},e:function(e){o=true;n=e},f:function(){try{if(!i&&r.return!=null)r.return()}finally{if(o)throw n}}}}function ve(e,t){if(!e)return;if(typeof e==="string")return Se(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Se(e,t)}function Se(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,a=new Array(t);r<t;r++){a[r]=e[r]}return a}var me=pe(e);var be=pe(t);var ye=v["Highlighter"];var Ce=B["ButtonType"];var De=B["ToolbarDesign"];var Te=B["PlacementType"];var Re=B["OverflowToolbarPriority"];var we=B["ListMode"];var Ie=B["ListType"];var Be=B["PopinDisplay"];var Me=B["FlexJustifyContent"];var Le=B["PopinLayout"];var Pe=ae["ProgramError"];var Fe=se["UserEventType"];var Ve=ce["openShowMoreDialog"];var Ae=pe(ge);var Ee=y.extend("sap.esh.search.ui.SearchCompositeControl",{renderer:{apiVersion:2,render:function e(t,r){t.openStart("div",r);t.style("width","100%");t.style("height","100%");t.openEnd();var a=r.getAggregation("content");if(a){for(var s=0;s<a.length;s++){t.renderControl(a[s])}}t.close("div")}},metadata:{library:"sap.esh.search.ui",dnd:{draggable:true,droppable:false},properties:{cssClass:{type:"string"},searchTerm:{type:"string",group:"Misc",defaultValue:""},searchOnStart:{type:"boolean",group:"Behavior",defaultValue:true},filterRootCondition:{type:"object",group:"Misc"},sinaConfiguration:{type:"object",group:"Misc"},dataSource:{type:"string",group:"Misc"},resultViewTypes:{type:"string[]",group:"Misc",defaultValue:["searchResultList","searchResultTable"]},resultViewType:{type:"string",group:"Misc",defaultValue:"searchResultList"},resultViewSettings:{settings:{resultViewTypes:"string[]",resultViewType:"string"},group:"Misc",defaultValue:{resultViewTypes:["searchResultList","searchResultTable"],resultViewType:"searchResultList"}},tabStripsFormatter:{type:"function",group:"Misc"},folderMode:{type:"boolean",group:"Misc",defaultValue:false},autoAdjustResultViewTypeInFolderMode:{type:"boolean",group:"Misc",defaultValue:false},enableQueryLanguage:{type:"boolean",group:"Misc",defaultValue:false},applicationComponent:{type:"string",group:"Misc",defaultValue:"HAN-AS-INA-UI"},facetPanelResizable:{type:"boolean",group:"Misc",defaultValue:false},facetPanelWidthInPercent:{type:"float",group:"Misc",defaultValue:25},getCustomNoResultScreen:{type:"function",group:"Misc"},overwriteBrowserTitle:{type:"boolean",group:"Misc"},defaultDataSource:{type:"string",group:"Misc"},optimizeForValueHelp:{type:"boolean",group:"Misc"}},aggregations:{content:{singularName:"content",multiple:true}},events:{searchStarted:{},searchFinished:{}}},constructor:function e(t,a){var i=this;var o=new me({model:null});var n;var l=false;try{var u=Ee.unifyInputParameters(t,a);t=u.sId;a=u.settings;n=a["model"]||a["searchModel"];if(!n){n=new s({configuration:a})}else{n.config.id=t}o.setSearchModel(n);var h=Ee.getUI5ControlSettings(n.config);y.prototype.constructor.call(this,t,h);this.errorHandler=o;this._oLogger=ie.getLogger("sap.esh.search.ui.SearchCompositeControl");this.addStyleClass("sapUshellSearchInputHelpPage");if(n.config.optimizeForValueHelp){this.addStyleClass("sapUshellSearchInputHelpPageValueHelp")}this.setModel(n);this.setModel(new r({bundle:be}),"i18n");var c=this;this.oFocusHandler=new b.SearchFocusHandler(c);n.focusHandler=this.oFocusHandler;n.config.performanceLogger.enterMethod({name:"createContent"},{isSearch:true});l=true;this.createContent();n.config.performanceLogger.leaveMethod({name:"createContent"});l=false;he.register(this,function(){i._resizeHandler()});this.initSearch()}catch(e){o.onError(e);throw e}finally{if(l){n.config.performanceLogger.leaveMethod({name:"createContent"});l=false}}},initSearch:function e(){var t=this;var r=this.getModel();r.config.performanceLogger.enterMethod({name:"init search"},{isSearch:true});r.searchUrlParser.parse().then(function(){r.initAsync().then(function(){if(t.getProperty("searchOnStart")&&!r.config.isUshell){r._firePerspectiveQuery()}if(r){r.config.performanceLogger.leaveMethod({name:"init search"})}})})},exit:function e(){if(this.oErrorPopover){}if(this.oFilterBar){this.oFilterBar.destroy()}if(this.noResultScreen){this.noResultScreen.destroy()}if(this.oTablePersoController&&this.oTablePersoController.getTablePersoDialog()){this.oTablePersoController.getTablePersoDialog().destroy()}if(this!==null&&this!==void 0&&this.oSearchPage["oFacetDialog"]){this.oSearchPage["oFacetDialog"].destroy()}var t=this.getModel();t.unsubscribe(Ae.ESHSearchStarted,this.onAllSearchStarted,this);t.unsubscribe(Ae.ESHSearchFinished,this.onAllSearchFinished,this)},createContent:function e(){var t=this;var r=this.getModel();if(!r.config.isUshell){this.oSearchFieldGroup=new a(this.getId()+"-searchInputHelpPageSearchFieldGroup");this.oSearchFieldGroup.setCancelButtonActive(false);this.oSearchFieldGroup.addStyleClass("sapUshellSearchInputHelpPageSearchFieldGroup");this.oSearchFieldGroup.input.setShowValueHelp(false);r.setProperty("/inputHelp",this.oSearchFieldGroup.input);if(r.config.optimizeForValueHelp){this.oSearchFieldGroup.setActionsMenuButtonActive(true);this.oSearchFieldGroup.setSelectQsDsActive(true);this.oSearchFieldGroup.addStyleClass("sapUiTinyMarginBegin");this.oSearchFieldGroup.addStyleClass("sapUiTinyMarginEnd")}}if(r!==null&&r!==void 0&&r.subscribe){if(!this.subscribeDone_SearchStarted){r.subscribe(Ae.ESHSearchStarted,this.onAllSearchStarted,this);this.subscribeDone_SearchStarted=true}if(!this.subscribeDone_SearchFinished){r.subscribe(Ae.ESHSearchFinished,this.onAllSearchFinished,this);this.subscribeDone_SearchFinished=true}}if(this.oSearchFieldGroup){if(r){r.subscribe(Ae.ESHSearchFinished,function(){t.oSearchFieldGroup.input.setValue(r.getSearchBoxTerm())},this)}}this.oFilterButton=this.assembleFilterButton();this.oDataSourceTabBar=this.assembleDataSourceTabBar();var s=[this.oFilterButton,this.oDataSourceTabBar];var i=this.assembleGenericButtonsToolbar();this.oGenericItemsToolbar=i.toolbar;this.oSearchBar=new x(this.getId()+"-searchBar",{width:"100%",visible:{parts:[{path:"/count"}],formatter:function e(t){var a;return t!==0||(r===null||r===void 0?void 0:(a=r.config)===null||a===void 0?void 0:a.showSearchBarForNoResults)}},content:s.concat(this.oGenericItemsToolbar),design:De.Transparent});this.oSearchBar.addStyleClass("sapUshellSearchBar");if(!i.hasCustomButtons){this.oDataSourceTabBar.addStyleClass("sapUshellSearchBarHasNoCustomButtons")}if(r.config.optimizeForValueHelp){this.oSearchBar.addStyleClass("sapUshellSearchBarValueHelp")}this.oFilterBar=new S(this.getId()+"-searchFilterBar");this.oSearchPage=this.createSearchPage(this.getId());if(this.oSearchFieldGroup){this["addContent"](this.oSearchFieldGroup)}var o=fe(this.oSearchPage),n;try{for(o.s();!(n=o.n()).done;){var l=n.value;this["addContent"](l)}}catch(e){o.e(e)}finally{o.f()}},onAfterRendering:function e(){var t=this===null||this===void 0?void 0:this.getModel();if(t!==null&&t!==void 0&&t.subscribe){if(!this.subscribeDone_SearchStarted){t.subscribe(Ae.ESHSearchStarted,this.onAllSearchStarted,this);this.subscribeDone_SearchStarted=true}if(!this.subscribeDone_SearchFinished){t.subscribe(Ae.ESHSearchFinished,this.onAllSearchFinished,this);this.subscribeDone_SearchFinished=true}}},assembleFilterButton:function e(){var t=this;var r=this.getModel();var a=new P(this.getId()+"-searchBarFilterButton",{icon:T.getIconURI("filter"),tooltip:{parts:[{path:"/facetVisibility"}],formatter:function e(t){return t?be.getText("hideFacetBtn_tooltip"):be.getText("showFacetBtn_tooltip")}},pressed:{path:"/facetVisibility"},press:function e(r){var a=t.getModel();t.searchContainer.setProperty("animateFacetTransition",true);a.setFacetVisibility(r.getParameter("pressed"));t.searchContainer.setProperty("animateFacetTransition",false)},visible:{parts:[{path:"/businessObjSearchEnabled"},{path:"/count"}],formatter:function e(t,a){if(a===0){return false}return!sap.ui.Device.system.phone&&!r.config.optimizeForValueHelp&&t}}});a.addStyleClass("searchBarFilterButton");a.setLayoutData(new E({priority:Re.NeverOverflow}));return a},assembleCountBreadcrumbsHiddenElement:function e(){var t=new C("",{text:{parts:[{path:"/count"},{path:"/nlqSuccess"},{path:"/nlqDescription"}],formatter:function e(t,r,a){if(r){return a}if(typeof t!=="number"){return""}return be.getText("results_count_for_screenreaders",[t.toString()])}}});return t},assembleGenericButtonsToolbar:function e(){var t=this,r;var a=this.getModel();var s=new I((this.getId()?this.getId()+"-":"")+"dataExportButton",{icon:"sap-icon://download",tooltip:"{i18n>exportData}",type:Ce.Transparent,visible:{parts:[{path:"/count"},{path:"/tableColumns"}],formatter:function e(r,a){var s=t.getModel();if(s&&s.isHomogenousResult()&&r>0&&a.length>0){return true}else{return false}}},press:function e(){if(t.searchSpreadsheet===undefined){t.searchSpreadsheet=new h("ushell-search-spreadsheet")}t.searchSpreadsheet.onExport()}}).addStyleClass("sapUshellSearchTableDataExportButton");s.setLayoutData(new E({priority:Re.High}));this.assembleResultViewSwitch();var i=new I((this.getId()?this.getId()+"-":"")+"tableSortButton",{icon:"sap-icon://sort",tooltip:"{i18n>sortTable}",type:Ce.Transparent,visible:{parts:[{path:"/count"},{path:"/sortableAttributes"}],formatter:function e(r,a){var s=t.getModel();if(s&&s.isHomogenousResult()&&r>0&&a.length>0){return true}else{return false}}},press:function e(){t.openSortDialog()}});i.addStyleClass("sapUshellSearchTableSortButton");i.setLayoutData(new E({priority:Re.High}));var o=new I((this.getId()?this.getId()+"-":"")+"tablePersonalizeButton",{icon:"sap-icon://action-settings",tooltip:"{i18n>personalizeTable}",type:Ce.Transparent,enabled:{parts:[{path:"/resultViewType"}],formatter:function e(t){return t==="searchResultTable"}},visible:{parts:[{path:"/count"},{path:"/tableColumns"}],formatter:function e(r,a){var s=t.getModel();if(s&&s.isHomogenousResult()&&r>0&&a.length>0){return true}else{return false}}},press:function e(){t.oTablePersoController.openDialog()}});o.addStyleClass("sapUshellSearchTablePersonalizeButton");o.setLayoutData(new E({priority:Re.High}));var n=[s,i,o];var l=a===null||a===void 0?void 0:(r=a.config)===null||r===void 0?void 0:r.isUshell;if(l){var u=this.assembleShareButton();u.setLayoutData(new E({priority:Re.High}));n.push(u)}n.push(this.resultViewSwitch);var c=false;try{var d;var g=[new de];var p=a===null||a===void 0?void 0:(d=a.config)===null||d===void 0?void 0:d.getCustomToolbar();if((p===null||p===void 0?void 0:p.length)>0){c=true;p.push(new H("",{visible:{parts:[{path:"/resultViewSwitchVisibility"},{path:"/count"}],formatter:function e(t,r){return t&&r!==0}}}))}g=g.concat(p);n=g.concat(n)}catch(e){var f=new ue.ConfigurationExitError("getCustomToolbar",a.config.applicationComponent,e);this.errorHandler.onError(f)}var v=new x(this.getId()+"-searchBar--genericButtonsToolbar",{content:n});v.addStyleClass("sapElisaSearchGenericButtonsToolbar");return{toolbar:v,hasCustomButtons:c}},assembleShareButton:function e(){var t=this.getModel();var r=new sap.ushell.ui["footerbar"].AddBookmarkButton((this.getId()?this.getId()+"-":"")+"bookmarkButton",{width:"auto",beforePressHandler:function e(){var a={url:document.URL,title:t.getDocumentTitle(),icon:T.getIconURI("search")};r.setAppData(a)}});var a=new I((this.getId()?this.getId()+"-":"")+"emailButton",{icon:"sap-icon://email",text:be.getText("eMailFld"),width:"auto",press:function e(){sap.m.URLHelper.triggerEmail(null,t.getDocumentTitle(),document.URL)}});var s=new j((this.getId()?this.getId()+"-":"")+"shareActionSheet",{placement:Te.Bottom,buttons:[r,a]});this.addDependent(s);var i=new I((this.getId()?this.getId()+"-":"")+"shareButton",{icon:"sap-icon://action",tooltip:be.getText("shareBtn"),press:function e(){s.openBy(i)}});return i},assembleDataSourceTabBar:function e(){var t=this;var r=new V((this.getId()?this.getId()+"-":"")+"dataSourceTabBar",{expandable:false,stretchContentHeight:false,visible:{parts:[{path:"/facetVisibility"},{path:"/count"},{path:"/businessObjSearchEnabled"}],formatter:function e(t,r,a){return!t&&r>0&&a}},select:function e(a){var s=t.getModel();if(s.config.searchScopeWithoutAll){return}if(s.getDataSource()!==a.getParameter("item").getBindingContext().getObject()){s.setDataSource(a.getParameter("item").getBindingContext().getObject())}else{if(r["selectFired"]){r["selectFired"]=false}else{r["selectFired"]=true;r.fireSelect({item:a.getParameter("item")})}}}});r.data("sap-ui-fastnavgroup","false",true);r.addStyleClass("searchTabStripBar");r.addStyleClass("searchDataSourceTabStripBar");r.addStyleClass("sapUiSmallMarginBegin");r.setAriaTexts({headerLabel:be.getText("dataSources"),headerDescription:be.getText("dataSources")});r.bindAggregation("items",{path:"/tabStrips/strips",template:new A("",{key:"{id}",text:"{labelPlural}"})});r.addEventDelegate({onBeforeRendering:function e(){if(t.getModel().getProperty("/tabStrips")){if(r.getSelectedKey()!==t.getModel().getProperty("/tabStrips/selected").id){r.setSelectedKey(t.getModel().getProperty("/tabStrips/selected").id)}}}});return r},assembleResultViewSwitch:function e(){var t=this;if(this.resultViewSwitch!==undefined){return}this.resultViewSwitch=new M(this.getId()+"-ResultViewType",{selectedKey:"{/resultViewType}",visible:{parts:[{path:"/resultViewSwitchVisibility"},{path:"/count"}],formatter:function e(t,r){return t&&r!==0}},selectionChange:function e(r){var a=r.getParameter("item").getKey();t.setResultViewType(a);t.assignDragDropConfig()}});this.resultViewSwitch.bindAggregation("items",{path:"/resultViewTypes",factory:function e(t,r){var a=new L("",{visible:true});switch(r.getObject()){case"searchResultList":a.setIcon("sap-icon://list");a.setTooltip(be.getText("displayList"));a.setKey("searchResultList");break;case"searchResultTable":a.setIcon("sap-icon://table-view");a.setTooltip(be.getText("displayTable"));a.setKey("searchResultTable");break;case"searchResultGrid":a.setIcon("sap-icon://grid");a.setTooltip(be.getText("displayGrid"));a.setKey("searchResultGrid");break;default:a.setVisible(false)}return a}});this.resultViewSwitch.addStyleClass("sapUshellSearchResultViewSwitch");this.resultViewSwitch.setLayoutData(new E({priority:Re.High}))},isShowMoreFooterVisible:function e(){var t=this.getModel();return t.getProperty("/boCount")>t.getProperty("/boResults").length},assembleCenterArea:function e(t){var r=this;this.sortDialog=this.assembleSearchResultSortDialog();this.searchResultList=this.assembleSearchResultList(t);this.searchResultTable=this.assembleSearchResultTable(t);this.searchResultTable["addDelegate"]({onBeforeRendering:function e(){r.updateTableLayout()},onAfterRendering:function e(){var t=$(r.searchResultTable.getDomRef()).find("table > thead > tr:first");if(t){t.attr("aria-labelledby",r.countBreadcrumbsHiddenElement.getId())}}});this.searchResultGrid=this.assembleSearchResultGrid(t);this.appSearchResult=this.assembleAppSearch(t);this.showMoreFooter=this.assembleShowMoreFooter();var a=[this.sortDialog,this.searchResultList,this.searchResultTable,this.searchResultGrid,this.appSearchResult,this.showMoreFooter,this.countBreadcrumbsHiddenElement];return a},assembleSearchResultSortDialog:function e(){var t=this;var r=new K(this.getId()+"-sortDialog",{sortDescending:{parts:[{path:"/orderBy"}],formatter:function e(t){return Object.keys(t).length===0||t.sortOrder==="DESC"}},confirm:function e(a){var s=a.getParameter("sortItem");var i=a.getParameter("sortDescending");var o=t.getModel();if(typeof s==="undefined"||s.getBindingContext().getObject().attributeId==="DEFAULT_SORT_ATTRIBUTE"){r.setSortDescending(true);o.resetOrderBy(true)}else{o.setOrderBy({orderBy:s.getBindingContext().getObject().attributeId,sortOrder:i===true?"DESC":"ASC"},true)}},cancel:function e(){},resetFilters:function e(){setTimeout(function(){r.setSortDescending(true);r.setSelectedSortItem("searchSortAttributeKeyDefault")},500)}});return r},assembleSearchResultGrid:function e(t){var r=this.getModel();var a;if(typeof r.config.customGridView==="function"){a=r.config.customGridView()}else{var s=new ee("",{rowSize:"11rem",columnSize:"11rem",gap:"0.5rem"});a=new u(t+"-ushell-search-result-grid",{layout:s,snapToRow:true})}if(!r.config.eshUseExtendedChangeDetection){a.bUseExtendedChangeDetection=false}a.bindProperty("visible",{parts:["/resultViewType","/count"],formatter:function e(t,r){return t==="searchResultGrid"&&r!==0}});a.addStyleClass("sapUshellSearchGrid");return a},assembleSearchResultTable:function e(t){var r=this;var a=this;var s=new l(t+"-ushell-search-result-table",{mode:{parts:[{path:"/multiSelectionEnabled"}],formatter:function e(t){return t===true?we.MultiSelect:we.None}},noDataText:"{i18n>noCloumnsSelected}",visible:{parts:[{path:"/resultViewType"},{path:"/count"}],formatter:function e(t,r){return t==="searchResultTable"&&r!==0}},popinLayout:Le.GridLarge,rememberSelections:false,selectionChange:function e(){var t=r.getModel();t.updateMultiSelectionSelected()}});s.bindAggregation("columns",{path:"/tableColumns",factory:function e(r,a){var s=a.getObject();var i=new O(t+"-"+s.key,{header:new U("",{text:"{name}"}),visible:true,width:"{width}"});return i}});s.bindItems({path:"/tableRows",factory:function e(t,r){return a.assembleTableItems(r)}});s.addEventDelegate({onAfterRendering:function e(){r.updateTablePersoController();var t=$(r.getDomRef());t.find("table tbody tr").each(function(){var e=$(this);var t=sap.ui.getCore().byId(e.attr("id"));if(t){var r=t.getAriaLabelledBy();if($.inArray(a.countBreadcrumbsHiddenElement.getId(),r)===-1){t.addAriaLabelledBy(a.countBreadcrumbsHiddenElement)}}return false});t.find(".sapMListTblCell").each(function(){var e=$(this)[0];b.attachEventHandlersForTooltip(e)});t.find(".sapMListTblSubCntVal").each(function(){var e=$(this)[0];b.attachEventHandlersForTooltip(e)})}});return s},assembleTableItems:function e(t){var r=t.getObject();if(r.type==="footer"){return new N("",{visible:false})}return this.assembleTableMainItems(r,t.getPath())},assembleTableMainItems:function e(t,r){var a=this;var s=r+"/cells";var i=new _("",{selected:{path:"selected"}}).addStyleClass("sapUshellSearchTable");i.bindAggregation("cells",{path:s,factory:function e(t,r){if(r.getObject().isTitle){var s="";var i;var o=false;var n=true;var l=r.getObject().titleNavigation;if(l){o=l.hasTargetFunction();s=l.getHref();i=l.getTarget()}if((typeof s!=="string"||s.length===0)&&o===false){n=false}var u=new d("",{text:{path:"value"},enabled:n,press:function e(){var t=r.getObject().titleNavigation;if(t){t.performNavigation({trackingOnly:true})}}});u.setHref(s);var h=r.getObject().titleIconUrl;if(h){var g=new D("",{src:h});u.setAggregation("icon",g)}u.addStyleClass("sapUshellSearchResultListItem-MightOverflow");u.addStyleClass("sapUshellSearchTableTitleLink");if(i){u.setTarget(i)}var p=u;var f=r.getObject().titleInfoIconUrl;if(f){var v=new D("",{src:f,tooltip:be.getText("collectionShared")}).addStyleClass("sapUshellSearchTableTitleInfoIcon");if(!n){v.addStyleClass("sapUshellSearchTableTitleInfoIconDisabled")}p=new X("",{items:[u,v]})}return p}if(r.getObject().isRelatedApps){var S=r.getObject().navigationObjects;var m=[];var b;var y=function e(t,r){r.performNavigation()};for(var C=0;C<S.length;C++){var T=S[C];b=new I("",{text:T.getText(),tooltip:T.getText()});b.attachPress(T,y);m.push(b)}var R=new I("",{icon:"sap-icon://action",press:function e(){var t=new j("",{buttons:m,placement:Te.Auto});t.openBy(R)}});R.addStyleClass("sapElisaSearchTableRelatedAppsButton");return R}if(r.getObject().isExtendTableColumnCell){var w=a.getModel();return w.config.extendTableColumn.bindingFunction(r.getObject())}var B=new c("",{text:{path:"value"},isForwardEllipsis4Whyfound:true}).addStyleClass("sapUshellSearchResultListItem-MightOverflow");if(r.getObject().icon){var M=new D("",{src:r.getObject().icon});B.setAggregation("icon",M)}return B}});return i},assembleShowMoreFooter:function e(){var t=this;var r=new I(this.getId()+"-resultview-moreFooter-button",{text:"{i18n>showMore}",type:Ce.Transparent,press:function e(){var r=t.getModel();r.setProperty("/focusIndex",r.getTop());var a=r.getTop()+r.pageSize;r.setTop(a);r.eventLogger.logEvent({type:Fe.SHOW_MORE})}});r.addStyleClass("sapUshellResultListMoreFooter");var a=new z(this.getId()+"-resultview-moreFooter",{visible:{parts:[{path:"/boCount"},{path:"/boResults"}],formatter:function e(t,r){return r.length<t}},justifyContent:Me.Center});a.addStyleClass("sapUshellResultListMoreFooterContainer");a.addItem(r);return a},assembleSearchResultList:function e(t){var r=this;var a=new n(t+"-ushell-search-result-list",{mode:we.None,width:"auto",showNoData:false,visible:{parts:[{path:"/resultViewType"},{path:"/count"}],formatter:function e(t,r){return t==="searchResultList"&&r!==0}}});a.bindItems({path:"/results",factory:function e(t,a){return r.assembleListItem(t,a)}});return a},assembleAppSearch:function e(t){var r=this;var a=new ee("",{rowSize:"5.5rem",columnSize:"5.5rem",gap:"0.25rem"});var s=new Z(t+"-ushell-search-result-app",{layout:a,snapToRow:true,visible:{parts:[{path:"/count"}],formatter:function e(t){var a=r.getModel();return(a.isAppCategory()||a.isUserCategoryAppSearchOnlyWithoutBOs())&&t!==0}},items:{path:"/appResults",factory:function e(t,a){var s=r.getModel();if(s.isAppCategory()||s.isUserCategoryAppSearchOnlyWithoutBOs()){var i=a.getObject();var o=i.visualization;var n=s.uShellVisualizationInstantiationService;var l=n.instantiateVisualization(o);l.attachPress(function(){s.eventLogger.logEvent({type:Fe.TILE_NAVIGATE,tileTitle:o.title,targetUrl:o.targetURL})});l.addEventDelegate({onAfterRendering:r.highlightTile});l.setActive(false,true);l.setLayoutData(new te(l.getLayout()));return l}return new G("",{text:""})}}});s.addStyleClass("sapUshellSearchGridContainer");var i=new I({text:"{i18n>showMore}",type:Ce.Transparent,visible:{parts:[{path:"/appCount"},{path:"/appResults"}],formatter:function e(t,a){var s=r.getModel();return(s.isAppCategory()||s.isUserCategoryAppSearchOnlyWithoutBOs())&&a.length<t}},press:function e(){var t=r.getModel();var a=t.getTop()+t.pageSize;t.setProperty("/focusIndex",t.getTop());t.setTop(a);t.eventLogger.logEvent({type:Fe.SHOW_MORE})}});i.addStyleClass("sapUshellResultListMoreFooter");var o=new R("",{width:"100%",visible:{parts:[{path:"/count"}],formatter:function e(t){var a=r.getModel();return(a.isAppCategory()||a.isUserCategoryAppSearchOnlyWithoutBOs())&&t!==0}},content:[s,i]});o.addStyleClass("sapUshellResultApps");return o},highlightTile:function e(t){var r;var a=(r=t["srcControl"])===null||r===void 0?void 0:r.getAggregation("content");if(a){var s=a.findAggregatedObjects(true,function(e){return e.isA("sap.m.GenericTile")||e.isA("sap.f.Card")});if(s.length===0&&a.getComponentInstance){s=a.getComponentInstance().findAggregatedObjects(true,function(e){return e.isA("sap.m.GenericTile")||e.isA("sap.f.Card")})}if(s.length>0){var i;var o=s[0];var n=new ye;n.setHighlightTerms((i=t["srcControl"])===null||i===void 0?void 0:i.getModel().getProperty("/uiFilter/searchTerm"));n.highlight(o)}}},assembleAppContainerResultListItem:function e(t){var r=this;var a=new ee("",{rowSize:"5.5rem",columnSize:"5.5rem",gap:"0.25rem"});var s="".concat(t,"-appItemContainer");var i=new Z(s,{layout:a,snapToRow:true,items:{path:"/appResults",factory:function e(t,a){var s=r.getModel();if(!s.isAppCategory()){var i=a.getObject();var o=i.visualization;var n=s.uShellVisualizationInstantiationService;var l=n.instantiateVisualization(o);l.attachPress(function(){var e=r.getModel();e.eventLogger.logEvent({type:Fe.TILE_NAVIGATE,tileTitle:o.title,targetUrl:o.targetURL})});l.addEventDelegate({onAfterRendering:r.highlightTile});l.setActive(false,true);l.setLayoutData(new te(l.getLayout()));return l}return new G(t,{text:""})}}});i.addStyleClass("sapUshellSearchGridContainer");i.addEventDelegate({onAfterRendering:function e(){var t=r.getModel();if(i.getDomRef().clientWidth===0){return}var a=i.getDomRef().clientWidth-176;var o=Math.floor(a/184);var n=i.getItems();var l=t.getProperty("/appCount");var u=t.getProperty("/boCount");if(n.length>o+1){var h=0,c=0;for(;c<n.length;c++){h=h+n[c].getDomRef().clientWidth+8;if(h>a){break}}var d=t.getProperty("/appResults");t.setProperty("/appResults",d.slice(0,c))}else{var g=n[n.length-1];if(l>o&&!g.hasStyleClass("sapUshellSearchResultListItemAppsShowMore")){var p="".concat(s,"--showMore");var f=new k(p,{tileContent:new W("".concat(p,"--content"),{content:new G("".concat(p,"--content--text"),{text:be.getText("showMoreApps")})}),press:function e(){var t=r.getModel();t.setDataSource(t.appDataSource)}});f.addStyleClass("sapUshellSearchResultListItemAppsShowMore");i.addItem(f);t.setProperty("/resultViewType","appSearchResult");t.setProperty("/resultViewType","searchResultList");t.setProperty("/boCount",0);t.setProperty("/boCount",u)}}}},i);var o=new N("".concat(this.getId(),"-appItem"),{content:i});o.addStyleClass("sapUshellSearchResultListItem");o.addStyleClass("sapUshellSearchResultListItemApps");o.addEventDelegate({onAfterRendering:function e(){var t=$(o.getDomRef());t.removeAttr("tabindex");t.removeAttr("role");t.attr("aria-hidden","true")}},o);return o},assembleResultListItem:function e(t,r){var a=this.getModel();var s=a.config.getDataSourceConfig(r.dataSource);var i={dataSource:r.dataSource,title:"{title}",titleDescription:"{titleDescription}",titleNavigation:"{titleNavigation}",type:"{dataSourceName}",imageUrl:"{imageUrl}",imageFormat:"{imageFormat}",imageNavigation:"{imageNavigation}",geoJson:"{geoJson}",attributes:{path:"itemattributes"},navigationObjects:{path:"navigationObjects"},selected:{path:"selected"},expanded:{path:"expanded"},positionInList:{path:"positionInList"},resultSetId:{path:"resultSetId"},layoutCache:{path:"layoutCache"},titleIconUrl:{path:"titleIconUrl"},titleInfoIconUrl:{path:"titleInfoIconUrl"}};var o;if(s.searchResultListItemControl){o=new s.searchResultListItemControl(i)}else if(s.searchResultListItemContentControl){i["content"]=new s.searchResultListItemContentControl;o=new f("".concat(t,"--customItemContent"),i)}else{o=new p("".concat(t,"--itemContent"),i)}if(o.setCountBreadcrumbsHiddenElement){o.setCountBreadcrumbsHiddenElement(this.countBreadcrumbsHiddenElement)}var n=new N("".concat(t,"--customListItem"),{content:o,type:Ie.Inactive});n.addStyleClass("sapUshellSearchResultListItem");if(o.setParentListItem){o.setParentListItem(n)}return n},assembleListItem:function e(t,r){var a=r.getObject();if(a.type==="footer"){return new N("".concat(t,"-footerItem"))}else if(a.type==="appcontainer"){this.appResultListItem=this.assembleAppContainerResultListItem(t);return this.appResultListItem}return this.assembleResultListItem(t,a)},assignDragDropConfig:function e(){var t=this.getDragDropConfig();if(t.length===0){t=this._dragDropConfig||[]}if(t.length>0){var r;switch(this.getResultViewType()){case"appSearchResult":break;case"searchResultList":if(this.searchResultList){r=this.searchResultList}break;case"searchResultTable":if(this.searchResultTable){r=this.searchResultTable}break;case"searchResultGrid":if(this.searchResultGrid){r=this.searchResultGrid}break}if(r){var a=fe(t),s;try{for(a.s();!(s=a.n()).done;){var i=s.value;r.addDragDropConfig(i)}}catch(e){a.e(e)}finally{a.f()}}}},addDragDropConfig:function e(t){switch(this.getResultViewType()){case"appSearchResult":break;case"searchResultList":if(this.searchResultList){this.searchResultList.addDragDropConfig(t);this._dragDropConfig=this.getDragDropConfig();return this.searchResultList}break;case"searchResultTable":if(this.searchResultTable){this.searchResultTable.addDragDropConfig(t);this._dragDropConfig=this.getDragDropConfig();return this.searchResultTable}break;case"searchResultGrid":if(this.searchResultGrid){this.searchResultGrid.addDragDropConfig(t);this._dragDropConfig=this.getDragDropConfig();return this.searchResultGrid}break;case"":this._dragDropConfig=[t]}return this},insertDragDropConfig:function e(t,r){var a=this;switch(this.getResultViewType()){case"appSearchResult":break;case"searchResultList":if(this.searchResultList){this.searchResultList.insertDragDropConfig(t,r);this._dragDropConfig=this.getDragDropConfig();return this.searchResultList}break;case"searchResultTable":if(this.searchResultTable){this.searchResultTable.insertDragDropConfig(t,r);this._dragDropConfig=this.getDragDropConfig();return this.searchResultTable}break;case"searchResultGrid":if(this.searchResultGrid){this.searchResultGrid.insertDragDropConfig(t,r);this._dragDropConfig=this.getDragDropConfig();return this.searchResultGrid}break;case"":setTimeout(function(){return a.insertDragDropConfig(t,r)},500)}return this},indexOfDragDropConfig:function e(t){var r,a,s,i,o,n;if((r=this.searchResultList)!==null&&r!==void 0&&r.getDragDropConfig()&&((a=this.searchResultList)===null||a===void 0?void 0:a.getDragDropConfig().length)>0){return this.searchResultList.indexOfDragDropConfig(t)}else if((s=this.searchResultTable)!==null&&s!==void 0&&s.getDragDropConfig()&&((i=this.searchResultTable)===null||i===void 0?void 0:i.getDragDropConfig().length)>0){return this.searchResultTable.indexOfDragDropConfig(t)}else if((o=this.searchResultGrid)!==null&&o!==void 0&&o.getDragDropConfig()&&((n=this.searchResultGrid)===null||n===void 0?void 0:n.getDragDropConfig().length)>0){return this.searchResultGrid.indexOfDragDropConfig(t)}else{return-1}},getDragDropConfig:function e(){var t,r,a,s,i,o;if((t=this.searchResultList)!==null&&t!==void 0&&t.getDragDropConfig()&&((r=this.searchResultList)===null||r===void 0?void 0:r.getDragDropConfig().length)>0){return this.searchResultList.getDragDropConfig()}else if((a=this.searchResultTable)!==null&&a!==void 0&&a.getDragDropConfig()&&((s=this.searchResultTable)===null||s===void 0?void 0:s.getDragDropConfig().length)>0){return this.searchResultTable.getDragDropConfig()}else if((i=this.searchResultGrid)!==null&&i!==void 0&&i.getDragDropConfig()&&((o=this.searchResultGrid)===null||o===void 0?void 0:o.getDragDropConfig().length)>0){return this.searchResultGrid.getDragDropConfig()}else{return[]}},removeDragDropConfig:function e(t){var r,a,s,i,o,n;var l=null;if((r=this.searchResultList)!==null&&r!==void 0&&r.getDragDropConfig()&&((a=this.searchResultList)===null||a===void 0?void 0:a.getDragDropConfig().length)>0){l=this.searchResultList.removeDragDropConfig(t);this._dragDropConfig=this.getDragDropConfig()}else if((s=this.searchResultTable)!==null&&s!==void 0&&s.getDragDropConfig()&&((i=this.searchResultTable)===null||i===void 0?void 0:i.getDragDropConfig().length)>0){l=this.searchResultTable.removeDragDropConfig(t);this._dragDropConfig=this.getDragDropConfig()}else if((o=this.searchResultGrid)!==null&&o!==void 0&&o.getDragDropConfig()&&((n=this.searchResultGrid)===null||n===void 0?void 0:n.getDragDropConfig().length)>0){l=this.searchResultGrid.removeDragDropConfig(t);this._dragDropConfig=this.getDragDropConfig()}else{}return l},removeAllDragDropConfig:function e(){var t,r,a,s,i,o;var n=[];if((t=this.searchResultList)!==null&&t!==void 0&&t.getDragDropConfig()&&((r=this.searchResultList)===null||r===void 0?void 0:r.getDragDropConfig().length)>0){n=this.searchResultList.removeAllDragDropConfig();this._dragDropConfig=this.getDragDropConfig()}else if((a=this.searchResultTable)!==null&&a!==void 0&&a.getDragDropConfig()&&((s=this.searchResultTable)===null||s===void 0?void 0:s.getDragDropConfig().length)>0){n=this.searchResultTable.removeAllDragDropConfig();this._dragDropConfig=this.getDragDropConfig()}else if((i=this.searchResultGrid)!==null&&i!==void 0&&i.getDragDropConfig()&&((o=this.searchResultGrid)===null||o===void 0?void 0:o.getDragDropConfig().length)>0){n=this.searchResultGrid.removeAllDragDropConfig();this._dragDropConfig=this.getDragDropConfig()}else{}return n},destroyDragDropConfig:function e(){var t,r,a,s,i,o;var n=this;if((t=this.searchResultList)!==null&&t!==void 0&&t.getDragDropConfig()&&((r=this.searchResultList)===null||r===void 0?void 0:r.getDragDropConfig().length)>0){n=this.searchResultList.destroyDragDropConfig()}else if((a=this.searchResultTable)!==null&&a!==void 0&&a.getDragDropConfig()&&((s=this.searchResultTable)===null||s===void 0?void 0:s.getDragDropConfig().length)>0){n=this.searchResultTable.destroyDragDropConfig()}else if((i=this.searchResultGrid)!==null&&i!==void 0&&i.getDragDropConfig()&&((o=this.searchResultGrid)===null||o===void 0?void 0:o.getDragDropConfig().length)>0){n=this.searchResultGrid.destroyDragDropConfig()}else{}this._dragDropConfig=[];return n},onAllSearchStarted:function e(){this.fireEvent("searchStarted")},onAllSearchFinished:function e(){var t=this;var r=this.getModel();this.assignDragDropConfig();this.chooseNoResultScreen();this.oFocusHandler.setFocus();if(r.config.isUshell){var a=sap.ui.getCore().byId("viewPortContainer");if(a!==null&&a!==void 0&&a.switchState){a.switchState("Center")}}this.fireEvent("searchFinished");var s=this.getModel().getProperty("/uiFilter/rootCondition");var i=this.getModel().getProperty("/count");var o=this.getModel().getProperty("/facetVisibility");var n=false;if(!o&&s&&s.hasFilters()){n=true}if(s&&r.filterWithoutFilterByConditions()){n=false}if(s&&typeof r.config.hasSpaceFiltersOnly==="function"){if(r.config.hasSpaceFiltersOnly(s)===true){n=false}}var l=i!==0||r.config.showSearchBarForNoResults;setTimeout(function(){t.adjustSearchContainerHeightClasses(l,n);t.adjustSearchbarCustomGenericButtonWidth()},0);if(r.getProperty("/tableRows").length>0){var u="search-result-table-state-"+r.getDataSource().id;var h=this._createInitialTablePersoState();try{this._storeActiveTablePersoState(u,h)}catch(e){var c=new ue.ProgramError(e,be.getText("error.bufferPersonalization.message"));this.errorHandler.onError(c)}}},updateTablePersoController:function e(){if(!this.getModel()||!this.getModel().getDataSource()||!this._isTableDataBindingUpdated()){return}var t=this.getModel();var r="search-result-table-state-"+t.getDataSource().id;var a=this._createInitialTablePersoState();t.getPersonalizationStorageInstance().setItem(r+"INITIAL",a);if(this.oTablePersoController){if(this.oTablePersoController.getPersoService().getKey()===r&&!this._isActiveTablePersoStateAdapted){return}this.oTablePersoController.destroy()}var s=t.config.isUshell?"sap.ushell.renderers.fiori2.search.container":"entprise-search";this.oTablePersoController=new re("",{table:this.searchResultTable,persoService:t.getPersonalizationStorageInstance().getPersonalizer(r),componentName:s,resetAllMode:sap.m.ResetAllMode.ServiceReset});this.oTablePersoController.activate();this._isActiveTablePersoStateAdapted=false},updateTableLayout:function e(){if(!this.getModel()||!this.getModel().getDataSource()||!this._isTableDataBindingUpdated()){return}var t=this.searchResultTable.getColumns();var r=t.sort(this._orderColumns);var a=0;r.forEach(function(e){e.setDemandPopin(false);if(e.getVisible()){a++;e.setDemandPopin(true);e.setPopinDisplay(Be.Inline);e.setMinScreenWidth(12*a+"rem")}});if(a<=3){this.searchResultTable.setFixedLayout(false)}else{this.searchResultTable.setFixedLayout(true)}},_orderColumns:function e(t,r){if(t.getOrder()<r.getOrder()){return-1}if(t.getOrder()>r.getOrder()){return 1}return 0},_createInitialTablePersoState:function e(){var t=this.getModel();var r=t.getProperty("/tableColumns");var a=[];var s=t.config.isUshell?"sap.ushell.renderers.fiori2.search.container":"entprise-search";if(t.config.extendTableColumn){r.forEach(function(e){var r,i;a.push({text:e.name,order:e.index,visible:e.index<7||e.attributeId===((r=t.config.extendTableColumn.column)===null||r===void 0?void 0:r.attributeId),id:s+"-table-"+e.key,group:null,isExtend:e.attributeId===((i=t.config.extendTableColumn.column)===null||i===void 0?void 0:i.attributeId)})})}else{r.forEach(function(e){a.push({text:e.name,order:e.index,visible:e.index<6,id:s+"-table-"+e.key,group:null,isExtend:false})})}return{aColumns:a,_persoSchemaVersion:"1.0"}},_isTableDataBindingUpdated:function e(){var t=this.getModel();if(t.getProperty("/tableRows").length===0){return undefined}var r=t.getProperty("/tableRows")[0].dataSource.id;var a=t.getDataSource().id;var s;try{s=t.getDataSource()["dataSource"]["id"]}catch(e){}return a===r||s===r},_storeActiveTablePersoState:function e(t,r){this._isActiveTablePersoStateAdapted=false;var a=this.getModel();var s=a.getPersonalizationStorageInstance().getItem(t);if(!s){a.getPersonalizationStorageInstance().setItem(t,r)}else if(!this._hasSameTablePersoColumns(s.aColumns,r.aColumns)){a.getPersonalizationStorageInstance().setItem(t,this._adaptActiveTablePersoState(s,r));this._isActiveTablePersoStateAdapted=true}},_hasSameTablePersoColumns:function e(t,r){if(Array.isArray(t)===false||Array.isArray(r)===false||t.length!==r.length){return false}for(var a=0;a<t.length;a++){if(t[a].text!==r[a].text||t[a].id!==r[a].id){return false}}return true},_adaptActiveTablePersoState:function e(t,r){var a=[];var s=[];for(var i=0;i<r.aColumns.length;i++){var o=r.aColumns[i];var n=this._getTablePersoStateColumn(t,o.text);if(n!==undefined){o.order=n.order;o.visible=n.visible;a.push(o)}else{o.order=-1;s.push(o)}}a=a.sort(this._orderTablePersoStateColumns);if(s.length>0){a=a.concat(s)}for(var l=0;l<a.length;l++){a[l].order=l}return{aColumns:a,_persoSchemaVersion:"1.0"}},_orderTablePersoStateColumns:function e(t,r){if(t.order<r.order){return-1}if(t.order>r.order){return 1}return 0},_getTablePersoStateColumn:function e(t,r){if(Array.isArray(t.aColumns)===false){return undefined}for(var a=0;a<t.aColumns.length;a++){if(t.aColumns[a].text===r){return t.aColumns[a]}}return undefined},createSearchPage:function e(t){var r=this;var a=this.getModel();this.oFilterBar.bindProperty("visible",{parts:[{path:"/count"},{path:"/facetVisibility"},{path:"/uiFilter/rootCondition"}],formatter:function e(t,s,i){var o=false;if(!s&&i&&i.hasFilters()){o=true}if(i&&a.filterWithoutFilterByConditions()){o=false}if(i&&typeof a.config.hasSpaceFiltersOnly==="function"){if(a.config.hasSpaceFiltersOnly(i)===true){o=false}}var n=t!==0||a.config.showSearchBarForNoResults;r.adjustSearchContainerHeightClasses(n,o);return o}});this.oFooter=this.createFooter(this.getId());if(this.oFooter){this.oFooter.bindProperty("visible",{parts:[{path:"/errors/length"}],formatter:function e(t){var r=t>0?true:false;return r}})}this.searchContainer=this.createSearchContainer(t);var s=[this.oSearchBar,this.oFilterBar,this.searchContainer];return s},createNoResultScreen:function e(t){var r=[];var a=le.Auto;var s={parts:[{path:"/queryFilter/searchTerm"}],formatter:function e(t){return be.getText("no_results_info_1",[t])}};var i=be.getText("no_results_info_2");var o=ne.NoSearchResults;var n={title:s,description:i,illustrationSize:a,illustrationType:o,additionalContent:r};var l=new oe("".concat(t,"-searchContainerResultsView-noResultScreen-illustratedMessage"),n).addStyleClass("sapElisaNoResultScreen");l.addStyleClass("sapUiMediumMarginTop");this.noResultScreen=new Y("".concat(t,"-searchContainerResultsView-noResultScreen"),{items:l,width:"100%",justifyContent:Me.Center,visible:{parts:[{path:"/count"},{path:"/isBusy"},{path:"/firstSearchWasExecuted"}],formatter:function e(t,r,a){return t===0&&!r&&a}}});return this.noResultScreen},createSearchContainer:function e(t){var r=this.getModel();this.countBreadcrumbsHiddenElement=this.assembleCountBreadcrumbsHiddenElement();this.centerArea=this.assembleCenterArea(t);this.oSearchCountBreadcrumbs=new g(this.getId()+"-SearchCountBreadcrumbs").addStyleClass("sapElisaSearchContextBarContent");this.oContextBar=new F(this.getId()+"-searchContextBar",{contentLeft:this.oSearchCountBreadcrumbs}).addStyleClass("sapElisaSearchContextBar");this.oContextBarContainer=new Y("",{items:[this.oContextBar]});this.oContextBarContainer.addStyleClass("sapUiNoMarginBegin");this.oContextBarContainer.addStyleClass("sapUiNoMarginEnd");this.oSearchResultContainer=new o("".concat(t,"-searchContainerResultsView"),{centerArea:this.centerArea,contextBarContainer:this.oContextBarContainer,noResultScreen:this.createNoResultScreen(t)});var a={resultContainer:this.oSearchResultContainer,searchIsBusy:{path:"/isBusy"},busyDelay:{path:"/busyDelay"},facetPanelResizable:r.config.facetPanelResizable,facetPanelWidthInPercent:r.config.facetPanelWidthInPercent,facetPanelContent:new m("".concat(this.getId(),"-SearchFacetFilter")),showFacets:{parts:[{path:"/count"},{path:"/facetVisibility"},{path:"/uiFilter/rootCondition"},{path:"/isBusy"},{path:"/config"}],formatter:function e(t,r,a,s,i){var o=true;if(!r){o=false}var n=a&&a.conditions&&a.conditions.length>0;if(t===0&&!i.displayFacetPanelInCaseOfNoResults&&!n&&!s){o=false}return o}},footer:this.oFooter,showFooter:{parts:[{path:"/errors/length"}],formatter:function e(t){return t>0}}};var s=new i("".concat(this.getId(),"-searchLayout"),a).addStyleClass("sapUshellSearchLayout").addStyleClass("sapUshellSearchLayoutHeightDefault");return s},isSearchFieldGroupLocatedInsideSearchComposite:function e(t){if(typeof t==="undefined"||t===null){return false}else if(t.classList){if(t.classList.contains("sapUshellSearchInputHelpPage")){return true}else if(typeof t.parentNode!=="undefined"){return this.isSearchFieldGroupLocatedInsideSearchComposite(t.parentNode)}else{console.error("function: isSearchFieldGroupLocatedInsideSearchComposite: Element has no property 'parentNode' but has property 'classlist'");return false}}else if(t.nodeType===Node.DOCUMENT_NODE){return false}else{console.error("function: isSearchFieldGroupLocatedInsideSearchComposite: Element has no property 'classlist'");return false}},adjustSearchbarCustomGenericButtonWidth:function e(){if(this.oFilterButton.getVisible()&&this.oFilterButton.getDomRef()===null){return}var t=window.document.getElementById(this.getDomRef().id).getBoundingClientRect();var r=this.oFilterButton.getVisible()?window.document.getElementById(this.oFilterButton.getDomRef().id).getBoundingClientRect().width:0;var a=0;if(this.oDataSourceTabBar.getVisible()){var s=this.oDataSourceTabBar.getDomRef();if(s!==null&&s!==void 0&&s.id){a=window.document.getElementById(s.id).getBoundingClientRect().width}else{}}var i=t.width-r-a;var o=this.convertPixelToRem(i);this.oGenericItemsToolbar.setWidth("".concat(o-2.75,"rem"))},_resizeHandler:function e(){var t=this;setTimeout(function(){return t.adjustSearchbarCustomGenericButtonWidth()},0)},convertPixelToRem:function e(t){return t/parseFloat(getComputedStyle(document.documentElement).fontSize)},adjustSearchContainerHeightClasses:function e(t,r){var a=this.oSearchFieldGroup?this.isSearchFieldGroupLocatedInsideSearchComposite(this.oSearchFieldGroup.input.getDomRef()):false;this.searchContainer.removeStyleClass("sapUshellSearchLayoutHeightDefault");this.searchContainer.removeStyleClass("sapUshellSearchLayoutHeightFilterbar");this.searchContainer.removeStyleClass("sapUshellSearchLayoutHeightDefaultHasSearchInputBar");this.searchContainer.removeStyleClass("sapUshellSearchLayoutHeightFilterbarHasSearchInputBar");this.searchContainer.removeStyleClass("sapUshellSearchLayoutHeightDefaultHasSearchBar");this.searchContainer.removeStyleClass("sapUshellSearchLayoutHeightFilterbarHasSearchBar");this.searchContainer.removeStyleClass("sapUshellSearchLayoutHeightDefaultHasSearchInputBarHasSearchBar");this.searchContainer.removeStyleClass("sapUshellSearchLayoutHeightFilterbarHasSearchInputBarHasSearchBar");if(r){if(a){if(t){this.searchContainer.addStyleClass("sapUshellSearchLayoutHeightFilterbarHasSearchInputBarHasSearchBar")}else{this.searchContainer.addStyleClass("sapUshellSearchLayoutHeightFilterbarHasSearchInputBar")}}else{if(t){this.searchContainer.addStyleClass("sapUshellSearchLayoutHeightFilterbarHasSearchBar")}else{this.searchContainer.addStyleClass("sapUshellSearchLayoutHeightFilterbar")}}}else{if(a){if(t){this.searchContainer.addStyleClass("sapUshellSearchLayoutHeightDefaultHasSearchInputBarHasSearchBar")}else{this.searchContainer.addStyleClass("sapUshellSearchLayoutHeightDefaultHasSearchInputBar")}}else{if(t){this.searchContainer.addStyleClass("sapUshellSearchLayoutHeightDefaultHasSearchBar")}else{this.searchContainer.addStyleClass("sapUshellSearchLayoutHeightDefault")}}}},createFooter:function e(t){var r=this;var a=this.getModel();this.oErrorPopover=new q(t+"-"+xe+++"-"+"-searchMessagePopover",{placement:Te.Top});this.oErrorPopover.setModel(a);a.setProperty("/messagePopoverControlId",this.oErrorPopover.getId());this.oErrorPopover.bindAggregation("items",{path:"/errors",factory:function e(){var t=new J("",{title:"{title}",description:"{description}"});return t}});var s=new I(this.getId()+"-searchErrorButton",{icon:T.getIconURI("alert"),text:{parts:[{path:"/errors/length"}],formatter:function e(t){return t}},visible:{parts:[{path:"/errors/length"}],formatter:function e(t){return t>0},mode:w.OneWay},type:Ce.Emphasized,tooltip:be.getText("errorBtn"),press:function e(){if(r.oErrorPopover.isOpen()){r.oErrorPopover.close()}else{r.oErrorPopover.setVisible(true);r.oErrorPopover.openBy(s)}}});s.addStyleClass("sapUiSmallMarginBegin");s["addDelegate"]({onAfterRendering:function e(){var t=r.getModel();if(!t.getProperty("/isErrorPopovered")){s.firePress();t.setProperty("/isErrorPopovered",true)}}});s.setLayoutData(new E("",{priority:Re.NeverOverflow}));var i=new x(this.getId()+"-searchFooter",{content:[s]});i.addStyleClass("sapUiTinyMarginTop");return i},chooseNoResultScreen:function e(){var t;var r=this.getModel();var a;if(typeof(r===null||r===void 0?void 0:(t=r.config)===null||t===void 0?void 0:t.getCustomNoResultScreen)==="function"){try{a=r.config.getCustomNoResultScreen(r.getDataSource(),r)}catch(e){var s=new ue.ConfigurationExitError("chooseNoResultScreen",r.config.applicationComponent,e);this.errorHandler.onError(s);a=this.oSearchResultContainer.getAggregation("noResultScreen")}}if(!a){a=this.oSearchResultContainer.getAggregation("noResultScreen")}this.oSearchResultContainer.setNoResultScreen(a)},openSortDialog:function e(){this.sortDialog.unbindAggregation("sortItems",false);this.sortDialog.bindAggregation("sortItems",{path:"/sortableAttributes",factory:function e(){return new Q("",{key:{path:"key"},text:{path:"name"},selected:{path:"selected"}})}});this.sortDialog.open()},openShowMoreDialog:function e(t){Ve(this.getModel(),t)},getResultViewTypes:function e(){var t=this.getModel();return t===null||t===void 0?void 0:t.getResultViewTypes()},setResultViewTypes:function e(t){var r=this.getModel();if(typeof t==="undefined"){throw Error("Search Result View Type Error In SearchCompositeControl:\n\n"+"The function parameter 'resultViewTypes' is mandatory.\n"+'Valid example: setResultViewTypes(["searchResultList"])')}else if(typeof r==="undefined"||typeof r.config==="undefined"){return this}this.setResultViewSettings({resultViewTypes:t,resultViewType:r.getResultViewType()});return this},getResultViewType:function e(){var t=this.getModel();return t===null||t===void 0?void 0:t.getResultViewType()},setResultViewType:function e(t){var r=this.getModel();if(typeof t==="undefined"){throw Error("Search Result View Type Error In SearchCompositeControl:\n\n"+"The function parameter 'resultlViewType' is mandatory.\n"+'Valid example: setResultViewType("searchResultList")')}else if(typeof r==="undefined"||typeof r.config==="undefined"){return this}this.setResultViewSettings({resultViewTypes:r.getResultViewTypes(),resultViewType:t});return this},getResultViewSettings:function e(){var t=this.getModel();if(t){return{resultViewTypes:t.getResultViewTypes(),resultViewType:t.getResultViewType()}}},setResultViewSettings:function e(t){var r=this.getModel();if(typeof t==="undefined"){throw Error("Search Result View Type Error In SearchCompositeControl:\n\n"+"The function parameter 'resultlViewSettings' is mandatory.\n"+'Valid example: setResultViewSettings({resultViewTypes: ["searchResultList", "searchResultTable"], resultViewType: "searchResultList"})')}else if(typeof r==="undefined"||typeof r.config==="undefined"){return this}if(typeof t.resultViewTypes==="undefined"||typeof t.resultViewType==="undefined"){throw Error("Search Result View Type Error In SearchCompositeControl:\n\n"+"One of properties of function parameter is undefined.\n"+'Valid example: setResultViewSettings({resultViewTypes: ["searchResultList", "searchResultTable"], resultViewType: "searchResultList"})')}r.calculateResultViewSwitchVisibility({resultViewTypes:t.resultViewTypes,resultViewType:t.resultViewType});this.showMoreFooter.setVisible(this.isShowMoreFooterVisible());r.enableOrDisableMultiSelection();r._firePerspectiveQuery();return this},getControllerName:function e(){return"sap.esh.search.ui.container.Search"},getCssClass:function e(){return this._cssClass},setCssClass:function e(t){if(t&&!this.hasStyleClass(t)){this._cssClass=t;this.addStyleClass(t)}return this},getDataSource:function e(){if(typeof this.getModel()!=="undefined"){var t=this.getModel();var r=t.getDataSource();return r.id}},setDataSource:function e(t,r,a){if(typeof this.getModel()!=="undefined"){var s=this.getModel();s.setDataSourceById(t,r,a)}return this},getSearchTerm:function e(){if(typeof this.getModel()!=="undefined"){var t=this.getModel();return t.getSearchBoxTerm()}return Ee.getMetadata().getPropertyDefaults()["searchTerm"]},setSearchTerm:function e(t,r){if(typeof this.getModel()!=="undefined"){var a=this.getModel();a.setSearchBoxTerm(t,r)}return this},getFilterRootCondition:function e(){if(this.getModel()){var t=this.getModel();return t.getFilterRootCondition()}return Ee.getMetadata().getPropertyDefaults()["filterRootCondition"]},setFilterRootCondition:function e(t,r){if(this.getModel()){var a=this.getModel();a.setFilterRootCondition(t,r)}return this},renderSearchUrlFromParameters:function e(t,r,a){var s=this.getModel();if(!s){throw new Pe(null,"cannot construct URL because model is undefined")}return s.searchUrlParser.renderFromParameters(t,r,a)}});Ee.eshCompCounter=0;Ee.getUI5ControlSettings=function e(t){var r={};var a=Ee.getMetadata().getProperties();for(var s in a){if(typeof t[s]==="undefined"){continue}r[s]=t[s]}return r};Ee.unifyInputParameters=function e(t,r){if(typeof t!=="string"&&t!==undefined&&r===undefined){r=t;t=r&&r.id}else if(typeof r==="undefined"){r={}}if(typeof t==="string"&&t.length>0){r.id=t}if(!t||t.length===0){t="eshComp"+"GenId_"+Ee.eshCompCounter++;r.id=t}if(typeof t==="string"&&t.length>0&&typeof r.id!=="undefined"){if(t!==r.id){throw new Error("Constructor of component 'sap.esh.search.ui.SearchCompositeControl' has failed\n\n"+"sId and mSettings.id are not the same. It is sufficient to set either 'id' (sId) or 'settings.id' (mSettings.id).")}}return{sId:t,settings:r}};var xe=1;return Ee})})();
//# sourceMappingURL=SearchCompositeControl.js.map