/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/helpers/BindingToolkit", "sap/m/Text", "sap/ui/base/DataType"], function (BindingToolkit, Text, DataType) {
  "use strict";

  var isConstant = BindingToolkit.isConstant;
  var compileExpression = BindingToolkit.compileExpression;
  var compileConstant = BindingToolkit.compileConstant;
  const addChildAggregation = function (aggregationChildren, aggregationName, child) {
    if (child === undefined || typeof child === "string") {
      return;
    }
    if (!aggregationChildren[aggregationName]) {
      aggregationChildren[aggregationName] = [];
    }
    if (isChildAnElement(child)) {
      aggregationChildren[aggregationName].push(child);
    } else if (Array.isArray(child)) {
      child.forEach(subChild => {
        addChildAggregation(aggregationChildren, aggregationName, subChild);
      });
    } else {
      Object.keys(child).forEach(childKey => {
        addChildAggregation(aggregationChildren, childKey, child[childKey]);
      });
    }
  };
  const isChildAnElement = function (children) {
    var _isA, _ref;
    return children === null || children === void 0 ? void 0 : (_isA = (_ref = children).isA) === null || _isA === void 0 ? void 0 : _isA.call(_ref, "sap.ui.core.Element");
  };
  const isAControl = function (children) {
    return !!(children !== null && children !== void 0 && children.getMetadata);
  };
  function processAggregations(metadata, mSettings) {
    const metadataAggregations = metadata.getAllAggregations();
    const defaultAggregationName = metadata.getDefaultAggregationName();
    const aggregationChildren = {};
    addChildAggregation(aggregationChildren, defaultAggregationName, mSettings.children);
    delete mSettings.children;
    // find out which aggregation are bound (both in children and directly under it)
    Object.keys(metadataAggregations).forEach(aggregationName => {
      if (aggregationChildren[aggregationName] !== undefined) {
        if (mSettings.hasOwnProperty(aggregationName)) {
          // always use the first item as template according to UI5 logic
          mSettings[aggregationName].template = aggregationChildren[aggregationName][0];
        } else {
          mSettings[aggregationName] = aggregationChildren[aggregationName];
        }
      }
    });
  }

  /**
   * Processes the properties.
   *
   * If the property is a bindingToolkit expression we need to compile it.
   * Else if the property is set as string (compiled binding expression returns string by default even if it's a boolean, int, etc.) and it doesn't match with expected
   * format the value is parsed to provide expected format.
   *
   * @param metadata Metadata of the control
   * @param settings Settings of the control
   * @returns {void}
   */
  function processProperties(metadata, settings) {
    let settingsKey;
    for (settingsKey in settings) {
      const value = settings[settingsKey];
      if (value !== null && value !== void 0 && value._type) {
        const bindingToolkitExpression = value;
        if (isConstant(bindingToolkitExpression)) {
          settings[settingsKey] = compileConstant(value, false, true, true);
        } else {
          settings[settingsKey] = compileExpression(bindingToolkitExpression);
        }
      } else if (typeof settings[settingsKey] === "string" && !settings[settingsKey].startsWith("{")) {
        var _metadata$getAllPrope, _metadata$getAllPrope2, _metadata$getAllPrope3;
        const propertyType = (_metadata$getAllPrope = metadata.getAllProperties()[settingsKey]) === null || _metadata$getAllPrope === void 0 ? void 0 : (_metadata$getAllPrope2 = (_metadata$getAllPrope3 = _metadata$getAllPrope).getType) === null || _metadata$getAllPrope2 === void 0 ? void 0 : _metadata$getAllPrope2.call(_metadata$getAllPrope3);
        if (propertyType && propertyType instanceof DataType && ["boolean", "int", "float"].indexOf(propertyType.getName()) > -1) {
          settings[settingsKey] = propertyType.parseValue(value);
        }
      }
    }
  }
  const jsxControl = function (ControlType, mSettings, key, jsxContext) {
    let targetControl;
    if (ControlType !== null && ControlType !== void 0 && ControlType.isFragment) {
      targetControl = mSettings.children;
    } else if (ControlType !== null && ControlType !== void 0 && ControlType.isRuntime) {
      const runtimeBuildingBlock = new ControlType(mSettings);
      targetControl = runtimeBuildingBlock.getContent(jsxContext.view, jsxContext.appComponent);
    } else if (isAControl(ControlType)) {
      const metadata = ControlType.getMetadata();
      if (key !== undefined) {
        mSettings["key"] = key;
      }
      processAggregations(metadata, mSettings);
      const classDef = mSettings.class;
      const refDef = mSettings.ref;
      delete mSettings.ref;
      delete mSettings.class;
      processProperties(metadata, mSettings);
      targetControl = new ControlType(mSettings);
      if (classDef) {
        targetControl.addStyleClass(classDef);
      }
      if (refDef) {
        refDef.setCurrent(targetControl);
      }
    } else if (typeof ControlType === "function") {
      const controlTypeFn = ControlType;
      targetControl = controlTypeFn(mSettings);
    } else {
      targetControl = new Text({
        text: "Missing component " + ControlType
      });
    }
    return targetControl;
  };
  return jsxControl;
}, false);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhZGRDaGlsZEFnZ3JlZ2F0aW9uIiwiYWdncmVnYXRpb25DaGlsZHJlbiIsImFnZ3JlZ2F0aW9uTmFtZSIsImNoaWxkIiwidW5kZWZpbmVkIiwiaXNDaGlsZEFuRWxlbWVudCIsInB1c2giLCJBcnJheSIsImlzQXJyYXkiLCJmb3JFYWNoIiwic3ViQ2hpbGQiLCJPYmplY3QiLCJrZXlzIiwiY2hpbGRLZXkiLCJjaGlsZHJlbiIsImlzQSIsImlzQUNvbnRyb2wiLCJnZXRNZXRhZGF0YSIsInByb2Nlc3NBZ2dyZWdhdGlvbnMiLCJtZXRhZGF0YSIsIm1TZXR0aW5ncyIsIm1ldGFkYXRhQWdncmVnYXRpb25zIiwiZ2V0QWxsQWdncmVnYXRpb25zIiwiZGVmYXVsdEFnZ3JlZ2F0aW9uTmFtZSIsImdldERlZmF1bHRBZ2dyZWdhdGlvbk5hbWUiLCJoYXNPd25Qcm9wZXJ0eSIsInRlbXBsYXRlIiwicHJvY2Vzc1Byb3BlcnRpZXMiLCJzZXR0aW5ncyIsInNldHRpbmdzS2V5IiwidmFsdWUiLCJfdHlwZSIsImJpbmRpbmdUb29sa2l0RXhwcmVzc2lvbiIsImlzQ29uc3RhbnQiLCJjb21waWxlQ29uc3RhbnQiLCJjb21waWxlRXhwcmVzc2lvbiIsInN0YXJ0c1dpdGgiLCJwcm9wZXJ0eVR5cGUiLCJnZXRBbGxQcm9wZXJ0aWVzIiwiZ2V0VHlwZSIsIkRhdGFUeXBlIiwiaW5kZXhPZiIsImdldE5hbWUiLCJwYXJzZVZhbHVlIiwianN4Q29udHJvbCIsIkNvbnRyb2xUeXBlIiwia2V5IiwianN4Q29udGV4dCIsInRhcmdldENvbnRyb2wiLCJpc0ZyYWdtZW50IiwiaXNSdW50aW1lIiwicnVudGltZUJ1aWxkaW5nQmxvY2siLCJnZXRDb250ZW50IiwidmlldyIsImFwcENvbXBvbmVudCIsImNsYXNzRGVmIiwiY2xhc3MiLCJyZWZEZWYiLCJyZWYiLCJhZGRTdHlsZUNsYXNzIiwic2V0Q3VycmVudCIsImNvbnRyb2xUeXBlRm4iLCJUZXh0IiwidGV4dCJdLCJzb3VyY2VSb290IjoiLiIsInNvdXJjZXMiOlsianN4LWNvbnRyb2wudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBCaW5kaW5nVG9vbGtpdEV4cHJlc3Npb24gfSBmcm9tIFwic2FwL2ZlL2NvcmUvaGVscGVycy9CaW5kaW5nVG9vbGtpdFwiO1xuaW1wb3J0IHsgY29tcGlsZUNvbnN0YW50LCBjb21waWxlRXhwcmVzc2lvbiwgaXNDb25zdGFudCB9IGZyb20gXCJzYXAvZmUvY29yZS9oZWxwZXJzL0JpbmRpbmdUb29sa2l0XCI7XG5pbXBvcnQgdHlwZSB7IENvbnRyb2xQcm9wZXJ0aWVzLCBKU1hDb250ZXh0LCBOb25Db250cm9sUHJvcGVydGllcywgUmVmIH0gZnJvbSBcInNhcC9mZS9jb3JlL2pzeC1ydW50aW1lL2pzeFwiO1xuaW1wb3J0IFRleHQgZnJvbSBcInNhcC9tL1RleHRcIjtcbmltcG9ydCBEYXRhVHlwZSBmcm9tIFwic2FwL3VpL2Jhc2UvRGF0YVR5cGVcIjtcbmltcG9ydCB0eXBlIE1hbmFnZWRPYmplY3RNZXRhZGF0YSBmcm9tIFwic2FwL3VpL2Jhc2UvTWFuYWdlZE9iamVjdE1ldGFkYXRhXCI7XG5pbXBvcnQgdHlwZSBDb250cm9sIGZyb20gXCJzYXAvdWkvY29yZS9Db250cm9sXCI7XG5pbXBvcnQgdHlwZSB7ICRDb250cm9sU2V0dGluZ3MgfSBmcm9tIFwic2FwL3VpL2NvcmUvQ29udHJvbFwiO1xuaW1wb3J0IHR5cGUgRWxlbWVudCBmcm9tIFwic2FwL3VpL2NvcmUvRWxlbWVudFwiO1xuY29uc3QgYWRkQ2hpbGRBZ2dyZWdhdGlvbiA9IGZ1bmN0aW9uIChhZ2dyZWdhdGlvbkNoaWxkcmVuOiBhbnksIGFnZ3JlZ2F0aW9uTmFtZTogc3RyaW5nLCBjaGlsZDogYW55KSB7XG5cdGlmIChjaGlsZCA9PT0gdW5kZWZpbmVkIHx8IHR5cGVvZiBjaGlsZCA9PT0gXCJzdHJpbmdcIikge1xuXHRcdHJldHVybjtcblx0fVxuXHRpZiAoIWFnZ3JlZ2F0aW9uQ2hpbGRyZW5bYWdncmVnYXRpb25OYW1lXSkge1xuXHRcdGFnZ3JlZ2F0aW9uQ2hpbGRyZW5bYWdncmVnYXRpb25OYW1lXSA9IFtdO1xuXHR9XG5cdGlmIChpc0NoaWxkQW5FbGVtZW50KGNoaWxkKSkge1xuXHRcdGFnZ3JlZ2F0aW9uQ2hpbGRyZW5bYWdncmVnYXRpb25OYW1lXS5wdXNoKGNoaWxkKTtcblx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGNoaWxkKSkge1xuXHRcdGNoaWxkLmZvckVhY2goKHN1YkNoaWxkKSA9PiB7XG5cdFx0XHRhZGRDaGlsZEFnZ3JlZ2F0aW9uKGFnZ3JlZ2F0aW9uQ2hpbGRyZW4sIGFnZ3JlZ2F0aW9uTmFtZSwgc3ViQ2hpbGQpO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdE9iamVjdC5rZXlzKGNoaWxkKS5mb3JFYWNoKChjaGlsZEtleSkgPT4ge1xuXHRcdFx0YWRkQ2hpbGRBZ2dyZWdhdGlvbihhZ2dyZWdhdGlvbkNoaWxkcmVuLCBjaGlsZEtleSwgY2hpbGRbY2hpbGRLZXldKTtcblx0XHR9KTtcblx0fVxufTtcbmNvbnN0IGlzQ2hpbGRBbkVsZW1lbnQgPSBmdW5jdGlvbiA8VD4oY2hpbGRyZW4/OiBFbGVtZW50IHwgQ29udHJvbFByb3BlcnRpZXM8VD4pOiBjaGlsZHJlbiBpcyBFbGVtZW50IHtcblx0cmV0dXJuIChjaGlsZHJlbiBhcyBFbGVtZW50KT8uaXNBPy4oXCJzYXAudWkuY29yZS5FbGVtZW50XCIpO1xufTtcbmNvbnN0IGlzQUNvbnRyb2wgPSBmdW5jdGlvbiAoY2hpbGRyZW4/OiB0eXBlb2YgQ29udHJvbCB8IEZ1bmN0aW9uKTogY2hpbGRyZW4gaXMgdHlwZW9mIENvbnRyb2wge1xuXHRyZXR1cm4gISEoY2hpbGRyZW4gYXMgdHlwZW9mIENvbnRyb2wpPy5nZXRNZXRhZGF0YTtcbn07XG5cbmZ1bmN0aW9uIHByb2Nlc3NBZ2dyZWdhdGlvbnMobWV0YWRhdGE6IE1hbmFnZWRPYmplY3RNZXRhZGF0YSwgbVNldHRpbmdzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSB7XG5cdGNvbnN0IG1ldGFkYXRhQWdncmVnYXRpb25zID0gbWV0YWRhdGEuZ2V0QWxsQWdncmVnYXRpb25zKCkgYXMgYW55O1xuXHRjb25zdCBkZWZhdWx0QWdncmVnYXRpb25OYW1lID0gbWV0YWRhdGEuZ2V0RGVmYXVsdEFnZ3JlZ2F0aW9uTmFtZSgpO1xuXHRjb25zdCBhZ2dyZWdhdGlvbkNoaWxkcmVuOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4gPSB7fTtcblx0YWRkQ2hpbGRBZ2dyZWdhdGlvbihhZ2dyZWdhdGlvbkNoaWxkcmVuLCBkZWZhdWx0QWdncmVnYXRpb25OYW1lLCBtU2V0dGluZ3MuY2hpbGRyZW4pO1xuXHRkZWxldGUgbVNldHRpbmdzLmNoaWxkcmVuO1xuXHQvLyBmaW5kIG91dCB3aGljaCBhZ2dyZWdhdGlvbiBhcmUgYm91bmQgKGJvdGggaW4gY2hpbGRyZW4gYW5kIGRpcmVjdGx5IHVuZGVyIGl0KVxuXHRPYmplY3Qua2V5cyhtZXRhZGF0YUFnZ3JlZ2F0aW9ucykuZm9yRWFjaCgoYWdncmVnYXRpb25OYW1lKSA9PiB7XG5cdFx0aWYgKGFnZ3JlZ2F0aW9uQ2hpbGRyZW5bYWdncmVnYXRpb25OYW1lXSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRpZiAobVNldHRpbmdzLmhhc093blByb3BlcnR5KGFnZ3JlZ2F0aW9uTmFtZSkpIHtcblx0XHRcdFx0Ly8gYWx3YXlzIHVzZSB0aGUgZmlyc3QgaXRlbSBhcyB0ZW1wbGF0ZSBhY2NvcmRpbmcgdG8gVUk1IGxvZ2ljXG5cdFx0XHRcdChtU2V0dGluZ3MgYXMgYW55KVthZ2dyZWdhdGlvbk5hbWVdLnRlbXBsYXRlID0gYWdncmVnYXRpb25DaGlsZHJlblthZ2dyZWdhdGlvbk5hbWVdWzBdO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0KG1TZXR0aW5ncyBhcyBhbnkpW2FnZ3JlZ2F0aW9uTmFtZV0gPSBhZ2dyZWdhdGlvbkNoaWxkcmVuW2FnZ3JlZ2F0aW9uTmFtZV07XG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcbn1cblxuLyoqXG4gKiBQcm9jZXNzZXMgdGhlIHByb3BlcnRpZXMuXG4gKlxuICogSWYgdGhlIHByb3BlcnR5IGlzIGEgYmluZGluZ1Rvb2xraXQgZXhwcmVzc2lvbiB3ZSBuZWVkIHRvIGNvbXBpbGUgaXQuXG4gKiBFbHNlIGlmIHRoZSBwcm9wZXJ0eSBpcyBzZXQgYXMgc3RyaW5nIChjb21waWxlZCBiaW5kaW5nIGV4cHJlc3Npb24gcmV0dXJucyBzdHJpbmcgYnkgZGVmYXVsdCBldmVuIGlmIGl0J3MgYSBib29sZWFuLCBpbnQsIGV0Yy4pIGFuZCBpdCBkb2Vzbid0IG1hdGNoIHdpdGggZXhwZWN0ZWRcbiAqIGZvcm1hdCB0aGUgdmFsdWUgaXMgcGFyc2VkIHRvIHByb3ZpZGUgZXhwZWN0ZWQgZm9ybWF0LlxuICpcbiAqIEBwYXJhbSBtZXRhZGF0YSBNZXRhZGF0YSBvZiB0aGUgY29udHJvbFxuICogQHBhcmFtIHNldHRpbmdzIFNldHRpbmdzIG9mIHRoZSBjb250cm9sXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gcHJvY2Vzc1Byb3BlcnRpZXMobWV0YWRhdGE6IE1hbmFnZWRPYmplY3RNZXRhZGF0YSwgc2V0dGluZ3M6IFJlY29yZDxzdHJpbmcsIGFueT4pIHtcblx0bGV0IHNldHRpbmdzS2V5OiBrZXlvZiB0eXBlb2Ygc2V0dGluZ3M7XG5cdGZvciAoc2V0dGluZ3NLZXkgaW4gc2V0dGluZ3MpIHtcblx0XHRjb25zdCB2YWx1ZSA9IHNldHRpbmdzW3NldHRpbmdzS2V5XTtcblx0XHRpZiAodmFsdWU/Ll90eXBlKSB7XG5cdFx0XHRjb25zdCBiaW5kaW5nVG9vbGtpdEV4cHJlc3Npb246IEJpbmRpbmdUb29sa2l0RXhwcmVzc2lvbjxhbnk+ID0gdmFsdWU7XG5cdFx0XHRpZiAoaXNDb25zdGFudChiaW5kaW5nVG9vbGtpdEV4cHJlc3Npb24pKSB7XG5cdFx0XHRcdHNldHRpbmdzW3NldHRpbmdzS2V5XSA9IGNvbXBpbGVDb25zdGFudCh2YWx1ZSwgZmFsc2UsIHRydWUsIHRydWUpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0c2V0dGluZ3Nbc2V0dGluZ3NLZXldID0gY29tcGlsZUV4cHJlc3Npb24oYmluZGluZ1Rvb2xraXRFeHByZXNzaW9uKSBhcyBhbnk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmICh0eXBlb2Ygc2V0dGluZ3Nbc2V0dGluZ3NLZXldID09PSBcInN0cmluZ1wiICYmICFzZXR0aW5nc1tzZXR0aW5nc0tleV0uc3RhcnRzV2l0aChcIntcIikpIHtcblx0XHRcdGNvbnN0IHByb3BlcnR5VHlwZSA9IChtZXRhZGF0YS5nZXRBbGxQcm9wZXJ0aWVzKClbc2V0dGluZ3NLZXldIGFzIGFueSk/LmdldFR5cGU/LigpO1xuXHRcdFx0aWYgKHByb3BlcnR5VHlwZSAmJiBwcm9wZXJ0eVR5cGUgaW5zdGFuY2VvZiBEYXRhVHlwZSAmJiBbXCJib29sZWFuXCIsIFwiaW50XCIsIFwiZmxvYXRcIl0uaW5kZXhPZihwcm9wZXJ0eVR5cGUuZ2V0TmFtZSgpKSA+IC0xKSB7XG5cdFx0XHRcdHNldHRpbmdzW3NldHRpbmdzS2V5XSA9IHByb3BlcnR5VHlwZS5wYXJzZVZhbHVlKHZhbHVlKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn1cblxuY29uc3QganN4Q29udHJvbCA9IGZ1bmN0aW9uIDxUIGV4dGVuZHMgRWxlbWVudD4oXG5cdENvbnRyb2xUeXBlOiB0eXBlb2YgQ29udHJvbCB8IEZ1bmN0aW9uLFxuXHRtU2V0dGluZ3M6IE5vbkNvbnRyb2xQcm9wZXJ0aWVzPFQ+ICYgeyBrZXk6IHN0cmluZzsgY2hpbGRyZW4/OiBFbGVtZW50IHwgQ29udHJvbFByb3BlcnRpZXM8VD47IHJlZj86IFJlZjxUPjsgY2xhc3M/OiBzdHJpbmcgfSxcblx0a2V5OiBzdHJpbmcsXG5cdGpzeENvbnRleHQ6IEpTWENvbnRleHRcbik6IENvbnRyb2wgfCBDb250cm9sW10ge1xuXHRsZXQgdGFyZ2V0Q29udHJvbDtcblxuXHRpZiAoKENvbnRyb2xUeXBlIGFzIGFueSk/LmlzRnJhZ21lbnQpIHtcblx0XHR0YXJnZXRDb250cm9sID0gbVNldHRpbmdzLmNoaWxkcmVuO1xuXHR9IGVsc2UgaWYgKChDb250cm9sVHlwZSBhcyBhbnkpPy5pc1J1bnRpbWUpIHtcblx0XHRjb25zdCBydW50aW1lQnVpbGRpbmdCbG9jayA9IG5ldyAoQ29udHJvbFR5cGUgYXMgYW55KShtU2V0dGluZ3MpO1xuXHRcdHRhcmdldENvbnRyb2wgPSBydW50aW1lQnVpbGRpbmdCbG9jay5nZXRDb250ZW50KGpzeENvbnRleHQudmlldywganN4Q29udGV4dC5hcHBDb21wb25lbnQpO1xuXHR9IGVsc2UgaWYgKGlzQUNvbnRyb2woQ29udHJvbFR5cGUpKSB7XG5cdFx0Y29uc3QgbWV0YWRhdGEgPSBDb250cm9sVHlwZS5nZXRNZXRhZGF0YSgpO1xuXHRcdGlmIChrZXkgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0bVNldHRpbmdzW1wia2V5XCJdID0ga2V5O1xuXHRcdH1cblx0XHRwcm9jZXNzQWdncmVnYXRpb25zKG1ldGFkYXRhLCBtU2V0dGluZ3MpO1xuXHRcdGNvbnN0IGNsYXNzRGVmID0gbVNldHRpbmdzLmNsYXNzO1xuXHRcdGNvbnN0IHJlZkRlZiA9IG1TZXR0aW5ncy5yZWY7XG5cdFx0ZGVsZXRlIG1TZXR0aW5ncy5yZWY7XG5cdFx0ZGVsZXRlIG1TZXR0aW5ncy5jbGFzcztcblx0XHRwcm9jZXNzUHJvcGVydGllcyhtZXRhZGF0YSwgbVNldHRpbmdzKTtcblx0XHR0YXJnZXRDb250cm9sID0gbmV3IENvbnRyb2xUeXBlKG1TZXR0aW5ncyBhcyAkQ29udHJvbFNldHRpbmdzKTtcblx0XHRpZiAoY2xhc3NEZWYpIHtcblx0XHRcdHRhcmdldENvbnRyb2wuYWRkU3R5bGVDbGFzcyhjbGFzc0RlZik7XG5cdFx0fVxuXHRcdGlmIChyZWZEZWYpIHtcblx0XHRcdHJlZkRlZi5zZXRDdXJyZW50KHRhcmdldENvbnRyb2wgYXMgYW55KTtcblx0XHR9XG5cdH0gZWxzZSBpZiAodHlwZW9mIENvbnRyb2xUeXBlID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRjb25zdCBjb250cm9sVHlwZUZuID0gQ29udHJvbFR5cGU7XG5cdFx0dGFyZ2V0Q29udHJvbCA9IGNvbnRyb2xUeXBlRm4obVNldHRpbmdzIGFzICRDb250cm9sU2V0dGluZ3MpO1xuXHR9IGVsc2Uge1xuXHRcdHRhcmdldENvbnRyb2wgPSBuZXcgVGV4dCh7IHRleHQ6IFwiTWlzc2luZyBjb21wb25lbnQgXCIgKyAoQ29udHJvbFR5cGUgYXMgYW55KSB9KTtcblx0fVxuXG5cdHJldHVybiB0YXJnZXRDb250cm9sO1xufTtcblxuZXhwb3J0IGRlZmF1bHQganN4Q29udHJvbDtcbiJdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQUE7QUFBQTs7Ozs7OztFQVNBLE1BQU1BLG1CQUFtQixHQUFHLFVBQVVDLG1CQUF3QixFQUFFQyxlQUF1QixFQUFFQyxLQUFVLEVBQUU7SUFDcEcsSUFBSUEsS0FBSyxLQUFLQyxTQUFTLElBQUksT0FBT0QsS0FBSyxLQUFLLFFBQVEsRUFBRTtNQUNyRDtJQUNEO0lBQ0EsSUFBSSxDQUFDRixtQkFBbUIsQ0FBQ0MsZUFBZSxDQUFDLEVBQUU7TUFDMUNELG1CQUFtQixDQUFDQyxlQUFlLENBQUMsR0FBRyxFQUFFO0lBQzFDO0lBQ0EsSUFBSUcsZ0JBQWdCLENBQUNGLEtBQUssQ0FBQyxFQUFFO01BQzVCRixtQkFBbUIsQ0FBQ0MsZUFBZSxDQUFDLENBQUNJLElBQUksQ0FBQ0gsS0FBSyxDQUFDO0lBQ2pELENBQUMsTUFBTSxJQUFJSSxLQUFLLENBQUNDLE9BQU8sQ0FBQ0wsS0FBSyxDQUFDLEVBQUU7TUFDaENBLEtBQUssQ0FBQ00sT0FBTyxDQUFFQyxRQUFRLElBQUs7UUFDM0JWLG1CQUFtQixDQUFDQyxtQkFBbUIsRUFBRUMsZUFBZSxFQUFFUSxRQUFRLENBQUM7TUFDcEUsQ0FBQyxDQUFDO0lBQ0gsQ0FBQyxNQUFNO01BQ05DLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDVCxLQUFLLENBQUMsQ0FBQ00sT0FBTyxDQUFFSSxRQUFRLElBQUs7UUFDeENiLG1CQUFtQixDQUFDQyxtQkFBbUIs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