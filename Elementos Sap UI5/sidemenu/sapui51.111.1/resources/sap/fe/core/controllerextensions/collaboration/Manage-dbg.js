/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/controllerextensions/collaboration/CollaborationCommon", "sap/fe/core/converters/MetaModelConverter", "sap/m/MessageToast", "sap/ui/core/Core", "sap/ui/core/Fragment", "sap/ui/core/library", "../../templating/PropertyHelper"], function (CollaborationCommon, MetaModelConverter, MessageToast, Core, Fragment, coreLibrary, PropertyHelper) {
  "use strict";

  var _exports = {};
  var isPathExpression = PropertyHelper.isPathExpression;
  var UserStatus = CollaborationCommon.UserStatus;
  var UserEditingState = CollaborationCommon.UserEditingState;
  var shareObject = CollaborationCommon.shareObject;
  var getText = CollaborationCommon.getText;
  var CollaborationUtils = CollaborationCommon.CollaborationUtils;
  const ValueState = coreLibrary.ValueState;
  const openManageDialog = async function (view) {
    let dialog = byId("dialog");
    if (!dialog) {
      dialog = await createManageCollaborationDialog(view);
    }
    await readInvitedUsers(view);
    dialog.open();
  };
  _exports.openManageDialog = openManageDialog;
  async function createManageCollaborationDialog(view) {
    const pDialog = view.getController().getExtensionAPI().loadFragment({
      name: "sap.fe.core.controllerextensions.collaboration.ManageDialog",
      id: "manageCollaborationDraft",
      controller: {
        share: share,
        addUser: addUser,
        removeUser: removeUser,
        close: closeDialog,
        addUserChanged: addUserChanged,
        formatUserStatus: formatUserStatus,
        formatUserStatusColor: formatUserStatusColor
      }
    });
    return pDialog.then(function (dialog) {
      view.addDependent(dialog);
      return dialog;
    }).catch(function () {
      throw "not this time";
    });
  }
  async function readInvitedUsers(view) {
    const model = view.getModel();
    // TODO: inform model colleagues on missing TS definition
    const parameters = {
      $select: "UserID,UserDescription,UserEditingState"
    };
    const invitedUserList = model.bindList("DraftAdministrativeData/DraftAdministrativeUser", view.getBindingContext(), [], [], parameters);
    const internalModelContext = view.getBindingContext("internal");
    // TODO: limit?
    return invitedUserList.requestContexts(0, 100).then(function (aContexts) {
      const invitedUsers = [];
      const activeUsers = view.getModel("internal").getProperty("/collaboration/activeUsers") || [];
      const me = CollaborationUtils.getMe(view);
      let userStatus;
      if ((aContexts === null || aContexts === void 0 ? void 0 : aContexts.length) > 0) {
        aContexts.forEach(function (oContext) {
          const userData = oContext.getObject();
          const isMe = (me === null || me === void 0 ? void 0 : me.id) === userData.UserID;
          const isActive = activeUsers.find(u => u.id === userData.UserID);
          let userDescription = userData.UserDescription || userData.UserID;
          const initials = CollaborationUtils.formatInitials(userDescription);
          userDescription += isMe ? ` (${CollaborationUtils.getText("C_COLLABORATIONDRAFT_YOU")})` : "";
          switch (userData.UserEditingState) {
            case UserEditingState.NoChanges:
              userStatus = isActive ? UserStatus.CurrentlyEditing : UserStatus.NoChangesMade;
              break;
            case UserEditingState.InProgress:
              userStatus = isActive ? UserStatus.CurrentlyEditing : UserStatus.ChangesMade;
              break;
            default:
              userStatus = UserStatus.NotYetInvited;
          }
          const user = {
            id: userData.UserID,
            name: userDescription,
            status: userStatus,
            color: CollaborationUtils.getUserColor(userData.UserID, activeUsers, invitedUsers),
            initials: initials,
            me: isMe
          };
          invitedUsers.push(user);
        });
      } else {
        //not yet shared, just add me
        invitedUsers.push(me);
      }
      internalModelContext.setProperty("collaboration/UserID", "");
      internalModelContext.setProperty("collaboration/UserDescription", "");
      internalModelContext.setProperty("collaboration/invitedUsers", invitedUsers);
    }).catch(function () {
      // TODO: handle this case, close dialog?
    });
  }
  _exports.readInvitedUsers = readInvitedUsers;
  function addUser(event) {
    const addButton = event.getSource();
    const internalModelContext = addButton.getBindingContext("internal");
    const invitedUsers = internalModelContext.getProperty("invitedUsers") || [];
    const activeUsers = addButton.getModel("internal").getProperty("/collaboration/activeUsers");
    const newUser = {
      id: internalModelContext === null || internalModelContext === void 0 ? void 0 : internalModelContext.getProperty("UserID"),
      name: internalModelContext === null || internalModelContext === void 0 ? void 0 : internalModelContext.getProperty("UserDescription")
    };
    if (!(invitedUsers.findIndex(user => user.id === newUser.id) > -1 || newUser.id === newUser.name && newUser.id === "")) {
      newUser.name = newUser.name || newUser.id;
      newUser.initials = CollaborationUtils.formatInitials(newUser.name);
      newUser.color = CollaborationUtils.getUserColor(newUser.id, activeUsers, invitedUsers);
      newUser.transient = true;
      newUser.status = UserStatus.NotYetInvited;
      invitedUsers.unshift(newUser);
      internalModelContext.setProperty("invitedUsers", invitedUsers);
      internalModelContext.setProperty("UserID", "");
      internalModelContext.setProperty("UserDescription", "");
    }
  }
  function addUserChanged(event) {
    const userInput = event.getSource();
    event.getParameter("promise").then(function (newUserId) {
      const internalModelContext = userInput.getBindingContext("internal");
      const invitedUsers = internalModelContext.getProperty("invitedUsers") || [];
      if (invitedUsers.findIndex(user => user.id === newUserId) > -1) {
        userInput.setValueState("Error");
        userInput.setValueStateText(getText("C_COLLABORATIONDRAFT_INVITATION_USER_ERROR"));
      } else {
        userInput.setValueState("None");
        userInput.setValueStateText("");
      }
    }).catch(function () {
      throw "User couldn't be determined at all";
    });
  }
  function removeUser(event) {
    removeUserFromList(event.getSource());
  }
  function removeUserFromList(item) {
    const internalModelContext = item.getBindingContext("pageInternal");
    const deleteUserID = item.getBindingContext("internal").getProperty("id");
    let invitedUsers = internalModelContext.getProperty("collaboration/invitedUsers");
    invitedUsers = invitedUsers.filter(user => user.id !== deleteUserID);
    internalModelContext.setProperty("collaboration/invitedUsers", invitedUsers);
  }
  function byId(id) {
    return Core.byId(`manageCollaborationDraft--${id}`);
  }
  function closeDialog() {
    byId("dialog").close();
  }
  function getSharedItemName(bindingContext) {
    var _dataModel$targetObje, _dataModel$targetObje2;
    const model = bindingContext.getModel();
    const metaModel = model.getMetaModel();
    const entityPath = metaModel.getMetaPath(bindingContext.getPath());
    const dataModel = MetaModelConverter.getInvolvedDataModelObjects(metaModel.getContext(entityPath));
    const headerInfo = (_dataModel$targetObje = dataModel.targetObject.entityType.annotations) === null || _dataModel$targetObje === void 0 ? void 0 : (_dataModel$targetObje2 = _dataModel$targetObje.UI) === null || _dataModel$targetObje2 === void 0 ? void 0 : _dataModel$targetObje2.HeaderInfo;
    let sharedItemName = "";
    const title = headerInfo === null || headerInfo === void 0 ? void 0 : headerInfo.Title;
    if (title) {
      sharedItemName = isPathExpression(title.Value) ? bindingContext.getProperty(title.Value.path) : title.Value;
    }
    return sharedItemName || (headerInfo === null || headerInfo === void 0 ? void 0 : headerInfo.TypeName) || "";
  }
  _exports.getSharedItemName = getSharedItemName;
  async function share(event) {
    const users = [];
    const source = event.getSource();
    const bindingContext = source.getBindingContext();
    const contexts = byId("userList").getBinding("items").getContexts();
    let numberOfNewInvitedUsers = 0;
    contexts.forEach(function (context) {
      users.push({
        UserID: context.getProperty("id"),
        UserAccessRole: "O" // For now according to UX every user retrieves the owner role
      });

      if (context.getObject().status === 0) {
        numberOfNewInvitedUsers++;
      }
    });
    try {
      await shareObject(bindingContext, users);
      MessageToast.show(getText("C_COLLABORATIONDRAFT_INVITATION_SUCCESS_TOAST", numberOfNewInvitedUsers.toString(), getSharedItemName(bindingContext)));
    } catch {
      MessageToast.show(getText("C_COLLABORATIONDRAFT_INVITATION_FAILED_TOAST"));
    }
    closeDialog();
  }
  _exports.share = share;
  async function showUserDetails(event, view) {
    const source = event.getSource();
    let popover = byId("userDetails");
    if (!popover) {
      popover = await createUserDetailsPopover(view);
    }
    popover.setBindingContext(source.getBindingContext("internal"), "internal");
    popover.openBy(source, false);
  }
  _exports.showUserDetails = showUserDetails;
  async function createUserDetailsPopover(view) {
    const popoverPromise = Fragment.load({
      id: "manageCollaborationDraft",
      // todo should be view id
      name: "sap.fe.core.controllerextensions.collaboration.UserDetails"
    });
    return popoverPromise.then(function (popover) {
      view.addDependent(popover);
      return popover;
    }).catch(function () {
      throw "not this time";
    });
  }
  function formatUserStatus(userStatus) {
    switch (userStatus) {
      case UserStatus.CurrentlyEditing:
        return getText("C_COLLABORATIONDRAFT_USER_CURRENTLY_EDITING");
      case UserStatus.ChangesMade:
        return getText("C_COLLABORATIONDRAFT_USER_CHANGES_MADE");
      case UserStatus.NoChangesMade:
        return getText("C_COLLABORATIONDRAFT_USER_NO_CHANGES_MADE");
      case UserStatus.NotYetInvited:
      default:
        return getText("C_COLLABORATIONDRAFT_USER_NOT_YET_INVITED");
    }
  }
  function formatUserStatusColor(userStatus) {
    switch (userStatus) {
      case UserStatus.CurrentlyEditing:
        return ValueState.Success;
      case UserStatus.ChangesMade:
        return ValueState.Warning;
      case UserStatus.NoChangesMade:
      case UserStatus.NotYetInvited:
      default:
        return ValueState.Information;
    }
  }
  return _exports;
}, false);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWYWx1ZVN0YXRlIiwiY29yZUxpYnJhcnkiLCJvcGVuTWFuYWdlRGlhbG9nIiwidmlldyIsImRpYWxvZyIsImJ5SWQiLCJjcmVhdGVNYW5hZ2VDb2xsYWJvcmF0aW9uRGlhbG9nIiwicmVhZEludml0ZWRVc2VycyIsIm9wZW4iLCJwRGlhbG9nIiwiZ2V0Q29udHJvbGxlciIsImdldEV4dGVuc2lvbkFQSSIsImxvYWRGcmFnbWVudCIsIm5hbWUiLCJpZCIsImNvbnRyb2xsZXIiLCJzaGFyZSIsImFkZFVzZXIiLCJyZW1vdmVVc2VyIiwiY2xvc2UiLCJjbG9zZURpYWxvZyIsImFkZFVzZXJDaGFuZ2VkIiwiZm9ybWF0VXNlclN0YXR1cyIsImZvcm1hdFVzZXJTdGF0dXNDb2xvciIsInRoZW4iLCJhZGREZXBlbmRlbnQiLCJjYXRjaCIsIm1vZGVsIiwiZ2V0TW9kZWwiLCJwYXJhbWV0ZXJzIiwiJHNlbGVjdCIsImludml0ZWRVc2VyTGlzdCIsImJpbmRMaXN0IiwiZ2V0QmluZGluZ0NvbnRleHQiLCJpbnRlcm5hbE1vZGVsQ29udGV4dCIsInJlcXVlc3RDb250ZXh0cyIsImFDb250ZXh0cyIsImludml0ZWRVc2VycyIsImFjdGl2ZVVzZXJzIiwiZ2V0UHJvcGVydHkiLCJtZSIsIkNvbGxhYm9yYXRpb25VdGlscyIsImdldE1lIiwidXNlclN0YXR1cyIsImxlbmd0aCIsImZvckVhY2giLCJvQ29udGV4dCIsInVzZXJEYXRhIiwiZ2V0T2JqZWN0IiwiaXNNZSIsIlVzZXJJRCIsImlzQWN0aXZlIiwiZmluZCIsInUiLCJ1c2VyRGVzY3JpcHRpb24iLCJVc2VyRGVzY3JpcHRpb24iLCJpbml0aWFscyIsImZvcm1hdEluaXRpYWxzIiwiZ2V0VGV4dCIsIlVzZXJFZGl0aW5nU3RhdGUiLCJOb0NoYW5nZXMiLCJVc2VyU3RhdHVzIiwiQ3VycmVudGx5RWRpdGluZyIsIk5vQ2hhbmdlc01hZGUiLCJJblByb2dyZXNzIiwiQ2hhbmdlc01hZGUiLCJOb3RZZXRJbnZpdGVkIiwidXNlciIsInN0YXR1cyIsImNvbG9yIiwiZ2V0VXNlckNvbG9yIiwicHVzaCIsInNldFByb3BlcnR5IiwiZXZlbnQiLCJhZGRCdXR0b24iLCJnZXRTb3VyY2UiLCJuZXdVc2VyIiwiZmluZEluZGV4IiwidHJhbnNpZW50IiwidW5zaGlmdCIsInVzZXJJbnB1dCIsImdldFBhcmFtZXRlciIsIm5ld1VzZXJJZCIsInNldFZhbHVlU3RhdGUiLCJzZXRWYWx1ZVN0YXRlVGV4dCIsInJlbW92ZVVzZXJGcm9tTGlzdCIsIml0ZW0iLCJkZWxldGVVc2VySUQiLCJmaWx0ZXIiLCJDb3JlIiwiZ2V0U2hhcmVkSXRlbU5hbWUiLCJiaW5kaW5nQ29udGV4dCIsIm1ldGFNb2RlbCIsImdldE1ldGFNb2RlbCIsImVudGl0eVBhdGgiLCJnZXRNZXRhUGF0aCIsImdldFBhdGgiLCJkYXRhTW9kZWwiLCJNZXRhTW9kZWxDb252ZXJ0ZXIiLCJnZXRJbnZvbHZlZERhdGFNb2RlbE9iamVjdHMiLCJnZXRDb250ZXh0IiwiaGVhZGVySW5mbyIsInRhcmdldE9iamVjdCIsImVudGl0eVR5cGUiLCJhbm5vdGF0aW9ucyIsIlVJIiwiSGVhZGVySW5mbyIsInNoYXJlZEl0ZW1OYW1lIiwidGl0bGUiLCJUaXRsZSIsImlzUGF0aEV4cHJlc3Npb24iLCJWYWx1ZSIsInBhdGgiLCJUeXBlTmFtZSIsInVzZXJzIiwic291cmNlIiwiY29udGV4dHMiLCJnZXRCaW5kaW5nIiwiZ2V0Q29udGV4dHMiLCJudW1iZXJPZk5ld0ludml0ZWRVc2VycyIsImNvbnRleHQiLCJVc2VyQWNjZXNzUm9sZSIsInNoYXJlT2JqZWN0IiwiTWVzc2FnZVRvYXN0Iiwic2hvdyIsInRvU3RyaW5nIiwic2hvd1VzZXJEZXRhaWxzIiwicG9wb3ZlciIsImNyZWF0ZVVzZXJEZXRhaWxzUG9wb3ZlciIsInNldEJpbmRpbmdDb250ZXh0Iiwib3BlbkJ5IiwicG9wb3ZlclByb21pc2UiLCJGcmFnbWVudCIsImxvYWQiLCJTdWNjZXNzIiwiV2FybmluZyIsIkluZm9ybWF0aW9uIl0sInNvdXJjZVJvb3QiOiIuIiwic291cmNlcyI6WyJNYW5hZ2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBCYWNrZW5kVXNlciwgVXNlciB9IGZyb20gXCJzYXAvZmUvY29yZS9jb250cm9sbGVyZXh0ZW5zaW9ucy9jb2xsYWJvcmF0aW9uL0NvbGxhYm9yYXRpb25Db21tb25cIjtcbmltcG9ydCB7XG5cdENvbGxhYm9yYXRpb25VdGlscyxcblx0Z2V0VGV4dCxcblx0c2hhcmVPYmplY3QsXG5cdFVzZXJFZGl0aW5nU3RhdGUsXG5cdFVzZXJTdGF0dXNcbn0gZnJvbSBcInNhcC9mZS9jb3JlL2NvbnRyb2xsZXJleHRlbnNpb25zL2NvbGxhYm9yYXRpb24vQ29sbGFib3JhdGlvbkNvbW1vblwiO1xuaW1wb3J0ICogYXMgTWV0YU1vZGVsQ29udmVydGVyIGZyb20gXCJzYXAvZmUvY29yZS9jb252ZXJ0ZXJzL01ldGFNb2RlbENvbnZlcnRlclwiO1xuaW1wb3J0IHR5cGUgeyBJbnRlcm5hbE1vZGVsQ29udGV4dCB9IGZyb20gXCJzYXAvZmUvY29yZS9oZWxwZXJzL01vZGVsSGVscGVyXCI7XG5pbXBvcnQgdHlwZSBCdXR0b24gZnJvbSBcInNhcC9tL0J1dHRvblwiO1xuaW1wb3J0IHR5cGUgRGlhbG9nIGZyb20gXCJzYXAvbS9EaWFsb2dcIjtcbmltcG9ydCB0eXBlIElucHV0IGZyb20gXCJzYXAvbS9JbnB1dFwiO1xuaW1wb3J0IE1lc3NhZ2VUb2FzdCBmcm9tIFwic2FwL20vTWVzc2FnZVRvYXN0XCI7XG5pbXBvcnQgdHlwZSBQb3BvdmVyIGZyb20gXCJzYXAvbS9Qb3BvdmVyXCI7XG5pbXBvcnQgdHlwZSBUYWJsZSBmcm9tIFwic2FwL20vVGFibGVcIjtcbmltcG9ydCB0eXBlIEV2ZW50IGZyb20gXCJzYXAvdWkvYmFzZS9FdmVudFwiO1xuaW1wb3J0IHR5cGUgQ29udHJvbCBmcm9tIFwic2FwL3VpL2NvcmUvQ29udHJvbFwiO1xuaW1wb3J0IENvcmUgZnJvbSBcInNhcC91aS9jb3JlL0NvcmVcIjtcbmltcG9ydCBGcmFnbWVudCBmcm9tIFwic2FwL3VpL2NvcmUvRnJhZ21lbnRcIjtcbmltcG9ydCBjb3JlTGlicmFyeSBmcm9tIFwic2FwL3VpL2NvcmUvbGlicmFyeVwiO1xuaW1wb3J0IHR5cGUgVmlldyBmcm9tIFwic2FwL3VpL2NvcmUvbXZjL1ZpZXdcIjtcbmltcG9ydCB0eXBlIENvbnRleHQgZnJvbSBcInNhcC91aS9tb2RlbC9vZGF0YS92NC9Db250ZXh0XCI7XG5pbXBvcnQgdHlwZSBPRGF0YUxpc3RCaW5kaW5nIGZyb20gXCJzYXAvdWkvbW9kZWwvb2RhdGEvdjQvT0RhdGFMaXN0QmluZGluZ1wiO1xuaW1wb3J0IHR5cGUgT0RhdGFNb2RlbCBmcm9tIFwic2FwL3VpL21vZGVsL29kYXRhL3Y0L09EYXRhTW9kZWxcIjtcbmltcG9ydCB0eXBlIHsgVjRDb250ZXh0IH0gZnJvbSBcIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL3R5cGVzL2V4dGVuc2lvbl90eXBlc1wiO1xuaW1wb3J0IHsgaXNQYXRoRXhwcmVzc2lvbiB9IGZyb20gXCIuLi8uLi90ZW1wbGF0aW5nL1Byb3BlcnR5SGVscGVyXCI7XG5jb25zdCBWYWx1ZVN0YXRlID0gY29yZUxpYnJhcnkuVmFsdWVTdGF0ZTtcblxuZXhwb3J0IGNvbnN0IG9wZW5NYW5hZ2VEaWFsb2cgPSBhc3luYyBmdW5jdGlvbiAodmlldzogVmlldykge1xuXHRsZXQgZGlhbG9nOiBhbnkgPSBieUlkKFwiZGlhbG9nXCIpO1xuXG5cdGlmICghZGlhbG9nKSB7XG5cdFx0ZGlhbG9nID0gYXdhaXQgY3JlYXRlTWFuYWdlQ29sbGFib3JhdGlvbkRpYWxvZyh2aWV3KTtcblx0fVxuXG5cdGF3YWl0IHJlYWRJbnZpdGVkVXNlcnModmlldyk7XG5cdGRpYWxvZy5vcGVuKCk7XG59O1xuXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVNYW5hZ2VDb2xsYWJvcmF0aW9uRGlhbG9nKHZpZXc6IFZpZXcpIHtcblx0Y29uc3QgcERpYWxvZzogUHJvbWlzZTxhbnk+ID0gKHZpZXcuZ2V0Q29udHJvbGxlcigpIGFzIGFueSkuZ2V0RXh0ZW5zaW9uQVBJKCkubG9hZEZyYWdtZW50KHtcblx0XHRuYW1lOiBcInNhcC5mZS5jb3JlLmNvbnRyb2xsZXJleHRlbnNpb25zLmNvbGxhYm9yYXRpb24uTWFuYWdlRGlhbG9nXCIsXG5cdFx0aWQ6IFwibWFuYWdlQ29sbGFib3JhdGlvbkRyYWZ0XCIsXG5cdFx0Y29udHJvbGxlcjoge1xuXHRcdFx0c2hhcmU6IHNoYXJlLFxuXHRcdFx0YWRkVXNlcjogYWRkVXNlcixcblx0XHRcdHJlbW92ZVVzZXI6IHJlbW92ZVVzZXIsXG5cdFx0XHRjbG9zZTogY2xvc2VEaWFsb2csXG5cdFx0XHRhZGRVc2VyQ2hhbmdlZDogYWRkVXNlckNoYW5nZWQsXG5cdFx0XHRmb3JtYXRVc2VyU3RhdHVzOiBmb3JtYXRVc2VyU3RhdHVzLFxuXHRcdFx0Zm9ybWF0VXNlclN0YXR1c0NvbG9yOiBmb3JtYXRVc2VyU3RhdHVzQ29sb3Jcblx0XHR9XG5cdH0pO1xuXHRyZXR1cm4gcERpYWxvZ1xuXHRcdC50aGVuKGZ1bmN0aW9uIChkaWFsb2c6IGFueSkge1xuXHRcdFx0dmlldy5hZGREZXBlbmRlbnQoZGlhbG9nKTtcblx0XHRcdHJldHVybiBkaWFsb2c7XG5cdFx0fSlcblx0XHQuY2F0Y2goZnVuY3Rpb24gKCkge1xuXHRcdFx0dGhyb3cgXCJub3QgdGhpcyB0aW1lXCI7XG5cdFx0fSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWFkSW52aXRlZFVzZXJzKHZpZXc6IFZpZXcpIHtcblx0Y29uc3QgbW9kZWwgPSB2aWV3LmdldE1vZGVsKCkgYXMgT0RhdGFNb2RlbDtcblx0Ly8gVE9ETzogaW5mb3JtIG1vZGVsIGNvbGxlYWd1ZXMgb24gbWlzc2luZyBUUyBkZWZpbml0aW9uXG5cdGNvbnN0IHBhcmFtZXRlcnM6IGFueSA9IHtcblx0XHQkc2VsZWN0OiBcIlVzZXJJRCxVc2VyRGVzY3JpcHRpb24sVXNlckVkaXRpbmdTdGF0ZVwiXG5cdH07XG5cdGNvbnN0IGludml0ZWRVc2VyTGlzdCA9IG1vZGVsLmJpbmRMaXN0KFxuXHRcdFwiRHJhZnRBZG1pbmlzdHJhdGl2ZURhdGEvRHJhZnRBZG1pbmlzdHJhdGl2ZVVzZXJcIixcblx0XHR2aWV3LmdldEJpbmRpbmdDb250ZXh0KCkgYXMgQ29udGV4dCxcblx0XHRbXSxcblx0XHRbXSxcblx0XHRwYXJhbWV0ZXJzXG5cdCk7XG5cdGNvbnN0IGludGVybmFsTW9kZWxDb250ZXh0ID0gdmlldy5nZXRCaW5kaW5nQ29udGV4dChcImludGVybmFsXCIpIGFzIEludGVybmFsTW9kZWxDb250ZXh0O1xuXHQvLyBUT0RPOiBsaW1pdD9cblx0cmV0dXJuIGludml0ZWRVc2VyTGlzdFxuXHRcdC5yZXF1ZXN0Q29udGV4dHMoMCwgMTAwKVxuXHRcdC50aGVuKGZ1bmN0aW9uIChhQ29udGV4dHMpIHtcblx0XHRcdGNvbnN0IGludml0ZWRVc2VyczogVXNlcltdID0gW107XG5cdFx0XHRjb25zdCBhY3RpdmVVc2VycyA9IHZpZXcuZ2V0TW9kZWwoXCJpbnRlcm5hbFwiKS5nZXRQcm9wZXJ0eShcIi9jb2xsYWJvcmF0aW9uL2FjdGl2ZVVzZXJzXCIpIHx8IFtdO1xuXHRcdFx0Y29uc3QgbWUgPSBDb2xsYWJvcmF0aW9uVXRpbHMuZ2V0TWUodmlldyk7XG5cdFx0XHRsZXQgdXNlclN0YXR1czogVXNlclN0YXR1cztcblx0XHRcdGlmIChhQ29udGV4dHM/Lmxlbmd0aCA+IDApIHtcblx0XHRcdFx0YUNvbnRleHRzLmZvckVhY2goZnVuY3Rpb24gKG9Db250ZXh0KSB7XG5cdFx0XHRcdFx0Y29uc3QgdXNlckRhdGEgPSBvQ29udGV4dC5nZXRPYmplY3QoKSBhcyBCYWNrZW5kVXNlcjtcblx0XHRcdFx0XHRjb25zdCBpc01lOiBib29sZWFuID0gbWU/LmlkID09PSB1c2VyRGF0YS5Vc2VySUQ7XG5cdFx0XHRcdFx0Y29uc3QgaXNBY3RpdmUgPSBhY3RpdmVVc2Vycy5maW5kKCh1OiBVc2VyKSA9PiB1LmlkID09PSB1c2VyRGF0YS5Vc2VySUQpO1xuXHRcdFx0XHRcdGxldCB1c2VyRGVzY3JpcHRpb24gPSB1c2VyRGF0YS5Vc2VyRGVzY3JpcHRpb24gfHwgdXNlckRhdGEuVXNlcklEO1xuXHRcdFx0XHRcdGNvbnN0IGluaXRpYWxzID0gQ29sbGFib3JhdGlvblV0aWxzLmZvcm1hdEluaXRpYWxzKHVzZXJEZXNjcmlwdGlvbik7XG5cdFx0XHRcdFx0dXNlckRlc2NyaXB0aW9uICs9IGlzTWUgPyBgICgke0NvbGxhYm9yYXRpb25VdGlscy5nZXRUZXh0KFwiQ19DT0xMQUJPUkFUSU9ORFJBRlRfWU9VXCIpfSlgIDogXCJcIjtcblx0XHRcdFx0XHRzd2l0Y2ggKHVzZXJEYXRhLlVzZXJFZGl0aW5nU3RhdGUpIHtcblx0XHRcdFx0XHRcdGNhc2UgVXNlckVkaXRpbmdTdGF0ZS5Ob0NoYW5nZXM6XG5cdFx0XHRcdFx0XHRcdHVzZXJTdGF0dXMgPSBpc0FjdGl2ZSA/IFVzZXJTdGF0dXMuQ3VycmVudGx5RWRpdGluZyA6IFVzZXJTdGF0dXMuTm9DaGFuZ2VzTWFkZTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRjYXNlIFVzZXJFZGl0aW5nU3RhdGUuSW5Qcm9ncmVzczpcblx0XHRcdFx0XHRcdFx0dXNlclN0YXR1cyA9IGlzQWN0aXZlID8gVXNlclN0YXR1cy5DdXJyZW50bHlFZGl0aW5nIDogVXNlclN0YXR1cy5DaGFuZ2VzTWFkZTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0XHR1c2VyU3RhdHVzID0gVXNlclN0YXR1cy5Ob3RZZXRJbnZpdGVkO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb25zdCB1c2VyOiBVc2VyID0ge1xuXHRcdFx0XHRcdFx0aWQ6IHVzZXJEYXRhLlVzZXJJRCxcblx0XHRcdFx0XHRcdG5hbWU6IHVzZXJEZXNjcmlwdGlvbixcblx0XHRcdFx0XHRcdHN0YXR1czogdXNlclN0YXR1cyxcblx0XHRcdFx0XHRcdGNvbG9yOiBDb2xsYWJvcmF0aW9uVXRpbHMuZ2V0VXNlckNvbG9yKHVzZXJEYXRhLlVzZXJJRCwgYWN0aXZlVXNlcnMsIGludml0ZWRVc2VycyksXG5cdFx0XHRcdFx0XHRpbml0aWFsczogaW5pdGlhbHMsXG5cdFx0XHRcdFx0XHRtZTogaXNNZVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0aW52aXRlZFVzZXJzLnB1c2godXNlcik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9ub3QgeWV0IHNoYXJlZCwganVzdCBhZGQgbWVcblx0XHRcdFx0aW52aXRlZFVzZXJzLnB1c2gobWUpO1xuXHRcdFx0fVxuXHRcdFx0aW50ZXJuYWxNb2RlbENvbnRleHQuc2V0UHJvcGVydHkoXCJjb2xsYWJvcmF0aW9uL1VzZXJJRFwiLCBcIlwiKTtcblx0XHRcdGludGVybmFsTW9kZWxDb250ZXh0LnNldFByb3BlcnR5KFwiY29sbGFib3JhdGlvbi9Vc2VyRGVzY3JpcHRpb25cIiwgXCJcIik7XG5cdFx0XHRpbnRlcm5hbE1vZGVsQ29udGV4dC5zZXRQcm9wZXJ0eShcImNvbGxhYm9yYXRpb24vaW52aXRlZFVzZXJzXCIsIGludml0ZWRVc2Vycyk7XG5cdFx0fSlcblx0XHQuY2F0Y2goZnVuY3Rpb24gKCkge1xuXHRcdFx0Ly8gVE9ETzogaGFuZGxlIHRoaXMgY2FzZSwgY2xvc2UgZGlhbG9nP1xuXHRcdH0pO1xufVxuXG5mdW5jdGlvbiBhZGRVc2VyKGV2ZW50OiBFdmVudCkge1xuXHRjb25zdCBhZGRCdXR0b24gPSBldmVudC5nZXRTb3VyY2UoKSBhcyBCdXR0b247XG5cdGNvbnN0IGludGVybmFsTW9kZWxDb250ZXh0ID0gYWRkQnV0dG9uLmdldEJpbmRpbmdDb250ZXh0KFwiaW50ZXJuYWxcIikgYXMgSW50ZXJuYWxNb2RlbENvbnRleHQ7XG5cdGNvbnN0IGludml0ZWRVc2VyczogVXNlcltdID0gaW50ZXJuYWxNb2RlbENvbnRleHQuZ2V0UHJvcGVydHkoXCJpbnZpdGVkVXNlcnNcIikgfHwgW107XG5cdGNvbnN0IGFjdGl2ZVVzZXJzID0gYWRkQnV0dG9uLmdldE1vZGVsKFwiaW50ZXJuYWxcIikuZ2V0UHJvcGVydHkoXCIvY29sbGFib3JhdGlvbi9hY3RpdmVVc2Vyc1wiKTtcblx0Y29uc3QgbmV3VXNlcjogVXNlciA9IHtcblx0XHRpZDogaW50ZXJuYWxNb2RlbENvbnRleHQ/LmdldFByb3BlcnR5KFwiVXNlcklEXCIpLFxuXHRcdG5hbWU6IGludGVybmFsTW9kZWxDb250ZXh0Py5nZXRQcm9wZXJ0eShcIlVzZXJEZXNjcmlwdGlvblwiKVxuXHR9O1xuXG5cdGlmICghKGludml0ZWRVc2Vycy5maW5kSW5kZXgoKHVzZXIpID0+IHVzZXIuaWQgPT09IG5ld1VzZXIuaWQpID4gLTEgfHwgKG5ld1VzZXIuaWQgPT09IG5ld1VzZXIubmFtZSAmJiBuZXdVc2VyLmlkID09PSBcIlwiKSkpIHtcblx0XHRuZXdVc2VyLm5hbWUgPSBuZXdVc2VyLm5hbWUgfHwgbmV3VXNlci5pZDtcblx0XHRuZXdVc2VyLmluaXRpYWxzID0gQ29sbGFib3JhdGlvblV0aWxzLmZvcm1hdEluaXRpYWxzKG5ld1VzZXIubmFtZSk7XG5cdFx0bmV3VXNlci5jb2xvciA9IENvbGxhYm9yYXRpb25VdGlscy5nZXRVc2VyQ29sb3IobmV3VXNlci5pZCwgYWN0aXZlVXNlcnMsIGludml0ZWRVc2Vycyk7XG5cdFx0bmV3VXNlci50cmFuc2llbnQgPSB0cnVlO1xuXHRcdG5ld1VzZXIuc3RhdHVzID0gVXNlclN0YXR1cy5Ob3RZZXRJbnZpdGVkO1xuXHRcdGludml0ZWRVc2Vycy51bnNoaWZ0KG5ld1VzZXIpO1xuXHRcdGludGVybmFsTW9kZWxDb250ZXh0LnNldFByb3BlcnR5KFwiaW52aXRlZFVzZXJzXCIsIGludml0ZWRVc2Vycyk7XG5cdFx0aW50ZXJuYWxNb2RlbENvbnRleHQuc2V0UHJvcGVydHkoXCJVc2VySURcIiwgXCJcIik7XG5cdFx0aW50ZXJuYWxNb2RlbENvbnRleHQuc2V0UHJvcGVydHkoXCJVc2VyRGVzY3JpcHRpb25cIiwgXCJcIik7XG5cdH1cbn1cblxuZnVuY3Rpb24gYWRkVXNlckNoYW5nZWQoZXZlbnQ6IEV2ZW50KSB7XG5cdGNvbnN0IHVzZXJJbnB1dCA9IGV2ZW50LmdldFNvdXJjZSgpIGFzIElucHV0O1xuXHRldmVudFxuXHRcdC5nZXRQYXJhbWV0ZXIoXCJwcm9taXNlXCIpXG5cdFx0LnRoZW4oZnVuY3Rpb24gKG5ld1VzZXJJZDogc3RyaW5nKSB7XG5cdFx0XHRjb25zdCBpbnRlcm5hbE1vZGVsQ29udGV4dCA9IHVzZXJJbnB1dC5nZXRCaW5kaW5nQ29udGV4dChcImludGVybmFsXCIpIGFzIEludGVybmFsTW9kZWxDb250ZXh0O1xuXHRcdFx0Y29uc3QgaW52aXRlZFVzZXJzOiBVc2VyW10gPSBpbnRlcm5hbE1vZGVsQ29udGV4dC5nZXRQcm9wZXJ0eShcImludml0ZWRVc2Vyc1wiKSB8fCBbXTtcblx0XHRcdGlmIChpbnZpdGVkVXNlcnMuZmluZEluZGV4KCh1c2VyKSA9PiB1c2VyLmlkID09PSBuZXdVc2VySWQpID4gLTEpIHtcblx0XHRcdFx0dXNlcklucHV0LnNldFZhbHVlU3RhdGUoXCJFcnJvclwiKTtcblx0XHRcdFx0dXNlcklucHV0LnNldFZhbHVlU3RhdGVUZXh0KGdldFRleHQoXCJDX0NPTExBQk9SQVRJT05EUkFGVF9JTlZJVEFUSU9OX1VTRVJfRVJST1JcIikpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dXNlcklucHV0LnNldFZhbHVlU3RhdGUoXCJOb25lXCIpO1xuXHRcdFx0XHR1c2VySW5wdXQuc2V0VmFsdWVTdGF0ZVRleHQoXCJcIik7XG5cdFx0XHR9XG5cdFx0fSlcblx0XHQuY2F0Y2goZnVuY3Rpb24gKCkge1xuXHRcdFx0dGhyb3cgXCJVc2VyIGNvdWxkbid0IGJlIGRldGVybWluZWQgYXQgYWxsXCI7XG5cdFx0fSk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVVzZXIoZXZlbnQ6IEV2ZW50KSB7XG5cdHJlbW92ZVVzZXJGcm9tTGlzdChldmVudC5nZXRTb3VyY2UoKSk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVVzZXJGcm9tTGlzdChpdGVtOiBhbnkpIHtcblx0Y29uc3QgaW50ZXJuYWxNb2RlbENvbnRleHQgPSBpdGVtLmdldEJpbmRpbmdDb250ZXh0KFwicGFnZUludGVybmFsXCIpO1xuXHRjb25zdCBkZWxldGVVc2VySUQgPSBpdGVtLmdldEJpbmRpbmdDb250ZXh0KFwiaW50ZXJuYWxcIikuZ2V0UHJvcGVydHkoXCJpZFwiKTtcblx0bGV0IGludml0ZWRVc2VyczogVXNlcltdID0gaW50ZXJuYWxNb2RlbENvbnRleHQuZ2V0UHJvcGVydHkoXCJjb2xsYWJvcmF0aW9uL2ludml0ZWRVc2Vyc1wiKTtcblx0aW52aXRlZFVzZXJzID0gaW52aXRlZFVzZXJzLmZpbHRlcigodXNlcikgPT4gdXNlci5pZCAhPT0gZGVsZXRlVXNlcklEKTtcblx0aW50ZXJuYWxNb2RlbENvbnRleHQuc2V0UHJvcGVydHkoXCJjb2xsYWJvcmF0aW9uL2ludml0ZWRVc2Vyc1wiLCBpbnZpdGVkVXNlcnMpO1xufVxuXG5mdW5jdGlvbiBieUlkKGlkOiBzdHJpbmcpOiBhbnkge1xuXHRyZXR1cm4gQ29yZS5ieUlkKGBtYW5hZ2VDb2xsYWJvcmF0aW9uRHJhZnQtLSR7aWR9YCk7XG59XG5cbmZ1bmN0aW9uIGNsb3NlRGlhbG9nKCkge1xuXHQoYnlJZChcImRpYWxvZ1wiKSBhcyBEaWFsb2cpLmNsb3NlKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTaGFyZWRJdGVtTmFtZShiaW5kaW5nQ29udGV4dDogVjRDb250ZXh0KTogc3RyaW5nIHtcblx0Y29uc3QgbW9kZWwgPSBiaW5kaW5nQ29udGV4dC5nZXRNb2RlbCgpO1xuXHRjb25zdCBtZXRhTW9kZWwgPSBtb2RlbC5nZXRNZXRhTW9kZWwoKTtcblx0Y29uc3QgZW50aXR5UGF0aCA9IG1ldGFNb2RlbC5nZXRNZXRhUGF0aChiaW5kaW5nQ29udGV4dC5nZXRQYXRoKCkpO1xuXHRjb25zdCBkYXRhTW9kZWwgPSBNZXRhTW9kZWxDb252ZXJ0ZXIuZ2V0SW52b2x2ZWREYXRhTW9kZWxPYmplY3RzKG1ldGFNb2RlbC5nZXRDb250ZXh0KGVudGl0eVBhdGgpKTtcblx0Y29uc3QgaGVhZGVySW5mbyA9IGRhdGFNb2RlbC50YXJnZXRPYmplY3QuZW50aXR5VHlwZS5hbm5vdGF0aW9ucz8uVUk/LkhlYWRlckluZm87XG5cdGxldCBzaGFyZWRJdGVtTmFtZSA9IFwiXCI7XG5cdGNvbnN0IHRpdGxlID0gaGVhZGVySW5mbz8uVGl0bGU7XG5cdGlmICh0aXRsZSkge1xuXHRcdHNoYXJlZEl0ZW1OYW1lID0gaXNQYXRoRXhwcmVzc2lvbih0aXRsZS5WYWx1ZSkgPyBiaW5kaW5nQ29udGV4dC5nZXRQcm9wZXJ0eSh0aXRsZS5WYWx1ZS5wYXRoKSA6IHRpdGxlLlZhbHVlO1xuXHR9XG5cdHJldHVybiBzaGFyZWRJdGVtTmFtZSB8fCBoZWFkZXJJbmZvPy5UeXBlTmFtZSB8fCBcIlwiO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2hhcmUoZXZlbnQ6IEV2ZW50KSB7XG5cdGNvbnN0IHVzZXJzOiBCYWNrZW5kVXNlcltdID0gW107XG5cdGNvbnN0IHNvdXJjZSA9IGV2ZW50LmdldFNvdXJjZSgpIGFzIENvbnRyb2w7XG5cdGNvbnN0IGJpbmRpbmdDb250ZXh0ID0gc291cmNlLmdldEJpbmRpbmdDb250ZXh0KCkgYXMgVjRDb250ZXh0O1xuXHRjb25zdCBjb250ZXh0cyA9ICgoYnlJZChcInVzZXJMaXN0XCIpIGFzIFRhYmxlKS5nZXRCaW5kaW5nKFwiaXRlbXNcIikgYXMgT0RhdGFMaXN0QmluZGluZykuZ2V0Q29udGV4dHMoKTtcblx0bGV0IG51bWJlck9mTmV3SW52aXRlZFVzZXJzID0gMDtcblx0Y29udGV4dHMuZm9yRWFjaChmdW5jdGlvbiAoY29udGV4dCkge1xuXHRcdHVzZXJzLnB1c2goe1xuXHRcdFx0VXNlcklEOiBjb250ZXh0LmdldFByb3BlcnR5KFwiaWRcIiksXG5cdFx0XHRVc2VyQWNjZXNzUm9sZTogXCJPXCIgLy8gRm9yIG5vdyBhY2NvcmRpbmcgdG8gVVggZXZlcnkgdXNlciByZXRyaWV2ZXMgdGhlIG93bmVyIHJvbGVcblx0XHR9KTtcblx0XHRpZiAoY29udGV4dC5nZXRPYmplY3QoKS5zdGF0dXMgPT09IDApIHtcblx0XHRcdG51bWJlck9mTmV3SW52aXRlZFVzZXJzKys7XG5cdFx0fVxuXHR9KTtcblxuXHR0cnkge1xuXHRcdGF3YWl0IHNoYXJlT2JqZWN0KGJpbmRpbmdDb250ZXh0LCB1c2Vycyk7XG5cdFx0TWVzc2FnZVRvYXN0LnNob3coXG5cdFx0XHRnZXRUZXh0KFwiQ19DT0xMQUJPUkFUSU9ORFJBRlRfSU5WSVRBVElPTl9TVUNDRVNTX1RPQVNUXCIsIG51bWJlck9mTmV3SW52aXRlZFVzZXJzLnRvU3RyaW5nKCksIGdldFNoYXJlZEl0ZW1OYW1lKGJpbmRpbmdDb250ZXh0KSlcblx0XHQpO1xuXHR9IGNhdGNoIHtcblx0XHRNZXNzYWdlVG9hc3Quc2hvdyhnZXRUZXh0KFwiQ19DT0xMQUJPUkFUSU9ORFJBRlRfSU5WSVRBVElPTl9GQUlMRURfVE9BU1RcIikpO1xuXHR9XG5cdGNsb3NlRGlhbG9nKCk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzaG93VXNlckRldGFpbHMoZXZlbnQ6IEV2ZW50LCB2aWV3OiBWaWV3KSB7XG5cdGNvbnN0IHNvdXJjZSA9IGV2ZW50LmdldFNvdXJjZSgpIGFzIENvbnRyb2w7XG5cdGxldCBwb3BvdmVyID0gYnlJZChcInVzZXJEZXRhaWxzXCIpIGFzIFBvcG92ZXI7XG5cdGlmICghcG9wb3Zlcikge1xuXHRcdHBvcG92ZXIgPSBhd2FpdCBjcmVhdGVVc2VyRGV0YWlsc1BvcG92ZXIodmlldyk7XG5cdH1cblxuXHRwb3BvdmVyLnNldEJpbmRpbmdDb250ZXh0KHNvdXJjZS5nZXRCaW5kaW5nQ29udGV4dChcImludGVybmFsXCIpIGFzIEludGVybmFsTW9kZWxDb250ZXh0LCBcImludGVybmFsXCIpO1xuXG5cdHBvcG92ZXIub3BlbkJ5KHNvdXJjZSwgZmFsc2UpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVVc2VyRGV0YWlsc1BvcG92ZXIodmlldzogVmlldykge1xuXHRjb25zdCBwb3BvdmVyUHJvbWlzZTogUHJvbWlzZTxhbnk+ID0gRnJhZ21lbnQubG9hZCh7XG5cdFx0aWQ6IFwibWFuYWdlQ29sbGFib3JhdGlvbkRyYWZ0XCIsIC8vIHRvZG8gc2hvdWxkIGJlIHZpZXcgaWRcblx0XHRuYW1lOiBcInNhcC5mZS5jb3JlLmNvbnRyb2xsZXJleHRlbnNpb25zLmNvbGxhYm9yYXRpb24uVXNlckRldGFpbHNcIlxuXHR9KTtcblx0cmV0dXJuIHBvcG92ZXJQcm9taXNlXG5cdFx0LnRoZW4oZnVuY3Rpb24gKHBvcG92ZXI6IGFueSkge1xuXHRcdFx0dmlldy5hZGREZXBlbmRlbnQocG9wb3Zlcik7XG5cdFx0XHRyZXR1cm4gcG9wb3Zlcjtcblx0XHR9KVxuXHRcdC5jYXRjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHR0aHJvdyBcIm5vdCB0aGlzIHRpbWVcIjtcblx0XHR9KTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0VXNlclN0YXR1cyh1c2VyU3RhdHVzOiBVc2VyU3RhdHVzKSB7XG5cdHN3aXRjaCAodXNlclN0YXR1cykge1xuXHRcdGNhc2UgVXNlclN0YXR1cy5DdXJyZW50bHlFZGl0aW5nOlxuXHRcdFx0cmV0dXJuIGdldFRleHQoXCJDX0NPTExBQk9SQVRJT05EUkFGVF9VU0VSX0NVUlJFTlRMWV9FRElUSU5HXCIpO1xuXHRcdGNhc2UgVXNlclN0YXR1cy5DaGFuZ2VzTWFkZTpcblx0XHRcdHJldHVybiBnZXRUZXh0KFwiQ19DT0xMQUJPUkFUSU9ORFJBRlRfVVNFUl9DSEFOR0VTX01BREVcIik7XG5cdFx0Y2FzZSBVc2VyU3RhdHVzLk5vQ2hhbmdlc01hZGU6XG5cdFx0XHRyZXR1cm4gZ2V0VGV4dChcIkNfQ09MTEFCT1JBVElPTkRSQUZUX1VTRVJfTk9fQ0hBTkdFU19NQURFXCIpO1xuXHRcdGNhc2UgVXNlclN0YXR1cy5Ob3RZZXRJbnZpdGVkOlxuXHRcdGRlZmF1bHQ6XG5cdFx0XHRyZXR1cm4gZ2V0VGV4dChcIkNfQ09MTEFCT1JBVElPTkRSQUZUX1VTRVJfTk9UX1lFVF9JTlZJVEVEXCIpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFVzZXJTdGF0dXNDb2xvcih1c2VyU3RhdHVzOiBVc2VyU3RhdHVzKSB7XG5cdHN3aXRjaCAodXNlclN0YXR1cykge1xuXHRcdGNhc2UgVXNlclN0YXR1cy5DdXJyZW50bHlFZGl0aW5nOlxuXHRcdFx0cmV0dXJuIFZhbHVlU3RhdGUuU3VjY2Vzcztcblx0XHRjYXNlIFVzZXJTdGF0dXMuQ2hhbmdlc01hZGU6XG5cdFx0XHRyZXR1cm4gVmFsdWVTdGF0ZS5XYXJuaW5nO1xuXHRcdGNhc2UgVXNlclN0YXR1cy5Ob0NoYW5nZXNNYWRlOlxuXHRcdGNhc2UgVXNlclN0YXR1cy5Ob3RZZXRJbnZpdGVkOlxuXHRcdGRlZmF1bHQ6XG5cdFx0XHRyZXR1cm4gVmFsdWVTdGF0ZS5JbmZvcm1hdGlvbjtcblx0fVxufVxuIl0sIm1hcHBpbmdzIjoiO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7OztFQTJCQSxNQUFNQSxVQUFVLEdBQUdDLFdBQVcsQ0FBQ0QsVUFBVTtFQUVsQyxNQUFNRSxnQkFBZ0IsR0FBRyxnQkFBZ0JDLElBQVUsRUFBRTtJQUMzRCxJQUFJQyxNQUFXLEdBQUdDLElBQUksQ0FBQyxRQUFRLENBQUM7SUFFaEMsSUFBSSxDQUFDRCxNQUFNLEVBQUU7TUFDWkEsTUFBTSxHQUFHLE1BQU1FLCtCQUErQixDQUFDSCxJQUFJLENBQUM7SUFDckQ7SUFFQSxNQUFNSSxnQkFBZ0IsQ0FBQ0osSUFBSSxDQUFDO0lBQzVCQyxNQUFNLENBQUNJLElBQUksRUFBRTtFQUNkLENBQUM7RUFBQztFQUVGLGVBQWVGLCtCQUErQixDQUFDSCxJQUFVLEVBQUU7SUFDMUQsTUFBTU0sT0FBcUIsR0FBSU4sSUFBSSxDQUFDTyxhQUFhLEVBQUUsQ0FBU0MsZUFBZSxFQUFFLENBQUNDLFlBQVksQ0FBQztNQUMxRkMsSUFBSSxFQUFFLDZEQUE2RDtNQUNu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