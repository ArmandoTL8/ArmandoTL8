/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log", "sap/fe/core/CommonUtils", "sap/fe/core/library", "sap/m/MessageBox", "sap/ui/core/Core", "../../operationsHelper"], function (Log, CommonUtils, FELibrary, MessageBox, Core, operationsHelper) {
  "use strict";

  const ProgrammingModel = FELibrary.ProgrammingModel;
  /**
   * Opens a sticky session to edit a document.
   *
   * @function
   * @name sap.fe.core.actions.sticky#editDocumentInStickySession
   * @memberof sap.fe.core.actions.sticky
   * @static
   * @param context Context of the document to be edited
   * @param appComponent The AppComponent
   * @returns A Promise resolved when the sticky session is in edit mode
   * @private
   * @ui5-restricted
   */
  async function editDocumentInStickySession(context, appComponent) {
    const model = context.getModel(),
      metaModel = model.getMetaModel(),
      metaPath = metaModel.getMetaPath(context.getPath()),
      editActionAnnotation = metaModel.getObject(`${metaPath}@com.sap.vocabularies.Session.v1.StickySessionSupported/EditAction`);
    if (!editActionAnnotation) {
      throw new Error(`Edit Action for Sticky Session not found for ${metaPath}`);
    }
    const resourceBundle = await appComponent.getModel("sap.fe.i18n").getResourceBundle();
    const actionName = CommonUtils.getTranslatedText("C_COMMON_OBJECT_PAGE_EDIT", resourceBundle);
    const editAction = model.bindContext(`${editActionAnnotation}(...)`, context, {
      $$inheritExpandSelect: true
    });
    const groupId = "direct";
    const editPromise = editAction.execute(groupId, undefined, operationsHelper.fnOnStrictHandlingFailed.bind(sticky, groupId, {
      label: actionName,
      model
    }, resourceBundle, null, null, null, undefined, undefined));
    model.submitBatch(groupId);
    const newContext = await editPromise;
    const sideEffects = appComponent.getSideEffectsService().getODataActionSideEffects(editActionAnnotation, newContext);
    if (sideEffects !== null && sideEffects !== void 0 && sideEffects.triggerActions && sideEffects.triggerActions.length) {
      await appComponent.getSideEffectsService().requestSideEffectsForODataAction(sideEffects, newContext);
    }
    return newContext;
  }
  /**
   * Activates a document and closes the sticky session.
   *
   * @function
   * @name sap.fe.core.actions.sticky#activateDocument
   * @memberof sap.fe.core.actions.sticky
   * @static
   * @param context Context of the document to be activated
   * @param appComponent Context of the document to be activated
   * @returns A promise resolve when the sticky session is activated
   * @private
   * @ui5-restricted
   */
  async function activateDocument(context, appComponent) {
    const model = context.getModel(),
      metaModel = model.getMetaModel(),
      metaPath = metaModel.getMetaPath(context.getPath()),
      saveActionAnnotation = metaModel.getObject(`${metaPath}@com.sap.vocabularies.Session.v1.StickySessionSupported/SaveAction`);
    if (!saveActionAnnotation) {
      throw new Error(`Save Action for Sticky Session not found for ${metaPath}`);
    }
    const resourceBundle = await appComponent.getModel("sap.fe.i18n").getResourceBundle();
    const actionName = CommonUtils.getTranslatedText("C_OP_OBJECT_PAGE_SAVE", resourceBundle);
    const saveAction = model.bindContext(`${saveActionAnnotation}(...)`, context, {
      $$inheritExpandSelect: true
    });
    const groupId = "direct";
    const savePromise = saveAction.execute(groupId, undefined, operationsHelper.fnOnStrictHandlingFailed.bind(sticky, groupId, {
      label: actionName,
      model
    }, resourceBundle, null, null, null, undefined, undefined));
    model.submitBatch(groupId);
    try {
      return await savePromise;
    } catch (err) {
      const messagesPath = metaModel.getObject(`${metaPath}/@${"com.sap.vocabularies.Common.v1.Messages"}/$Path`);
      if (messagesPath) {
        try {
          await appComponent.getSideEffectsService().requestSideEffects([{
            $PropertyPath: messagesPath
          }], context);
        } catch (error) {
          Log.error("Error while requesting side effects", error);
        }
      }
      throw err;
    }
  }
  /**
   * Discards a document and closes sticky session.
   *
   * @function
   * @name sap.fe.core.actions.sticky#discardDocument
   * @memberof sap.fe.core.actions.sticky
   * @static
   * @param context Context of the document to be discarded
   * @returns A promise resolved when the document is dicarded
   * @private
   * @ui5-restricted
   */
  function discardDocument(context) {
    const model = context.getModel(),
      metaModel = model.getMetaModel(),
      metaPath = metaModel.getMetaPath(context.getPath()),
      discardActionAnnotation = metaModel.getObject(`${metaPath}@com.sap.vocabularies.Session.v1.StickySessionSupported/DiscardAction`);
    if (!discardActionAnnotation) {
      throw new Error(`Discard Action for Sticky Session not found for ${metaPath}`);
    }
    const discardAction = model.bindContext(`/${discardActionAnnotation}(...)`);
    const discardPromise = discardAction.execute("direct").then(function () {
      return context;
    });
    model.submitBatch("direct");
    return discardPromise;
  }

  /**
   * Process the Data loss confirmation.
   *
   * @function
   * @name sap.fe.core.actions.sticky#discardDocument
   * @memberof sap.fe.core.actions.sticky
   * @static
   * @param fnProcess Function to execute after confirmation
   * @param view Current view
   * @param programmingModel Programming Model of the current page
   * @returns `void` i think
   * @private
   * @ui5-restricted
   */
  function processDataLossConfirmation(fnProcess, view, programmingModel) {
    const uiEditable = view.getModel("ui").getProperty("/isEditable"),
      resourceBundle = Core.getLibraryResourceBundle("sap.fe.templates"),
      warningMsg = resourceBundle && resourceBundle.getText("T_COMMON_UTILS_NAVIGATION_AWAY_MSG"),
      confirmButtonTxt = resourceBundle && resourceBundle.getText("T_COMMON_UTILS_NAVIGATION_AWAY_CONFIRM_BUTTON"),
      cancelButtonTxt = resourceBundle && resourceBundle.getText("T_COMMON_UTILS_NAVIGATION_AWAY_CANCEL_BUTTON");
    if (programmingModel === ProgrammingModel.Sticky && uiEditable) {
      return MessageBox.warning(warningMsg, {
        actions: [confirmButtonTxt, cancelButtonTxt],
        emphasizedAction: confirmButtonTxt,
        onClose: function (actionText) {
          if (actionText === confirmButtonTxt) {
            const internalModel = view && view.getModel("internal");
            Log.info("Navigation confirmed.");
            if (internalModel) {
              internalModel.setProperty("/sessionOn", false);
              internalModel.setProperty("/stickySessionToken", undefined);
            } else {
              Log.warning("Local UIModel couldn't be found.");
            }
            fnProcess();
          } else {
            Log.info("Navigation rejected.");
          }
        }
      });
    }
    return fnProcess();
  }

  /**
   * Static functions for the sticky session programming model
   *
   * @namespace
   * @alias sap.fe.core.actions.sticky
   * @private
   * @experimental This module is only for experimental use! <br/><b>This is only a POC and maybe deleted</b>
   * @since 1.54.0
   */
  const sticky = {
    editDocumentInStickySession: editDocumentInStickySession,
    activateDocument: activateDocument,
    discardDocument: discardDocument,
    processDataLossConfirmation: processDataLossConfirmation
  };
  return sticky;
}, false);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQcm9ncmFtbWluZ01vZGVsIiwiRkVMaWJyYXJ5IiwiZWRpdERvY3VtZW50SW5TdGlja3lTZXNzaW9uIiwiY29udGV4dCIsImFwcENvbXBvbmVudCIsIm1vZGVsIiwiZ2V0TW9kZWwiLCJtZXRhTW9kZWwiLCJnZXRNZXRhTW9kZWwiLCJtZXRhUGF0aCIsImdldE1ldGFQYXRoIiwiZ2V0UGF0aCIsImVkaXRBY3Rpb25Bbm5vdGF0aW9uIiwiZ2V0T2JqZWN0IiwiRXJyb3IiLCJyZXNvdXJjZUJ1bmRsZSIsImdldFJlc291cmNlQnVuZGxlIiwiYWN0aW9uTmFtZSIsIkNvbW1vblV0aWxzIiwiZ2V0VHJhbnNsYXRlZFRleHQiLCJlZGl0QWN0aW9uIiwiYmluZENvbnRleHQiLCIkJGluaGVyaXRFeHBhbmRTZWxlY3QiLCJncm91cElkIiwiZWRpdFByb21pc2UiLCJleGVjdXRlIiwidW5kZWZpbmVkIiwib3BlcmF0aW9uc0hlbHBlciIsImZuT25TdHJpY3RIYW5kbGluZ0ZhaWxlZCIsImJpbmQiLCJzdGlja3kiLCJsYWJlbCIsInN1Ym1pdEJhdGNoIiwibmV3Q29udGV4dCIsInNpZGVFZmZlY3RzIiwiZ2V0U2lkZUVmZmVjdHNTZXJ2aWNlIiwiZ2V0T0RhdGFBY3Rpb25TaWRlRWZmZWN0cyIsInRyaWdnZXJBY3Rpb25zIiwibGVuZ3RoIiwicmVxdWVzdFNpZGVFZmZlY3RzRm9yT0RhdGFBY3Rpb24iLCJhY3RpdmF0ZURvY3VtZW50Iiwic2F2ZUFjdGlvbkFubm90YXRpb24iLCJzYXZlQWN0aW9uIiwic2F2ZVByb21pc2UiLCJlcnIiLCJtZXNzYWdlc1BhdGgiLCJyZXF1ZXN0U2lkZUVmZmVjdHMiLCIkUHJvcGVydHlQYXRoIiwiZXJyb3IiLCJMb2ciLCJkaXNjYXJkRG9jdW1lbnQiLCJkaXNjYXJkQWN0aW9uQW5ub3RhdGlvbiIsImRpc2NhcmRBY3Rpb24iLCJkaXNjYXJkUHJvbWlzZSIsInRoZW4iLCJwcm9jZXNzRGF0YUxvc3NDb25maXJtYXRpb24iLCJmblByb2Nlc3MiLCJ2aWV3IiwicHJvZ3JhbW1pbmdNb2RlbCIsInVpRWRpdGFibGUiLCJnZXRQcm9wZXJ0eSIsIkNvcmUiLCJnZXRMaWJyYXJ5UmVzb3VyY2VCdW5kbGUiLCJ3YXJuaW5nTXNnIiwiZ2V0VGV4dCIsImNvbmZpcm1CdXR0b25UeHQiLCJjYW5jZWxCdXR0b25UeHQiLCJTdGlja3kiLCJNZXNzYWdlQm94Iiwid2FybmluZyIsImFjdGlvbnMiLCJlbXBoYXNpemVkQWN0aW9uIiwib25DbG9zZSIsImFjdGlvblRleHQiLCJpbnRlcm5hbE1vZGVsIiwiaW5mbyIsInNldFByb3BlcnR5Il0sInNvdXJjZVJvb3QiOiIuIiwic291cmNlcyI6WyJzdGlja3kudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tbW9uQW5ub3RhdGlvblRlcm1zIH0gZnJvbSBcIkBzYXAtdXgvdm9jYWJ1bGFyaWVzLXR5cGVzL3ZvY2FidWxhcmllcy9Db21tb25cIjtcbmltcG9ydCBMb2cgZnJvbSBcInNhcC9iYXNlL0xvZ1wiO1xuaW1wb3J0IHR5cGUgQXBwQ29tcG9uZW50IGZyb20gXCJzYXAvZmUvY29yZS9BcHBDb21wb25lbnRcIjtcbmltcG9ydCBDb21tb25VdGlscyBmcm9tIFwic2FwL2ZlL2NvcmUvQ29tbW9uVXRpbHNcIjtcbmltcG9ydCBGRUxpYnJhcnkgZnJvbSBcInNhcC9mZS9jb3JlL2xpYnJhcnlcIjtcbmltcG9ydCBNZXNzYWdlQm94IGZyb20gXCJzYXAvbS9NZXNzYWdlQm94XCI7XG5pbXBvcnQgQ29yZSBmcm9tIFwic2FwL3VpL2NvcmUvQ29yZVwiO1xuaW1wb3J0IHR5cGUgVmlldyBmcm9tIFwic2FwL3VpL2NvcmUvbXZjL1ZpZXdcIjtcbmltcG9ydCB0eXBlIEpTT05Nb2RlbCBmcm9tIFwic2FwL3VpL21vZGVsL2pzb24vSlNPTk1vZGVsXCI7XG5pbXBvcnQgdHlwZSBDb250ZXh0IGZyb20gXCJzYXAvdWkvbW9kZWwvb2RhdGEvdjQvQ29udGV4dFwiO1xuaW1wb3J0IHR5cGUgUmVzb3VyY2VNb2RlbCBmcm9tIFwic2FwL3VpL21vZGVsL3Jlc291cmNlL1Jlc291cmNlTW9kZWxcIjtcbmltcG9ydCBvcGVyYXRpb25zSGVscGVyIGZyb20gXCIuLi8uLi9vcGVyYXRpb25zSGVscGVyXCI7XG5pbXBvcnQgdHlwZSB7IFNpZGVFZmZlY3RzVGFyZ2V0RW50aXR5VHlwZSB9IGZyb20gXCIuLi8uLi9zZXJ2aWNlcy9TaWRlRWZmZWN0c1NlcnZpY2VGYWN0b3J5XCI7XG5cbmNvbnN0IFByb2dyYW1taW5nTW9kZWwgPSBGRUxpYnJhcnkuUHJvZ3JhbW1pbmdNb2RlbDtcbi8qKlxuICogT3BlbnMgYSBzdGlja3kgc2Vzc2lvbiB0byBlZGl0IGEgZG9jdW1lbnQuXG4gKlxuICogQGZ1bmN0aW9uXG4gKiBAbmFtZSBzYXAuZmUuY29yZS5hY3Rpb25zLnN0aWNreSNlZGl0RG9jdW1lbnRJblN0aWNreVNlc3Npb25cbiAqIEBtZW1iZXJvZiBzYXAuZmUuY29yZS5hY3Rpb25zLnN0aWNreVxuICogQHN0YXRpY1xuICogQHBhcmFtIGNvbnRleHQgQ29udGV4dCBvZiB0aGUgZG9jdW1lbnQgdG8gYmUgZWRpdGVkXG4gKiBAcGFyYW0gYXBwQ29tcG9uZW50IFRoZSBBcHBDb21wb25lbnRcbiAqIEByZXR1cm5zIEEgUHJvbWlzZSByZXNvbHZlZCB3aGVuIHRoZSBzdGlja3kgc2Vzc2lvbiBpcyBpbiBlZGl0IG1vZGVcbiAqIEBwcml2YXRlXG4gKiBAdWk1LXJlc3RyaWN0ZWRcbiAqL1xuYXN5bmMgZnVuY3Rpb24gZWRpdERvY3VtZW50SW5TdGlja3lTZXNzaW9uKGNvbnRleHQ6IENvbnRleHQsIGFwcENvbXBvbmVudDogQXBwQ29tcG9uZW50KTogUHJvbWlzZTxDb250ZXh0PiB7XG5cdGNvbnN0IG1vZGVsID0gY29udGV4dC5nZXRNb2RlbCgpLFxuXHRcdG1ldGFNb2RlbCA9IG1vZGVsLmdldE1ldGFNb2RlbCgpLFxuXHRcdG1ldGFQYXRoID0gbWV0YU1vZGVsLmdldE1ldGFQYXRoKGNvbnRleHQuZ2V0UGF0aCgpKSxcblx0XHRlZGl0QWN0aW9uQW5ub3RhdGlvbiA9IG1ldGFNb2RlbC5nZXRPYmplY3QoYCR7bWV0YVBhdGh9QGNvbS5zYXAudm9jYWJ1bGFyaWVzLlNlc3Npb24udjEuU3RpY2t5U2Vzc2lvblN1cHBvcnRlZC9FZGl0QWN0aW9uYCk7XG5cblx0aWYgKCFlZGl0QWN0aW9uQW5ub3RhdGlvbikge1xuXHRcdHRocm93IG5ldyBFcnJvcihgRWRpdCBBY3Rpb24gZm9yIFN0aWNreSBTZXNzaW9uIG5vdCBmb3VuZCBmb3IgJHttZXRhUGF0aH1gKTtcblx0fVxuXHRjb25zdCByZXNvdXJjZUJ1bmRsZSA9IGF3YWl0IChhcHBDb21wb25lbnQuZ2V0TW9kZWwoXCJzYXAuZmUuaTE4blwiKSBhcyBSZXNvdXJjZU1vZGVsKS5nZXRSZXNvdXJjZUJ1bmRsZSgpO1xuXHRjb25zdCBhY3Rpb25OYW1lID0gQ29tbW9uVXRpbHMuZ2V0VHJhbnNsYXRlZFRleHQoXCJDX0NPTU1PTl9PQkpFQ1RfUEFHRV9FRElUXCIsIHJlc291cmNlQnVuZGxlKTtcblx0Y29uc3QgZWRpdEFjdGlvbiA9IG1vZGVsLmJpbmRDb250ZXh0KGAke2VkaXRBY3Rpb25Bbm5vdGF0aW9ufSguLi4pYCwgY29udGV4dCwgeyAkJGluaGVyaXRFeHBhbmRTZWxlY3Q6IHRydWUgfSk7XG5cdGNvbnN0IGdyb3VwSWQgPSBcImRpcmVjdFwiO1xuXHRjb25zdCBlZGl0UHJvbWlzZSA9IGVkaXRBY3Rpb24uZXhlY3V0ZShcblx0XHRncm91cElkLFxuXHRcdHVuZGVmaW5lZCxcblx0XHRvcGVyYXRpb25zSGVscGVyLmZuT25TdHJpY3RIYW5kbGluZ0ZhaWxlZC5iaW5kKFxuXHRcdFx0c3RpY2t5LFxuXHRcdFx0Z3JvdXBJZCxcblx0XHRcdHsgbGFiZWw6IGFjdGlvbk5hbWUsIG1vZGVsIH0sXG5cdFx0XHRyZXNvdXJjZUJ1bmRsZSxcblx0XHRcdG51bGwsXG5cdFx0XHRudWxsLFxuXHRcdFx0bnVsbCxcblx0XHRcdHVuZGVmaW5lZCxcblx0XHRcdHVuZGVmaW5lZFxuXHRcdClcblx0KTtcblx0bW9kZWwuc3VibWl0QmF0Y2goZ3JvdXBJZCk7XG5cblx0Y29uc3QgbmV3Q29udGV4dDogQ29udGV4dCA9IGF3YWl0IGVkaXRQcm9taXNlO1xuXHRjb25zdCBzaWRlRWZmZWN0cyA9IGFwcENvbXBvbmVudC5nZXRTaWRlRWZmZWN0c1NlcnZpY2UoKS5nZXRPRGF0YUFjdGlvblNpZGVFZmZlY3RzKGVkaXRBY3Rpb25Bbm5vdGF0aW9uLCBuZXdDb250ZXh0KTtcblx0aWYgKHNpZGVFZmZlY3RzPy50cmlnZ2VyQWN0aW9ucyAmJiBzaWRlRWZmZWN0cy50cmlnZ2VyQWN0aW9ucy5sZW5ndGgpIHtcblx0XHRhd2FpdCBhcHBDb21wb25lbnQuZ2V0U2lkZUVmZmVjdHNTZXJ2aWNlKCkucmVxdWVzdFNpZGVFZmZlY3RzRm9yT0RhdGFBY3Rpb24oc2lkZUVmZmVjdHMsIG5ld0NvbnRleHQpO1xuXHR9XG5cdHJldHVybiBuZXdDb250ZXh0O1xufVxuLyoqXG4gKiBBY3RpdmF0ZXMgYSBkb2N1bWVudCBhbmQgY2xvc2VzIHRoZSBzdGlja3kgc2Vzc2lvbi5cbiAqXG4gKiBAZnVuY3Rpb25cbiAqIEBuYW1lIHNhcC5mZS5jb3JlLmFjdGlvbnMuc3RpY2t5I2FjdGl2YXRlRG9jdW1lbnRcbiAqIEBtZW1iZXJvZiBzYXAuZmUuY29yZS5hY3Rpb25zLnN0aWNreVxuICogQHN0YXRpY1xuICogQHBhcmFtIGNvbnRleHQgQ29udGV4dCBvZiB0aGUgZG9jdW1lbnQgdG8gYmUgYWN0aXZhdGVkXG4gKiBAcGFyYW0gYXBwQ29tcG9uZW50IENvbnRleHQgb2YgdGhlIGRvY3VtZW50IHRvIGJlIGFjdGl2YXRlZFxuICogQHJldHVybnMgQSBwcm9taXNlIHJlc29sdmUgd2hlbiB0aGUgc3RpY2t5IHNlc3Npb24gaXMgYWN0aXZhdGVkXG4gKiBAcHJpdmF0ZVxuICogQHVpNS1yZXN0cmljdGVkXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGFjdGl2YXRlRG9jdW1lbnQoY29udGV4dDogQ29udGV4dCwgYXBwQ29tcG9uZW50OiBBcHBDb21wb25lbnQpIHtcblx0Y29uc3QgbW9kZWwgPSBjb250ZXh0LmdldE1vZGVsKCksXG5cdFx0bWV0YU1vZGVsID0gbW9kZWwuZ2V0TWV0YU1vZGVsKCksXG5cdFx0bWV0YVBhdGggPSBtZXRhTW9kZWwuZ2V0TWV0YVBhdGgoY29udGV4dC5nZXRQYXRoKCkpLFxuXHRcdHNhdmVBY3Rpb25Bbm5vdGF0aW9uID0gbWV0YU1vZGVsLmdldE9iamVjdChgJHttZXRhUGF0aH1AY29tLnNhcC52b2NhYnVsYXJpZXMuU2Vzc2lvbi52MS5TdGlja3lTZXNzaW9uU3VwcG9ydGVkL1NhdmVBY3Rpb25gKTtcblxuXHRpZiAoIXNhdmVBY3Rpb25Bbm5vdGF0aW9uKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKGBTYXZlIEFjdGlvbiBmb3IgU3RpY2t5IFNlc3Npb24gbm90IGZvdW5kIGZvciAke21ldGFQYXRofWApO1xuXHR9XG5cblx0Y29uc3QgcmVzb3VyY2VCdW5kbGUgPSBhd2FpdCAoYXBwQ29tcG9uZW50LmdldE1vZGVsKFwic2FwLmZlLmkxOG5cIikgYXMgUmVzb3VyY2VNb2RlbCkuZ2V0UmVzb3VyY2VCdW5kbGUoKTtcblx0Y29uc3QgYWN0aW9uTmFtZSA9IENvbW1vblV0aWxzLmdldFRyYW5zbGF0ZWRUZXh0KFwiQ19PUF9PQkpFQ1RfUEFHRV9TQVZFXCIsIHJlc291cmNlQnVuZGxlKTtcblx0Y29uc3Qgc2F2ZUFjdGlvbiA9IG1vZGVsLmJpbmRDb250ZXh0KGAke3NhdmVBY3Rpb25Bbm5vdGF0aW9ufSguLi4pYCwgY29udGV4dCwgeyAkJGluaGVyaXRFeHBhbmRTZWxlY3Q6IHRydWUgfSk7XG5cdGNvbnN0IGdyb3VwSWQgPSBcImRpcmVjdFwiO1xuXG5cdGNvbnN0IHNhdmVQcm9taXNlID0gc2F2ZUFjdGlvbi5leGVjdXRlKFxuXHRcdGdyb3VwSWQsXG5cdFx0dW5kZWZpbmVkLFxuXHRcdG9wZXJhdGlvbnNIZWxwZXIuZm5PblN0cmljdEhhbmRsaW5nRmFpbGVkLmJpbmQoXG5cdFx0XHRzdGlja3ksXG5cdFx0XHRncm91cElkLFxuXHRcdFx0eyBsYWJlbDogYWN0aW9uTmFtZSwgbW9kZWwgfSxcblx0XHRcdHJlc291cmNlQnVuZGxlLFxuXHRcdFx0bnVsbCxcblx0XHRcdG51bGwsXG5cdFx0XHRudWxsLFxuXHRcdFx0dW5kZWZpbmVkLFxuXHRcdFx0dW5kZWZpbmVkXG5cdFx0KVxuXHQpO1xuXG5cdG1vZGVsLnN1Ym1pdEJhdGNoKGdyb3VwSWQpO1xuXG5cdHRyeSB7XG5cdFx0cmV0dXJuIGF3YWl0IHNhdmVQcm9taXNlO1xuXHR9IGNhdGNoIChlcnIpIHtcblx0XHRjb25zdCBtZXNzYWdlc1BhdGggPSBtZXRhTW9kZWwuZ2V0T2JqZWN0KGAke21ldGFQYXRofS9AJHtDb21tb25Bbm5vdGF0aW9uVGVybXMuTWVzc2FnZXN9LyRQYXRoYCk7XG5cblx0XHRpZiAobWVzc2FnZXNQYXRoKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCBhcHBDb21wb25lbnRcblx0XHRcdFx0XHQuZ2V0U2lkZUVmZmVjdHNTZXJ2aWNlKClcblx0XHRcdFx0XHQucmVxdWVzdFNpZGVFZmZlY3RzKFt7ICRQcm9wZXJ0eVBhdGg6IG1lc3NhZ2VzUGF0aCB9XSBhcyBTaWRlRWZmZWN0c1RhcmdldEVudGl0eVR5cGVbXSwgY29udGV4dCk7XG5cdFx0XHR9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuXHRcdFx0XHRMb2cuZXJyb3IoXCJFcnJvciB3aGlsZSByZXF1ZXN0aW5nIHNpZGUgZWZmZWN0c1wiLCBlcnJvciBhcyBzdHJpbmcpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHR0aHJvdyBlcnI7XG5cdH1cbn1cbi8qKlxuICogRGlzY2FyZHMgYSBkb2N1bWVudCBhbmQgY2xvc2VzIHN0aWNreSBzZXNzaW9uLlxuICpcbiAqIEBmdW5jdGlvblxuICogQG5hbWUgc2FwLmZlLmNvcmUuYWN0aW9ucy5zdGlja3kjZGlzY2FyZERvY3VtZW50XG4gKiBAbWVtYmVyb2Ygc2FwLmZlLmNvcmUuYWN0aW9ucy5zdGlja3lcbiAqIEBzdGF0aWNcbiAqIEBwYXJhbSBjb250ZXh0IENvbnRleHQgb2YgdGhlIGRvY3VtZW50IHRvIGJlIGRpc2NhcmRlZFxuICogQHJldHVybnMgQSBwcm9taXNlIHJlc29sdmVkIHdoZW4gdGhlIGRvY3VtZW50IGlzIGRpY2FyZGVkXG4gKiBAcHJpdmF0ZVxuICogQHVpNS1yZXN0cmljdGVkXG4gKi9cbmZ1bmN0aW9uIGRpc2NhcmREb2N1bWVudChjb250ZXh0OiBDb250ZXh0KSB7XG5cdGNvbnN0IG1vZGVsID0gY29udGV4dC5nZXRNb2RlbCgpLFxuXHRcdG1ldGFNb2RlbCA9IG1vZGVsLmdldE1ldGFNb2RlbCgpLFxuXHRcdG1ldGFQYXRoID0gbWV0YU1vZGVsLmdldE1ldGFQYXRoKGNvbnRleHQuZ2V0UGF0aCgpKSxcblx0XHRkaXNjYXJkQWN0aW9uQW5ub3RhdGlvbiA9IG1ldGFNb2RlbC5nZXRPYmplY3QoYCR7bWV0YVBhdGh9QGNvbS5zYXAudm9jYWJ1bGFyaWVzLlNlc3Npb24udjEuU3RpY2t5U2Vzc2lvblN1cHBvcnRlZC9EaXNjYXJkQWN0aW9uYCk7XG5cblx0aWYgKCFkaXNjYXJkQWN0aW9uQW5ub3RhdGlvbikge1xuXHRcdHRocm93IG5ldyBFcnJvcihgRGlzY2FyZCBBY3Rpb24gZm9yIFN0aWNreSBTZXNzaW9uIG5vdCBmb3VuZCBmb3IgJHttZXRhUGF0aH1gKTtcblx0fVxuXG5cdGNvbnN0IGRpc2NhcmRBY3Rpb24gPSBtb2RlbC5iaW5kQ29udGV4dChgLyR7ZGlzY2FyZEFjdGlvbkFubm90YXRpb259KC4uLilgKTtcblx0Y29uc3QgZGlzY2FyZFByb21pc2UgPSBkaXNjYXJkQWN0aW9uLmV4ZWN1dGUoXCJkaXJlY3RcIikudGhlbihmdW5jdGlvbiAoKSB7XG5cdFx0cmV0dXJuIGNvbnRleHQ7XG5cdH0pO1xuXHRtb2RlbC5zdWJtaXRCYXRjaChcImRpcmVjdFwiKTtcblx0cmV0dXJuIGRpc2NhcmRQcm9taXNlO1xufVxuXG4vKipcbiAqIFByb2Nlc3MgdGhlIERhdGEgbG9zcyBjb25maXJtYXRpb24uXG4gKlxuICogQGZ1bmN0aW9uXG4gKiBAbmFtZSBzYXAuZmUuY29yZS5hY3Rpb25zLnN0aWNreSNkaXNjYXJkRG9jdW1lbnRcbiAqIEBtZW1iZXJvZiBzYXAuZmUuY29yZS5hY3Rpb25zLnN0aWNreVxuICogQHN0YXRpY1xuICogQHBhcmFtIGZuUHJvY2VzcyBGdW5jdGlvbiB0byBleGVjdXRlIGFmdGVyIGNvbmZpcm1hdGlvblxuICogQHBhcmFtIHZpZXcgQ3VycmVudCB2aWV3XG4gKiBAcGFyYW0gcHJvZ3JhbW1pbmdNb2RlbCBQcm9ncmFtbWluZyBNb2RlbCBvZiB0aGUgY3VycmVudCBwYWdlXG4gKiBAcmV0dXJucyBgdm9pZGAgaSB0aGlua1xuICogQHByaXZhdGVcbiAqIEB1aTUtcmVzdHJpY3RlZFxuICovXG5mdW5jdGlvbiBwcm9jZXNzRGF0YUxvc3NDb25maXJtYXRpb24oZm5Qcm9jZXNzOiBGdW5jdGlvbiwgdmlldzogVmlldywgcHJvZ3JhbW1pbmdNb2RlbDogc3RyaW5nKSB7XG5cdGNvbnN0IHVpRWRpdGFibGUgPSB2aWV3LmdldE1vZGVsKFwidWlcIikuZ2V0UHJvcGVydHkoXCIvaXNFZGl0YWJsZVwiKSxcblx0XHRyZXNvdXJjZUJ1bmRsZSA9IENvcmUuZ2V0TGlicmFyeVJlc291cmNlQnVuZGxlKFwic2FwLmZlLnRlbXBsYXRlc1wiKSxcblx0XHR3YXJuaW5nTXNnID0gcmVzb3VyY2VCdW5kbGUgJiYgcmVzb3VyY2VCdW5kbGUuZ2V0VGV4dChcIlRfQ09NTU9OX1VUSUxTX05BVklHQVRJT05fQVdBWV9NU0dcIiksXG5cdFx0Y29uZmlybUJ1dHRvblR4dCA9IHJlc291cmNlQnVuZGxlICYmIHJlc291cmNlQnVuZGxlLmdldFRleHQoXCJUX0NPTU1PTl9VVElMU19OQVZJR0FUSU9OX0FXQVlfQ09ORklSTV9CVVRUT05cIiksXG5cdFx0Y2FuY2VsQnV0dG9uVHh0ID0gcmVzb3VyY2VCdW5kbGUgJiYgcmVzb3VyY2VCdW5kbGUuZ2V0VGV4dChcIlRfQ09NTU9OX1VUSUxTX05BVklHQVRJT05fQVdBWV9DQU5DRUxfQlVUVE9OXCIpO1xuXG5cdGlmIChwcm9ncmFtbWluZ01vZGVsID09PSBQcm9ncmFtbWluZ01vZGVsLlN0aWNreSAmJiB1aUVkaXRhYmxlKSB7XG5cdFx0cmV0dXJuIE1lc3NhZ2VCb3gud2FybmluZyh3YXJuaW5nTXNnLCB7XG5cdFx0XHRhY3Rpb25zOiBbY29uZmlybUJ1dHRvblR4dCwgY2FuY2VsQnV0dG9uVHh0XSxcblx0XHRcdGVtcGhhc2l6ZWRBY3Rpb246IGNvbmZpcm1CdXR0b25UeHQsXG5cdFx0XHRvbkNsb3NlOiBmdW5jdGlvbiAoYWN0aW9uVGV4dDogc3RyaW5nKSB7XG5cdFx0XHRcdGlmIChhY3Rpb25UZXh0ID09PSBjb25maXJtQnV0dG9uVHh0KSB7XG5cdFx0XHRcdFx0Y29uc3QgaW50ZXJuYWxNb2RlbCA9IHZpZXcgJiYgKHZpZXcuZ2V0TW9kZWwoXCJpbnRlcm5hbFwiKSBhcyBKU09OTW9kZWwpO1xuXG5cdFx0XHRcdFx0TG9nLmluZm8oXCJOYXZpZ2F0aW9uIGNvbmZpcm1lZC5cIik7XG5cdFx0XHRcdFx0aWYgKGludGVybmFsTW9kZWwpIHtcblx0XHRcdFx0XHRcdGludGVybmFsTW9kZWwuc2V0UHJvcGVydHkoXCIvc2Vzc2lvbk9uXCIsIGZhbHNlKTtcblx0XHRcdFx0XHRcdGludGVybmFsTW9kZWwuc2V0UHJvcGVydHkoXCIvc3RpY2t5U2Vzc2lvblRva2VuXCIsIHVuZGVmaW5lZCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdExvZy53YXJuaW5nKFwiTG9jYWwgVUlNb2RlbCBjb3VsZG4ndCBiZSBmb3VuZC5cIik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGZuUHJvY2VzcygpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdExvZy5pbmZvKFwiTmF2aWdhdGlvbiByZWplY3RlZC5cIik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXHRyZXR1cm4gZm5Qcm9jZXNzKCk7XG59XG5cbi8qKlxuICogU3RhdGljIGZ1bmN0aW9ucyBmb3IgdGhlIHN0aWNreSBzZXNzaW9uIHByb2dyYW1taW5nIG1vZGVsXG4gKlxuICogQG5hbWVzcGFjZVxuICogQGFsaWFzIHNhcC5mZS5jb3JlLmFjdGlvbnMuc3RpY2t5XG4gKiBAcHJpdmF0ZVxuICogQGV4cGVyaW1lbnRhbCBUaGlzIG1vZHVsZSBpcyBvbmx5IGZvciBleHBlcmltZW50YWwgdXNlISA8YnIvPjxiPlRoaXMgaXMgb25seSBhIFBPQyBhbmQgbWF5YmUgZGVsZXRlZDwvYj5cbiAqIEBzaW5jZSAxLjU0LjBcbiAqL1xuY29uc3Qgc3RpY2t5ID0ge1xuXHRlZGl0RG9jdW1lbnRJblN0aWNreVNlc3Npb246IGVkaXREb2N1bWVudEluU3RpY2t5U2Vzc2lvbixcblx0YWN0aXZhdGVEb2N1bWVudDogYWN0aXZhdGVEb2N1bWVudCxcblx0ZGlzY2FyZERvY3VtZW50OiBkaXNjYXJkRG9jdW1lbnQsXG5cdHByb2Nlc3NEYXRhTG9zc0NvbmZpcm1hdGlvbjogcHJvY2Vzc0RhdGFMb3NzQ29uZmlybWF0aW9uXG59O1xuXG5leHBvcnQgZGVmYXVsdCBzdGlja3k7XG4iXSwibWFwcGluZ3MiOiI7QUFBQTtBQUFBO0FBQUE7Ozs7RUFjQSxNQUFNQSxnQkFBZ0IsR0FBR0MsU0FBUyxDQUFDRCxnQkFBZ0I7RUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDQSxlQUFlRSwyQkFBMkIsQ0FBQ0MsT0FBZ0IsRUFBRUMsWUFBMEIsRUFBb0I7SUFDMUcsTUFBTUMsS0FBSyxHQUFHRixPQUFPLENBQUNHLFFBQVEsRUFBRTtNQUMvQkMsU0FBUyxHQUFHRixLQUFLLENBQUNHLFlBQVksRUFBRTtNQUNoQ0MsUUFBUSxHQUFHRixTQUFTLENBQUNHLFdBQVcsQ0FBQ1AsT0FBTyxDQUFDUSxPQUFPLEVBQUUsQ0FBQztNQUNuREMsb0JBQW9CLEdBQUdMLFNBQVMsQ0FBQ00sU0FBUyxDQUFFLEdBQUVKLFFBQVMsb0VBQW1FLENBQUM7SUFFNUgsSUFBSSxDQUFDRyxvQkFBb0IsRUFBRTtNQUMxQixNQUFNLElBQUlFLEtBQUssQ0FBRSxnREFBK0NMLFFBQVMsRUFBQyxDQUFDO0lBQzVFO0lBQ0EsTUFBTU0sY0FBYyxHQUFHLE1BQU9YLFlBQVksQ0FBQ0UsUUFBUSxDQUFDLGFBQWEsQ0FBQyxDQUFtQlUsaUJBQWlCLEVBQUU7SUFDeEcsTUFBTUMsVUFBVSxHQUFHQyxXQUFXLENBQUNDLGlCQUFpQixDQUFDLDJCQUEyQixFQUFFSixjQUFjLENBQUM7SUFDN0YsTUFBTUssVUFBVSxHQUFHZixLQUFLLENBQUNnQixXQUFXLENBQUUsR0FBRVQsb0JBQXFCLE9BQU0sRUFBRVQsT0FBTyxFQUFFO01BQUVtQixxQkFBcUIsRUFBRTtJQUFLLENBQUMsQ0FBQztJQUM5RyxNQUFNQyxPQUFPLEdBQUcsUUFBUTtJQUN4QixNQUFNQyxXQUFXLEdBQUdKLFVBQVUsQ0FBQ0ssT0FBTyxDQUNyQ0YsT0FBTyxFQUNQRyxTQUFTLEVBQ1RDLGdCQUFnQixDQUFDQyx3QkFBd0IsQ0FBQ0MsSUFBSSxDQUM3Q0MsTUFBTSxFQUNOUCxPQUFPLEVBQ1A7TUFBRVEsS0FBSyxFQUFFZCxVQUFVO01BQUVaO0lBQU0sQ0FBQyxFQUM1QlUsY0FBYyxFQUNkLElBQUksRUFDSixJQUFJLEVBQ0osSUFBSSxFQUNKVyxTQUFTLEVBQ1RBLFNBQVMsQ0FDVCxDQUNEO0lBQ0RyQixLQUFLLENBQUMyQixXQUFXLENBQUNULE9BQU8sQ0FBQztJQUUxQixNQUFNVSxVQUFtQixHQUFHLE1BQU1ULFdBQVc7SUFDN0MsTUFBTVUsV0FBVyxHQUFHOUIsWUFBWSxDQUFDK0IscUJBQXFCLEVBQUUsQ0FBQ0MseUJBQXlCLENBQUN4QixvQkFBb0IsRUFBRXFCLFVBQVUsQ0FBQztJQUNwSCxJQUFJQyxXQUFXLGFBQVhBLFdBQVcsZUFBWEEsV0FBVyxDQUFFRyxjQUFjLElBQUlILFdBQVcsQ0FBQ0csY0FBYyxDQUFDQyxNQUFNLEVBQUU7TUFDckUsTUFBTWxDLFlBQVksQ0FBQytCLHFCQUFxQixFQUFFLENBQUNJLGdDQUFnQyxDQUFDTCxXQUFXLEVBQUVELFVBQVUsQ0FBQztJQUNyRztJQUNBLE9BQU9BLFVBQVU7RUFDbEI7RUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNBLGVBQWVPLGdCQUFnQixDQUFDckMsT0FBZ0IsRUFBRUMsWUFBMEIsRUFBRTtJQUM3RSxNQUFNQyxLQUFLLEdBQUdGLE9BQU8sQ0FBQ0csUUFBUSxFQUFFO01BQy9CQyxTQUFTLEdBQUdGLEtBQUssQ0FBQ0csWUFBWSxFQUFFO01BQ2hDQyxRQUFRLEdBQUdGLFNBQVMsQ0FBQ0csV0FBVyxDQUFDUCxPQUFPLENBQUNRLE9BQU8sRUFBRSxDQUFDO01BQ25EOEIsb0JBQW9CLEdBQUdsQyxTQUFTLENBQUNNLFNBQVMsQ0FBRSxHQUFFSixRQUFTLG9FQUFtRSxDQUFDO0lBRTVILElBQUksQ0FBQ2dDLG9CQUFvQixFQUFFO01BQzFCLE1BQU0sSUFBSTNCLEtBQUssQ0FBRSxnREFBK0NMLFFBQVMsRUFBQyxDQUFDO0lBQzVFO0lBRUEsTUFBTU0sY0FBYyxHQUFHLE1BQU9YLFlBQVksQ0FBQ0UsUUFBUSxDQUFDLGFBQWEsQ0FBQyxDQUFtQlUsaUJBQWlCLEVBQUU7SUFDeEcsTUFBTUMsVUFBVSxHQUFHQyxXQUFXLENBQUNDLGlCQUFpQixDQUFDLHVCQUF1QixFQUFFSixjQUFjLENBQUM7SUFDekYsTUFBTTJCLFVBQVUsR0FBR3JDLEtBQUssQ0FBQ2dCLFdBQVcsQ0FBRSxHQUFFb0Isb0JBQXFCLE9BQU0sRUFBRXRDLE9BQU8sRUFBRTtNQUFFbUIscUJBQXFCLEVBQUU7SUFBSyxDQUFDLENBQUM7SUFDOUcsTUFBTUMsT0FBTyxHQUFHLFFBQVE7SUFFeEIsTUFBTW9CLFdBQVcsR0FBR0QsVUFBVSxDQUFDakIsT0FBTyxDQUNyQ0YsT0FBTyxFQUNQRyxTQUFTLEVBQ1RDLGdCQUFnQixDQUFDQyx3QkFBd0IsQ0FBQ0MsSUFBSSxDQUM3Q0MsTUFBTSxFQUNOUCxPQUFPLEVBQ1A7TUFBRVEsS0FBSyxFQUFFZCxVQUFVO01BQUVaO0lBQU0sQ0FBQyxFQUM1QlUsY0FBYyxFQUNkLElBQUksRUFDSixJQUFJLEVBQ0osSUFBSSxFQUNKVyxTQUFTLEVBQ1RBLFNBQVMsQ0FDVCxDQUNEO0lBRURyQixLQUFLLENBQUMyQixXQUFXLENBQUNULE9BQU8sQ0FBQztJQUUxQixJQUFJO01BQ0gsT0FBTyxNQUFNb0IsV0FBVztJQUN6QixDQUFDLENBQUMsT0FBT0MsR0FBRyxFQUFFO01BQ2IsTUFBTUMsWUFBWSxHQUFHdEMsU0FBUyxDQUFDTSxTQUFTLENBQUUsR0FBRUosUUFBUyxLQUFFLHlDQUFpQyxRQUFPLENBQUM7TUFFaEcsSUFBSW9DLFlBQVksRUFBRTtRQUNqQixJQUFJO1VBQ0gsTUFBTXpDLFlBQVksQ0FDaEIrQixxQkFBcUIsRUFBRSxDQUN2Qlcsa0JBQWtCLENBQUMsQ0FBQztZQUFFQyxhQUFhLEVBQUVGO1VBQWEsQ0FBQyxDQUFDLEVBQW1DMUMsT0FBTyxDQUFDO1FBQ2xHLENBQUMsQ0FBQyxPQUFPNkMsS0FBYyxFQUFFO1VBQ3hCQyxHQUFHLENBQUNELEtBQUssQ0FBQyxxQ0FBcUMsRUFBRUEsS0FBSyxDQUFXO1FBQ2xFO01BQ0Q7TUFDQSxNQUFNSixHQUFHO0lBQ1Y7RUFDRDtFQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNBLFNBQVNNLGVBQWUsQ0FBQy9DLE9BQWdCLEVBQUU7SUFDMUMsTUFBTUUsS0FBSyxHQUFHRixPQUFPLENBQUNHLFFBQVEsRUFBRTtNQUMvQkMsU0FBUyxHQUFHRixLQUFLLENBQUNHLFlBQVksRUFBRTtNQUNoQ0MsUUFBUSxHQUFHRixTQUFTLENBQUNHLFdBQVcsQ0FBQ1AsT0FBTyxDQUFDUSxPQUFPLEVBQUUsQ0FBQztNQUNuRHdDLHVCQUF1QixHQUFHNUMsU0FBUyxDQUFDTSxTQUFTLENBQUUsR0FBRUosUUFBUyx1RUFBc0UsQ0FBQztJQUVsSSxJQUFJLENBQUMwQyx1QkFBdUIsRUFBRTtNQUM3QixNQUFNLElBQUlyQyxLQUFLLENBQUUsbURBQWtETCxRQUFTLEVBQUMsQ0FBQztJQUMvRTtJQUVBLE1BQU0yQyxhQUFhLEdBQUcvQyxLQUFLLENBQUNnQixXQUFXLENBQUUsSUFBRzhCLHVCQUF3QixPQUFNLENBQUM7SUFDM0UsTUFBTUUsY0FBYyxHQUFHRCxhQUFhLENBQUMzQixPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM2QixJQUFJLENBQUMsWUFBWTtNQUN2RSxPQUFPbkQsT0FBTztJQUNmLENBQUMsQ0FBQztJQUNGRSxLQUFLLENBQUMyQixXQUFXLENBQUMsUUFBUSxDQUFDO0lBQzNCLE9BQU9xQixjQUFjO0VBQ3RCOztFQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDQSxTQUFTRSwyQkFBMkIsQ0FBQ0MsU0FBbUIsRUFBRUMsSUFBVSxFQUFFQyxnQkFBd0IsRUFBRTtJQUMvRixNQUFNQyxVQUFVLEdBQUdGLElBQUksQ0FBQ25ELFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQ3NELFdBQVcsQ0FBQyxhQUFhLENBQUM7TUFDaEU3QyxjQUFjLEdBQUc4QyxJQUFJLENBQUNDLHdCQUF3QixDQUFDLGtCQUFrQixDQUFDO01BQ2xFQyxVQUFVLEdBQUdoRCxjQUFjLElBQUlBLGNBQWMsQ0FBQ2lELE9BQU8sQ0FBQyxvQ0FBb0MsQ0FBQztNQUMzRkMsZ0JBQWdCLEdBQUdsRCxjQUFjLElBQUlBLGNBQWMsQ0FBQ2lELE9BQU8sQ0FBQywrQ0FBK0MsQ0FBQztNQUM1R0UsZUFBZSxHQUFHbkQsY0FBYyxJQUFJQSxjQUFjLENBQUNpRCxPQUFPLENBQUMsOENBQThDLENBQUM7SUFFM0csSUFBSU4sZ0JBQWdCLEtBQUsxRCxnQkFBZ0IsQ0FBQ21FLE1BQU0sSUFBSVIsVUFBVSxFQUFFO01BQy9ELE9BQU9TLFVBQVUsQ0FBQ0MsT0FBTyxDQUFDTixVQUFVLEVBQUU7UUFDckNPLE9BQU8sRUFBRSxDQUFDTCxnQkFBZ0IsRUFBRUMsZUFBZSxDQUFDO1FBQzVDSyxnQkFBZ0IsRUFBRU4sZ0JBQWdCO1FBQ2xDTyxPQUFPLEVBQUUsVUFBVUMsVUFBa0IsRUFBRTtVQUN0QyxJQUFJQSxVQUFVLEtBQUtSLGdCQUFnQixFQUFFO1lBQ3BDLE1BQU1TLGFBQWEsR0FBR2pCLElBQUksSUFBS0EsSUFBSSxDQUFDbkQsUUFBUSxDQUFDLFVBQVUsQ0FBZTtZQUV0RTJDLEdBQUcsQ0FBQzBCLElBQUksQ0FBQyx1QkFBdUIsQ0FBQztZQUNqQyxJQUFJRCxhQUFhLEVBQUU7Y0FDbEJBLGFBQWEsQ0FBQ0UsV0FBVyxDQUFDLFlBQVksRUFBRSxLQUFLLENBQUM7Y0FDOUNGLGFBQWEsQ0FBQ0UsV0FBVyxDQUFDLHFCQUFxQixFQUFFbEQsU0FBUyxDQUFDO1lBQzVELENBQUMsTUFBTTtjQUNOdUIsR0FBRyxDQUFDb0IsT0FBTyxDQUFDLGtDQUFrQyxDQUFDO1lBQ2hEO1lBQ0FiLFNBQVMsRUFBRTtVQUNaLENBQUMsTUFBTTtZQUNOUCxHQUFHLENBQUMwQixJQUFJLENBQUMsc0JBQXNCLENBQUM7VUFDakM7UUFDRDtNQUNELENBQUMsQ0FBQztJQUNIO0lBQ0EsT0FBT25CLFNBQVMsRUFBRTtFQUNuQjs7RUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDQSxNQUFNMUIsTUFBTSxHQUFHO0lBQ2Q1QiwyQkFBMkIsRUFBRUEsMkJBQTJCO0lBQ3hEc0MsZ0JBQWdCLEVBQUVBLGdCQUFnQjtJQUNsQ1UsZUFBZSxFQUFFQSxlQUFlO0lBQ2hDSywyQkFBMkIsRUFBRUE7RUFDOUIsQ0FBQztFQUFDLE9BRWF6QixNQUFNO0FBQUEifQ==