{"version":3,"file":"ActivitySync.js","names":["sap","ui","define","Log","CommonUtils","ActivityBase","CollaborationCommon","MessageBox","_exports","CollaborationUtils","Activity","isCollaborationConnected","initializeCollaboration","endCollaboration","broadcastCollaborationMessage","MYACTIVITY","ACTIVEUSERS","ACTIVITIES","SYNCGROUPID","isConnected","control","internalModel","getModel","send","action","content","triggeredActionName","clientContent","Array","isArray","join","myActivity","getProperty","LiveChange","setProperty","Undo","getWebSocketBaseURL","bindingContext","getMetaModel","getObject","isCollaborationEnabled","view","getBindingContext","connect","async","me","getMe","webSocketBaseURL","serviceUrl","getServiceUrl","sDraftUUID","requestProperty","message","messageReceive","disconnect","_message$clientConten","_activities","activeUsers","activities","activityKey","metaPath","calculateMetaPath","userAction","clientAction","sender","id","userID","name","userDescription","initials","formatInitials","color","getUserColor","mactivity","Join","JoinEcho","findIndex","user","unshift","Leave","filter","allActivities","removeUserActivities","bag","activity","p","Change","metaPaths","split","map","path","getMetaPath","forEach","currentMetaPath","i","_message$clientConten2","_currentActivities","nesteedMessage","currentActivities","getActivityKey","key","update","Create","Delete","Activate","draftClosedByOtherUser","getText","Discard","Action","initJSONModel","parts","length","slice","push","a","text","information","getBinding","resetChanges","then","navigate","catch","error","appComponent","getAppComponent","metaModel","currentPage","getCurrentPage","sideEffectsService","getSideEffectsService","currentContext","currentPath","getPath","changedDocument","deletedObjects","parentDeletedIndex","deletedObject","startsWith","onClose","targetContext","bindContext","getBoundContext","getController","_routing","navigateBackFromContext","actionName","clientTriggeredActionName","bindingParameters","getODataActionSideEffects","targetPaths","pathExpressions","requestSideEffects","activityPath","replace","sideEffects","$PropertyPath","entityType","getEntityTypeFromContext","entityTypeSideEffects","getODataEntitySideEffects","object","Object","relevantSideEffects","fromEntries","entries","x","_x$1$SourceProperties","SourceProperties","source","value","TargetProperties","targetProperty","editFlow","updateDocument","Promise","resolve","routing","getCurrentPageView","substring","lastIndexOf","dataPath"],"sources":["ActivitySync-dbg.js"],"mappings":"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"}