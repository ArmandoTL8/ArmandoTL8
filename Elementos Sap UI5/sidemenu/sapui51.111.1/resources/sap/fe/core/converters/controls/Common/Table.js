/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/converters/annotations/DataField","sap/fe/core/converters/controls/Common/Action","sap/fe/core/converters/helpers/BindingHelper","sap/fe/core/converters/helpers/ConfigurableObject","sap/fe/core/converters/helpers/IssueManager","sap/fe/core/converters/helpers/Key","sap/fe/core/formatters/TableFormatter","sap/fe/core/formatters/TableFormatterTypes","sap/fe/core/helpers/BindingToolkit","sap/fe/core/helpers/ModelHelper","sap/fe/core/helpers/StableIdHelper","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/templating/DisplayModeFormatter","sap/fe/core/templating/EntitySetHelper","sap/fe/core/templating/PropertyHelper","sap/fe/core/templating/UIFormatters","sap/fe/macros/internal/helpers/ActionHelper","sap/ui/core/Core","../../helpers/Aggregation","../../helpers/DataFieldHelper","../../helpers/ID","../../ManifestSettings","./Criticality","./table/StandardActions"],function(e,t,n,i,o,a,l,r,s,d,u,v,c,p,f,g,m,y,b,h,T,I,P,D){"use strict";var F={};var A=D.isInDisplayMode;var C=D.isDraftOrStickySupported;var S=D.getStandardActionPaste;var E=D.getStandardActionMassEdit;var O=D.getStandardActionDelete;var x=D.getStandardActionCreate;var M=D.getRestrictions;var U=D.getMassEditVisibility;var $=D.getInsertUpdateActionsTemplating;var N=D.getDeleteVisibility;var w=D.getCreationRow;var V=D.getCreateVisibility;var k=D.generateStandardActionsContext;var R=P.getMessageTypeFromCriticalityType;var L=I.VisualizationType;var j=I.VariantManagementType;var H=I.TemplateType;var B=I.SelectionMode;var z=I.Importance;var K=I.HorizontalAlign;var G=I.CreationMode;var W=I.AvailabilityType;var q=I.ActionType;var Q=T.getTableID;var _=h.isReferencePropertyStaticallyHidden;var Y=b.AggregationHelper;var J=g.isMultiValueField;var X=f.isProperty;var Z=f.isPathExpression;var ee=f.isNavigationProperty;var te=f.getAssociatedUnitProperty;var ne=f.getAssociatedTimezoneProperty;var ie=f.getAssociatedCurrencyProperty;var oe=p.getNonSortablePropertiesRestrictions;var ae=c.getDisplayMode;var le=v.isPathUpdatable;var re=v.isPathSearchable;var se=v.isPathDeletable;var de=v.getTargetObjectPath;var ue=v.enhanceDataModelPath;var ve=u.replaceSpecialChars;var ce=u.generate;var pe=s.resolveBindingString;var fe=s.pathInModel;var ge=s.or;var me=s.not;var ye=s.isConstant;var be=s.ifElse;var he=s.getExpressionFromAnnotation;var Te=s.formatResult;var Ie=s.equal;var Pe=s.EDM_TYPE_MAPPING;var De=s.constant;var Fe=s.compileExpression;var Ae=s.and;var Ce=r.MessageType;var Se=a.KeyHelper;var Ee=o.IssueType;var Oe=o.IssueSeverity;var xe=o.IssueCategoryType;var Me=o.IssueCategory;var Ue=i.Placement;var $e=i.OverrideType;var Ne=i.insertCustomElements;var we=n.UI;var Ve=n.Entity;var ke=t.removeDuplicateActions;var Re=t.isActionNavigable;var Le=t.getCopyAction;var je=t.getActionsFromManifest;var He=t.dataFieldIsCopyAction;var Be=e.isDataPointFromDataFieldDefault;var ze=e.isDataFieldTypes;var Ke=e.isDataFieldForActionAbstract;var Ge=e.getTargetValueOnDataPoint;var We=e.getSemanticObjectPath;var qe=e.getDataFieldDataType;var Qe=e.collectRelatedPropertiesRecursively;var _e=e.collectRelatedProperties;var Ye;(function(e){e["Default"]="Default";e["Annotation"]="Annotation";e["Slot"]="Slot"})(Ye||(Ye={}));function Je(e,t,n,i){const o=yt(e,t,n);const a=o.tableActions;const l=o.hiddenTableActions;const r=je(n.getManifestControlConfiguration(t).actions,n,a,i,true,l);const s={isNavigable:$e.overwrite,enableOnSelect:$e.overwrite,enableAutoScroll:$e.overwrite,enabled:$e.overwrite,visible:$e.overwrite,defaultValuesExtensionFunction:$e.overwrite,command:$e.overwrite};const d=Ne(a,r.actions,s);return{actions:d,commandActions:r.commandActions}}F.getTableActions=Je;function Xe(e,t,n,i){const o=_t(e,t,n);const a=Xt(n.getManifestControlConfiguration(t).columns,o,n,n.getAnnotationEntityType(e),i);return Ne(o,a,{width:$e.overwrite,importance:$e.overwrite,horizontalAlign:$e.overwrite,availability:$e.overwrite,isNavigable:$e.overwrite,settings:$e.overwrite,formatOptions:$e.overwrite})}F.getTableColumns=Xe;const Ze=function(e,t,n){const i=new Y(e,n);function o(e){return t.find(t=>{const n=t;return n.propertyInfos===undefined&&n.relativePath===e})}if(!i.isAnalyticsSupported()){return undefined}const a=new Set;t.forEach(e=>{const t=e;if(t.unit){a.add(t.unit)}});const l=i.getCustomAggregateDefinitions();const r={};l.forEach(e=>{const t=i._entityType.entityProperties.find(t=>t.name===e.qualifier);if(t){var n,o;const i=(n=e.annotations)===null||n===void 0?void 0:(o=n.Aggregation)===null||o===void 0?void 0:o.ContextDefiningProperties;r[t.name]=i?i.map(e=>e.value):[]}});const s={};t.forEach(e=>{const t=e;if(t.propertyInfos===undefined&&t.relativePath){const e=r[t.relativePath];if(e&&!a.has(t.name)){s[t.name]={defaultAggregate:{},relativePath:t.relativePath};const n=[];e.forEach(e=>{const t=o(e);if(t){n.push(t.name)}});if(n.length){s[t.name].defaultAggregate.contextDefiningProperties=n}}}});return s};F.getAggregateDefinitionsFromEntityType=Ze;function et(e,t,n,i){if(e.control.type==="AnalyticalTable"){const o=Ze(t,e.columns,n),a=new Y(t,n);if(o){e.enableAnalytics=true;e.enable$select=false;e.enable$$getKeepAliveContext=false;e.aggregates=o;ln(e);const t=a.getAllowedTransformations();e.enableAnalyticsSearch=t?t.indexOf("search")>=0:true;e.annotation.groupConditions=an(i,e.columns,e.control.type);e.annotation.aggregateConditions=rn(i,e.columns)}e.control.type="GridTable"}else if(e.control.type==="ResponsiveTable"){e.annotation.groupConditions=an(i,e.columns,e.control.type)}else if(e.control.type==="TreeTable"){e.enable$$getKeepAliveContext=false}}F.updateTableVisualizationForType=et;function tt(e,t){const n=e.getManifestWrapper();if(t&&n.getNavigationConfiguration(t)){const e=n.getNavigationConfiguration(t);if(Object.keys(e).length>0){return t}}const i=e.getDataModelObjectPath();const o=e.getContextPath();const a=n.getNavigationConfiguration(o);if(a&&Object.keys(a).length>0){return o}return i.targetEntitySet?i.targetEntitySet.name:i.startingEntitySet.name}function nt(e,t){function n(e){return t.find(t=>{const n=t;return n.propertyInfos===undefined&&n.relativePath===e})}t.forEach(t=>{const i=t;if(i.propertyInfos===undefined&&i.relativePath){const t=e.entityProperties.find(e=>e.name===i.relativePath);if(t){var o,a,l;const e=ie(t)||te(t);const v=ne(t);const c=t===null||t===void 0?void 0:(o=t.annotations)===null||o===void 0?void 0:(a=o.Common)===null||a===void 0?void 0:a.Timezone;if(e){const t=n(e.name);i.unit=t===null||t===void 0?void 0:t.name}else{var r,s,d,u;const e=(t===null||t===void 0?void 0:(r=t.annotations)===null||r===void 0?void 0:(s=r.Measures)===null||s===void 0?void 0:s.ISOCurrency)||(t===null||t===void 0?void 0:(d=t.annotations)===null||d===void 0?void 0:(u=d.Measures)===null||u===void 0?void 0:u.Unit);if(e){i.unitText=`${e}`}}if(v){const e=n(v.name);i.timezone=e===null||e===void 0?void 0:e.name}else if(c){i.timezoneText=c.toString()}const p=ae(t),f=(l=t.annotations.Common)===null||l===void 0?void 0:l.Text;if(Z(f)&&p!=="Value"){const e=n(f.path);if(e&&e.name!==i.name){i.textArrangement={textProperty:e.name,mode:p}}}}}})}F.updateLinkedProperties=nt;function it(e){var t,n,i,o,a,l,r,s,d,u,v,c,p;const f=(t=e.getAnnotationEntityType())===null||t===void 0?void 0:(n=t.annotations)===null||n===void 0?void 0:(i=n.UI)===null||i===void 0?void 0:(o=i.HeaderInfo)===null||o===void 0?void 0:(a=o.Title)===null||a===void 0?void 0:(l=a.Value)===null||l===void 0?void 0:l.path;const g=(r=e.getAnnotationEntityType())===null||r===void 0?void 0:(s=r.annotations)===null||s===void 0?void 0:(d=s.Common)===null||d===void 0?void 0:d.SemanticKey;const m=e===null||e===void 0?void 0:(u=e.getAnnotationEntityType())===null||u===void 0?void 0:(v=u.annotations)===null||v===void 0?void 0:(c=v.UI)===null||c===void 0?void 0:(p=c.HeaderInfo)===null||p===void 0?void 0:p.TypeName;const y=[];if(g){g.forEach(function(e){y.push(e.value)})}return{headerInfoTitlePath:f,semanticKeyColumns:y,headerInfoTypeName:m}}function ot(e,t,n,i,o,a){const l=Dn(e,t,n,o);const{navigationPropertyPath:r}=un(t);const s=tt(n,r);const d=n.getManifestWrapper().getNavigationConfiguration(s);const u=Xe(e,t,n,d);const v=lt(e,n);const c=it(n);const p=Je(e,t,n,d);const f={type:L.Table,annotation:sn(e,t,n,l,u,i,a),control:l,actions:ke(p.actions),commandActions:p.commandActions,columns:u,operationAvailableMap:JSON.stringify(v),operationAvailableProperties:st(v,n),headerInfoTitle:c.headerInfoTitlePath,semanticKeys:c.semanticKeyColumns,headerInfoTypeName:c.headerInfoTypeName,enable$select:true,enable$$getKeepAliveContext:true};nt(n.getAnnotationEntityType(e),u);et(f,n.getAnnotationEntityType(e),n,i);return f}F.createTableVisualization=ot;function at(e,t){const n=Dn(undefined,"",e,false);const i=It({},e.getEntityType(),[],[],e,n.type,[]);const o=lt(undefined,e);const a=it(e);const l={type:L.Table,annotation:sn(undefined,"",e,n,t?[]:i),control:n,actions:[],columns:i,operationAvailableMap:JSON.stringify(o),operationAvailableProperties:st(o,e),headerInfoTitle:a.headerInfoTitlePath,semanticKeys:a.semanticKeyColumns,headerInfoTypeName:a.headerInfoTypeName,enable$select:true,enable$$getKeepAliveContext:true};nt(e.getEntityType(),i);et(l,e.getEntityType(),e);return l}F.createDefaultTableVisualization=at;function lt(e,t){return m.getOperationAvailableMap(e,"table",t)}function rt(e){var t,n,i;const o=M(e);const a=e.getEntitySet();const l=o.isUpdatable;const r=!ye(l.expression)&&l.navigationExpression._type==="Unresolvable";const s=a===null||a===void 0?void 0:(t=a.annotations.Capabilities)===null||t===void 0?void 0:(n=t.UpdateRestrictions)===null||n===void 0?void 0:(i=n.Updatable)===null||i===void 0?void 0:i.path;return r?s:""}function st(e,t){const n=new Set;for(const t in e){const i=e[t];if(i===null){n.add(t)}else if(typeof i==="string"){n.add(i)}}if(n.size){var i,o,a,l,r;const e=t.getEntityType();const s=(i=e.annotations)===null||i===void 0?void 0:(o=i.UI)===null||o===void 0?void 0:(a=o.HeaderInfo)===null||a===void 0?void 0:(l=a.Title)===null||l===void 0?void 0:(r=l.Value)===null||r===void 0?void 0:r.path;if(s){n.add(s)}}return Array.from(n).join(",")}function dt(e,t,n,i){const o=[];e.forEach(e=>{var a,l;if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"&&e!==null&&e!==void 0&&(a=e.ActionTarget)!==null&&a!==void 0&&a.isBound&&t===(e===null||e===void 0?void 0:e.ActionTarget.sourceEntityType)||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"&&e.RequiresContext&&(e===null||e===void 0?void 0:(l=e.Inline)===null||l===void 0?void 0:l.valueOf())!==true){var r,s,d;if(typeof((r=e.annotations)===null||r===void 0?void 0:(s=r.UI)===null||s===void 0?void 0:(d=s.Hidden)===null||d===void 0?void 0:d.valueOf())==="object"){o.push(Ie(ut(e,n,i),false))}}});return o}function ut(e,t,n){var i;let o;if((e===null||e===void 0?void 0:e.$Type)==="com.sap.vocabularies.UI.v1.DataFieldForAction"||(e===null||e===void 0?void 0:e.$Type)==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){var a,l;o=e===null||e===void 0?void 0:(a=e.annotations)===null||a===void 0?void 0:(l=a.UI)===null||l===void 0?void 0:l.Hidden}else{o=e===null||e===void 0?void 0:e.visible}let r;if((i=o)!==null&&i!==void 0&&i.path){r=o.path}else{r=o}if(r){if(e!==null&&e!==void 0&&e.visible){r=r.substring(1,r.length-1)}if(r.indexOf("/")>0){var s;const e=r.split("/");const n=e[0];if((t===null||t===void 0?void 0:(s=t.targetObject)===null||s===void 0?void 0:s._type)==="NavigationProperty"&&t.targetObject.partner===n){return fe(e.slice(1).join("/"))}else{return De(true)}}else if(n){return fe(r)}else{return De(true)}}return De(true)}function vt(e,t,n){return Object.keys(n).some(i=>{if(i===e){var o;if(t!==null&&t!==void 0&&(o=t.ActionTarget)!==null&&o!==void 0&&o.isBound||t!==null&&t!==void 0&&t.RequiresContext){n[e].requiresSelection=true}return true}return false})}function ct(e,t,n){return e.some(e=>{var i,o,a,l,r,s,d;if((e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation")&&(e===null||e===void 0?void 0:(i=e.Inline)===null||i===void 0?void 0:i.valueOf())!==true&&(((o=e.annotations)===null||o===void 0?void 0:(a=o.UI)===null||a===void 0?void 0:(l=a.Hidden)===null||l===void 0?void 0:l.valueOf())===false||((r=e.annotations)===null||r===void 0?void 0:(s=r.UI)===null||s===void 0?void 0:(d=s.Hidden)===null||d===void 0?void 0:d.valueOf())===undefined)){if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"){var u;const i=ce(["DataFieldForAction",e.Action]);if(vt(i,e,t)){return false}return(e===null||e===void 0?void 0:(u=e.ActionTarget)===null||u===void 0?void 0:u.isBound)&&n===(e===null||e===void 0?void 0:e.ActionTarget.sourceEntityType)}else if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){if(vt(`DataFieldForIntentBasedNavigation::${e.SemanticObject}::${e.Action}`,e,t)){return false}return e.RequiresContext}}return false})}function pt(e){return Object.keys(e).some(t=>{var n;const i=e[t];if(i.requiresSelection&&((n=i.visible)===null||n===void 0?void 0:n.toString())==="true"){return true}return false})}function ft(e){const t=[];if(e){Object.keys(e).forEach(n=>{const i=e[n];if(i.requiresSelection===true&&i.visible!==undefined){if(typeof i.visible==="string"){var o;t.push(pe(i===null||i===void 0?void 0:(o=i.visible)===null||o===void 0?void 0:o.valueOf()))}}})}return t}function gt(e){const t=se(e.getDataModelObjectPath());const n=le(e.getDataModelObjectPath());return{isDeletable:!(ye(t)&&t.value===false),isUpdatable:!(ye(n)&&n.value===false)}}F.getCapabilityRestriction=gt;function mt(e,t,n,i,o,a){var l;let r=arguments.length>6&&arguments[6]!==undefined?arguments[6]:De(false);if(!e){return B.None}const s=n.getManifestControlConfiguration(t);let d=(l=s.tableSettings)===null||l===void 0?void 0:l.selectionMode;let u=[],v=[];const c=je(n.getManifestControlConfiguration(t).actions,n,[],undefined,false);let p,f;if(n.getTemplateType()===H.ObjectPage){p=se(n.getDataModelObjectPath());f=p?Fe(p,true):p}const g=!ye(r)||r.value!==false;if(d&&d===B.None&&a){if(n.getTemplateType()===H.ObjectPage&&g){return Fe(be(Ae(we.IsEditable,r),De("Multi"),be(a,De("Multi"),De("None"))))}else if(g){return B.Multi}return Fe(be(a,De("Multi"),De("None")))}if(!d||d===B.Auto){d=B.Multi}if(g){d=d===B.Single?B.Single:B.Multi}if(ct(e,c.actions,n.getEntityType())||pt(c.actions)){return d}u=dt(e,n.getEntityType(),n.getDataModelObjectPath(),i);v=ft(c.actions);if(u.length===0&&v.length===0&&(a||g)){if(!i){if(o.isDeletable||f!=="false"||g){const e=ge(a||true,r);return Fe(be(Ae(we.IsEditable,e),De(d),De(B.None)))}else{return B.None}}else if(g){return d}else if(o.isDeletable&&a){return Fe(be(a,De(d),De("None")))}else{return B.None}}else if(!i){if(o.isDeletable||f!=="false"||g){const e=be(g&&!o.isDeletable,r,De(true));return Fe(be(Ae(we.IsEditable,e),De(d),be(ge(...u.concat(v)),De(d),De(B.None))))}else{return Fe(be(ge(...u.concat(v)),De(d),De(B.None)))}}else if(o.isDeletable||g){return d}else{return Fe(be(ge(...u.concat(v),r),De(d),De(B.None)))}}F.getSelectionMode=mt;function yt(e,t,n){const i=[];const o=[];const a=Le(e.filter(e=>He(e)));if(a){var l,r,s;i.push({type:q.Copy,annotationPath:n.getEntitySetBasedAnnotationPath(a.fullyQualifiedName),key:Se.generateKeyFromDataField(a),enabled:Fe(Ie(fe("numberOfSelectedContexts","internal"),1)),visible:Fe(me(Ie(he((l=a.annotations)===null||l===void 0?void 0:(r=l.UI)===null||r===void 0?void 0:r.Hidden,[],undefined,n.getRelativeModelPathFunction()),true))),text:((s=a.Label)===null||s===void 0?void 0:s.toString())??y.getLibraryResourceBundle("sap.fe.core").getText("C_COMMON_COPY"),isNavigable:true})}e.filter(e=>!He(e)).forEach(e=>{var t,a,l,r,s,d,u,v,c;if(((t=e.annotations)===null||t===void 0?void 0:(a=t.UI)===null||a===void 0?void 0:(l=a.Hidden)===null||l===void 0?void 0:l.valueOf())===true){o.push({type:q.Default,key:Se.generateKeyFromDataField(e)})}else if(Ke(e)&&((r=e.Inline)===null||r===void 0?void 0:r.valueOf())!==true&&((s=e.Determining)===null||s===void 0?void 0:s.valueOf())!==true){switch(e.$Type){case"com.sap.vocabularies.UI.v1.DataFieldForAction":i.push({type:q.DataFieldForAction,annotationPath:n.getEntitySetBasedAnnotationPath(e.fullyQualifiedName),key:Se.generateKeyFromDataField(e),visible:Fe(me(Ie(he((d=e.annotations)===null||d===void 0?void 0:(u=d.UI)===null||u===void 0?void 0:u.Hidden,[],undefined,n.getRelativeModelPathFunction()),true))),isNavigable:true});break;case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":i.push({type:q.DataFieldForIntentBasedNavigation,annotationPath:n.getEntitySetBasedAnnotationPath(e.fullyQualifiedName),key:Se.generateKeyFromDataField(e),visible:Fe(me(Ie(he((v=e.annotations)===null||v===void 0?void 0:(c=v.UI)===null||c===void 0?void 0:c.Hidden,[],undefined,n.getRelativeModelPathFunction()),true)))});break;default:break}}});return{tableActions:i,hiddenTableActions:o}}function bt(e,t,n){let i=Ce.None;if(e){if(typeof e==="object"){i=he(e)}else{i=R(e)}}const o=[];n===null||n===void 0?void 0:n.keys.forEach(e=>{if(e.name!=="IsActiveEntity"){o.push(fe(e.name,undefined))}});return Te([i,fe(`filteredMessages`,"internal"),t&&Ve.HasActive,t&&Ve.IsActive,`${t}`,...o],l.rowHighlighting,n)}function ht(e,t,n,i,o){var a;const l=(i===null||i===void 0?void 0:i.create)||(i===null||i===void 0?void 0:i.detail);const r=n.getManifestControlConfiguration(o);const s=r&&r.tableSettings||{};if(l!==null&&l!==void 0&&l.outbound&&l.outboundDetail&&i!==null&&i!==void 0&&i.create){return{mode:"External",outbound:l.outbound,outboundDetail:l.outboundDetail,navigationSettings:i}}let d;if(e){var u,v,c;const e=(u=n.getEntitySet())===null||u===void 0?void 0:u.annotations;const i=e===null||e===void 0?void 0:e.Common,o=e===null||e===void 0?void 0:e.Session;d=(i===null||i===void 0?void 0:(v=i.DraftRoot)===null||v===void 0?void 0:v.NewAction)||(o===null||o===void 0?void 0:(c=o.StickySessionSupported)===null||c===void 0?void 0:c.NewAction);if(t.creationMode===G.CreationRow&&d){throw Error(`Creation mode '${G.CreationRow}' can not be used with a custom 'new' action (${d})`)}if(l!==null&&l!==void 0&&l.route){var p;return{mode:t.creationMode,append:t.createAtEnd,newAction:(p=d)===null||p===void 0?void 0:p.toString(),navigateToTarget:t.creationMode===G.NewPage?l.route:undefined}}}if(t.creationMode===G.NewPage){var f;t.creationMode=G.Inline;if(((f=s.creationMode)===null||f===void 0?void 0:f.createAtEnd)===undefined){t.createAtEnd=false}}return{mode:t.creationMode,append:t.createAtEnd,newAction:(a=d)===null||a===void 0?void 0:a.toString()}}const Tt=function(e,t,n,i,o){let a,r;let s=De(Ce.None);const u=t.getEntityType();if(n&&e){var v,c;r=((v=n.display)===null||v===void 0?void 0:v.target)||((c=n.detail)===null||c===void 0?void 0:c.outbound);if(r){a=".handlers.onChevronPressNavigateOutBound( $controller ,'"+r+"', ${$parameters>bindingContext})"}else if(u){var p;const l=t.getEntitySet();r=(p=n.detail)===null||p===void 0?void 0:p.route;if(r&&!d.isSingleton(l)){var f,g;s=bt((f=e.annotations)===null||f===void 0?void 0:(g=f.UI)===null||g===void 0?void 0:g.Criticality,!!d.getDraftRoot(l)||!!d.getDraftNode(l),u);a="API.onTableRowPress($event, $controller, ${$parameters>bindingContext}, { callExtension: true, targetPath: '"+i+"', editable : "+(d.getDraftRoot(l)||d.getDraftNode(l)?"!${$parameters>bindingContext}.getProperty('IsActiveEntity')":"undefined")+(o==="AnalyticalTable"||o==="TreeTable"?", bRecreateContext: true":"")+"})"}else{var m,y;s=bt((m=e.annotations)===null||m===void 0?void 0:(y=m.UI)===null||y===void 0?void 0:y.Criticality,false,u)}}}const b=Te([fe("/deepestPath","internal")],l.navigatedRow,u);return{press:a,action:a?"Navigation":undefined,rowHighlighting:Fe(s),rowNavigated:Fe(b),visible:Fe(me(we.IsInactive))}};const It=function(e,t){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];let i=arguments.length>3?arguments[3]:undefined;let o=arguments.length>4?arguments[4]:undefined;let a=arguments.length>5?arguments[5]:undefined;let l=arguments.length>6?arguments[6]:undefined;const r=n;const s=new Y(t,o);t.entityProperties.forEach(t=>{const d=n.some(e=>e.name===t.name);if(!t.targetType&&!d){const n=_e(t.name,t,o,true,a);const d=Object.keys(n.properties);const u=Object.keys(n.additionalProperties);if(n.textOnlyPropertiesFromTextAnnotation.length>0){l.push(...n.textOnlyPropertiesFromTextAnnotation)}const v=Pt(t,o.getEntitySetBasedAnnotationPath(t.fullyQualifiedName),t.name,true,true,i,s,o,l);const c=o.getAnnotationsByTerm("Common","com.sap.vocabularies.Common.v1.SemanticKey",[o.getEntityType()])[0];const p=Kt(v.name,c,false,null);if(Object.keys(p).length>0){v.formatOptions={...p}}if(d.length>0){v.propertyInfos=d;v.exportSettings={...v.exportSettings,template:n.exportSettingsTemplate,wrap:n.exportSettingsWrapping};v.exportSettings.type=dn(t.type,d.length>1);if(n.exportUnitName){v.exportSettings.unitProperty=n.exportUnitName;v.exportSettings.type="Currency"}else if(n.exportUnitString){v.exportSettings.unit=n.exportUnitString}if(n.exportTimezoneName){v.exportSettings.timezoneProperty=n.exportTimezoneName;v.exportSettings.utc=false}else if(n.exportTimezoneString){v.exportSettings.timezone=n.exportTimezoneString}if(n.exportDataPointTargetValue){v.exportDataPointTargetValue=n.exportDataPointTargetValue;v.exportSettings.type="String"}d.forEach(t=>{e[t]=n.properties[t]})}if(u.length>0){v.additionalPropertyInfos=u;u.forEach(t=>{e[t]=n.additionalProperties[t]})}r.push(v)}if(ae(t)==="Description"){i=i.concat(t.name);r.push(Pt(t,o.getEntitySetBasedAnnotationPath(t.fullyQualifiedName),t.name,false,false,i,s,o,[]))}});const d=xt(e,r,i,o,t,l);return r.concat(d)};F.getColumnsFromEntityType=It;const Pt=function(e,t,n,i,o,a,l,r,s){var d,u,v,c,p;const f=i?n:`Property::${n}`;const g=(i?"DataField::":"Property::")+ve(n);const m=We(r,e);const y=((d=e.annotations)===null||d===void 0?void 0:(u=d.UI)===null||u===void 0?void 0:(v=u.Hidden)===null||v===void 0?void 0:v.valueOf())===true;const b=e.name?wt(e.name,true,false):undefined;const h=b!=e.name;const T=dn(e.type);const I=e.type==="Edm.Date"?"YYYY-MM-DD":undefined;const P=qe(e);const D=Fn(e,P);const F=r.getAnnotationsByTerm("Common","com.sap.vocabularies.Common.v1.SemanticKey",[r.getEntityType()])[0];const A=s&&s.indexOf(n)>=0;const C=(!y||A)&&a.indexOf(n)===-1;const S={className:e.type||P,formatOptions:D.formatOptions,constraints:D.constraints};let E=null;if(Dt(e)){var O,x,M,U,$,N;const t=ie(e)||te(e);const n=ne(e);const i=((O=e.annotations)===null||O===void 0?void 0:(x=O.Measures)===null||x===void 0?void 0:x.ISOCurrency)||((M=e.annotations)===null||M===void 0?void 0:(U=M.Measures)===null||U===void 0?void 0:U.Unit);const o=($=e.annotations)===null||$===void 0?void 0:(N=$.Common)===null||N===void 0?void 0:N.Timezone;E={type:T,inputFormat:I,scale:e.scale,delimiter:e.type==="Edm.Int64"};if(t){E.unitProperty=t.name;E.type="Currency"}else if(i){E.unit=`${i}`}if(n){E.timezoneProperty=n.name;E.utc=false}else if(o){E.timezone=o.toString()}}const w=Pn(n,r);const V={key:g,type:Ye.Annotation,label:St(e,h),groupLabel:h?St(e):undefined,group:h?b:undefined,annotationPath:t,semanticObjectPath:m,availability:!o||y?W.Hidden:W.Adaptation,name:f,relativePath:n,sortable:C,isGroupable:l.isAnalyticsSupported()?!!l.isPropertyGroupable(e):C,isKey:e.isKey,exportSettings:E,caseSensitive:Rt(r),typeConfig:S,importance:Qt((c=e.annotations)===null||c===void 0?void 0:(p=c.UI)===null||p===void 0?void 0:p.DataFieldDefault,F),additionalLabels:w};const k=Et(e);if(k){V.tooltip=k}const R=Ge(e);if(Be(e)&&typeof R==="string"&&V.exportSettings){V.exportDataPointTargetValue=R;V.exportSettings.template="{0}/"+R}return V};function Dt(e){var t;let n,i;const o=(t=e.annotations.UI)===null||t===void 0?void 0:t.DataFieldDefault;if(X(e)&&o!==null&&o!==void 0&&o.$Type){if(_(o)===true){return false}n=o===null||o===void 0?void 0:o.$Type}else if(_(e)===true){return false}else{var a,l,r,s,d,u,v,c,p,f,g;i=e;n=i.$Type;if(n==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&(a=i.Target)!==null&&a!==void 0&&(l=a.$target)!==null&&l!==void 0&&l.$Type){var m,y;n=(m=i.Target)===null||m===void 0?void 0:(y=m.$target)===null||y===void 0?void 0:y.$Type;return"com.sap.vocabularies.UI.v1.ChartDefinitionType".indexOf(n)===-1}else if(((r=i.Value)===null||r===void 0?void 0:(s=r.$target)===null||s===void 0?void 0:(d=s.annotations)===null||d===void 0?void 0:(u=d.Core)===null||u===void 0?void 0:(v=u.MediaType)===null||v===void 0?void 0:v.term)==="Org.OData.Core.V1.MediaType"&&((c=i.Value)===null||c===void 0?void 0:(p=c.$target)===null||p===void 0?void 0:(f=p.annotations)===null||f===void 0?void 0:(g=f.Core)===null||g===void 0?void 0:g.isURL)!==true){return false}}return n?["com.sap.vocabularies.UI.v1.DataFieldForAction","com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation","com.sap.vocabularies.UI.v1.DataFieldForActionGroup"].indexOf(n)===-1:true}const Ft=function(e){switch(e.$Type){case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":return!!e.Inline;case"com.sap.vocabularies.UI.v1.DataFieldWithAction":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":return true;default:}};const At=function(e,t){var n,i,o,a,l,r;const s=e.targetObject;let d;if(s){switch(s.$Type){case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":case"com.sap.vocabularies.UI.v1.DataPointType":d=s.Value.$target;break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":if((s===null||s===void 0?void 0:(n=s.Target)===null||n===void 0?void 0:(i=n.$target)===null||i===void 0?void 0:i.$Type)==="com.sap.vocabularies.UI.v1.DataPointType"){var u;d=(u=s.Target.$target)===null||u===void 0?void 0:u.Value.$target}break;case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldForAction":default:d=undefined}}const v=t!==null&&t!==void 0&&t.isAnalytics?we.IsExpanded:De(false);const c=t!==null&&t!==void 0&&t.isAnalytics?Ie(we.NodeLevel,0):De(false);return Ae(...[me(Ie(he(s===null||s===void 0?void 0:(o=s.annotations)===null||o===void 0?void 0:(a=o.UI)===null||a===void 0?void 0:a.Hidden),true)),be(!!d,d&&me(Ie(he((l=d.annotations)===null||l===void 0?void 0:(r=l.UI)===null||r===void 0?void 0:r.Hidden),true)),true),ge(me(v),c)])};F._getVisibleExpression=At;const Ct=function(e,t){var n,i;const o=[];if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&((n=e.Target)===null||n===void 0?void 0:(i=n.$target)===null||i===void 0?void 0:i.$Type)==="com.sap.vocabularies.UI.v1.FieldGroupType"){var a,l;if(e!==null&&e!==void 0&&(a=e.annotations)!==null&&a!==void 0&&(l=a.UI)!==null&&l!==void 0&&l.Hidden){return Fe(me(Ie(he(e.annotations.UI.Hidden),true)))}else{var r;(r=e.Target.$target.Data)===null||r===void 0?void 0:r.forEach(e=>{o.push(At({targetObject:e},t))});return Fe(be(ge(...o),De(true),De(false)))}}else{return undefined}};const St=function(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!e){return undefined}if(X(e)||ee(e)){var n,i,o,a,l;const t=(n=e.annotations)===null||n===void 0?void 0:(i=n.UI)===null||i===void 0?void 0:i.DataFieldDefault;if(t&&!t.qualifier&&(o=t.Label)!==null&&o!==void 0&&o.valueOf()){var r;return Fe(he((r=t.Label)===null||r===void 0?void 0:r.valueOf()))}return Fe(he(((a=e.annotations.Common)===null||a===void 0?void 0:(l=a.Label)===null||l===void 0?void 0:l.valueOf())||e.name))}else if(ze(e)){var s,d,u,v,c,p,f,g;if(!!t&&e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation"){var m;return Fe(he((m=e.Label)===null||m===void 0?void 0:m.valueOf()))}return Fe(he(((s=e.Label)===null||s===void 0?void 0:s.valueOf())||((d=e.Value)===null||d===void 0?void 0:(u=d.$target)===null||u===void 0?void 0:(v=u.annotations)===null||v===void 0?void 0:(c=v.Common)===null||c===void 0?void 0:(p=c.Label)===null||p===void 0?void 0:p.valueOf())||((f=e.Value)===null||f===void 0?void 0:(g=f.$target)===null||g===void 0?void 0:g.name)))}else if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){var y,b,h,T,I,P,D,F;return Fe(he(((y=e.Label)===null||y===void 0?void 0:y.valueOf())||((b=e.Target)===null||b===void 0?void 0:(h=b.$target)===null||h===void 0?void 0:(T=h.Value)===null||T===void 0?void 0:(I=T.$target)===null||I===void 0?void 0:(P=I.annotations)===null||P===void 0?void 0:(D=P.Common)===null||D===void 0?void 0:(F=D.Label)===null||F===void 0?void 0:F.valueOf())))}else{var A;return Fe(he((A=e.Label)===null||A===void 0?void 0:A.valueOf()))}};const Et=function(e){var t,n;if(!e){return undefined}if(X(e)||(t=e.annotations)!==null&&t!==void 0&&(n=t.Common)!==null&&n!==void 0&&n.QuickInfo){var i,o;return(i=e.annotations)!==null&&i!==void 0&&(o=i.Common)!==null&&o!==void 0&&o.QuickInfo?Fe(he(e.annotations.Common.QuickInfo.valueOf())):undefined}else if(ze(e)){var a,l,r,s;return(a=e.Value)!==null&&a!==void 0&&(l=a.$target)!==null&&l!==void 0&&(r=l.annotations)!==null&&r!==void 0&&(s=r.Common)!==null&&s!==void 0&&s.QuickInfo?Fe(he(e.Value.$target.annotations.Common.QuickInfo.valueOf())):undefined}else if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){var d,u,v,c,p;const t=(d=e.Target)===null||d===void 0?void 0:d.$target;return t!==null&&t!==void 0&&(u=t.Value)!==null&&u!==void 0&&(v=u.$target)!==null&&v!==void 0&&(c=v.annotations)!==null&&c!==void 0&&(p=c.Common)!==null&&p!==void 0&&p.QuickInfo?Fe(he(t.Value.$target.annotations.Common.QuickInfo.valueOf())):undefined}else{return undefined}};function Ot(e,t){return Te([fe(`semanticKeyHasDraftIndicator`,"internal"),fe(`filteredMessages`,"internal"),e,t],l.getErrorStatusTextVisibilityFormatter)}F.getRowStatusVisibility=Ot;const xt=function(e,t,n,i,o,a){const l=[];const r={};const s=new Y(o,i);Object.keys(e).forEach(o=>{const d=e[o],u=i.getAbsoluteAnnotationPath(o),v=t.find(e=>e.name===o);if(v===undefined){l.push(Pt(d,u,o,true,false,n,s,i,a))}else if(v.annotationPath!==u||v.propertyInfos){const e=`Property::${o}`;if(!t.some(t=>t.name===e)){const t=Pt(d,u,o,false,false,n,s,i,a);t.isPartOfLineItem=v.isPartOfLineItem;l.push(t);r[o]=e}else if(t.some(t=>t.name===e)&&t.some(e=>{var t;return(t=e.propertyInfos)===null||t===void 0?void 0:t.includes(o)})){r[o]=e}}});t.forEach(e=>{var t,n;e.propertyInfos=(t=e.propertyInfos)===null||t===void 0?void 0:t.map(e=>r[e]??e);e.additionalPropertyInfos=(n=e.additionalPropertyInfos)===null||n===void 0?void 0:n.map(e=>r[e]??e)});return l};const Mt=function(e){var t,n,i;if(ze(e)){var o;return(o=e.Value)===null||o===void 0?void 0:o.path}else if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&(t=e.Target)!==null&&t!==void 0&&(n=t.$target)!==null&&n!==void 0&&(i=n.Value)!==null&&i!==void 0&&i.path){var a,l;return(a=e.Target)===null||a===void 0?void 0:(l=a.$target)===null||l===void 0?void 0:l.Value.path}else{return Se.generateKeyFromDataField(e)}};const Ut=function(e,t,n){const i=`Property_Technical::${e}`;const o=t.find(e=>e.key===i);const a=!o&&t.find(t=>t.name===e&&!t.propertyInfos);if(a){const o={key:i,type:Ye.Annotation,label:a.label,annotationPath:a.annotationPath,availability:W.Hidden,name:i,relativePath:a.relativePath,sortable:false,isGroupable:false,isKey:false,exportSettings:null,caseSensitive:false,aggregatable:false,extension:{technicallyGroupable:true,technicallyAggregatable:true}};t.push(o);n[e]=o.name}};const $t=function(e,t,n){var i;const o=(i=n.getManifestControlConfiguration(t))===null||i===void 0?void 0:i.columns;const a=o&&Object.keys(o);return a&&!!a.find(function(t){return t===e&&o[t].showDataFieldsLabel})};const Nt=function(e){var t,n;let i="";switch(e.$Type){case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":i=e===null||e===void 0?void 0:(t=e.Value)===null||t===void 0?void 0:t.path;break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":i=e===null||e===void 0?void 0:(n=e.Target)===null||n===void 0?void 0:n.value;break;case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldForActionGroup":case"com.sap.vocabularies.UI.v1.DataFieldWithActionGroup":i=Se.generateKeyFromDataField(e);break}return i};const wt=function(e,t,n){const i=t?e.lastIndexOf("/"):e.indexOf("/");if(i===-1){return e}return n?e.substring(i+1,e.length):e.substring(0,i)};const Vt=function(e,t){if(ze(e)&&Z(e.Value)){const n=ue(t.getDataModelObjectPath(),e.Value.path);return J(n)}else{return false}};const kt=function(e,t,n){return n.indexOf(t)===-1&&(e.$Type==="com.sap.vocabularies.UI.v1.DataField"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithAction")};const Rt=function(e){const t=Lt(e);return Array.isArray(t)?t.indexOf("tolower")===-1:true};F.isFilteringCaseSensitive=Rt;function Lt(e){var t,n,i,o,a;if(d.isSingleton(e.getEntitySet())){return undefined}const l=(t=e.getEntitySet())===null||t===void 0?void 0:(n=t.annotations)===null||n===void 0?void 0:n.Capabilities;return(l===null||l===void 0?void 0:l.FilterFunctions)||((i=e.getEntityContainer())===null||i===void 0?void 0:(o=i.annotations)===null||o===void 0?void 0:(a=o.Capabilities)===null||a===void 0?void 0:a.FilterFunctions)}function jt(e){return e===undefined?undefined:{textLinesEdit:4,...e}}function Ht(e,t){const n=[];let i=false;for(let o=0;o<e.length;o++){n.push(e[o].value);if(e[o].value===t){i=true}}return{values:n,semanticKeyFound:i}}function Bt(e,t){let n=false;let i;if(e&&e.length>=1&&t&&t.length>=1){for(let o=0;o<e.length;o++){if([e[o]].some(e=>t.indexOf(e)>=0)){n=true;i=e[o];break}}}return{semanticKeyHasPropertyInFieldGroup:n,fieldGroupPropertyPath:i}}function zt(e,t){var n,i;const o=[];let a={semanticKeyHasPropertyInFieldGroup:false,fieldGroupPropertyPath:undefined};if(e&&e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&((n=e.Target)===null||n===void 0?void 0:(i=n.$target)===null||i===void 0?void 0:i.$Type)==="com.sap.vocabularies.UI.v1.FieldGroupType"){var l;(l=e.Target.$target.Data)===null||l===void 0?void 0:l.forEach(e=>{if((e.$Type==="com.sap.vocabularies.UI.v1.DataField"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl")&&e.Value){o.push(e.Value.path)}a=Bt(t,o)})}return{semanticKeyHasPropertyInFieldGroup:a.semanticKeyHasPropertyInFieldGroup,propertyPath:a.fieldGroupPropertyPath}}function Kt(e,t,n,i){if(!t){return{}}const o=Ht(t,e);const a=zt(i,o.values);if(o.semanticKeyFound){const t={hasDraftIndicator:true,semantickeys:o.values,objectStatusTextVisibility:Fe(Ot(e,false))};if(n&&a.semanticKeyHasPropertyInFieldGroup){t["objectStatusTextVisibility"]=Fe(Ot(e,true));t["fieldGroupDraftIndicatorPropertyPath"]=a.propertyPath}return t}else if(!a.semanticKeyHasPropertyInFieldGroup){return{}}else{return{fieldGroupDraftIndicatorPropertyPath:a.propertyPath,fieldGroupName:e,objectStatusTextVisibility:Fe(Ot(e,true))}}}function Gt(e){var t,n;const i=e===null||e===void 0?void 0:(t=e.annotations)===null||t===void 0?void 0:(n=t.UI)===null||n===void 0?void 0:n.Importance;if(i&&i.includes("UI.ImportanceType/High")){return 3}if(i&&i.includes("UI.ImportanceType/Medium")){return 2}if(i&&i.includes("UI.ImportanceType/Low")){return 1}return 0}function Wt(e){var t,n;const i=e===null||e===void 0?void 0:(t=e.annotations)===null||t===void 0?void 0:(n=t.UI)===null||n===void 0?void 0:n.Importance;return i?i.split("/")[1]:z.None}function qt(e){if(e&&e.length>0){let t=-1;let n=-1;let i;for(const o of e){n=Gt(o);if(n>t){t=n;i=o}}return Wt(i)}return z.None}function Qt(e,t){var n;let i,o;if(t&&t.length>0){o=t.map(function(e){return e.value})}if(!e){return undefined}if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){const t=e.Target["$target"]["Data"],n=t&&t.some(function(e){var t,n;return(e===null||e===void 0?void 0:(t=e.Value)===null||t===void 0?void 0:t.path)&&e.$Type!=="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&o&&o.includes(e===null||e===void 0?void 0:(n=e.Value)===null||n===void 0?void 0:n.path)});if(n){return z.High}else{var a,l;if(e!==null&&e!==void 0&&(a=e.annotations)!==null&&a!==void 0&&(l=a.UI)!==null&&l!==void 0&&l.Importance){return Wt(e)}i=t&&t.filter(function(e){var t,n;return e===null||e===void 0?void 0:(t=e.annotations)===null||t===void 0?void 0:(n=t.UI)===null||n===void 0?void 0:n.Importance});return qt(i)}}return e.Value&&e!==null&&e!==void 0&&(n=e.Value)!==null&&n!==void 0&&n.path&&o&&o.includes(e.Value.path)?z.High:Wt(e)}F.getImportance=Qt;const _t=function(e,t,n){var i;const o=n.getAnnotationEntityType(e),a=[],l={},r=oe(n.getEntitySet()),s=n.getManifestControlConfiguration(t),d=(s===null||s===void 0?void 0:(i=s.tableSettings)===null||i===void 0?void 0:i.type)||"ResponsiveTable";const u=[];const v=n.getAnnotationsByTerm("Common","com.sap.vocabularies.Common.v1.SemanticKey",[n.getEntityType()])[0];if(e){const i=n.getConverterContextFor(de(n.getDataModelObjectPath()));e.forEach(e=>{var o,s,c,p,f,g,m,y,b;if(!Ft(e)){return}let h=null;const T=ze(e)&&(o=e.Value)!==null&&o!==void 0&&(s=o.$target)!==null&&s!==void 0&&s.fullyQualifiedName?We(n,e):undefined;const I=Nt(e);const P=Qe(e,n,d);const D=Object.keys(P.properties);const F=Object.keys(P.additionalProperties);const A=wt(I,true,false);const C=A!=I;const S=St(e,C);const E=Mt(e);const O=A.indexOf(`@${"com.sap.vocabularies.UI.v1.FieldGroup"}`)>-1;const x=O?$t(E,t,n):false;const M=qe(e);const U=M==="Edm.Date"?"YYYY-MM-DD":undefined;const $=jt(Kt(E,v,O,e));let N;if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&((c=e.Target)===null||c===void 0?void 0:(p=c.$target)===null||p===void 0?void 0:p.$Type)==="com.sap.vocabularies.UI.v1.FieldGroupType"){N=Ct(e,$)}if(Dt(e)){h={template:P.exportSettingsTemplate,wrap:P.exportSettingsWrapping,type:M?dn(M,D.length>1):undefined,inputFormat:U,delimiter:M==="Edm.Int64"};if(P.exportUnitName){h.unitProperty=P.exportUnitName;h.type="Currency"}else if(P.exportUnitString){h.unit=P.exportUnitString}if(P.exportTimezoneName){h.timezoneProperty=P.exportTimezoneName}else if(P.exportTimezoneString){h.timezone=P.exportTimezoneString}}const w=M&&Fn(e,M);const V={className:M,formatOptions:{...$,...w===null||w===void 0?void 0:w.formatOptions},constraints:w===null||w===void 0?void 0:w.constraints};const k={};if(!M||!V){k.widthCalculation=null}const R=Vt(e,i);const L=!R&&kt(e,I,r);const j={key:Se.generateKeyFromDataField(e),type:Ye.Annotation,label:S,groupLabel:C?St(e):undefined,group:C?A:undefined,FieldGroupHiddenExpressions:N,annotationPath:n.getEntitySetBasedAnnotationPath(e.fullyQualifiedName),semanticObjectPath:T,availability:_(e)?W.Hidden:W.Default,name:E,showDataFieldsLabel:x,relativePath:I,sortable:L,propertyInfos:D.length?D:undefined,additionalPropertyInfos:F.length>0?F:undefined,exportSettings:h,width:((f=e.annotations)===null||f===void 0?void 0:(g=f.HTML5)===null||g===void 0?void 0:(m=g.CssDefaults)===null||m===void 0?void 0:(y=m.width)===null||y===void 0?void 0:y.valueOf())||undefined,importance:Qt(e,v),isNavigable:true,formatOptions:$,caseSensitive:Rt(n),typeConfig:V,visualSettings:k,timezoneText:(b=h)===null||b===void 0?void 0:b.timezone,isPartOfLineItem:true};const H=Et(e);if(H){j.tooltip=H}if(P.textOnlyPropertiesFromTextAnnotation.length>0){u.push(...P.textOnlyPropertiesFromTextAnnotation)}if(P.exportDataPointTargetValue&&j.exportSettings){j.exportDataPointTargetValue=P.exportDataPointTargetValue;j.exportSettings.type="String"}a.push(j);D.forEach(e=>{l[e]=P.properties[e];if(R){r.push(e)}});F.forEach(e=>{l[e]=P.additionalProperties[e]})})}return It(l,o,a,r,n,d,u)};const Yt=function(e,t,n,i){let o;if(e){o=e.map(function(e){const o=t.find(function(t){return t.relativePath===e&&t.propertyInfos===undefined});if(o){return o.name}else{const o=xt({[e]:i.resolvePath(e)},t,[],n,i,[]);t.push(o[0]);return o[0].name}})}return o};const Jt=function(e){return e.map(t=>`{${e.indexOf(t)}}`).join(`${"\n"}`)};const Xt=function(e,t,n,i,o){const a={};function l(e,n){return t.some(e=>e.key===n)}function r(e){return e.type===Ye.Slot}function s(e){return e.type===undefined&&!!e.template}function d(e,t){const i=oe(n.getEntitySet());e.forEach(e=>{t.forEach(t=>{if(t.name===e){t.sortable=i.indexOf(e.replace("Property::",""))===-1;t.isGroupable=t.sortable}})})}for(const c in e){var u;const p=e[c];Se.validateKey(c);const f={key:c,width:p.width||undefined,position:{anchor:(u=p.position)===null||u===void 0?void 0:u.anchor,placement:p.position===undefined?Ue.After:p.position.placement},caseSensitive:Rt(n)};if(l(p,c)){const e={...f,importance:p===null||p===void 0?void 0:p.importance,horizontalAlign:p===null||p===void 0?void 0:p.horizontalAlign,availability:p===null||p===void 0?void 0:p.availability,type:Ye.Annotation,isNavigable:l(p,c)?undefined:Re(p,o,true),settings:p.settings,formatOptions:jt(p.formatOptions)};a[c]=e}else{const e=Yt(p.properties,t,n,i);const o={...f,header:p.header,importance:(p===null||p===void 0?void 0:p.importance)||z.None,horizontalAlign:(p===null||p===void 0?void 0:p.horizontalAlign)||K.Begin,availability:(p===null||p===void 0?void 0:p.availability)||W.Default,template:p.template,propertyInfos:e,exportSettings:e?{template:Jt(e),wrap:!!(e.length>1)}:null,id:`CustomColumn::${c}`,name:`CustomColumn::${c}`,formatOptions:{textLinesEdit:4},isGroupable:false,isNavigable:false,sortable:false,visualSettings:{widthCalculation:null},properties:p.properties};if(e){d(e,t)}if(r(p)){const e={...o,type:Ye.Slot};a[c]=e}else if(s(p)){const e={...o,type:Ye.Default};a[c]=e}else{var v;const e=`The annotation column '${c}' referenced in the manifest is not found`;n.getDiagnostics().addIssue(Me.Manifest,Oe.Low,e,xe,xe===null||xe===void 0?void 0:(v=xe.AnnotationColumns)===null||v===void 0?void 0:v.InvalidKey)}}}return a};function Zt(e,t,n){var i;const o=t.getManifestWrapper();const a=t.getManifestControlConfiguration(e);const l=o.getVariantManagement();const r=[];const s=n.type==="AnalyticalTable";const d=n.type==="ResponsiveTable";if((a===null||a===void 0?void 0:(i=a.tableSettings)===null||i===void 0?void 0:i.personalization)!==undefined){const e=a.tableSettings.personalization;if(e===true){switch(n.type){case"AnalyticalTable":return"Sort,Column,Filter,Group,Aggregate";case"ResponsiveTable":return"Sort,Column,Filter,Group";default:return"Sort,Column,Filter"}}else if(typeof e==="object"){if(e.sort){r.push("Sort")}if(e.column){r.push("Column")}if(e.filter){r.push("Filter")}if(e.group&&(s||d)){r.push("Group")}if(e.aggregate&&s){r.push("Aggregate")}return r.length>0?r.join(","):undefined}}else{r.push("Sort");r.push("Column");if(t.getTemplateType()===H.ListReport){if(l===j.Control||en(o,t)){r.push("Filter")}}else{r.push("Filter")}if(s){r.push("Group");r.push("Aggregate")}if(d){r.push("Group")}return r.join(",")}return undefined}F.getP13nMode=Zt;function en(e,t){return e.isFilterBarHidden()&&!t.getManifestWrapper().hasMultipleVisualizations()&&t.getTemplateType()!==H.AnalyticalListPage}function tn(e,t,n){const i=oe(e.getEntitySet());let o;if(t!==null&&t!==void 0&&t.SortOrder){const e=[];const a={sorters:e};t.SortOrder.forEach(e=>{var t;const o=e.Property;if(o&&i.indexOf((t=o.$target)===null||t===void 0?void 0:t.name)===-1){const t=on([o],n)[0];if(t){a.sorters.push({name:t,descending:!!e.Descending})}}});o=a.sorters.length?JSON.stringify(a):undefined}return o}function nn(e){var t;if(!e){return undefined}const n=(t=e.InitialExpansionLevel)===null||t===void 0?void 0:t.valueOf();return typeof n==="number"?n:undefined}function on(e,t){const n=[];let i,o;e.forEach(e=>{if(e!==null&&e!==void 0&&e.value){i=t.find(t=>{o=t;return!o.propertyInfos&&o.relativePath===(e===null||e===void 0?void 0:e.value)});if(i){n.push(i.name)}}});return n}function an(e,t,n){let i;if(e!==null&&e!==void 0&&e.GroupBy){let o=e.GroupBy;if(n==="ResponsiveTable"){o=o.slice(0,1)}const a=on(o,t).map(e=>({name:e}));i=a.length?JSON.stringify({groupLevels:a}):undefined}return i}function ln(e){const t={};e.columns.forEach(n=>{var i;n=n;const o=Object.keys(e.aggregates).find(e=>e===n.name);if(o){const t=e.aggregates[o];n.aggregatable=true;n.extension={customAggregate:t.defaultAggregate??{}}}if((i=n.additionalPropertyInfos)!==null&&i!==void 0&&i.length){n.additionalPropertyInfos.forEach(n=>{Ut(n,e.columns,t)})}});e.columns.forEach(e=>{e=e;if(e.additionalPropertyInfos){var n;e.additionalPropertyInfos=e.additionalPropertyInfos.map(e=>t[e]??e);e.propertyInfos=(n=e.propertyInfos)===null||n===void 0?void 0:n.concat(e.additionalPropertyInfos)}})}function rn(e,t){let n;if(e!==null&&e!==void 0&&e.Total){const i=e.Total;const o={};on(i,t).forEach(e=>{o[e]={}});n=JSON.stringify(o)}return n}function sn(e,t,n,i,o,a,l){var r,s,d;const{navigationPropertyPath:u}=un(t);const v=(r=n.getDataModelObjectPath().targetEntityType.annotations)===null||r===void 0?void 0:(s=r.UI)===null||s===void 0?void 0:(d=s.HeaderInfo)===null||d===void 0?void 0:d.TypeNamePlural;const c=n.getDataModelObjectPath().targetEntitySet;const p=n.getManifestWrapper();const f=u.length===0,g=Zt(t,n,i),m=u?Q(t):Q(n.getContextPath(),"LineItem");const y=gt(n);const b=tt(n,u);const h=p.getNavigationConfiguration(b);const T=ht(e,i,n,h,t);const I=k(n,T.mode,i,l);const P=N(n,I);const D=V(n,I);const F=U(n,I);const M=$(I,C(n),Fe(D)==="false");const R=mt(e,t,n,f,y,P,F);let L=u?10:30;if(a!==null&&a!==void 0&&a.MaxItems){L=a.MaxItems.valueOf()}const B=p.getVariantManagement();const z=re(n.getDataModelObjectPath());const K={create:x(n,I),delete:O(n,I),paste:S(n,I,M),massEdit:E(n,I),creationRow:w(n,I)};return{id:m,entityName:c?c.name:"",collection:de(n.getDataModelObjectPath()),navigationPath:u,row:Tt(e,n,h,b,i.type),p13nMode:g,standardActions:{actions:K,isInsertUpdateTemplated:M,updatablePropertyPath:rt(n)},displayMode:A(n,l),create:T,selectionMode:R,autoBindOnInit:en(p,n)||n.getTemplateType()!==H.ListReport&&n.getTemplateType()!==H.AnalyticalListPage&&!(l&&p.hasMultipleVisualizations(l)),variantManagement:B==="Control"&&!g?j.None:B,threshold:L,sortConditions:tn(n,a,o),title:v,searchable:i.type!=="AnalyticalTable"&&!(ye(z)&&z.value===false),initialExpansionLevel:nn(a)}}F.getTableAnnotationConfiguration=sn;function dn(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;let n="String";if(t){if(e==="Edm.DateTimeOffset"){n="DateTime"}return n}else{switch(e){case"Edm.Decimal":case"Edm.Int32":case"Edm.Int64":case"Edm.Double":case"Edm.Byte":n="Number";break;case"Edm.DateOfTime":case"Edm.Date":n="Date";break;case"Edm.DateTimeOffset":n="DateTime";break;case"Edm.TimeOfDay":n="Time";break;case"Edm.Boolean":n="Boolean";break;default:n="String"}}return n}function un(e){let[t,n]=e.split("@");if(t.lastIndexOf("/")===t.length-1){t=t.substr(0,t.length-1)}return{navigationPropertyPath:t,annotationPath:n}}F.splitPath=un;function vn(e,t){const n=t.getEntityTypeAnnotation(e);const i=n.annotation;if(i){var o,a;const e=[];(o=i.SelectOptions)===null||o===void 0?void 0:o.forEach(t=>{const n=t.PropertyName;const i=n.value;if(e.indexOf(i)===-1){e.push(i)}});return{text:i===null||i===void 0?void 0:(a=i.Text)===null||a===void 0?void 0:a.toString(),propertyNames:e}}return undefined}F.getSelectionVariantConfiguration=vn;function cn(e,t,n){let i=e.enableFullScreen??n;if(!n&&i&&t.getTemplateType()===H.ListReport){i=false;t.getDiagnostics().addIssue(Me.Manifest,Oe.Low,Ee.FULLSCREENMODE_NOT_ON_LISTREPORT)}return i}function pn(e,t,n){let i;if(t!=="ResponsiveTable"){return undefined}switch(n.getTemplateType()){case H.ListReport:case H.AnalyticalListPage:i=!e.selectAll?"ClearAll":"Default";break;case H.ObjectPage:i=e.selectAll===false?"ClearAll":"Default";if(n.getManifestWrapper().useIconTabBar()){i=!e.selectAll?"ClearAll":"Default"}break;default:}return i}function fn(e,t,n){let i=(e===null||e===void 0?void 0:e.type)||"ResponsiveTable";if((i==="AnalyticalTable"||i==="TreeTable")&&!n.getManifestWrapper().isDesktop()){i="ResponsiveTable"}return i}function gn(e,t,n){if(e==="GridTable"){if(n){return{rowCountMode:"Auto",rowCount:"3"}}else{return{rowCountMode:t.rowCountMode?t.rowCountMode:"Fixed",rowCount:t.rowCount?t.rowCount:5}}}else{return{}}}function mn(e,t){return t.condensedTableLayout!==undefined&&e!=="ResponsiveTable"?t.condensedTableLayout:false}function yn(e){return e.selectAll===true||e.selectionLimit===0?0:e.selectionLimit||200}function bn(e){var t,n;return(t=e.creationMode)!==null&&t!==void 0&&t.inlineCreationRowCount?(n=e.creationMode)===null||n===void 0?void 0:n.inlineCreationRowCount:2}function hn(e,t,n,i,o){var a;if(n){t.push({annotationPath:i.annotationPath})}return{quickFilters:{enabled:o.getTemplateType()!==H.ListReport,showCounts:e===null||e===void 0?void 0:(a=e.quickVariantSelection)===null||a===void 0?void 0:a.showCounts,paths:t}}}function Tn(e,t,n){return e.enableExport!==undefined?e.enableExport:t.getTemplateType()!=="ObjectPage"||n}function In(e,t,n){var i,o,a;if(!t){return{}}const l=[];const r=n.getAnnotationEntityType(t);let s;let d;e===null||e===void 0?void 0:(i=e.quickVariantSelection)===null||i===void 0?void 0:(o=i.paths)===null||o===void 0?void 0:o.forEach(t=>{s=r.resolvePath(t.annotationPath);d=hn(e,l,s,t,n)});let u=false;u=!!((a=e.quickVariantSelection)!==null&&a!==void 0&&a.hideTableTitle);return{filters:d,headerVisible:!(s&&u)}}function Pn(e,t){const n=ue(t.getDataModelObjectPath(),e).navigationProperties;if((n===null||n===void 0?void 0:n.length)>0){const e=[];n.forEach(t=>{e.push(St(t)||t.name)});return e}}function Dn(e,t,n){var i,o,a,l,r,s,d,u;let v=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;const c=n.getManifestWrapper();const p=n.getManifestControlConfiguration(t);const f=p&&p.tableSettings||{};const g=((i=f.creationMode)===null||i===void 0?void 0:i.name)||G.NewPage;const m=!c.isPhone();const y=f.enablePaste!==undefined?f.enablePaste:n.getTemplateType()==="ObjectPage";const b=n.getTemplateType();const h=b===H.ListReport?"API.dataStateIndicatorFilter":undefined;const T=v&&c.isCondensedLayoutCompliant();const I=In(f,e,n);const P=(o=f.creationMode)===null||o===void 0?void 0:o.customValidationFunction;const D=n.getEntityType();const F=new Y(D,n);const A=fn(f,F,n);const C=gn(A,f,b===H.ListReport);const S=mn(A,f);const E={createAtEnd:((a=f.creationMode)===null||a===void 0?void 0:a.createAtEnd)!==undefined?(l=f.creationMode)===null||l===void 0?void 0:l.createAtEnd:g!==G.Inline,creationMode:g,customValidationFunction:P,dataStateIndicatorFilter:h,disableAddRowButtonForEmptyData:!P?!!((r=f.creationMode)!==null&&r!==void 0&&r.disableAddRowButtonForEmptyData):false,enableAutoColumnWidth:m,enableExport:Tn(f,n,y),enableFullScreen:cn(f,n,c.isPhone()),enableMassEdit:f===null||f===void 0?void 0:f.enableMassEdit,enablePaste:y,headerVisible:true,multiSelectMode:pn(f,A,n),selectionLimit:yn(f),inlineCreationRowCount:bn(f),inlineCreationRowsHiddenInEditMode:(f===null||f===void 0?void 0:(s=f.creationMode)===null||s===void 0?void 0:s.inlineCreationRowsHiddenInEditMode)??false,showRowCount:!(f!==null&&f!==void 0&&(d=f.quickVariantSelection)!==null&&d!==void 0&&d.showCounts)&&!((u=c.getViewConfiguration())!==null&&u!==void 0&&u.showCounts),type:A,useCondensedTableLayout:S&&T,isCompactType:c.isCompactType()};const O={...E,...C,...I};if(A==="TreeTable"){O.hierarchyQualifier=f.hierarchyQualifier}return O}F.getTableManifestConfiguration=Dn;function Fn(e,t){var n,i,o,a,l,r;let s=Pe[e===null||e===void 0?void 0:e.type]||(t?Pe[t]:undefined);if(!s&&e!==null&&e!==void 0&&e.targetType&&((n=e.targetType)===null||n===void 0?void 0:n._type)==="TypeDefinition"){s=Pe[e.targetType.underlyingType]}const d={type:(i=s)===null||i===void 0?void 0:i.type,constraints:{},formatOptions:{}};if(X(e)){var u,v,c,p,f,g,m,y,b,h,T,I,P,D,F,A,C;d.constraints={scale:(u=s.constraints)!==null&&u!==void 0&&u.$Scale?e.scale:undefined,precision:(v=s.constraints)!==null&&v!==void 0&&v.$Precision?e.precision:undefined,maxLength:(c=s.constraints)!==null&&c!==void 0&&c.$MaxLength?e.maxLength:undefined,nullable:(p=s.constraints)!==null&&p!==void 0&&p.$Nullable?e.nullable:undefined,minimum:(f=s.constraints)!==null&&f!==void 0&&f["@Org.OData.Validation.V1.Minimum/$Decimal"]&&!isNaN((g=e.annotations)===null||g===void 0?void 0:(m=g.Validation)===null||m===void 0?void 0:m.Minimum)?`${(y=e.annotations)===null||y===void 0?void 0:(b=y.Validation)===null||b===void 0?void 0:b.Minimum}`:undefined,maximum:(h=s.constraints)!==null&&h!==void 0&&h["@Org.OData.Validation.V1.Maximum/$Decimal"]&&!isNaN((T=e.annotations)===null||T===void 0?void 0:(I=T.Validation)===null||I===void 0?void 0:I.Maximum)?`${(P=e.annotations)===null||P===void 0?void 0:(D=P.Validation)===null||D===void 0?void 0:D.Maximum}`:undefined,isDigitSequence:d.type==="sap.ui.model.odata.type.String"&&(F=s.constraints)!==null&&F!==void 0&&F[`@${"com.sap.vocabularies.Common.v1.IsDigitSequence"}`]&&(A=e.annotations)!==null&&A!==void 0&&(C=A.Common)!==null&&C!==void 0&&C.IsDigitSequence?true:undefined}}d.formatOptions={parseAsString:(d===null||d===void 0?void 0:(o=d.type)===null||o===void 0?void 0:o.indexOf("sap.ui.model.odata.type.Int"))===0||(d===null||d===void 0?void 0:(a=d.type)===null||a===void 0?void 0:a.indexOf("sap.ui.model.odata.type.Double"))===0?false:undefined,emptyString:(d===null||d===void 0?void 0:(l=d.type)===null||l===void 0?void 0:l.indexOf("sap.ui.model.odata.type.Int"))===0||(d===null||d===void 0?void 0:(r=d.type)===null||r===void 0?void 0:r.indexOf("sap.ui.model.odata.type.Double"))===0?"":undefined,parseKeepsEmptyString:d.type==="sap.ui.model.odata.type.String"?true:undefined};return d}F.getTypeConfig=Fn;return{getTableActions:Je,getTableColumns:Xe,getColumnsFromEntityType:It,updateLinkedProperties:nt,createTableVisualization:ot,createDefaultTableVisualization:at,getCapabilityRestriction:gt,getSelectionMode:mt,getRowStatusVisibility:Ot,getImportance:Qt,getP13nMode:Zt,getTableAnnotationConfiguration:sn,isFilteringCaseSensitive:Rt,splitPath:un,getSelectionVariantConfiguration:vn,getTableManifestConfiguration:Dn,getTypeConfig:Fn,updateTableVisualizationForType:et}},false);
//# sourceMappingURL=Table.js.map