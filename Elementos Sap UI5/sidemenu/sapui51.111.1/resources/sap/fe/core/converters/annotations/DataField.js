/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/templating/DisplayModeFormatter","sap/fe/core/templating/PropertyHelper","../helpers/DataFieldHelper"],function(e,t,a){"use strict";var i={};var o=a.isReferencePropertyStaticallyHidden;var l=t.isProperty;var n=t.isPathExpression;var r=t.getAssociatedUnitProperty;var d=t.getAssociatedTimezoneProperty;var v=t.getAssociatedCurrencyProperty;var s=e.getDisplayMode;function u(e){return e.hasOwnProperty("Action")}i.isDataFieldForActionAbstract=u;function c(e){return e.hasOwnProperty("Value")}i.isDataFieldTypes=c;function p(e){let t;if(l(e)){var a,i,o,r,d,v,s,u,c,p;t=((a=e.annotations)===null||a===void 0?void 0:(i=a.UI)===null||i===void 0?void 0:(o=i.DataFieldDefault)===null||o===void 0?void 0:(r=o.Target)===null||r===void 0?void 0:(d=r.$target)===null||d===void 0?void 0:d.TargetValue)??((v=e.annotations)===null||v===void 0?void 0:(s=v.UI)===null||s===void 0?void 0:(u=s.DataFieldDefault)===null||u===void 0?void 0:(c=u.Target)===null||c===void 0?void 0:(p=c.$target)===null||p===void 0?void 0:p.MaximumValue)}else{t=e.TargetValue??e.MaximumValue}if(typeof t==="number"){return t.toString()}return n(t)?t:"100"}i.getTargetValueOnDataPoint=p;const g=function(e){var t,a,i,o,l;return((t=e.annotations)===null||t===void 0?void 0:(a=t.UI)===null||a===void 0?void 0:(i=a.DataFieldDefault)===null||i===void 0?void 0:(o=i.Target)===null||o===void 0?void 0:(l=o.$target)===null||l===void 0?void 0:l.$Type)==="com.sap.vocabularies.UI.v1.DataPointType"};i.isDataPointFromDataFieldDefault=g;function f(e,t){if(typeof t==="object"){var a;if(c(t)&&(a=t.Value)!==null&&a!==void 0&&a.$target){var i,o,n;const a=(i=t.Value)===null||i===void 0?void 0:i.$target;if((a===null||a===void 0?void 0:(o=a.annotations)===null||o===void 0?void 0:(n=o.Common)===null||n===void 0?void 0:n.SemanticObject)!==undefined){return e.getEntitySetBasedAnnotationPath(a===null||a===void 0?void 0:a.fullyQualifiedName)}}else if(l(t)){var r,d;if((t===null||t===void 0?void 0:(r=t.annotations)===null||r===void 0?void 0:(d=r.Common)===null||d===void 0?void 0:d.SemanticObject)!==undefined){return e.getEntitySetBasedAnnotationPath(t===null||t===void 0?void 0:t.fullyQualifiedName)}}}return undefined}i.getSemanticObjectPath=f;function $(e){return e.indexOf("/")>-1?e.substring(0,e.lastIndexOf("/")+1):""}function m(e,t,a,i){if(a==="AnalyticalTable"){var o,n;const a=(o=e.annotations)===null||o===void 0?void 0:(n=o.UI)===null||n===void 0?void 0:n.Hidden;if(a!==null&&a!==void 0&&a.path&&l(a.$target)){const e=t+a.path;i.additionalProperties[e]=a.$target}}return i}function T(e,t,a,i,o){let n=arguments.length>5&&arguments[5]!==undefined?arguments[5]:{properties:{},additionalProperties:{},textOnlyPropertiesFromTextAnnotation:[]};let u=arguments.length>6&&arguments[6]!==undefined?arguments[6]:false;let c=arguments.length>7&&arguments[7]!==undefined?arguments[7]:false;function g(e,t){if(!n.properties.hasOwnProperty(e)){n.properties[e]=t}return Object.keys(n.properties).indexOf(e)}function f(e){n.exportSettingsTemplate=n.exportSettingsTemplate?`${n.exportSettingsTemplate}${e}`:`${e}`}if(e&&t){var T,y;let H;let R;let Q;let G;let q;if(c){H=g(e,t);f(`{${H}}`);return n}const J=$(e);const K=(T=t.annotations)===null||T===void 0?void 0:(y=T.Common)===null||y===void 0?void 0:y.Text;if(n.exportSettingsTemplate){f("\n");n.exportSettingsWrapping=true}if(K!==null&&K!==void 0&&K.path&&K!==null&&K!==void 0&&K.$target){const i=a.getDataModelObjectPath();const o=J+K.path;const l=s(t,i);let r;switch(l){case"Value":H=g(e,t);f(`{${H}}`);break;case"Description":r=g(o,K.$target);f(`{${r}}`);n.textOnlyPropertiesFromTextAnnotation.push(o);break;case"ValueDescription":H=g(e,t);r=g(o,K.$target);f(`{${H}} ({${r}})`);break;case"DescriptionValue":H=g(e,t);r=g(o,K.$target);f(`{${r}} ({${H}})`);break}}else{var b,D,h,F,I,U,P,x,V,k,A,O,S,C,N;const a=v(t)||r(t);const o=(t===null||t===void 0?void 0:(b=t.annotations)===null||b===void 0?void 0:(D=b.Measures)===null||D===void 0?void 0:D.ISOCurrency)||(t===null||t===void 0?void 0:(h=t.annotations)===null||h===void 0?void 0:(F=h.Measures)===null||F===void 0?void 0:F.Unit);const s=d(t);const c=t===null||t===void 0?void 0:(I=t.annotations)===null||I===void 0?void 0:(U=I.Common)===null||U===void 0?void 0:U.Timezone;if(a&&o!==null&&o!==void 0&&o.$target){H=g(e,t);Q=g(J+o.path,o.$target);if(u){f(`{${H}}  {${Q}}`)}else{n.exportUnitName=J+o.path}}else if(s&&c!==null&&c!==void 0&&c.$target){H=g(e,t);G=g(J+c.path,c.$target);if(u){f(`{${H}}  {${G}}`)}else{n.exportTimezoneName=J+c.path}}else if(((P=t.Target)===null||P===void 0?void 0:(x=P.$target)===null||x===void 0?void 0:x.$Type)==="com.sap.vocabularies.UI.v1.DataPointType"&&!((V=t.Target)!==null&&V!==void 0&&(k=V.$target)!==null&&k!==void 0&&k.ValueFormat)||((A=t.annotations)===null||A===void 0?void 0:(O=A.UI)===null||O===void 0?void 0:(S=O.DataFieldDefault)===null||S===void 0?void 0:(C=S.Target)===null||C===void 0?void 0:(N=C.$target)===null||N===void 0?void 0:N.$Type)==="com.sap.vocabularies.UI.v1.DataPointType"){var W,j,w,B,M;const a=(W=t.Target)===null||W===void 0?void 0:(j=W.$target)===null||j===void 0?void 0:j.Value.$target;const i=(w=t.Target)===null||w===void 0?void 0:w.$target;const o=(B=t.annotations)===null||B===void 0?void 0:(M=B.UI)===null||M===void 0?void 0:M.DataFieldDefault;H=g(J?J+e:e,o?t:a);R=p(o?t:i);if(l(R.$target)){R=R;q=g(J?J+R.$target.name:R.$target.name,R.$target);f(`{${H}}/{${q}}`)}else{n.exportDataPointTargetValue=R;f(`{${H}}/${R}`)}}else if(t.$Type==="com.sap.vocabularies.Communication.v1.ContactType"){var E,z;const e=(E=t.fn)===null||E===void 0?void 0:E.$target;const a=(z=t.fn)===null||z===void 0?void 0:z.path;H=g(J?J+a:a,e);f(`{${H}}`)}else if(!i){H=g(e,t);f(`{${H}}`);if(o){n.exportUnitString=`${o}`}else if(c){n.exportTimezoneString=`${c}`}}}n=m(t,J,o,n);if(Object.keys(n.additionalProperties).length>0&&Object.keys(n.properties).length===0){H=g(e,t);f(`{${H}}`)}}return n}i.collectRelatedProperties=T;function y(e,t,a){var i,l,n;let r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{properties:{},additionalProperties:{},textOnlyPropertiesFromTextAnnotation:[]};let d=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;let v=false;switch(e===null||e===void 0?void 0:e.$Type){case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":if(e.Value){var s,u,c;const i=e.Value;v=o((s=i.$target)===null||s===void 0?void 0:(u=s.annotations)===null||u===void 0?void 0:(c=u.UI)===null||c===void 0?void 0:c.DataFieldDefault)||o(e)||false;r=T(i.path,i.$target,t,false,a,r,d,v);const l=$(i.path);r=m(e,l,a,r)}break;case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":switch((i=e.Target)===null||i===void 0?void 0:(l=i.$target)===null||l===void 0?void 0:l.$Type){case"com.sap.vocabularies.UI.v1.FieldGroupType":(n=e.Target.$target.Data)===null||n===void 0?void 0:n.forEach(e=>{r=y(e,t,a,r,true)});break;case"com.sap.vocabularies.UI.v1.DataPointType":v=o(e)??false;r=T(e.Target.$target.Value.path,e,t,false,a,r,d,v);break;case"com.sap.vocabularies.Communication.v1.ContactType":const i=e.Target.$target;v=o(e)??false;r=T(e.Target.value,i,t,v,a,r,d,v);break;default:break}break;default:break}return r}i.collectRelatedPropertiesRecursively=y;const b=function(e){var t,a,i,o;let l=e.$Type;switch(l){case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":l=undefined;break;case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":l=e===null||e===void 0?void 0:(t=e.Value)===null||t===void 0?void 0:(a=t.$target)===null||a===void 0?void 0:a.type;break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":default:const y=(i=e.Target)===null||i===void 0?void 0:(o=i.$target)===null||o===void 0?void 0:o.$Type;if(y){var n,r;if(((n=e.Target)===null||n===void 0?void 0:n.$target.$Type)==="com.sap.vocabularies.Communication.v1.ContactType"){var d,v,s;l=(d=((v=e.Target)===null||v===void 0?void 0:(s=v.$target)===null||s===void 0?void 0:s.fn).$target)===null||d===void 0?void 0:d.type}else if(((r=e.Target)===null||r===void 0?void 0:r.$target.$Type)==="com.sap.vocabularies.UI.v1.DataPointType"){var u,c,p,g,f,$,m;l=((u=e.Target)===null||u===void 0?void 0:(c=u.$target)===null||c===void 0?void 0:(p=c.Value)===null||p===void 0?void 0:(g=p.$Path)===null||g===void 0?void 0:g.$Type)||((f=e.Target)===null||f===void 0?void 0:($=f.$target)===null||$===void 0?void 0:(m=$.Value)===null||m===void 0?void 0:m.$target.type)}else{var T;l=((T=e.Target)===null||T===void 0?void 0:T.$target.$Type)==="com.sap.vocabularies.UI.v1.ChartDefinitionType"?undefined:"Edm.Boolean"}}else{l=undefined}break}return l};i.getDataFieldDataType=b;return i},false);
//# sourceMappingURL=DataField.js.map