/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/m/MessageBox","sap/ui/core/message/Message","sap/ui/model/json/JSONModel","./CommonUtils","./controllerextensions/dialog/OperationsDialog.block","./controllerextensions/messageHandler/messageHandling","./formatters/TableFormatterTypes"],function(e,t,s,n,i,a,o){"use strict";var l=o.MessageType;function r(o,r,d,c,g,f,u,T){const _=o.label;const M=o.model;const O=g===null||g===void 0?void 0:g.strictHandlingPromises;let m;let E=n.getTranslatedText("C_COMMON_DIALOG_CANCEL",r);if(c.length===1){const t=c[0].getMessage();const s=c[0].getAdditionalText();if(!f){m=`${t}\n${n.getTranslatedText("PROCEED",r)}`}else if(s!==undefined&&s!==""){E=n.getTranslatedText("C_COMMON_DIALOG_SKIP",r);const e=o.control.getParent().getTableDefinition().headerInfoTypeName;if(e){m=`${e} ${s}: ${t}\n\n${n.getTranslatedText("C_COMMON_DIALOG_SKIP_SINGLE_MESSAGE_TEXT",r)}`}else{m=`${s}: ${t}\n\n${n.getTranslatedText("C_COMMON_DIALOG_SKIP_SINGLE_MESSAGE_TEXT",r)}`}}else{E=n.getTranslatedText("C_COMMON_DIALOG_SKIP",r);m=`${t}\n\n${n.getTranslatedText("C_COMMON_DIALOG_SKIP_SINGLE_MESSAGE_TEXT",r)}`}e.warning(m,{title:n.getTranslatedText("WARNING",r),actions:[_,E],emphasizedAction:_,onClose:function(e){if(e===_){if(!f){u(true);M.submitBatch(T);if(o.requestSideEffects){o.requestSideEffects()}}else{O.forEach(function(e){e.resolve(true);M.submitBatch(e.groupId);if(e.requestSideEffects){e.requestSideEffects()}});const e=g===null||g===void 0?void 0:g.strictHandlingTransitionFails;if(e.length>0){d===null||d===void 0?void 0:d.removeTransitionMessages()}}if(g){g.is412Executed=true}}else{if(g){g.is412Executed=false}if(!f){u(false)}else{O.forEach(function(e){e.resolve(false)})}}if(g){g.strictHandlingWarningMessages=[]}}})}else if(c.length>1){if(f){E=n.getTranslatedText("C_COMMON_DIALOG_SKIP",r);const e=new t({message:n.getTranslatedText("C_COMMON_DIALOG_SKIP_MESSAGES_WARNING",r),type:l.Warning,target:undefined,persistent:true,description:n.getTranslatedText("C_COMMON_DIALOG_SKIP_MESSAGES_TEXT",r,[_])});c=[e].concat(c)}const e=new s;e.setData(c);const o=true;const m=a.prepareMessageViewForDialog(e,o,f);const S=new i({messageObject:m,isMultiContext412:f,resolve:u,model:M,groupId:T,actionName:_,strictHandlingUtilities:g,strictHandlingPromises:O,messageHandler:d,messageDialogModel:e,cancelButtonTxt:E});S.open()}}async function d(e,t,s,n,i,a,o,l,r){if(n===null&&a===null||n===1&&a===1){return new Promise(function(n){c.renderMessageView(t,s,o,r,l,false,n,e)})}else{const d=t.label;const g=l===null||l===void 0?void 0:l.strictHandlingWarningMessages;const f=t.control.getParent().getIdentifierColumn();let u="";if(f&&a&&a>1){u=i&&i.getObject(f)}r.forEach(function(e){e.setType("Warning");e.setAdditionalText(u);g.push(e)});if(t.dialog&&t.dialog.isOpen()){t.dialog.close()}const T=l===null||l===void 0?void 0:l.strictHandlingPromises;const _=new Promise(function(s){T.push({groupId:e,resolve:s,actionName:d,model:t.model,value:u,requestSideEffects:t.requestSideEffects})});l.strictHandlingWarningMessages=g;l.strictHandlingPromises=T;if(n===a){c.renderMessageView(t,s,o,l.strictHandlingWarningMessages,l,true)}return _}}const c={renderMessageView:r,fnOnStrictHandlingFailed:d};return c},false);
//# sourceMappingURL=operationsHelper.js.map