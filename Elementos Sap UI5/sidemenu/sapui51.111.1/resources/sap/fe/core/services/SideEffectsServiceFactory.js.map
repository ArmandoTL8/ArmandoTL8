{"version":3,"file":"SideEffectsServiceFactory.js","names":["sap","ui","define","Log","MetaModelConverter","Service","ServiceFactory","PropertyHelper","_exports","isPathExpression","convertTypes","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","SideEffectsService","_Service","apply","this","arguments","_proto","init","_oSideEffectsType","oData","entities","actions","control","_bInitialized","initPromise","Promise","resolve","addControlSideEffects","sEntityType","oSideEffect","sourceControlId","oControlSideEffect","fullyQualifiedName","mEntityControlSideEffects","executeAction","sTriggerAction","oContext","sGroupId","oTriggerAction","getModel","bindContext","execute","getBinding","getUpdateGroupId","getConvertedMetaModel","getContext","oComponent","scopeObject","oMetaModel","getMetaModel","_oCapabilities","getEntityTypeFromContext","sMetaPath","getMetaPath","getPath","getObject","getODataEntitySideEffects","sEntityTypeName","getGlobalODataEntitySideEffects","mEntitySideEffects","aGlobalSideEffects","key","oEntitySideEffects","SourceEntities","SourceProperties","push","getODataActionSideEffects","sActionName","_this$_oSideEffectsTy","undefined","initializeSideEffects","oCapabilities","oConvertedMetaModel","entityTypes","forEach","entityType","_retrieveODataEntitySideEffects","_retrieveODataActionsSideEffects","removeControlSideEffects","sControlId","keys","requestSideEffects","async","aPathExpressions","_logRequest","requestSideEffectsForODataAction","sideEffects","_sideEffects$triggerA","_sideEffects$pathExpr","aPromises","triggerActions","length","map","sTriggerActionName","pathExpressions","all","requestSideEffectsForNavigationProperty","sNavigationProperty","sBaseEntityType","sNavigationPath","aSideEffects","targetProperties","targetEntities","sideEffectsTargets","filter","sAnnotationName","oSideEffects","some","oPropertyPath","sPropertyPath","value","startsWith","replace","indexOf","oNavigationPropertyPath","TriggerAction","concat","TargetProperties","TargetEntities","sideEffectsTargetDefinition","_removeDuplicateTargets","catch","oError","error","getControlEntitySideEffects","_addRequiredTextProperties","mEntityType","aInitialProperties","aEntitiesRequested","navigation","$NavigationPropertyPath","aDerivedProperties","_targetType","bIsStarProperty","endsWith","sNavigationPropertyPath","substring","lastIndexOf","sRelativePath","mTarget","resolvePath","aTargetEntityProperties","entityProperties","targetType","properties","mProperty","navigationPath","property","find","name","split","pop","info","mPropertyInfo","_mPropertyInfo$proper","_mPropertyInfo$proper2","_mPropertyInfo$proper3","textAnnotation","annotations","Common","Text","sTargetTextPath","path","sTextPathFromInitialEntity","sTargetCollectionPath","_mEntityType$resolveP","_type","_convertSideEffects","sBindingParameter","oTempSideEffects","_removeBindingParameter","_convertTargetsFormat","reduce","aTargetProperties","vTarget","sTarget","type","mTargetEntity","_getSideEffectsFromSource","oSource","sourceEntityType","_oSource$annotations","mCommonAnnotation","mBindingParameter","parameters","mParameter","$Type","sTargetPaths","sPaths","debug","sBindingParameterName","replaceBindingParameter","RegExp","targetProperty","targetEntity","uniqueTargetedEntitiesPath","Set","uniqueTargetProperties","uniqueTargetedEntities","has","add","Array","from","actionName","action","oDataSideEffect","triggerAction","getInterface","SideEffectsServiceFactory","_ServiceFactory","_proto2","createInstance","oServiceContext","SideEffectsServiceService"],"sources":["SideEffectsServiceFactory-dbg.js"],"mappings":"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"}