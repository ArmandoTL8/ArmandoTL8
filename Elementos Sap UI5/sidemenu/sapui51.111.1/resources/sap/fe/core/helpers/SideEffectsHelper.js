/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define([],function(){"use strict";const t=function(t,e,n){const i=t["$NavigationPropertyPath"];let s;if(i===""){s=Promise.resolve(e)}else{s=n.requestObject("/"+e+"/"+i+"/@sapui.name")}return{pOwnerEntity:s,sNavigationPath:i}};const e=function(e,i,s,o){const r=i.indexOf("#")>-1&&i.substr(i.indexOf("#"))||"",a=s.SourceProperties||[],c=s.SourceEntities||[],u=[];a.forEach(function(t){const{sPath:i,pOwnerEntity:a,sNavigationPath:c}=n(t["$PropertyPath"],e,o);u.push({pOwnerEntity:a,sQualifier:r,sNavigationPath:c,sPath:i,sEntityType:e,oSideEffectAnnotation:s})});c.forEach(function(n){const{pOwnerEntity:i,sNavigationPath:a}=t(n,e,o);u.push({pOwnerEntity:i,sQualifier:r,sNavigationPath:a,sPath:"entity",sEntityType:e,oSideEffectAnnotation:s})});return u};const n=function(t,e,n){const i=t.indexOf("/")>0?"/"+e+"/"+t.substr(0,t.lastIndexOf("/")+1)+"@sapui.name":false,s=!i?Promise.resolve(e):n.requestObject(i);t=i?t.substr(t.lastIndexOf("/")+1):t;return{sPath:t,pOwnerEntity:s,sNavigationPath:i}};const i={IMMEDIATE_REQUEST:"$$ImmediateRequest",generateSideEffectsMapFromMetaModel(t){const n={};let s=[];let o=[];return t.requestObject("/$").then(function(t){const e=function(e){return t[e]["$kind"]==="EntityType"};return Object.keys(t).filter(e)}).then(e=>{s=e;return Promise.allSettled(e.map(e=>t.requestObject("/"+e+"@")))}).then(n=>{let i=[];n.forEach(function(n,r){if(n.status==="fulfilled"){const a=s[r];const c=n.value;Object.keys(c).filter(function(t){return t.indexOf("@com.sap.vocabularies.Common.v1.SideEffects")>-1}).forEach(function(n){const s=e(a,n,c[n],t);o=o.concat(s);i=i.concat(s.map(t=>t["pOwnerEntity"]))})}});return Promise.allSettled(i)}).then(t=>{t.forEach((t,e)=>{if(t.status==="fulfilled"){const s=t.value;const r=o[e];const{sEntityType:a,sQualifier:c,oSideEffectAnnotation:u,sPath:f}=r;const l=u.SourceProperties;if(f==="entity"){n[s]=n[s]||[[],{}];n[s][0].push(`${a}${c}${i.IMMEDIATE_REQUEST}`)}else{n[s]=n[s]||[[],{}];n[s][1][f]=n[s][1][f]||[];n[s][1][f].push(a+c+(l.length===1&&i.IMMEDIATE_REQUEST||""))}}});return n}).catch(t=>Promise.reject(t))}};return i},false);
//# sourceMappingURL=SideEffectsHelper.js.map