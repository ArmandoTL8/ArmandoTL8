/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/converters/MetaModelConverter"],function(t){"use strict";var n={};var e=t.getInvolvedDataModelObjects;let o;(function(t){t["TypeSingleton"]="Singleton";t["TypeEntity"]="EntitySet"})(o||(o={}));n.TypeOfEntity=o;const i={isStickySessionSupported:function(t){const n=t.getObject("/");for(const e in n){if(n[e].$kind==="EntitySet"&&t.getObject(`/${e}@com.sap.vocabularies.Session.v1.StickySessionSupported`)){return true}}return false},isDraftSupported:function(t,n){const o=t.getMetaContext(n);const i=e(o);return this.isObjectPathDraftSupported(i)},isObjectPathDraftSupported:function(t){var n,e,o,r,a,d,l;const s=t.targetEntitySet;const u=i.isDraftRoot(s);const c=i.isDraftNode(s);const f=(n=t.targetObject)!==null&&n!==void 0&&n.containsTarget&&((e=t.startingEntitySet)!==null&&e!==void 0&&(o=e.annotations)!==null&&o!==void 0&&(r=o.Common)!==null&&r!==void 0&&r.DraftRoot||(a=t.startingEntitySet)!==null&&a!==void 0&&(d=a.annotations)!==null&&d!==void 0&&(l=d.Common)!==null&&l!==void 0&&l.DraftNode)?true:false;return u||c||!s&&f},isCollaborationDraftSupported:function(t,n){var e;const o=(n===null||n===void 0?void 0:(e=n.context)===null||e===void 0?void 0:e.getModel())||t;const i=o.getObject("/");for(const t in i){if(i[t].$kind==="EntitySet"&&o.getObject(`/${t}@com.sap.vocabularies.Common.v1.DraftRoot/ShareAction`)){return true}}return false},getDraftRootPath:function(n){const e=n.getModel().getMetaModel();const o=function(n,i){var r;let a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;const d=a?n:(r=new RegExp(/.*(?=\/)/).exec(n))===null||r===void 0?void 0:r[0];if(d&&d!=="/"){var l,s;const n=e.getMetaPath(d);const r=t.getInvolvedDataModelObjects(e.getContext(n));if((l=r.targetEntitySet)!==null&&l!==void 0&&(s=l.annotations.Common)!==null&&s!==void 0&&s.DraftRoot){return d}return o(d,i,false)}return undefined};return o(n.getPath(),n.getModel())},getStickyRootPath:function(n){const e=n.getModel().getMetaModel();const o=function(n,i){var r;let a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;const d=a?n:(r=new RegExp(/.*(?=\/)/).exec(n))===null||r===void 0?void 0:r[0];if(d&&d!=="/"){var l,s,u;const n=e.getMetaPath(d);const r=t.getInvolvedDataModelObjects(e.getContext(n));if((l=r.targetEntitySet)!==null&&l!==void 0&&(s=l.annotations)!==null&&s!==void 0&&(u=s.Session)!==null&&u!==void 0&&u.StickySessionSupported){return d}return o(d,i,false)}return undefined};return o(n.getPath(),n.getModel())},getTargetEntitySet:function(t){const n=t.getPath();if(t.getObject("$kind")==="EntitySet"||t.getObject("$kind")==="Action"||t.getObject("0/$kind")==="Action"){return n}const e=i.getEntitySetPath(n);return`/${t.getObject(e)}`},getEntitySetPath:function(t,n){let e="";if(!n){e=`/${t.split("/").filter(i.filterOutNavPropBinding).join("/$NavigationPropertyBinding/")}`}else{const o=t.split("/").filter(i.filterOutNavPropBinding);if(o.length>1){const t={growingPath:"/",pendingNavPropBinding:""};const i=o.reduce((t,e,o)=>{const i=!!o&&"/$NavigationPropertyBinding/"||"";let{growingPath:r,pendingNavPropBinding:a}=t;const d=r+i;const l=n.getObject(d);const s=a?`${a}/${e}`:e;if(l&&Object.keys(l).length>0&&l.hasOwnProperty(s)){r=d+s.replace("/","%2F");a=""}else{a+=a?`/${e}`:e}return{growingPath:r,pendingNavPropBinding:a}},t);e=i.growingPath}else{e=`/${o[0]}`}}return e},getActionParameterItemsModelPath:function(t){return t&&t.$Name?`{path: 'mvfview>/${t.$Name}'}`:undefined},filterOutNavPropBinding:function(t){return t!==""&&t!=="$NavigationPropertyBinding"},enhanceInternalJSONModel:function(t){const n=t.bindContext;t.bindContext=function(t,e,o){for(var i=arguments.length,r=new Array(i>3?i-3:0),a=3;a<i;a++){r[a-3]=arguments[a]}e=n.apply(this,[t,e,o,...r]);const d=e.getBoundContext;e.getBoundContext=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++){n[e]=arguments[e]}const o=d.apply(this,...n);if(o&&!o.setProperty){o.setProperty=function(t,n){if(this.getObject()===undefined){this.getModel().setProperty(this.getPath(),{})}this.getModel().setProperty(t,n,this)}}return o};return e}},enhanceUiJSONModel:function(t,n){const e=t.setProperty;t.setProperty=function(){for(var o=arguments.length,i=new Array(o),r=0;r<o;r++){i[r]=arguments[r]}const a=i[1];if(i[0]==="/isEditable"){t.setProperty("/editMode",a?n.EditMode.Editable:n.EditMode.Display,i[2],i[3])}return e.apply(this,[...i])}},isFilteringCaseSensitive:function(t){if(!t){return undefined}const n=t.getObject("/@Org.OData.Capabilities.V1.FilterFunctions");return n?n.indexOf("tolower")===-1:true},getMetaPathForContext:function(t){const n=t.getModel(),e=n.getMetaModel(),o=t.getPath();return e&&o&&e.getMetaPath(o)},getRootEntitySetPath:function(t){let n="";const e=t?t.split("/"):[];if(e.length>1){n=e[1]}return n},getAbsoluteMetaPathForListBinding:function(t,n){const e=t.getModel().getMetaModel();let o;if(typeof n==="string"){if(n.startsWith("/")){o=e.getMetaPath(n)}else{const i=t.getBindingContext();const r=i.getPath();o=e.getMetaPath(`${r}/${n}`)}}else{const t=n;const i=t.getRootBinding();if(t===i){o=e.getMetaPath(t.getPath())}else{const n=i.getPath();const r=t.getPath();o=e.getMetaPath(`${n}/${r}`)}}return o},isSingleton:function(t){if((t===null||t===void 0?void 0:t._type)===o.TypeSingleton){return true}return false},isDraftRoot:function(t){var n;if(i.isSingleton(t)){return false}return t&&(n=t.annotations.Common)!==null&&n!==void 0&&n.DraftRoot?true:false},isDraftNode:function(t){var n;if(i.isSingleton(t)){return false}return t&&(n=t.annotations.Common)!==null&&n!==void 0&&n.DraftNode?true:false},isSticky:function(t){var n;if(i.isSingleton(t)){return false}return t&&(n=t.annotations.Session)!==null&&n!==void 0&&n.StickySessionSupported?true:false},isUpdateHidden:function(t,n){var e,o,r,a;if(i.isSingleton(t)){return false}return(t===null||t===void 0?void 0:(e=t.annotations.UI)===null||e===void 0?void 0:(o=e.UpdateHidden)===null||o===void 0?void 0:o.valueOf())!==undefined?t===null||t===void 0?void 0:(r=t.annotations.UI)===null||r===void 0?void 0:r.UpdateHidden:n===null||n===void 0?void 0:(a=n.annotations.UI)===null||a===void 0?void 0:a.UpdateHidden},getDraftRoot:function(t){var n;if(i.isSingleton(t)){return undefined}return t&&((n=t.annotations.Common)===null||n===void 0?void 0:n.DraftRoot)},getDraftNode:function(t){var n;if(i.isSingleton(t)){return undefined}return t&&((n=t.annotations.Common)===null||n===void 0?void 0:n.DraftNode)},getStickySession:function(t){var n,e;if(i.isSingleton(t)){return undefined}return t&&((n=t.annotations)===null||n===void 0?void 0:(e=n.Session)===null||e===void 0?void 0:e.StickySessionSupported)},getDeleteHidden:function(t,n){var e,o,r,a;if(i.isSingleton(t)){return false}return(t===null||t===void 0?void 0:(e=t.annotations.UI)===null||e===void 0?void 0:(o=e.DeleteHidden)===null||o===void 0?void 0:o.valueOf())!==undefined?t===null||t===void 0?void 0:(r=t.annotations.UI)===null||r===void 0?void 0:r.DeleteHidden:n===null||n===void 0?void 0:(a=n.annotations.UI)===null||a===void 0?void 0:a.DeleteHidden}};return i},false);
//# sourceMappingURL=ModelHelper.js.map