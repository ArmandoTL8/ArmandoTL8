/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/condition/Operator","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/ValidateException"],function(e,t,r,o,a){"use strict";const n=["DATE","FROM","TO","DATERANGE"];const T="DYNAMIC.DATE";const E="FIXED.DATE";const s="DYNAMIC.DATE.INT";const c="DYNAMIC.DATERANGE";const i="DYNAMIC.MONTH";const A="FIXED.WEEK";const u="FIXED.MONTH";const y="FIXED.QUARTER";const l="FIXED.YEAR";const R="DYNAMIC.WEEK.INT";const O="DYNAMIC.MONTH.INT";const f="DYNAMIC.QUARTER.INT";const D="DYNAMIC.YEAR.INT";const S={DATE:{key:"DATE",category:T},FROM:{key:"FROM",category:T},TO:{key:"TO",category:T},DATERANGE:{key:"DATERANGE",category:c},SPECIFICMONTH:{key:"SPECIFICMONTH",category:i},TODAY:{key:"TODAY",category:E},TODAYFROMTO:{key:"TODAYFROMTO",category:s},YESTERDAY:{key:"YESTERDAY",category:E},TOMORROW:{key:"TOMORROW",category:E},LASTDAYS:{key:"LASTDAYS",category:s},NEXTDAYS:{key:"NEXTDAYS",category:s},THISWEEK:{key:"THISWEEK",category:A},LASTWEEK:{key:"LASTWEEK",category:A},LASTWEEKS:{key:"LASTWEEKS",category:R},NEXTWEEK:{key:"NEXTWEEK",category:A},NEXTWEEKS:{key:"NEXTWEEKS",category:R},THISMONTH:{key:"THISMONTH",category:u},LASTMONTH:{key:"LASTMONTH",category:u},LASTMONTHS:{key:"LASTMONTHS",category:O},NEXTMONTH:{key:"NEXTMONTH",category:u},NEXTMONTHS:{key:"NEXTMONTHS",category:O},THISQUARTER:{key:"THISQUARTER",category:y},LASTQUARTER:{key:"LASTQUARTER",category:y},LASTQUARTERS:{key:"LASTQUARTERS",category:f},NEXTQUARTER:{key:"NEXTQUARTER",category:y},NEXTQUARTERS:{key:"NEXTQUARTERS",category:f},QUARTER1:{key:"QUARTER1",category:y},QUARTER2:{key:"QUARTER2",category:y},QUARTER3:{key:"QUARTER3",category:y},QUARTER4:{key:"QUARTER4",category:y},THISYEAR:{key:"THISYEAR",category:l},LASTYEAR:{key:"LASTYEAR",category:l},LASTYEARS:{key:"LASTYEARS",category:D},NEXTYEAR:{key:"NEXTYEAR",category:l},NEXTYEARS:{key:"NEXTYEARS",category:D},YEARTODATE:{key:"YEARTODATE",category:l},DATETOYEAR:{key:"DATETOYEAR",category:l}};function p(){return new t({name:"DATERANGE",filterOperator:o.BT,alias:{Date:"DATERANGE",DateTime:"DATERANGE"},valueTypes:[t.ValueType.Self,t.ValueType.Self],validate:function(e,r){if(e.length<2){throw new a("Date Range must have two values")}else{const t=new Date(e[0]);const r=new Date(e[1]);if(t.getTime()>r.getTime()){throw new a("From Date Should Be Less Than To Date")}}t.prototype.validate.apply(this,[e,r])}})}function g(){return new t({name:"DATE",alias:{Date:"DATE",DateTime:"DATE"},filterOperator:o.EQ,valueTypes:[t.ValueType.Self],getModelFilter:function(e,t,r){return k.getModelFilterForDate(e,t,r)}})}function N(){return new t({name:"FROM",alias:{Date:"FROM",DateTime:"FROM"},filterOperator:o.GE,valueTypes:[t.ValueType.Self]})}function M(){return new t({name:"TO",alias:{Date:"TO",DateTime:"TO"},filterOperator:o.LE,valueTypes:[t.ValueType.Self],getModelFilter:function(e,t,r){return k.getModelFilterForTo(e,t,r)}})}function d(e,t){if(!t){return true}t=Array.isArray(t)?t:[t];let r;t.some(function(t){let o;if(!t.path){return false}const a=e[t.path];const n=t.exclude||false;let T;if(t.contains&&a){T=t.contains.split(",");r=n;for(o=0;o<T.length;o++){if(n&&a.indexOf(T[o])>-1){r=false;return true}else if(!n&&a.indexOf(T[o])>-1){r=true;return true}}}if(t.equals&&a){T=t.equals.split(",");r=n;for(o=0;o<T.length;o++){if(n&&a===T[o]){r=false;return true}else if(!n&&a===T[o]){r=true;return true}}}return false});return r}const k={addSemanticDateOperators:function(){e.addOperator(p());e.addOperator(g());e.addOperator(N());e.addOperator(M())},getSupportedOperations:function(){return n},getSemanticDateOperations:function(){return Object.keys(S)},removeSemanticDateOperators:function(){},getFilterOperations:function(e){const t=[];for(const r in S){const o=S[r];if(d(o,e)){t.push(o)}}return t.map(function(e){return e.key})},hasSemanticDateOperations:function(e){const t=this.getSemanticDateOperations();for(const r in e){const o=e[r];const a=o.find(function(e){return t.indexOf(e.operator)>-1});if(a){return false}}return true},getModelFilterForDate:function(e,t,a){if(a.isA("sap.ui.model.odata.type.DateTimeOffset")){const n=e.values[0];const T=a.getModelFormat();const E=T.parse(n);E.setHours(23);E.setMinutes(59);E.setSeconds(59);E.setMilliseconds(999);const s=T.format(E);return new r({path:t,operator:o.BT,value1:n,value2:s})}else{return new r({path:t,operator:o.EQ,value1:e.values[0]})}},getModelFilterForTo:function(e,t,a){if(a.isA("sap.ui.model.odata.type.DateTimeOffset")){const n=e.values[0];const T=a.getModelFormat();const E=T.parse(n);E.setHours(23);E.setMinutes(59);E.setSeconds(59);E.setMilliseconds(999);const s=T.format(E);return new r({path:t,operator:o.LE,value1:s})}else{return new r({path:t,operator:o.LE,value1:e.values[0]})}}};return k},false);
//# sourceMappingURL=SemanticDateOperators.js.map