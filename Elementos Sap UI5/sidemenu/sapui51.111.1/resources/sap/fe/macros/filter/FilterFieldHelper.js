/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/CommonUtils","sap/fe/core/helpers/BindingToolkit","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/templating/PropertyFormatters","sap/fe/core/type/FiscalDate","sap/fe/macros/CommonHelper","sap/ui/model/odata/v4/AnnotationHelper"],function(e,t,n,i,r,o,s){"use strict";var a=i.getProperty;var l=n.getContextRelativeTargetObjectPath;var c=t.pathInModel;var f=t.getFiscalType;var p=t.EDM_TYPE_MAPPING;var u=t.compileExpression;const d={isRequiredInFilter:function(t,n){const i=n.context.getModel(),r=n.context.getPath(),s=o.getLocationForPropertyPath(i,r);let a,l,c=i.getObject(s+"/@com.sap.vocabularies.Common.v1.ResultContext");if(!c){if(typeof t==="string"){a=t}else{a=i.getObject(`${r}@sapui.name`)}l=e.getFilterRestrictionsByPath(s,i);c=l&&l.RequiredProperties&&l.RequiredProperties.indexOf(a)>-1}return c},maxConditions:function(t,n){let i,r=-1;const s=n.context.getModel(),a=n.context.getPath();const l=o.getLocationForPropertyPath(s,a);if(s.getObject(`${l}/@com.sap.vocabularies.Common.v1.ResultContext`)===true){return 1}if(typeof t==="string"){i=t}else{i=s.getObject(`${a}@sapui.name`)}const c=e.getFilterRestrictionsByPath(l,s);let f=s.getObject(`${l}/${i}`);if(!f){f=s.getObject(a)}if(f.$Type==="Edm.Boolean"){r=1}else if(c&&c.FilterAllowedExpressions&&c.FilterAllowedExpressions[i]){const t=e.getSpecificAllowedExpression(c.FilterAllowedExpressions[i]);if(t==="SingleValue"||t==="SingleRange"){r=1}}return r},getConditionsBinding:function(e){const t=l(e,false,true);return u(c(`/conditions/${t}`,"$filters"))},constraints:function(e,t){const n=s.format(e,t),i=n&&n.match(/constraints:.*?({.*?})/);let r=i&&i[1];if(n.indexOf("sap.ui.model.odata.type.DateTimeOffset")>-1){if(r){r=`${r.substr(0,i===null||i===void 0?void 0:i[1].indexOf("}"))}, V4: true}`}else{r="{V4: true}"}}if(r&&r.indexOf("'nullable':false")>=0){r=r.replace(/,[ ]*'nullable':false/,"").replace(/'nullable':false[, ]*/,"");if(r==="{}"){return undefined}}return r||undefined},formatOptions:function(e,t){if(e.$Type==="Edm.String"){if(!e.hasOwnProperty("$Nullable")||e.$Nullable===true){t.arguments=[null,{parseKeepsEmptyString:false}]}const n=f(a(e,t));if(n){if(!t.arguments){t.arguments=[null,{}]}t.arguments[1].fiscalType=n}}const n=s.format(e,t),i=n&&n.match(/formatOptions:.*?({.*?})/);return i&&i[1]||undefined},getDataType:function(e){if(e.type==="Edm.String"){const t=f(e);if(t){return"sap.fe.core.type.FiscalDate"}}const t=p[e.type];return t?t.type:e.type},getPlaceholder:function(e){if(e.type==="Edm.String"){const t=f(e);if(t){return new r({fiscalType:t},{}).getPattern()}}return undefined}};return d},false);
//# sourceMappingURL=FilterFieldHelper.js.map