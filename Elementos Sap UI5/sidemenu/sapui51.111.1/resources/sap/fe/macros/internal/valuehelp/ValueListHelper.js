/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/base/util/ObjectPath","sap/fe/core/CommonUtils","sap/fe/core/templating/PropertyHelper","sap/fe/core/templating/UIFormatters","sap/fe/macros/ODataMetaModelUtil","sap/m/table/Util","sap/ui/core/Fragment","sap/ui/core/util/XMLPreprocessor","sap/ui/core/XMLTemplateProcessor","sap/ui/dom/units/Rem","sap/ui/mdc/valuehelp/content/Conditions","sap/ui/mdc/valuehelp/content/MDCTable","sap/ui/mdc/valuehelp/content/MTable","sap/ui/model/json/JSONModel"],function(e,t,n,o,a,i,r,s,l,u,c,p,d,m,f){"use strict";var g={};var v=a.getTypeConfig;var h=a.getDisplayMode;var P=o.getAssociatedUnitProperty;var y=o.getAssociatedTimezoneProperty;var C=o.getAssociatedTextProperty;var b=o.getAssociatedCurrencyProperty;var I=e.Level;const V=(e,t)=>!e.some(e=>e.path===t);const $="@com.sap.vocabularies.Common.v1.Label",L="@com.sap.vocabularies.Common.v1.Text",T="@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement",M="com.sap.vocabularies.Common.v1.ValueListParameterIn",O="com.sap.vocabularies.Common.v1.ValueListParameterConstant",_="com.sap.vocabularies.Common.v1.ValueListParameterOut",x="com.sap.vocabularies.Common.v1.ValueListParameterInOut",F="@com.sap.vocabularies.Common.v1.ValueListWithFixedValues";g.AnnotationLabel=$;g.AnnotationValueListWithFixedValues=F;g.AnnotationValueListParameterInOut=x;g.AnnotationValueListParameterOut=_;g.AnnotationValueListParameterConstant=O;g.AnnotationValueListParameterIn=M;g.AnnotationTextUITextArrangement=T;g.AnnotationText=L;function S(e){let t;const n=e.$model.getMetaModel();const o=n.getObject(`/${e.CollectionPath}@`)||{};const a=i.getSortRestrictionsInfo(o);const r=e.Parameters.find(function(t){return(t.$Type==="com.sap.vocabularies.Common.v1.ValueListParameterInOut"||t.$Type==="com.sap.vocabularies.Common.v1.ValueListParameterOut"||t.$Type==="com.sap.vocabularies.Common.v1.ValueListParameterDisplayOnly")&&!(n.getObject(`/${e.CollectionPath}/${t.ValueListProperty}@com.sap.vocabularies.UI.v1.Hidden`)===true)});if(r){if(n.getObject(`/${e.CollectionPath}/${r.ValueListProperty}@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement/$EnumMember`)==="com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly"){t=n.getObject(`/${e.CollectionPath}/${r.ValueListProperty}@com.sap.vocabularies.Common.v1.Text/$Path`)}else{t=r.ValueListProperty}}if(t&&(!a.propertyInfo[t]||a.propertyInfo[t].sortable)){return t}else{return undefined}}function H(e,t){const n=t.find(function(t){return e.ValueListProperty===t.textColumnName});if(e.ValueListProperty===(n===null||n===void 0?void 0:n.textColumnName)&&!n.keyColumnHidden&&n.keyColumnDisplayFormat!=="Value"){return true}return undefined}function A(e){return e.Parameters.some(function(e){return e["@com.sap.vocabularies.UI.v1.Importance"]&&e["@com.sap.vocabularies.UI.v1.Importance"].$EnumMember==="com.sap.vocabularies.UI.v1.ImportanceType/High"})}function D(e){const t=e.getModel("viewData");if(t){const e=t.getData();if(e){const t=e.columns;if(t){return t.reduce(function(e,t){if(t.path&&t.path.indexOf("/")===-1){e=e?`${e},${t.path}`:t.path}return e},undefined)}}}return undefined}function U(e,t){const o=n.computeDisplayMode(e,undefined);const a=e&&e["@com.sap.vocabularies.Common.v1.Text"];const i=a&&e["@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement"];if(t){return a&&typeof a!=="string"&&a.$Path?o:"Value"}else{return i?o:"Value"}}const j={getValueListCollectionEntitySet:function(e){const t=e.getObject();return t.$model.getMetaModel().createBindingContext(`/${t.CollectionPath}`)},getTableDelegate:function(e){let t=S(e);if(t){t=`'${t}'`}return"{name: 'sap/fe/macros/internal/valuehelp/TableDelegate', payload: {collectionName: '"+e.CollectionPath+"'"+(t?", defaultSortPropertyName: "+t:"")+"}}"},getSortConditionsFromPresentationVariant:function(e,t){const n=e.PresentationVariantQualifier===""?"":`#${e.PresentationVariantQualifier}`,o=`/${e.CollectionPath}/@com.sap.vocabularies.UI.v1.PresentationVariant${n}`;const a=e.$model.getMetaModel().getObject(o);if(a&&a.SortOrder){const e={sorters:[]};if(t){a.SortOrder.forEach(function(t){const n={};n.path=t.Property.$PropertyPath;if(t.Descending){n.descending=true}else{n.ascending=true}e.sorters.push(n)});return`sorter: ${JSON.stringify(e.sorters)}`}else{a.SortOrder.forEach(function(t){const n={};n.name=t.Property.$PropertyPath;if(t.Descending){n.descending=true}else{n.ascending=true}e.sorters.push(n)});return JSON.stringify(e)}}return undefined},getPropertyPath:function(e){return!e.UnboundAction?`${e.EntityTypePath}/${e.Action}/${e.Property}`:`/${e.Action.substring(e.Action.lastIndexOf(".")+1)}/${e.Property}`},getValueListProperty:function(e){const t=e.getModel();const n=t.getObject("/");return n.$model.getMetaModel().createBindingContext(`/${n.CollectionPath}/${e.getObject()}`)},getColumnVisibility:function(e,t,n){const o=n&&!!n.valueHelpWithFixedValues,a=n.columnInfo,i=!H(t,a.columnInfos),r=a.isDialogTable;if(o||!o&&r||!o&&!A(e)){const e=a.columnInfos.find(function(e){return t.ValueListProperty===e.columnName&&e.hasHiddenAnnotation===true});return!e?i:false}else if(!o&&A(e)){return t&&t["@com.sap.vocabularies.UI.v1.Importance"]&&t["@com.sap.vocabularies.UI.v1.Importance"].$EnumMember==="com.sap.vocabularies.UI.v1.ImportanceType/High"?true:false}return true},getColumnVisibilityInfo:function(e,t,n,o){const a=e.$model.getMetaModel();const i=[];const r={isDialogTable:o,columnInfos:i};e.Parameters.forEach(function(t){const o=a.getObject(`/${e.CollectionPath}/${t.ValueListProperty}@`);const i=o&&o["@com.sap.vocabularies.Common.v1.Text"];let s={};if(i){s={keyColumnHidden:o["@com.sap.vocabularies.UI.v1.Hidden"]?true:false,keyColumnDisplayFormat:i&&U(o,n),textColumnName:i&&i.$Path,columnName:t.ValueListProperty,hasHiddenAnnotation:o&&o["@com.sap.vocabularies.UI.v1.Hidden"]?true:false}}else if(o&&o["@com.sap.vocabularies.UI.v1.Hidden"]){s={columnName:t.ValueListProperty,hasHiddenAnnotation:o&&o["@com.sap.vocabularies.UI.v1.Hidden"]?true:false}}r.columnInfos.push(s)});return r},getTableItemsParameters:function(e,t,n,o){const a=[`path: '/${e.CollectionPath}'`];const i=D(this);if(t){const e=i?`, '${i}'`:"";a.push(`parameters: {$$groupId: '${t}'${e}}`)}else if(i){a.push(`parameters: {$select: '${i}'}`)}const r=e.Parameters.some(function(e){return n||e.$Type==="com.sap.vocabularies.Common.v1.ValueListParameterIn"});a.push(`suspended: ${r}`);if(!o){a.push("length: 10")}const s=j.getSortConditionsFromPresentationVariant(e,n);if(s){a.push(s)}else if(o){const t=S(e);if(t){a.push(`sorter: [{path: '${t}', ascending: true}]`)}}return"{"+a.join(", ")+"}"},hasImportance:function(e){return A(e.getObject())?"Importance/High":"None"},getMinScreenWidth:function(e){return A(e)?"{= ${_VHUI>/minScreenWidth}}":"416px"},getColumnWidth:function(n){var o,a,i,s,l,u,c,p;const d=n.targetObject;let m=[d];const f=C(d)||b(d)||P(d)||y(d),g=(o=d.annotations)===null||o===void 0?void 0:(a=o.Common)===null||a===void 0?void 0:a.Text,I=g===null||g===void 0?void 0:(i=g.annotations)===null||i===void 0?void 0:(s=i.UI)===null||s===void 0?void 0:(l=s.TextArrangement)===null||l===void 0?void 0:l.toString(),V=(u=d.annotations)===null||u===void 0?void 0:(c=u.Common)===null||c===void 0?void 0:(p=c.Label)===null||p===void 0?void 0:p.toString(),$=I&&h(n);if(f){if($==="Description"){m=[f]}else if(!g||$&&$!=="Value"){m.push(f)}}let L=0;const T=[];m.forEach(e=>{const n=v(e,undefined);const o=t.get(n.type);if(o){T.push(new o(n.formatOptions,n.constraints))}});const M=r.calcColumnWidth(T,V);L=M?parseFloat(M.replace("rem","")):0;if(L===0){e.error(`Cannot compute the column width for property: ${d.name}`)}return L<=20?L.toString()+"rem":"20rem"},getOutParameterPaths:function(e){let t="";e.forEach(function(e){if(e.$Type.endsWith("Out")){t+=`{${e.ValueListProperty}}`}});return t},entityIsSearchable:function(e,t){var n,o;const a=(n=e["@com.sap.vocabularies.Common.v1.ValueList"])===null||n===void 0?void 0:n.SearchSupported,i=(o=t["@Org.OData.Capabilities.V1.SearchRestrictions"])===null||o===void 0?void 0:o.Searchable;if(i===undefined&&a===false||i===true&&a===false||i===false){return false}return true},_getConditionPath:function(e,t,n){const o=n.split("/");let a="",i;while(o.length){let n=o.shift();i=i?`${i}/${n}`:n;const r=e.getObject(`${t}/${i}`);if(r&&r.$kind==="NavigationProperty"&&r.$isCollection){n+="*"}a=a?`${a}/${n}`:n}return a},_getColumnDefinitionFromSelectionFields:function(e,t){const o=[],a=e.getObject(`${t}/@`),i=a["@com.sap.vocabularies.UI.v1.SelectionFields"];if(i){i.forEach(function(a){const i=`${t}/${a.$PropertyPath}`,r=j._getConditionPath(e,t,a.$PropertyPath),s=e.getObject(`${i}@`),l={path:r,label:s[$]||i,sortable:true,filterable:n.isPropertyFilterable(e,t,a.$PropertyPath,false),$Type:e.getObject(i).$Type};o.push(l)})}return o},_mergeColumnDefinitionsFromProperties:function(e,t,n,o,a){var i;let r=n,s=o.$Type;const l=a[$]||r,u=a[L];if(u&&((i=a[T])===null||i===void 0?void 0:i.$EnumMember)==="com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly"){r=u.$Path;const e=`/${t.CollectionPath}/${r}`;s=t.$model.getMetaModel().getObject(e).$Type}if(V(e,r)){const t={path:r,label:l,sortable:true,filterable:!a["@com.sap.vocabularies.UI.v1.HiddenFilter"],$Type:s};e.push(t)}},filterInOutParameters:function(e,t){return e.filter(function(e){return t.indexOf(e.parmeterType)>-1})},getInParameters:function(e){return j.filterInOutParameters(e,[M,O,x])},getOutParameters:function(e){return j.filterInOutParameters(e,[_,x])},createVHUIModel:function(e,t,n){const o=new f({}),a=n.getObject(`${t}@`);e.setModel(o,"_VHUI");o.setProperty("/hasValueListRelevantQualifiers",!!a["@com.sap.vocabularies.Common.v1.ValueListRelevantQualifiers"]);o.setProperty("/propertyLabel",a[$]);return o},_getDialogTitle:function(e,t){var n;const o=e.getModel("_VHUI").getProperty("/propertyLabel");const a=(n=e.getControl())===null||n===void 0?void 0:n.getProperty("label");return e.getModel("_VHUI").getProperty("/hasValueListRelevantQualifiers")?t||o||a:a||o||t},destroyVHContent:function(e){if(e.getDialog()){e.getDialog().destroyContent()}if(e.getTypeahead()){e.getTypeahead().destroyContent()}},putDefaultQualifierFirst:function(e){const t=e.indexOf("");if(t>0){e.unshift(e[t]);e.splice(t+1,1)}return e},_getContextPrefix:function(e,t){if(e&&e.getPath()){const n=e.getPath().split("/");if(t.length-n.length>1){const e=[];for(let o=n.length;o<t.length-1;o++){e.push(t[o])}return`${e.join("/")}/`}}return""},_getVhParameter:function(e,t,n,o,a,i){let r="";const s=t.getBindingContext();if(e&&e.length>0){var l;if((l=t.getParent())!==null&&l!==void 0&&l.isA("sap.ui.mdc.Table")&&s&&j._parameterIsA(o,["com.sap.vocabularies.Common.v1.ValueListParameterIn","com.sap.vocabularies.Common.v1.ValueListParameterInOut"])){const e=i.split("/");if(e.length>1){const n=e[0];const o=a.getMetaContext(s.getPath());const l=t.getParent().getRowBinding().getPath();if(o.getObject(`${l}/$Partner`)===n){r=i.replace(n+"/","")}}}if(!r){r=e+">/conditions/"+i}}else{r=n+i}return{parmeterType:o.$Type,source:r,helpPath:o.ValueListProperty,constantValue:o.Constant,initialValueFilterEmpty:Boolean(o.InitialValueIsSignificant)}},_parameterIsA(e,t){return t.includes(e.$Type)},_enrichPath:function(e,t,n,o,a,i){if(!e.key&&j._parameterIsA(o,["com.sap.vocabularies.Common.v1.ValueListParameterOut","com.sap.vocabularies.Common.v1.ValueListParameterInOut"])&&n===a){var r;e.fieldPropertyPath=t;e.key=o.ValueListProperty;e.descriptionPath=((r=i[L])===null||r===void 0?void 0:r.$Path)||""}},_enrichKeys:function(e,t){if(j._parameterIsA(t,["com.sap.vocabularies.Common.v1.ValueListParameterOut","com.sap.vocabularies.Common.v1.ValueListParameterInOut"])&&!e.includes(t.ValueListProperty)){e.push(t.ValueListProperty)}},_processParameters:function(e,t,n,o,a,i,r){var s;const l=e.$model.getMetaModel(),u=`/${e.CollectionPath}`,c=j._getColumnDefinitionFromSelectionFields(l,u),p=[],d=(s=l.getObject(u+`/`))!==null&&s!==void 0&&s.$Key?[...l.getObject(u+`/`).$Key]:[];const m={fieldPropertyPath:"",descriptionPath:"",key:""};for(const r of e.Parameters){var f;const s=`/${e.CollectionPath}/${r.ValueListProperty}`,u=l.getObject(s),g=l.getObject(`${s}@`)||{},v=((f=r.LocalDataProperty)===null||f===void 0?void 0:f.$PropertyPath)||"";if(u){j._enrichPath(m,s,v,r,t,g);const n=r.ValueListProperty;j._mergeColumnDefinitionsFromProperties(c,e,n,u,g)}if(j._parameterIsA(r,["com.sap.vocabularies.Common.v1.ValueListParameterIn","com.sap.vocabularies.Common.v1.ValueListParameterOut","com.sap.vocabularies.Common.v1.ValueListParameterInOut"])&&v!==t){const e=j._getVhParameter(n,o,a,r,i,v);p.push(e)}if(r.$Type===O){p.push({parmeterType:r.$Type,source:r.ValueListProperty,helpPath:r.ValueListProperty,constantValue:r.Constant,initialValueFilterEmpty:Boolean(r.InitialValueIsSignificant)})}j._enrichKeys(d,r)}for(const t of d){if(V(c,t)){const n={path:t,$Type:l.getObject(`/${e.CollectionPath}/${m.key}`).$Type,label:"",sortable:false,filterable:undefined};c.push(n)}}return{keyValue:m.key,descriptionValue:m.descriptionPath,fieldPropertyPath:m.fieldPropertyPath,vhKeys:d,vhParameters:p,valueListInfo:e,columnDefs:c,valueHelpQualifier:r}},_logError:function(t,n){const o=n?n.status:undefined;const a=n instanceof Error?n.message:String(n);const i=o===404?`Metadata not found (${o}) for value help of property ${t}`:a;e.error(i)},getValueListInfo:async function(e,t,n){const o=e.getBindingContext(),a=n.conditionModel,i=e.getModel().getMetaModel(),r=[],s=t.split("/");try{const l=await i.requestValueListInfo(t,true,o);const u=j.putDefaultQualifierFirst(Object.keys(l)),c=s.pop();const p=n.useMultiValueField?j._getContextPrefix(o,s):"";for(const t of u){const n=l[t];const o=j._processParameters(n,c,a,e,p,i,t);r.push(o)}}catch(n){this._logError(t,n);j.destroyVHContent(e)}return r},ALLFRAGMENTS:undefined,logFragment:undefined,_logTemplatedFragments:function(t,n,o){const a={path:t,fragmentName:n,fragment:o};if(e.getLevel()===I.DEBUG){j.ALLFRAGMENTS=j.ALLFRAGMENTS||[];j.ALLFRAGMENTS.push(a)}if(j.logFragment){setTimeout(function(){j.logFragment(a)},0)}},_templateFragment:async function(e,t,n,o){const a=t.valueListInfo,i=new f(a),r=a.$model.getMetaModel(),c=new f({converterType:"ListReport",columns:t.columnDefs||null});const p=await l.process(u.loadTemplate(e,"fragment"),{name:e},{bindingContexts:{valueList:i.createBindingContext("/"),contextPath:r.createBindingContext(`/${a.CollectionPath}/`),source:n.createBindingContext("/")},models:{valueList:i,contextPath:r,source:n,metaModel:r,viewData:c}});j._logTemplatedFragments(o,e,p);return await s.load({definition:p})},_getContentId:function(e,t,n){const o=n?"Popover":"Dialog";return`${e}::${o}::qualifier::${t}`},_addInOutParametersToPayload:function(e,t){const n=t.valueHelpQualifier;if(!e.qualifiers){e.qualifiers={}}if(!e.qualifiers[n]){e.qualifiers[n]={vhKeys:t.vhKeys,vhParameters:t.vhParameters}}},_getValueHelpColumnDisplayFormat:function(e,t){const o=n.computeDisplayMode(e,undefined),a=e&&e[L],i=a&&e[T];if(t){return a&&typeof a!=="string"&&a.$Path?o:"Value"}else{return i?o:"Value"}},_getWidthInRem:function(e,t){let n=e.$().width();if(t&&n){n=.3*n}const o=n?parseFloat(String(c.fromPx(n))):0;return isNaN(o)?0:o},_getTableWidth:function(e,t){let n;const o=e.getColumns(),a=o&&o.filter(function(e){return e&&e.getVisible&&e.getVisible()})||[],i=a.reduce(function(e,t){n=t.getWidth();if(n&&n.endsWith("px")){n=String(c.fromPx(n))}const o=parseFloat(n);return e+(isNaN(o)?9:o)},a.length);return`${Math.max(i,t)}em`},_createValueHelpTypeahead:async function(t,n,o,a,i){const r=o.getId(),s=n.getModel().getMetaModel().getObject(`${t}@`),l=s[F]??false,u=false,c=j.getColumnVisibilityInfo(a.valueListInfo,t,l,u),p=new f({id:r,groupId:i.requestGroupId||undefined,bSuggestion:true,propertyPath:t,columnInfo:c,valueHelpWithFixedValues:l});o.setKeyPath(a.keyValue);o.setDescriptionPath(a.descriptionValue);i.isValueListWithFixedValues=l;const d=a.valueListInfo.$model.getMetaModel().getObject(`/${a.valueListInfo.CollectionPath}@`)||{};o.setFilterFields(j.entityIsSearchable(s,d)?"$search":"");const m=await j._templateFragment("sap.fe.macros.internal.valuehelp.ValueListTable",a,p,t);m.setModel(a.valueListInfo.$model);e.info(`Value List- suggest Table XML content created [${t}]`,m.getMetadata().getName(),"MDC Templating");o.setTable(m);const g=n.getControl();if(g!==undefined&&(g.isA("sap.ui.mdc.FilterField")||g.isA("sap.ui.mdc.Field")||g.isA("sap.ui.mdc.MultiValueField"))){const e=Boolean(i.isUnitValueHelp);const t=j._getTableWidth(m,j._getWidthInRem(g,e));m.setWidth(t);if(l){m.setMode(g.getMaxConditions()===1?"SingleSelectMaster":"MultiSelect")}else{m.setMode("SingleSelectMaster")}}},_createValueHelpDialog:async function(e,t,n,o,a){const i=t.getModel().getMetaModel().getObject(`${e}@`),r=false,s=true,l=j.getColumnVisibilityInfo(o.valueListInfo,e,r,s),u=new f({id:n.getId(),groupId:a.requestGroupId||undefined,bSuggestion:false,columnInfo:l,valueHelpWithFixedValues:r});n.setKeyPath(o.keyValue);n.setDescriptionPath(o.descriptionValue);const c=o.valueListInfo.$model.getMetaModel().getObject(`/${o.valueListInfo.CollectionPath}@`)||{};n.setFilterFields(j.entityIsSearchable(i,c)?"$search":"");const p=j._templateFragment("sap.fe.macros.internal.valuehelp.ValueListDialogTable",o,u,e);const d=j._templateFragment("sap.fe.macros.internal.valuehelp.ValueListFilterBar",o,u,e);const[m,g]=await Promise.all([p,d]);m.setModel(o.valueListInfo.$model);g.setModel(o.valueListInfo.$model);n.setFilterBar(g);n.setTable(m);m.setFilter(g.getId());m.initialized();const v=t.getControl();if(v!==undefined){m.setSelectionMode(v.getMaxConditions()===1?"SingleMaster":"Multi")}m.setWidth("100%");const h=m;h._setShowP13nButton(false)},_getContentById:function(e,t){return e.find(function(e){return e.getId()===t})},_createPopoverContent:function(e,t,n){return new m({id:e,group:"group1",caseSensitive:t,useAsValueHelp:n})},_createDialogContent:function(e,t,n){return new d({id:e,group:"group1",caseSensitive:t,forceBind:n})},_showConditionsContent:function(e,t){let n=e.length&&e[e.length-1].getMetadata().getName()==="sap.ui.mdc.valuehelp.content.Conditions"?e[e.length-1]:undefined;if(n){n.setVisible(true)}else{n=new p;t.addContent(n)}},_alignOrCreateContent:function(e,t,n,o,a){const i=a.getContent();let r=j._getContentById(i,t);if(!r){const s=e.valueListInfo.FetchValues===2?false:true;r=j._createDialogContent(t,n,s);if(!o){a.addContent(r)}else{a.insertContent(r,i.length-1)}}else{r.setVisible(true)}return r},_prepareValueHelpTypeAhead:function(e,t,n,o,a,i){const r=t.getContent();let s=e.data("valuelistForValidation")||"";if(s===" "){s=""}const l=s?n.filter(function(e){return e.valueHelpQualifier===s})[0]:n[0];j._addInOutParametersToPayload(o,l);const u=j._getContentId(e.getId(),l.valueHelpQualifier,true);let c=j._getContentById(r,u);if(!c){const e=i.getUseAsValueHelp();c=j._createPopoverContent(u,a,e);t.insertContent(c,0)}else if(u!==r[0].getId()){t.removeContent(c);t.insertContent(c,0)}return{valueListInfo:l,content:c}},_prepareValueHelpDialog:function(e,t,o,a,i,r){const s=e.data("showConditionPanel")&&e.data("showConditionPanel")!=="false";const l=t.getContent();for(const e of l){e.setVisible(false)}if(s){this._showConditionsContent(l,t)}let u,c;for(const l of o){const o=l.valueHelpQualifier;j._addInOutParametersToPayload(a,l);const p=j._getContentId(e.getId(),o,false);const d=this._alignOrCreateContent(l,p,r,s,t);if(l.valueListInfo.Label){const t=n.getTranslatedTextFromExpBindingString(l.valueListInfo.Label,e.getControl());d.setTitle(t)}if(!c||i&&i===p){c=d;u=l}}if(!u||!c){throw new Error("selectedInfo or selectedContent undefined")}return{selectedInfo:u,selectedContent:c}},showValueList:async function(e,t,o){const a=t.getParent(),i=t.isTypeahead(),r=e.propertyPath,s=a.getModel().getMetaModel(),l=a.getModel("_VHUI")||j.createVHUIModel(a,r,s);if(!e.qualifiers){e.qualifiers={}}l.setProperty("/isSuggestion",i);l.setProperty("/minScreenWidth",!i?"418px":undefined);try{const s=await j.getValueListInfo(a,r,e);const l=a.getTypeahead().getContent()[0],c=l.getCaseSensitive();if(i){const{valueListInfo:n,content:o}=j._prepareValueHelpTypeAhead(a,t,s,e,c,l);e.valueHelpQualifier=n.valueHelpQualifier;if(o.getTable()===undefined||o.getTable()===null){await j._createValueHelpTypeahead(r,a,o,n,e)}}else{var u;const{selectedInfo:i,selectedContent:l}=j._prepareValueHelpDialog(a,t,s,e,o,c);e.valueHelpQualifier=i.valueHelpQualifier;const p=n.getTranslatedTextFromExpBindingString(j._getDialogTitle(a,(u=i.valueListInfo)===null||u===void 0?void 0:u.Label),a.getControl());t.setTitle(p);if(l.getTable()===undefined||l.getTable()===null){await j._createValueHelpDialog(r,a,l,i,e)}}}catch(e){this._logError(r,e);j.destroyVHContent(a)}}};return j},false);
//# sourceMappingURL=ValueListHelper.js.map