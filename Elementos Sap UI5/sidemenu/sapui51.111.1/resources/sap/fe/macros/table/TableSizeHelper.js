/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/fe/core/templating/DisplayModeFormatter","sap/m/Button","sap/m/table/Util","sap/ui/dom/units/Rem"],function(t,e,i,n,o){"use strict";var l=e.getDisplayMode;const a={nbCalls:0,oBtn:undefined,propertyHelper:undefined,init:function(){this.nbCalls=this.nbCalls?this.nbCalls:0;this.nbCalls++;this.oBtn=this.oBtn?this.oBtn:(new i).placeAt(sap.ui.getCore().getStaticAreaRef());this.oBtn.setVisible(false)},getButtonWidth:function(t){if(!t){return 0}if(this.oBtn.getVisible()===false){this.oBtn.setVisible(true)}this.oBtn.setText(t);this.oBtn.rerender();const e=o.fromPx(this.oBtn.getDomRef().scrollWidth);this.oBtn.setVisible(false);return Math.round(e*100)/100},getMDCColumnWidthFromDataField:function(t,e,i){let n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;const o=e.find(e=>{var n,o;return e.metadataPath&&((n=i.resolvePath(e.metadataPath))===null||n===void 0?void 0:(o=n.target)===null||o===void 0?void 0:o.fullyQualifiedName)===t.fullyQualifiedName});return o?this.getMDCColumnWidthFromProperty(o,e,n):0},getMDCColumnWidthFromProperty:function(e,i){var o,l,a;let r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;const s=Object.assign({gap:0,truncateLabel:!r,excludeProperties:[]},(o=e.visualSettings)===null||o===void 0?void 0:o.widthCalculation);let u;if((l=e.propertyInfos)!==null&&l!==void 0&&l.length){u=e.propertyInfos.map(t=>{var e;const n=i.find(e=>e.name===t);return n===null||n===void 0?void 0:(e=n.typeConfig)===null||e===void 0?void 0:e.typeInstance}).filter(t=>t)}else if(e!==null&&e!==void 0&&(a=e.typeConfig)!==null&&a!==void 0&&a.typeInstance){u=[e===null||e===void 0?void 0:e.typeConfig.typeInstance]}const d=u?n.calcColumnWidth(u,e.label,s):null;if(!d){t.error(`Cannot compute the column width for property: ${e.name}`)}return d?parseFloat(d.replace("Rem","")):0},_getPropertyHelperCache:function(t){return this.propertyHelper&&this.propertyHelper[t]},_setPropertyHelperCache:function(t,e){this.propertyHelper=Object.assign({},this.propertyHelper);this.propertyHelper[t]=e},getWidthForDataFieldForAnnotation:function(t,e,i){var n;let o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;const l=t===null||t===void 0?void 0:(n=t.Target)===null||n===void 0?void 0:n.$target;let r=0,s=0;if(l!==null&&l!==void 0&&l.Visualization){switch(l.Visualization){case"UI.VisualizationType/Rating":const t=l.TargetValue;r=parseInt(t,10)*1.375;break;case"UI.VisualizationType/Progress":default:r=5}const e=l?l.label:t.Label||"";s=o&&e?a.getButtonWidth(e):0}else if(i&&e&&(l===null||l===void 0?void 0:l.$Type)==="com.sap.vocabularies.Communication.v1.ContactType"){r=this.getMDCColumnWidthFromDataField(l.fn.$target,e,i,false)}return{labelWidth:s,propertyWidth:r}},getWidthForDataField:function(e,i,n,o){var r,s,u,d;const p=(r=e.Value)===null||r===void 0?void 0:r.$target,h=p===null||p===void 0?void 0:(s=p.annotations)===null||s===void 0?void 0:(u=s.Common)===null||u===void 0?void 0:u.Text,c=l((d=e.Value)===null||d===void 0?void 0:d.$target);let f=0,v=0;if(p){switch(c){case"Description":f=this.getMDCColumnWidthFromDataField(h.$target,n,o,false)-1;break;case"DescriptionValue":case"ValueDescription":case"Value":default:f=this.getMDCColumnWidthFromDataField(p,n,o,false)-1}const t=e.Label?e.Label:p.label;v=i&&t?a.getButtonWidth(t):0}else{t.error(`Cannot compute width for type object: ${e.$Type}`)}return{labelWidth:v,propertyWidth:f}},_getPropertiesByPath:function(t,e){return t.find(function(t){return t.path===e})},exit:function(){this.nbCalls--;if(this.nbCalls===0){this.oBtn.destroy();this.oBtn=null}}};return a},false);
//# sourceMappingURL=TableSizeHelper.js.map