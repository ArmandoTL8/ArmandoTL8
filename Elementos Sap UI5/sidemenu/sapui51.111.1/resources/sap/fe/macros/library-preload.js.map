{"version":3,"file":"library-preload.js","sections":[{"offset":{"line":1,"column":0},"map":{"version":3,"names":["ValueColor","mLibrary","CommonHelper","getPathToKey","oCtx","getObject","isVisible","target","oInterface","oModel","context","getModel","sPropertyPath","getPath","oAnnotations","hidden","$Path","isDialog","oActionContext","isCritical","oAction","Array","isArray","$Parameter","length","undefined","getParameterEditMode","fieldControl","immutable","computed","sEditMode","EditMode","Editable","ReadOnly","$EnumMember","Disabled","getMetaPath","isDesktop","system","desktop","getTargetCollection","oContext","navCollection","sPath","getMetadata","getName","getMetaModel","aParts","split","filter","sPart","entitySet","navigationCollection","slice","join","isPropertyFilterable","oDataField","sPropertyLocationPath","getLocationForPropertyPath","sProperty","replace","$Type","CommonUtils","iLength","sCollectionPath","lastIndexOf","indexOf","gotoActionParameter","sPropertyName","getParameterPath","getEntitySetName","oMetaModel","sEntityType","oEntityContainer","key","getActionPath","bReturnOnlyPath","sActionName","bCheckStaticValue","sContextPath","sEntityTypeName","sEntityName","sBindingParameter","getNavigationContext","ODataModelAnnotationHelper","getNavigationPath","bKeepProperty","bStartsWithEntityType","startsWith","part","shift","pop","getActionContext","getPathToBoundActionOverload","addSingleQuotes","sValue","bEscape","escapeSingleQuotes","generateFunction","sFuncName","sParams","i","sFunction","getHeaderDataPointLinkVisibility","bLink","bFieldVisibility","sVisibilityExp","objectToString","oParams","iNumberOfKeys","Object","keys","sKey","removeEscapeCharacters","sExpression","stringifyObject","sStringified","oObject","JSON","parse","oUI5Object","ui5object","assign","stringify","sType","Log","error","Error","stringifyCustomData","vData","Context","parseCustomData","hasOwnProperty","getContextPath","oValue","getSortConditions","oPresentationVariant","sPresentationVariantPath","_isPresentationVariantAnnotation","SortOrder","aSortConditions","sorters","sEntityPath","forEach","oCondition","oSortProperty","oSorter","DynamicProperty","$AnnotationPath","Name","Property","$PropertyPath","name","descending","Descending","push","sAnnotationPath","createPresentationPathContext","oPresentationContext","aPaths","createBindingContext","getPressHandlerForDataFieldForIBN","sContext","bNavigateWithConfirmationDialog","mNavigationParameters","navigationContexts","RequiresContext","Inline","applicableContexts","SemanticObject","Action","notApplicableContexts","label","Label","Mapping","semanticObjectMapping","getEntitySet","ModelHelper","getEntitySetPath","handleVisibilityOfMenuActions","sVisibleValue","combinedConditions","getCriticalityCalculationBinding","sImprovementDirection","sDeviationLow","sToleranceLow","sAcceptanceLow","sAcceptanceHigh","sToleranceHigh","sDeviationHigh","sCriticalityExpression","Neutral","Infinity","Good","Critical","warning","_getCriticalityFromEnum","sCriticality","sIndicator","getValueCriticality","sDimension","aValueCriticality","sResult","aValues","oVC","Value","Criticality","getMeasureAttributeIndex","iMeasure","oChartAnnotations","aMeasures","sMeasurePropertyPath","Measures","DynamicMeasures","bMeasureAttributeExists","aMeasureAttributes","MeasureAttributes","iMeasureAttribute","fnCheckMeasure","sMeasurePath","oMeasureAttribute","index","Measure","DynamicMeasure","some","bind","getMeasureAttribute","sChartAnnotationPath","requestObject","then","sMeasureAttributePath","DataPoint","getMeasureAttributeForMeasure","substring","isDraftParentEntityForContainment","oTargetCollectionContainsTarget","oTableMetadata","parentEntitySet","sParentEntitySetPath","oDraftRoot","oDraftNode","getDataFromTemplate","dataElement","splitPath","dataKey","connectedDataPath","connectedObject","template","Template","splitTemp","tempArray","trim","Data","notLastIndex","element","isLastIndex","templateInfo","getDelimiter","setMetaModel","getParameters","oParameterInfo","getParameterInfo","parameterProperties","buildActionWrapper","oThis","aParams","ref","handlerModule","handlerMethod","id","oAdditionalParams","contexts","compileExpression","fn","getHiddenPathExpression","dataFieldAnnotations","requiresIContext"],"sourceRoot":"","sources":["CommonHelper.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport { compileExpression, fn, ref } from \"sap/fe/core/helpers/BindingToolkit\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport mLibrary from \"sap/m/library\";\nimport { system } from \"sap/ui/Device\";\nimport EditMode from \"sap/ui/mdc/enum/EditMode\";\nimport Context from \"sap/ui/model/Context\";\nimport ODataModelAnnotationHelper from \"sap/ui/model/odata/v4/AnnotationHelper\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\n\nconst ValueColor = mLibrary.ValueColor;\nconst CommonHelper = {\n\tgetPathToKey: function (oCtx: any) {\n\t\treturn oCtx.getObject();\n\t},\n\n\t/**\n\t * Determines if a field is visible.\n\t *\n\t * @param target Target instance\n\t * @param oInterface Interface instance\n\t * @returns Returns true, false, or expression with path\n\t */\n\tisVisible: function (target: object, oInterface: any) {\n\t\tconst oModel = oInterface.context.getModel(),\n\t\t\tsPropertyPath = oInterface.context.getPath(),\n\t\t\toAnnotations = oModel.getObject(`${sPropertyPath}@`),\n\t\t\thidden = oAnnotations[\"@com.sap.vocabularies.UI.v1.Hidden\"];\n\n\t\treturn typeof hidden === \"object\" ? \"{= !${\" + hidden.$Path + \"} }\" : !hidden;\n\t},\n\n\t/**\n\t * Determine if the action opens up a dialog.\n\t *\n\t * @param oActionContext\n\t * @param oInterface\n\t * @returns `Dialog` | `None` if a dialog is needed\n\t */\n\tisDialog: function (oActionContext: any, oInterface: any) {\n\t\tconst oModel = oInterface.context.getModel(),\n\t\t\tsPropertyPath = oInterface.context.getPath(),\n\t\t\tisCritical = oModel.getObject(`${sPropertyPath}/@$ui5.overload@com.sap.vocabularies.Common.v1.IsActionCritical`);\n\t\tif (isCritical) {\n\t\t\treturn \"Dialog\";\n\t\t} else if (oActionContext) {\n\t\t\tconst oAction = Array.isArray(oActionContext) ? oActionContext[0] : oActionContext;\n\t\t\tif (oAction.$Parameter && oAction.$Parameter.length > 1) {\n\t\t\t\treturn \"Dialog\";\n\t\t\t} else {\n\t\t\t\treturn \"None\";\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t},\n\t/**\n\t * Determine if field is editable.\n\t *\n\t * @param target Target instance\n\t * @param oInterface Interface instance\n\t * @returns A Binding Expression to determine if a field should be editable or not.\n\t */\n\tgetParameterEditMode: function (target: object, oInterface: any) {\n\t\tconst oModel = oInterface.context.getModel(),\n\t\t\tsPropertyPath = oInterface.context.getPath(),\n\t\t\toAnnotations = oModel.getObject(`${sPropertyPath}@`),\n\t\t\tfieldControl = oAnnotations[\"@com.sap.vocabularies.Common.v1.FieldControl\"],\n\t\t\timmutable = oAnnotations[\"@Org.OData.Core.V1.Immutable\"],\n\t\t\tcomputed = oAnnotations[\"@Org.OData.Core.V1.Computed\"];\n\n\t\tlet sEditMode: EditMode | string = EditMode.Editable;\n\n\t\tif (immutable || computed) {\n\t\t\tsEditMode = EditMode.ReadOnly;\n\t\t} else if (fieldControl) {\n\t\t\tif (fieldControl.$EnumMember) {\n\t\t\t\tif (fieldControl.$EnumMember === \"com.sap.vocabularies.Common.v1.FieldControlType/ReadOnly\") {\n\t\t\t\t\tsEditMode = EditMode.ReadOnly;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tfieldControl.$EnumMember === \"com.sap.vocabularies.Common.v1.FieldControlType/Inapplicable\" ||\n\t\t\t\t\tfieldControl.$EnumMember === \"com.sap.vocabularies.Common.v1.FieldControlType/Hidden\"\n\t\t\t\t) {\n\t\t\t\t\tsEditMode = EditMode.Disabled;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (fieldControl.$Path) {\n\t\t\t\tsEditMode =\n\t\t\t\t\t\"{= %{\" +\n\t\t\t\t\tfieldControl.$Path +\n\t\t\t\t\t\"} < 3 ? (%{\" +\n\t\t\t\t\tfieldControl.$Path +\n\t\t\t\t\t\"} === 0 ? '\" +\n\t\t\t\t\tEditMode.Disabled +\n\t\t\t\t\t\"' : '\" +\n\t\t\t\t\tEditMode.ReadOnly +\n\t\t\t\t\t\"') : '\" +\n\t\t\t\t\tEditMode.Editable +\n\t\t\t\t\t\"'}\";\n\t\t\t}\n\t\t}\n\n\t\treturn sEditMode;\n\t},\n\t/**\n\t * Get the complete metapath to the target.\n\t *\n\t * @param target\n\t * @param oInterface\n\t * @returns The metapath\n\t */\n\tgetMetaPath: function (target: any, oInterface: any) {\n\t\treturn (oInterface && oInterface.context && oInterface.context.getPath()) || undefined;\n\t},\n\tisDesktop: function () {\n\t\treturn system.desktop === true;\n\t},\n\tgetTargetCollection: function (oContext: any, navCollection?: any) {\n\t\tlet sPath = oContext.getPath();\n\t\tif (\n\t\t\toContext.getMetadata().getName() === \"sap.ui.model.Context\" &&\n\t\t\t(oContext.getObject(\"$kind\") === \"EntitySet\" || oContext.getObject(\"$ContainsTarget\") === true)\n\t\t) {\n\t\t\treturn sPath;\n\t\t}\n\t\tif (oContext.getModel) {\n\t\t\tsPath =\n\t\t\t\t(oContext.getModel().getMetaPath && oContext.getModel().getMetaPath(sPath)) ||\n\t\t\t\toContext.getModel().getMetaModel().getMetaPath(sPath);\n\t\t}\n\t\t//Supporting sPath of any format, either '/<entitySet>/<navigationCollection>' <OR> '/<entitySet>/$Type/<navigationCollection>'\n\t\tconst aParts = sPath.split(\"/\").filter(function (sPart: any) {\n\t\t\treturn sPart && sPart != \"$Type\";\n\t\t}); //filter out empty strings and parts referring to '$Type'\n\t\tconst entitySet = `/${aParts[0]}`;\n\t\tif (aParts.length === 1) {\n\t\t\treturn entitySet;\n\t\t}\n\t\tconst navigationCollection = navCollection === undefined ? aParts.slice(1).join(\"/$NavigationPropertyBinding/\") : navCollection;\n\t\treturn `${entitySet}/$NavigationPropertyBinding/${navigationCollection}`; // used in gotoTargetEntitySet method in the same file\n\t},\n\n\tisPropertyFilterable: function (context: Context, oDataField?: any) {\n\t\tconst oModel = context.getModel() as ODataMetaModel,\n\t\t\tsPropertyPath = context.getPath(),\n\t\t\t// LoacationPath would be the prefix of sPropertyPath, example: sPropertyPath = '/Customer/Set/Name' -> sPropertyLocationPath = '/Customer/Set'\n\t\t\tsPropertyLocationPath = CommonHelper.getLocationForPropertyPath(oModel, sPropertyPath),\n\t\t\tsProperty = sPropertyPath.replace(`${sPropertyLocationPath}/`, \"\");\n\n\t\tif (\n\t\t\toDataField &&\n\t\t\t(oDataField.$Type === \"com.sap.vocabularies.UI.v1.DataFieldForAction\" ||\n\t\t\t\toDataField.$Type === \"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation\")\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn CommonUtils.isPropertyFilterable(oModel, sPropertyLocationPath, sProperty);\n\t},\n\n\tgetLocationForPropertyPath: function (oModel: any, sPropertyPath: any) {\n\t\tlet iLength;\n\t\tlet sCollectionPath = sPropertyPath.slice(0, sPropertyPath.lastIndexOf(\"/\"));\n\t\tif (oModel.getObject(`${sCollectionPath}/$kind`) === \"EntityContainer\") {\n\t\t\tiLength = sCollectionPath.length + 1;\n\t\t\tsCollectionPath = sPropertyPath.slice(iLength, sPropertyPath.indexOf(\"/\", iLength));\n\t\t}\n\t\treturn sCollectionPath;\n\t},\n\tgotoActionParameter: function (oContext: any) {\n\t\tconst sPath = oContext.getPath(),\n\t\t\tsPropertyName = oContext.getObject(`${sPath}/$Name`);\n\n\t\treturn CommonUtils.getParameterPath(sPath, sPropertyName);\n\t},\n\t/**\n\t * Returns the entity set name from the entity type name.\n\t *\n\t * @param oMetaModel OData v4 metamodel instance\n\t * @param sEntityType EntityType of the actiom\n\t * @returns The EntitySet of the bound action\n\t * @private\n\t * @ui5-restricted\n\t */\n\tgetEntitySetName: function (oMetaModel: ODataMetaModel, sEntityType: string) {\n\t\tconst oEntityContainer = oMetaModel.getObject(\"/\");\n\t\tfor (const key in oEntityContainer) {\n\t\t\tif (typeof oEntityContainer[key] === \"object\" && oEntityContainer[key].$Type === sEntityType) {\n\t\t\t\treturn key;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t},\n\t/**\n\t * Returns the metamodel path correctly for bound actions if used with bReturnOnlyPath as true,\n\t * else returns an object which has 3 properties related to the action. They are the entity set name,\n\t * the $Path value of the OperationAvailable annotation and the binding parameter name. If\n\t * bCheckStaticValue is true, returns the static value of OperationAvailable annotation, if present.\n\t * e.g. for bound action someNameSpace.SomeBoundAction\n\t * of entity set SomeEntitySet, the string \"/SomeEntitySet/someNameSpace.SomeBoundAction\" is returned.\n\t *\n\t * @param oAction The context object of the action\n\t * @param bReturnOnlyPath If false, additional info is returned along with metamodel path to the bound action\n\t * @param sActionName The name of the bound action of the form someNameSpace.SomeBoundAction\n\t * @param bCheckStaticValue If true, the static value of OperationAvailable is returned, if present\n\t * @returns The string or object as specified by bReturnOnlyPath\n\t * @private\n\t * @ui5-restricted\n\t */\n\tgetActionPath: function (oAction: any, bReturnOnlyPath: boolean, sActionName?: string, bCheckStaticValue?: boolean) {\n\t\tlet sContextPath = oAction.getPath().split(\"/@\")[0];\n\n\t\tsActionName = !sActionName ? oAction.getObject(oAction.getPath()) : sActionName;\n\n\t\tif (sActionName && sActionName.indexOf(\"(\") > -1) {\n\t\t\t// action bound to another entity type\n\t\t\tsActionName = sActionName.split(\"(\")[0];\n\t\t} else if (oAction.getObject(sContextPath)) {\n\t\t\t// TODO: this logic sounds wrong, to be corrected\n\t\t\tconst sEntityTypeName = oAction.getObject(sContextPath).$Type;\n\t\t\tconst sEntityName = this.getEntitySetName(oAction.getModel(), sEntityTypeName);\n\t\t\tif (sEntityName) {\n\t\t\t\tsContextPath = `/${sEntityName}`;\n\t\t\t}\n\t\t} else {\n\t\t\treturn sContextPath;\n\t\t}\n\n\t\tif (bCheckStaticValue) {\n\t\t\treturn oAction.getObject(`${sContextPath}/${sActionName}@Org.OData.Core.V1.OperationAvailable`);\n\t\t}\n\t\tif (bReturnOnlyPath) {\n\t\t\treturn `${sContextPath}/${sActionName}`;\n\t\t} else {\n\t\t\treturn {\n\t\t\t\tsContextPath: sContextPath,\n\t\t\t\tsProperty: oAction.getObject(`${sContextPath}/${sActionName}@Org.OData.Core.V1.OperationAvailable/$Path`),\n\t\t\t\tsBindingParameter: oAction.getObject(`${sContextPath}/${sActionName}/@$ui5.overload/0/$Parameter/0/$Name`)\n\t\t\t};\n\t\t}\n\t},\n\n\tgetNavigationContext: function (oContext: any) {\n\t\treturn ODataModelAnnotationHelper.getNavigationPath(oContext.getPath());\n\t},\n\n\t/**\n\t * Returns the path without the entity type (potentially first) and property (last) part (optional).\n\t * The result can be an empty string if it is a simple direct property.\n\t *\n\t * If and only if the given property path starts with a slash (/), it is considered that the entity type\n\t * is part of the path and will be stripped away.\n\t *\n\t * @param sPropertyPath\n\t * @param bKeepProperty\n\t * @returns The navigation path\n\t */\n\tgetNavigationPath: function (sPropertyPath: any, bKeepProperty?: boolean) {\n\t\tconst bStartsWithEntityType = sPropertyPath.startsWith(\"/\");\n\t\tconst aParts = sPropertyPath.split(\"/\").filter(function (part: any) {\n\t\t\treturn !!part;\n\t\t});\n\t\tif (bStartsWithEntityType) {\n\t\t\taParts.shift();\n\t\t}\n\t\tif (!bKeepProperty) {\n\t\t\taParts.pop();\n\t\t}\n\t\treturn aParts.join(\"/\");\n\t},\n\n\t/**\n\t * Returns the correct metamodel path for bound actions.\n\t *\n\t * Since this method is called irrespective of the action type, this will be applied to unbound actions.\n\t * In such a case, if an incorrect path is returned, it is ignored during templating.\n\t *\n\t * Example: for the bound action someNameSpace.SomeBoundAction of entity set SomeEntitySet,\n\t * the string \"/SomeEntitySet/someNameSpace.SomeBoundAction\" is returned.\n\t *\n\t * @function\n\t * @static\n\t * @name sap.fe.macros.CommonHelper.getActionContext\n\t * @memberof sap.fe.macros.CommonHelper\n\t * @param oAction Context object for the action\n\t * @returns Correct metamodel path for bound and incorrect path for unbound actions\n\t * @private\n\t * @ui5-restricted\n\t */\n\tgetActionContext: function (oAction: object) {\n\t\treturn CommonHelper.getActionPath(oAction, true);\n\t},\n\t/**\n\t * Returns the metamodel path correctly for overloaded bound actions. For unbound actions,\n\t * the incorrect path is returned, but ignored during templating.\n\t * e.g. for bound action someNameSpace.SomeBoundAction of entity set SomeEntitySet,\n\t * the string \"/SomeEntitySet/someNameSpace.SomeBoundAction/@$ui5.overload/0\" is returned.\n\t *\n\t * @function\n\t * @static\n\t * @name sap.fe.macros.CommonHelper.getPathToBoundActionOverload\n\t * @memberof sap.fe.macros.CommonHelper\n\t * @param oAction The context object for the action\n\t * @returns The correct metamodel path for bound action overload and incorrect path for unbound actions\n\t * @private\n\t * @ui5-restricted\n\t */\n\tgetPathToBoundActionOverload: function (oAction: object) {\n\t\tconst sPath = CommonHelper.getActionPath(oAction, true);\n\t\treturn `${sPath}/@$ui5.overload/0`;\n\t},\n\n\t/**\n\t * Returns the string with single quotes.\n\t *\n\t * @function\n\t * @memberof sap.fe.macros.CommonHelper\n\t * @param sValue Some string that needs to be converted into single quotes\n\t * @param [bEscape] Should the string be escaped beforehand\n\t * @returns - String with single quotes\n\t */\n\taddSingleQuotes: function (sValue: string, bEscape?: boolean) {\n\t\tif (bEscape && sValue) {\n\t\t\tsValue = this.escapeSingleQuotes(sValue);\n\t\t}\n\t\treturn `'${sValue}'`;\n\t},\n\n\t/**\n\t * Returns the string with escaped single quotes.\n\t *\n\t * @function\n\t * @memberof sap.fe.macros.CommonHelper\n\t * @param sValue Some string that needs escaping of single quotes\n\t * @returns - String with escaped single quotes\n\t */\n\tescapeSingleQuotes: function (sValue: string) {\n\t\treturn sValue.replace(/[']/g, \"\\\\'\");\n\t},\n\n\t/**\n\t * Returns the function string\n\t * The first argument of generateFunction is name of the generated function string.\n\t * Remaining arguments of generateFunction are arguments of the newly generated function string.\n\t *\n\t * @function\n\t * @memberof sap.fe.macros.CommonHelper\n\t * @param sFuncName Some string for the function name\n\t * @param args The remaining arguments\n\t * @returns - Function string depends on arguments passed\n\t */\n\tgenerateFunction: function (sFuncName: string, ...args: string[]) {\n\t\tlet sParams = \"\";\n\t\tfor (let i = 0; i < args.length; i++) {\n\t\t\tsParams += args[i];\n\t\t\tif (i < args.length - 1) {\n\t\t\t\tsParams += \", \";\n\t\t\t}\n\t\t}\n\n\t\tlet sFunction = `${sFuncName}()`;\n\t\tif (sParams) {\n\t\t\tsFunction = `${sFuncName}(${sParams})`;\n\t\t}\n\t\treturn sFunction;\n\t},\n\t/*\n\t * Returns the visibility expression for datapoint title/link\n\t *\n\t * @function\n\t * @param {string} [sPath] annotation path of data point or Microchart\n\t * @param {boolean} [bLink] true if link visibility is being determined, false if title visibility is being determined\n\t * @param {boolean} [bFieldVisibility] true if field is vsiible, false otherwise\n\t * @returns  {string} sVisibilityExp Used to get the  visibility binding for DataPoints title in the Header.\n\t *\n\t */\n\n\tgetHeaderDataPointLinkVisibility: function (sPath: any, bLink: any, bFieldVisibility: any) {\n\t\tlet sVisibilityExp;\n\t\tif (bFieldVisibility) {\n\t\t\tsVisibilityExp = bLink\n\t\t\t\t? \"{= ${internal>isHeaderDPLinkVisible/\" + sPath + \"} === true && \" + bFieldVisibility + \"}\"\n\t\t\t\t: \"{= ${internal>isHeaderDPLinkVisible/\" + sPath + \"} !== true && \" + bFieldVisibility + \"}\";\n\t\t} else {\n\t\t\tsVisibilityExp = bLink\n\t\t\t\t? \"{= ${internal>isHeaderDPLinkVisible/\" + sPath + \"} === true}\"\n\t\t\t\t: \"{= ${internal>isHeaderDPLinkVisible/\" + sPath + \"} !== true}\";\n\t\t}\n\t\treturn sVisibilityExp;\n\t},\n\n\t/**\n\t * Converts object to string(different from JSON.stringify or.toString).\n\t *\n\t * @function\n\t * @memberof sap.fe.macros.CommonHelper\n\t * @param oParams Some object\n\t * @returns - Object string\n\t */\n\tobjectToString: function (oParams: any) {\n\t\tlet iNumberOfKeys = Object.keys(oParams).length,\n\t\t\tsParams = \"\";\n\n\t\tfor (const sKey in oParams) {\n\t\t\tlet sValue = oParams[sKey];\n\t\t\tif (sValue && typeof sValue === \"object\") {\n\t\t\t\tsValue = this.objectToString(sValue);\n\t\t\t}\n\t\t\tsParams += `${sKey}: ${sValue}`;\n\t\t\tif (iNumberOfKeys > 1) {\n\t\t\t\t--iNumberOfKeys;\n\t\t\t\tsParams += \", \";\n\t\t\t}\n\t\t}\n\n\t\treturn `{ ${sParams}}`;\n\t},\n\n\t/**\n\t * Removes escape characters (\\) from an expression.\n\t *\n\t * @function\n\t * @memberof sap.fe.macros.CommonHelper\n\t * @param sExpression An expression with escape characters\n\t * @returns Expression string without escape characters or undefined\n\t */\n\tremoveEscapeCharacters: function (sExpression: string) {\n\t\treturn sExpression ? sExpression.replace(/\\\\?\\\\([{}])/g, \"$1\") : undefined;\n\t},\n\n\t/**\n\t * Makes updates to a stringified object so that it works properly in a template by adding ui5Object:true.\n\t *\n\t * @param sStringified\n\t * @returns The updated string representation of the object\n\t */\n\tstringifyObject: function (sStringified: string) {\n\t\tif (!sStringified) {\n\t\t\treturn undefined;\n\t\t} else {\n\t\t\tconst oObject = JSON.parse(sStringified);\n\t\t\tif (typeof oObject === \"object\" && !Array.isArray(oObject)) {\n\t\t\t\tconst oUI5Object = {\n\t\t\t\t\tui5object: true\n\t\t\t\t};\n\t\t\t\tObject.assign(oUI5Object, oObject);\n\t\t\t\treturn JSON.stringify(oUI5Object);\n\t\t\t} else {\n\t\t\t\tconst sType = Array.isArray(oObject) ? \"Array\" : typeof oObject;\n\t\t\t\tLog.error(`Unexpected object type in stringifyObject (${sType}) - only works with object`);\n\t\t\t\tthrow new Error(\"stringifyObject only works with objects!\");\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Create a string representation of the given data, taking care that it is not treated as a binding expression.\n\t *\n\t * @param vData The data to stringify\n\t * @returns The string representation of the data.\n\t */\n\tstringifyCustomData: function (vData: object) {\n\t\tconst oObject: any = {\n\t\t\tui5object: true\n\t\t};\n\t\toObject[\"customData\"] = vData instanceof Context ? vData.getObject() : vData;\n\t\treturn JSON.stringify(oObject);\n\t},\n\n\t/**\n\t * Parses the given data, potentially unwraps the data.\n\t *\n\t * @param vData The data to parse\n\t * @returns The result of the data parsing\n\t */\n\tparseCustomData: function (vData: any) {\n\t\tvData = typeof vData === \"string\" ? JSON.parse(vData) : vData;\n\t\tif (vData && vData.hasOwnProperty(\"customData\")) {\n\t\t\treturn vData[\"customData\"];\n\t\t}\n\t\treturn vData;\n\t},\n\tgetContextPath: function (oValue: any, oInterface: any) {\n\t\tconst sPath = oInterface && oInterface.context && oInterface.context.getPath();\n\t\treturn sPath[sPath.length - 1] === \"/\" ? sPath.slice(0, -1) : sPath;\n\t},\n\t/**\n\t * Returns a stringified JSON object containing  Presentation Variant sort conditions.\n\t *\n\t * @param oContext\n\t * @param oPresentationVariant Presentation variant Annotation\n\t * @param sPresentationVariantPath\n\t * @returns Stringified JSON object\n\t */\n\tgetSortConditions: function (oContext: any, oPresentationVariant: any, sPresentationVariantPath: string) {\n\t\tif (\n\t\t\toPresentationVariant &&\n\t\t\tCommonHelper._isPresentationVariantAnnotation(sPresentationVariantPath) &&\n\t\t\toPresentationVariant.SortOrder\n\t\t) {\n\t\t\tconst aSortConditions: any = {\n\t\t\t\tsorters: []\n\t\t\t};\n\n\t\t\tconst sEntityPath = oContext.getPath(0).split(\"@\")[0];\n\t\t\toPresentationVariant.SortOrder.forEach(function (oCondition: any = {}) {\n\t\t\t\tlet oSortProperty: any = {};\n\t\t\t\tconst oSorter: any = {};\n\t\t\t\tif (oCondition.DynamicProperty) {\n\t\t\t\t\toSortProperty = oContext.getModel(0).getObject(sEntityPath + oCondition.DynamicProperty.$AnnotationPath)?.Name;\n\t\t\t\t} else if (oCondition.Property) {\n\t\t\t\t\toSortProperty = oCondition.Property.$PropertyPath;\n\t\t\t\t}\n\t\t\t\tif (oSortProperty) {\n\t\t\t\t\toSorter.name = oSortProperty;\n\t\t\t\t\toSorter.descending = !!oCondition.Descending;\n\t\t\t\t\taSortConditions.sorters.push(oSorter);\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error(\"Please define the right path to the sort property\");\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn JSON.stringify(aSortConditions);\n\t\t}\n\t\treturn undefined;\n\t},\n\t_isPresentationVariantAnnotation: function (sAnnotationPath: string) {\n\t\treturn (\n\t\t\tsAnnotationPath.indexOf(\"@com.sap.vocabularies.UI.v1.PresentationVariant\") > -1 ||\n\t\t\tsAnnotationPath.indexOf(\"@com.sap.vocabularies.UI.v1.SelectionPresentationVariant\") > -1\n\t\t);\n\t},\n\tcreatePresentationPathContext: function (oPresentationContext: any) {\n\t\tconst aPaths = oPresentationContext.sPath.split(\"@\") || [];\n\t\tconst oModel = oPresentationContext.getModel();\n\t\tif (aPaths.length && aPaths[aPaths.length - 1].indexOf(\"com.sap.vocabularies.UI.v1.SelectionPresentationVariant\") > -1) {\n\t\t\tconst sPath = oPresentationContext.sPath.split(\"/PresentationVariant\")[0];\n\t\t\treturn oModel.createBindingContext(`${sPath}@sapui.name`);\n\t\t}\n\t\treturn oModel.createBindingContext(`${oPresentationContext.sPath}@sapui.name`);\n\t},\n\tgetPressHandlerForDataFieldForIBN: function (oDataField: any, sContext: string, bNavigateWithConfirmationDialog: boolean) {\n\t\tconst mNavigationParameters: any = {\n\t\t\tnavigationContexts: sContext ? sContext : \"${$source>/}.getBindingContext()\"\n\t\t};\n\t\tif (oDataField.RequiresContext && !oDataField.Inline && bNavigateWithConfirmationDialog) {\n\t\t\tmNavigationParameters.applicableContexts =\n\t\t\t\t\"${internal>ibn/\" + oDataField.SemanticObject + \"-\" + oDataField.Action + \"/aApplicable/}\";\n\t\t\tmNavigationParameters.notApplicableContexts =\n\t\t\t\t\"${internal>ibn/\" + oDataField.SemanticObject + \"-\" + oDataField.Action + \"/aNotApplicable/}\";\n\t\t\tmNavigationParameters.label = this.addSingleQuotes(oDataField.Label, true);\n\t\t}\n\t\tif (oDataField.Mapping) {\n\t\t\tmNavigationParameters.semanticObjectMapping = this.addSingleQuotes(JSON.stringify(oDataField.Mapping));\n\t\t}\n\t\treturn this.generateFunction(\n\t\t\tbNavigateWithConfirmationDialog ? \"._intentBasedNavigation.navigateWithConfirmationDialog\" : \"._intentBasedNavigation.navigate\",\n\t\t\tthis.addSingleQuotes(oDataField.SemanticObject),\n\t\t\tthis.addSingleQuotes(oDataField.Action),\n\t\t\tthis.objectToString(mNavigationParameters)\n\t\t);\n\t},\n\tgetEntitySet: function (oContext: any) {\n\t\tconst sPath = oContext.getPath();\n\t\treturn ModelHelper.getEntitySetPath(sPath);\n\t},\n\n\t/**\n\t * Handles the visibility of form menu actions both in path based and static value scenarios.\n\t *\n\t * @function\n\t * @memberof sap.fe.macros.CommonHelper\n\t * @param sVisibleValue Either static boolean values or Array of path expressions for visibility of menu button.\n\t * @returns The binding expression determining the visibility of menu actions.\n\t */\n\thandleVisibilityOfMenuActions: function (sVisibleValue: any) {\n\t\tconst combinedConditions = [];\n\t\tif (Array.isArray(sVisibleValue)) {\n\t\t\tfor (let i = 0; i < sVisibleValue.length; i++) {\n\t\t\t\tif (sVisibleValue[i].indexOf(\"{\") > -1 && sVisibleValue[i].indexOf(\"{=\") === -1) {\n\t\t\t\t\tsVisibleValue[i] = \"{=\" + sVisibleValue[i] + \"}\";\n\t\t\t\t}\n\t\t\t\tif (sVisibleValue[i].split(\"{=\").length > 0) {\n\t\t\t\t\tsVisibleValue[i] = sVisibleValue[i].split(\"{=\")[1].slice(0, -1);\n\t\t\t\t}\n\t\t\t\tcombinedConditions.push(`(${sVisibleValue[i]})`);\n\t\t\t}\n\t\t}\n\t\treturn combinedConditions.length > 0 ? `{= ${combinedConditions.join(\" || \")}}` : sVisibleValue;\n\t},\n\t/**\n\t * Method to do the calculation of criticality in case CriticalityCalculation present in the annotation\n\t *\n\t * The calculation is done by comparing a value to the threshold values relevant for the specified improvement direction.\n\t * For improvement direction Target, the criticality is calculated using both low and high threshold values. It will be\n\t *\n\t * - Positive if the value is greater than or equal to AcceptanceRangeLowValue and lower than or equal to AcceptanceRangeHighValue\n\t * - Neutral if the value is greater than or equal to ToleranceRangeLowValue and lower than AcceptanceRangeLowValue OR greater than AcceptanceRangeHighValue and lower than or equal to ToleranceRangeHighValue\n\t * - Critical if the value is greater than or equal to DeviationRangeLowValue and lower than ToleranceRangeLowValue OR greater than ToleranceRangeHighValue and lower than or equal to DeviationRangeHighValue\n\t * - Negative if the value is lower than DeviationRangeLowValue or greater than DeviationRangeHighValue\n\t *\n\t * For improvement direction Minimize, the criticality is calculated using the high threshold values. It is\n\t * - Positive if the value is lower than or equal to AcceptanceRangeHighValue\n\t * - Neutral if the value is greater than AcceptanceRangeHighValue and lower than or equal to ToleranceRangeHighValue\n\t * - Critical if the value is greater than ToleranceRangeHighValue and lower than or equal to DeviationRangeHighValue\n\t * - Negative if the value is greater than DeviationRangeHighValue\n\t *\n\t * For improvement direction Maximize, the criticality is calculated using the low threshold values. It is\n\t *\n\t * - Positive if the value is greater than or equal to AcceptanceRangeLowValue\n\t * - Neutral if the value is less than AcceptanceRangeLowValue and greater than or equal to ToleranceRangeLowValue\n\t * - Critical if the value is lower than ToleranceRangeLowValue and greater than or equal to DeviationRangeLowValue\n\t * - Negative if the value is lower than DeviationRangeLowValue\n\t *\n\t * Thresholds are optional. For unassigned values, defaults are determined in this order:\n\t *\n\t * - For DeviationRange, an omitted LowValue translates into the smallest possible number (-INF), an omitted HighValue translates into the largest possible number (+INF)\n\t * - For ToleranceRange, an omitted LowValue will be initialized with DeviationRangeLowValue, an omitted HighValue will be initialized with DeviationRangeHighValue\n\t * - For AcceptanceRange, an omitted LowValue will be initialized with ToleranceRangeLowValue, an omitted HighValue will be initialized with ToleranceRangeHighValue.\n\t *\n\t * @param sImprovementDirection ImprovementDirection to be used for creating the criticality binding\n\t * @param sValue Value from Datapoint to be measured\n\t * @param sDeviationLow ExpressionBinding for Lower Deviation level\n\t * @param sToleranceLow ExpressionBinding for Lower Tolerance level\n\t * @param sAcceptanceLow ExpressionBinding for Lower Acceptance level\n\t * @param sAcceptanceHigh ExpressionBinding for Higher Acceptance level\n\t * @param sToleranceHigh ExpressionBinding for Higher Tolerance level\n\t * @param sDeviationHigh ExpressionBinding for Higher Deviation level\n\t * @returns Returns criticality calculation as expression binding\n\t */\n\tgetCriticalityCalculationBinding: function (\n\t\tsImprovementDirection: string,\n\t\tsValue: string,\n\t\tsDeviationLow: string | number,\n\t\tsToleranceLow: string | number,\n\t\tsAcceptanceLow: string | number,\n\t\tsAcceptanceHigh: string | number,\n\t\tsToleranceHigh: string | number,\n\t\tsDeviationHigh: string | number\n\t) {\n\t\tlet sCriticalityExpression: typeof ValueColor | string = ValueColor.Neutral; // Default Criticality State\n\n\t\tsValue = `%${sValue}`;\n\n\t\t// Setting Unassigned Values\n\t\tsDeviationLow = sDeviationLow || -Infinity;\n\t\tsToleranceLow = sToleranceLow || sDeviationLow;\n\t\tsAcceptanceLow = sAcceptanceLow || sToleranceLow;\n\t\tsDeviationHigh = sDeviationHigh || Infinity;\n\t\tsToleranceHigh = sToleranceHigh || sDeviationHigh;\n\t\tsAcceptanceHigh = sAcceptanceHigh || sToleranceHigh;\n\n\t\t// Dealing with Decimal and Path based bingdings\n\t\tsDeviationLow = sDeviationLow && (+sDeviationLow ? +sDeviationLow : `%${sDeviationLow}`);\n\t\tsToleranceLow = sToleranceLow && (+sToleranceLow ? +sToleranceLow : `%${sToleranceLow}`);\n\t\tsAcceptanceLow = sAcceptanceLow && (+sAcceptanceLow ? +sAcceptanceLow : `%${sAcceptanceLow}`);\n\t\tsAcceptanceHigh = sAcceptanceHigh && (+sAcceptanceHigh ? +sAcceptanceHigh : `%${sAcceptanceHigh}`);\n\t\tsToleranceHigh = sToleranceHigh && (+sToleranceHigh ? +sToleranceHigh : `%${sToleranceHigh}`);\n\t\tsDeviationHigh = sDeviationHigh && (+sDeviationHigh ? +sDeviationHigh : `%${sDeviationHigh}`);\n\n\t\t// Creating runtime expression binding from criticality calculation for Criticality State\n\t\tif (sImprovementDirection.indexOf(\"Minimize\") > -1) {\n\t\t\tsCriticalityExpression =\n\t\t\t\t\"{= \" +\n\t\t\t\tsValue +\n\t\t\t\t\" <= \" +\n\t\t\t\tsAcceptanceHigh +\n\t\t\t\t\" ? '\" +\n\t\t\t\tValueColor.Good +\n\t\t\t\t\"' : \" +\n\t\t\t\tsValue +\n\t\t\t\t\" <= \" +\n\t\t\t\tsToleranceHigh +\n\t\t\t\t\" ? '\" +\n\t\t\t\tValueColor.Neutral +\n\t\t\t\t\"' : \" +\n\t\t\t\t\"(\" +\n\t\t\t\tsDeviationHigh +\n\t\t\t\t\" && \" +\n\t\t\t\tsValue +\n\t\t\t\t\" <= \" +\n\t\t\t\tsDeviationHigh +\n\t\t\t\t\") ? '\" +\n\t\t\t\tValueColor.Critical +\n\t\t\t\t\"' : '\" +\n\t\t\t\tValueColor.Error +\n\t\t\t\t\"' }\";\n\t\t} else if (sImprovementDirection.indexOf(\"Maximize\") > -1) {\n\t\t\tsCriticalityExpression =\n\t\t\t\t\"{= \" +\n\t\t\t\tsValue +\n\t\t\t\t\" >= \" +\n\t\t\t\tsAcceptanceLow +\n\t\t\t\t\" ? '\" +\n\t\t\t\tValueColor.Good +\n\t\t\t\t\"' : \" +\n\t\t\t\tsValue +\n\t\t\t\t\" >= \" +\n\t\t\t\tsToleranceLow +\n\t\t\t\t\" ? '\" +\n\t\t\t\tValueColor.Neutral +\n\t\t\t\t\"' : \" +\n\t\t\t\t\"(\" +\n\t\t\t\tsDeviationLow +\n\t\t\t\t\" && \" +\n\t\t\t\tsValue +\n\t\t\t\t\" >= \" +\n\t\t\t\tsDeviationLow +\n\t\t\t\t\") ? '\" +\n\t\t\t\tValueColor.Critical +\n\t\t\t\t\"' : '\" +\n\t\t\t\tValueColor.Error +\n\t\t\t\t\"' }\";\n\t\t} else if (sImprovementDirection.indexOf(\"Target\") > -1) {\n\t\t\tsCriticalityExpression =\n\t\t\t\t\"{= (\" +\n\t\t\t\tsValue +\n\t\t\t\t\" <= \" +\n\t\t\t\tsAcceptanceHigh +\n\t\t\t\t\" && \" +\n\t\t\t\tsValue +\n\t\t\t\t\" >= \" +\n\t\t\t\tsAcceptanceLow +\n\t\t\t\t\") ? '\" +\n\t\t\t\tValueColor.Good +\n\t\t\t\t\"' : \" +\n\t\t\t\t\"((\" +\n\t\t\t\tsValue +\n\t\t\t\t\" >= \" +\n\t\t\t\tsToleranceLow +\n\t\t\t\t\" && \" +\n\t\t\t\tsValue +\n\t\t\t\t\" < \" +\n\t\t\t\tsAcceptanceLow +\n\t\t\t\t\") || (\" +\n\t\t\t\tsValue +\n\t\t\t\t\" > \" +\n\t\t\t\tsAcceptanceHigh +\n\t\t\t\t\" && \" +\n\t\t\t\tsValue +\n\t\t\t\t\" <= \" +\n\t\t\t\tsToleranceHigh +\n\t\t\t\t\")) ? '\" +\n\t\t\t\tValueColor.Neutral +\n\t\t\t\t\"' : \" +\n\t\t\t\t\"((\" +\n\t\t\t\tsDeviationLow +\n\t\t\t\t\" && (\" +\n\t\t\t\tsValue +\n\t\t\t\t\" >= \" +\n\t\t\t\tsDeviationLow +\n\t\t\t\t\") && (\" +\n\t\t\t\tsValue +\n\t\t\t\t\" < \" +\n\t\t\t\tsToleranceLow +\n\t\t\t\t\")) || ((\" +\n\t\t\t\tsValue +\n\t\t\t\t\" > \" +\n\t\t\t\tsToleranceHigh +\n\t\t\t\t\") && \" +\n\t\t\t\tsDeviationHigh +\n\t\t\t\t\" && (\" +\n\t\t\t\tsValue +\n\t\t\t\t\" <= \" +\n\t\t\t\tsDeviationHigh +\n\t\t\t\t\"))) ? '\" +\n\t\t\t\tValueColor.Critical +\n\t\t\t\t\"' : '\" +\n\t\t\t\tValueColor.Error +\n\t\t\t\t\"' }\";\n\t\t} else {\n\t\t\tLog.warning(\"Case not supported, returning the default Value Neutral\");\n\t\t}\n\n\t\treturn sCriticalityExpression;\n\t},\n\t/**\n\t * This function returns the criticality indicator from annotations if criticality is EnumMember.\n\t *\n\t * @param sCriticality Criticality provided in the annotations\n\t * @returns Return the indicator for criticality\n\t * @private\n\t */\n\t_getCriticalityFromEnum: function (sCriticality: string) {\n\t\tlet sIndicator;\n\t\tif (sCriticality === \"com.sap.vocabularies.UI.v1.CriticalityType/Negative\") {\n\t\t\tsIndicator = ValueColor.Error;\n\t\t} else if (sCriticality === \"com.sap.vocabularies.UI.v1.CriticalityType/Positive\") {\n\t\t\tsIndicator = ValueColor.Good;\n\t\t} else if (sCriticality === \"com.sap.vocabularies.UI.v1.CriticalityType/Critical\") {\n\t\t\tsIndicator = ValueColor.Critical;\n\t\t} else {\n\t\t\tsIndicator = ValueColor.Neutral;\n\t\t}\n\t\treturn sIndicator;\n\t},\n\tgetValueCriticality: function (sDimension: any, aValueCriticality: any) {\n\t\tlet sResult;\n\t\tconst aValues: any[] = [];\n\t\tif (aValueCriticality && aValueCriticality.length > 0) {\n\t\t\taValueCriticality.forEach(function (oVC: any) {\n\t\t\t\tif (oVC.Value && oVC.Criticality.$EnumMember) {\n\t\t\t\t\tconst sValue =\n\t\t\t\t\t\t\"${\" +\n\t\t\t\t\t\tsDimension +\n\t\t\t\t\t\t\"} === '\" +\n\t\t\t\t\t\toVC.Value +\n\t\t\t\t\t\t\"' ? '\" +\n\t\t\t\t\t\tCommonHelper._getCriticalityFromEnum(oVC.Criticality.$EnumMember) +\n\t\t\t\t\t\t\"'\";\n\t\t\t\t\taValues.push(sValue);\n\t\t\t\t}\n\t\t\t});\n\t\t\tsResult = aValues.length > 0 && aValues.join(\" : \") + \" : undefined\";\n\t\t}\n\t\treturn sResult ? \"{= \" + sResult + \" }\" : undefined;\n\t},\n\t/**\n\t * To fetch measure attribute index.\n\t *\n\t * @param iMeasure Chart Annotations\n\t * @param oChartAnnotations Chart Annotations\n\t * @returns MeasureAttribute index.\n\t * @private\n\t */\n\tgetMeasureAttributeIndex: function (iMeasure: any, oChartAnnotations: any) {\n\t\tlet aMeasures, sMeasurePropertyPath;\n\t\tif (oChartAnnotations?.Measures?.length > 0) {\n\t\t\taMeasures = oChartAnnotations.Measures;\n\t\t\tsMeasurePropertyPath = aMeasures[iMeasure].$PropertyPath;\n\t\t} else if (oChartAnnotations?.DynamicMeasures?.length > 0) {\n\t\t\taMeasures = oChartAnnotations.DynamicMeasures;\n\t\t\tsMeasurePropertyPath = aMeasures[iMeasure].$AnnotationPath;\n\t\t}\n\t\tlet bMeasureAttributeExists;\n\t\tconst aMeasureAttributes = oChartAnnotations.MeasureAttributes;\n\t\tlet iMeasureAttribute = -1;\n\t\tconst fnCheckMeasure = function (sMeasurePath: any, oMeasureAttribute: any, index: any) {\n\t\t\tif (oMeasureAttribute) {\n\t\t\t\tif (oMeasureAttribute.Measure && oMeasureAttribute.Measure.$PropertyPath === sMeasurePath) {\n\t\t\t\t\tiMeasureAttribute = index;\n\t\t\t\t\treturn true;\n\t\t\t\t} else if (oMeasureAttribute.DynamicMeasure && oMeasureAttribute.DynamicMeasure.$AnnotationPath === sMeasurePath) {\n\t\t\t\t\tiMeasureAttribute = index;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tif (aMeasureAttributes) {\n\t\t\tbMeasureAttributeExists = aMeasureAttributes.some(fnCheckMeasure.bind(null, sMeasurePropertyPath));\n\t\t}\n\t\treturn bMeasureAttributeExists && iMeasureAttribute > -1 && iMeasureAttribute;\n\t},\n\n\tgetMeasureAttribute: function (oContext: Context) {\n\t\tconst oMetaModel = oContext.getModel() as ODataMetaModel,\n\t\t\tsChartAnnotationPath = oContext.getPath();\n\t\treturn oMetaModel.requestObject(sChartAnnotationPath).then(function (oChartAnnotations: any) {\n\t\t\tconst aMeasureAttributes = oChartAnnotations.MeasureAttributes,\n\t\t\t\tiMeasureAttribute = CommonHelper.getMeasureAttributeIndex(0, oChartAnnotations);\n\t\t\tconst sMeasureAttributePath =\n\t\t\t\tiMeasureAttribute > -1 && aMeasureAttributes[iMeasureAttribute] && aMeasureAttributes[iMeasureAttribute].DataPoint\n\t\t\t\t\t? `${sChartAnnotationPath}/MeasureAttributes/${iMeasureAttribute}/`\n\t\t\t\t\t: undefined;\n\t\t\tif (sMeasureAttributePath === undefined) {\n\t\t\t\tLog.warning(\"DataPoint missing for the measure\");\n\t\t\t}\n\t\t\treturn sMeasureAttributePath ? `${sMeasureAttributePath}DataPoint/$AnnotationPath/` : sMeasureAttributePath;\n\t\t});\n\t},\n\t/**\n\t * This function returns the measureAttribute for the measure.\n\t *\n\t * @param oContext Context to the measure annotation\n\t * @returns Path to the measureAttribute of the measure\n\t */\n\tgetMeasureAttributeForMeasure: function (oContext: Context) {\n\t\tconst oMetaModel = oContext.getModel() as ODataMetaModel,\n\t\t\tsMeasurePath = oContext.getPath(),\n\t\t\tsChartAnnotationPath = sMeasurePath.substring(0, sMeasurePath.lastIndexOf(\"Measure\")),\n\t\t\tiMeasure = sMeasurePath.replace(/.*\\//, \"\");\n\n\t\treturn oMetaModel.requestObject(sChartAnnotationPath).then(function (oChartAnnotations: any) {\n\t\t\tconst aMeasureAttributes = oChartAnnotations.MeasureAttributes,\n\t\t\t\tiMeasureAttribute = CommonHelper.getMeasureAttributeIndex(iMeasure, oChartAnnotations);\n\t\t\tconst sMeasureAttributePath =\n\t\t\t\tiMeasureAttribute > -1 && aMeasureAttributes[iMeasureAttribute] && aMeasureAttributes[iMeasureAttribute].DataPoint\n\t\t\t\t\t? `${sChartAnnotationPath}MeasureAttributes/${iMeasureAttribute}/`\n\t\t\t\t\t: undefined;\n\t\t\tif (sMeasureAttributePath === undefined) {\n\t\t\t\tLog.warning(\"DataPoint missing for the measure\");\n\t\t\t}\n\t\t\treturn sMeasureAttributePath ? `${sMeasureAttributePath}DataPoint/$AnnotationPath/` : sMeasureAttributePath;\n\t\t});\n\t},\n\t/**\n\t * Method to determine if the contained navigation property has a draft root/node parent entitySet.\n\t *\n\t * @function\n\t * @name isDraftParentEntityForContainment\n\t * @param oTargetCollectionContainsTarget Target collection has ContainsTarget property\n\t * @param oTableMetadata Table metadata for which draft support shall be checked\n\t * @returns Returns true if draft\n\t */\n\tisDraftParentEntityForContainment: function (oTargetCollectionContainsTarget: object, oTableMetadata: any) {\n\t\tif (oTargetCollectionContainsTarget) {\n\t\t\tif (oTableMetadata && oTableMetadata.parentEntitySet && oTableMetadata.parentEntitySet.sPath) {\n\t\t\t\tconst sParentEntitySetPath = oTableMetadata.parentEntitySet.sPath;\n\t\t\t\tconst oDraftRoot = oTableMetadata.parentEntitySet.oModel.getObject(\n\t\t\t\t\t`${sParentEntitySetPath}@com.sap.vocabularies.Common.v1.DraftRoot`\n\t\t\t\t);\n\t\t\t\tconst oDraftNode = oTableMetadata.parentEntitySet.oModel.getObject(\n\t\t\t\t\t`${sParentEntitySetPath}@com.sap.vocabularies.Common.v1.DraftNode`\n\t\t\t\t);\n\t\t\t\tif (oDraftRoot || oDraftNode) {\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\t/**\n\t * Ensures the data is processed as defined in the template.\n\t * Since the property Data is of the type 'object', it may not be in the same order as required by the template.\n\t *\n\t * @function\n\t * @memberof sap.fe.macros.CommonHelper\n\t * @param dataElement The data that is currently being processed.\n\t * @returns The correct path according to the template.\n\t */\n\tgetDataFromTemplate: function (dataElement: Context) {\n\t\tconst splitPath = dataElement.getPath().split(\"/\");\n\t\tconst dataKey = splitPath[splitPath.length - 1];\n\t\tconst connectedDataPath = `/${splitPath.slice(1, -2).join(\"/\")}/@`;\n\t\tconst connectedObject = dataElement.getObject(connectedDataPath);\n\t\tconst template = connectedObject.Template;\n\t\tconst splitTemp = template.split(\"}\");\n\t\tconst tempArray = [];\n\t\tfor (let i = 0; i < splitTemp.length - 1; i++) {\n\t\t\tconst key = splitTemp[i].split(\"{\")[1].trim();\n\t\t\ttempArray.push(key);\n\t\t}\n\t\tObject.keys(connectedObject.Data).forEach(function (sKey: string) {\n\t\t\tif (sKey.startsWith(\"$\")) {\n\t\t\t\tdelete connectedObject.Data[sKey];\n\t\t\t}\n\t\t});\n\t\tconst index = Object.keys(connectedObject.Data).indexOf(dataKey);\n\t\treturn `/${splitPath.slice(1, -2).join(\"/\")}/Data/${tempArray[index]}`;\n\t},\n\n\t/**\n\t * Checks if the end of the template has been reached.\n\t *\n\t * @function\n\t * @memberof sap.fe.macros.CommonHelper\n\t * @param target The target of the connected fields.\n\t * @param element The element that is currently being processed.\n\t * @returns True or False (depending on the template index).\n\t */\n\tnotLastIndex: function (target: any, element: object) {\n\t\tconst template = target.Template;\n\t\tconst splitTemp = template.split(\"}\");\n\t\tconst tempArray: any[] = [];\n\t\tlet isLastIndex = false;\n\t\tfor (let i = 0; i < splitTemp.length - 1; i++) {\n\t\t\tconst dataKey = splitTemp[i].split(\"{\")[1].trim();\n\t\t\ttempArray.push(dataKey);\n\t\t}\n\n\t\ttempArray.forEach(function (templateInfo: any) {\n\t\t\tif (target.Data[templateInfo] === element && tempArray.indexOf(templateInfo) !== tempArray.length - 1) {\n\t\t\t\tisLastIndex = true;\n\t\t\t}\n\t\t});\n\t\treturn isLastIndex;\n\t},\n\n\t/**\n\t * Determines the delimiter from the template.\n\t *\n\t * @function\n\t * @memberof sap.fe.macros.CommonHelper\n\t * @param template The template string.\n\t * @returns The delimiter in the template string.\n\t */\n\tgetDelimiter: function (template: string) {\n\t\treturn template.split(\"}\")[1].split(\"{\")[0].trim();\n\t},\n\n\toMetaModel: undefined as any,\n\tsetMetaModel: function (oMetaModel: ODataMetaModel) {\n\t\tthis.oMetaModel = oMetaModel;\n\t},\n\n\tgetMetaModel: function (oContext?: any, oInterface?: any) {\n\t\tif (oContext) {\n\t\t\treturn oInterface.context.getModel();\n\t\t}\n\t\treturn this.oMetaModel;\n\t},\n\n\tgetParameters: function (oContext: any, oInterface: any) {\n\t\tif (oContext) {\n\t\t\tconst oMetaModel = oInterface.context.getModel();\n\t\t\tconst sPath = oInterface.context.getPath();\n\t\t\tconst oParameterInfo = CommonUtils.getParameterInfo(oMetaModel, sPath);\n\t\t\tif (oParameterInfo.parameterProperties) {\n\t\t\t\treturn Object.keys(oParameterInfo.parameterProperties);\n\t\t\t}\n\t\t}\n\t\treturn [];\n\t},\n\n\t/**\n\t * Build an expression calling an action handler via the FPM helper's actionWrapper function\n\t *\n\t * This function assumes that the 'FPM.actionWrapper()' function is available at runtime.\n\t *\n\t * @param oAction Action metadata\n\t * @param oAction.handlerModule Module containing the action handler method\n\t * @param oAction.handlerMethod Action handler method name\n\t * @param [oThis] `this` (if the function is called from a macro)\n\t * @param oThis.id The table's ID\n\t * @returns The action wrapper binding\texpression\n\t */\n\tbuildActionWrapper: function (oAction: { handlerModule: string; handlerMethod: string }, oThis: { id: string } | undefined) {\n\t\tconst aParams: any[] = [ref(\"$event\"), oAction.handlerModule, oAction.handlerMethod];\n\n\t\tif (oThis && oThis.id) {\n\t\t\tconst oAdditionalParams = {\n\t\t\t\tcontexts: ref(\"${internal>selectedContexts}\")\n\t\t\t};\n\t\t\taParams.push(oAdditionalParams);\n\t\t}\n\t\treturn compileExpression(fn(\"FPM.actionWrapper\", aParams));\n\t},\n\t/**\n\t * Returns the value whether or not the element should be visible depending on the Hidden annotation.\n\t * It is inverted as the UI elements have a visible property instead of an hidden one.\n\t *\n\t * @param dataFieldAnnotations The dataField Object\n\t * @returns A path or a boolean\n\t */\n\tgetHiddenPathExpression: function (dataFieldAnnotations: any) {\n\t\tif (dataFieldAnnotations[\"@com.sap.vocabularies.UI.v1.Hidden\"] !== null) {\n\t\t\tconst hidden = dataFieldAnnotations[\"@com.sap.vocabularies.UI.v1.Hidden\"];\n\t\t\treturn typeof hidden === \"object\" ? \"{= !${\" + hidden.$Path + \"} }\" : !hidden;\n\t\t}\n\t\treturn true;\n\t}\n};\n(CommonHelper.getSortConditions as any).requiresIContext = true;\n\nexport default CommonHelper;\n"],"mappings":"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"}},{"offset":{"line":851,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","CommonUtils","BindingToolkit","ModelHelper","mLibrary","Device","EditMode","Context","ODataModelAnnotationHelper","system","ref","fn","compileExpression","ValueColor","CommonHelper","getPathToKey","oCtx","getObject","isVisible","target","oInterface","oModel","context","getModel","sPropertyPath","getPath","oAnnotations","hidden","$Path","isDialog","oActionContext","isCritical","oAction","Array","isArray","$Parameter","length","undefined","getParameterEditMode","fieldControl","immutable","computed","sEditMode","Editable","ReadOnly","$EnumMember","Disabled","getMetaPath","isDesktop","desktop","getTargetCollection","oContext","navCollection","sPath","getMetadata","getName","getMetaModel","aParts","split","filter","sPart","entitySet","navigationCollection","slice","join","isPropertyFilterable","oDataField","sPropertyLocationPath","getLocationForPropertyPath","sProperty","replace","$Type","iLength","sCollectionPath","lastIndexOf","indexOf","gotoActionParameter","sPropertyName","getParameterPath","getEntitySetName","oMetaModel","sEntityType","oEntityContainer","key","getActionPath","bReturnOnlyPath","sActionName","bCheckStaticValue","sContextPath","sEntityTypeName","sEntityName","this","sBindingParameter","getNavigationContext","getNavigationPath","bKeepProperty","bStartsWithEntityType","startsWith","part","shift","pop","getActionContext","getPathToBoundActionOverload","addSingleQuotes","sValue","bEscape","escapeSingleQuotes","generateFunction","sFuncName","sParams","i","arguments","sFunction","getHeaderDataPointLinkVisibility","bLink","bFieldVisibility","sVisibilityExp","objectToString","oParams","iNumberOfKeys","Object","keys","sKey","removeEscapeCharacters","sExpression","stringifyObject","sStringified","oObject","JSON","parse","oUI5Object","ui5object","assign","stringify","sType","error","Error","stringifyCustomData","vData","parseCustomData","hasOwnProperty","getContextPath","oValue","getSortConditions","oPresentationVariant","sPresentationVariantPath","_isPresentationVariantAnnotation","SortOrder","aSortConditions","sorters","sEntityPath","forEach","oCondition","oSortProperty","oSorter","DynamicProperty","_oContext$getModel$ge","$AnnotationPath","Name","Property","$PropertyPath","name","descending","Descending","push","sAnnotationPath","createPresentationPathContext","oPresentationContext","aPaths","createBindingContext","getPressHandlerForDataFieldForIBN","sContext","bNavigateWithConfirmationDialog","mNavigationParameters","navigationContexts","RequiresContext","Inline","applicableContexts","SemanticObject","Action","notApplicableContexts","label","Label","Mapping","semanticObjectMapping","getEntitySet","getEntitySetPath","handleVisibilityOfMenuActions","sVisibleValue","combinedConditions","getCriticalityCalculationBinding","sImprovementDirection","sDeviationLow","sToleranceLow","sAcceptanceLow","sAcceptanceHigh","sToleranceHigh","sDeviationHigh","sCriticalityExpression","Neutral","Infinity","Good","Critical","warning","_getCriticalityFromEnum","sCriticality","sIndicator","getValueCriticality","sDimension","aValueCriticality","sResult","aValues","oVC","Value","Criticality","getMeasureAttributeIndex","iMeasure","oChartAnnotations","_oChartAnnotations$Me","_oChartAnnotations$Dy","aMeasures","sMeasurePropertyPath","Measures","DynamicMeasures","bMeasureAttributeExists","aMeasureAttributes","MeasureAttributes","iMeasureAttribute","fnCheckMeasure","sMeasurePath","oMeasureAttribute","index","Measure","DynamicMeasure","some","bind","getMeasureAttribute","sChartAnnotationPath","requestObject","then","sMeasureAttributePath","DataPoint","getMeasureAttributeForMeasure","substring","isDraftParentEntityForContainment","oTargetCollectionContainsTarget","oTableMetadata","parentEntitySet","sParentEntitySetPath","oDraftRoot","oDraftNode","getDataFromTemplate","dataElement","splitPath","dataKey","connectedDataPath","connectedObject","template","Template","splitTemp","tempArray","trim","Data","notLastIndex","element","isLastIndex","templateInfo","getDelimiter","setMetaModel","getParameters","oParameterInfo","getParameterInfo","parameterProperties","buildActionWrapper","oThis","aParams","handlerModule","handlerMethod","id","oAdditionalParams","contexts","getHiddenPathExpression","dataFieldAnnotations","requiresIContext"],"sources":["CommonHelper-dbg.js"],"mappings":"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","sourceRoot":""}},{"offset":{"line":856,"column":0},"map":{"version":3,"names":["NS_MACRODATA","_retrieveModel","control","detachModelContextChange","sModelName","modelName","oModel","getModel","resolve","attachModelContextChange","getCustomDataWithModifier","oControl","sProperty","oModifier","aCustomData","aRetrievedCustomData","Promise","then","getAggregation","bind","oPromise","reduce","oPreviousPromise","oCustomData","getProperty","sKey","push","length","undefined","FETCHED_PROPERTIES_DATA_KEY","DelegateUtil","getLocalizedText","sTextOrToken","aMatch","exec","oResourceBundle","getResourceBundle","getText","e","Log","info","setCachedProperties","table","fetchedProperties","window","Element","key","setCustomData","getCachedProperties","getCustomData","getAttributeNS","data","Function","vValue","setAttributeNS","fetchPropertiesForEntity","sEntitySet","oMetaModel","requestObject","fetchAnnotationsForEntity","fetchModel","getDelegate","payload","oContext","call","loadMacroLibrary","sap","ui","require","templateControlFragment","sFragmentName","oPreprocessorSettings","oOptions","CommonUtils","doesValueHelpExist","mParameters","sPropertyName","sValueHelpType","sOriginalProperty","sBindingPath","oPropertyContext","createBindingContext","sValueHelpProperty","FieldHelper","valueHelpProperty","bIsAbsolute","indexOf","getObject","sGeneratedId","generateID","flexId","generate","getId","getRelativePropertyPath","context","getPath","aDependents","some","oDependent","isValueHelpRequired","bInFilterField","bReadOnly","all","aResults","catch","oError","warning","isMultiValue","oProperty","bIsMultiValue","filterExpression","type"],"sourceRoot":"","sources":["DelegateUtil.ts"],"sourcesContent":["import type ResourceBundle from \"sap/base/i18n/ResourceBundle\";\nimport Log from \"sap/base/Log\";\nimport AppComponent from \"sap/fe/core/AppComponent\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport {\n\tconfigType,\n\tCustomBasedTableColumn,\n\texportSettings,\n\tExtensionForAnalytics,\n\tVisualSettings\n} from \"sap/fe/core/converters/controls/Common/Table\";\nimport { CustomElement } from \"sap/fe/core/converters/helpers/ConfigurableObject\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport type PageController from \"sap/fe/core/PageController\";\nimport { DisplayMode } from \"sap/fe/core/templating/DisplayModeFormatter\";\nimport { getRelativePropertyPath } from \"sap/fe/core/templating/PropertyFormatters\";\nimport FieldHelper from \"sap/fe/macros/field/FieldHelper\";\nimport { generateID } from \"sap/fe/macros/internal/valuehelp/ValueHelpTemplating\";\nimport type Control from \"sap/ui/core/Control\";\nimport Table from \"sap/ui/mdc/Table\";\nimport Model from \"sap/ui/model/Model\";\nimport type ResourceModel from \"sap/ui/model/resource/ResourceModel\";\n\nconst NS_MACRODATA = \"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\";\n\nexport type tableDelegateModel = {\n\tenableAutoColumnWidth: boolean;\n\tisOptimizedForSmallDevice: boolean;\n\treadOnly: boolean;\n\tcolumnEditMode: string;\n\ttableType: string;\n\tonChange: Function;\n\tid: string;\n\tnavigationPropertyPath: string;\n\tcolumnInfo: CustomElement<CustomBasedTableColumn>;\n\tcollection: {\n\t\tsPath: string;\n\t\toModel: string;\n\t};\n};\n\nexport type PropertyInfo = {\n\tadditionalLabels?: string[];\n\tcaseSensitive?: boolean;\n\tdescription?: string;\n\tdescriptionProperty?: string;\n\texportSettings?: exportSettings | null;\n\tfilterable?: boolean;\n\tgroup?: string;\n\tgroupable?: boolean;\n\tgroupLabel?: string;\n\tkey?: boolean;\n\tlabel?: string;\n\tmaxConditions?: number;\n\tmetadataPath: string;\n\tmode?: DisplayMode;\n\tname: string;\n\tpath?: string;\n\tpropertyInfos?: string[];\n\trelativePath?: string;\n\tsortable?: boolean;\n\tsortDirection?: string;\n\ttext?: string;\n\ttooltip?: string;\n\ttypeConfig: configType;\n\tunit?: string;\n\tvalueProperty?: string;\n\tvisible: boolean;\n\tvisualSettings?: VisualSettings;\n\texportDataPointTargetValue?: string;\n\tisParameter?: boolean;\n\taggregatable?: boolean;\n\textension?: ExtensionForAnalytics;\n};\n\nfunction _retrieveModel(this: { modelName: string; control: any; resolve: Function }) {\n\tthis.control.detachModelContextChange(_retrieveModel, this);\n\tconst sModelName = this.modelName,\n\t\toModel = this.control.getModel(sModelName);\n\n\tif (oModel) {\n\t\tthis.resolve(oModel);\n\t} else {\n\t\tthis.control.attachModelContextChange(_retrieveModel, this);\n\t}\n}\nasync function getCustomDataWithModifier(oControl: any, sProperty: any, oModifier: any) {\n\tconst aCustomData: any[] = [];\n\n\tconst aRetrievedCustomData = await Promise.resolve().then(\n\t\toModifier.getAggregation.bind(oModifier, oControl, \"customData\") as () => any[]\n\t);\n\n\tconst oPromise = aRetrievedCustomData.reduce((oPreviousPromise: Promise<void>, oCustomData) => {\n\t\treturn oPreviousPromise.then(oModifier.getProperty.bind(oModifier, oCustomData, \"key\")).then(function (sKey: any) {\n\t\t\tif (sKey === sProperty) {\n\t\t\t\taCustomData.push(oCustomData);\n\t\t\t}\n\t\t});\n\t}, Promise.resolve());\n\tawait oPromise;\n\n\tif (aCustomData.length === 1) {\n\t\treturn oModifier.getProperty(aCustomData[0], \"value\");\n\t} else {\n\t\treturn undefined;\n\t}\n}\nconst FETCHED_PROPERTIES_DATA_KEY = \"sap_fe_TableDelegate_propertyInfoMap\";\n\nconst DelegateUtil = {\n\tgetLocalizedText(sTextOrToken: string, oControl: Control | AppComponent | PageController) {\n\t\tconst aMatch = /{([A-Za-z0-9_.|@]+)>([A-Za-z0-9_.|]+)}/.exec(sTextOrToken);\n\t\tif (aMatch) {\n\t\t\ttry {\n\t\t\t\tconst oResourceBundle = (oControl.getModel(aMatch[1]) as ResourceModel).getResourceBundle() as ResourceBundle;\n\t\t\t\treturn oResourceBundle.getText(aMatch[2]);\n\t\t\t} catch (e) {\n\t\t\t\tLog.info(`Unable to retrieve localized text ${sTextOrToken}`);\n\t\t\t}\n\t\t}\n\t\treturn sTextOrToken;\n\t},\n\n\tsetCachedProperties(table: Table, fetchedProperties: PropertyInfo[]) {\n\t\t// do not cache during templating, else it becomes part of the cached view\n\t\tif (table instanceof window.Element) {\n\t\t\treturn;\n\t\t}\n\t\tconst key = FETCHED_PROPERTIES_DATA_KEY;\n\t\tDelegateUtil.setCustomData(table, key, fetchedProperties);\n\t},\n\tgetCachedProperties(table: Table): PropertyInfo[] | null {\n\t\t// properties are not cached during templating\n\t\tif (table instanceof window.Element) {\n\t\t\treturn null;\n\t\t}\n\t\tconst key = FETCHED_PROPERTIES_DATA_KEY;\n\t\treturn DelegateUtil.getCustomData(table, key);\n\t},\n\n\tgetCustomData(oControl: any, sProperty: any, oModifier?: any) {\n\t\t// If Modifier is given, the method must execute asynchronously and return a Promise\n\t\tif (oModifier) {\n\t\t\treturn getCustomDataWithModifier(oControl, sProperty, oModifier);\n\t\t} else {\n\t\t\t// Delegate invoked from a non-flex change - FilterBarDelegate._addP13nItem for OP table filtering, FilterBarDelegate.fetchProperties etc.\n\t\t\tif (oControl && sProperty) {\n\t\t\t\tif (oControl instanceof window.Element) {\n\t\t\t\t\treturn oControl.getAttributeNS(NS_MACRODATA, sProperty);\n\t\t\t\t}\n\t\t\t\tif (oControl.data instanceof Function) {\n\t\t\t\t\treturn oControl.data(sProperty);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}\n\t},\n\tsetCustomData(oControl: any, sProperty: any, vValue: any) {\n\t\tif (oControl && sProperty) {\n\t\t\tif (oControl instanceof window.Element) {\n\t\t\t\treturn oControl.setAttributeNS(NS_MACRODATA, `customData:${sProperty}`, vValue);\n\t\t\t}\n\t\t\tif (oControl.data instanceof Function) {\n\t\t\t\treturn oControl.data(sProperty, vValue);\n\t\t\t}\n\t\t}\n\t},\n\tfetchPropertiesForEntity(sEntitySet: any, oMetaModel: any) {\n\t\treturn oMetaModel.requestObject(`${sEntitySet}/`);\n\t},\n\tfetchAnnotationsForEntity(sEntitySet: any, oMetaModel: any) {\n\t\treturn oMetaModel.requestObject(`${sEntitySet}@`);\n\t},\n\tfetchModel(oControl: any): Promise<Model> {\n\t\treturn new Promise((resolve) => {\n\t\t\tconst sModelName = oControl.getDelegate().payload && oControl.getDelegate().payload.modelName,\n\t\t\t\toContext = { modelName: sModelName, control: oControl, resolve: resolve };\n\t\t\t_retrieveModel.call(oContext);\n\t\t});\n\t},\n\tloadMacroLibrary(): Promise<void> {\n\t\treturn new Promise((resolve) => {\n\t\t\tsap.ui.require([\"sap/fe/macros/macroLibrary\"], function (/*macroLibrary*/) {\n\t\t\t\tresolve();\n\t\t\t});\n\t\t});\n\t},\n\ttemplateControlFragment(sFragmentName: any, oPreprocessorSettings: any, oOptions: any, oModifier?: any) {\n\t\treturn CommonUtils.templateControlFragment(sFragmentName, oPreprocessorSettings, oOptions, oModifier);\n\t},\n\tdoesValueHelpExist(mParameters: any) {\n\t\tconst sPropertyName = mParameters.sPropertyName || \"\";\n\t\tconst sValueHelpType = mParameters.sValueHelpType || \"\";\n\t\tconst oMetaModel = mParameters.oMetaModel;\n\t\tconst oModifier = mParameters.oModifier;\n\t\tconst sOriginalProperty = `${mParameters.sBindingPath}/${sPropertyName}`;\n\t\tconst oPropertyContext = oMetaModel.createBindingContext(sOriginalProperty);\n\t\tlet sValueHelpProperty = FieldHelper.valueHelpProperty(oPropertyContext);\n\t\tconst bIsAbsolute = mParameters.sBindingPath && mParameters.sBindingPath.indexOf(\"/\") === 0;\n\n\t\t// unit/currency\n\t\tif (sValueHelpProperty.indexOf(\"$Path\") > -1) {\n\t\t\tsValueHelpProperty = oMetaModel.getObject(sValueHelpProperty);\n\t\t}\n\t\tif (bIsAbsolute && sValueHelpProperty.indexOf(\"/\") !== 0) {\n\t\t\tsValueHelpProperty = `${mParameters.sBindingPath}/${sValueHelpProperty}`;\n\t\t}\n\n\t\tconst sGeneratedId = generateID(\n\t\t\tmParameters.flexId,\n\t\t\tgenerate([oModifier ? oModifier.getId(mParameters.oControl) : mParameters.oControl.getId(), sValueHelpType]),\n\t\t\tgetRelativePropertyPath(oPropertyContext.getProperty(sOriginalProperty), {\n\t\t\t\tcontext: {\n\t\t\t\t\tgetModel: () => {\n\t\t\t\t\t\treturn mParameters.oMetaModel;\n\t\t\t\t\t},\n\t\t\t\t\tgetPath: () => {\n\t\t\t\t\t\treturn sOriginalProperty;\n\t\t\t\t\t}\n\t\t\t\t} as any\n\t\t\t}),\n\t\t\tgetRelativePropertyPath(oPropertyContext.getProperty(sValueHelpProperty), {\n\t\t\t\tcontext: {\n\t\t\t\t\tgetModel: () => {\n\t\t\t\t\t\treturn mParameters.oMetaModel;\n\t\t\t\t\t},\n\t\t\t\t\tgetPath: () => {\n\t\t\t\t\t\treturn sValueHelpProperty;\n\t\t\t\t\t}\n\t\t\t\t} as any\n\t\t\t})\n\t\t);\n\n\t\treturn Promise.resolve()\n\t\t\t.then(function () {\n\t\t\t\tif (oModifier) {\n\t\t\t\t\treturn oModifier.getAggregation(mParameters.oControl, \"dependents\");\n\t\t\t\t}\n\t\t\t\treturn mParameters.oControl.getAggregation(\"dependents\");\n\t\t\t})\n\t\t\t.then(function (aDependents: any) {\n\t\t\t\treturn Promise.resolve(\n\t\t\t\t\taDependents &&\n\t\t\t\t\t\taDependents.some(function (oDependent: any) {\n\t\t\t\t\t\t\treturn oModifier ? oModifier.getId(oDependent) === sGeneratedId : oDependent.getId() === sGeneratedId;\n\t\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t});\n\t},\n\tisValueHelpRequired(mParameters: any, bInFilterField?: boolean) {\n\t\tconst sPropertyName = mParameters.sPropertyName || \"\",\n\t\t\toMetaModel = mParameters.oMetaModel,\n\t\t\tsProperty = `${mParameters.sBindingPath}/${sPropertyName}`,\n\t\t\toPropertyContext = oMetaModel.createBindingContext(sProperty),\n\t\t\tsValueHelpProperty = FieldHelper.valueHelpProperty(oPropertyContext, bInFilterField);\n\n\t\treturn this.getCustomData(mParameters.oControl, \"displayModePropertyBinding\", mParameters.oModifier)\n\t\t\t.then(function (bReadOnly: any) {\n\t\t\t\t// Check whether the control is read-only. If yes, no need of a value help.\n\t\t\t\tbReadOnly = typeof bReadOnly === \"boolean\" ? bReadOnly : bReadOnly === \"true\";\n\t\t\t\tif (bReadOnly) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t// Else, check whether Value Help relevant annotation exists for the property.\n\t\t\t\t// TODO use PropertyFormatter.hasValueHelp () => if doing so, QUnit tests fail due to mocked model implementation\n\t\t\t\treturn Promise.all([\n\t\t\t\t\toMetaModel.requestObject(`${sValueHelpProperty}@com.sap.vocabularies.Common.v1.ValueListWithFixedValues`),\n\t\t\t\t\toMetaModel.requestObject(`${sValueHelpProperty}@com.sap.vocabularies.Common.v1.ValueListReferences`),\n\t\t\t\t\toMetaModel.requestObject(`${sValueHelpProperty}@com.sap.vocabularies.Common.v1.ValueListMapping`),\n\t\t\t\t\toMetaModel.requestObject(`${sValueHelpProperty}@com.sap.vocabularies.Common.v1.ValueList`)\n\t\t\t\t]);\n\t\t\t})\n\t\t\t.then(function (aResults: any[]) {\n\t\t\t\treturn !!aResults[0] || !!aResults[1] || !!aResults[2] || !!aResults[3];\n\t\t\t})\n\t\t\t.catch(function (oError: any) {\n\t\t\t\tLog.warning(\"Error while retrieving custom data / value list annotation values\", oError);\n\t\t\t});\n\t},\n\tisMultiValue(oProperty: any) {\n\t\tlet bIsMultiValue = true;\n\t\t//SingleValue | MultiValue | SingleRange | MultiRange | SearchExpression | MultiRangeOrSearchExpression\n\t\tswitch (oProperty.filterExpression) {\n\t\t\tcase \"SearchExpression\":\n\t\t\tcase \"SingleRange\":\n\t\t\tcase \"SingleValue\":\n\t\t\t\tbIsMultiValue = false;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\tif (oProperty.type && oProperty.type.indexOf(\"Boolean\") > 0) {\n\t\t\tbIsMultiValue = false;\n\t\t}\n\t\treturn bIsMultiValue;\n\t}\n};\nexport default DelegateUtil;\n"],"mappings":"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"}},{"offset":{"line":1067,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","CommonUtils","StableIdHelper","PropertyFormatters","FieldHelper","ValueHelpTemplating","generateID","getRelativePropertyPath","generate","NS_MACRODATA","_retrieveModel","this","control","detachModelContextChange","sModelName","modelName","oModel","getModel","resolve","attachModelContextChange","async","getCustomDataWithModifier","oControl","sProperty","oModifier","aCustomData","aRetrievedCustomData","Promise","then","getAggregation","bind","oPromise","reduce","oPreviousPromise","oCustomData","getProperty","sKey","push","length","undefined","FETCHED_PROPERTIES_DATA_KEY","DelegateUtil","getLocalizedText","sTextOrToken","aMatch","exec","oResourceBundle","getResourceBundle","getText","e","info","setCachedProperties","table","fetchedProperties","window","Element","key","setCustomData","getCachedProperties","getCustomData","getAttributeNS","data","Function","vValue","setAttributeNS","fetchPropertiesForEntity","sEntitySet","oMetaModel","requestObject","fetchAnnotationsForEntity","fetchModel","getDelegate","payload","oContext","call","loadMacroLibrary","require","templateControlFragment","sFragmentName","oPreprocessorSettings","oOptions","doesValueHelpExist","mParameters","sPropertyName","sValueHelpType","sOriginalProperty","sBindingPath","oPropertyContext","createBindingContext","sValueHelpProperty","valueHelpProperty","bIsAbsolute","indexOf","getObject","sGeneratedId","flexId","getId","context","getPath","aDependents","some","oDependent","isValueHelpRequired","bInFilterField","bReadOnly","all","aResults","catch","oError","warning","isMultiValue","oProperty","bIsMultiValue","filterExpression","type"],"sources":["DelegateUtil-dbg.js"],"mappings":"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","sourceRoot":""}},{"offset":{"line":1072,"column":0},"map":{"version":3,"names":["MacroAPIFQN","MacroAPI","defineUI5Class","implementInterface","property","type","aggregation","multiple","isDefault","mSettings","others","parentContextToBind","registerInstance","init","getModel","oPageModel","Component","getOwnerComponentFor","setModel","_instance","instanceMap","get","constructor","set","push","render","oRm","oControl","renderControl","content","rerender","getDomRef","oContent","getController","getObject","getAPI","oEvent","oSource","getSource","isDependentBound","isA","getParent","oDependents","getDependents","hasCorrectDependent","find","oDependent","oSourceMap","length","setDefaultValue","oProps","sPropName","oOverrideValue","undefined","register","registerBuildingBlock","unregister","XMLPreprocessor","plugIn","namespace","macroName","setParentBindingContext","modelName","path","setParent","args","Object","keys","forEach","bindObject","model","events","change","oBoundContext","getBoundContext","setProperty","Control","fragment","hasValidation","WeakMap","getConverterContext","oDataModelPath","contextPath","oAppComponent","appComponent","viewData","models","getData","ConverterContext","createConverterContextForMacro","startingEntitySet","name","metaModel","getDiagnostics","merge","contextLocation","createBindingContext","oData","sContextPath","uid","converterContext"],"sourceRoot":"","sources":["MacroAPI.ts"],"sourcesContent":["import merge from \"sap/base/util/merge\";\nimport uid from \"sap/base/util/uid\";\nimport { registerBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlockRuntime\";\nimport ConverterContext from \"sap/fe/core/converters/ConverterContext\";\nimport type { PropertiesOf } from \"sap/fe/core/helpers/ClassSupport\";\nimport { aggregation, defineUI5Class, implementInterface, property } from \"sap/fe/core/helpers/ClassSupport\";\nimport type { InternalModelContext } from \"sap/fe/core/helpers/ModelHelper\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport type UI5Event from \"sap/ui/base/Event\";\nimport ManagedObject from \"sap/ui/base/ManagedObject\";\nimport Component from \"sap/ui/core/Component\";\nimport Control from \"sap/ui/core/Control\";\nimport type UI5Element from \"sap/ui/core/Element\";\nimport type { IFormContent } from \"sap/ui/core/library\";\nimport type RenderManager from \"sap/ui/core/RenderManager\";\nimport XMLPreprocessor from \"sap/ui/core/util/XMLPreprocessor\";\nimport type ClientContextBinding from \"sap/ui/model/ClientContextBinding\";\n\nconst MacroAPIFQN = \"sap.fe.macros.MacroAPI\";\n\n/**\n * Base API control for building blocks.\n *\n * @hideconstructor\n * @name sap.fe.macros.MacroAPI\n * @public\n */\n@defineUI5Class(MacroAPIFQN)\nclass MacroAPI extends Control implements IFormContent {\n\t@implementInterface(\"sap.ui.core.IFormContent\")\n\t__implements__sap_ui_core_IFormContent: boolean = true;\n\n\tstatic namespace: string = \"sap.fe.macros\";\n\tstatic macroName: string = \"Macro\";\n\tstatic fragment: string = \"sap.fe.macros.Macro\";\n\tstatic hasValidation: boolean = true;\n\tstatic instanceMap: WeakMap<object, object[]> = new WeakMap<object, object[]>();\n\tprotected static isDependentBound = false;\n\n\tconstructor(mSettings?: PropertiesOf<MacroAPI>, ...others: any[]) {\n\t\tsuper(mSettings as any, ...others);\n\t\tMacroAPI.registerInstance(this);\n\t}\n\n\tinit() {\n\t\tsuper.init();\n\t\tif (!this.getModel(\"_pageModel\")) {\n\t\t\tconst oPageModel = Component.getOwnerComponentFor(this)?.getModel(\"_pageModel\");\n\t\t\tif (oPageModel) {\n\t\t\t\tthis.setModel(oPageModel, \"_pageModel\");\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic registerInstance(_instance: any) {\n\t\tif (!this.instanceMap.get(_instance.constructor)) {\n\t\t\tthis.instanceMap.set(_instance.constructor, []);\n\t\t}\n\t\t(this.instanceMap.get(_instance.constructor) as object[]).push(_instance);\n\t}\n\t/**\n\t * Defines the path of the context used in the current page or block.\n\t * This setting is defined by the framework.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\tcontextPath!: string;\n\n\t/**\n\t * Defines the relative path of the property in the metamodel, based on the current contextPath.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\tmetaPath!: string;\n\n\t@aggregation({ type: \"sap.ui.core.Control\", multiple: false, isDefault: true })\n\tcontent!: Control;\n\n\tstatic render(oRm: RenderManager, oControl: MacroAPI) {\n\t\toRm.renderControl(oControl.content);\n\t}\n\n\trerender() {\n\t\tthis.content.rerender();\n\t}\n\n\tgetDomRef() {\n\t\tconst oContent = this.content;\n\t\treturn oContent ? oContent.getDomRef() : super.getDomRef();\n\t}\n\tgetController(): any {\n\t\treturn (this.getModel(\"$view\") as any).getObject().getController();\n\t}\n\n\tstatic getAPI(oEvent: UI5Event): MacroAPI | false {\n\t\tlet oSource = oEvent.getSource() as ManagedObject | null;\n\t\tif (this.isDependentBound) {\n\t\t\twhile (oSource && !oSource.isA<MacroAPI>(MacroAPIFQN) && oSource.getParent) {\n\t\t\t\tconst oDependents = (oSource as Control).getDependents();\n\t\t\t\tconst hasCorrectDependent = oDependents.find((oDependent: UI5Element) => oDependent.isA(MacroAPIFQN));\n\t\t\t\tif (hasCorrectDependent) {\n\t\t\t\t\toSource = hasCorrectDependent as MacroAPI;\n\t\t\t\t} else {\n\t\t\t\t\toSource = oSource.getParent() as MacroAPI;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\twhile (oSource && !oSource.isA<MacroAPI>(MacroAPIFQN) && oSource.getParent) {\n\t\t\t\toSource = oSource.getParent();\n\t\t\t}\n\t\t}\n\n\t\tif (!oSource || !oSource.isA<MacroAPI>(MacroAPIFQN)) {\n\t\t\tconst oSourceMap = this.instanceMap.get(this) as MacroAPI[];\n\t\t\toSource = oSourceMap?.[oSourceMap.length - 1];\n\t\t}\n\t\treturn oSource && oSource.isA<MacroAPI>(MacroAPIFQN) && oSource;\n\t}\n\n\tstatic setDefaultValue(oProps: any, sPropName: string, oOverrideValue: any) {\n\t\tif (oProps[sPropName] === undefined) {\n\t\t\toProps[sPropName] = oOverrideValue;\n\t\t}\n\t}\n\n\t/**\n\t * Retrieve a Converter Context.\n\t *\n\t * @param oDataModelPath\n\t * @param contextPath\n\t * @param mSettings\n\t * @returns A Converter Context\n\t */\n\tstatic getConverterContext = function (oDataModelPath: DataModelObjectPath, contextPath: string, mSettings: any) {\n\t\tconst oAppComponent = mSettings.appComponent;\n\t\tconst viewData = mSettings.models.viewData && mSettings.models.viewData.getData();\n\t\treturn ConverterContext.createConverterContextForMacro(\n\t\t\toDataModelPath.startingEntitySet.name,\n\t\t\tmSettings.models.metaModel,\n\t\t\toAppComponent && oAppComponent.getDiagnostics(),\n\t\t\tmerge,\n\t\t\toDataModelPath.contextLocation,\n\t\t\tviewData\n\t\t);\n\t};\n\t/**\n\t * Create a Binding Context.\n\t *\n\t * @param oData\n\t * @param mSettings\n\t * @returns The binding context\n\t */\n\tstatic createBindingContext = function (oData: object, mSettings: any) {\n\t\tconst sContextPath = `/uid--${uid()}`;\n\t\tmSettings.models.converterContext.setProperty(sContextPath, oData);\n\t\treturn mSettings.models.converterContext.createBindingContext(sContextPath);\n\t};\n\tstatic register() {\n\t\tregisterBuildingBlock(this as any);\n\t}\n\tstatic unregister() {\n\t\t(XMLPreprocessor as any).plugIn(null, this.namespace, this.macroName);\n\t}\n\n\tparentContextToBind: Record<string, string> = {};\n\n\t/**\n\t * Keep track of a binding context that should be assigned to the parent of that control.\n\t *\n\t * @param modelName The model name that the context will relate to\n\t * @param path The path of the binding context\n\t */\n\tsetParentBindingContext(modelName: string, path: string) {\n\t\tthis.parentContextToBind[modelName] = path;\n\t}\n\n\tsetParent(...args: any[]) {\n\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t// @ts-ignore\n\t\tsuper.setParent(...args);\n\t\tObject.keys(this.parentContextToBind).forEach((modelName) => {\n\t\t\tthis.getParent()!.bindObject({\n\t\t\t\tpath: this.parentContextToBind[modelName],\n\t\t\t\tmodel: modelName,\n\t\t\t\tevents: {\n\t\t\t\t\tchange: function (this: ClientContextBinding) {\n\t\t\t\t\t\tconst oBoundContext = this.getBoundContext() as InternalModelContext;\n\t\t\t\t\t\tif (oBoundContext && !oBoundContext.getObject()) {\n\t\t\t\t\t\t\toBoundContext.setProperty(\"\", {});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n}\n\nexport default MacroAPI;\n"],"mappings":"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"}},{"offset":{"line":1268,"column":0},"map":{"version":3,"names":["sap","ui","define","merge","uid","BuildingBlockRuntime","ConverterContext","ClassSupport","Component","Control","XMLPreprocessor","_dec","_dec2","_dec3","_dec4","_dec5","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_class3","property","implementInterface","defineUI5Class","aggregation","registerBuildingBlock","_initializerDefineProperty","target","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","MacroAPIFQN","MacroAPI","type","multiple","isDefault","_Control","mSettings","_this","_len","arguments","length","others","Array","_key","this","parentContextToBind","registerInstance","_proto","init","getModel","_Component$getOwnerCo","oPageModel","getOwnerComponentFor","setModel","_instance","instanceMap","get","set","push","render","oRm","oControl","renderControl","content","rerender","getDomRef","oContent","getController","getObject","getAPI","oEvent","oSource","getSource","isDependentBound","isA","getParent","oDependents","getDependents","hasCorrectDependent","find","oDependent","oSourceMap","setDefaultValue","oProps","sPropName","oOverrideValue","register","unregister","plugIn","namespace","macroName","setParentBindingContext","modelName","path","setParent","_len2","args","_key2","bindObject","model","events","change","oBoundContext","getBoundContext","setProperty","fragment","hasValidation","WeakMap","getConverterContext","oDataModelPath","contextPath","oAppComponent","appComponent","viewData","models","getData","createConverterContextForMacro","startingEntitySet","name","metaModel","getDiagnostics","contextLocation","createBindingContext","oData","sContextPath","converterContext"],"sources":["MacroAPI-dbg.js"],"mappings":"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","sourceRoot":""}},{"offset":{"line":1273,"column":0},"map":{"version":3,"names":["fnGetOverrides","mControlConfiguration","sID","oProps","oControlConfig","Object","keys","forEach","sConfigKey","fnSetDefaultValue","sPropName","oOverrideValue","bForceUpdate","undefined","MacroMetadata","metadata","properties","_flexId","type","extend","fnName","oContent","hasValidation","getOverrides","bind","setDefaultValue","getConverterContext","oVisualizationObjectPath","contextPath","mSettings","mExtraParams","oAppComponent","appComponent","originalViewData","models","viewData","getData","assign","resourceBundle","deepClone","controlConfiguration","merge","ConverterContext","createConverterContextForMacro","startingEntitySet","name","metaModel","getDiagnostics","contextLocation","createBindingContext","oData","sContextPath","uid","converterContext","setProperty","parseAggregation","oAggregation","fnCallback","oOutObjects","children","length","childIdx","childObject","key","getContentId","sMacroId"],"sourceRoot":"","sources":["MacroMetadata.ts"],"sourcesContent":["import deepClone from \"sap/base/util/deepClone\";\nimport merge from \"sap/base/util/merge\";\nimport uid from \"sap/base/util/uid\";\nimport ConverterContext from \"sap/fe/core/converters/ConverterContext\";\nconst fnGetOverrides = function (mControlConfiguration: any, sID: string) {\n\tconst oProps: any = {};\n\tif (mControlConfiguration) {\n\t\tconst oControlConfig = mControlConfiguration[sID];\n\t\tif (oControlConfig) {\n\t\t\tObject.keys(oControlConfig).forEach(function (sConfigKey: string) {\n\t\t\t\toProps[sConfigKey] = oControlConfig[sConfigKey];\n\t\t\t});\n\t\t}\n\t}\n\treturn oProps;\n};\nconst fnSetDefaultValue = function (oProps: any, sPropName: string, oOverrideValue: any, bForceUpdate: boolean) {\n\tif (oProps[sPropName] === undefined || bForceUpdate) {\n\t\toProps[sPropName] = oOverrideValue;\n\t}\n};\nconst MacroMetadata = {\n\tmetadata: {\n\t\tproperties: {\n\t\t\t_flexId: {\n\t\t\t\ttype: \"string\"\n\t\t\t}\n\t\t}\n\t},\n\textend: function (fnName: any, oContent: any) {\n\t\toContent.metadata.properties._flexId = MacroMetadata.metadata.properties._flexId;\n\t\toContent.hasValidation = true;\n\t\toContent.getOverrides = fnGetOverrides.bind(oContent);\n\t\toContent.setDefaultValue = fnSetDefaultValue.bind(oContent);\n\t\toContent.getConverterContext = function (oVisualizationObjectPath: any, contextPath: any, mSettings: any, mExtraParams: any) {\n\t\t\tconst oAppComponent = mSettings.appComponent;\n\t\t\tconst originalViewData = mSettings.models.viewData && mSettings.models.viewData.getData();\n\t\t\tlet viewData = Object.assign({}, originalViewData);\n\t\t\tdelete viewData.resourceBundle;\n\t\t\tviewData = deepClone(viewData);\n\t\t\tviewData.controlConfiguration = merge(viewData.controlConfiguration, mExtraParams);\n\t\t\treturn ConverterContext.createConverterContextForMacro(\n\t\t\t\toVisualizationObjectPath.startingEntitySet.name,\n\t\t\t\tmSettings.models.metaModel,\n\t\t\t\toAppComponent && oAppComponent.getDiagnostics(),\n\t\t\t\tmerge,\n\t\t\t\toVisualizationObjectPath.contextLocation,\n\t\t\t\tviewData\n\t\t\t);\n\t\t};\n\t\toContent.createBindingContext = function (oData: any, mSettings: any) {\n\t\t\tconst sContextPath = `/uid--${uid()}`;\n\t\t\tmSettings.models.converterContext.setProperty(sContextPath, oData);\n\t\t\treturn mSettings.models.converterContext.createBindingContext(sContextPath);\n\t\t};\n\t\toContent.parseAggregation = function (oAggregation: any, fnCallback: Function) {\n\t\t\tconst oOutObjects: any = {};\n\t\t\tif (oAggregation && oAggregation.children.length > 0) {\n\t\t\t\tconst children = oAggregation.children;\n\t\t\t\tfor (let childIdx = 0; childIdx < children.length; childIdx++) {\n\t\t\t\t\tconst childObject = fnCallback(children[childIdx], childIdx);\n\t\t\t\t\tif (childObject) {\n\t\t\t\t\t\toOutObjects[childObject.key] = childObject;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn oOutObjects;\n\t\t};\n\n\t\toContent.getContentId = function (sMacroId: string) {\n\t\t\treturn `${sMacroId}-content`;\n\t\t};\n\n\t\treturn oContent;\n\t}\n};\n\nexport default MacroMetadata;\n"],"mappings":"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"}},{"offset":{"line":1345,"column":0},"map":{"version":3,"names":["sap","ui","define","deepClone","merge","uid","ConverterContext","fnGetOverrides","mControlConfiguration","sID","oProps","oControlConfig","Object","keys","forEach","sConfigKey","fnSetDefaultValue","sPropName","oOverrideValue","bForceUpdate","undefined","MacroMetadata","metadata","properties","_flexId","type","extend","fnName","oContent","hasValidation","getOverrides","bind","setDefaultValue","getConverterContext","oVisualizationObjectPath","contextPath","mSettings","mExtraParams","oAppComponent","appComponent","originalViewData","models","viewData","getData","assign","resourceBundle","controlConfiguration","createConverterContextForMacro","startingEntitySet","name","metaModel","getDiagnostics","contextLocation","createBindingContext","oData","sContextPath","converterContext","setProperty","parseAggregation","oAggregation","fnCallback","oOutObjects","children","length","childIdx","childObject","key","getContentId","sMacroId"],"sources":["MacroMetadata-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,yCAAO,CAAC,0BAA2B,sBAAuB,oBAAqB,2CAA4C,SAAUC,EAAWC,EAAOC,EAAKC,GACjK,aAEA,MAAMC,EAAiB,SAAUC,EAAuBC,GACtD,MAAMC,EAAS,CAAC,EAChB,GAAIF,EAAuB,CACzB,MAAMG,EAAiBH,EAAsBC,GAC7C,GAAIE,EAAgB,CAClBC,OAAOC,KAAKF,GAAgBG,QAAQ,SAAUC,GAC5CL,EAAOK,GAAcJ,EAAeI,EACtC,EACF,CACF,CACA,OAAOL,CACT,EACA,MAAMM,EAAoB,SAAUN,EAAQO,EAAWC,EAAgBC,GACrE,GAAIT,EAAOO,KAAeG,WAAaD,EAAc,CACnDT,EAAOO,GAAaC,CACtB,CACF,EACA,MAAMG,EAAgB,CACpBC,SAAU,CACRC,WAAY,CACVC,QAAS,CACPC,KAAM,YAIZC,OAAQ,SAAUC,EAAQC,GACxBA,EAASN,SAASC,WAAWC,QAAUH,EAAcC,SAASC,WAAWC,QACzEI,EAASC,cAAgB,KACzBD,EAASE,aAAevB,EAAewB,KAAKH,GAC5CA,EAASI,gBAAkBhB,EAAkBe,KAAKH,GAClDA,EAASK,oBAAsB,SAAUC,EAA0BC,EAAaC,EAAWC,GACzF,MAAMC,EAAgBF,EAAUG,aAChC,MAAMC,EAAmBJ,EAAUK,OAAOC,UAAYN,EAAUK,OAAOC,SAASC,UAChF,IAAID,EAAW9B,OAAOgC,OAAO,CAAC,EAAGJ,UAC1BE,EAASG,eAChBH,EAAWvC,EAAUuC,GACrBA,EAASI,qBAAuB1C,EAAMsC,EAASI,qBAAsBT,GACrE,OAAO/B,EAAiByC,+BAA+Bb,EAAyBc,kBAAkBC,KAAMb,EAAUK,OAAOS,UAAWZ,GAAiBA,EAAca,iBAAkB/C,EAAO8B,EAAyBkB,gBAAiBV,EACxO,EACAd,EAASyB,qBAAuB,SAAUC,EAAOlB,GAC/C,MAAMmB,EAAe,SAASlD,MAC9B+B,EAAUK,OAAOe,iBAAiBC,YAAYF,EAAcD,GAC5D,OAAOlB,EAAUK,OAAOe,iBAAiBH,qBAAqBE,EAChE,EACA3B,EAAS8B,iBAAmB,SAAUC,EAAcC,GAClD,MAAMC,EAAc,CAAC,EACrB,GAAIF,GAAgBA,EAAaG,SAASC,OAAS,EAAG,CACpD,MAAMD,EAAWH,EAAaG,SAC9B,IAAK,IAAIE,EAAW,EAAGA,EAAWF,EAASC,OAAQC,IAAY,CAC7D,MAAMC,EAAcL,EAAWE,EAASE,GAAWA,GACnD,GAAIC,EAAa,CACfJ,EAAYI,EAAYC,KAAOD,CACjC,CACF,CACF,CACA,OAAOJ,CACT,EACAjC,EAASuC,aAAe,SAAUC,GAChC,MAAO,GAAGA,WACZ,EACA,OAAOxC,CACT,GAEF,OAAOP,CACT,EAAG","sourceRoot":""}},{"offset":{"line":1350,"column":0},"map":{"version":3,"names":["getPath","oContext","oInterface","context","requiresIContext"],"sourceRoot":"","sources":["MacroTemplating.ts"],"sourcesContent":["import type { ComputedAnnotationInterface, MetaModelContext } from \"sap/fe/core/templating/UIFormatters\";\n\nexport const getPath = function (oContext: MetaModelContext, oInterface: ComputedAnnotationInterface): string {\n\tif (oInterface && oInterface.context) {\n\t\treturn oInterface.context.getPath();\n\t}\n\treturn \"\";\n};\ngetPath.requiresIContext = true;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;EAEO,MAAMA,OAAO,GAAG,UAAUC,QAA0B,EAAEC,UAAuC,EAAU;IAC7G,IAAIA,UAAU,IAAIA,UAAU,CAACC,OAAO,EAAE;MACrC,OAAOD,UAAU,CAACC,OAAO,CAACH,OAAO,EAAE;IACpC;IACA,OAAO,EAAE;EACV,CAAC;EACDA,OAAO,CAACI,gBAAgB,GAAG,IAAI;EAAC;EAAA;AAAA"}},{"offset":{"line":1368,"column":0},"map":{"version":3,"names":["sap","ui","define","_exports","getPath","oContext","oInterface","context","requiresIContext"],"sources":["MacroTemplating-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,2CAAO,GAAI,WAChB,aAEA,IAAIC,EAAW,CAAC,EAChB,MAAMC,EAAU,SAAUC,EAAUC,GAClC,GAAIA,GAAcA,EAAWC,QAAS,CACpC,OAAOD,EAAWC,QAAQH,SAC5B,CACA,MAAO,EACT,EACAA,EAAQI,iBAAmB,KAC3BL,EAASC,QAAUA,EACnB,OAAOD,CACT,EAAG","sourceRoot":""}},{"offset":{"line":1373,"column":0},"map":{"version":3,"names":["ODataMetaModelUtil","fetchAllAnnotations","oMetaModel","sEntityPath","oCtx","getMetaContext","requestObject","then","mAnnos","getAllCustomAggregates","mCustomAggregates","sAnno","sAnnoKey","startsWith","replace","aAnno","split","length","contextDefiningProperties","label","name","propertyPath","sortable","sortOrder","custom","getAllAggregatableProperties","mAggregatableProperties","aProperties","oProperty","i","Name","AggregatableProperty","$PropertyPath","aggregationMethod","AggregationMethod","getAllDataPoints","mDataPoints","sQualifier","sValue","Value","$Path","createDataPointProperty","oDataPointAnno","oDataPoint","TargetValue","targetValue","ForeCastValue","foreCastValue","oCriticality","Criticality","Calculated","Static","$EnumMember","CriticalityCalculation","oThresholds","bConstant","_buildThresholds","ConstantThresholds","DynamicThresholds","criticality","oCriticalityCalculation","aKeys","sKey","j","ImprovementDirection","oDynamicThresholds","oneSupplied","usedMeasures","oConstantThresholds","undefined","push","oAggregationLevel","AggregationLevels","VisibleDimensions","oAggregationLevelInfo","aVisibleDimensions","AggregationLevel","nValue","getSortRestrictionsInfo","entitySetAnnotations","sortRestrictionsInfo","propertyInfo","sortRestrictions","Sortable","propertyItem","NonSortableProperties","propertyName","AscendingOnlyProperties","sortDirection","DescendingOnlyProperties","getFilterRestrictionsInfo","oFilterRestrictions","sPropertyName","oFilterRestrictionsInfo","filterable","Filterable","requiresFilter","RequiresFilter","requiredProperties","RequiredProperties","NonFilterableProperties","FilterExpressionRestrictions","allowedExpressions","AllowedExpressions","isMultiValueFilterExpression","sFilterExpression","bIsMultiValue","addFilterInfoForProperty","oFilterRestrictionInfo","oPropertyInfo","fetchCalendarTag","COMMON","Promise","all","aTag","fetchFiscalTag","fetchCriticality","UI","aValueCriticality","oValueCriticality","VeryPositive","Positive","Critical","VeryNegative","Negative","Neutral","endsWith"],"sourceRoot":"","sources":["ODataMetaModelUtil.ts"],"sourcesContent":["export type AnnotationsForCollection = {\n\t// and AnnotationsForEntitySet\n\t\"@Org.OData.Capabilities.V1.SearchRestrictions\"?: {\n\t\tSearchable?: boolean;\n\t};\n\t\"@Org.OData.Capabilities.V1.SortRestrictions\"?: {\n\t\tSortable?: boolean;\n\t\tNonSortableProperties?: {\n\t\t\t$PropertyPath: string;\n\t\t}[];\n\t\tAscendingOnlyProperties?: {\n\t\t\t$PropertyPath: string;\n\t\t}[];\n\t\tDescendingOnlyProperties?: {\n\t\t\t$PropertyPath: string;\n\t\t}[];\n\t};\n};\n\nexport type SortRestrictionsPropertyInfoType = {\n\tsortable: boolean;\n\tsortDirection?: string;\n};\n\nexport type SortRestrictionsInfoType = {\n\tsortable: boolean;\n\tpropertyInfo: Record<string, SortRestrictionsPropertyInfoType>;\n};\n\n/**\n * Utitlity class for metadata interpretation inside delegate classes.\n *\n * @private\n * @since 1.62\n */\nconst ODataMetaModelUtil = {\n\tfetchAllAnnotations(oMetaModel: any, sEntityPath: any) {\n\t\tconst oCtx = oMetaModel.getMetaContext(sEntityPath);\n\t\treturn oMetaModel.requestObject(\"@\", oCtx).then(function (mAnnos: any) {\n\t\t\treturn mAnnos;\n\t\t});\n\t},\n\t/**\n\t * The mapping of all annotations of a given entity set.\n\t *\n\t * @param mAnnos A list of annotations of the entity set\n\t * @returns A map to the custom aggregates keyed by their qualifiers\n\t */\n\tgetAllCustomAggregates(mAnnos: any) {\n\t\tconst mCustomAggregates: any = {};\n\t\tlet sAnno;\n\t\tfor (const sAnnoKey in mAnnos) {\n\t\t\tif (sAnnoKey.startsWith(\"@Org.OData.Aggregation.V1.CustomAggregate\")) {\n\t\t\t\tsAnno = sAnnoKey.replace(\"@Org.OData.Aggregation.V1.CustomAggregate#\", \"\");\n\t\t\t\tconst aAnno = sAnno.split(\"@\");\n\n\t\t\t\tif (aAnno.length == 2) {\n\t\t\t\t\tif (!mCustomAggregates[aAnno[0]]) {\n\t\t\t\t\t\tmCustomAggregates[aAnno[0]] = {};\n\t\t\t\t\t}\n\t\t\t\t\t//inner annotation that is not part of \tValidation.AggregatableTerms\n\t\t\t\t\tif (aAnno[1] == \"Org.OData.Aggregation.V1.ContextDefiningProperties\") {\n\t\t\t\t\t\tmCustomAggregates[aAnno[0]].contextDefiningProperties = mAnnos[sAnnoKey];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (aAnno[1] == \"com.sap.vocabularies.Common.v1.Label\") {\n\t\t\t\t\t\tmCustomAggregates[aAnno[0]].label = mAnnos[sAnnoKey];\n\t\t\t\t\t}\n\t\t\t\t} else if (aAnno.length == 1) {\n\t\t\t\t\tmCustomAggregates[aAnno[0]] = {\n\t\t\t\t\t\tname: aAnno[0],\n\t\t\t\t\t\tpropertyPath: aAnno[0],\n\t\t\t\t\t\tlabel: `Custom Aggregate (${sAnno})`,\n\t\t\t\t\t\tsortable: true,\n\t\t\t\t\t\tsortOrder: \"both\",\n\t\t\t\t\t\tcustom: true\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn mCustomAggregates;\n\t},\n\tgetAllAggregatableProperties(mAnnos: any) {\n\t\tconst mAggregatableProperties: any = {};\n\t\tlet aProperties, oProperty;\n\t\tif (mAnnos[\"@com.sap.vocabularies.Analytics.v1.AggregatedProperties\"]) {\n\t\t\taProperties = mAnnos[\"@com.sap.vocabularies.Analytics.v1.AggregatedProperties\"];\n\n\t\t\tfor (let i = 0; i < aProperties.length; i++) {\n\t\t\t\toProperty = aProperties[i];\n\n\t\t\t\tmAggregatableProperties[oProperty.Name] = {\n\t\t\t\t\tname: oProperty.Name,\n\t\t\t\t\tpropertyPath: oProperty.AggregatableProperty.$PropertyPath,\n\t\t\t\t\taggregationMethod: oProperty.AggregationMethod,\n\t\t\t\t\tlabel: oProperty[\"@com.sap.vocabularies.Common.v1.Label\"] || `Aggregatable property (${oProperty.Name})`,\n\t\t\t\t\tsortable: true,\n\t\t\t\t\tsortOrder: \"both\",\n\t\t\t\t\tcustom: false\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn mAggregatableProperties;\n\t},\n\t/**\n\t * Retrieve and order all data points by their property and qualifier.\n\t *\n\t * @param mAnnos A named map of annotations from a given entity set\n\t * @returns A keyed mapped ordered by\n\t * <ul>\n\t *     <li> The properties value path </li>\n\t *     <li> The qualifier of the data point <(li>\n\t * </ul>\n\t */\n\tgetAllDataPoints(mAnnos: any[]) {\n\t\tconst mDataPoints: any = {};\n\t\tfor (const sAnnoKey in mAnnos) {\n\t\t\tif (sAnnoKey.startsWith(\"@com.sap.vocabularies.UI.v1.DataPoint\")) {\n\t\t\t\tconst sQualifier = sAnnoKey.replace(\"@com.sap.vocabularies.UI.v1.DataPoint#\", \"\");\n\t\t\t\tconst sValue = mAnnos[sAnnoKey].Value.$Path;\n\t\t\t\tmDataPoints[sValue] = mDataPoints[sValue] || {};\n\t\t\t\tmDataPoints[sValue][sQualifier] = ODataMetaModelUtil.createDataPointProperty(mAnnos[sAnnoKey]);\n\t\t\t}\n\t\t}\n\n\t\treturn mDataPoints;\n\t},\n\t/**\n\t * Format the data point as a JSON object.\n\t *\n\t * @param oDataPointAnno\n\t * @returns The formatted json object\n\t */\n\tcreateDataPointProperty(oDataPointAnno: any) {\n\t\tconst oDataPoint: any = {};\n\n\t\tif (oDataPointAnno.TargetValue) {\n\t\t\toDataPoint.targetValue = oDataPointAnno.TargetValue.$Path;\n\t\t}\n\n\t\tif (oDataPointAnno.ForeCastValue) {\n\t\t\toDataPoint.foreCastValue = oDataPointAnno.ForeCastValue.$Path;\n\t\t}\n\n\t\tlet oCriticality = null;\n\t\tif (oDataPointAnno.Criticality) {\n\t\t\tif (oDataPointAnno.Criticality.$Path) {\n\t\t\t\t//will be an aggregated property or custom aggregate\n\t\t\t\toCriticality = {\n\t\t\t\t\tCalculated: oDataPointAnno.Criticality.$Path\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\toCriticality = {\n\t\t\t\t\tStatic: oDataPointAnno.Criticality.$EnumMember.replace(\"com.sap.vocabularies.UI.v1.CriticalityType/\", \"\")\n\t\t\t\t};\n\t\t\t}\n\t\t} else if (oDataPointAnno.CriticalityCalculation) {\n\t\t\tconst oThresholds = {};\n\t\t\tconst bConstant = ODataMetaModelUtil._buildThresholds(oThresholds, oDataPointAnno.CriticalityCalculation);\n\n\t\t\tif (bConstant) {\n\t\t\t\toCriticality = {\n\t\t\t\t\tConstantThresholds: oThresholds\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\toCriticality = {\n\t\t\t\t\tDynamicThresholds: oThresholds\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif (oCriticality) {\n\t\t\toDataPoint.criticality = oCriticality;\n\t\t}\n\n\t\treturn oDataPoint;\n\t},\n\t/**\n\t * Checks whether the thresholds are dynamic or constant.\n\t *\n\t * @param oThresholds The threshold skeleton\n\t * @param oCriticalityCalculation The UI.DataPoint.CriticalityCalculation annotation\n\t * @returns `true` if the threshold should be supplied as ConstantThresholds, <code>false</code> if the threshold should\n\t * be supplied as DynamicThresholds\n\t * @private\n\t */\n\t_buildThresholds(oThresholds: any, oCriticalityCalculation: any) {\n\t\tconst aKeys = [\n\t\t\t\"AcceptanceRangeLowValue\",\n\t\t\t\"AcceptanceRangeHighValue\",\n\t\t\t\"ToleranceRangeLowValue\",\n\t\t\t\"ToleranceRangeHighValue\",\n\t\t\t\"DeviationRangeLowValue\",\n\t\t\t\"DeviationRangeHighValue\"\n\t\t];\n\t\tlet bConstant = true,\n\t\t\tsKey,\n\t\t\ti,\n\t\t\tj;\n\n\t\toThresholds.ImprovementDirection = oCriticalityCalculation.ImprovementDirection.$EnumMember.replace(\n\t\t\t\"com.sap.vocabularies.UI.v1.ImprovementDirectionType/\",\n\t\t\t\"\"\n\t\t);\n\n\t\tconst oDynamicThresholds: any = {\n\t\t\toneSupplied: false,\n\t\t\tusedMeasures: []\n\t\t\t// combination to check whether at least one is supplied\n\t\t};\n\t\tconst oConstantThresholds: any = {\n\t\t\toneSupplied: false\n\t\t\t// combination to check whether at least one is supplied\n\t\t};\n\n\t\tfor (i = 0; i < aKeys.length; i++) {\n\t\t\tsKey = aKeys[i];\n\t\t\toDynamicThresholds[sKey] = oCriticalityCalculation[sKey] ? oCriticalityCalculation[sKey].$Path : undefined;\n\t\t\toDynamicThresholds.oneSupplied = oDynamicThresholds.oneSupplied || oDynamicThresholds[sKey];\n\n\t\t\tif (!oDynamicThresholds.oneSupplied) {\n\t\t\t\t// only consider in case no dynamic threshold is supplied\n\t\t\t\toConstantThresholds[sKey] = oCriticalityCalculation[sKey];\n\t\t\t\toConstantThresholds.oneSupplied = oConstantThresholds.oneSupplied || oConstantThresholds[sKey];\n\t\t\t} else if (oDynamicThresholds[sKey]) {\n\t\t\t\toDynamicThresholds.usedMeasures.push(oDynamicThresholds[sKey]);\n\t\t\t}\n\t\t}\n\n\t\t// dynamic definition shall overrule constant definition\n\t\tif (oDynamicThresholds.oneSupplied) {\n\t\t\tbConstant = false;\n\n\t\t\tfor (i = 0; i < aKeys.length; i++) {\n\t\t\t\tif (oDynamicThresholds[aKeys[i]]) {\n\t\t\t\t\toThresholds[aKeys[i]] = oDynamicThresholds[aKeys[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t\toThresholds.usedMeasures = oDynamicThresholds.usedMeasures;\n\t\t} else {\n\t\t\tlet oAggregationLevel: any;\n\t\t\toThresholds.AggregationLevels = [];\n\n\t\t\t// check if at least one static value is supplied\n\t\t\tif (oConstantThresholds.oneSupplied) {\n\t\t\t\t// add one entry in the aggregation level\n\t\t\t\toAggregationLevel = {\n\t\t\t\t\tVisibleDimensions: null\n\t\t\t\t};\n\n\t\t\t\tfor (i = 0; i < aKeys.length; i++) {\n\t\t\t\t\tif (oConstantThresholds[aKeys[i]]) {\n\t\t\t\t\t\toAggregationLevel[aKeys[i]] = oConstantThresholds[aKeys[i]];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\toThresholds.AggregationLevels.push(oAggregationLevel);\n\t\t\t}\n\n\t\t\t// further check for ConstantThresholds\n\t\t\tif (oCriticalityCalculation.ConstantThresholds && oCriticalityCalculation.ConstantThresholds.length > 0) {\n\t\t\t\tfor (i = 0; i < oCriticalityCalculation.ConstantThresholds.length; i++) {\n\t\t\t\t\tconst oAggregationLevelInfo = oCriticalityCalculation.ConstantThresholds[i];\n\n\t\t\t\t\tconst aVisibleDimensions: any = oAggregationLevelInfo.AggregationLevel ? [] : null;\n\n\t\t\t\t\tif (oAggregationLevelInfo.AggregationLevel && oAggregationLevelInfo.AggregationLevel.length > 0) {\n\t\t\t\t\t\tfor (j = 0; j < oAggregationLevelInfo.AggregationLevel.length; j++) {\n\t\t\t\t\t\t\taVisibleDimensions.push(oAggregationLevelInfo.AggregationLevel[j].$PropertyPath);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\toAggregationLevel = {\n\t\t\t\t\t\tVisibleDimensions: aVisibleDimensions\n\t\t\t\t\t};\n\n\t\t\t\t\tfor (j = 0; j < aKeys.length; j++) {\n\t\t\t\t\t\tconst nValue = oAggregationLevelInfo[aKeys[j]];\n\t\t\t\t\t\tif (nValue) {\n\t\t\t\t\t\t\toAggregationLevel[aKeys[j]] = nValue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\toThresholds.AggregationLevels.push(oAggregationLevel);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn bConstant;\n\t},\n\t/**\n\t * Determines the sorting information from the restriction annotation.\n\t *\n\t * @param entitySetAnnotations EntitySet or collection annotations with the sort restrictions annotation\n\t * @returns An object containing the sort restriction information\n\t */\n\tgetSortRestrictionsInfo(entitySetAnnotations: AnnotationsForCollection) {\n\t\tconst sortRestrictionsInfo: SortRestrictionsInfoType = {\n\t\t\tsortable: true,\n\t\t\tpropertyInfo: {}\n\t\t};\n\t\tconst sortRestrictions = entitySetAnnotations[\"@Org.OData.Capabilities.V1.SortRestrictions\"];\n\n\t\tif (!sortRestrictions) {\n\t\t\treturn sortRestrictionsInfo;\n\t\t}\n\n\t\tsortRestrictionsInfo.sortable = sortRestrictions.Sortable ?? true;\n\n\t\tfor (const propertyItem of sortRestrictions.NonSortableProperties || []) {\n\t\t\tconst propertyName = propertyItem.$PropertyPath;\n\t\t\tsortRestrictionsInfo.propertyInfo[propertyName] = {\n\t\t\t\tsortable: false\n\t\t\t};\n\t\t}\n\n\t\tfor (const propertyItem of sortRestrictions.AscendingOnlyProperties || []) {\n\t\t\tconst propertyName = propertyItem.$PropertyPath;\n\t\t\tsortRestrictionsInfo.propertyInfo[propertyName] = {\n\t\t\t\tsortable: true,\n\t\t\t\tsortDirection: \"asc\" // not used, yet\n\t\t\t};\n\t\t}\n\n\t\tfor (const propertyItem of sortRestrictions.DescendingOnlyProperties || []) {\n\t\t\tconst propertyName = propertyItem.$PropertyPath;\n\t\t\tsortRestrictionsInfo.propertyInfo[propertyName] = {\n\t\t\t\tsortable: true,\n\t\t\t\tsortDirection: \"desc\" // not used, yet\n\t\t\t};\n\t\t}\n\n\t\treturn sortRestrictionsInfo;\n\t},\n\t/**\n\t * Determines the filter information based on the filter restrictions annoation.\n\t *\n\t * @param oFilterRestrictions The filter restrictions annotation\n\t * @returns An object containing the filter restriction information\n\t */\n\tgetFilterRestrictionsInfo(oFilterRestrictions: any) {\n\t\tlet i, sPropertyName;\n\t\tconst oFilterRestrictionsInfo: any = {\n\t\t\tfilterable: true,\n\t\t\tpropertyInfo: {}\n\t\t};\n\n\t\tif (oFilterRestrictions) {\n\t\t\toFilterRestrictionsInfo.filterable = oFilterRestrictions.Filterable != null ? oFilterRestrictions.Filterable : true;\n\t\t\toFilterRestrictionsInfo.requiresFilter =\n\t\t\t\toFilterRestrictions.RequiresFilter != null ? oFilterRestrictions.RequiresFilter : false;\n\n\t\t\t//Hierarchical Case\n\t\t\toFilterRestrictionsInfo.requiredProperties = [];\n\t\t\tif (oFilterRestrictionsInfo.RequiredProperties) {\n\t\t\t\tfor (i = 0; i < oFilterRestrictions.RequiredProperties.length; i++) {\n\t\t\t\t\tsPropertyName = oFilterRestrictions.RequiredProperties[i].$PropertyPath;\n\t\t\t\t\toFilterRestrictionsInfo.requiredProperties.push(sPropertyName);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (oFilterRestrictions.NonFilterableProperties) {\n\t\t\t\tfor (i = 0; i < oFilterRestrictions.NonFilterableProperties.length; i++) {\n\t\t\t\t\tsPropertyName = oFilterRestrictions.NonFilterableProperties[i].$PropertyPath;\n\t\t\t\t\toFilterRestrictionsInfo[sPropertyName] = {\n\t\t\t\t\t\tfilterable: false\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (oFilterRestrictions.FilterExpressionRestrictions) {\n\t\t\t\t//TBD\n\t\t\t\tfor (i = 0; i < oFilterRestrictions.FilterExpressionRestrictions.length; i++) {\n\t\t\t\t\tsPropertyName = oFilterRestrictions.FilterExpressionRestrictions[i].$PropertyPath;\n\t\t\t\t\toFilterRestrictionsInfo[sPropertyName] = {\n\t\t\t\t\t\tfilterable: true,\n\t\t\t\t\t\tallowedExpressions: oFilterRestrictions.FilterExpressionRestrictions[i].AllowedExpressions\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn oFilterRestrictionsInfo;\n\t},\n\t/**\n\t * Provides the information if the FilterExpression is a multiValue Filter Expression.\n\t *\n\t * @param sFilterExpression The FilterExpressionType\n\t * @returns A boolean value wether it is a multiValue Filter Expression or not\n\t */\n\tisMultiValueFilterExpression(sFilterExpression: String) {\n\t\tlet bIsMultiValue = true;\n\n\t\t//SingleValue | MultiValue | SingleRange | MultiRange | SearchExpression | MultiRangeOrSearchExpression\n\n\t\tswitch (sFilterExpression) {\n\t\t\tcase \"SearchExpression\":\n\t\t\tcase \"SingleRange\":\n\t\t\tcase \"SingleValue\":\n\t\t\t\tbIsMultiValue = false;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn bIsMultiValue;\n\t},\n\t/**\n\t *\n\t * @param oProperty The entity property\n\t * @param oFilterRestrictionInfo The filter restrictions\n\t */\n\taddFilterInfoForProperty(oProperty: any, oFilterRestrictionInfo: any) {\n\t\tconst oPropertyInfo = oFilterRestrictionInfo[oProperty.name];\n\t\toProperty.filterable = oFilterRestrictionInfo.filterable && oPropertyInfo ? oPropertyInfo.filterable : true;\n\n\t\tif (oProperty.filterable) {\n\t\t\toProperty.allowedExpressions = oPropertyInfo ? oPropertyInfo.allowedExpressions : null;\n\t\t}\n\t},\n\tfetchCalendarTag(oMetaModel: any, oCtx: any) {\n\t\tconst COMMON = \"@com.sap.vocabularies.Common.v1.\";\n\t\treturn Promise.all([\n\t\t\toMetaModel.requestObject(`${COMMON}IsCalendarYear`, oCtx),\n\t\t\toMetaModel.requestObject(`${COMMON}IsCalendarHalfyear`, oCtx),\n\t\t\toMetaModel.requestObject(`${COMMON}IsCalendarQuarter`, oCtx),\n\t\t\toMetaModel.requestObject(`${COMMON}IsCalendarMonth`, oCtx),\n\t\t\toMetaModel.requestObject(`${COMMON}IsCalendarWeek`, oCtx),\n\t\t\toMetaModel.requestObject(`${COMMON}IsDayOfCalendarMonth`, oCtx),\n\t\t\toMetaModel.requestObject(`${COMMON}IsDayOfCalendarYear`, oCtx),\n\t\t\toMetaModel.requestObject(`${COMMON}IsCalendarYearHalfyear`, oCtx),\n\t\t\toMetaModel.requestObject(`${COMMON}IsCalendarYearQuarter`, oCtx),\n\t\t\toMetaModel.requestObject(`${COMMON}IsCalendarYearMonth`, oCtx),\n\t\t\toMetaModel.requestObject(`${COMMON}IsCalendarYearWeek`, oCtx),\n\t\t\toMetaModel.requestObject(`${COMMON}IsCalendarDate`, oCtx)\n\t\t]).then(function (aTag: any[]) {\n\t\t\tif (aTag[0]) {\n\t\t\t\treturn \"year\";\n\t\t\t}\n\n\t\t\tif (aTag[1]) {\n\t\t\t\treturn \"halfYear\";\n\t\t\t}\n\n\t\t\tif (aTag[2]) {\n\t\t\t\treturn \"quarter\";\n\t\t\t}\n\n\t\t\tif (aTag[3]) {\n\t\t\t\treturn \"month\";\n\t\t\t}\n\n\t\t\tif (aTag[4]) {\n\t\t\t\treturn \"week\";\n\t\t\t}\n\n\t\t\tif (aTag[5]) {\n\t\t\t\treturn \"dayOfMonth\";\n\t\t\t}\n\n\t\t\tif (aTag[6]) {\n\t\t\t\treturn \"dayOfYear\";\n\t\t\t}\n\n\t\t\tif (aTag[7]) {\n\t\t\t\treturn \"yearHalfYear\";\n\t\t\t}\n\n\t\t\tif (aTag[8]) {\n\t\t\t\treturn \"yearQuarter\";\n\t\t\t}\n\n\t\t\tif (aTag[9]) {\n\t\t\t\treturn \"yearMonth\";\n\t\t\t}\n\n\t\t\tif (aTag[10]) {\n\t\t\t\treturn \"yearWeek\";\n\t\t\t}\n\n\t\t\tif (aTag[11]) {\n\t\t\t\treturn \"date\";\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t});\n\t},\n\tfetchFiscalTag(oMetaModel: any, oCtx: any) {\n\t\tconst COMMON = \"@com.sap.vocabularies.Common.v1.\";\n\t\treturn Promise.all([\n\t\t\toMetaModel.requestObject(`${COMMON}IsFiscalYear`, oCtx),\n\t\t\toMetaModel.requestObject(`${COMMON}IsFiscalPeriod`, oCtx),\n\t\t\toMetaModel.requestObject(`${COMMON}IsFiscalYearPeriod`, oCtx),\n\t\t\toMetaModel.requestObject(`${COMMON}IsFiscalQuarter`, oCtx),\n\t\t\toMetaModel.requestObject(`${COMMON}IsFiscalYearQuarter`, oCtx),\n\t\t\toMetaModel.requestObject(`${COMMON}IsFiscalWeek`, oCtx),\n\t\t\toMetaModel.requestObject(`${COMMON}IsFiscalYearWeek`, oCtx),\n\t\t\toMetaModel.requestObject(`${COMMON}IsDayOfFiscalYear`, oCtx),\n\t\t\toMetaModel.requestObject(`${COMMON}IsFiscalYearVariant`, oCtx)\n\t\t]).then(function (aTag: [any, any, any, any, any, any, any, any, any]) {\n\t\t\tif (aTag[0]) {\n\t\t\t\treturn \"year\";\n\t\t\t}\n\n\t\t\tif (aTag[1]) {\n\t\t\t\treturn \"period\";\n\t\t\t}\n\n\t\t\tif (aTag[2]) {\n\t\t\t\treturn \"yearPeriod\";\n\t\t\t}\n\n\t\t\tif (aTag[3]) {\n\t\t\t\treturn \"quarter\";\n\t\t\t}\n\n\t\t\tif (aTag[4]) {\n\t\t\t\treturn \"yearQuarter\";\n\t\t\t}\n\n\t\t\tif (aTag[5]) {\n\t\t\t\treturn \"week\";\n\t\t\t}\n\n\t\t\tif (aTag[6]) {\n\t\t\t\treturn \"yearWeek\";\n\t\t\t}\n\n\t\t\tif (aTag[7]) {\n\t\t\t\treturn \"dayOfYear\";\n\t\t\t}\n\n\t\t\tif (aTag[8]) {\n\t\t\t\treturn \"yearVariant\";\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t});\n\t},\n\tfetchCriticality(oMetaModel: any, oCtx: any) {\n\t\tconst UI = \"@com.sap.vocabularies.UI.v1\";\n\t\treturn oMetaModel.requestObject(`${UI}.ValueCriticality`, oCtx).then(function (aValueCriticality: any) {\n\t\t\tlet oCriticality, oValueCriticality: any;\n\n\t\t\tif (aValueCriticality) {\n\t\t\t\toCriticality = {\n\t\t\t\t\tVeryPositive: [],\n\t\t\t\t\tPositive: [],\n\t\t\t\t\tCritical: [],\n\t\t\t\t\tVeryNegative: [],\n\t\t\t\t\tNegative: [],\n\t\t\t\t\tNeutral: []\n\t\t\t\t} as any;\n\n\t\t\t\tfor (let i = 0; i < aValueCriticality.length; i++) {\n\t\t\t\t\toValueCriticality = aValueCriticality[i];\n\n\t\t\t\t\tif (oValueCriticality.Criticality.$EnumMember.endsWith(\"VeryPositive\")) {\n\t\t\t\t\t\toCriticality.VeryPositive.push(oValueCriticality.Value);\n\t\t\t\t\t} else if (oValueCriticality.Criticality.$EnumMember.endsWith(\"Positive\")) {\n\t\t\t\t\t\toCriticality.Positive.push(oValueCriticality.Value);\n\t\t\t\t\t} else if (oValueCriticality.Criticality.$EnumMember.endsWith(\"Critical\")) {\n\t\t\t\t\t\toCriticality.Critical.push(oValueCriticality.Value);\n\t\t\t\t\t} else if (oValueCriticality.Criticality.$EnumMember.endsWith(\"VeryNegative\")) {\n\t\t\t\t\t\toCriticality.VeryNegative.push(oValueCriticality.Value);\n\t\t\t\t\t} else if (oValueCriticality.Criticality.$EnumMember.endsWith(\"Negative\")) {\n\t\t\t\t\t\toCriticality.Negative.push(oValueCriticality.Value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\toCriticality.Neutral.push(oValueCriticality.Value);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (const sKey in oCriticality) {\n\t\t\t\t\tif (oCriticality[sKey].length == 0) {\n\t\t\t\t\t\tdelete oCriticality[sKey];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn oCriticality;\n\t\t});\n\t}\n};\n\nexport default ODataMetaModelUtil;\n"],"mappings":"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"}},{"offset":{"line":1844,"column":0},"map":{"version":3,"names":["sap","ui","define","ODataMetaModelUtil","fetchAllAnnotations","oMetaModel","sEntityPath","oCtx","getMetaContext","requestObject","then","mAnnos","getAllCustomAggregates","mCustomAggregates","sAnno","sAnnoKey","startsWith","replace","aAnno","split","length","contextDefiningProperties","label","name","propertyPath","sortable","sortOrder","custom","getAllAggregatableProperties","mAggregatableProperties","aProperties","oProperty","i","Name","AggregatableProperty","$PropertyPath","aggregationMethod","AggregationMethod","getAllDataPoints","mDataPoints","sQualifier","sValue","Value","$Path","createDataPointProperty","oDataPointAnno","oDataPoint","TargetValue","targetValue","ForeCastValue","foreCastValue","oCriticality","Criticality","Calculated","Static","$EnumMember","CriticalityCalculation","oThresholds","bConstant","_buildThresholds","ConstantThresholds","DynamicThresholds","criticality","oCriticalityCalculation","aKeys","sKey","j","ImprovementDirection","oDynamicThresholds","oneSupplied","usedMeasures","oConstantThresholds","undefined","push","oAggregationLevel","AggregationLevels","VisibleDimensions","oAggregationLevelInfo","aVisibleDimensions","AggregationLevel","nValue","getSortRestrictionsInfo","entitySetAnnotations","sortRestrictionsInfo","propertyInfo","sortRestrictions","Sortable","propertyItem","NonSortableProperties","propertyName","AscendingOnlyProperties","sortDirection","DescendingOnlyProperties","getFilterRestrictionsInfo","oFilterRestrictions","sPropertyName","oFilterRestrictionsInfo","filterable","Filterable","requiresFilter","RequiresFilter","requiredProperties","RequiredProperties","NonFilterableProperties","FilterExpressionRestrictions","allowedExpressions","AllowedExpressions","isMultiValueFilterExpression","sFilterExpression","bIsMultiValue","addFilterInfoForProperty","oFilterRestrictionInfo","oPropertyInfo","fetchCalendarTag","COMMON","Promise","all","aTag","fetchFiscalTag","fetchCriticality","UI","aValueCriticality","oValueCriticality","VeryPositive","Positive","Critical","VeryNegative","Negative","Neutral","endsWith"],"sources":["ODataMetaModelUtil-dbg.js"],"mappings":"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","sourceRoot":""}},{"offset":{"line":1849,"column":0},"map":{"version":3,"names":["oResourceModel","UI5ResourceModel","bundleName","async","oResourceBundle","Core","getLibraryResourceBundle","oApplicationResourceBundle","ResourceModel","getModel","getText","sText","aParameter","sEntitySetName","sResourceKey","sBundleText","setApplicationI18nBundle","oApplicationi18nBundle"],"sourceRoot":"","sources":["ResourceModel.ts"],"sourcesContent":["import type ResourceBundle from \"sap/base/i18n/ResourceBundle\";\nimport Core from \"sap/ui/core/Core\";\nimport UI5ResourceModel from \"sap/ui/model/resource/ResourceModel\";\n\nconst oResourceModel = new UI5ResourceModel({ bundleName: \"sap.fe.macros.messagebundle\", async: true }),\n\toResourceBundle = Core.getLibraryResourceBundle(\"sap.fe.macros\");\nlet oApplicationResourceBundle: ResourceBundle;\n\nconst ResourceModel = {\n\t/**\n\t * Returns the resource model for the library.\n\t *\n\t * @private\n\t * @returns The resource model for this library\n\t */\n\tgetModel() {\n\t\treturn oResourceModel;\n\t},\n\t/**\n\t * Returns a text from the resource bundle of this library.\n\t *\n\t * @param sText Text\n\t * @param aParameter Parameter\n\t * @param sEntitySetName Entity set name\n\t * @returns Text from resource bundle\n\t */\n\tgetText(sText: string, aParameter?: any[], sEntitySetName?: string) {\n\t\tlet sResourceKey = sText;\n\t\tlet sBundleText;\n\t\tif (oApplicationResourceBundle) {\n\t\t\tif (sEntitySetName) {\n\t\t\t\t//Create resource key appended with the entity set name\n\t\t\t\tsResourceKey = `${sText}|${sEntitySetName}`;\n\t\t\t}\n\t\t\tsBundleText = oApplicationResourceBundle.getText(sResourceKey, aParameter, true);\n\t\t\treturn sBundleText ? sBundleText : oResourceBundle.getText(sText, aParameter);\n\t\t}\n\t\treturn oResourceBundle.getText(sText, aParameter);\n\t},\n\t/**\n\t * Sets the resource bundle of the application.\n\t *\n\t * @param oApplicationi18nBundle Resource bundle of the application\n\t */\n\tsetApplicationI18nBundle(oApplicationi18nBundle: ResourceBundle) {\n\t\toApplicationResourceBundle = oApplicationi18nBundle;\n\t}\n};\n\nexport default ResourceModel;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;EAIA,MAAMA,cAAc,GAAG,IAAIC,gBAAgB,CAAC;MAAEC,UAAU,EAAE,6BAA6B;MAAEC,KAAK,EAAE;IAAK,CAAC,CAAC;IACtGC,eAAe,GAAGC,IAAI,CAACC,wBAAwB,CAAC,eAAe,CAAC;EACjE,IAAIC,0BAA0C;EAE9C,MAAMC,aAAa,GAAG;IACrB;AACD;AACA;AACA;AACA;AACA;IACCC,QAAQ,GAAG;MACV,OAAOT,cAAc;IACtB,CAAC;IACD;AACD;AACA;AACA;AACA;AACA;AACA;AACA;IACCU,OAAO,CAACC,KAAa,EAAEC,UAAkB,EAAEC,cAAuB,EAAE;MACnE,IAAIC,YAAY,GAAGH,KAAK;MACxB,IAAII,WAAW;MACf,IAAIR,0BAA0B,EAAE;QAC/B,IAAIM,cAAc,EAAE;UACnB;UACAC,YAAY,GAAI,GAAEH,KAAM,IAAGE,cAAe,EAAC;QAC5C;QACAE,WAAW,GAAGR,0BAA0B,CAACG,OAAO,CAACI,YAAY,EAAEF,UAAU,EAAE,IAAI,CAAC;QAChF,OAAOG,WAAW,GAAGA,WAAW,GAAGX,eAAe,CAACM,OAAO,CAACC,KAAK,EAAEC,UAAU,CAAC;MAC9E;MACA,OAAOR,eAAe,CAACM,OAAO,CAACC,KAAK,EAAEC,UAAU,CAAC;IAClD,CAAC;IACD;AACD;AACA;AACA;AACA;IACCI,wBAAwB,CAACC,sBAAsC,EAAE;MAChEV,0BAA0B,GAAGU,sBAAsB;IACpD;EACD,CAAC;EAAC,OAEaT,aAAa;AAAA"}},{"offset":{"line":1904,"column":0},"map":{"version":3,"names":["sap","ui","define","Core","UI5ResourceModel","oResourceModel","bundleName","async","oResourceBundle","getLibraryResourceBundle","oApplicationResourceBundle","ResourceModel","getModel","getText","sText","aParameter","sEntitySetName","sResourceKey","sBundleText","setApplicationI18nBundle","oApplicationi18nBundle"],"sources":["ResourceModel-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,yCAAO,CAAC,mBAAoB,uCAAwC,SAAUC,EAAMC,GACzF,aAEA,MAAMC,EAAiB,IAAID,EAAiB,CACxCE,WAAY,8BACZC,MAAO,OAETC,EAAkBL,EAAKM,yBAAyB,iBAClD,IAAIC,EACJ,MAAMC,EAAgB,CAOpBC,WACE,OAAOP,CACT,EASAQ,QAAQC,EAAOC,EAAYC,GACzB,IAAIC,EAAeH,EACnB,IAAII,EACJ,GAAIR,EAA4B,CAC9B,GAAIM,EAAgB,CAElBC,EAAe,GAAGH,KAASE,GAC7B,CACAE,EAAcR,EAA2BG,QAAQI,EAAcF,EAAY,MAC3E,OAAOG,EAAcA,EAAcV,EAAgBK,QAAQC,EAAOC,EACpE,CACA,OAAOP,EAAgBK,QAAQC,EAAOC,EACxC,EAMAI,yBAAyBC,GACvBV,EAA6BU,CAC/B,GAEF,OAAOT,CACT,EAAG","sourceRoot":""}},{"offset":{"line":1909,"column":0},"map":{"version":3,"names":["ChartAPI","defineUI5Class","property","type","required","expectedTypes","expectedAnnotations","defaultValue","aggregation","event","xmlEventHandler","getSelectedContexts","content","getBindingContext","getProperty","onAfterRendering","view","getController","getView","internalModelContext","chart","getContent","showMessageStrip","sChartEntityPath","data","sCacheKey","oBindingContext","getObject","setProperty","refreshNotApplicableFields","oFilterControl","oChart","FilterUtils","getNotApplicableFilters","handleSelectionChange","oEvent","aData","getParameter","bSelected","ChartRuntime","fnUpdateChart","fireSelectionChange","merge","selected","onInternalDataRequested","fireEvent","MacroAPI"],"sourceRoot":"chart","sources":["ChartAPI.ts"],"sourcesContent":["import merge from \"sap/base/util/merge\";\nimport { aggregation, defineUI5Class, event, property, xmlEventHandler } from \"sap/fe/core/helpers/ClassSupport\";\nimport ChartRuntime from \"sap/fe/macros/chart/ChartRuntime\";\nimport FilterUtils from \"sap/fe/macros/filter/FilterUtils\";\nimport MacroAPI from \"sap/fe/macros/MacroAPI\";\nimport UI5Event from \"sap/ui/base/Event\";\nimport Control from \"sap/ui/core/Control\";\nimport Context from \"sap/ui/model/odata/v4/Context\";\n\n/**\n * Definition of a custom action to be used inside the chart toolbar\n *\n * @alias sap.fe.macros.chart.Action\n * @public\n */\nexport type Action = {\n\t/**\n\t * Unique identifier of the action\n\t *\n\t * @public\n\t */\n\tkey: string;\n\t/**\n\t * The text that will be displayed for this action\n\t *\n\t * @public\n\t */\n\ttext: string;\n\t/**\n\t * Reference to the key of another action already displayed in the toolbar to properly place this one\n\t *\n\t * @public\n\t */\n\tanchor?: string;\n\t/**\n\t * Defines where this action should be placed relative to the defined anchor\n\t *\n\t * Allowed values are `Before` and `After`\n\t *\n\t * @public\n\t */\n\tplacement?: string;\n\n\t/**\n\t * Defines if the action requires a selection.\n\t *\n\t * @public\n\t */\n\trequiresSelection?: boolean;\n\n\t/**\n\t * Event handler to be called when the user chooses the action\n\t *\n\t * @public\n\t */\n\tpress: string;\n\n\t/**\n\t * Enables or disables the action\n\t *\n\t * @public\n\t */\n\tenabled?: boolean;\n};\n\n/**\n * Definition of a custom action group to be used inside the chart toolbar\n *\n * @alias sap.fe.macros.chart.ActionGroup\n * @public\n */\nexport type ActionGroup = {\n\t/**\n\t * Unique identifier of the action\n\t *\n\t * @public\n\t */\n\tkey: string;\n\n\t/**\n\t * Defines nested actions\n\t *\n\t * @public\n\t */\n\tactions: Action[];\n\n\t/**\n\t * The text that will be displayed for this action group\n\t *\n\t * @public\n\t */\n\ttext: string;\n\n\t/**\n\t * Defines where this action group should be placed relative to the defined anchor\n\t *\n\t * Allowed values are `Before` and `After`\n\t *\n\t * @public\n\t */\n\tplacement?: string;\n\n\t/**\n\t * Reference to the key of another action or action group already displayed in the toolbar to properly place this one\n\t *\n\t * @public\n\t */\n\tanchor?: string;\n};\n\n/**\n * Building block used to create a chart based on the metadata provided by OData V4.\n * <br>\n * Usually, a contextPath and metaPath is expected.\n *\n *\n * Usage example:\n * <pre>\n * &lt;macro:Chart id=\"Mychart\" contextPath=\"/RootEntity\" metaPath=\"@com.sap.vocabularies.UI.v1.Chart\" /&gt;\n * </pre>\n *\n * @alias sap.fe.macros.Chart\n * @public\n */\n@defineUI5Class(\"sap.fe.macros.chart.ChartAPI\")\nclass ChartAPI extends MacroAPI {\n\t/**\n\t *\n\t * ID of the chart\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\tid!: string;\n\n\t/**\n\t * Metadata path to the presentation (UI.Chart w or w/o qualifier)\n\t *\n\t * @public\n\t */\n\t@property({\n\t\ttype: \"string\",\n\t\trequired: true,\n\t\texpectedTypes: [\"EntitySet\", \"EntityType\", \"Singleton\", \"NavigationProperty\"],\n\t\texpectedAnnotations: [\"com.sap.vocabularies.UI.v1.Chart\"]\n\t})\n\tmetaPath!: string;\n\n\t/**\n\t * Metadata path to the entitySet or navigationProperty\n\t *\n\t * @public\n\t */\n\t@property({\n\t\ttype: \"string\",\n\t\trequired: true,\n\t\texpectedTypes: [\"EntitySet\", \"EntityType\", \"Singleton\", \"NavigationProperty\"],\n\t\texpectedAnnotations: []\n\t})\n\tcontextPath!: string;\n\n\t/**\n\t * Specifies the header text that is shown in the chart\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\theader!: string;\n\n\t/**\n\t * Controls if the header text should be shown or not\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean\", defaultValue: true })\n\theaderVisible!: boolean;\n\n\t/**\n\t * Specifies the selection mode\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\", defaultValue: \"MULTIPLE\" })\n\tselectionMode!: string;\n\n\t/**\n\t * Id of the FilterBar building block associated with the chart.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\tfilterBar!: string;\n\n\t/**\n\t * This is the parameter that specifies variant management for chart\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\tvariantManagement!: string;\n\n\t/**\n\t * Parameter which sets the personalization of the MDC_Chart\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean|string\" })\n\tpersonalization!: boolean | string;\n\n\t/**\n\t * Aggregate actions of the chart.\n\t *\n\t * @public\n\t */\n\t@aggregation({ type: \"sap.fe.macros.chart.Action\" })\n\tactions!: Action[];\n\n\t/**\n\t * Gets contexts from the chart that have been selected by the user.\n\t *\n\t * @returns Contexts of the rows selected by the user\n\t * @public\n\t */\n\tgetSelectedContexts(): Context[] {\n\t\treturn this.content?.getBindingContext(\"internal\")?.getProperty(\"selectedContexts\") || [];\n\t}\n\n\t/**\n\t * An event triggered when chart selections are changed. The event contains information about the data selected/deselected and the Boolean flag that indicates whether data is selected or deselected.\n\t *\n\t * @public\n\t */\n\t@event()\n\tselectionChange!: Function;\n\n\t/**\n\t * An event triggered when the chart state changes.\n\t *\n\t * You can set this in order to store the chart state in the iAppstate.\n\t *\n\t * @private\n\t */\n\t@event()\n\tstateChange!: Function;\n\n\t/**\n\t * An event triggered when the chart requests data.\n\t *\n\t * @private\n\t */\n\t@event()\n\tinternalDataRequested!: Function;\n\n\tonAfterRendering() {\n\t\tconst view = this.getController().getView();\n\t\tconst internalModelContext: any = view.getBindingContext(\"internal\");\n\t\tconst chart = (this as any).getContent();\n\t\tconst showMessageStrip: any = {};\n\t\tconst sChartEntityPath = chart.data(\"entitySet\"),\n\t\t\tsCacheKey = `${sChartEntityPath}Chart`,\n\t\t\toBindingContext = view.getBindingContext();\n\t\tshowMessageStrip[sCacheKey] =\n\t\t\tchart.data(\"draftSupported\") === \"true\" && !!oBindingContext && !oBindingContext.getObject(\"IsActiveEntity\");\n\t\tinternalModelContext.setProperty(\"controls/showMessageStrip\", showMessageStrip);\n\t}\n\n\trefreshNotApplicableFields(oFilterControl: Control): any[] {\n\t\tconst oChart = (this as any).getContent();\n\t\treturn FilterUtils.getNotApplicableFilters(oFilterControl, oChart);\n\t}\n\n\t@xmlEventHandler()\n\thandleSelectionChange(oEvent: UI5Event) {\n\t\tconst aData = oEvent.getParameter(\"data\");\n\t\tconst bSelected = oEvent.getParameter(\"name\") === \"selectData\";\n\t\tChartRuntime.fnUpdateChart(oEvent);\n\t\t(this as any).fireSelectionChange(merge({}, { data: aData, selected: bSelected }));\n\t}\n\n\t@xmlEventHandler()\n\tonInternalDataRequested() {\n\t\t(this as any).fireEvent(\"internalDataRequested\");\n\t}\n}\n\nexport default ChartAPI;\n"],"mappings":"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"}},{"offset":{"line":2106,"column":0},"map":{"version":3,"names":["sap","ui","define","merge","ClassSupport","ChartRuntime","FilterUtils","MacroAPI","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","xmlEventHandler","property","event","defineUI5Class","aggregation","_initializerDefineProperty","target","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","ChartAPI","type","required","expectedTypes","expectedAnnotations","defaultValue","_MacroAPI","_this","_len","arguments","length","args","Array","_key","this","_proto","getSelectedContexts","_this$content","_this$content$getBind","content","getBindingContext","getProperty","onAfterRendering","view","getController","getView","internalModelContext","chart","getContent","showMessageStrip","sChartEntityPath","data","sCacheKey","oBindingContext","getObject","setProperty","refreshNotApplicableFields","oFilterControl","oChart","getNotApplicableFilters","handleSelectionChange","oEvent","aData","getParameter","bSelected","fnUpdateChart","fireSelectionChange","selected","onInternalDataRequested","fireEvent","getOwnPropertyDescriptor"],"sources":["ChartAPI-dbg.js"],"mappings":"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","sourceRoot":"chart"}},{"offset":{"line":2111,"column":0},"map":{"version":3,"names":["mMeasureRole","personalizationValues","setCustomActionProperties","childAction","menuContentActions","action","menuActions","actionKey","getAttribute","replace","children","length","localName","namespaceURI","actionsToAdd","Array","prototype","slice","apply","actionIdx","reduce","customAction","actToAdd","actionKeyAdd","curOutObject","key","text","__noWrap","press","requiresSelection","enabled","Object","values","map","menuItem","position","placement","anchor","menu","ChartBuildingBlock","defineBuildingBlock","name","namespace","publicNamespace","blockAttribute","type","isPublic","defaultValue","blockEvent","blockAggregation","processAggregations","oProps","configuration","mSettings","_commandActions","createChartDefinition","oConverterContext","oContextObjectPath","sVisualizationPath","getContextRelativeTargetObjectPath","metaPath","getObject","$Type","aVisualizations","Visualizations","checkChartVisualizationPath","oVisualizationDefinition","getDataVisualizationConfiguration","useCondensedLayout","chartDefinition","visualizations","createBindingContext","oData","sContextPath","uid","models","converterContext","setProperty","getChartMeasures","aggregationHelper","aChartAnnotationPath","annotationPath","split","sChartAnnotationPath","filter","item","pos","indexOf","toString","replaceAll","oChart","getInvolvedDataModelObjects","getModel","contextPath","targetObject","chartContext","ChartHelper","getUiChart","chart","aAggregatedProperty","getAggregatedProperties","aMeasures","sAnnoPath","getPath","aAggregatedProperties","aChartMeasures","Measures","aChartDynamicMeasures","DynamicMeasures","aTransAggInMeasures","oAggregatedProperties","some","oMeasure","Name","value","undefined","sEntitySetPath","oTransAggregations","transAgg","oCustomAggregations","customAgg","Log","warning","bIsCustomAggregateIsMeasure","oChartMeasure","oCustomAggMeasure","getCustomAggMeasure","Error","dynamicMeasure","getDynamicMeasures","chartMeasure","sKey","setCustomAggMeasure","setTransAggMeasure","setChartMeasureAttributes","MeasureAttributes","oMeasuresModel","JSONModel","$$valueAsPromise","error","role","propertyPath","push","oTransAggMeasure","aggregationMethod","label","oAggregatedProperty","startsWith","oDynamicMeasure","AggregatableProperty","AggregationMethod","resolveBindingString","annotations","_annotations","aMeasureAttributes","measureAttribute","_setChartMeasureAttribute","sPath","DynamicMeasure","Measure","dataPoint","DataPoint","Role","oDataPoint","setMeasureRole","setMeasureDataPoint","Value","$Path","formatJSONToString","ODataMetaModelUtil","createDataPointProperty","index","$EnumMember","oCrit","sCriticality","JSON","stringify","RegExp","getDependents","commandAction","getActionCommand","xml","checkPersonalizationInChartProperties","personalization","join","verifyValidPersonlization","valid","splitArray","acceptedValues","forEach","arrayElement","includes","getVariantManagement","oChartDefinition","variantManagement","createVariantManagement","generate","id","variantSelected","headerLevel","variantSaved","getPersistenceProvider","pushActionCommand","actionContext","dataField","chartOperationAvailableMap","onExecuteAction","getPressEventForDataFieldForActionButton","onExecuteIBN","CommonHelper","getPressHandlerForDataFieldForIBN","onExecuteManifest","buildActionWrapper","oAction","dataFieldContext","dataFieldAction","getActionContext","isBoundPath","getPathToBoundActionOverload","isBound","escapeXMLAttributeValue","getOperationAvailableMap","context","isActionEnabled","isDataFieldForActionButtonEnabled","$IsBound","Action","enableOnSelect","isIBNEnabled","RequiresContext","actionCommand","getVisible","IsBound","getItems","dimensions","measures","Dimensions","formatDimensions","dimension","getItem","formatMeasures","measure","concat","prefix","getToolbarActions","aActions","getActions","onSegmentedButtonPressed","getSegmentedButton","actions","chartActions","removeMenuItems","getAction","hasOwnProperty","getCustomActions","splice","actionEnabled","getActionToolbarAction","unittestid","ariaHasPopup","visible","getActionToolbarMenuAction","useDefaultActionOnly","DefaultActionHandler","getUseDefaultActionOnly","buttonMode","getButtonMode","defaultAction","getMenuItemFromMenu","menuItemAction","pressHandler","command","noWrap","props","aMenuItems","isMenuItem","getNavigationActions","getAnnotationActions","bEnabled","Label","actionObject","getAnnotationActionsEnabled","isDialog","toolbarAction","buildAction","actionPress","getSegmentedButtonItems","sSegmentedButtonItems","isDesktop","getSegmentedButtonItem","tooltip","icon","hiddenPathContext","getHiddenPathExpressionForTableActionsAndIBN","getContextPath","lastIndexOf","initialConverterContext","getConverterContext","visualizationPath","getVisualizationPath","extraParams","getExtraParams","AggregationHelper","getEntityType","navigationPath","autoBindOnInit","vizProperties","selectionMode","toUpperCase","filterBar","getContentId","filterId","draftSupported","ModelHelper","isDraftSupported","metaModel","_applyIdToContent","_apiId","_contentId","_chartType","formatChartType","ChartType","operationAvailableMap","keys","commandActions","presentationPath","createPresentationPathContext","_sortCondtions","getSortConditions","applySupported","chartActionsContext","Actions","contextPathContext","contextPathPath","targetCollectionPath","getTargetCollection","targetCollectionPathContext","_customData","entitySet","entityType","stringifyCustomData","parse","multiSelectDisabledActions","ActionHelper","getMultiSelectDisabledActions","segmentedButtonId","multiViews","_actions","sMacroId","getTemplate","chartdelegate","chartDelegate","binding","header","Title","selectionChange","stateChange","headerVisible","height","width","noDataText","BuildingBlockBase","oVisualization","$AnnotationPath","contextObjectPath","term","resolvedTarget","getEntityTypeAnnotation","PresentationVariant","getVisualizationsFromPresentationVariant","chartViz","find","viz","visualization"],"sourceRoot":"chart","sources":["ChartBuildingBlock.ts"],"sourcesContent":["/**\n *\n * @classdesc\n * Building block for creating a Chart based on the metadata provided by OData V4.\n *\n *\n * Usage example:\n * <pre>\n * &lt;macro:Chart id=\"MyChart\" metaPath=\"@com.sap.vocabularies.UI.v1.Chart\" /&gt;\n * </pre>\n *\n * Building block for creating a Chart based on the metadata provided by OData V4.\n * @class sap.fe.macros.Chart\n * @hideconstructor\n * @private\n * @experimental\n */\nimport type { PrimitiveType } from \"@sap-ux/vocabularies-types\";\nimport {\n\tChart,\n\tChartMeasureAttributeType,\n\tChartMeasureRoleType,\n\tDataFieldForAction,\n\tDataPoint,\n\tUIAnnotationTerms\n} from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport uid from \"sap/base/util/uid\";\nimport {\n\tblockAggregation,\n\tblockAttribute,\n\tblockEvent,\n\tBuildingBlockBase,\n\tdefineBuildingBlock\n} from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport { escapeXMLAttributeValue, xml } from \"sap/fe/core/buildingBlocks/BuildingBlockRuntime\";\nimport type { BaseAction, CustomAction } from \"sap/fe/core/converters/controls/Common/Action\";\nimport type { ChartVisualization } from \"sap/fe/core/converters/controls/Common/Chart\";\nimport {\n\tgetDataVisualizationConfiguration,\n\tgetVisualizationsFromPresentationVariant,\n\tVisualizationAndPath\n} from \"sap/fe/core/converters/controls/Common/DataVisualization\";\nimport type ConverterContext from \"sap/fe/core/converters/ConverterContext\";\nimport { AggregationHelper } from \"sap/fe/core/converters/helpers/Aggregation\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type { BindingToolkitExpression } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { CompiledBindingToolkitExpression, resolveBindingString } from \"sap/fe/core/helpers/BindingToolkit\";\nimport type { PropertiesOf } from \"sap/fe/core/helpers/ClassSupport\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { getContextRelativeTargetObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport type { TitleLevel } from \"sap/ui/core/library\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport type { V4Context } from \"types/extension_types\";\nimport ActionHelper from \"../internal/helpers/ActionHelper\";\nimport DefaultActionHandler from \"../internal/helpers/DefaultActionHandler\";\nimport ODataMetaModelUtil from \"../ODataMetaModelUtil\";\nimport type { Action, ActionGroup } from \"./ChartAPI\";\nimport ChartHelper from \"./ChartHelper\";\n\nconst mMeasureRole: any = {\n\t\"com.sap.vocabularies.UI.v1.ChartMeasureRoleType/Axis1\": \"axis1\",\n\t\"com.sap.vocabularies.UI.v1.ChartMeasureRoleType/Axis2\": \"axis2\",\n\t\"com.sap.vocabularies.UI.v1.ChartMeasureRoleType/Axis3\": \"axis3\",\n\t\"com.sap.vocabularies.UI.v1.ChartMeasureRoleType/Axis4\": \"axis4\"\n};\n\ntype ExtendedActionGroup = ActionGroup & { menuContentActions?: Record<string, Action> };\ntype ActionOrActionGroup = Record<string, Action | ExtendedActionGroup>;\ntype CustomAndAction = CustomAction & (Action | ActionGroup);\ntype CustomToolbarMenuAction = {\n\tid: string;\n\ttext: string | undefined;\n\tvisible: string | undefined;\n\tenabled: string | boolean;\n\tuseDefaultActionOnly?: boolean;\n\tbuttonMode?: string;\n\tdefaultAction?: string;\n\tactions?: CustomAction;\n};\n\nenum personalizationValues {\n\tSort = \"Sort\",\n\tType = \"Type\",\n\tItem = \"Item\"\n}\n\n/**\n * Build actions and action groups with all properties for chart visualization.\n *\n * @param childAction XML node corresponding to actions\n * @returns Prepared action object\n */\nconst setCustomActionProperties = function (childAction: Element) {\n\tlet menuContentActions = null;\n\tconst action = childAction;\n\tlet menuActions: ActionGroup[] = [];\n\tconst actionKey = action.getAttribute(\"key\")?.replace(\"InlineXML_\", \"\");\n\tif (action.children.length && action.localName === \"ActionGroup\" && action.namespaceURI === \"sap.fe.macros\") {\n\t\tconst actionsToAdd = Array.prototype.slice.apply(action.children);\n\t\tlet actionIdx = 0;\n\t\tmenuContentActions = actionsToAdd.reduce((customAction, actToAdd) => {\n\t\t\tconst actionKeyAdd = actToAdd.getAttribute(\"key\")?.replace(\"InlineXML_\", \"\") || actionKey + \"_Menu_\" + actionIdx;\n\t\t\tconst curOutObject = {\n\t\t\t\tkey: actionKeyAdd,\n\t\t\t\ttext: actToAdd.getAttribute(\"text\"),\n\t\t\t\t__noWrap: true,\n\t\t\t\tpress: actToAdd.getAttribute(\"press\"),\n\t\t\t\trequiresSelection: actToAdd.getAttribute(\"requiresSelection\") === \"true\",\n\t\t\t\tenabled: actToAdd.getAttribute(\"enabled\") === null ? true : actToAdd.getAttribute(\"enabled\") === true\n\t\t\t};\n\t\t\tcustomAction[curOutObject.key] = curOutObject;\n\t\t\tactionIdx++;\n\t\t\treturn customAction;\n\t\t}, {});\n\t\tmenuActions = Object.values(menuContentActions)\n\t\t\t.slice(-action.children.length)\n\t\t\t.map(function (menuItem: any) {\n\t\t\t\treturn menuItem.key;\n\t\t\t});\n\t}\n\treturn {\n\t\tkey: actionKey,\n\t\ttext: action.getAttribute(\"text\"),\n\t\tposition: {\n\t\t\tplacement: action.getAttribute(\"placement\"),\n\t\t\tanchor: action.getAttribute(\"anchor\")\n\t\t},\n\t\t__noWrap: true,\n\t\tpress: action.getAttribute(\"press\"),\n\t\trequiresSelection: action.getAttribute(\"requiresSelection\") === \"true\",\n\t\tenabled: action.getAttribute(\"enabled\") === null ? true : action.getAttribute(\"enabled\"),\n\t\tmenu: menuActions.length ? menuActions : null,\n\t\tmenuContentActions: menuContentActions\n\t};\n};\n\ntype MeasureType = {\n\tid?: string;\n\tkey?: string;\n\trole?: string;\n\tpropertyPath?: string;\n\taggregationMethod?: string;\n\tlabel?: string | BindingToolkitExpression<PrimitiveType>;\n\tvalue?: string;\n\tdataPoint?: string;\n\tname?: string;\n};\n\ntype DimensionType = {\n\tid?: string;\n\tkey?: string;\n\trole?: string;\n\tpropertyPath?: string;\n\tlabel?: string | BindingToolkitExpression<PrimitiveType>;\n\tvalue?: string;\n};\n\ntype CommandAction = {\n\tactionContext: V4Context;\n\tonExecuteAction: string;\n\tonExecuteIBN: string;\n\tonExecuteManifest: CompiledBindingToolkitExpression;\n};\n\ntype ToolBarAction = {\n\tunittestid: string;\n\tid?: string;\n\tlabel: string;\n\tariaHasPopup?: string;\n\tpress: string;\n\tenabled: string | boolean;\n\tvisible: string | boolean;\n};\n\ntype ChartCustomData = {\n\ttargetCollectionPath: string;\n\tentitySet: string;\n\tentityType: string;\n\toperationAvailableMap: string;\n\tmultiSelectDisabledActions: string;\n\tsegmentedButtonId: string;\n\tcustomAgg: string;\n\ttransAgg: string;\n\tapplySupported: string;\n\tvizProperties: string;\n\tdraftSupported?: boolean;\n\tmultiViews?: boolean;\n};\n@defineBuildingBlock({\n\tname: \"Chart\",\n\tnamespace: \"sap.fe.macros.internal\",\n\tpublicNamespace: \"sap.fe.macros\"\n})\nexport default class ChartBuildingBlock extends BuildingBlockBase {\n\t/**\n\t * ID of the chart\n\t */\n\t@blockAttribute({ type: \"string\", isPublic: true })\n\tid!: string;\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\"\n\t})\n\tchartDefinition!: ChartVisualization;\n\n\t/**\n\t * Metadata path to the presentation (UI.Chart w or w/o qualifier)\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\tisPublic: true\n\t})\n\tmetaPath!: V4Context;\n\n\t/**\n\t * Metadata path to the entitySet or navigationProperty\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\tisPublic: true\n\t})\n\tcontextPath!: V4Context;\n\n\t/**\n\t * The height of the chart\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tdefaultValue: \"100%\"\n\t})\n\theight?: string;\n\n\t/**\n\t * The width of the chart\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tdefaultValue: \"100%\"\n\t})\n\twidth?: string;\n\n\t/**\n\t * Specifies the header text that is shown in the chart\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tisPublic: true\n\t})\n\theader?: string;\n\n\t/**\n\t * Specifies the visibility of the chart header\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\tisPublic: true\n\t})\n\theaderVisible?: boolean;\n\n\t/**\n\t * Defines the \"aria-level\" of the chart header\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.core.TitleLevel\",\n\t\tdefaultValue: \"Auto\",\n\t\tisPublic: true\n\t})\n\theaderLevel?: TitleLevel;\n\n\t/**\n\t * Specifies the selection mode\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tdefaultValue: \"MULTIPLE\",\n\t\tisPublic: true\n\t})\n\tselectionMode?: string;\n\n\t/**\n\t * Parameter which sets the personalization of the chart\n\t */\n\t@blockAttribute({\n\t\ttype: \"string|boolean\",\n\t\tisPublic: true\n\t})\n\tpersonalization?: string | boolean;\n\n\t/**\n\t * Parameter which sets the ID of the filterbar associating it to the chart\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tisPublic: true\n\t})\n\tfilterBar?: string;\n\n\t/**\n\t * \tParameter which sets the noDataText for the chart\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tnoDataText?: string;\n\n\t/**\n\t * Parameter which sets the chart delegate for the chart\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tchartDelegate?: string;\n\n\t/**\n\t * Parameter which sets the visualization properties for the chart\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tvizProperties?: string;\n\n\t/**\n\t * The actions to be shown in the action area of the chart\n\t */\n\t@blockAttribute({ type: \"sap.ui.model.Context\" })\n\tchartActions?: V4Context;\n\n\t@blockAttribute({ type: \"boolean\" })\n\tdraftSupported?: boolean;\n\n\t@blockAttribute({ type: \"boolean\" })\n\tautoBindOnInit?: boolean;\n\n\t@blockAttribute({ type: \"string\" })\n\tvisible?: string;\n\n\t@blockAttribute({ type: \"string\" })\n\tnavigationPath?: string;\n\n\t@blockAttribute({ type: \"string\" })\n\tfilter?: string;\n\n\t@blockAttribute({ type: \"string\" })\n\tmeasures?: V4Context;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\tdefaultValue: false\n\t})\n\t_applyIdToContent?: boolean;\n\n\t@blockAttribute({ type: \"string\", isPublic: true })\n\tvariantManagement?: string;\n\n\t@blockEvent()\n\tvariantSelected!: Function;\n\n\t@blockEvent()\n\tvariantSaved!: Function;\n\n\t/**\n\t * The XML and manifest actions to be shown in the action area of the chart\n\t */\n\t@blockAggregation({\n\t\ttype: \"sap.fe.macros.internal.chart.Action | sap.fe.macros.internal.chart.ActionGroup\",\n\t\tisPublic: true,\n\t\tprocessAggregations: setCustomActionProperties\n\t})\n\tactions!: ActionOrActionGroup;\n\n\t@blockEvent()\n\tonSegmentedButtonPressed!: string;\n\n\t/**\n\t * An event triggered when chart selections are changed. The event contains information about the data selected/deselected and\n\t * the Boolean flag that indicates whether data is selected or deselected\n\t */\n\t@blockEvent()\n\tselectionChange!: Function;\n\n\t/**\n\t * Event handler to react to the stateChange event of the chart.\n\t */\n\t@blockEvent()\n\tstateChange!: Function;\n\tuseCondensedLayout!: boolean;\n\t_apiId!: string | undefined;\n\t_contentId: string | undefined;\n\t_commandActions: CommandAction[] = [];\n\t_chartType: string;\n\t_sortCondtions: string | undefined;\n\t_customData: ChartCustomData;\n\t_actions: string;\n\n\tconstructor(oProps: PropertiesOf<ChartBuildingBlock>, configuration: any, mSettings: any) {\n\t\tsuper(oProps, configuration, mSettings);\n\t\tconst oContextObjectPath = getInvolvedDataModelObjects(oProps.metaPath!, oProps.contextPath);\n\t\tconst initialConverterContext = this.getConverterContext(oContextObjectPath, /*oProps.contextPath*/ undefined, mSettings);\n\t\tconst visualizationPath = ChartBuildingBlock.getVisualizationPath(oProps, oContextObjectPath, initialConverterContext);\n\t\tconst extraParams = ChartBuildingBlock.getExtraParams(oProps, visualizationPath);\n\t\tconst oConverterContext = this.getConverterContext(oContextObjectPath, /*oProps.contextPath*/ undefined, mSettings, extraParams);\n\t\tconst aggregationHelper = new AggregationHelper(oConverterContext.getEntityType(), oConverterContext);\n\t\tconst oChartDefinition: ChartVisualization =\n\t\t\toProps.chartDefinition === undefined || oProps.chartDefinition === null\n\t\t\t\t? this.createChartDefinition(oProps, oConverterContext, oContextObjectPath)\n\t\t\t\t: oProps.chartDefinition;\n\t\t// API Properties\n\t\tthis.navigationPath = oChartDefinition.navigationPath;\n\t\tthis.autoBindOnInit = oChartDefinition.autoBindOnInit;\n\t\tthis.vizProperties = oChartDefinition.vizProperties;\n\t\tthis.chartActions = this.createBindingContext(oChartDefinition.actions, mSettings);\n\t\tthis.selectionMode = oProps.selectionMode!.toUpperCase();\n\t\tif (oProps.filterBar) {\n\t\t\tthis.filter = this.getContentId(oProps.filterBar);\n\t\t} else if (!oProps.filter) {\n\t\t\tthis.filter = oChartDefinition.filterId;\n\t\t}\n\t\tthis.onSegmentedButtonPressed = oChartDefinition.onSegmentedButtonPressed;\n\t\tthis.checkPersonalizationInChartProperties(oProps);\n\t\tthis.variantManagement = this.getVariantManagement(oProps, oChartDefinition);\n\t\tthis.visible = oChartDefinition.visible;\n\t\tlet sContextPath = oProps.contextPath!.getPath();\n\t\tsContextPath = sContextPath[sContextPath.length - 1] === \"/\" ? sContextPath.slice(0, -1) : sContextPath;\n\t\tthis.draftSupported = ModelHelper.isDraftSupported(mSettings.models.metaModel, sContextPath);\n\t\tif (oProps._applyIdToContent ?? false) {\n\t\t\tthis._apiId = oProps.id + \"::Chart\";\n\t\t\tthis._contentId = oProps.id;\n\t\t} else {\n\t\t\tthis._apiId = oProps.id;\n\t\t\tthis._contentId = this.getContentId(oProps.id!);\n\t\t}\n\t\tconst chartContext = ChartHelper.getUiChart(this.metaPath);\n\t\tconst chart = chartContext.getObject();\n\t\tthis._chartType = ChartHelper.formatChartType(chart.ChartType);\n\t\tconst operationAvailableMap = ChartHelper.getOperationAvailableMap(chartContext.getObject(), {\n\t\t\tcontext: chartContext\n\t\t});\n\t\tif (Object.keys(this.chartDefinition?.commandActions).length > 0) {\n\t\t\tObject.keys(this.chartDefinition?.commandActions).forEach((sKey: string) => {\n\t\t\t\tconst action = this.chartDefinition?.commandActions[sKey];\n\t\t\t\tconst actionContext = this.createBindingContext(action, mSettings);\n\t\t\t\tconst dataFieldContext = action.annotationPath && this.contextPath.getModel().createBindingContext(action.annotationPath);\n\t\t\t\tconst dataField = dataFieldContext && dataFieldContext.getObject();\n\t\t\t\tconst chartOperationAvailableMap = escapeXMLAttributeValue(operationAvailableMap);\n\t\t\t\tthis.pushActionCommand(actionContext, dataField, chartOperationAvailableMap, action);\n\t\t\t});\n\t\t}\n\t\tthis.measures = this.getChartMeasures(oProps, aggregationHelper);\n\t\tconst presentationPath = CommonHelper.createPresentationPathContext(this.metaPath);\n\t\tthis._sortCondtions = ChartHelper.getSortConditions(\n\t\t\tthis.metaPath,\n\t\t\tthis.metaPath.getObject(),\n\t\t\tpresentationPath.getPath(),\n\t\t\tthis.chartDefinition.applySupported\n\t\t);\n\t\tconst chartActionsContext = this.contextPath.getModel().createBindingContext(chartContext.getPath() + \"/Actions\", chart.Actions);\n\t\tconst contextPathContext = this.contextPath.getModel().createBindingContext(this.contextPath.getPath(), this.contextPath);\n\t\tconst contextPathPath = CommonHelper.getContextPath(this.contextPath, { context: contextPathContext });\n\t\tconst targetCollectionPath = CommonHelper.getTargetCollection(this.contextPath);\n\t\tconst targetCollectionPathContext = this.contextPath.getModel().createBindingContext(targetCollectionPath, this.contextPath);\n\t\tthis._customData = {\n\t\t\ttargetCollectionPath: contextPathPath,\n\t\t\tentitySet:\n\t\t\t\ttypeof targetCollectionPathContext.getObject() === \"string\"\n\t\t\t\t\t? targetCollectionPathContext.getObject()\n\t\t\t\t\t: targetCollectionPathContext.getObject(\"@sapui.name\"),\n\t\t\tentityType: contextPathPath + \"/\",\n\t\t\toperationAvailableMap: CommonHelper.stringifyCustomData(JSON.parse(operationAvailableMap)),\n\t\t\tmultiSelectDisabledActions:\n\t\t\t\tActionHelper.getMultiSelectDisabledActions(chart.Actions, {\n\t\t\t\t\tcontext: chartActionsContext\n\t\t\t\t}) + \"\",\n\t\t\tsegmentedButtonId: generate([this.id, \"SegmentedButton\", \"TemplateContentView\"]),\n\t\t\tcustomAgg: CommonHelper.stringifyCustomData(this.chartDefinition?.customAgg),\n\t\t\ttransAgg: CommonHelper.stringifyCustomData(this.chartDefinition?.transAgg),\n\t\t\tapplySupported: CommonHelper.stringifyCustomData(this.chartDefinition?.applySupported),\n\t\t\tvizProperties: this.vizProperties,\n\t\t\tdraftSupported: this.draftSupported,\n\t\t\tmultiViews: this.chartDefinition?.multiViews\n\t\t};\n\t\tthis._actions = this.chartActions ? this.getToolbarActions(chartContext) : xml``;\n\t}\n\n\tcreateChartDefinition = (oProps: any, oConverterContext: ConverterContext, oContextObjectPath: DataModelObjectPath) => {\n\t\tlet sVisualizationPath = getContextRelativeTargetObjectPath(oContextObjectPath);\n\t\tif (oProps.metaPath?.getObject().$Type === \"com.sap.vocabularies.UI.v1.PresentationVariantType\") {\n\t\t\tconst aVisualizations = oProps.metaPath.getObject().Visualizations;\n\t\t\tsVisualizationPath = ChartBuildingBlock.checkChartVisualizationPath(aVisualizations, sVisualizationPath);\n\t\t}\n\t\tconst oVisualizationDefinition = getDataVisualizationConfiguration(\n\t\t\tsVisualizationPath!,\n\t\t\toProps.useCondensedLayout as boolean,\n\t\t\toConverterContext\n\t\t);\n\t\toProps.chartDefinition = oVisualizationDefinition.visualizations[0] as ChartVisualization;\n\t\tthis.chartDefinition = oVisualizationDefinition.visualizations[0] as ChartVisualization;\n\t\treturn this.chartDefinition;\n\t};\n\n\tstatic checkChartVisualizationPath = (aVisualizations: Record<string, string>[], sVisualizationPath: string | undefined) => {\n\t\taVisualizations.forEach(function (oVisualization: Record<string, string>) {\n\t\t\tif (oVisualization.$AnnotationPath.indexOf(\"@com.sap.vocabularies.UI.v1.Chart\") > -1) {\n\t\t\t\tsVisualizationPath = oVisualization.$AnnotationPath;\n\t\t\t}\n\t\t});\n\t\treturn sVisualizationPath;\n\t};\n\n\tgetContentId(sMacroId: string) {\n\t\treturn `${sMacroId}-content`;\n\t}\n\n\tstatic getExtraParams(props: PropertiesOf<ChartBuildingBlock>, visualizationPath: string | undefined) {\n\t\tconst extraParams: Record<string, object> = {};\n\t\tif (props.actions) {\n\t\t\tObject.values(props.actions)?.forEach((item) => {\n\t\t\t\tprops.actions = { ...(props.actions as ActionOrActionGroup), ...(item as ExtendedActionGroup).menuContentActions };\n\t\t\t\tdelete (item as ExtendedActionGroup).menuContentActions;\n\t\t\t});\n\t\t}\n\t\tif (visualizationPath) {\n\t\t\textraParams[visualizationPath] = {\n\t\t\t\tactions: props.actions\n\t\t\t};\n\t\t}\n\t\treturn extraParams;\n\t}\n\n\tcreateBindingContext = function (oData: object | BaseAction[] | CustomAction, mSettings: any) {\n\t\tconst sContextPath = `/${uid()}`;\n\t\tmSettings.models.converterContext.setProperty(sContextPath, oData);\n\t\treturn mSettings.models.converterContext.createBindingContext(sContextPath);\n\t};\n\n\tgetChartMeasures = (oProps: any, aggregationHelper: AggregationHelper): V4Context => {\n\t\tconst aChartAnnotationPath = oProps.chartDefinition.annotationPath.split(\"/\");\n\t\t// this is required because getAbsolutePath in converterContext returns \"/SalesOrderManage/_Item/_Item/@com.sap.vocabularies.v1.Chart\" as annotationPath\n\t\tconst sChartAnnotationPath = aChartAnnotationPath\n\t\t\t.filter(function (item: object, pos: number) {\n\t\t\t\treturn aChartAnnotationPath.indexOf(item) == pos;\n\t\t\t})\n\t\t\t.toString()\n\t\t\t.replaceAll(\",\", \"/\");\n\t\tconst oChart = getInvolvedDataModelObjects(\n\t\t\tthis.metaPath.getModel().createBindingContext(sChartAnnotationPath),\n\t\t\tthis.contextPath\n\t\t).targetObject;\n\t\tconst chartContext = ChartHelper.getUiChart(this.metaPath);\n\t\tconst chart = chartContext.getObject();\n\t\tconst aAggregatedProperty = aggregationHelper.getAggregatedProperties(\"AggregatedProperty\");\n\t\tlet aMeasures: MeasureType[] = [];\n\t\tconst sAnnoPath = oProps.metaPath.getPath();\n\t\tconst aAggregatedProperties = aggregationHelper.getAggregatedProperties(\"AggregatedProperties\");\n\t\tconst aChartMeasures = oChart.Measures ? oChart.Measures : [];\n\t\tconst aChartDynamicMeasures = oChart.DynamicMeasures ? oChart.DynamicMeasures : [];\n\t\t//check if there are measures pointing to aggregatedproperties\n\t\tconst aTransAggInMeasures = aAggregatedProperties[0]\n\t\t\t? aAggregatedProperties[0].filter(function (oAggregatedProperties: Record<string, string>) {\n\t\t\t\t\treturn aChartMeasures.some(function (oMeasure: MeasureType) {\n\t\t\t\t\t\treturn oAggregatedProperties.Name === oMeasure.value;\n\t\t\t\t\t});\n\t\t\t  })\n\t\t\t: undefined;\n\t\tconst sEntitySetPath = sAnnoPath.replace(\n\t\t\t/@com.sap.vocabularies.UI.v1.(Chart|PresentationVariant|SelectionPresentationVariant).*/,\n\t\t\t\"\"\n\t\t);\n\t\tconst oTransAggregations = oProps.chartDefinition.transAgg;\n\t\tconst oCustomAggregations = oProps.chartDefinition.customAgg;\n\t\t// intimate the user if there is Aggregatedproperty configured with no DYnamicMeasures, bu there are measures with AggregatedProperties\n\t\tif (aAggregatedProperty.length > 0 && !aChartDynamicMeasures && aTransAggInMeasures.length > 0) {\n\t\t\tLog.warning(\n\t\t\t\t\"The transformational aggregate measures are configured as Chart.Measures but should be configured as Chart.DynamicMeasures instead. Please check the SAP Help documentation and correct the configuration accordingly.\"\n\t\t\t);\n\t\t}\n\t\tconst bIsCustomAggregateIsMeasure = aChartMeasures.some((oChartMeasure: MeasureType) => {\n\t\t\tconst oCustomAggMeasure = this.getCustomAggMeasure(oCustomAggregations, oChartMeasure);\n\t\t\treturn !!oCustomAggMeasure;\n\t\t});\n\t\tif (aAggregatedProperty.length > 0 && !aChartDynamicMeasures.length && !bIsCustomAggregateIsMeasure) {\n\t\t\tthrow new Error(\"Please configure DynamicMeasures for the chart\");\n\t\t}\n\t\tif (aAggregatedProperty.length > 0) {\n\t\t\tfor (const dynamicMeasure of aChartDynamicMeasures) {\n\t\t\t\taMeasures = this.getDynamicMeasures(aMeasures, dynamicMeasure, sEntitySetPath, oChart);\n\t\t\t}\n\t\t}\n\t\tfor (const chartMeasure of aChartMeasures) {\n\t\t\tconst sKey = chartMeasure.value;\n\t\t\tconst oCustomAggMeasure = this.getCustomAggMeasure(oCustomAggregations, chartMeasure);\n\t\t\tconst oMeasure: MeasureType = {};\n\t\t\tif (oCustomAggMeasure) {\n\t\t\t\taMeasures = this.setCustomAggMeasure(aMeasures, oMeasure, oCustomAggMeasure, sKey);\n\t\t\t\t//if there is neither aggregatedProperty nor measures pointing to customAggregates, but we have normal measures. Now check if these measures are part of AggregatedProperties Obj\n\t\t\t} else if (aAggregatedProperty.length === 0 && oTransAggregations[sKey]) {\n\t\t\t\taMeasures = this.setTransAggMeasure(aMeasures, oMeasure, oTransAggregations, sKey);\n\t\t\t}\n\t\t\tthis.setChartMeasureAttributes(chart.MeasureAttributes, sEntitySetPath, oMeasure);\n\t\t}\n\t\tconst oMeasuresModel: JSONModel = new JSONModel(aMeasures);\n\t\t(oMeasuresModel as any).$$valueAsPromise = true;\n\t\treturn oMeasuresModel.createBindingContext(\"/\") as V4Context;\n\t};\n\n\tsetCustomAggMeasure = (aMeasures: MeasureType[], oMeasure: MeasureType, oCustomAggMeasure: MeasureType, sKey: string) => {\n\t\tif (sKey.indexOf(\"/\") > -1) {\n\t\t\tLog.error(\"$expand is not yet supported. Measure: ${sKey} from an association cannot be used\");\n\t\t}\n\t\toMeasure.key = oCustomAggMeasure.value;\n\t\toMeasure.role = \"axis1\";\n\n\t\toMeasure.propertyPath = oCustomAggMeasure.value;\n\t\taMeasures.push(oMeasure);\n\t\treturn aMeasures;\n\t};\n\n\tsetTransAggMeasure = (\n\t\taMeasures: MeasureType[],\n\t\toMeasure: MeasureType,\n\t\toTransAggregations: Record<string, MeasureType>,\n\t\tsKey: string\n\t) => {\n\t\tconst oTransAggMeasure = oTransAggregations[sKey];\n\t\toMeasure.key = oTransAggMeasure.name;\n\t\toMeasure.role = \"axis1\";\n\t\toMeasure.propertyPath = sKey;\n\t\toMeasure.aggregationMethod = oTransAggMeasure.aggregationMethod;\n\t\toMeasure.label = oTransAggMeasure.label || oMeasure.label;\n\t\taMeasures.push(oMeasure);\n\t\treturn aMeasures;\n\t};\n\n\tgetDynamicMeasures = (aMeasures: MeasureType[], dynamicMeasure: MeasureType, sEntitySetPath: string, oChart: Chart): MeasureType[] => {\n\t\tconst sKey = dynamicMeasure.value || \"\";\n\t\tconst oAggregatedProperty = getInvolvedDataModelObjects(\n\t\t\tthis.metaPath.getModel().createBindingContext(sEntitySetPath + sKey),\n\t\t\tthis.contextPath\n\t\t).targetObject;\n\t\tif (sKey.indexOf(\"/\") > -1) {\n\t\t\tLog.error(\"$expand is not yet supported. Measure: ${sKey} from an association cannot be used\");\n\t\t\t// check if the annotation path is wrong\n\t\t} else if (!oAggregatedProperty) {\n\t\t\tthrow new Error(\"Please provide the right AnnotationPath to the Dynamic Measure \" + dynamicMeasure.value);\n\t\t\t// check if the path starts with @\n\t\t} else if (dynamicMeasure.value?.startsWith(\"@com.sap.vocabularies.Analytics.v1.AggregatedProperty\") === null) {\n\t\t\tthrow new Error(\"Please provide the right AnnotationPath to the Dynamic Measure \" + dynamicMeasure.value);\n\t\t} else {\n\t\t\t// check if AggregatedProperty is defined in given DynamicMeasure\n\t\t\tconst oDynamicMeasure: MeasureType = {\n\t\t\t\tkey: oAggregatedProperty.Name,\n\t\t\t\trole: \"axis1\"\n\t\t\t};\n\t\t\toDynamicMeasure.propertyPath = oAggregatedProperty.AggregatableProperty.value;\n\t\t\toDynamicMeasure.aggregationMethod = oAggregatedProperty.AggregationMethod;\n\t\t\toDynamicMeasure.label = resolveBindingString(\n\t\t\t\toAggregatedProperty.annotations._annotations[\"com.sap.vocabularies.Common.v1.Label\"] ||\n\t\t\t\t\tgetInvolvedDataModelObjects(\n\t\t\t\t\t\tthis.metaPath\n\t\t\t\t\t\t\t.getModel()\n\t\t\t\t\t\t\t.createBindingContext(sEntitySetPath + oDynamicMeasure.propertyPath + \"@com.sap.vocabularies.Common.v1.Label\"),\n\t\t\t\t\t\tthis.contextPath\n\t\t\t\t\t).targetObject\n\t\t\t);\n\t\t\tthis.setChartMeasureAttributes(oChart.MeasureAttributes, sEntitySetPath, oDynamicMeasure);\n\t\t\taMeasures.push(oDynamicMeasure);\n\t\t}\n\t\treturn aMeasures;\n\t};\n\n\tgetCustomAggMeasure = (oCustomAggregations: Record<string, MeasureType | undefined>, oMeasure: MeasureType) => {\n\t\tif (oMeasure.value && oCustomAggregations[oMeasure.value]) {\n\t\t\treturn oMeasure;\n\t\t}\n\t\treturn null;\n\t};\n\n\tsetChartMeasureAttributes = (aMeasureAttributes: ChartMeasureAttributeType[], sEntitySetPath: string, oMeasure: MeasureType) => {\n\t\tif (aMeasureAttributes?.length) {\n\t\t\tfor (const measureAttribute of aMeasureAttributes) {\n\t\t\t\tthis._setChartMeasureAttribute(measureAttribute, sEntitySetPath, oMeasure);\n\t\t\t}\n\t\t}\n\t};\n\n\t_setChartMeasureAttribute = (measureAttribute: ChartMeasureAttributeType, sEntitySetPath: string, oMeasure: MeasureType) => {\n\t\tconst sPath = measureAttribute.DynamicMeasure ? measureAttribute?.DynamicMeasure?.value : measureAttribute?.Measure?.value;\n\t\tconst dataPoint = measureAttribute.DataPoint ? measureAttribute?.DataPoint?.value : null;\n\t\tconst role = measureAttribute.Role;\n\t\tconst oDataPoint =\n\t\t\tdataPoint &&\n\t\t\tgetInvolvedDataModelObjects(this.metaPath.getModel().createBindingContext(sEntitySetPath + dataPoint), this.contextPath)\n\t\t\t\t.targetObject;\n\t\tif (oMeasure.key === sPath) {\n\t\t\tthis.setMeasureRole(oMeasure, role);\n\t\t\t//still to add data point, but UI5 Chart API is missing\n\t\t\tthis.setMeasureDataPoint(oMeasure, oDataPoint);\n\t\t}\n\t};\n\n\tsetMeasureDataPoint = (oMeasure: MeasureType, oDataPoint: DataPoint | undefined) => {\n\t\tif (oDataPoint && oDataPoint.Value.$Path == oMeasure.key) {\n\t\t\toMeasure.dataPoint = this.formatJSONToString(ODataMetaModelUtil.createDataPointProperty(oDataPoint)) || \"\";\n\t\t}\n\t};\n\n\tsetMeasureRole = (oMeasure: MeasureType, role: ChartMeasureRoleType | undefined) => {\n\t\tif (role) {\n\t\t\tconst index = (role as any).$EnumMember;\n\t\t\toMeasure.role = mMeasureRole[index];\n\t\t}\n\t};\n\n\tformatJSONToString = (oCrit: object) => {\n\t\tif (!oCrit) {\n\t\t\treturn undefined;\n\t\t}\n\t\tlet sCriticality = JSON.stringify(oCrit);\n\t\tsCriticality = sCriticality.replace(new RegExp(\"{\", \"g\"), \"\\\\{\");\n\t\tsCriticality = sCriticality.replace(new RegExp(\"}\", \"g\"), \"\\\\}\");\n\t\treturn sCriticality;\n\t};\n\n\tgetDependents = (chartContext: V4Context) => {\n\t\tif (this._commandActions.length > 0) {\n\t\t\treturn this._commandActions.map((commandAction: CommandAction) => {\n\t\t\t\treturn this.getActionCommand(commandAction, chartContext);\n\t\t\t});\n\t\t}\n\t\treturn xml``;\n\t};\n\n\t/**\n\t *\n\t * @param oProps Specifies the chart properties\n\t */\n\tcheckPersonalizationInChartProperties = (oProps: any) => {\n\t\tif (oProps.personalization) {\n\t\t\tif (oProps.personalization === \"false\") {\n\t\t\t\tthis.personalization = undefined;\n\t\t\t} else if (oProps.personalization === \"true\") {\n\t\t\t\tthis.personalization = Object.values(personalizationValues).join(\",\");\n\t\t\t} else if (this.verifyValidPersonlization(oProps.personalization) === true) {\n\t\t\t\tthis.personalization = oProps.personalization;\n\t\t\t} else {\n\t\t\t\tthis.personalization = undefined;\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t *\n\t * @param personalization\n\t * @returns `true` or `false` if the personalization is valid or not valid\n\t */\n\tverifyValidPersonlization = (personalization: String) => {\n\t\tlet valid: Boolean = true;\n\t\tconst splitArray = personalization.split(\",\");\n\t\tconst acceptedValues: string[] = Object.values(personalizationValues);\n\t\tsplitArray.forEach((arrayElement) => {\n\t\t\tif (!acceptedValues.includes(arrayElement)) {\n\t\t\t\tvalid = false;\n\t\t\t}\n\t\t});\n\t\treturn valid;\n\t};\n\n\tgetVariantManagement = (oProps: any, oChartDefinition: ChartVisualization) => {\n\t\tlet variantManagement = oProps.variantManagement ? oProps.variantManagement : oChartDefinition.variantManagement;\n\t\tvariantManagement = this.personalization === undefined ? \"None\" : variantManagement;\n\t\treturn variantManagement;\n\t};\n\n\tcreateVariantManagement = () => {\n\t\tconst personalization = this.personalization;\n\t\tif (personalization) {\n\t\t\tconst variantManagement = this.variantManagement;\n\t\t\tif (variantManagement === \"Control\") {\n\t\t\t\treturn xml`\n\t\t\t\t\t<mdc:variant>\n\t\t\t\t\t<variant:VariantManagement\n\t\t\t\t\t\tid=\"${generate([this.id, \"VM\"])}\"\n\t\t\t\t\t\tfor=\"${this.id}\"\n\t\t\t\t\t\tshowSetAsDefault=\"${true}\"\n\t\t\t\t\t\tselect=\"${this.variantSelected}\"\n\t\t\t\t\t\theaderLevel=\"${this.headerLevel}\"\n\t\t\t\t\t\tsave=\"${this.variantSaved}\"\n\t\t\t\t\t/>\n\t\t\t\t\t</mdc:variant>\n\t\t\t`;\n\t\t\t} else if (variantManagement === \"None\" || variantManagement === \"Page\") {\n\t\t\t\treturn xml``;\n\t\t\t}\n\t\t} else if (!personalization) {\n\t\t\tLog.warning(\"Variant Management cannot be enabled when personalization is disabled\");\n\t\t}\n\t\treturn xml``;\n\t};\n\n\tgetPersistenceProvider = () => {\n\t\tif (this.variantManagement === \"None\") {\n\t\t\treturn xml`<p13n:PersistenceProvider id=\"${generate([this.id, \"PersistenceProvider\"])}\" for=\"${this.id}\"/>`;\n\t\t}\n\t\treturn xml``;\n\t};\n\n\tpushActionCommand = (\n\t\tactionContext: V4Context,\n\t\tdataField: DataFieldForAction | undefined,\n\t\tchartOperationAvailableMap: string | undefined,\n\t\taction: BaseAction | { handlerModule: string; handlerMethod: string }\n\t) => {\n\t\tif (dataField) {\n\t\t\tconst commandAction = {\n\t\t\t\tactionContext: actionContext,\n\t\t\t\tonExecuteAction: ChartHelper.getPressEventForDataFieldForActionButton(this.id, dataField, chartOperationAvailableMap || \"\"),\n\t\t\t\tonExecuteIBN: CommonHelper.getPressHandlerForDataFieldForIBN(dataField, `\\${internal>selectedContexts}`, false),\n\t\t\t\tonExecuteManifest: CommonHelper.buildActionWrapper(action as { handlerModule: string; handlerMethod: string }, this)\n\t\t\t};\n\t\t\tthis._commandActions.push(commandAction);\n\t\t}\n\t};\n\n\tgetActionCommand = (commandAction: CommandAction, chartContext: V4Context) => {\n\t\tconst oAction = commandAction.actionContext;\n\t\tconst action = oAction.getObject();\n\t\tconst dataFieldContext = action.annotationPath && this.contextPath.getModel().createBindingContext(action.annotationPath);\n\t\tconst dataField = dataFieldContext && dataFieldContext.getObject();\n\t\tconst dataFieldAction = this.contextPath.getModel().createBindingContext(action.annotationPath + \"/Action\");\n\t\tconst actionContext = CommonHelper.getActionContext(dataFieldAction);\n\t\tconst isBoundPath = CommonHelper.getPathToBoundActionOverload(dataFieldAction);\n\t\tconst isBound = this.contextPath.getModel().createBindingContext(isBoundPath).getObject();\n\t\tconst chartOperationAvailableMap = escapeXMLAttributeValue(\n\t\t\tChartHelper.getOperationAvailableMap(chartContext.getObject(), {\n\t\t\t\tcontext: chartContext\n\t\t\t})\n\t\t);\n\t\tconst isActionEnabled = action.enabled\n\t\t\t? action.enabled\n\t\t\t: ChartHelper.isDataFieldForActionButtonEnabled(\n\t\t\t\t\tisBound && isBound.$IsBound,\n\t\t\t\t\tdataField.Action,\n\t\t\t\t\tthis.contextPath,\n\t\t\t\t\tchartOperationAvailableMap || \"\",\n\t\t\t\t\taction.enableOnSelect || \"\"\n\t\t\t  );\n\t\tlet isIBNEnabled;\n\t\tif (action.enabled) {\n\t\t\tisIBNEnabled = action.enabled;\n\t\t} else if (dataField.RequiresContext) {\n\t\t\tisIBNEnabled = \"{= %{internal>numberOfSelectedContexts} >= 1}\";\n\t\t}\n\t\tconst actionCommand = xml`<internalMacro:ActionCommand\n\t\taction=\"${action}\"\n\t\tonExecuteAction=\"${commandAction.onExecuteAction}\"\n\t\tonExecuteIBN=\"${commandAction.onExecuteIBN}\"\n\t\tonExecuteManifest=\"${commandAction.onExecuteManifest}\"\n\t\tisIBNEnabled=\"${isIBNEnabled}\"\n\t\tisActionEnabled=\"${isActionEnabled}\"\n\t\tvisible=\"${this.getVisible(dataFieldContext)}\"\n\t/>`;\n\t\tif (\n\t\t\taction.type == \"ForAction\" &&\n\t\t\t(!isBound || isBound.IsBound !== true || actionContext[\"@Org.OData.Core.V1.OperationAvailable\"] !== false)\n\t\t) {\n\t\t\treturn actionCommand;\n\t\t} else if (action.type == \"ForAction\") {\n\t\t\treturn xml``;\n\t\t} else {\n\t\t\treturn actionCommand;\n\t\t}\n\t};\n\n\tgetItems = (chartContext: V4Context) => {\n\t\tconst chart = chartContext.getObject();\n\t\tconst dimensions: string[] = [];\n\t\tconst measures: string[] = [];\n\t\tif (chart.Dimensions) {\n\t\t\tChartHelper.formatDimensions(chartContext)\n\t\t\t\t.getObject()\n\t\t\t\t.forEach((dimension: DimensionType) => {\n\t\t\t\t\tdimension.id = generate([this.id, \"dimension\", dimension.key]);\n\t\t\t\t\tdimensions.push(\n\t\t\t\t\t\tthis.getItem(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: dimension.id,\n\t\t\t\t\t\t\t\tkey: dimension.key,\n\t\t\t\t\t\t\t\tlabel: dimension.label,\n\t\t\t\t\t\t\t\trole: dimension.role\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\"_fe_groupable_\",\n\t\t\t\t\t\t\t\"groupable\"\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t}\n\t\tif (this.measures) {\n\t\t\tChartHelper.formatMeasures(this.measures).forEach((measure: MeasureType) => {\n\t\t\t\tmeasure.id = generate([this.id, \"measure\", measure.key]);\n\t\t\t\tmeasures.push(\n\t\t\t\t\tthis.getItem(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: measure.id,\n\t\t\t\t\t\t\tkey: measure.key,\n\t\t\t\t\t\t\tlabel: measure.label,\n\t\t\t\t\t\t\trole: measure.role\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"_fe_aggregatable_\",\n\t\t\t\t\t\t\"aggregatable\"\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t\tif (dimensions.length && measures.length) {\n\t\t\treturn dimensions.concat(measures);\n\t\t}\n\t\treturn xml``;\n\t};\n\n\tgetItem = (item: MeasureType | DimensionType, prefix: string, type: string) => {\n\t\treturn xml`<chart:Item\n\t\t\tid=\"${item.id}\"\n\t\t\tname=\"${prefix + item.key}\"\n\t\t\ttype=\"${type}\"\n\t\t\tlabel=\"${resolveBindingString(item.label as string, \"string\")}\"\n\t\t\trole=\"${item.role}\"\n\t\t/>`;\n\t};\n\n\tgetToolbarActions = (chartContext: V4Context) => {\n\t\tconst aActions = this.getActions(chartContext);\n\t\tif (this.onSegmentedButtonPressed) {\n\t\t\taActions.push(this.getSegmentedButton());\n\t\t}\n\t\tif (aActions.length > 0) {\n\t\t\treturn xml`<mdc:actions>${aActions}</mdc:actions>`;\n\t\t}\n\t\treturn xml``;\n\t};\n\n\tgetActions = (chartContext: V4Context) => {\n\t\tlet actions = this.chartActions?.getObject();\n\t\tactions = this.removeMenuItems(actions);\n\t\treturn actions.map((action: CustomAndAction) => {\n\t\t\tif (action.annotationPath) {\n\t\t\t\t// Load annotation based actions\n\t\t\t\treturn this.getAction(action, chartContext, false);\n\t\t\t} else if (action.hasOwnProperty(\"noWrap\")) {\n\t\t\t\t// Load XML or manifest based actions / action groups\n\t\t\t\treturn this.getCustomActions(action, chartContext);\n\t\t\t}\n\t\t});\n\t};\n\n\tremoveMenuItems = (actions: BaseAction[]) => {\n\t\t// If action is already part of menu in action group, then it will\n\t\t// be removed from the main actions list\n\t\tfor (const action of actions) {\n\t\t\tif (action.menu) {\n\t\t\t\taction.menu.forEach((item) => {\n\t\t\t\t\tif (actions.indexOf(item as BaseAction) !== -1) {\n\t\t\t\t\t\tactions.splice(actions.indexOf(item as BaseAction), 1);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn actions;\n\t};\n\n\tgetCustomActions = (action: CustomAndAction, chartContext: V4Context) => {\n\t\tlet actionEnabled = action.enabled as string | boolean;\n\t\tif ((action.requiresSelection ?? false) && action.enabled === \"true\") {\n\t\t\tactionEnabled = \"{= %{internal>numberOfSelectedContexts} >= 1}\";\n\t\t}\n\t\tif (action.type === \"Default\") {\n\t\t\t// Load XML or manifest based toolbar actions\n\t\t\treturn this.getActionToolbarAction(\n\t\t\t\taction,\n\t\t\t\t{\n\t\t\t\t\tid: generate([this.id, action.id]),\n\t\t\t\t\tunittestid: \"DataFieldForActionButtonAction\",\n\t\t\t\t\tlabel: action.text ? action.text : \"\",\n\t\t\t\t\tariaHasPopup: undefined,\n\t\t\t\t\tpress: action.press ? action.press : \"\",\n\t\t\t\t\tenabled: actionEnabled,\n\t\t\t\t\tvisible: action.visible ? action.visible : false\n\t\t\t\t},\n\t\t\t\tfalse\n\t\t\t);\n\t\t} else if (action.type === \"Menu\") {\n\t\t\t// Load action groups (Menu)\n\t\t\treturn this.getActionToolbarMenuAction(\n\t\t\t\t{\n\t\t\t\t\tid: generate([this.id, action.id]),\n\t\t\t\t\ttext: action.text,\n\t\t\t\t\tvisible: action.visible,\n\t\t\t\t\tenabled: actionEnabled,\n\t\t\t\t\tuseDefaultActionOnly: DefaultActionHandler.getUseDefaultActionOnly(action),\n\t\t\t\t\tbuttonMode: DefaultActionHandler.getButtonMode(action),\n\t\t\t\t\tdefaultAction: undefined,\n\t\t\t\t\tactions: action\n\t\t\t\t},\n\t\t\t\tchartContext\n\t\t\t);\n\t\t}\n\t};\n\n\tgetMenuItemFromMenu = (menuItemAction: CustomAction & { handlerModule: string; handlerMethod: string }, chartContext: V4Context) => {\n\t\tlet pressHandler;\n\t\tif (menuItemAction.annotationPath) {\n\t\t\t//Annotation based action is passed as menu item for menu button\n\t\t\treturn this.getAction(menuItemAction, chartContext, true);\n\t\t}\n\t\tif (menuItemAction.command) {\n\t\t\tpressHandler = \"cmd:\" + menuItemAction.command;\n\t\t} else if (menuItemAction.noWrap ?? false) {\n\t\t\tpressHandler = menuItemAction.press;\n\t\t} else {\n\t\t\tpressHandler = CommonHelper.buildActionWrapper(menuItemAction, this);\n\t\t}\n\t\treturn xml`<MenuItem\n\t\tcore:require=\"{FPM: 'sap/fe/core/helpers/FPMHelper'}\"\n\t\ttext=\"${menuItemAction.text}\"\n\t\tpress=\"${pressHandler}\"\n\t\tvisible=\"${menuItemAction.visible}\"\n\t\tenabled=\"${menuItemAction.enabled}\"\n\t/>`;\n\t};\n\n\tgetActionToolbarMenuAction = (props: CustomToolbarMenuAction, chartContext: V4Context) => {\n\t\tconst aMenuItems = props.actions?.menu?.map((action: CustomAction & { handlerModule: string; handlerMethod: string }) => {\n\t\t\treturn this.getMenuItemFromMenu(action, chartContext);\n\t\t});\n\t\treturn xml`<mdcat:ActionToolbarAction>\n\t\t\t<MenuButton\n\t\t\ttext=\"${props.text}\"\n\t\t\ttype=\"Transparent\"\n\t\t\tmenuPosition=\"BeginBottom\"\n\t\t\tid=\"${props.id}\"\n\t\t\tvisible=\"${props.visible}\"\n\t\t\tenabled=\"${props.enabled}\"\n\t\t\tuseDefaultActionOnly=\"${props.useDefaultActionOnly}\"\n\t\t\tbuttonMode=\"${props.buttonMode}\"\n\t\t\tdefaultAction=\"${props.defaultAction}\"\n\t\t\t>\n\t\t\t\t<menu>\n\t\t\t\t\t<Menu>\n\t\t\t\t\t\t${aMenuItems}\n\t\t\t\t\t</Menu>\n\t\t\t\t</menu>\n\t\t\t</MenuButton>\n\t\t</mdcat:ActionToolbarAction>`;\n\t};\n\n\tgetAction = (action: BaseAction, chartContext: V4Context, isMenuItem: boolean) => {\n\t\tconst dataFieldContext = this.contextPath.getModel().createBindingContext(action.annotationPath || \"\") as V4Context;\n\t\tif (action.type === \"ForNavigation\") {\n\t\t\treturn this.getNavigationActions(action, dataFieldContext, isMenuItem);\n\t\t} else if (action.type === \"ForAction\") {\n\t\t\treturn this.getAnnotationActions(chartContext, action, dataFieldContext, isMenuItem);\n\t\t}\n\t\treturn xml``;\n\t};\n\n\tgetNavigationActions = (action: BaseAction, dataFieldContext: V4Context, isMenuItem: boolean) => {\n\t\tlet bEnabled = \"true\";\n\t\tconst dataField = dataFieldContext.getObject();\n\t\tif (action.enabled !== undefined) {\n\t\t\tbEnabled = action.enabled;\n\t\t} else if (dataField.RequiresContext) {\n\t\t\tbEnabled = \"{= %{internal>numberOfSelectedContexts} >= 1}\";\n\t\t}\n\t\treturn this.getActionToolbarAction(\n\t\t\taction,\n\t\t\t{\n\t\t\t\tid: undefined,\n\t\t\t\tunittestid: \"DataFieldForIntentBasedNavigationButtonAction\",\n\t\t\t\tlabel: dataField.Label,\n\t\t\t\tariaHasPopup: undefined,\n\t\t\t\tpress: CommonHelper.getPressHandlerForDataFieldForIBN(dataField, `\\${internal>selectedContexts}`, false),\n\t\t\t\tenabled: bEnabled,\n\t\t\t\tvisible: this.getVisible(dataFieldContext)\n\t\t\t},\n\t\t\tisMenuItem\n\t\t);\n\t};\n\n\tgetAnnotationActions = (chartContext: V4Context, action: BaseAction, dataFieldContext: V4Context, isMenuItem: boolean) => {\n\t\tconst dataFieldAction = this.contextPath.getModel().createBindingContext(action.annotationPath + \"/Action\");\n\t\tconst actionContext = this.contextPath.getModel().createBindingContext(CommonHelper.getActionContext(dataFieldAction));\n\t\tconst actionObject = actionContext.getObject();\n\t\tconst isBoundPath = CommonHelper.getPathToBoundActionOverload(dataFieldAction);\n\t\tconst isBound = this.contextPath.getModel().createBindingContext(isBoundPath).getObject();\n\t\tconst dataField = dataFieldContext.getObject();\n\t\tif (!isBound || isBound.$IsBound !== true || actionObject[\"@Org.OData.Core.V1.OperationAvailable\"] !== false) {\n\t\t\tconst bEnabled = this.getAnnotationActionsEnabled(action, isBound, dataField, chartContext);\n\t\t\tconst ariaHasPopup = CommonHelper.isDialog(actionObject, { context: actionContext });\n\t\t\tconst chartOperationAvailableMap =\n\t\t\t\tescapeXMLAttributeValue(\n\t\t\t\t\tChartHelper.getOperationAvailableMap(chartContext.getObject(), {\n\t\t\t\t\t\tcontext: chartContext\n\t\t\t\t\t})\n\t\t\t\t) || \"\";\n\t\t\treturn this.getActionToolbarAction(\n\t\t\t\taction,\n\t\t\t\t{\n\t\t\t\t\tid: generate([this.id, getInvolvedDataModelObjects(dataFieldContext)]),\n\t\t\t\t\tunittestid: \"DataFieldForActionButtonAction\",\n\t\t\t\t\tlabel: dataField.Label,\n\t\t\t\t\tariaHasPopup: ariaHasPopup,\n\t\t\t\t\tpress: ChartHelper.getPressEventForDataFieldForActionButton(this.id, dataField, chartOperationAvailableMap),\n\t\t\t\t\tenabled: bEnabled,\n\t\t\t\t\tvisible: this.getVisible(dataFieldContext)\n\t\t\t\t},\n\t\t\t\tisMenuItem\n\t\t\t);\n\t\t}\n\t\treturn xml``;\n\t};\n\n\tgetActionToolbarAction = (action: BaseAction & { noWrap?: boolean }, toolbarAction: ToolBarAction, isMenuItem: boolean) => {\n\t\tif (isMenuItem) {\n\t\t\treturn xml`\n\t\t\t<MenuItem\n\t\t\t\ttext=\"${toolbarAction.label}\"\n\t\t\t\tpress=\"${action.command ? \"cmd:\" + action.command : toolbarAction.press}\"\n\t\t\t\tenabled=\"${toolbarAction.enabled}\"\n\t\t\t\tvisible=\"${toolbarAction.visible}\"\n\t\t\t/>`;\n\t\t} else {\n\t\t\treturn this.buildAction(action, toolbarAction);\n\t\t}\n\t};\n\n\tbuildAction = (action: BaseAction, toolbarAction: ToolBarAction) => {\n\t\tlet actionPress: string | undefined = \"\";\n\t\tif (action.hasOwnProperty(\"noWrap\")) {\n\t\t\tif (action.command) {\n\t\t\t\tactionPress = \"cmd:\" + action.command;\n\t\t\t} else if ((action as CustomAction).noWrap === true) {\n\t\t\t\tactionPress = toolbarAction.press;\n\t\t\t} else if (!action.annotationPath) {\n\t\t\t\tactionPress = CommonHelper.buildActionWrapper(\n\t\t\t\t\taction as BaseAction & { handlerModule: string; handlerMethod: string },\n\t\t\t\t\tthis\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn xml`<mdcat:ActionToolbarAction>\n\t\t\t<Button\n\t\t\t\tcore:require=\"{FPM: 'sap/fe/core/helpers/FPMHelper'}\"\n\t\t\t\tunittest:id=\"${toolbarAction.unittestid}\"\n\t\t\t\tid=\"${toolbarAction.id}\"\n\t\t\t\ttext=\"${toolbarAction.label}\"\n\t\t\t\tariaHasPopup=\"${toolbarAction.ariaHasPopup}\"\n\t\t\t\tpress=\"${actionPress}\"\n\t\t\t\tenabled=\"${toolbarAction.enabled}\"\n\t\t\t\tvisible=\"${toolbarAction.visible}\"\n\t\t\t/>\n\t\t   </mdcat:ActionToolbarAction>`;\n\t\t} else {\n\t\t\treturn xml`<mdcat:ActionToolbarAction>\n\t\t\t<Button\n\t\t\t\tunittest:id=\"${toolbarAction.unittestid}\"\n\t\t\t\tid=\"${toolbarAction.id}\"\n\t\t\t\ttext=\"${toolbarAction.label}\"\n\t\t\t\tariaHasPopup=\"${toolbarAction.ariaHasPopup}\"\n\t\t\t\tpress=\"${action.command ? \"cmd:\" + action.command : toolbarAction.press}\"\n\t\t\t\tenabled=\"${toolbarAction.enabled}\"\n\t\t\t\tvisible=\"${toolbarAction.visible}\"\n\t\t\t/>\n\t\t</mdcat:ActionToolbarAction>`;\n\t\t}\n\t};\n\n\tgetAnnotationActionsEnabled = (\n\t\taction: BaseAction,\n\t\tisBound: Record<string, boolean>,\n\t\tdataField: DataFieldForAction,\n\t\tchartContext: V4Context\n\t) => {\n\t\treturn action.enabled !== undefined\n\t\t\t? action.enabled\n\t\t\t: ChartHelper.isDataFieldForActionButtonEnabled(\n\t\t\t\t\tisBound && isBound.$IsBound,\n\t\t\t\t\tdataField.Action as string,\n\t\t\t\t\tthis.contextPath,\n\t\t\t\t\tChartHelper.getOperationAvailableMap(chartContext.getObject(), { context: chartContext }),\n\t\t\t\t\taction.enableOnSelect || \"\"\n\t\t\t  );\n\t};\n\n\tgetSegmentedButton = () => {\n\t\treturn xml`<mdcat:ActionToolbarAction layoutInformation=\"{\n\t\t\taggregationName: 'end',\n\t\t\talignment: 'End'\n\t\t}\">\n\t\t\t<SegmentedButton\n\t\t\t\tid=\"${generate([this.id, \"SegmentedButton\", \"TemplateContentView\"])}\"\n\t\t\t\tselect=\"${this.onSegmentedButtonPressed}\"\n\t\t\t\tvisible=\"{= \\${pageInternal>alpContentView} !== 'Table' }\"\n\t\t\t\tselectedKey=\"{pageInternal>alpContentView}\"\n\t\t\t>\n\t\t\t\t<items>\n\t\t\t\t\t${this.getSegmentedButtonItems()}\n\t\t\t\t</items>\n\t\t\t</SegmentedButton>\n\t\t</mdcat:ActionToolbarAction>`;\n\t};\n\n\tgetSegmentedButtonItems = () => {\n\t\tconst sSegmentedButtonItems = [];\n\t\tif (CommonHelper.isDesktop()) {\n\t\t\tsSegmentedButtonItems.push(\n\t\t\t\tthis.getSegmentedButtonItem(\n\t\t\t\t\t\"{sap.fe.i18n>M_COMMON_HYBRID_SEGMENTED_BUTTON_ITEM_TOOLTIP}\",\n\t\t\t\t\t\"Hybrid\",\n\t\t\t\t\t\"sap-icon://chart-table-view\"\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\tsSegmentedButtonItems.push(\n\t\t\tthis.getSegmentedButtonItem(\"{sap.fe.i18n>M_COMMON_CHART_SEGMENTED_BUTTON_ITEM_TOOLTIP}\", \"Chart\", \"sap-icon://bar-chart\")\n\t\t);\n\t\tsSegmentedButtonItems.push(\n\t\t\tthis.getSegmentedButtonItem(\"{sap.fe.i18n>M_COMMON_TABLE_SEGMENTED_BUTTON_ITEM_TOOLTIP}\", \"Table\", \"sap-icon://table-view\")\n\t\t);\n\t\treturn sSegmentedButtonItems;\n\t};\n\n\tgetSegmentedButtonItem = (tooltip: string, key: string, icon: string) => {\n\t\treturn xml`<SegmentedButtonItem\n\t\t\ttooltip=\"${tooltip}\"\n\t\t\tkey=\"${key}\"\n\t\t\ticon=\"${icon}\"\n\t\t/>`;\n\t};\n\n\t/**\n\t * Returns the annotation path pointing to the visualization annotation (Chart).\n\t *\n\t * @param props The chart properties\n\t * @param contextObjectPath The datamodel object path for the chart\n\t * @param converterContext The converter context\n\t * @returns The annotation path\n\t */\n\tstatic getVisualizationPath = (\n\t\tprops: PropertiesOf<ChartBuildingBlock>,\n\t\tcontextObjectPath: DataModelObjectPath,\n\t\tconverterContext: ConverterContext\n\t) => {\n\t\tlet metaPath: string | undefined = getContextRelativeTargetObjectPath(contextObjectPath) as string;\n\t\tif (contextObjectPath.targetObject.term === UIAnnotationTerms.Chart) {\n\t\t\treturn metaPath; // MetaPath is already pointing to a Chart\n\t\t}\n\t\tif (props.metaPath?.getObject().$Type === \"com.sap.vocabularies.UI.v1.PresentationVariantType\") {\n\t\t\tconst aVisualizations = props.metaPath.getObject().Visualizations;\n\t\t\tmetaPath = ChartBuildingBlock.checkChartVisualizationPath(aVisualizations, metaPath);\n\t\t}\n\t\tif (metaPath) {\n\t\t\t//Need to switch to the context related the PV or SPV\n\t\t\tconst resolvedTarget = converterContext.getEntityTypeAnnotation(metaPath);\n\n\t\t\tlet visualizations: VisualizationAndPath[] = [];\n\t\t\tswitch (contextObjectPath.targetObject?.term) {\n\t\t\t\tcase UIAnnotationTerms.SelectionPresentationVariant:\n\t\t\t\t\tif (contextObjectPath.targetObject.PresentationVariant) {\n\t\t\t\t\t\tvisualizations = getVisualizationsFromPresentationVariant(\n\t\t\t\t\t\t\tcontextObjectPath.targetObject.PresentationVariant,\n\t\t\t\t\t\t\tmetaPath,\n\t\t\t\t\t\t\tresolvedTarget.converterContext\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase UIAnnotationTerms.PresentationVariant:\n\t\t\t\t\tvisualizations = getVisualizationsFromPresentationVariant(\n\t\t\t\t\t\tcontextObjectPath.targetObject,\n\t\t\t\t\t\tmetaPath,\n\t\t\t\t\t\tresolvedTarget.converterContext\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tLog.error(`Bad metapath parameter for chart : ${contextObjectPath.targetObject.term}`);\n\t\t\t}\n\n\t\t\tconst chartViz = visualizations.find((viz) => {\n\t\t\t\treturn viz.visualization.term === UIAnnotationTerms.Chart;\n\t\t\t});\n\n\t\t\tif (chartViz) {\n\t\t\t\treturn chartViz.annotationPath;\n\t\t\t} else {\n\t\t\t\treturn metaPath; // Fallback\n\t\t\t}\n\t\t} else {\n\t\t\tLog.error(`Bad metapath parameter for chart : ${contextObjectPath.targetObject.term}`);\n\t\t\treturn metaPath;\n\t\t}\n\t};\n\n\tgetVisible = (dataFieldContext: V4Context) => {\n\t\tconst dataField = dataFieldContext.getObject();\n\t\tif (dataField[\"@com.sap.vocabularies.UI.v1.Hidden\"] && dataField[\"@com.sap.vocabularies.UI.v1.Hidden\"].$Path) {\n\t\t\tconst hiddenPathContext = this.contextPath\n\t\t\t\t.getModel()\n\t\t\t\t.createBindingContext(\n\t\t\t\t\tdataFieldContext.getPath() + \"/@com.sap.vocabularies.UI.v1.Hidden/$Path\",\n\t\t\t\t\tdataField[\"@com.sap.vocabularies.UI.v1.Hidden\"].$Path\n\t\t\t\t);\n\t\t\treturn ChartHelper.getHiddenPathExpressionForTableActionsAndIBN(dataField[\"@com.sap.vocabularies.UI.v1.Hidden\"].$Path, {\n\t\t\t\tcontext: hiddenPathContext\n\t\t\t});\n\t\t} else if (dataField[\"@com.sap.vocabularies.UI.v1.Hidden\"]) {\n\t\t\treturn !dataField[\"@com.sap.vocabularies.UI.v1.Hidden\"];\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t};\n\n\tgetContextPath = () => {\n\t\treturn this.contextPath.getPath().lastIndexOf(\"/\") === this.contextPath.getPath().length - 1\n\t\t\t? this.contextPath.getPath().replaceAll(\"/\", \"\")\n\t\t\t: this.contextPath.getPath().split(\"/\")[this.contextPath.getPath().split(\"/\").length - 1];\n\t};\n\n\tgetTemplate() {\n\t\tconst chartContext = ChartHelper.getUiChart(this.metaPath);\n\t\tconst chart = chartContext.getObject();\n\t\tlet chartdelegate = \"\";\n\t\tif (this.chartDelegate) {\n\t\t\tchartdelegate = this.chartDelegate;\n\t\t} else {\n\t\t\tconst sContextPath = this.getContextPath();\n\t\t\tchartdelegate =\n\t\t\t\t\"{name:'sap/fe/macros/chart/ChartDelegate', payload: {contextPath: '\" +\n\t\t\t\tsContextPath +\n\t\t\t\t\"', parameters:{$$groupId:'$auto.Workers'}, selectionMode: '\" +\n\t\t\t\tthis.selectionMode +\n\t\t\t\t\"'}}\";\n\t\t}\n\t\tconst binding = \"{internal>controls/\" + this.id + \"}\";\n\t\tif (!this.header) {\n\t\t\tthis.header = chart.Title;\n\t\t}\n\t\treturn xml`\n\t\t\t<macro:ChartAPI xmlns=\"sap.m\" xmlns:macro=\"sap.fe.macros.chart\" xmlns:variant=\"sap.ui.fl.variants\" xmlns:p13n=\"sap.ui.mdc.p13n\" xmlns:unittest=\"http://schemas.sap.com/sapui5/preprocessorextension/sap.fe.unittesting/1\" xmlns:macrodata=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\" xmlns:internalMacro=\"sap.fe.macros.internal\" xmlns:chart=\"sap.ui.mdc.chart\" xmlns:mdc=\"sap.ui.mdc\" xmlns:mdcat=\"sap.ui.mdc.actiontoolbar\" xmlns:core=\"sap.ui.core\" id=\"${\n\t\t\t\tthis._apiId\n\t\t\t}\" selectionChange=\"${this.selectionChange}\" stateChange=\"${this.stateChange}\">\n\t\t\t\t<macro:layoutData>\n\t\t\t\t\t<FlexItemData growFactor=\"1\" shrinkFactor=\"1\" />\n\t\t\t\t</macro:layoutData>\n\t\t\t\t<mdc:Chart\n\t\t\t\t\tbinding=\"${binding}\"\n\t\t\t\t\tunittest:id=\"ChartMacroFragment\"\n\t\t\t\t\tid=\"${this._contentId}\"\n\t\t\t\t\tchartType=\"${this._chartType}\"\n\t\t\t\t\tsortConditions=\"${this._sortCondtions}\"\n\t\t\t\t\theader=\"${this.header}\"\n\t\t\t\t\theaderVisible=\"${this.headerVisible}\"\n\t\t\t\t\theight=\"${this.height}\"\n\t\t\t\t\twidth=\"${this.width}\"\n\t\t\t\t\theaderLevel=\"${this.headerLevel}\"\n\t\t\t\t\tp13nMode=\"${this.personalization}\"\n\t\t\t\t\tfilter=\"${this.filter}\"\n\t\t\t\t\tnoDataText=\"${this.noDataText}\"\n\t\t\t\t\tautoBindOnInit=\"${this.autoBindOnInit}\"\n\t\t\t\t\tdelegate=\"${chartdelegate}\"\n\t\t\t\t\tmacrodata:targetCollectionPath=\"${this._customData.targetCollectionPath}\"\n\t\t\t\t\tmacrodata:entitySet=\"${this._customData.entitySet}\"\n\t\t\t\t\tmacrodata:entityType=\"${this._customData.entityType}\"\n\t\t\t\t\tmacrodata:operationAvailableMap=\"${this._customData.operationAvailableMap}\"\n\t\t\t\t\tmacrodata:multiSelectDisabledActions=\"${this._customData.multiSelectDisabledActions}\"\n\t\t\t\t\tmacrodata:segmentedButtonId=\"${this._customData.segmentedButtonId}\"\n\t\t\t\t\tmacrodata:customAgg=\"${this._customData.customAgg}\"\n\t\t\t\t\tmacrodata:transAgg=\"${this._customData.transAgg}\"\n\t\t\t\t\tmacrodata:applySupported=\"${this._customData.applySupported}\"\n\t\t\t\t\tmacrodata:vizProperties=\"${this._customData.vizProperties}\"\n\t\t\t\t\tmacrodata:draftSupported=\"${this._customData.draftSupported}\"\n\t\t\t\t\tmacrodata:multiViews=\"${this._customData.multiViews}\"\n\t\t\t\t\tvisible=\"${this.visible}\"\n\t\t\t\t>\n\t\t\t\t<mdc:dependents>\n\t\t\t\t\t${this.getDependents(chartContext)}\n\t\t\t\t\t${this.getPersistenceProvider()}\n\t\t\t\t</mdc:dependents>\n\t\t\t\t<mdc:items>\n\t\t\t\t\t${this.getItems(chartContext)}\n\t\t\t\t</mdc:items>\n\t\t\t\t${this._actions}\n\t\t\t\t${this.createVariantManagement()}\n\t\t\t</mdc:Chart>\n\t\t</macro:ChartAPI>`;\n\t}\n}\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;EA+DA,MAAMA,YAAiB,GAAG;IACzB,uDAAuD,EAAE,OAAO;IAChE,uDAAuD,EAAE,OAAO;IAChE,uDAAuD,EAAE,OAAO;IAChE,uDAAuD,EAAE;EAC1D,CAAC;EAAC,IAgBGC,qBAAqB;EAM1B;AACA;AACA;AACA;AACA;AACA;EALA,WANKA,qBAAqB;IAArBA,qBAAqB;IAArBA,qBAAqB;IAArBA,qBAAqB;EAAA,GAArBA,qBAAqB,KAArBA,qBAAqB;EAY1B,MAAMC,yBAAyB,GAAG,UAAUC,WAAoB,EAAE;IAAA;IACjE,IAAIC,kBAAkB,GAAG,IAAI;IAC7B,MAAMC,MAAM,GAAGF,WAAW;IAC1B,IAAIG,WAA0B,GAAG,EAAE;IACnC,MAAMC,SAAS,2BAAGF,MAAM,CAACG,YAAY,CAAC,KAAK,CAAC,yDAA1B,qBAA4BC,OAAO,CAAC,YAAY,EAAE,EAAE,CAAC;IACvE,IAAIJ,MAAM,CAACK,QAAQ,CAACC,MAAM,IAAIN,MAAM,CAACO,SAAS,KAAK,aAAa,IAAIP,MAAM,CAACQ,YAAY,KAAK,eAAe,EAAE;MAC5G,MAAMC,YAAY,GAAGC,KAAK,CAACC,SAAS,CAACC,KAAK,CAACC,KAAK,CAACb,MAAM,CAACK,QAAQ,CAAC;MACjE,IAAIS,SAAS,GAAG,CAAC;MACjBf,kBAAkB,GAAGU,YAAY,CAACM,MAAM,CAAC,CAACC,YAAY,EAAEC,QAAQ,KAAK;QAAA;QACpE,MAAMC,YAAY,GAAG,0BAAAD,QAAQ,CAACd,YAAY,CAAC,KAAK,CAAC,0DAA5B,sBAA8BC,OAAO,CAAC,YAAY,EAAE,EAAE,CAAC,KAAIF,SAAS,GAAG,QAAQ,GAAGY,SAAS;QAChH,MAAMK,YAAY,GAAG;UACpBC,GAAG,EAAEF,YAAY;UACjBG,IAAI,EAAEJ,QAAQ,CAACd,YAAY,CAAC,MAAM,CAAC;UACnCmB,QAAQ,EAAE,IAAI;UACdC,KAAK,EAAEN,QAAQ,CAACd,YAAY,CAAC,OAAO,CAAC;UACrCqB,iBAAiB,EAAEP,QAAQ,CAACd,YAAY,CAAC,mBAAmB,CAAC,KAAK,MAAM;UACxEsB,OAAO,EAAER,QAAQ,CAACd,YAAY,CAAC,SAAS,CAAC,KAAK,IAAI,GAAG,IAAI,GAAGc,QAAQ,CAACd,YAAY,CAAC,SAAS,CAAC,KAAK;QAClG,CAAC;QACDa,YAAY,CAACG,YAAY,CAACC,GAAG,CAAC,GAAGD,YAAY;QAC7CL,SAAS,EAAE;QACX,OAAOE,YAAY;MACpB,CAAC,EAAE,CAAC,CAAC,CAAC;MACNf,WAAW,GAAGyB,MAAM,CAACC,MAAM,CAAC5B,kBAAkB,CAAC,CAC7Ca,KAAK,CAAC,CAACZ,MAAM,CAACK,QAAQ,CAACC,MAAM,CAAC,CAC9BsB,GAAG,CAAC,UAAUC,QAAa,EAAE;QAC7B,OAAOA,QAAQ,CAACT,GAAG;MACpB,CAAC,CAAC;IACJ;IACA,OAAO;MACNA,GAAG,EAAElB,SAAS;MACdmB,IAAI,EAAErB,MAAM,CAACG,YAAY,CAAC,MAAM,CAAC;MACjC2B,QAAQ,EAAE;QACTC,SAAS,EAAE/B,MAAM,CAACG,YAAY,CAAC,WAAW,CAAC;QAC3C6B,MAAM,EAAEhC,MAAM,CAACG,YAAY,CAAC,QAAQ;MACrC,CAAC;MACDmB,QAAQ,EAAE,IAAI;MACdC,KAAK,EAAEvB,MAAM,CAACG,YAAY,CAAC,OAAO,CAAC;MACnCqB,iBAAiB,EAAExB,MAAM,CAACG,YAAY,CAAC,mBAAmB,CAAC,KAAK,MAAM;MACtEsB,OAAO,EAAEzB,MAAM,CAACG,YAAY,CAAC,SAAS,CAAC,KAAK,IAAI,GAAG,IAAI,GAAGH,MAAM,CAACG,YAAY,CAAC,SAAS,CAAC;MACxF8B,IAAI,EAAEhC,WAAW,CAACK,MAAM,GAAGL,WAAW,GAAG,IAAI;MAC7CF,kBAAkB,EAAEA;IACrB,CAAC;EACF,CAAC;EAAC,IA2DmBmC,kBAAkB,WALtCC,mBAAmB,CAAC;IACpBC,IAAI,EAAE,OAAO;IACbC,SAAS,EAAE,wBAAwB;IACnCC,eAAe,EAAE;EAClB,CAAC,CAAC,UAKAC,cAAc,CAAC;IAAEC,IAAI,EAAE,QAAQ;IAAEC,QAAQ,EAAE;EAAK,CAAC,CAAC,UAGlDF,cAAc,CAAC;IACfC,IAAI,EAAE;EACP,CAAC,CAAC,UAMDD,cAAc,CAAC;IACfC,IAAI,EAAE,sBAAsB;IAC5BC,QAAQ,EAAE;EACX,CAAC,CAAC,UAMDF,cAAc,CAAC;IACfC,IAAI,EAAE,sBAAsB;IAC5BC,QAAQ,EAAE;EACX,CAAC,CAAC,UAMDF,cAAc,CAAC;IACfC,IAAI,EAAE,QAAQ;IACdE,YAAY,EAAE;EACf,CAAC,CAAC,UAMDH,cAAc,CAAC;IACfC,IAAI,EAAE,QAAQ;IACdE,YAAY,EAAE;EACf,CAAC,CAAC,UAMDH,cAAc,CAAC;IACfC,IAAI,EAAE,QAAQ;IACdC,QAAQ,EAAE;EACX,CAAC,CAAC,UAMDF,cAAc,CAAC;IACfC,IAAI,EAAE,SAAS;IACfC,QAAQ,EAAE;EACX,CAAC,CAAC,WAMDF,cAAc,CAAC;IACfC,IAAI,EAAE,wBAAwB;IAC9BE,YAAY,EAAE,MAAM;IACpBD,QAAQ,EAAE;EACX,CAAC,CAAC,WAMDF,cAAc,CAAC;IACfC,IAAI,EAAE,QAAQ;IACdE,YAAY,EAAE,UAAU;IACxBD,QAAQ,EAAE;EACX,CAAC,CAAC,WAMDF,cAAc,CAAC;IACfC,IAAI,EAAE,gBAAgB;IACtBC,QAAQ,EAAE;EACX,CAAC,CAAC,WAMDF,cAAc,CAAC;IACfC,IAAI,EAAE,QAAQ;IACdC,QAAQ,EAAE;EACX,CAAC,CAAC,WAMDF,cAAc,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC,WAMlCD,cAAc,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC,WAMlCD,cAAc,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC,WAMlCD,cAAc,CAAC;IAAEC,IAAI,EAAE;EAAuB,CAAC,CAAC,WAGhDD,cAAc,CAAC;IAAEC,IAAI,EAAE;EAAU,CAAC,CAAC,WAGnCD,cAAc,CAAC;IAAEC,IAAI,EAAE;EAAU,CAAC,CAAC,WAGnCD,cAAc,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC,WAGlCD,cAAc,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC,WAGlCD,cAAc,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC,WAGlCD,cAAc,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC,WAGlCD,cAAc,CAAC;IACfC,IAAI,EAAE,SAAS;IACfE,YAAY,EAAE;EACf,CAAC,CAAC,WAGDH,cAAc,CAAC;IAAEC,IAAI,EAAE,QAAQ;IAAEC,QAAQ,EAAE;EAAK,CAAC,CAAC,WAGlDE,UAAU,EAAE,WAGZA,UAAU,EAAE,WAMZC,gBAAgB,CAAC;IACjBJ,IAAI,EAAE,gFAAgF;IACtFC,QAAQ,EAAE,IAAI;IACdI,mBAAmB,EAAEhD;EACtB,CAAC,CAAC,WAGD8C,UAAU,EAAE,WAOZA,UAAU,EAAE,WAMZA,UAAU,EAAE;IAAA;IAvLb;AACD;AACA;;IASC;AACD;AACA;;IAOC;AACD;AACA;;IAOC;AACD;AACA;;IAOC;AACD;AACA;;IAOC;AACD;AACA;;IAOC;AACD;AACA;;IAOC;AACD;AACA;;IAQC;AACD;AACA;;IAQC;AACD;AACA;;IAOC;AACD;AACA;;IAOC;AACD;AACA;;IAIC;AACD;AACA;;IAIC;AACD;AACA;;IAIC;AACD;AACA;;IAqCC;AACD;AACA;;IAWC;AACD;AACA;AACA;;IAIC;AACD;AACA;;IAYC,4BAAYG,OAAwC,EAAEC,aAAkB,EAAEC,UAAc,EAAE;MAAA;MAAA;MACzF,sCAAMF,OAAM,EAAEC,aAAa,EAAEC,UAAS,CAAC;MAAC;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA,MAPzCC,eAAe,GAAoB,EAAE;MAAA,MA+FrCC,qBAAqB,GAAG,CAACJ,MAAW,EAAEK,iBAAmC,EAAEC,kBAAuC,KAAK;QAAA;QACtH,IAAIC,kBAAkB,GAAGC,kCAAkC,CAACF,kBAAkB,CAAC;QAC/E,IAAI,qBAAAN,MAAM,CAACS,QAAQ,qDAAf,iBAAiBC,SAAS,EAAE,CAACC,KAAK,MAAK,oDAAoD,EAAE;UAChG,MAAMC,eAAe,GAAGZ,MAAM,CAACS,QAAQ,CAACC,SAAS,EAAE,CAACG,cAAc;UAClEN,kBAAkB,GAAGnB,kBAAkB,CAAC0B,2BAA2B,CAACF,eAAe,EAAEL,kBAAkB,CAAC;QACzG;QACA,MAAMQ,wBAAwB,GAAGC,iCAAiC,CACjET,kBAAkB,EAClBP,MAAM,CAACiB,kBAAkB,EACzBZ,iBAAiB,CACjB;QACDL,MAAM,CAACkB,eAAe,GAAGH,wBAAwB,CAACI,cAAc,CAAC,CAAC,CAAuB;QACzF,MAAKD,eAAe,GAAGH,wBAAwB,CAACI,cAAc,CAAC,CAAC,CAAuB;QACvF,OAAO,MAAKD,eAAe;MAC5B,CAAC;MAAA,MA+BDE,oBAAoB,GAAG,UAAUC,KAA2C,EAAEnB,SAAc,EAAE;QAC7F,MAAMoB,YAAY,GAAI,IAAGC,GAAG,EAAG,EAAC;QAChCrB,SAAS,CAACsB,MAAM,CAACC,gBAAgB,CAACC,WAAW,CAACJ,YAAY,EAAED,KAAK,CAAC;QAClE,OAAOnB,SAAS,CAACsB,MAAM,CAACC,gBAAgB,CAACL,oBAAoB,CAACE,YAAY,CAAC;MAC5E,CAAC;MAAA,MAEDK,gBAAgB,GAAG,CAAC3B,MAAW,EAAE4B,iBAAoC,KAAgB;QACpF,MAAMC,oBAAoB,GAAG7B,MAAM,CAACkB,eAAe,CAACY,cAAc,CAACC,KAAK,CAAC,GAAG,CAAC;QAC7E;QACA,MAAMC,oBAAoB,GAAGH,oBAAoB,CAC/CI,MAAM,CAAC,UAAUC,IAAY,EAAEC,GAAW,EAAE;UAC5C,OAAON,oBAAoB,CAACO,OAAO,CAACF,IAAI,CAAC,IAAIC,GAAG;QACjD,CAAC,CAAC,CACDE,QAAQ,EAAE,CACVC,UAAU,CAAC,GAAG,EAAE,GAAG,CAAC;QACtB,MAAMC,MAAM,GAAGC,2BAA2B,CACzC,MAAK/B,QAAQ,CAACgC,QAAQ,EAAE,CAACrB,oBAAoB,CAACY,oBAAoB,CAAC,EACnE,MAAKU,WAAW,CAChB,CAACC,YAAY;QACd,MAAMC,YAAY,GAAGC,WAAW,CAACC,UAAU,CAAC,MAAKrC,QAAQ,CAAC;QAC1D,MAAMsC,KAAK,GAAGH,YAAY,CAAClC,SAAS,EAAE;QACtC,MAAMsC,mBAAmB,GAAGpB,iBAAiB,CAACqB,uBAAuB,CAAC,oBAAoB,CAAC;QAC3F,IAAIC,SAAwB,GAAG,EAAE;QACjC,MAAMC,SAAS,GAAGnD,MAAM,CAACS,QAAQ,CAAC2C,OAAO,EAAE;QAC3C,MAAMC,qBAAqB,GAAGzB,iBAAiB,CAACqB,uBAAuB,CAAC,sBAAsB,CAAC;QAC/F,MAAMK,cAAc,GAAGf,MAAM,CAACgB,QAAQ,GAAGhB,MAAM,CAACgB,QAAQ,GAAG,EAAE;QAC7D,MAAMC,qBAAqB,GAAGjB,MAAM,CAACkB,eAAe,GAAGlB,MAAM,CAACkB,eAAe,GAAG,EAAE;QAClF;QACA,MAAMC,mBAAmB,GAAGL,qBAAqB,CAAC,CAAC,CAAC,GACjDA,qBAAqB,CAAC,CAAC,CAAC,CAACpB,MAAM,CAAC,UAAU0B,qBAA6C,EAAE;UACzF,OAAOL,cAAc,CAACM,IAAI,CAAC,UAAUC,QAAqB,EAAE;YAC3D,OAAOF,qBAAqB,CAACG,IAAI,KAAKD,QAAQ,CAACE,KAAK;UACrD,CAAC,CAAC;QACF,CAAC,CAAC,GACFC,SAAS;QACZ,MAAMC,cAAc,GAAGd,SAAS,CAAC7F,OAAO,CACvC,wFAAwF,EACxF,EAAE,CACF;QACD,MAAM4G,kBAAkB,GAAGlE,MAAM,CAACkB,eAAe,CAACiD,QAAQ;QAC1D,MAAMC,mBAAmB,GAAGpE,MAAM,CAACkB,eAAe,CAACmD,SAAS;QAC5D;QACA,IAAIrB,mBAAmB,CAACxF,MAAM,GAAG,CAAC,IAAI,CAACgG,qBAAqB,IAAIE,mBAAmB,CAAClG,MAAM,GAAG,CAAC,EAAE;UAC/F8G,GAAG,CAACC,OAAO,CACV,wNAAwN,CACxN;QACF;QACA,MAAMC,2BAA2B,GAAGlB,cAAc,CAACM,IAAI,CAAEa,aAA0B,IAAK;UACvF,MAAMC,iBAAiB,GAAG,MAAKC,mBAAmB,CAACP,mBAAmB,EAAEK,aAAa,CAAC;UACtF,OAAO,CAAC,CAACC,iBAAiB;QAC3B,CAAC,CAAC;QACF,IAAI1B,mBAAmB,CAACxF,MAAM,GAAG,CAAC,IAAI,CAACgG,qBAAqB,CAAChG,MAAM,IAAI,CAACgH,2BAA2B,EAAE;UACpG,MAAM,IAAII,KAAK,CAAC,gDAAgD,CAAC;QAClE;QACA,IAAI5B,mBAAmB,CAACxF,MAAM,GAAG,CAAC,EAAE;UACnC,KAAK,MAAMqH,cAAc,IAAIrB,qBAAqB,EAAE;YACnDN,SAAS,GAAG,MAAK4B,kBAAkB,CAAC5B,SAAS,EAAE2B,cAAc,EAAEZ,cAAc,EAAE1B,MAAM,CAAC;UACvF;QACD;QACA,KAAK,MAAMwC,YAAY,IAAIzB,cAAc,EAAE;UAC1C,MAAM0B,IAAI,GAAGD,YAAY,CAAChB,KAAK;UAC/B,MAAMW,iBAAiB,GAAG,MAAKC,mBAAmB,CAACP,mBAAmB,EAAEW,YAAY,CAAC;UACrF,MAAMlB,QAAqB,GAAG,CAAC,CAAC;UAChC,IAAIa,iBAAiB,EAAE;YACtBxB,SAAS,GAAG,MAAK+B,mBAAmB,CAAC/B,SAAS,EAAEW,QAAQ,EAAEa,iBAAiB,EAAEM,IAAI,CAAC;YAClF;UACD,CAAC,MAAM,IAAIhC,mBAAmB,CAACxF,MAAM,KAAK,CAAC,IAAI0G,kBAAkB,CAACc,IAAI,CAAC,EAAE;YACxE9B,SAAS,GAAG,MAAKgC,kBAAkB,CAAChC,SAAS,EAAEW,QAAQ,EAAEK,kBAAkB,EAAEc,IAAI,CAAC;UACnF;UACA,MAAKG,yBAAyB,CAACpC,KAAK,CAACqC,iBAAiB,EAAEnB,cAAc,EAAEJ,QAAQ,CAAC;QAClF;QACA,MAAMwB,cAAyB,GAAG,IAAIC,SAAS,CAACpC,SAAS,CAAC;QACzDmC,cAAc,CAASE,gBAAgB,GAAG,IAAI;QAC/C,OAAOF,cAAc,CAACjE,oBAAoB,CAAC,GAAG,CAAC;MAChD,CAAC;MAAA,MAED6D,mBAAmB,GAAG,CAAC/B,SAAwB,EAAEW,QAAqB,EAAEa,iBAA8B,EAAEM,IAAY,KAAK;QACxH,IAAIA,IAAI,CAAC5C,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE;UAC3BkC,GAAG,CAACkB,KAAK,CAAC,mFAAmF,CAAC;QAC/F;QACA3B,QAAQ,CAACvF,GAAG,GAAGoG,iBAAiB,CAACX,KAAK;QACtCF,QAAQ,CAAC4B,IAAI,GAAG,OAAO;QAEvB5B,QAAQ,CAAC6B,YAAY,GAAGhB,iBAAiB,CAACX,KAAK;QAC/Cb,SAAS,CAACyC,IAAI,CAAC9B,QAAQ,CAAC;QACxB,OAAOX,SAAS;MACjB,CAAC;MAAA,MAEDgC,kBAAkB,GAAG,CACpBhC,SAAwB,EACxBW,QAAqB,EACrBK,kBAA+C,EAC/Cc,IAAY,KACR;QACJ,MAAMY,gBAAgB,GAAG1B,kBAAkB,CAACc,IAAI,CAAC;QACjDnB,QAAQ,CAACvF,GAAG,GAAGsH,gBAAgB,CAACtG,IAAI;QACpCuE,QAAQ,CAAC4B,IAAI,GAAG,OAAO;QACvB5B,QAAQ,CAAC6B,YAAY,GAAGV,IAAI;QAC5BnB,QAAQ,CAACgC,iBAAiB,GAAGD,gBAAgB,CAACC,iBAAiB;QAC/DhC,QAAQ,CAACiC,KAAK,GAAGF,gBAAgB,CAACE,KAAK,IAAIjC,QAAQ,CAACiC,KAAK;QACzD5C,SAAS,CAACyC,IAAI,CAAC9B,QAAQ,CAAC;QACxB,OAAOX,SAAS;MACjB,CAAC;MAAA,MAED4B,kBAAkB,GAAG,CAAC5B,SAAwB,EAAE2B,cAA2B,EAAEZ,cAAsB,EAAE1B,MAAa,KAAoB;QAAA;QACrI,MAAMyC,IAAI,GAAGH,cAAc,CAACd,KAAK,IAAI,EAAE;QACvC,MAAMgC,mBAAmB,GAAGvD,2BAA2B,CACtD,MAAK/B,QAAQ,CAACgC,QAAQ,EAAE,CAACrB,oBAAoB,CAAC6C,cAAc,GAAGe,IAAI,CAAC,EACpE,MAAKtC,WAAW,CAChB,CAACC,YAAY;QACd,IAAIqC,IAAI,CAAC5C,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE;UAC3BkC,GAAG,CAACkB,KAAK,CAAC,mFAAmF,CAAC;UAC9F;QACD,CAAC,MAAM,IAAI,CAACO,mBAAmB,EAAE;UAChC,MAAM,IAAInB,KAAK,CAAC,iEAAiE,GAAGC,cAAc,CAACd,KAAK,CAAC;UACzG;QACD,CAAC,MAAM,IAAI,0BAAAc,cAAc,CAACd,KAAK,0DAApB,sBAAsBiC,UAAU,CAAC,uDAAuD,CAAC,MAAK,IAAI,EAAE;UAC9G,MAAM,IAAIpB,KAAK,CAAC,iEAAiE,GAAGC,cAAc,CAACd,KAAK,CAAC;QAC1G,CAAC,MAAM;UACN;UACA,MAAMkC,eAA4B,GAAG;YACpC3H,GAAG,EAAEyH,mBAAmB,CAACjC,IAAI;YAC7B2B,IAAI,EAAE;UACP,CAAC;UACDQ,eAAe,CAACP,YAAY,GAAGK,mBAAmB,CAACG,oBAAoB,CAACnC,KAAK;UAC7EkC,eAAe,CAACJ,iBAAiB,GAAGE,mBAAmB,CAACI,iBAAiB;UACzEF,eAAe,CAACH,KAAK,GAAGM,oBAAoB,CAC3CL,mBAAmB,CAACM,WAAW,CAACC,YAAY,CAAC,sCAAsC,CAAC,IACnF9D,2BAA2B,CAC1B,MAAK/B,QAAQ,CACXgC,QAAQ,EAAE,CACVrB,oBAAoB,CAAC6C,cAAc,GAAGgC,eAAe,CAACP,YAAY,GAAG,uCAAuC,CAAC,EAC/G,MAAKhD,WAAW,CAChB,CAACC,YAAY,CACf;UACD,MAAKwC,yBAAyB,CAAC5C,MAAM,CAAC6C,iBAAiB,EAAEnB,cAAc,EAAEgC,eAAe,CAAC;UACzF/C,SAAS,CAACyC,IAAI,CAACM,eAAe,CAAC;QAChC;QACA,OAAO/C,SAAS;MACjB,CAAC;MAAA,MAEDyB,mBAAmB,GAAG,CAACP,mBAA4D,EAAEP,QAAqB,KAAK;QAC9G,IAAIA,QAAQ,CAACE,KAAK,IAAIK,mBAAmB,CAACP,QAAQ,CAACE,KAAK,CAAC,EAAE;UAC1D,OAAOF,QAAQ;QAChB;QACA,OAAO,IAAI;MACZ,CAAC;MAAA,MAEDsB,yBAAyB,GAAG,CAACoB,kBAA+C,EAAEtC,cAAsB,EAAEJ,QAAqB,KAAK;QAC/H,IAAI0C,kBAAkB,aAAlBA,kBAAkB,eAAlBA,kBAAkB,CAAE/I,MAAM,EAAE;UAC/B,KAAK,MAAMgJ,gBAAgB,IAAID,kBAAkB,EAAE;YAClD,MAAKE,yBAAyB,CAACD,gBAAgB,EAAEvC,cAAc,EAAEJ,QAAQ,CAAC;UAC3E;QACD;MACD,CAAC;MAAA,MAED4C,yBAAyB,GAAG,CAACD,gBAA2C,EAAEvC,cAAsB,EAAEJ,QAAqB,KAAK;QAAA;QAC3H,MAAM6C,KAAK,GAAGF,gBAAgB,CAACG,cAAc,GAAGH,gBAAgB,aAAhBA,gBAAgB,gDAAhBA,gBAAgB,CAAEG,cAAc,0DAAhC,sBAAkC5C,KAAK,GAAGyC,gBAAgB,aAAhBA,gBAAgB,gDAAhBA,gBAAgB,CAAEI,OAAO,0DAAzB,sBAA2B7C,KAAK;QAC1H,MAAM8C,SAAS,GAAGL,gBAAgB,CAACM,SAAS,GAAGN,gBAAgB,aAAhBA,gBAAgB,gDAAhBA,gBAAgB,CAAEM,SAAS,0DAA3B,sBAA6B/C,KAAK,GAAG,IAAI;QACxF,MAAM0B,IAAI,GAAGe,gBAAgB,CAACO,IAAI;QAClC,MAAMC,UAAU,GACfH,SAAS,IACTrE,2BAA2B,CAAC,MAAK/B,QAAQ,CAACgC,QAAQ,EAAE,CAACrB,oBAAoB,CAAC6C,cAAc,GAAG4C,SAAS,CAAC,EAAE,MAAKnE,WAAW,CAAC,CACtHC,YAAY;QACf,IAAIkB,QAAQ,CAACvF,GAAG,KAAKoI,KAAK,EAAE;UAC3B,MAAKO,cAAc,CAACpD,QAAQ,EAAE4B,IAAI,CAAC;UACnC;UACA,MAAKyB,mBAAmB,CAACrD,QAAQ,EAAEmD,UAAU,CAAC;QAC/C;MACD,CAAC;MAAA,MAEDE,mBAAmB,GAAG,CAACrD,QAAqB,EAAEmD,UAAiC,KAAK;QACnF,IAAIA,UAAU,IAAIA,UAAU,CAACG,KAAK,CAACC,KAAK,IAAIvD,QAAQ,CAACvF,GAAG,EAAE;UACzDuF,QAAQ,CAACgD,SAAS,GAAG,MAAKQ,kBAAkB,CAACC,kBAAkB,CAACC,uBAAuB,CAACP,UAAU,CAAC,CAAC,IAAI,EAAE;QAC3G;MACD,CAAC;MAAA,MAEDC,cAAc,GAAG,CAACpD,QAAqB,EAAE4B,IAAsC,KAAK;QACnF,IAAIA,IAAI,EAAE;UACT,MAAM+B,KAAK,GAAI/B,IAAI,CAASgC,WAAW;UACvC5D,QAAQ,CAAC4B,IAAI,GAAG5I,YAAY,CAAC2K,KAAK,CAAC;QACpC;MACD,CAAC;MAAA,MAEDH,kBAAkB,GAAIK,KAAa,IAAK;QACvC,IAAI,CAACA,KAAK,EAAE;UACX,OAAO1D,SAAS;QACjB;QACA,IAAI2D,YAAY,GAAGC,IAAI,CAACC,SAAS,CAACH,KAAK,CAAC;QACxCC,YAAY,GAAGA,YAAY,CAACrK,OAAO,CAAC,IAAIwK,MAAM,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,KAAK,CAAC;QAChEH,YAAY,GAAGA,YAAY,CAACrK,OAAO,CAAC,IAAIwK,MAAM,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,KAAK,CAAC;QAChE,OAAOH,YAAY;MACpB,CAAC;MAAA,MAEDI,aAAa,GAAInF,YAAuB,IAAK;QAC5C,IAAI,MAAKzC,eAAe,CAAC3C,MAAM,GAAG,CAAC,EAAE;UACpC,OAAO,MAAK2C,eAAe,CAACrB,GAAG,CAAEkJ,aAA4B,IAAK;YACjE,OAAO,MAAKC,gBAAgB,CAACD,aAAa,EAAEpF,YAAY,CAAC;UAC1D,CAAC,CAAC;QACH;QACA,OAAOsF,GAAI,EAAC;MACb,CAAC;MAAA,MAMDC,qCAAqC,GAAInI,MAAW,IAAK;QACxD,IAAIA,MAAM,CAACoI,eAAe,EAAE;UAC3B,IAAIpI,MAAM,CAACoI,eAAe,KAAK,OAAO,EAAE;YACvC,MAAKA,eAAe,GAAGpE,SAAS;UACjC,CAAC,MAAM,IAAIhE,MAAM,CAACoI,eAAe,KAAK,MAAM,EAAE;YAC7C,MAAKA,eAAe,GAAGxJ,MAAM,CAACC,MAAM,CAAC/B,qBAAqB,CAAC,CAACuL,IAAI,CAAC,GAAG,CAAC;UACtE,CAAC,MAAM,IAAI,MAAKC,yBAAyB,CAACtI,MAAM,CAACoI,eAAe,CAAC,KAAK,IAAI,EAAE;YAC3E,MAAKA,eAAe,GAAGpI,MAAM,CAACoI,eAAe;UAC9C,CAAC,MAAM;YACN,MAAKA,eAAe,GAAGpE,SAAS;UACjC;QACD;MACD,CAAC;MAAA,MAODsE,yBAAyB,GAAIF,eAAuB,IAAK;QACxD,IAAIG,KAAc,GAAG,IAAI;QACzB,MAAMC,UAAU,GAAGJ,eAAe,CAACrG,KAAK,CAAC,GAAG,CAAC;QAC7C,MAAM0G,cAAwB,GAAG7J,MAAM,CAACC,MAAM,CAAC/B,qBAAqB,CAAC;QACrE0L,UAAU,CAACE,OAAO,CAAEC,YAAY,IAAK;UACpC,IAAI,CAACF,cAAc,CAACG,QAAQ,CAACD,YAAY,CAAC,EAAE;YAC3CJ,KAAK,GAAG,KAAK;UACd;QACD,CAAC,CAAC;QACF,OAAOA,KAAK;MACb,CAAC;MAAA,MAEDM,oBAAoB,GAAG,CAAC7I,MAAW,EAAE8I,gBAAoC,KAAK;QAC7E,IAAIC,iBAAiB,GAAG/I,MAAM,CAAC+I,iBAAiB,GAAG/I,MAAM,CAAC+I,iBAAiB,GAAGD,gBAAgB,CAACC,iBAAiB;QAChHA,iBAAiB,GAAG,MAAKX,eAAe,KAAKpE,SAAS,GAAG,MAAM,GAAG+E,iBAAiB;QACnF,OAAOA,iBAAiB;MACzB,CAAC;MAAA,MAEDC,uBAAuB,GAAG,MAAM;QAC/B,MAAMZ,eAAe,GAAG,MAAKA,eAAe;QAC5C,IAAIA,eAAe,EAAE;UACpB,MAAMW,iBAAiB,GAAG,MAAKA,iBAAiB;UAChD,IAAIA,iBAAiB,KAAK,SAAS,EAAE;YACpC,OAAOb,GAAI;AACf;AACA;AACA,YAAYe,QAAQ,CAAC,CAAC,MAAKC,EAAE,EAAE,IAAI,CAAC,CAAE;AACtC,aAAa,MAAKA,EAAG;AACrB,0BAA0B,IAAK;AAC/B,gBAAgB,MAAKC,eAAgB;AACrC,qBAAqB,MAAKC,WAAY;AACtC,cAAc,MAAKC,YAAa;AAChC;AACA;AACA,IAAI;UACD,CAAC,MAAM,IAAIN,iBAAiB,KAAK,MAAM,IAAIA,iBAAiB,KAAK,MAAM,EAAE;YACxE,OAAOb,GAAI,EAAC;UACb;QACD,CAAC,MAAM,IAAI,CAACE,eAAe,EAAE;UAC5B9D,GAAG,CAACC,OAAO,CAAC,uEAAuE,CAAC;QACrF;QACA,OAAO2D,GAAI,EAAC;MACb,CAAC;MAAA,MAEDoB,sBAAsB,GAAG,MAAM;QAC9B,IAAI,MAAKP,iBAAiB,KAAK,MAAM,EAAE;UACtC,OAAOb,GAAI,iCAAgCe,QAAQ,CAAC,CAAC,MAAKC,EAAE,EAAE,qBAAqB,CAAC,CAAE,UAAS,MAAKA,EAAG,KAAI;QAC5G;QACA,OAAOhB,GAAI,EAAC;MACb,CAAC;MAAA,MAEDqB,iBAAiB,GAAG,CACnBC,aAAwB,EACxBC,SAAyC,EACzCC,0BAA8C,EAC9CxM,MAAqE,KACjE;QACJ,IAAIuM,SAAS,EAAE;UACd,MAAMzB,aAAa,GAAG;YACrBwB,aAAa,EAAEA,aAAa;YAC5BG,eAAe,EAAE9G,WAAW,CAAC+G,wCAAwC,CAAC,MAAKV,EAAE,EAAEO,SAAS,EAAEC,0BAA0B,IAAI,EAAE,CAAC;YAC3HG,YAAY,EAAEC,YAAY,CAACC,iCAAiC,CAACN,SAAS,EAAG,+BAA8B,EAAE,KAAK,CAAC;YAC/GO,iBAAiB,EAAEF,YAAY,CAACG,kBAAkB,CAAC/M,MAAM;UAC1D,CAAC;UACD,MAAKiD,eAAe,CAACwF,IAAI,CAACqC,aAAa,CAAC;QACzC;MACD,CAAC;MAAA,MAEDC,gBAAgB,GAAG,CAACD,aAA4B,EAAEpF,YAAuB,KAAK;QAC7E,MAAMsH,OAAO,GAAGlC,aAAa,CAACwB,aAAa;QAC3C,MAAMtM,MAAM,GAAGgN,OAAO,CAACxJ,SAAS,EAAE;QAClC,MAAMyJ,gBAAgB,GAAGjN,MAAM,CAAC4E,cAAc,IAAI,MAAKY,WAAW,CAACD,QAAQ,EAAE,CAACrB,oBAAoB,CAAClE,MAAM,CAAC4E,cAAc,CAAC;QACzH,MAAM2H,SAAS,GAAGU,gBAAgB,IAAIA,gBAAgB,CAACzJ,SAAS,EAAE;QAClE,MAAM0J,eAAe,GAAG,MAAK1H,WAAW,CAACD,QAAQ,EAAE,CAACrB,oBAAoB,CAAClE,MAAM,CAAC4E,cAAc,GAAG,SAAS,CAAC;QAC3G,MAAM0H,aAAa,GAAGM,YAAY,CAACO,gBAAgB,CAACD,eAAe,CAAC;QACpE,MAAME,WAAW,GAAGR,YAAY,CAACS,4BAA4B,CAACH,eAAe,CAAC;QAC9E,MAAMI,OAAO,GAAG,MAAK9H,WAAW,CAACD,QAAQ,EAAE,CAACrB,oBAAoB,CAACkJ,WAAW,CAAC,CAAC5J,SAAS,EAAE;QACzF,MAAMgJ,0BAA0B,GAAGe,uBAAuB,CACzD5H,WAAW,CAAC6H,wBAAwB,CAAC9H,YAAY,CAAClC,SAAS,EAAE,EAAE;UAC9DiK,OAAO,EAAE/H;QACV,CAAC,CAAC,CACF;QACD,MAAMgI,eAAe,GAAG1N,MAAM,CAACyB,OAAO,GACnCzB,MAAM,CAACyB,OAAO,GACdkE,WAAW,CAACgI,iCAAiC,CAC7CL,OAAO,IAAIA,OAAO,CAACM,QAAQ,EAC3BrB,SAAS,CAACsB,MAAM,EAChB,MAAKrI,WAAW,EAChBgH,0BAA0B,IAAI,EAAE,EAChCxM,MAAM,CAAC8N,cAAc,IAAI,EAAE,CAC1B;QACJ,IAAIC,YAAY;QAChB,IAAI/N,MAAM,CAACyB,OAAO,EAAE;UACnBsM,YAAY,GAAG/N,MAAM,CAACyB,OAAO;QAC9B,CAAC,MAAM,IAAI8K,SAAS,CAACyB,eAAe,EAAE;UACrCD,YAAY,GAAG,+CAA+C;QAC/D;QACA,MAAME,aAAa,GAAGjD,GAAI;AAC5B,YAAYhL,MAAO;AACnB,qBAAqB8K,aAAa,CAAC2B,eAAgB;AACnD,kBAAkB3B,aAAa,CAAC6B,YAAa;AAC7C,uBAAuB7B,aAAa,CAACgC,iBAAkB;AACvD,kBAAkBiB,YAAa;AAC/B,qBAAqBL,eAAgB;AACrC,aAAa,MAAKQ,UAAU,CAACjB,gBAAgB,CAAE;AAC/C,IAAI;QACF,IACCjN,MAAM,CAACwC,IAAI,IAAI,WAAW,KACzB,CAAC8K,OAAO,IAAIA,OAAO,CAACa,OAAO,KAAK,IAAI,IAAI7B,aAAa,CAAC,uCAAuC,CAAC,KAAK,KAAK,CAAC,EACzG;UACD,OAAO2B,aAAa;QACrB,CAAC,MAAM,IAAIjO,MAAM,CAACwC,IAAI,IAAI,WAAW,EAAE;UACtC,OAAOwI,GAAI,EAAC;QACb,CAAC,MAAM;UACN,OAAOiD,aAAa;QACrB;MACD,CAAC;MAAA,MAEDG,QAAQ,GAAI1I,YAAuB,IAAK;QACvC,MAAMG,KAAK,GAAGH,YAAY,CAAClC,SAAS,EAAE;QACtC,MAAM6K,UAAoB,GAAG,EAAE;QAC/B,MAAMC,QAAkB,GAAG,EAAE;QAC7B,IAAIzI,KAAK,CAAC0I,UAAU,EAAE;UACrB5I,WAAW,CAAC6I,gBAAgB,CAAC9I,YAAY,CAAC,CACxClC,SAAS,EAAE,CACXgI,OAAO,CAAEiD,SAAwB,IAAK;YACtCA,SAAS,CAACzC,EAAE,GAAGD,QAAQ,CAAC,CAAC,MAAKC,EAAE,EAAE,WAAW,EAAEyC,SAAS,CAACrN,GAAG,CAAC,CAAC;YAC9DiN,UAAU,CAAC5F,IAAI,CACd,MAAKiG,OAAO,CACX;cACC1C,EAAE,EAAEyC,SAAS,CAACzC,EAAE;cAChB5K,GAAG,EAAEqN,SAAS,CAACrN,GAAG;cAClBwH,KAAK,EAAE6F,SAAS,CAAC7F,KAAK;cACtBL,IAAI,EAAEkG,SAAS,CAAClG;YACjB,CAAC,EACD,gBAAgB,EAChB,WAAW,CACX,CACD;UACF,CAAC,CAAC;QACJ;QACA,IAAI,MAAK+F,QAAQ,EAAE;UAClB3I,WAAW,CAACgJ,cAAc,CAAC,MAAKL,QAAQ,CAAC,CAAC9C,OAAO,CAAEoD,OAAoB,IAAK;YAC3EA,OAAO,CAAC5C,EAAE,GAAGD,QAAQ,CAAC,CAAC,MAAKC,EAAE,EAAE,SAAS,EAAE4C,OAAO,CAACxN,GAAG,CAAC,CAAC;YACxDkN,QAAQ,CAAC7F,IAAI,CACZ,MAAKiG,OAAO,CACX;cACC1C,EAAE,EAAE4C,OAAO,CAAC5C,EAAE;cACd5K,GAAG,EAAEwN,OAAO,CAACxN,GAAG;cAChBwH,KAAK,EAAEgG,OAAO,CAAChG,KAAK;cACpBL,IAAI,EAAEqG,OAAO,CAACrG;YACf,CAAC,EACD,mBAAmB,EACnB,cAAc,CACd,CACD;UACF,CAAC,CAAC;QACH;QACA,IAAI8F,UAAU,CAAC/N,MAAM,IAAIgO,QAAQ,CAAChO,MAAM,EAAE;UACzC,OAAO+N,UAAU,CAACQ,MAAM,CAACP,QAAQ,CAAC;QACnC;QACA,OAAOtD,GAAI,EAAC;MACb,CAAC;MAAA,MAED0D,OAAO,GAAG,CAAC1J,IAAiC,EAAE8J,MAAc,EAAEtM,IAAY,KAAK;QAC9E,OAAOwI,GAAI;AACb,SAAShG,IAAI,CAACgH,EAAG;AACjB,WAAW8C,MAAM,GAAG9J,IAAI,CAAC5D,GAAI;AAC7B,WAAWoB,IAAK;AAChB,YAAY0G,oBAAoB,CAAClE,IAAI,CAAC4D,KAAK,EAAY,QAAQ,CAAE;AACjE,WAAW5D,IAAI,CAACuD,IAAK;AACrB,KAAK;MACJ,CAAC;MAAA,MAEDwG,iBAAiB,GAAIrJ,YAAuB,IAAK;QAChD,MAAMsJ,QAAQ,GAAG,MAAKC,UAAU,CAACvJ,YAAY,CAAC;QAC9C,IAAI,MAAKwJ,wBAAwB,EAAE;UAClCF,QAAQ,CAACvG,IAAI,CAAC,MAAK0G,kBAAkB,EAAE,CAAC;QACzC;QACA,IAAIH,QAAQ,CAAC1O,MAAM,GAAG,CAAC,EAAE;UACxB,OAAO0K,GAAI,gBAAegE,QAAS,gBAAe;QACnD;QACA,OAAOhE,GAAI,EAAC;MACb,CAAC;MAAA,MAEDiE,UAAU,GAAIvJ,YAAuB,IAAK;QAAA;QACzC,IAAI0J,OAAO,yBAAG,MAAKC,YAAY,uDAAjB,mBAAmB7L,SAAS,EAAE;QAC5C4L,OAAO,GAAG,MAAKE,eAAe,CAACF,OAAO,CAAC;QACvC,OAAOA,OAAO,CAACxN,GAAG,CAAE5B,MAAuB,IAAK;UAC/C,IAAIA,MAAM,CAAC4E,cAAc,EAAE;YAC1B;YACA,OAAO,MAAK2K,SAAS,CAACvP,MAAM,EAAE0F,YAAY,EAAE,KAAK,CAAC;UACnD,CAAC,MAAM,IAAI1F,MAAM,CAACwP,cAAc,CAAC,QAAQ,CAAC,EAAE;YAC3C;YACA,OAAO,MAAKC,gBAAgB,CAACzP,MAAM,EAAE0F,YAAY,CAAC;UACnD;QACD,CAAC,CAAC;MACH,CAAC;MAAA,MAED4J,eAAe,GAAIF,OAAqB,IAAK;QAC5C;QACA;QACA,KAAK,MAAMpP,MAAM,IAAIoP,OAAO,EAAE;UAC7B,IAAIpP,MAAM,CAACiC,IAAI,EAAE;YAChBjC,MAAM,CAACiC,IAAI,CAACuJ,OAAO,CAAExG,IAAI,IAAK;cAC7B,IAAIoK,OAAO,CAAClK,OAAO,CAACF,IAAI,CAAe,KAAK,CAAC,CAAC,EAAE;gBAC/CoK,OAAO,CAACM,MAAM,CAACN,OAAO,CAAClK,OAAO,CAACF,IAAI,CAAe,EAAE,CAAC,CAAC;cACvD;YACD,CAAC,CAAC;UACH;QACD;QACA,OAAOoK,OAAO;MACf,CAAC;MAAA,MAEDK,gBAAgB,GAAG,CAACzP,MAAuB,EAAE0F,YAAuB,KAAK;QACxE,IAAIiK,aAAa,GAAG3P,MAAM,CAACyB,OAA2B;QACtD,IAAI,CAACzB,MAAM,CAACwB,iBAAiB,IAAI,KAAK,KAAKxB,MAAM,CAACyB,OAAO,KAAK,MAAM,EAAE;UACrEkO,aAAa,GAAG,+CAA+C;QAChE;QACA,IAAI3P,MAAM,CAACwC,IAAI,KAAK,SAAS,EAAE;UAC9B;UACA,OAAO,MAAKoN,sBAAsB,CACjC5P,MAAM,EACN;YACCgM,EAAE,EAAED,QAAQ,CAAC,CAAC,MAAKC,EAAE,EAAEhM,MAAM,CAACgM,EAAE,CAAC,CAAC;YAClC6D,UAAU,EAAE,gCAAgC;YAC5CjH,KAAK,EAAE5I,MAAM,CAACqB,IAAI,GAAGrB,MAAM,CAACqB,IAAI,GAAG,EAAE;YACrCyO,YAAY,EAAEhJ,SAAS;YACvBvF,KAAK,EAAEvB,MAAM,CAACuB,KAAK,GAAGvB,MAAM,CAACuB,KAAK,GAAG,EAAE;YACvCE,OAAO,EAAEkO,aAAa;YACtBI,OAAO,EAAE/P,MAAM,CAAC+P,OAAO,GAAG/P,MAAM,CAAC+P,OAAO,GAAG;UAC5C,CAAC,EACD,KAAK,CACL;QACF,CAAC,MAAM,IAAI/P,MAAM,CAACwC,IAAI,KAAK,MAAM,EAAE;UAClC;UACA,OAAO,MAAKwN,0BAA0B,CACrC;YACChE,EAAE,EAAED,QAAQ,CAAC,CAAC,MAAKC,EAAE,EAAEhM,MAAM,CAACgM,EAAE,CAAC,CAAC;YAClC3K,IAAI,EAAErB,MAAM,CAACqB,IAAI;YACjB0O,OAAO,EAAE/P,MAAM,CAAC+P,OAAO;YACvBtO,OAAO,EAAEkO,aAAa;YACtBM,oBAAoB,EAAEC,oBAAoB,CAACC,uBAAuB,CAACnQ,MAAM,CAAC;YAC1EoQ,UAAU,EAAEF,oBAAoB,CAACG,aAAa,CAACrQ,MAAM,CAAC;YACtDsQ,aAAa,EAAExJ,SAAS;YACxBsI,OAAO,EAAEpP;UACV,CAAC,EACD0F,YAAY,CACZ;QACF;MACD,CAAC;MAAA,MAED6K,mBAAmB,GAAG,CAACC,cAA+E,EAAE9K,YAAuB,KAAK;QACnI,IAAI+K,YAAY;QAChB,IAAID,cAAc,CAAC5L,cAAc,EAAE;UAClC;UACA,OAAO,MAAK2K,SAAS,CAACiB,cAAc,EAAE9K,YAAY,EAAE,IAAI,CAAC;QAC1D;QACA,IAAI8K,cAAc,CAACE,OAAO,EAAE;UAC3BD,YAAY,GAAG,MAAM,GAAGD,cAAc,CAACE,OAAO;QAC/C,CAAC,MAAM,IAAIF,cAAc,CAACG,MAAM,IAAI,KAAK,EAAE;UAC1CF,YAAY,GAAGD,cAAc,CAACjP,KAAK;QACpC,CAAC,MAAM;UACNkP,YAAY,GAAG7D,YAAY,CAACG,kBAAkB,CAACyD,cAAc,gCAAO;QACrE;QACA,OAAOxF,GAAI;AACb;AACA,UAAUwF,cAAc,CAACnP,IAAK;AAC9B,WAAWoP,YAAa;AACxB,aAAaD,cAAc,CAACT,OAAQ;AACpC,aAAaS,cAAc,CAAC/O,OAAQ;AACpC,IAAI;MACH,CAAC;MAAA,MAEDuO,0BAA0B,GAAG,CAACY,KAA8B,EAAElL,YAAuB,KAAK;QAAA;QACzF,MAAMmL,UAAU,qBAAGD,KAAK,CAACxB,OAAO,0EAAb,eAAenN,IAAI,wDAAnB,oBAAqBL,GAAG,CAAE5B,MAAuE,IAAK;UACxH,OAAO,MAAKuQ,mBAAmB,CAACvQ,MAAM,EAAE0F,YAAY,CAAC;QACtD,CAAC,CAAC;QACF,OAAOsF,GAAI;AACb;AACA,WAAW4F,KAAK,CAACvP,IAAK;AACtB;AACA;AACA,SAASuP,KAAK,CAAC5E,EAAG;AAClB,cAAc4E,KAAK,CAACb,OAAQ;AAC5B,cAAca,KAAK,CAACnP,OAAQ;AAC5B,2BAA2BmP,KAAK,CAACX,oBAAqB;AACtD,iBAAiBW,KAAK,CAACR,UAAW;AAClC,oBAAoBQ,KAAK,CAACN,aAAc;AACxC;AACA;AACA;AACA,QAAQO,UAAW;AACnB;AACA;AACA;AACA,+BAA+B;MAC9B,CAAC;MAAA,MAEDtB,SAAS,GAAG,CAACvP,MAAkB,EAAE0F,YAAuB,EAAEoL,UAAmB,KAAK;QACjF,MAAM7D,gBAAgB,GAAG,MAAKzH,WAAW,CAACD,QAAQ,EAAE,CAACrB,oBAAoB,CAAClE,MAAM,CAAC4E,cAAc,IAAI,EAAE,CAAc;QACnH,IAAI5E,MAAM,CAACwC,IAAI,KAAK,eAAe,EAAE;UACpC,OAAO,MAAKuO,oBAAoB,CAAC/Q,MAAM,EAAEiN,gBAAgB,EAAE6D,UAAU,CAAC;QACvE,CAAC,MAAM,IAAI9Q,MAAM,CAACwC,IAAI,KAAK,WAAW,EAAE;UACvC,OAAO,MAAKwO,oBAAoB,CAACtL,YAAY,EAAE1F,MAAM,EAAEiN,gBAAgB,EAAE6D,UAAU,CAAC;QACrF;QACA,OAAO9F,GAAI,EAAC;MACb,CAAC;MAAA,MAED+F,oBAAoB,GAAG,CAAC/Q,MAAkB,EAAEiN,gBAA2B,EAAE6D,UAAmB,KAAK;QAChG,IAAIG,QAAQ,GAAG,MAAM;QACrB,MAAM1E,SAAS,GAAGU,gBAAgB,CAACzJ,SAAS,EAAE;QAC9C,IAAIxD,MAAM,CAACyB,OAAO,KAAKqF,SAAS,EAAE;UACjCmK,QAAQ,GAAGjR,MAAM,CAACyB,OAAO;QAC1B,CAAC,MAAM,IAAI8K,SAAS,CAACyB,eAAe,EAAE;UACrCiD,QAAQ,GAAG,+CAA+C;QAC3D;QACA,OAAO,MAAKrB,sBAAsB,CACjC5P,MAAM,EACN;UACCgM,EAAE,EAAElF,SAAS;UACb+I,UAAU,EAAE,+CAA+C;UAC3DjH,KAAK,EAAE2D,SAAS,CAAC2E,KAAK;UACtBpB,YAAY,EAAEhJ,SAAS;UACvBvF,KAAK,EAAEqL,YAAY,CAACC,iCAAiC,CAACN,SAAS,EAAG,+BAA8B,EAAE,KAAK,CAAC;UACxG9K,OAAO,EAAEwP,QAAQ;UACjBlB,OAAO,EAAE,MAAK7B,UAAU,CAACjB,gBAAgB;QAC1C,CAAC,EACD6D,UAAU,CACV;MACF,CAAC;MAAA,MAEDE,oBAAoB,GAAG,CAACtL,YAAuB,EAAE1F,MAAkB,EAAEiN,gBAA2B,EAAE6D,UAAmB,KAAK;QACzH,MAAM5D,eAAe,GAAG,MAAK1H,WAAW,CAACD,QAAQ,EAAE,CAACrB,oBAAoB,CAAClE,MAAM,CAAC4E,cAAc,GAAG,SAAS,CAAC;QAC3G,MAAM0H,aAAa,GAAG,MAAK9G,WAAW,CAACD,QAAQ,EAAE,CAACrB,oBAAoB,CAAC0I,YAAY,CAACO,gBAAgB,CAACD,eAAe,CAAC,CAAC;QACtH,MAAMiE,YAAY,GAAG7E,aAAa,CAAC9I,SAAS,EAAE;QAC9C,MAAM4J,WAAW,GAAGR,YAAY,CAACS,4BAA4B,CAACH,eAAe,CAAC;QAC9E,MAAMI,OAAO,GAAG,MAAK9H,WAAW,CAACD,QAAQ,EAAE,CAACrB,oBAAoB,CAACkJ,WAAW,CAAC,CAAC5J,SAAS,EAAE;QACzF,MAAM+I,SAAS,GAAGU,gBAAgB,CAACzJ,SAAS,EAAE;QAC9C,IAAI,CAAC8J,OAAO,IAAIA,OAAO,CAACM,QAAQ,KAAK,IAAI,IAAIuD,YAAY,CAAC,uCAAuC,CAAC,KAAK,KAAK,EAAE;UAC7G,MAAMF,QAAQ,GAAG,MAAKG,2BAA2B,CAACpR,MAAM,EAAEsN,OAAO,EAAEf,SAAS,EAAE7G,YAAY,CAAC;UAC3F,MAAMoK,YAAY,GAAGlD,YAAY,CAACyE,QAAQ,CAACF,YAAY,EAAE;YAAE1D,OAAO,EAAEnB;UAAc,CAAC,CAAC;UACpF,MAAME,0BAA0B,GAC/Be,uBAAuB,CACtB5H,WAAW,CAAC6H,wBAAwB,CAAC9H,YAAY,CAAClC,SAAS,EAAE,EAAE;YAC9DiK,OAAO,EAAE/H;UACV,CAAC,CAAC,CACF,IAAI,EAAE;UACR,OAAO,MAAKkK,sBAAsB,CACjC5P,MAAM,EACN;YACCgM,EAAE,EAAED,QAAQ,CAAC,CAAC,MAAKC,EAAE,EAAE1G,2BAA2B,CAAC2H,gBAAgB,CAAC,CAAC,CAAC;YACtE4C,UAAU,EAAE,gCAAgC;YAC5CjH,KAAK,EAAE2D,SAAS,CAAC2E,KAAK;YACtBpB,YAAY,EAAEA,YAAY;YAC1BvO,KAAK,EAAEoE,WAAW,CAAC+G,wCAAwC,CAAC,MAAKV,EAAE,EAAEO,SAAS,EAAEC,0BAA0B,CAAC;YAC3G/K,OAAO,EAAEwP,QAAQ;YACjBlB,OAAO,EAAE,MAAK7B,UAAU,CAACjB,gBAAgB;UAC1C,CAAC,EACD6D,UAAU,CACV;QACF;QACA,OAAO9F,GAAI,EAAC;MACb,CAAC;MAAA,MAED4E,sBAAsB,GAAG,CAAC5P,MAAyC,EAAEsR,aAA4B,EAAER,UAAmB,KAAK;QAC1H,IAAIA,UAAU,EAAE;UACf,OAAO9F,GAAI;AACd;AACA,YAAYsG,aAAa,CAAC1I,KAAM;AAChC,aAAa5I,MAAM,CAAC0Q,OAAO,GAAG,MAAM,GAAG1Q,MAAM,CAAC0Q,OAAO,GAAGY,aAAa,CAAC/P,KAAM;AAC5E,eAAe+P,aAAa,CAAC7P,OAAQ;AACrC,eAAe6P,aAAa,CAACvB,OAAQ;AACrC,MAAM;QACJ,CAAC,MAAM;UACN,OAAO,MAAKwB,WAAW,CAACvR,MAAM,EAAEsR,aAAa,CAAC;QAC/C;MACD,CAAC;MAAA,MAEDC,WAAW,GAAG,CAACvR,MAAkB,EAAEsR,aAA4B,KAAK;QACnE,IAAIE,WAA+B,GAAG,EAAE;QACxC,IAAIxR,MAAM,CAACwP,cAAc,CAAC,QAAQ,CAAC,EAAE;UACpC,IAAIxP,MAAM,CAAC0Q,OAAO,EAAE;YACnBc,WAAW,GAAG,MAAM,GAAGxR,MAAM,CAAC0Q,OAAO;UACtC,CAAC,MAAM,IAAK1Q,MAAM,CAAkB2Q,MAAM,KAAK,IAAI,EAAE;YACpDa,WAAW,GAAGF,aAAa,CAAC/P,KAAK;UAClC,CAAC,MAAM,IAAI,CAACvB,MAAM,CAAC4E,cAAc,EAAE;YAClC4M,WAAW,GAAG5E,YAAY,CAACG,kBAAkB,CAC5C/M,MAAM,gCAEN;UACF;UACA,OAAOgL,GAAI;AACd;AACA;AACA,mBAAmBsG,aAAa,CAACzB,UAAW;AAC5C,UAAUyB,aAAa,CAACtF,EAAG;AAC3B,YAAYsF,aAAa,CAAC1I,KAAM;AAChC,oBAAoB0I,aAAa,CAACxB,YAAa;AAC/C,aAAa0B,WAAY;AACzB,eAAeF,aAAa,CAAC7P,OAAQ;AACrC,eAAe6P,aAAa,CAACvB,OAAQ;AACrC;AACA,kCAAkC;QAChC,CAAC,MAAM;UACN,OAAO/E,GAAI;AACd;AACA,mBAAmBsG,aAAa,CAACzB,UAAW;AAC5C,UAAUyB,aAAa,CAACtF,EAAG;AAC3B,YAAYsF,aAAa,CAAC1I,KAAM;AAChC,oBAAoB0I,aAAa,CAACxB,YAAa;AAC/C,aAAa9P,MAAM,CAAC0Q,OAAO,GAAG,MAAM,GAAG1Q,MAAM,CAAC0Q,OAAO,GAAGY,aAAa,CAAC/P,KAAM;AAC5E,eAAe+P,aAAa,CAAC7P,OAAQ;AACrC,eAAe6P,aAAa,CAACvB,OAAQ;AACrC;AACA,+BAA+B;QAC7B;MACD,CAAC;MAAA,MAEDqB,2BAA2B,GAAG,CAC7BpR,MAAkB,EAClBsN,OAAgC,EAChCf,SAA6B,EAC7B7G,YAAuB,KACnB;QACJ,OAAO1F,MAAM,CAACyB,OAAO,KAAKqF,SAAS,GAChC9G,MAAM,CAACyB,OAAO,GACdkE,WAAW,CAACgI,iCAAiC,CAC7CL,OAAO,IAAIA,OAAO,CAACM,QAAQ,EAC3BrB,SAAS,CAACsB,MAAM,EAChB,MAAKrI,WAAW,EAChBG,WAAW,CAAC6H,wBAAwB,CAAC9H,YAAY,CAAClC,SAAS,EAAE,EAAE;UAAEiK,OAAO,EAAE/H;QAAa,CAAC,CAAC,EACzF1F,MAAM,CAAC8N,cAAc,IAAI,EAAE,CAC1B;MACL,CAAC;MAAA,MAEDqB,kBAAkB,GAAG,MAAM;QAC1B,OAAOnE,GAAI;AACb;AACA;AACA;AACA;AACA,UAAUe,QAAQ,CAAC,CAAC,MAAKC,EAAE,EAAE,iBAAiB,EAAE,qBAAqB,CAAC,CAAE;AACxE,cAAc,MAAKkD,wBAAyB;AAC5C;AACA;AACA;AACA;AACA,OAAO,MAAKuC,uBAAuB,EAAG;AACtC;AACA;AACA,+BAA+B;MAC9B,CAAC;MAAA,MAEDA,uBAAuB,GAAG,MAAM;QAC/B,MAAMC,qBAAqB,GAAG,EAAE;QAChC,IAAI9E,YAAY,CAAC+E,SAAS,EAAE,EAAE;UAC7BD,qBAAqB,CAACjJ,IAAI,CACzB,MAAKmJ,sBAAsB,CAC1B,6DAA6D,EAC7D,QAAQ,EACR,6BAA6B,CAC7B,CACD;QACF;QACAF,qBAAqB,CAACjJ,IAAI,CACzB,MAAKmJ,sBAAsB,CAAC,4DAA4D,EAAE,OAAO,EAAE,sBAAsB,CAAC,CAC1H;QACDF,qBAAqB,CAACjJ,IAAI,CACzB,MAAKmJ,sBAAsB,CAAC,4DAA4D,EAAE,OAAO,EAAE,uBAAuB,CAAC,CAC3H;QACD,OAAOF,qBAAqB;MAC7B,CAAC;MAAA,MAEDE,sBAAsB,GAAG,CAACC,OAAe,EAAEzQ,GAAW,EAAE0Q,IAAY,KAAK;QACxE,OAAO9G,GAAI;AACb,cAAc6G,OAAQ;AACtB,UAAUzQ,GAAI;AACd,WAAW0Q,IAAK;AAChB,KAAK;MACJ,CAAC;MAAA,MAkED5D,UAAU,GAAIjB,gBAA2B,IAAK;QAC7C,MAAMV,SAAS,GAAGU,gBAAgB,CAACzJ,SAAS,EAAE;QAC9C,IAAI+I,SAAS,CAAC,oCAAoC,CAAC,IAAIA,SAAS,CAAC,oCAAoC,CAAC,CAACrC,KAAK,EAAE;UAC7G,MAAM6H,iBAAiB,GAAG,MAAKvM,WAAW,CACxCD,QAAQ,EAAE,CACVrB,oBAAoB,CACpB+I,gBAAgB,CAAC/G,OAAO,EAAE,GAAG,2CAA2C,EACxEqG,SAAS,CAAC,oCAAoC,CAAC,CAACrC,KAAK,CACrD;UACF,OAAOvE,WAAW,CAACqM,4CAA4C,CAACzF,SAAS,CAAC,oCAAoC,CAAC,CAACrC,KAAK,EAAE;YACtHuD,OAAO,EAAEsE;UACV,CAAC,CAAC;QACH,CAAC,MAAM,IAAIxF,SAAS,CAAC,oCAAoC,CAAC,EAAE;UAC3D,OAAO,CAACA,SAAS,CAAC,oCAAoC,CAAC;QACxD,CAAC,MAAM;UACN,OAAO,IAAI;QACZ;MACD,CAAC;MAAA,MAED0F,cAAc,GAAG,MAAM;QACtB,OAAO,MAAKzM,WAAW,CAACU,OAAO,EAAE,CAACgM,WAAW,CAAC,GAAG,CAAC,KAAK,MAAK1M,WAAW,CAACU,OAAO,EAAE,CAAC5F,MAAM,GAAG,CAAC,GACzF,MAAKkF,WAAW,CAACU,OAAO,EAAE,CAACd,UAAU,CAAC,GAAG,EAAE,EAAE,CAAC,GAC9C,MAAKI,WAAW,CAACU,OAAO,EAAE,CAACrB,KAAK,CAAC,GAAG,CAAC,CAAC,MAAKW,WAAW,CAACU,OAAO,EAAE,CAACrB,KAAK,CAAC,GAAG,CAAC,CAACvE,MAAM,GAAG,CAAC,CAAC;MAC3F,CAAC;MA/5BA,MAAM8C,mBAAkB,GAAGkC,2BAA2B,CAACxC,OAAM,CAACS,QAAQ,EAAGT,OAAM,CAAC0C,WAAW,CAAC;MAC5F,MAAM2M,uBAAuB,GAAG,MAAKC,mBAAmB,CAAChP,mBAAkB,EAAE,sBAAuB0D,SAAS,EAAE9D,UAAS,CAAC;MACzH,MAAMqP,iBAAiB,GAAGnQ,kBAAkB,CAACoQ,oBAAoB,CAACxP,OAAM,EAAEM,mBAAkB,EAAE+O,uBAAuB,CAAC;MACtH,MAAMI,WAAW,GAAGrQ,kBAAkB,CAACsQ,cAAc,CAAC1P,OAAM,EAAEuP,iBAAiB,CAAC;MAChF,MAAMlP,kBAAiB,GAAG,MAAKiP,mBAAmB,CAAChP,mBAAkB,EAAE,sBAAuB0D,SAAS,EAAE9D,UAAS,EAAEuP,WAAW,CAAC;MAChI,MAAM7N,kBAAiB,GAAG,IAAI+N,iBAAiB,CAACtP,kBAAiB,CAACuP,aAAa,EAAE,EAAEvP,kBAAiB,CAAC;MACrG,MAAMyI,iBAAoC,GACzC9I,OAAM,CAACkB,eAAe,KAAK8C,SAAS,IAAIhE,OAAM,CAACkB,eAAe,KAAK,IAAI,GACpE,MAAKd,qBAAqB,CAACJ,OAAM,EAAEK,kBAAiB,EAAEC,mBAAkB,CAAC,GACzEN,OAAM,CAACkB,eAAe;MAC1B;MACA,MAAK2O,cAAc,GAAG/G,iBAAgB,CAAC+G,cAAc;MACrD,MAAKC,cAAc,GAAGhH,iBAAgB,CAACgH,cAAc;MACrD,MAAKC,aAAa,GAAGjH,iBAAgB,CAACiH,aAAa;MACnD,MAAKxD,YAAY,GAAG,MAAKnL,oBAAoB,CAAC0H,iBAAgB,CAACwD,OAAO,EAAEpM,UAAS,CAAC;MAClF,MAAK8P,aAAa,GAAGhQ,OAAM,CAACgQ,aAAa,CAAEC,WAAW,EAAE;MACxD,IAAIjQ,OAAM,CAACkQ,SAAS,EAAE;QACrB,MAAKjO,MAAM,GAAG,MAAKkO,YAAY,CAACnQ,OAAM,CAACkQ,SAAS,CAAC;MAClD,CAAC,MAAM,IAAI,CAAClQ,OAAM,CAACiC,MAAM,EAAE;QAC1B,MAAKA,MAAM,GAAG6G,iBAAgB,CAACsH,QAAQ;MACxC;MACA,MAAKhE,wBAAwB,GAAGtD,iBAAgB,CAACsD,wBAAwB;MACzE,MAAKjE,qCAAqC,CAACnI,OAAM,CAAC;MAClD,MAAK+I,iBAAiB,GAAG,MAAKF,oBAAoB,CAAC7I,OAAM,EAAE8I,iBAAgB,CAAC;MAC5E,MAAKmE,OAAO,GAAGnE,iBAAgB,CAACmE,OAAO;MACvC,IAAI3L,aAAY,GAAGtB,OAAM,CAAC0C,WAAW,CAAEU,OAAO,EAAE;MAChD9B,aAAY,GAAGA,aAAY,CAACA,aAAY,CAAC9D,MAAM,GAAG,CAAC,CAAC,KAAK,GAAG,GAAG8D,aAAY,CAACxD,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAGwD,aAAY;MACvG,MAAK+O,cAAc,GAAGC,WAAW,CAACC,gBAAgB,CAACrQ,UAAS,CAACsB,MAAM,CAACgP,SAAS,EAAElP,aAAY,CAAC;MAC5F,IAAItB,OAAM,CAACyQ,iBAAiB,IAAI,KAAK,EAAE;QACtC,MAAKC,MAAM,GAAG1Q,OAAM,CAACkJ,EAAE,GAAG,SAAS;QACnC,MAAKyH,UAAU,GAAG3Q,OAAM,CAACkJ,EAAE;MAC5B,CAAC,MAAM;QACN,MAAKwH,MAAM,GAAG1Q,OAAM,CAACkJ,EAAE;QACvB,MAAKyH,UAAU,GAAG,MAAKR,YAAY,CAACnQ,OAAM,CAACkJ,EAAE,CAAE;MAChD;MACA,MAAMtG,aAAY,GAAGC,WAAW,CAACC,UAAU,CAAC,MAAKrC,QAAQ,CAAC;MAC1D,MAAMsC,MAAK,GAAGH,aAAY,CAAClC,SAAS,EAAE;MACtC,MAAKkQ,UAAU,GAAG/N,WAAW,CAACgO,eAAe,CAAC9N,MAAK,CAAC+N,SAAS,CAAC;MAC9D,MAAMC,qBAAqB,GAAGlO,WAAW,CAAC6H,wBAAwB,CAAC9H,aAAY,CAAClC,SAAS,EAAE,EAAE;QAC5FiK,OAAO,EAAE/H;MACV,CAAC,CAAC;MACF,IAAIhE,MAAM,CAACoS,IAAI,0BAAC,MAAK9P,eAAe,0DAApB,sBAAsB+P,cAAc,CAAC,CAACzT,MAAM,GAAG,CAAC,EAAE;QAAA;QACjEoB,MAAM,CAACoS,IAAI,2BAAC,MAAK9P,eAAe,2DAApB,uBAAsB+P,cAAc,CAAC,CAACvI,OAAO,CAAE1D,IAAY,IAAK;UAAA;UAC3E,MAAM9H,MAAM,6BAAG,MAAKgE,eAAe,2DAApB,uBAAsB+P,cAAc,CAACjM,IAAI,CAAC;UACzD,MAAMwE,aAAa,GAAG,MAAKpI,oBAAoB,CAAClE,MAAM,EAAEgD,UAAS,CAAC;UAClE,MAAMiK,gBAAgB,GAAGjN,MAAM,CAAC4E,cAAc,IAAI,MAAKY,WAAW,CAACD,QAAQ,EAAE,CAACrB,oBAAoB,CAAClE,MAAM,CAAC4E,cAAc,CAAC;UACzH,MAAM2H,SAAS,GAAGU,gBAAgB,IAAIA,gBAAgB,CAACzJ,SAAS,EAAE;UAClE,MAAMgJ,0BAA0B,GAAGe,uBAAuB,CAACsG,qBAAqB,CAAC;UACjF,MAAKxH,iBAAiB,CAACC,aAAa,EAAEC,SAAS,EAAEC,0BAA0B,EAAExM,MAAM,CAAC;QACrF,CAAC,CAAC;MACH;MACA,MAAKsO,QAAQ,GAAG,MAAK7J,gBAAgB,CAAC3B,OAAM,EAAE4B,kBAAiB,CAAC;MAChE,MAAMsP,gBAAgB,GAAGpH,YAAY,CAACqH,6BAA6B,CAAC,MAAK1Q,QAAQ,CAAC;MAClF,MAAK2Q,cAAc,GAAGvO,WAAW,CAACwO,iBAAiB,CAClD,MAAK5Q,QAAQ,EACb,MAAKA,QAAQ,CAACC,SAAS,EAAE,EACzBwQ,gBAAgB,CAAC9N,OAAO,EAAE,EAC1B,MAAKlC,eAAe,CAACoQ,cAAc,CACnC;MACD,MAAMC,mBAAmB,GAAG,MAAK7O,WAAW,CAACD,QAAQ,EAAE,CAACrB,oBAAoB,CAACwB,aAAY,CAACQ,OAAO,EAAE,GAAG,UAAU,EAAEL,MAAK,CAACyO,OAAO,CAAC;MAChI,MAAMC,kBAAkB,GAAG,MAAK/O,WAAW,CAACD,QAAQ,EAAE,CAACrB,oBAAoB,CAAC,MAAKsB,WAAW,CAACU,OAAO,EAAE,EAAE,MAAKV,WAAW,CAAC;MACzH,MAAMgP,eAAe,GAAG5H,YAAY,CAACqF,cAAc,CAAC,MAAKzM,WAAW,EAAE;QAAEiI,OAAO,EAAE8G;MAAmB,CAAC,CAAC;MACtG,MAAME,oBAAoB,GAAG7H,YAAY,CAAC8H,mBAAmB,CAAC,MAAKlP,WAAW,CAAC;MAC/E,MAAMmP,2BAA2B,GAAG,MAAKnP,WAAW,CAACD,QAAQ,EAAE,CAACrB,oBAAoB,CAACuQ,oBAAoB,EAAE,MAAKjP,WAAW,CAAC;MAC5H,MAAKoP,WAAW,GAAG;QAClBH,oBAAoB,EAAED,eAAe;QACrCK,SAAS,EACR,OAAOF,2BAA2B,CAACnR,SAAS,EAAE,KAAK,QAAQ,GACxDmR,2BAA2B,CAACnR,SAAS,EAAE,GACvCmR,2BAA2B,CAACnR,SAAS,CAAC,aAAa,CAAC;QACxDsR,UAAU,EAAEN,eAAe,GAAG,GAAG;QACjCX,qBAAqB,EAAEjH,YAAY,CAACmI,mBAAmB,CAACrK,IAAI,CAACsK,KAAK,CAACnB,qBAAqB,CAAC,CAAC;QAC1FoB,0BAA0B,EACzBC,YAAY,CAACC,6BAA6B,CAACtP,MAAK,CAACyO,OAAO,EAAE;UACzD7G,OAAO,EAAE4G;QACV,CAAC,CAAC,GAAG,EAAE;QACRe,iBAAiB,EAAErJ,QAAQ,CAAC,CAAC,MAAKC,EAAE,EAAE,iBAAiB,EAAE,qBAAqB,CAAC,CAAC;QAChF7E,SAAS,EAAEyF,YAAY,CAACmI,mBAAmB,2BAAC,MAAK/Q,eAAe,2DAApB,uBAAsBmD,SAAS,CAAC;QAC5EF,QAAQ,EAAE2F,YAAY,CAACmI,mBAAmB,2BAAC,MAAK/Q,eAAe,2DAApB,uBAAsBiD,QAAQ,CAAC;QAC1EmN,cAAc,EAAExH,YAAY,CAACmI,mBAAmB,2BAAC,MAAK/Q,eAAe,2DAApB,uBAAsBoQ,cAAc,CAAC;QACtFvB,aAAa,EAAE,MAAKA,aAAa;QACjCM,cAAc,EAAE,MAAKA,cAAc;QACnCkC,UAAU,4BAAE,MAAKrR,eAAe,2DAApB,uBAAsBqR;MACnC,CAAC;MACD,MAAKC,QAAQ,GAAG,MAAKjG,YAAY,GAAG,MAAKN,iBAAiB,CAACrJ,aAAY,CAAC,GAAGsF,GAAI,EAAC;MAAC;IAClF;IAAC;IAAA;IAAA,OA2BDiI,YAAY,GAAZ,sBAAasC,QAAgB,EAAE;MAC9B,OAAQ,GAAEA,QAAS,UAAS;IAC7B,CAAC;IAAA,mBAEM/C,cAAc,GAArB,wBAAsB5B,KAAuC,EAAEyB,iBAAqC,EAAE;MACrG,MAAME,WAAmC,GAAG,CAAC,CAAC;MAC9C,IAAI3B,KAAK,CAACxB,OAAO,EAAE;QAAA;QAClB,kBAAA1N,MAAM,CAACC,MAAM,CAACiP,KAAK,CAACxB,OAAO,CAAC,mDAA5B,eAA8B5D,OAAO,CAAExG,IAAI,IAAK;UAC/C4L,KAAK,CAACxB,OAAO,GAAG;YAAE,GAAIwB,KAAK,CAACxB,OAA+B;YAAE,GAAIpK,IAAI,CAAyBjF;UAAmB,CAAC;UAClH,OAAQiF,IAAI,CAAyBjF,kBAAkB;QACxD,CAAC,CAAC;MACH;MACA,IAAIsS,iBAAiB,EAAE;QACtBE,WAAW,CAACF,iBAAiB,CAAC,GAAG;UAChCjD,OAAO,EAAEwB,KAAK,CAACxB;QAChB,CAAC;MACF;MACA,OAAOmD,WAAW;IACnB,CAAC;IAAA,OA+xBDiD,WAAW,GAAX,uBAAc;MACb,MAAM9P,YAAY,GAAGC,WAAW,CAACC,UAAU,CAAC,IAAI,CAACrC,QAAQ,CAAC;MAC1D,MAAMsC,KAAK,GAAGH,YAAY,CAAClC,SAAS,EAAE;MACtC,IAAIiS,aAAa,GAAG,EAAE;MACtB,IAAI,IAAI,CAACC,aAAa,EAAE;QACvBD,aAAa,GAAG,IAAI,CAACC,aAAa;MACnC,CAAC,MAAM;QACN,MAAMtR,YAAY,GAAG,IAAI,CAAC6N,cAAc,EAAE;QAC1CwD,aAAa,GACZ,qEAAqE,GACrErR,YAAY,GACZ,6DAA6D,GAC7D,IAAI,CAAC0O,aAAa,GAClB,KAAK;MACP;MACA,MAAM6C,OAAO,GAAG,qBAAqB,GAAG,IAAI,CAAC3J,EAAE,GAAG,GAAG;MACrD,IAAI,CAAC,IAAI,CAAC4J,MAAM,EAAE;QACjB,IAAI,CAACA,MAAM,GAAG/P,KAAK,CAACgQ,KAAK;MAC1B;MACA,OAAO7K,GAAI;AACb,ydACI,IAAI,CAACwI,MACL,sBAAqB,IAAI,CAACsC,eAAgB,kBAAiB,IAAI,CAACC,WAAY;AAChF;AACA;AACA;AACA;AACA,gBAAgBJ,OAAQ;AACxB;AACA,WAAW,IAAI,CAAClC,UAAW;AAC3B,kBAAkB,IAAI,CAACC,UAAW;AAClC,uBAAuB,IAAI,CAACQ,cAAe;AAC3C,eAAe,IAAI,CAAC0B,MAAO;AAC3B,sBAAsB,IAAI,CAACI,aAAc;AACzC,eAAe,IAAI,CAACC,MAAO;AAC3B,cAAc,IAAI,CAACC,KAAM;AACzB,oBAAoB,IAAI,CAAChK,WAAY;AACrC,iBAAiB,IAAI,CAAChB,eAAgB;AACtC,eAAe,IAAI,CAACnG,MAAO;AAC3B,mBAAmB,IAAI,CAACoR,UAAW;AACnC,uBAAuB,IAAI,CAACvD,cAAe;AAC3C,iBAAiB6C,aAAc;AAC/B,uCAAuC,IAAI,CAACb,WAAW,CAACH,oBAAqB;AAC7E,4BAA4B,IAAI,CAACG,WAAW,CAACC,SAAU;AACvD,6BAA6B,IAAI,CAACD,WAAW,CAACE,UAAW;AACzD,wCAAwC,IAAI,CAACF,WAAW,CAACf,qBAAsB;AAC/E,6CAA6C,IAAI,CAACe,WAAW,CAACK,0BAA2B;AACzF,oCAAoC,IAAI,CAACL,WAAW,CAACQ,iBAAkB;AACvE,4BAA4B,IAAI,CAACR,WAAW,CAACzN,SAAU;AACvD,2BAA2B,IAAI,CAACyN,WAAW,CAAC3N,QAAS;AACrD,iCAAiC,IAAI,CAAC2N,WAAW,CAACR,cAAe;AACjE,gCAAgC,IAAI,CAACQ,WAAW,CAAC/B,aAAc;AAC/D,iCAAiC,IAAI,CAAC+B,WAAW,CAACzB,cAAe;AACjE,6BAA6B,IAAI,CAACyB,WAAW,CAACS,UAAW;AACzD,gBAAgB,IAAI,CAACtF,OAAQ;AAC7B;AACA;AACA,OAAO,IAAI,CAAClF,aAAa,CAACnF,YAAY,CAAE;AACxC,OAAO,IAAI,CAAC0G,sBAAsB,EAAG;AACrC;AACA;AACA,OAAO,IAAI,CAACgC,QAAQ,CAAC1I,YAAY,CAAE;AACnC;AACA,MAAM,IAAI,CAAC4P,QAAS;AACpB,MAAM,IAAI,CAACxJ,uBAAuB,EAAG;AACrC;AACA,oBAAoB;IACnB,CAAC;IAAA;EAAA,EAzqC8CsK,iBAAiB,WA4SzDxS,2BAA2B,GAAG,CAACF,eAAyC,EAAEL,kBAAsC,KAAK;IAC3HK,eAAe,CAAC8H,OAAO,CAAC,UAAU6K,cAAsC,EAAE;MACzE,IAAIA,cAAc,CAACC,eAAe,CAACpR,OAAO,CAAC,mCAAmC,CAAC,GAAG,CAAC,CAAC,EAAE;QACrF7B,kBAAkB,GAAGgT,cAAc,CAACC,eAAe;MACpD;IACD,CAAC,CAAC;IACF,OAAOjT,kBAAkB;EAC1B,CAAC,UAkuBMiP,oBAAoB,GAAG,CAC7B1B,KAAuC,EACvC2F,iBAAsC,EACtChS,gBAAkC,KAC9B;IAAA;IACJ,IAAIhB,QAA4B,GAAGD,kCAAkC,CAACiT,iBAAiB,CAAW;IAClG,IAAIA,iBAAiB,CAAC9Q,YAAY,CAAC+Q,IAAI,uCAA4B,EAAE;MACpE,OAAOjT,QAAQ,CAAC,CAAC;IAClB;;IACA,IAAI,oBAAAqN,KAAK,CAACrN,QAAQ,oDAAd,gBAAgBC,SAAS,EAAE,CAACC,KAAK,MAAK,oDAAoD,EAAE;MAC/F,MAAMC,eAAe,GAAGkN,KAAK,CAACrN,QAAQ,CAACC,SAAS,EAAE,CAACG,cAAc;MACjEJ,QAAQ,GAAGrB,OAAkB,CAAC0B,2BAA2B,CAACF,eAAe,EAAEH,QAAQ,CAAC;IACrF;IACA,IAAIA,QAAQ,EAAE;MAAA;MACb;MACA,MAAMkT,cAAc,GAAGlS,gBAAgB,CAACmS,uBAAuB,CAACnT,QAAQ,CAAC;MAEzE,IAAIU,cAAsC,GAAG,EAAE;MAC/C,iCAAQsS,iBAAiB,CAAC9Q,YAAY,0DAA9B,sBAAgC+Q,IAAI;QAC3C;UACC,IAAID,iBAAiB,CAAC9Q,YAAY,CAACkR,mBAAmB,EAAE;YACvD1S,cAAc,GAAG2S,wCAAwC,CACxDL,iBAAiB,CAAC9Q,YAAY,CAACkR,mBAAmB,EAClDpT,QAAQ,EACRkT,cAAc,CAAClS,gBAAgB,CAC/B;UACF;UACA;QAED;UACCN,cAAc,GAAG2S,wCAAwC,CACxDL,iBAAiB,CAAC9Q,YAAY,EAC9BlC,QAAQ,EACRkT,cAAc,CAAClS,gBAAgB,CAC/B;UACD;QAED;UACC6C,GAAG,CAACkB,KAAK,CAAE,sCAAqCiO,iBAAiB,CAAC9Q,YAAY,CAAC+Q,IAAK,EAAC,CAAC;MAAC;MAGzF,MAAMK,QAAQ,GAAG5S,cAAc,CAAC6S,IAAI,CAAEC,GAAG,IAAK;QAC7C,OAAOA,GAAG,CAACC,aAAa,CAACR,IAAI,uCAA4B;MAC1D,CAAC,CAAC;MAEF,IAAIK,QAAQ,EAAE;QACb,OAAOA,QAAQ,CAACjS,cAAc;MAC/B,CAAC,MAAM;QACN,OAAOrB,QAAQ,CAAC,CAAC;MAClB;IACD,CAAC,MAAM;MACN6D,GAAG,CAACkB,KAAK,CAAE,sCAAqCiO,iBAAiB,CAAC9Q,YAAY,CAAC+Q,IAAK,EAAC,CAAC;MACtF,OAAOjT,QAAQ;IAChB;EACD,CAAC;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;EAAA;EAAA;AAAA"}},{"offset":{"line":3338,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","uid","BuildingBlock","BuildingBlockRuntime","DataVisualization","Aggregation","MetaModelConverter","BindingToolkit","ModelHelper","StableIdHelper","DataModelPathHelper","CommonHelper","JSONModel","ActionHelper","DefaultActionHandler","ODataMetaModelUtil","ChartHelper","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_dec18","_dec19","_dec20","_dec21","_dec22","_dec23","_dec24","_dec25","_dec26","_dec27","_dec28","_dec29","_dec30","_dec31","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_descriptor15","_descriptor16","_descriptor17","_descriptor18","_descriptor19","_descriptor20","_descriptor21","_descriptor22","_descriptor23","_descriptor24","_descriptor25","_descriptor26","_descriptor27","_descriptor28","_descriptor29","_descriptor30","_class3","_exports","getContextRelativeTargetObjectPath","generate","resolveBindingString","getInvolvedDataModelObjects","AggregationHelper","getVisualizationsFromPresentationVariant","getDataVisualizationConfiguration","xml","escapeXMLAttributeValue","defineBuildingBlock","BuildingBlockBase","blockEvent","blockAttribute","blockAggregation","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","mMeasureRole","personalizationValues","setCustomActionProperties","childAction","_action$getAttribute","menuContentActions","action","menuActions","actionKey","getAttribute","replace","children","length","localName","namespaceURI","actionsToAdd","Array","apply","actionIdx","customAction","actToAdd","_actToAdd$getAttribut","actionKeyAdd","curOutObject","text","__noWrap","press","requiresSelection","enabled","values","map","menuItem","position","placement","anchor","menu","ChartBuildingBlock","name","namespace","publicNamespace","type","isPublic","defaultValue","processAggregations","_BuildingBlockBase","_oProps","configuration","_mSettings","_this$chartDefinition","_this$chartDefinition4","_this$chartDefinition5","_this$chartDefinition6","_this$chartDefinition7","_this","this","_commandActions","createChartDefinition","oProps","oConverterContext","oContextObjectPath","_oProps$metaPath","sVisualizationPath","metaPath","getObject","$Type","aVisualizations","Visualizations","checkChartVisualizationPath","oVisualizationDefinition","useCondensedLayout","chartDefinition","visualizations","createBindingContext","oData","mSettings","sContextPath","models","converterContext","setProperty","getChartMeasures","aggregationHelper","aChartAnnotationPath","annotationPath","split","sChartAnnotationPath","filter","item","pos","indexOf","toString","replaceAll","oChart","getModel","contextPath","targetObject","chartContext","getUiChart","chart","aAggregatedProperty","getAggregatedProperties","aMeasures","sAnnoPath","getPath","aAggregatedProperties","aChartMeasures","Measures","aChartDynamicMeasures","DynamicMeasures","aTransAggInMeasures","oAggregatedProperties","some","oMeasure","Name","sEntitySetPath","oTransAggregations","transAgg","oCustomAggregations","customAgg","warning","bIsCustomAggregateIsMeasure","oChartMeasure","oCustomAggMeasure","getCustomAggMeasure","dynamicMeasure","getDynamicMeasures","chartMeasure","sKey","setCustomAggMeasure","setTransAggMeasure","setChartMeasureAttributes","MeasureAttributes","oMeasuresModel","$$valueAsPromise","error","role","propertyPath","push","oTransAggMeasure","aggregationMethod","label","_dynamicMeasure$value","oAggregatedProperty","startsWith","oDynamicMeasure","AggregatableProperty","AggregationMethod","annotations","_annotations","aMeasureAttributes","measureAttribute","_setChartMeasureAttribute","_measureAttribute$Dyn","_measureAttribute$Mea","_measureAttribute$Dat","sPath","DynamicMeasure","Measure","dataPoint","DataPoint","Role","oDataPoint","setMeasureRole","setMeasureDataPoint","Value","$Path","formatJSONToString","createDataPointProperty","index","$EnumMember","oCrit","sCriticality","JSON","stringify","RegExp","getDependents","commandAction","getActionCommand","checkPersonalizationInChartProperties","personalization","join","verifyValidPersonlization","valid","splitArray","acceptedValues","arrayElement","includes","getVariantManagement","oChartDefinition","variantManagement","createVariantManagement","id","variantSelected","headerLevel","variantSaved","getPersistenceProvider","pushActionCommand","actionContext","dataField","chartOperationAvailableMap","onExecuteAction","getPressEventForDataFieldForActionButton","onExecuteIBN","getPressHandlerForDataFieldForIBN","onExecuteManifest","buildActionWrapper","oAction","dataFieldContext","dataFieldAction","getActionContext","isBoundPath","getPathToBoundActionOverload","isBound","getOperationAvailableMap","isActionEnabled","isDataFieldForActionButtonEnabled","$IsBound","Action","enableOnSelect","isIBNEnabled","RequiresContext","actionCommand","getVisible","IsBound","getItems","dimensions","measures","Dimensions","formatDimensions","dimension","getItem","formatMeasures","measure","concat","prefix","getToolbarActions","aActions","getActions","onSegmentedButtonPressed","getSegmentedButton","_this$chartActions","actions","chartActions","removeMenuItems","getAction","hasOwnProperty","getCustomActions","splice","actionEnabled","getActionToolbarAction","unittestid","ariaHasPopup","visible","getActionToolbarMenuAction","useDefaultActionOnly","getUseDefaultActionOnly","buttonMode","getButtonMode","defaultAction","getMenuItemFromMenu","menuItemAction","pressHandler","command","noWrap","props","_props$actions","_props$actions$menu","aMenuItems","isMenuItem","getNavigationActions","getAnnotationActions","bEnabled","Label","actionObject","getAnnotationActionsEnabled","isDialog","toolbarAction","buildAction","actionPress","getSegmentedButtonItems","sSegmentedButtonItems","isDesktop","getSegmentedButtonItem","tooltip","icon","hiddenPathContext","getHiddenPathExpressionForTableActionsAndIBN","getContextPath","lastIndexOf","_oContextObjectPath","initialConverterContext","getConverterContext","visualizationPath","getVisualizationPath","extraParams","getExtraParams","_oConverterContext","_aggregationHelper","getEntityType","_oChartDefinition","navigationPath","autoBindOnInit","vizProperties","selectionMode","toUpperCase","filterBar","getContentId","filterId","_sContextPath","draftSupported","isDraftSupported","metaModel","_applyIdToContent","_apiId","_contentId","_chartContext","_chart","_chartType","formatChartType","ChartType","operationAvailableMap","commandActions","_this$chartDefinition2","_this$chartDefinition3","presentationPath","createPresentationPathContext","_sortCondtions","getSortConditions","applySupported","chartActionsContext","Actions","contextPathContext","contextPathPath","targetCollectionPath","getTargetCollection","targetCollectionPathContext","_customData","entitySet","entityType","stringifyCustomData","parse","multiSelectDisabledActions","getMultiSelectDisabledActions","segmentedButtonId","multiViews","_actions","_proto","sMacroId","_Object$values","getTemplate","chartdelegate","chartDelegate","binding","header","Title","selectionChange","stateChange","headerVisible","height","width","noDataText","oVisualization","$AnnotationPath","contextObjectPath","_props$metaPath","term","_contextObjectPath$ta","resolvedTarget","getEntityTypeAnnotation","PresentationVariant","chartViz","find","viz","visualization"],"sources":["ChartBuildingBlock-dbg.js"],"mappings":"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","sourceRoot":"chart"}},{"offset":{"line":3482,"column":0},"map":{"version":3,"names":["ChartItemRoleType","MDCLib","ChartDelegate","Object","assign","BaseChartDelegate","_setChartNoDataText","oChart","oBindingInfo","sNoDataKey","oChartFilterInfo","ChartUtils","getAllFilterInfo","suffixResourceKey","path","startsWith","substr","_getNoDataTextWithFilters","data","getFilter","search","filters","length","getModel","getResourceBundle","then","oResourceBundle","setNoDataText","CommonUtils","getTranslatedText","undefined","catch","error","Log","_handleProperty","oMDCChart","mEntitySetAnnotations","mKnownAggregatableProps","mCustomAggregates","aProperties","sCriticality","oApplySupported","CommonHelper","parseCustomData","sortRestrictionsInfo","ODataMetaModelUtil","getSortRestrictionsInfo","oFilterRestrictions","oFilterRestrictionsInfo","getFilterRestrictionsInfo","oObj","getObject","getPath","sKey","oMetaModel","$kind","$isCollection","oPropertyAnnotations","sPath","getMetaContext","aGroupableProperties","GroupableProperties","aAggregatableProperties","AggregatableProperties","bGroupable","bAggregatable","i","$PropertyPath","j","Property","aAggregateProperties","_createPropertyInfosForAggregatable","forEach","oAggregateProperty","push","sName","sTextProperty","$Path","bIsNavigationText","indexOf","name","propertyPath","label","sortable","_getSortable","propertyInfo","filterable","groupable","aggregatable","maxConditions","isMultiValueFilterExpression","sortKey","role","category","criticality","textProperty","textFormatter","formatText","oValue1","oValue2","oTextArrangementAnnotation","$EnumMember","updateBindingInfo","oFilter","sap","ui","getCore","byId","mConditions","getConditions","sorter","getSorters","oInnerChart","getControlDelegate","getInnerChart","oFilterInfo","getChartSelectionsExist","getFilterBarFilterInfo","sParameterPath","DelegateUtil","getParametersInfo","oInfo","FilterUtils","getFilterInfo","enableSearch","parameters","$search","normalizeSearchTerm","_checkAndAddDraftFilter","fetchProperties","oModel","_getModel","pCreatePropertyInfos","Promise","resolve","attachModelContextChange","resolver","onModelContextChange","oRetrievedModel","_createPropertyInfos","oEvent","oData","getSource","detachModelContextChange","sEntitySetPath","getMetaModel","aResults","all","requestObject","oEntityType","sAnno","aPropertyPromise","sAnnoKey","replace","aAnno","split","aDimensions","aMeasures","keys","aChartItems","getItems","key","isA","getKey","filter","val","mTypeAggregatableProps","sAggregatable","sPropKey","aggregationMethod","fetchCriticality","createBindingContext","bind","axis1","datapoint","sCustom","oItem","merge","rebind","sSearch","oChartBinding","getBinding","suspend","setAggregation","oInnerChartDelegate","onBeforeRendering","resume","removeEventDelegate","addEventDelegate","fireEvent","_setChart","oChartAPI","getParent","setVizProperties","detachSelectData","handleSelectionChange","detachDeselectData","detachDrilledUp","attachSelectData","attachDeselectData","attachDrilledUp","setSelectionMode","getPayload","selectionMode","toUpperCase","_getBindingInfo","_getBindingInfoFromState","oMetadataInfo","getDelegate","payload","sTargetCollectionPath","contextPath","oParams","entitySet","events","dataRequested","onInternalDataRequested","removeItemFromInnerChart","oMDCChartItem","call","getType","_getChart","fireDeselectData","sortRestrictionsProperty","bIsTransAggregate","Filter","FilterOperator","EQ","getInternalChartNameFromPropertyNameAndKind","kind","getPropertyFromNameAndKind","mdcChart","getPropertyHelper","getProperty"],"sourceRoot":"chart","sources":["ChartDelegate.ts"],"sourcesContent":["import type ResourceBundle from \"sap/base/i18n/ResourceBundle\";\nimport Log from \"sap/base/Log\";\nimport merge from \"sap/base/util/merge\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport ChartUtils from \"sap/fe/macros/chart/ChartUtils\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport FilterUtils from \"sap/fe/macros/filter/FilterUtils\";\nimport ODataMetaModelUtil, { type SortRestrictionsInfoType, type SortRestrictionsPropertyInfoType } from \"sap/fe/macros/ODataMetaModelUtil\";\nimport type Chart from \"sap/ui/mdc/Chart\";\nimport MDCLib from \"sap/ui/mdc/library\";\nimport DelegateUtil from \"sap/ui/mdc/odata/v4/util/DelegateUtil\";\nimport BaseChartDelegate from \"sap/ui/mdc/odata/v4/vizChart/ChartDelegate\";\nimport Filter from \"sap/ui/model/Filter\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\n\nconst ChartItemRoleType = (MDCLib as any).ChartItemRoleType;\n// /**\n//  * Helper class for sap.ui.mdc.Chart.\n//  * <h3><b>Note:</b></h3>\n//  * The class is experimental and the API/behaviour is not finalised\n//  * and hence this should not be used for productive usage.\n//  * Especially this class is not intended to be used for the FE scenario,\n//  * here we shall use sap.fe.macros.ChartDelegate that is especially tailored for V4\n//  * meta model\n//  *\n//  * @author SAP SE\n//  * @private\n//  * @experimental\n//  * @since 1.62\n//  * @alias sap.fe.macros.ChartDelegate\n//  */\nconst ChartDelegate = Object.assign({}, BaseChartDelegate);\n\nChartDelegate._setChartNoDataText = function (oChart: any, oBindingInfo: any) {\n\tlet sNoDataKey = \"\";\n\tconst oChartFilterInfo = ChartUtils.getAllFilterInfo(oChart),\n\t\tsuffixResourceKey = oBindingInfo.path.startsWith(\"/\") ? oBindingInfo.path.substr(1) : oBindingInfo.path;\n\tconst _getNoDataTextWithFilters = function () {\n\t\tif (oChart.data(\"multiViews\")) {\n\t\t\treturn \"M_TABLE_AND_CHART_NO_DATA_TEXT_MULTI_VIEW\";\n\t\t} else {\n\t\t\treturn \"T_TABLE_AND_CHART_NO_DATA_TEXT_WITH_FILTER\";\n\t\t}\n\t};\n\tif (oChart.getFilter()) {\n\t\tif (oChartFilterInfo.search || (oChartFilterInfo.filters && oChartFilterInfo.filters.length)) {\n\t\t\tsNoDataKey = _getNoDataTextWithFilters();\n\t\t} else {\n\t\t\tsNoDataKey = \"T_TABLE_AND_CHART_NO_DATA_TEXT\";\n\t\t}\n\t} else if (oChartFilterInfo.search || (oChartFilterInfo.filters && oChartFilterInfo.filters.length)) {\n\t\tsNoDataKey = _getNoDataTextWithFilters();\n\t} else {\n\t\tsNoDataKey = \"M_TABLE_AND_CHART_NO_FILTERS_NO_DATA_TEXT\";\n\t}\n\treturn (oChart.getModel(\"sap.fe.i18n\").getResourceBundle() as Promise<ResourceBundle>)\n\t\t.then(function (oResourceBundle) {\n\t\t\toChart.setNoDataText(CommonUtils.getTranslatedText(sNoDataKey, oResourceBundle, undefined, suffixResourceKey));\n\t\t})\n\t\t.catch(function (error) {\n\t\t\tLog.error(error);\n\t\t});\n};\n\nChartDelegate._handleProperty = function (\n\toMDCChart: Chart,\n\tmEntitySetAnnotations: any,\n\tmKnownAggregatableProps: any,\n\tmCustomAggregates: any,\n\taProperties: any[],\n\tsCriticality: string\n) {\n\tconst oApplySupported = CommonHelper.parseCustomData(oMDCChart.data(\"applySupported\"));\n\tconst sortRestrictionsInfo = ODataMetaModelUtil.getSortRestrictionsInfo(mEntitySetAnnotations);\n\tconst oFilterRestrictions = mEntitySetAnnotations[\"@Org.OData.Capabilities.V1.FilterRestrictions\"];\n\tconst oFilterRestrictionsInfo = ODataMetaModelUtil.getFilterRestrictionsInfo(oFilterRestrictions);\n\tconst oObj = this.getModel().getObject(this.getPath());\n\tconst sKey = this.getModel().getObject(`${this.getPath()}@sapui.name`) as string;\n\tconst oMetaModel = this.getModel();\n\tif (oObj && oObj.$kind === \"Property\") {\n\t\t// ignore (as for now) all complex properties\n\t\t// not clear if they might be nesting (complex in complex)\n\t\t// not clear how they are represented in non-filterable annotation\n\t\t// etc.\n\t\tif (oObj.$isCollection) {\n\t\t\t//Log.warning(\"Complex property with type \" + oObj.$Type + \" has been ignored\");\n\t\t\treturn;\n\t\t}\n\n\t\tconst oPropertyAnnotations = oMetaModel.getObject(`${this.getPath()}@`);\n\t\tconst sPath = oMetaModel.getObject(\"@sapui.name\", oMetaModel.getMetaContext(this.getPath()));\n\n\t\tconst aGroupableProperties = oApplySupported && oApplySupported.GroupableProperties;\n\t\tconst aAggregatableProperties = oApplySupported && oApplySupported.AggregatableProperties;\n\t\tlet bGroupable = false,\n\t\t\tbAggregatable = false;\n\t\tif (aGroupableProperties && aGroupableProperties.length) {\n\t\t\tfor (let i = 0; i < aGroupableProperties.length; i++) {\n\t\t\t\tif (aGroupableProperties[i].$PropertyPath === sPath) {\n\t\t\t\t\tbGroupable = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (aAggregatableProperties && aAggregatableProperties.length) {\n\t\t\tfor (let j = 0; j < aAggregatableProperties.length; j++) {\n\t\t\t\tif (aAggregatableProperties[j].Property.$PropertyPath === sPath) {\n\t\t\t\t\tbAggregatable = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!aGroupableProperties || (aGroupableProperties && !aGroupableProperties.length)) {\n\t\t\tbGroupable = oPropertyAnnotations[\"@Org.OData.Aggregation.V1.Groupable\"];\n\t\t}\n\t\tif (!aAggregatableProperties || (aAggregatableProperties && !aAggregatableProperties.length)) {\n\t\t\tbAggregatable = oPropertyAnnotations[\"@Org.OData.Aggregation.V1.Aggregatable\"];\n\t\t}\n\n\t\t//Right now: skip them, since we can't create a chart from it\n\t\tif (!bGroupable && !bAggregatable) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (bAggregatable) {\n\t\t\tconst aAggregateProperties = ChartDelegate._createPropertyInfosForAggregatable(\n\t\t\t\toMDCChart,\n\t\t\t\tsKey,\n\t\t\t\toPropertyAnnotations,\n\t\t\t\toFilterRestrictionsInfo,\n\t\t\t\tsortRestrictionsInfo,\n\t\t\t\tmKnownAggregatableProps,\n\t\t\t\tmCustomAggregates\n\t\t\t);\n\t\t\taAggregateProperties.forEach(function (oAggregateProperty: any) {\n\t\t\t\taProperties.push(oAggregateProperty);\n\t\t\t});\n\t\t}\n\n\t\tif (bGroupable) {\n\t\t\tconst sName = sKey || \"\",\n\t\t\t\tsTextProperty = oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Text\"]\n\t\t\t\t\t? oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Text\"].$Path\n\t\t\t\t\t: null;\n\t\t\tlet bIsNavigationText = false;\n\t\t\tif (sName && sName.indexOf(\"/\") > -1) {\n\t\t\t\tLog.error(`$expand is not yet supported. Property: ${sName} from an association cannot be used`);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (sTextProperty && sTextProperty.indexOf(\"/\") > -1) {\n\t\t\t\tLog.error(`$expand is not yet supported. Text Property: ${sTextProperty} from an association cannot be used`);\n\t\t\t\tbIsNavigationText = true;\n\t\t\t}\n\t\t\taProperties.push({\n\t\t\t\tname: \"_fe_groupable_\" + sKey,\n\t\t\t\tpropertyPath: sKey,\n\t\t\t\tlabel: oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Label\"] || sKey,\n\t\t\t\tsortable: ChartDelegate._getSortable(oMDCChart, sortRestrictionsInfo.propertyInfo[sKey], false),\n\t\t\t\tfilterable: oFilterRestrictionsInfo[sKey] ? oFilterRestrictionsInfo[sKey].filterable : true,\n\t\t\t\tgroupable: true,\n\t\t\t\taggregatable: false,\n\t\t\t\tmaxConditions: ODataMetaModelUtil.isMultiValueFilterExpression(oFilterRestrictionsInfo.propertyInfo[sKey]) ? -1 : 1,\n\t\t\t\tsortKey: sKey,\n\t\t\t\trole: ChartItemRoleType.category, //standard, normally this should be interpreted from UI.Chart annotation\n\t\t\t\tcriticality: sCriticality, //To be implemented by FE\n\t\t\t\ttextProperty:\n\t\t\t\t\t!bIsNavigationText && oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Text\"]\n\t\t\t\t\t\t? oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Text\"].$Path\n\t\t\t\t\t\t: null, //To be implemented by FE\n\t\t\t\ttextFormatter: oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement\"]\n\t\t\t});\n\t\t}\n\t}\n};\n\nChartDelegate.formatText = function (oValue1: any, oValue2: any) {\n\tconst oTextArrangementAnnotation = this.textFormatter;\n\tif (oTextArrangementAnnotation.$EnumMember === \"com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst\") {\n\t\treturn `${oValue2} (${oValue1})`;\n\t} else if (oTextArrangementAnnotation.$EnumMember === \"com.sap.vocabularies.UI.v1.TextArrangementType/TextLast\") {\n\t\treturn `${oValue1} (${oValue2})`;\n\t} else if (oTextArrangementAnnotation.$EnumMember === \"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly\") {\n\t\treturn oValue2;\n\t}\n\treturn oValue2 ? oValue2 : oValue1;\n};\n\nChartDelegate.updateBindingInfo = function (oChart: any, oBindingInfo: any) {\n\tChartDelegate._setChartNoDataText(oChart, oBindingInfo);\n\n\tconst oFilter = sap.ui.getCore().byId(oChart.getFilter()) as any;\n\tif (oFilter) {\n\t\tconst mConditions = oFilter.getConditions();\n\n\t\tif (mConditions) {\n\t\t\tif (!oBindingInfo) {\n\t\t\t\toBindingInfo = {};\n\t\t\t}\n\t\t\toBindingInfo.sorter = this.getSorters(oChart);\n\t\t\tconst oInnerChart = oChart.getControlDelegate().getInnerChart(oChart);\n\t\t\tlet oFilterInfo;\n\t\t\tif (oInnerChart) {\n\t\t\t\t// if the action is a drill down, chart selections must be considered\n\t\t\t\tif (ChartUtils.getChartSelectionsExist(oChart)) {\n\t\t\t\t\toFilterInfo = ChartUtils.getAllFilterInfo(oChart);\n\t\t\t\t}\n\t\t\t}\n\t\t\toFilterInfo = oFilterInfo ? oFilterInfo : ChartUtils.getFilterBarFilterInfo(oChart);\n\t\t\tif (oFilterInfo) {\n\t\t\t\toBindingInfo.filters = oFilterInfo.filters;\n\t\t\t}\n\n\t\t\tconst sParameterPath = DelegateUtil.getParametersInfo(oFilter, mConditions);\n\t\t\tif (sParameterPath) {\n\t\t\t\toBindingInfo.path = sParameterPath;\n\t\t\t}\n\t\t}\n\n\t\t// Search\n\t\tconst oInfo = FilterUtils.getFilterInfo(oFilter, {});\n\t\tconst oApplySupported = CommonHelper.parseCustomData(oChart.data(\"applySupported\"));\n\t\tif (oApplySupported && oApplySupported.enableSearch && oInfo.search) {\n\t\t\toBindingInfo.parameters.$search = CommonUtils.normalizeSearchTerm(oInfo.search);\n\t\t} else if (oBindingInfo.parameters.$search) {\n\t\t\tdelete oBindingInfo.parameters.$search;\n\t\t}\n\t} else {\n\t\tif (!oBindingInfo) {\n\t\t\toBindingInfo = {};\n\t\t}\n\t\toBindingInfo.sorter = this.getSorters(oChart);\n\t}\n\tChartDelegate._checkAndAddDraftFilter(oChart, oBindingInfo);\n};\n\nChartDelegate.fetchProperties = function (oMDCChart: Chart) {\n\tconst oModel = this._getModel(oMDCChart);\n\tlet pCreatePropertyInfos;\n\n\tif (!oModel) {\n\t\tpCreatePropertyInfos = new Promise((resolve: any) => {\n\t\t\toMDCChart.attachModelContextChange(\n\t\t\t\t{\n\t\t\t\t\tresolver: resolve\n\t\t\t\t},\n\t\t\t\tonModelContextChange as any,\n\t\t\t\tthis\n\t\t\t);\n\t\t}).then((oRetrievedModel: any) => {\n\t\t\treturn this._createPropertyInfos(oMDCChart, oRetrievedModel);\n\t\t});\n\t} else {\n\t\tpCreatePropertyInfos = this._createPropertyInfos(oMDCChart, oModel);\n\t}\n\n\treturn pCreatePropertyInfos.then(function (aProperties: any) {\n\t\tif (oMDCChart.data) {\n\t\t\toMDCChart.data(\"$mdcChartPropertyInfo\", aProperties);\n\t\t}\n\t\treturn aProperties;\n\t});\n};\nfunction onModelContextChange(this: typeof ChartDelegate, oEvent: any, oData: any) {\n\tconst oMDCChart = oEvent.getSource();\n\tconst oModel = this._getModel(oMDCChart);\n\n\tif (oModel) {\n\t\toMDCChart.detachModelContextChange(onModelContextChange);\n\t\toData.resolver(oModel);\n\t}\n}\nChartDelegate._createPropertyInfos = async function (oMDCChart: any, oModel: any) {\n\tconst sEntitySetPath = `/${oMDCChart.data(\"entitySet\")}`;\n\tconst oMetaModel = oModel.getMetaModel();\n\n\tconst aResults = await Promise.all([oMetaModel.requestObject(`${sEntitySetPath}/`), oMetaModel.requestObject(`${sEntitySetPath}@`)]);\n\tconst aProperties: any[] = [];\n\tconst oEntityType = aResults[0],\n\t\tmEntitySetAnnotations = aResults[1];\n\tconst mCustomAggregates = CommonHelper.parseCustomData(oMDCChart.data(\"customAgg\"));\n\tlet sAnno;\n\tconst aPropertyPromise = [];\n\tfor (const sAnnoKey in mEntitySetAnnotations) {\n\t\tif (sAnnoKey.startsWith(\"@Org.OData.Aggregation.V1.CustomAggregate\")) {\n\t\t\tsAnno = sAnnoKey.replace(\"@Org.OData.Aggregation.V1.CustomAggregate#\", \"\");\n\t\t\tconst aAnno = sAnno.split(\"@\");\n\n\t\t\tif (aAnno.length == 2 && aAnno[1] == \"com.sap.vocabularies.Common.v1.Label\") {\n\t\t\t\tmCustomAggregates[aAnno[0]] = mEntitySetAnnotations[sAnnoKey];\n\t\t\t}\n\t\t}\n\t}\n\tconst aDimensions: any[] = [],\n\t\taMeasures = [];\n\tif (Object.keys(mCustomAggregates).length >= 1) {\n\t\tconst aChartItems = oMDCChart.getItems();\n\t\tfor (const key in aChartItems) {\n\t\t\tif (aChartItems[key].isA(\"sap.ui.mdc.chart.DimensionItem\")) {\n\t\t\t\taDimensions.push(aChartItems[key].getKey());\n\t\t\t} else if (aChartItems[key].isA(\"sap.ui.mdc.chart.MeasureItem\")) {\n\t\t\t\taMeasures.push(aChartItems[key].getKey());\n\t\t\t}\n\t\t}\n\t\tif (\n\t\t\taMeasures.filter(function (val: any) {\n\t\t\t\treturn aDimensions.indexOf(val) != -1;\n\t\t\t}).length >= 1\n\t\t) {\n\t\t\tLog.error(\"Dimension and Measure has the sameProperty Configured\");\n\t\t}\n\t}\n\n\tconst mTypeAggregatableProps = CommonHelper.parseCustomData(oMDCChart.data(\"transAgg\"));\n\tconst mKnownAggregatableProps: any = {};\n\tfor (const sAggregatable in mTypeAggregatableProps) {\n\t\tconst sPropKey = mTypeAggregatableProps[sAggregatable].propertyPath;\n\t\tmKnownAggregatableProps[sPropKey] = mKnownAggregatableProps[sPropKey] || {};\n\t\tmKnownAggregatableProps[sPropKey][mTypeAggregatableProps[sAggregatable].aggregationMethod] = {\n\t\t\tname: mTypeAggregatableProps[sAggregatable].name,\n\t\t\tlabel: mTypeAggregatableProps[sAggregatable].label\n\t\t};\n\t}\n\tfor (const sKey in oEntityType) {\n\t\tif (sKey.indexOf(\"$\") !== 0) {\n\t\t\taPropertyPromise.push(\n\t\t\t\tODataMetaModelUtil.fetchCriticality(oMetaModel, oMetaModel.createBindingContext(`${sEntitySetPath}/${sKey}`)).then(\n\t\t\t\t\tChartDelegate._handleProperty.bind(\n\t\t\t\t\t\toMetaModel.getMetaContext(`${sEntitySetPath}/${sKey}`),\n\t\t\t\t\t\toMDCChart,\n\t\t\t\t\t\tmEntitySetAnnotations,\n\t\t\t\t\t\tmKnownAggregatableProps,\n\t\t\t\t\t\tmCustomAggregates,\n\t\t\t\t\t\taProperties\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}\n\tawait Promise.all(aPropertyPromise);\n\n\treturn aProperties;\n};\n\nChartDelegate._createPropertyInfosForAggregatable = function (\n\toMDCChart: Chart,\n\tsKey: string,\n\toPropertyAnnotations: any,\n\toFilterRestrictionsInfo: any,\n\tsortRestrictionsInfo: SortRestrictionsInfoType,\n\tmKnownAggregatableProps: any,\n\tmCustomAggregates: any\n) {\n\tconst aAggregateProperties = [];\n\tif (Object.keys(mKnownAggregatableProps).indexOf(sKey) > -1) {\n\t\tfor (const sAggregatable in mKnownAggregatableProps[sKey]) {\n\t\t\taAggregateProperties.push({\n\t\t\t\tname: \"_fe_aggregatable_\" + mKnownAggregatableProps[sKey][sAggregatable].name,\n\t\t\t\tpropertyPath: sKey,\n\t\t\t\tlabel:\n\t\t\t\t\tmKnownAggregatableProps[sKey][sAggregatable].label ||\n\t\t\t\t\t`${oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Label\"]} (${sAggregatable})` ||\n\t\t\t\t\t`${sKey} (${sAggregatable})`,\n\t\t\t\tsortable: sortRestrictionsInfo.propertyInfo[sKey] ? sortRestrictionsInfo.propertyInfo[sKey].sortable : true,\n\t\t\t\tfilterable: oFilterRestrictionsInfo[sKey] ? oFilterRestrictionsInfo[sKey].filterable : true,\n\t\t\t\tgroupable: false,\n\t\t\t\taggregatable: true,\n\t\t\t\taggregationMethod: sAggregatable,\n\t\t\t\tmaxConditions: ODataMetaModelUtil.isMultiValueFilterExpression(oFilterRestrictionsInfo.propertyInfo[sKey]) ? -1 : 1,\n\t\t\t\trole: ChartItemRoleType.axis1,\n\t\t\t\tdatapoint: null //To be implemented by FE\n\t\t\t});\n\t\t}\n\t}\n\tif (Object.keys(mCustomAggregates).indexOf(sKey) > -1) {\n\t\tfor (const sCustom in mCustomAggregates) {\n\t\t\tif (sCustom === sKey) {\n\t\t\t\tconst oItem = merge({}, mCustomAggregates[sCustom], {\n\t\t\t\t\tname: \"_fe_aggregatable_\" + sCustom,\n\t\t\t\t\tgroupable: false,\n\t\t\t\t\taggregatable: true,\n\t\t\t\t\trole: ChartItemRoleType.axis1,\n\t\t\t\t\tdatapoint: null //To be implemented by FE\n\t\t\t\t});\n\t\t\t\taAggregateProperties.push(oItem);\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn aAggregateProperties;\n};\nChartDelegate.rebind = function (oMDCChart: any, oBindingInfo: any) {\n\tconst sSearch = oBindingInfo.parameters.$search;\n\n\tif (sSearch) {\n\t\tdelete oBindingInfo.parameters.$search;\n\t}\n\n\tBaseChartDelegate.rebind(oMDCChart, oBindingInfo);\n\n\tif (sSearch) {\n\t\tconst oInnerChart = oMDCChart.getControlDelegate().getInnerChart(oMDCChart),\n\t\t\toChartBinding = oInnerChart && oInnerChart.getBinding(\"data\");\n\n\t\t// Temporary workaround until this is fixed in MDCChart / UI5 Chart\n\t\t// In order to avoid having 2 OData requests, we need to suspend the binding before setting some aggregation properties\n\t\t// and resume it once the chart has added other aggregation properties (in onBeforeRendering)\n\t\toChartBinding.suspend();\n\t\toChartBinding.setAggregation({ search: sSearch });\n\n\t\tconst oInnerChartDelegate = {\n\t\t\tonBeforeRendering: function () {\n\t\t\t\toChartBinding.resume();\n\t\t\t\toInnerChart.removeEventDelegate(oInnerChartDelegate);\n\t\t\t}\n\t\t};\n\t\toInnerChart.addEventDelegate(oInnerChartDelegate);\n\t}\n\n\toMDCChart.fireEvent(\"bindingUpdated\");\n};\nChartDelegate._setChart = function (oMDCChart: any, oInnerChart: any) {\n\tconst oChartAPI = oMDCChart.getParent();\n\toInnerChart.setVizProperties(oMDCChart.data(\"vizProperties\"));\n\toInnerChart.detachSelectData(oChartAPI.handleSelectionChange.bind(oChartAPI));\n\toInnerChart.detachDeselectData(oChartAPI.handleSelectionChange.bind(oChartAPI));\n\toInnerChart.detachDrilledUp(oChartAPI.handleSelectionChange.bind(oChartAPI));\n\toInnerChart.attachSelectData(oChartAPI.handleSelectionChange.bind(oChartAPI));\n\toInnerChart.attachDeselectData(oChartAPI.handleSelectionChange.bind(oChartAPI));\n\toInnerChart.attachDrilledUp(oChartAPI.handleSelectionChange.bind(oChartAPI));\n\n\toInnerChart.setSelectionMode(oMDCChart.getPayload().selectionMode.toUpperCase());\n\tBaseChartDelegate._setChart(oMDCChart, oInnerChart);\n};\nChartDelegate._getBindingInfo = function (oMDCChart: any) {\n\tif (this._getBindingInfoFromState(oMDCChart)) {\n\t\treturn this._getBindingInfoFromState(oMDCChart);\n\t}\n\n\tconst oMetadataInfo = oMDCChart.getDelegate().payload;\n\tconst oMetaModel = oMDCChart.getModel() && oMDCChart.getModel().getMetaModel();\n\tconst sTargetCollectionPath = oMDCChart.data(\"targetCollectionPath\");\n\tconst sEntitySetPath =\n\t\t(oMetaModel.getObject(`${sTargetCollectionPath}/$kind`) !== \"NavigationProperty\" ? \"/\" : \"\") + oMetadataInfo.contextPath;\n\tconst oParams = merge({}, oMetadataInfo.parameters, {\n\t\tentitySet: oMDCChart.data(\"entitySet\")\n\t});\n\treturn {\n\t\tpath: sEntitySetPath,\n\t\tevents: {\n\t\t\tdataRequested: oMDCChart.getParent().onInternalDataRequested.bind(oMDCChart.getParent())\n\t\t},\n\t\tparameters: oParams\n\t};\n};\nChartDelegate.removeItemFromInnerChart = function (oMDCChart: any, oMDCChartItem: any) {\n\tBaseChartDelegate.removeItemFromInnerChart.call(this, oMDCChart, oMDCChartItem);\n\tif (oMDCChartItem.getType() === \"groupable\") {\n\t\tconst oInnerChart = this._getChart(oMDCChart);\n\t\toInnerChart.fireDeselectData();\n\t}\n};\nChartDelegate._getSortable = function (\n\toMDCChart: any,\n\tsortRestrictionsProperty: SortRestrictionsPropertyInfoType | undefined,\n\tbIsTransAggregate: any\n) {\n\tif (bIsTransAggregate) {\n\t\tif (oMDCChart.data(\"draftSupported\") === \"true\") {\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn sortRestrictionsProperty ? sortRestrictionsProperty.sortable : true;\n\t\t}\n\t}\n\treturn sortRestrictionsProperty ? sortRestrictionsProperty.sortable : true;\n};\nChartDelegate._checkAndAddDraftFilter = function (oChart: any, oBindingInfo: any) {\n\tif (oChart.data(\"draftSupported\") === \"true\") {\n\t\tif (!oBindingInfo) {\n\t\t\toBindingInfo = {};\n\t\t}\n\t\tif (!oBindingInfo.filters) {\n\t\t\toBindingInfo.filters = [];\n\t\t}\n\t\toBindingInfo.filters.push(new Filter(\"IsActiveEntity\", FilterOperator.EQ, true));\n\t}\n};\n\n/**\n * This function returns an ID which should be used in the internal chart for the measure/dimension.\n * For standard cases, this is just the id of the property.\n * If it is necessary to use another id internally inside the chart (e.g. on duplicate property ids) this method can be overwritten.\n * In this case, <code>getPropertyFromNameAndKind</code> needs to be overwritten as well.\n *\n * @param {string} name ID of the property\n * @param {string} kind Type of the Property (Measure/Dimension)\n * @returns {string} Internal id for the sap.chart.Chart\n */\nChartDelegate.getInternalChartNameFromPropertyNameAndKind = function (name: string, kind: string) {\n\treturn name.replace(\"_fe_\" + kind + \"_\", \"\");\n};\n\n/**\n * This maps an id of an internal chart dimension/measure & type of a property to its corresponding property entry.\n *\n * @param {string} name ID of internal chart measure/dimension\n * @param {string} kind Kind of the property\n * @param {sap.ui.mdc.Chart} mdcChart Reference to the MDC chart\n * @returns {object} PropertyInfo object\n */\nChartDelegate.getPropertyFromNameAndKind = function (name: string, kind: string, mdcChart: any) {\n\treturn mdcChart.getPropertyHelper().getProperty(\"_fe_\" + kind + \"_\" + name);\n};\n\nexport default ChartDelegate;\n"],"mappings":"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"}},{"offset":{"line":3913,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","merge","CommonUtils","ChartUtils","CommonHelper","FilterUtils","ODataMetaModelUtil","MDCLib","DelegateUtil","BaseChartDelegate","Filter","FilterOperator","ChartItemRoleType","ChartDelegate","Object","assign","_setChartNoDataText","oChart","oBindingInfo","sNoDataKey","oChartFilterInfo","getAllFilterInfo","suffixResourceKey","path","startsWith","substr","_getNoDataTextWithFilters","data","getFilter","search","filters","length","getModel","getResourceBundle","then","oResourceBundle","setNoDataText","getTranslatedText","undefined","catch","error","_handleProperty","oMDCChart","mEntitySetAnnotations","mKnownAggregatableProps","mCustomAggregates","aProperties","sCriticality","oApplySupported","parseCustomData","sortRestrictionsInfo","getSortRestrictionsInfo","oFilterRestrictions","oFilterRestrictionsInfo","getFilterRestrictionsInfo","oObj","this","getObject","getPath","sKey","oMetaModel","$kind","$isCollection","oPropertyAnnotations","sPath","getMetaContext","aGroupableProperties","GroupableProperties","aAggregatableProperties","AggregatableProperties","bGroupable","bAggregatable","i","$PropertyPath","j","Property","aAggregateProperties","_createPropertyInfosForAggregatable","forEach","oAggregateProperty","push","sName","sTextProperty","$Path","bIsNavigationText","indexOf","name","propertyPath","label","sortable","_getSortable","propertyInfo","filterable","groupable","aggregatable","maxConditions","isMultiValueFilterExpression","sortKey","role","category","criticality","textProperty","textFormatter","formatText","oValue1","oValue2","oTextArrangementAnnotation","$EnumMember","updateBindingInfo","oFilter","getCore","byId","mConditions","getConditions","sorter","getSorters","oInnerChart","getControlDelegate","getInnerChart","oFilterInfo","getChartSelectionsExist","getFilterBarFilterInfo","sParameterPath","getParametersInfo","oInfo","getFilterInfo","enableSearch","parameters","$search","normalizeSearchTerm","_checkAndAddDraftFilter","fetchProperties","oModel","_getModel","pCreatePropertyInfos","Promise","resolve","attachModelContextChange","resolver","onModelContextChange","oRetrievedModel","_createPropertyInfos","oEvent","oData","getSource","detachModelContextChange","async","sEntitySetPath","getMetaModel","aResults","all","requestObject","oEntityType","sAnno","aPropertyPromise","sAnnoKey","replace","aAnno","split","aDimensions","aMeasures","keys","aChartItems","getItems","key","isA","getKey","filter","val","mTypeAggregatableProps","sAggregatable","sPropKey","aggregationMethod","fetchCriticality","createBindingContext","bind","axis1","datapoint","sCustom","oItem","rebind","sSearch","oChartBinding","getBinding","suspend","setAggregation","oInnerChartDelegate","onBeforeRendering","resume","removeEventDelegate","addEventDelegate","fireEvent","_setChart","oChartAPI","getParent","setVizProperties","detachSelectData","handleSelectionChange","detachDeselectData","detachDrilledUp","attachSelectData","attachDeselectData","attachDrilledUp","setSelectionMode","getPayload","selectionMode","toUpperCase","_getBindingInfo","_getBindingInfoFromState","oMetadataInfo","getDelegate","payload","sTargetCollectionPath","contextPath","oParams","entitySet","events","dataRequested","onInternalDataRequested","removeItemFromInnerChart","oMDCChartItem","call","getType","_getChart","fireDeselectData","sortRestrictionsProperty","bIsTransAggregate","EQ","getInternalChartNameFromPropertyNameAndKind","kind","getPropertyFromNameAndKind","mdcChart","getPropertyHelper","getProperty"],"sources":["ChartDelegate-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,+CAAO,CAAC,eAAgB,sBAAuB,0BAA2B,iCAAkC,6BAA8B,mCAAoC,mCAAoC,qBAAsB,wCAAyC,6CAA8C,sBAAuB,+BAAgC,SAAUC,EAAKC,EAAOC,EAAaC,EAAYC,EAAcC,EAAaC,EAAoBC,EAAQC,EAAcC,EAAmBC,EAAQC,GAC1gB,aAEA,MAAMC,EAAoBL,EAAOK,kBAgBjC,MAAMC,EAAgBC,OAAOC,OAAO,CAAC,EAAGN,GACxCI,EAAcG,oBAAsB,SAAUC,EAAQC,GACpD,IAAIC,EAAa,GACjB,MAAMC,EAAmBjB,EAAWkB,iBAAiBJ,GACnDK,EAAoBJ,EAAaK,KAAKC,WAAW,KAAON,EAAaK,KAAKE,OAAO,GAAKP,EAAaK,KACrG,MAAMG,EAA4B,WAChC,GAAIT,EAAOU,KAAK,cAAe,CAC7B,MAAO,2CACT,KAAO,CACL,MAAO,4CACT,CACF,EACA,GAAIV,EAAOW,YAAa,CACtB,GAAIR,EAAiBS,QAAUT,EAAiBU,SAAWV,EAAiBU,QAAQC,OAAQ,CAC1FZ,EAAaO,GACf,KAAO,CACLP,EAAa,gCACf,CACF,MAAO,GAAIC,EAAiBS,QAAUT,EAAiBU,SAAWV,EAAiBU,QAAQC,OAAQ,CACjGZ,EAAaO,GACf,KAAO,CACLP,EAAa,2CACf,CACA,OAAOF,EAAOe,SAAS,eAAeC,oBAAoBC,KAAK,SAAUC,GACvElB,EAAOmB,cAAclC,EAAYmC,kBAAkBlB,EAAYgB,EAAiBG,UAAWhB,GAC7F,GAAGiB,MAAM,SAAUC,GACjBxC,EAAIwC,MAAMA,EACZ,EACF,EACA3B,EAAc4B,gBAAkB,SAAUC,EAAWC,EAAuBC,EAAyBC,EAAmBC,EAAaC,GACnI,MAAMC,EAAkB5C,EAAa6C,gBAAgBP,EAAUf,KAAK,mBACpE,MAAMuB,EAAuB5C,EAAmB6C,wBAAwBR,GACxE,MAAMS,EAAsBT,EAAsB,iDAClD,MAAMU,EAA0B/C,EAAmBgD,0BAA0BF,GAC7E,MAAMG,EAAOC,KAAKxB,WAAWyB,UAAUD,KAAKE,WAC5C,MAAMC,EAAOH,KAAKxB,WAAWyB,UAAU,GAAGD,KAAKE,wBAC/C,MAAME,EAAaJ,KAAKxB,WACxB,GAAIuB,GAAQA,EAAKM,QAAU,WAAY,CAKrC,GAAIN,EAAKO,cAAe,CAEtB,MACF,CACA,MAAMC,EAAuBH,EAAWH,UAAU,GAAGD,KAAKE,cAC1D,MAAMM,EAAQJ,EAAWH,UAAU,cAAeG,EAAWK,eAAeT,KAAKE,YACjF,MAAMQ,EAAuBlB,GAAmBA,EAAgBmB,oBAChE,MAAMC,EAA0BpB,GAAmBA,EAAgBqB,uBACnE,IAAIC,EAAa,MACfC,EAAgB,MAClB,GAAIL,GAAwBA,EAAqBnC,OAAQ,CACvD,IAAK,IAAIyC,EAAI,EAAGA,EAAIN,EAAqBnC,OAAQyC,IAAK,CACpD,GAAIN,EAAqBM,GAAGC,gBAAkBT,EAAO,CACnDM,EAAa,KACb,KACF,CACF,CACF,CACA,GAAIF,GAA2BA,EAAwBrC,OAAQ,CAC7D,IAAK,IAAI2C,EAAI,EAAGA,EAAIN,EAAwBrC,OAAQ2C,IAAK,CACvD,GAAIN,EAAwBM,GAAGC,SAASF,gBAAkBT,EAAO,CAC/DO,EAAgB,KAChB,KACF,CACF,CACF,CACA,IAAKL,GAAwBA,IAAyBA,EAAqBnC,OAAQ,CACjFuC,EAAaP,EAAqB,sCACpC,CACA,IAAKK,GAA2BA,IAA4BA,EAAwBrC,OAAQ,CAC1FwC,EAAgBR,EAAqB,yCACvC,CAGA,IAAKO,IAAeC,EAAe,CACjC,MACF,CACA,GAAIA,EAAe,CACjB,MAAMK,EAAuB/D,EAAcgE,oCAAoCnC,EAAWiB,EAAMI,EAAsBV,EAAyBH,EAAsBN,EAAyBC,GAC9L+B,EAAqBE,QAAQ,SAAUC,GACrCjC,EAAYkC,KAAKD,EACnB,EACF,CACA,GAAIT,EAAY,CACd,MAAMW,EAAQtB,GAAQ,GACpBuB,EAAgBnB,EAAqB,wCAA0CA,EAAqB,wCAAwCoB,MAAQ,KACtJ,IAAIC,EAAoB,MACxB,GAAIH,GAASA,EAAMI,QAAQ,MAAQ,EAAG,CACpCrF,EAAIwC,MAAM,2CAA2CyC,wCACrD,MACF,CACA,GAAIC,GAAiBA,EAAcG,QAAQ,MAAQ,EAAG,CACpDrF,EAAIwC,MAAM,gDAAgD0C,wCAC1DE,EAAoB,IACtB,CACAtC,EAAYkC,KAAK,CACfM,KAAM,iBAAmB3B,EACzB4B,aAAc5B,EACd6B,MAAOzB,EAAqB,0CAA4CJ,EACxE8B,SAAU5E,EAAc6E,aAAahD,EAAWQ,EAAqByC,aAAahC,GAAO,OACzFiC,WAAYvC,EAAwBM,GAAQN,EAAwBM,GAAMiC,WAAa,KACvFC,UAAW,KACXC,aAAc,MACdC,cAAezF,EAAmB0F,6BAA6B3C,EAAwBsC,aAAahC,KAAU,EAAI,EAClHsC,QAAStC,EACTuC,KAAMtF,EAAkBuF,SAExBC,YAAarD,EAEbsD,cAAejB,GAAqBrB,EAAqB,wCAA0CA,EAAqB,wCAAwCoB,MAAQ,KAExKmB,cAAevC,EAAqB,oFAExC,CACF,CACF,EACAlD,EAAc0F,WAAa,SAAUC,EAASC,GAC5C,MAAMC,EAA6BlD,KAAK8C,cACxC,GAAII,EAA2BC,cAAgB,2DAA4D,CACzG,MAAO,GAAGF,MAAYD,IACxB,MAAO,GAAIE,EAA2BC,cAAgB,0DAA2D,CAC/G,MAAO,GAAGH,MAAYC,IACxB,MAAO,GAAIC,EAA2BC,cAAgB,0DAA2D,CAC/G,OAAOF,CACT,CACA,OAAOA,EAAUA,EAAUD,CAC7B,EACA3F,EAAc+F,kBAAoB,SAAU3F,EAAQC,GAClDL,EAAcG,oBAAoBC,EAAQC,GAC1C,MAAM2F,EAAUhH,IAAIC,GAAGgH,UAAUC,KAAK9F,EAAOW,aAC7C,GAAIiF,EAAS,CACX,MAAMG,EAAcH,EAAQI,gBAC5B,GAAID,EAAa,CACf,IAAK9F,EAAc,CACjBA,EAAe,CAAC,CAClB,CACAA,EAAagG,OAAS1D,KAAK2D,WAAWlG,GACtC,MAAMmG,EAAcnG,EAAOoG,qBAAqBC,cAAcrG,GAC9D,IAAIsG,EACJ,GAAIH,EAAa,CAEf,GAAIjH,EAAWqH,wBAAwBvG,GAAS,CAC9CsG,EAAcpH,EAAWkB,iBAAiBJ,EAC5C,CACF,CACAsG,EAAcA,EAAcA,EAAcpH,EAAWsH,uBAAuBxG,GAC5E,GAAIsG,EAAa,CACfrG,EAAaY,QAAUyF,EAAYzF,OACrC,CACA,MAAM4F,EAAiBlH,EAAamH,kBAAkBd,EAASG,GAC/D,GAAIU,EAAgB,CAClBxG,EAAaK,KAAOmG,CACtB,CACF,CAGA,MAAME,EAAQvH,EAAYwH,cAAchB,EAAS,CAAC,GAClD,MAAM7D,EAAkB5C,EAAa6C,gBAAgBhC,EAAOU,KAAK,mBACjE,GAAIqB,GAAmBA,EAAgB8E,cAAgBF,EAAM/F,OAAQ,CACnEX,EAAa6G,WAAWC,QAAU9H,EAAY+H,oBAAoBL,EAAM/F,OAC1E,MAAO,GAAIX,EAAa6G,WAAWC,QAAS,QACnC9G,EAAa6G,WAAWC,OACjC,CACF,KAAO,CACL,IAAK9G,EAAc,CACjBA,EAAe,CAAC,CAClB,CACAA,EAAagG,OAAS1D,KAAK2D,WAAWlG,EACxC,CACAJ,EAAcqH,wBAAwBjH,EAAQC,EAChD,EACAL,EAAcsH,gBAAkB,SAAUzF,GACxC,MAAM0F,EAAS5E,KAAK6E,UAAU3F,GAC9B,IAAI4F,EACJ,IAAKF,EAAQ,CACXE,EAAuB,IAAIC,QAAQC,IACjC9F,EAAU+F,yBAAyB,CACjCC,SAAUF,GACTG,EAAsBnF,KAAK,GAC7BtB,KAAK0G,GACCpF,KAAKqF,qBAAqBnG,EAAWkG,GAEhD,KAAO,CACLN,EAAuB9E,KAAKqF,qBAAqBnG,EAAW0F,EAC9D,CACA,OAAOE,EAAqBpG,KAAK,SAAUY,GACzC,GAAIJ,EAAUf,KAAM,CAClBe,EAAUf,KAAK,wBAAyBmB,EAC1C,CACA,OAAOA,CACT,EACF,EACA,SAAS6F,EAAqBG,EAAQC,GACpC,MAAMrG,EAAYoG,EAAOE,YACzB,MAAMZ,EAAS5E,KAAK6E,UAAU3F,GAC9B,GAAI0F,EAAQ,CACV1F,EAAUuG,yBAAyBN,GACnCI,EAAML,SAASN,EACjB,CACF,CACAvH,EAAcgI,qBAAuBK,eAAgBxG,EAAW0F,GAC9D,MAAMe,EAAiB,IAAIzG,EAAUf,KAAK,eAC1C,MAAMiC,EAAawE,EAAOgB,eAC1B,MAAMC,QAAiBd,QAAQe,IAAI,CAAC1F,EAAW2F,cAAc,GAAGJ,MAAoBvF,EAAW2F,cAAc,GAAGJ,QAChH,MAAMrG,EAAc,GACpB,MAAM0G,EAAcH,EAAS,GAC3B1G,EAAwB0G,EAAS,GACnC,MAAMxG,EAAoBzC,EAAa6C,gBAAgBP,EAAUf,KAAK,cACtE,IAAI8H,EACJ,MAAMC,EAAmB,GACzB,IAAK,MAAMC,KAAYhH,EAAuB,CAC5C,GAAIgH,EAASnI,WAAW,6CAA8C,CACpEiI,EAAQE,EAASC,QAAQ,6CAA8C,IACvE,MAAMC,EAAQJ,EAAMK,MAAM,KAC1B,GAAID,EAAM9H,QAAU,GAAK8H,EAAM,IAAM,uCAAwC,CAC3EhH,EAAkBgH,EAAM,IAAMlH,EAAsBgH,EACtD,CACF,CACF,CACA,MAAMI,EAAc,GAClBC,EAAY,GACd,GAAIlJ,OAAOmJ,KAAKpH,GAAmBd,QAAU,EAAG,CAC9C,MAAMmI,EAAcxH,EAAUyH,WAC9B,IAAK,MAAMC,KAAOF,EAAa,CAC7B,GAAIA,EAAYE,GAAKC,IAAI,kCAAmC,CAC1DN,EAAY/E,KAAKkF,EAAYE,GAAKE,SACpC,MAAO,GAAIJ,EAAYE,GAAKC,IAAI,gCAAiC,CAC/DL,EAAUhF,KAAKkF,EAAYE,GAAKE,SAClC,CACF,CACA,GAAIN,EAAUO,OAAO,SAAUC,GAC7B,OAAOT,EAAY1E,QAAQmF,KAAS,CACtC,GAAGzI,QAAU,EAAG,CACd/B,EAAIwC,MAAM,wDACZ,CACF,CACA,MAAMiI,EAAyBrK,EAAa6C,gBAAgBP,EAAUf,KAAK,aAC3E,MAAMiB,EAA0B,CAAC,EACjC,IAAK,MAAM8H,KAAiBD,EAAwB,CAClD,MAAME,EAAWF,EAAuBC,GAAenF,aACvD3C,EAAwB+H,GAAY/H,EAAwB+H,IAAa,CAAC,EAC1E/H,EAAwB+H,GAAUF,EAAuBC,GAAeE,mBAAqB,CAC3FtF,KAAMmF,EAAuBC,GAAepF,KAC5CE,MAAOiF,EAAuBC,GAAelF,MAEjD,CACA,IAAK,MAAM7B,KAAQ6F,EAAa,CAC9B,GAAI7F,EAAK0B,QAAQ,OAAS,EAAG,CAC3BqE,EAAiB1E,KAAK1E,EAAmBuK,iBAAiBjH,EAAYA,EAAWkH,qBAAqB,GAAG3B,KAAkBxF,MAASzB,KAAKrB,EAAc4B,gBAAgBsI,KAAKnH,EAAWK,eAAe,GAAGkF,KAAkBxF,KAASjB,EAAWC,EAAuBC,EAAyBC,EAAmBC,IACpT,CACF,OACMyF,QAAQe,IAAII,GAClB,OAAO5G,CACT,EACAjC,EAAcgE,oCAAsC,SAAUnC,EAAWiB,EAAMI,EAAsBV,EAAyBH,EAAsBN,EAAyBC,GAC3K,MAAM+B,EAAuB,GAC7B,GAAI9D,OAAOmJ,KAAKrH,GAAyByC,QAAQ1B,IAAS,EAAG,CAC3D,IAAK,MAAM+G,KAAiB9H,EAAwBe,GAAO,CACzDiB,EAAqBI,KAAK,CACxBM,KAAM,oBAAsB1C,EAAwBe,GAAM+G,GAAepF,KACzEC,aAAc5B,EACd6B,MAAO5C,EAAwBe,GAAM+G,GAAelF,OAAS,GAAGzB,EAAqB,6CAA6C2G,MAAoB,GAAG/G,MAAS+G,KAClKjF,SAAUvC,EAAqByC,aAAahC,GAAQT,EAAqByC,aAAahC,GAAM8B,SAAW,KACvGG,WAAYvC,EAAwBM,GAAQN,EAAwBM,GAAMiC,WAAa,KACvFC,UAAW,MACXC,aAAc,KACd8E,kBAAmBF,EACnB3E,cAAezF,EAAmB0F,6BAA6B3C,EAAwBsC,aAAahC,KAAU,EAAI,EAClHuC,KAAMtF,EAAkBoK,MACxBC,UAAW,MAEf,CACF,CAEA,GAAInK,OAAOmJ,KAAKpH,GAAmBwC,QAAQ1B,IAAS,EAAG,CACrD,IAAK,MAAMuH,KAAWrI,EAAmB,CACvC,GAAIqI,IAAYvH,EAAM,CACpB,MAAMwH,EAAQlL,EAAM,CAAC,EAAG4C,EAAkBqI,GAAU,CAClD5F,KAAM,oBAAsB4F,EAC5BrF,UAAW,MACXC,aAAc,KACdI,KAAMtF,EAAkBoK,MACxBC,UAAW,OAGbrG,EAAqBI,KAAKmG,GAC1B,KACF,CACF,CACF,CACA,OAAOvG,CACT,EACA/D,EAAcuK,OAAS,SAAU1I,EAAWxB,GAC1C,MAAMmK,EAAUnK,EAAa6G,WAAWC,QACxC,GAAIqD,EAAS,QACJnK,EAAa6G,WAAWC,OACjC,CACAvH,EAAkB2K,OAAO1I,EAAWxB,GACpC,GAAImK,EAAS,CACX,MAAMjE,EAAc1E,EAAU2E,qBAAqBC,cAAc5E,GAC/D4I,EAAgBlE,GAAeA,EAAYmE,WAAW,QAKxDD,EAAcE,UACdF,EAAcG,eAAe,CAC3B5J,OAAQwJ,IAEV,MAAMK,EAAsB,CAC1BC,kBAAmB,WACjBL,EAAcM,SACdxE,EAAYyE,oBAAoBH,EAClC,GAEFtE,EAAY0E,iBAAiBJ,EAC/B,CACAhJ,EAAUqJ,UAAU,iBACtB,EACAlL,EAAcmL,UAAY,SAAUtJ,EAAW0E,GAC7C,MAAM6E,EAAYvJ,EAAUwJ,YAC5B9E,EAAY+E,iBAAiBzJ,EAAUf,KAAK,kBAC5CyF,EAAYgF,iBAAiBH,EAAUI,sBAAsBtB,KAAKkB,IAClE7E,EAAYkF,mBAAmBL,EAAUI,sBAAsBtB,KAAKkB,IACpE7E,EAAYmF,gBAAgBN,EAAUI,sBAAsBtB,KAAKkB,IACjE7E,EAAYoF,iBAAiBP,EAAUI,sBAAsBtB,KAAKkB,IAClE7E,EAAYqF,mBAAmBR,EAAUI,sBAAsBtB,KAAKkB,IACpE7E,EAAYsF,gBAAgBT,EAAUI,sBAAsBtB,KAAKkB,IACjE7E,EAAYuF,iBAAiBjK,EAAUkK,aAAaC,cAAcC,eAClErM,EAAkBuL,UAAUtJ,EAAW0E,EACzC,EACAvG,EAAckM,gBAAkB,SAAUrK,GACxC,GAAIc,KAAKwJ,yBAAyBtK,GAAY,CAC5C,OAAOc,KAAKwJ,yBAAyBtK,EACvC,CACA,MAAMuK,EAAgBvK,EAAUwK,cAAcC,QAC9C,MAAMvJ,EAAalB,EAAUV,YAAcU,EAAUV,WAAWoH,eAChE,MAAMgE,EAAwB1K,EAAUf,KAAK,wBAC7C,MAAMwH,GAAkBvF,EAAWH,UAAU,GAAG2J,aAAmC,qBAAuB,IAAM,IAAMH,EAAcI,YACpI,MAAMC,EAAUrN,EAAM,CAAC,EAAGgN,EAAclF,WAAY,CAClDwF,UAAW7K,EAAUf,KAAK,eAE5B,MAAO,CACLJ,KAAM4H,EACNqE,OAAQ,CACNC,cAAe/K,EAAUwJ,YAAYwB,wBAAwB3C,KAAKrI,EAAUwJ,cAE9EnE,WAAYuF,EAEhB,EACAzM,EAAc8M,yBAA2B,SAAUjL,EAAWkL,GAC5DnN,EAAkBkN,yBAAyBE,KAAKrK,KAAMd,EAAWkL,GACjE,GAAIA,EAAcE,YAAc,YAAa,CAC3C,MAAM1G,EAAc5D,KAAKuK,UAAUrL,GACnC0E,EAAY4G,kBACd,CACF,EACAnN,EAAc6E,aAAe,SAAUhD,EAAWuL,EAA0BC,GAC1E,GAAIA,EAAmB,CACrB,GAAIxL,EAAUf,KAAK,oBAAsB,OAAQ,CAC/C,OAAO,KACT,KAAO,CACL,OAAOsM,EAA2BA,EAAyBxI,SAAW,IACxE,CACF,CACA,OAAOwI,EAA2BA,EAAyBxI,SAAW,IACxE,EACA5E,EAAcqH,wBAA0B,SAAUjH,EAAQC,GACxD,GAAID,EAAOU,KAAK,oBAAsB,OAAQ,CAC5C,IAAKT,EAAc,CACjBA,EAAe,CAAC,CAClB,CACA,IAAKA,EAAaY,QAAS,CACzBZ,EAAaY,QAAU,EACzB,CACAZ,EAAaY,QAAQkD,KAAK,IAAItE,EAAO,iBAAkBC,EAAewN,GAAI,MAC5E,CACF,EAYAtN,EAAcuN,4CAA8C,SAAU9I,EAAM+I,GAC1E,OAAO/I,EAAKsE,QAAQ,OAASyE,EAAO,IAAK,GAC3C,EAUAxN,EAAcyN,2BAA6B,SAAUhJ,EAAM+I,EAAME,GAC/D,OAAOA,EAASC,oBAAoBC,YAAY,OAASJ,EAAO,IAAM/I,EACxE,EACA,OAAOzE,CACT,EAAG","sourceRoot":"chart"}},{"offset":{"line":3918,"column":0},"map":{"version":3,"names":["formatJSONToString","oCrit","undefined","sCriticality","JSON","stringify","replace","RegExp","getEntitySetPath","oAnnotationContext","sAnnoPath","getPath","sPathEntitySetPath","mChartType","mDimensionRole","ChartHelper","getP13nMode","oViewData","aPersonalization","bVariantManagement","variantManagement","personalization","type","push","sort","join","formatChartType","oChartType","$EnumMember","formatDimensions","oAnnotation","getObject","oMetaModel","getModel","sEntitySetPath","aDimensions","i","j","bIsNavigationText","DimensionAttributes","Dimensions","length","sKey","$PropertyPath","oText","indexOf","Log","error","$Path","oDimension","key","textPath","label","role","oAttribute","Dimension","Role","criticality","ODataMetaModelUtil","fetchCriticality","createBindingContext","then","oDimensionModel","JSONModel","$$valueAsPromise","formatMeasures","getData","getUiChart","oPresentationContext","getUiControl","getOperationAvailableMap","oChartContext","oContext","aChartCollection","Actions","ActionHelper","getSortConditions","oPresentationVariant","sPresentationVariantPath","oApplySupported","CommonHelper","_isPresentationVariantAnnotation","SortOrder","aSortConditions","sorters","sEntityPath","split","forEach","oCondition","oSortProperty","oSorter","DynamicProperty","$AnnotationPath","Name","Property","aGroupableProperties","GroupableProperties","name","descending","Descending","Error","getBindingData","sTargetCollection","aActions","aOperationAvailablePath","sSelect","$Type","sActionName","Action","oActionOperationAvailable","getActionPath","_getModel","oCollection","oInterface","context","isDataFieldForActionButtonEnabled","bIsBound","sAction","sOperationAvailableMap","sEnableSelectOn","oModel","sNavPath","sPartner","$Partner","oOperationAvailableMap","parse","aPath","sNumberOfSelectedContexts","getNumberOfContextsExpression","sPath","getHiddenPathExpressionForTableActionsAndIBN","sHiddenPath","oDetails","sPropertyPath","ODataModelAnnotationHelper","getNavigationPath","aSplitHiddenPath","sNavigationPath","slice","getPressEventForDataFieldForActionButton","sId","oAction","oParams","contexts","getPressEventDataFieldForActionButton","getActionType","getCollectionName","sCollection","requiresIContext"],"sourceRoot":"chart","sources":["ChartHelper.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport { getUiControl } from \"sap/fe/core/converters/controls/Common/DataVisualization\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport ActionHelper from \"sap/fe/macros/internal/helpers/ActionHelper\";\nimport ODataMetaModelUtil from \"sap/fe/macros/ODataMetaModelUtil\";\nimport type Context from \"sap/ui/model/Context\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport ODataModelAnnotationHelper from \"sap/ui/model/odata/v4/AnnotationHelper\";\nfunction formatJSONToString(oCrit: any) {\n\tif (!oCrit) {\n\t\treturn undefined;\n\t}\n\n\tlet sCriticality = JSON.stringify(oCrit);\n\tsCriticality = sCriticality.replace(new RegExp(\"{\", \"g\"), \"\\\\{\");\n\tsCriticality = sCriticality.replace(new RegExp(\"}\", \"g\"), \"\\\\}\");\n\treturn sCriticality;\n}\nfunction getEntitySetPath(oAnnotationContext: any) {\n\tconst sAnnoPath = oAnnotationContext.getPath(),\n\t\tsPathEntitySetPath = sAnnoPath.replace(/@com.sap.vocabularies.UI.v1.(Chart|PresentationVariant).*/, \"\");\n\n\treturn sPathEntitySetPath;\n}\n\nconst mChartType = {\n\t\"com.sap.vocabularies.UI.v1.ChartType/Column\": \"column\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/ColumnStacked\": \"stacked_column\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/ColumnDual\": \"dual_column\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/ColumnStackedDual\": \"dual_stacked_column\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/ColumnStacked100\": \"100_stacked_column\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/ColumnStackedDual100\": \"100_dual_stacked_column\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Bar\": \"bar\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/BarStacked\": \"stacked_bar\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/BarDual\": \"dual_bar\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/BarStackedDual\": \"dual_stacked_bar\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/BarStacked100\": \"100_stacked_bar\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/BarStackedDual100\": \"100_dual_stacked_bar\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Area\": \"area\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/AreaStacked\": \"stacked_column\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/AreaStacked100\": \"100_stacked_column\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/HorizontalArea\": \"bar\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/HorizontalAreaStacked\": \"stacked_bar\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/HorizontalAreaStacked100\": \"100_stacked_bar\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Line\": \"line\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/LineDual\": \"dual_line\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Combination\": \"combination\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/CombinationStacked\": \"stacked_combination\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/CombinationDual\": \"dual_combination\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/CombinationStackedDual\": \"dual_stacked_combination\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/HorizontalCombinationStacked\": \"horizontal_stacked_combination\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Pie\": \"pie\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Donut\": \"donut\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Scatter\": \"scatter\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Bubble\": \"bubble\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Radar\": \"line\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/HeatMap\": \"heatmap\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/TreeMap\": \"treemap\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Waterfall\": \"waterfall\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Bullet\": \"bullet\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/VerticalBullet\": \"vertical_bullet\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/HorizontalWaterfall\": \"horizontal_waterfall\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/HorizontalCombinationDual\": \"dual_horizontal_combination\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/HorizontalCombinationStackedDual\": \"dual_horizontal_stacked_combination\"\n};\nconst mDimensionRole = {\n\t\"com.sap.vocabularies.UI.v1.ChartDimensionRoleType/Category\": \"category\",\n\t\"com.sap.vocabularies.UI.v1.ChartDimensionRoleType/Series\": \"series\",\n\t\"com.sap.vocabularies.UI.v1.ChartDimensionRoleType/Category2\": \"category2\"\n};\n/**\n * Helper class for sap.fe.macros Chart phantom control for prepecosseing.\n * <h3><b>Note:</b></h3>\n * The class is experimental and the API/behaviour is not finalised\n * and hence this should not be used for productive usage.\n * Especially this class is not intended to be used for the FE scenario,\n * here we shall use sap.fe.macros.ChartHelper that is especially tailored for V4\n * meta model\n *\n * @author SAP SE\n * @private\n * @experimental\n * @since 1.62\n * @alias sap.fe.macros.ChartHelper\n */\nconst ChartHelper = {\n\tgetP13nMode(oViewData: any) {\n\t\tconst aPersonalization = [],\n\t\t\tbVariantManagement =\n\t\t\t\toViewData.variantManagement && (oViewData.variantManagement === \"Page\" || oViewData.variantManagement === \"Control\"),\n\t\t\tpersonalization = true; // by default enabled\n\t\tif (bVariantManagement && personalization) {\n\t\t\tif (personalization) {\n\t\t\t\t// full personalization scope\n\t\t\t\treturn \"Sort,Type,Item\";\n\t\t\t} else if (typeof personalization === \"object\") {\n\t\t\t\tif ((personalization as any).type) {\n\t\t\t\t\taPersonalization.push(\"Type\");\n\t\t\t\t}\n\t\t\t\tif ((personalization as any).sort) {\n\t\t\t\t\taPersonalization.push(\"Sort\");\n\t\t\t\t}\n\t\t\t\treturn aPersonalization.join(\",\");\n\t\t\t}\n\t\t}\n\t},\n\tformatChartType(oChartType: any) {\n\t\treturn (mChartType as any)[oChartType.$EnumMember];\n\t},\n\tformatDimensions(oAnnotationContext: any) {\n\t\tconst oAnnotation = oAnnotationContext.getObject(\"./\"),\n\t\t\toMetaModel = oAnnotationContext.getModel(),\n\t\t\tsEntitySetPath = getEntitySetPath(oAnnotationContext),\n\t\t\taDimensions = [];\n\t\tlet i, j;\n\t\tlet bIsNavigationText = false;\n\n\t\t//perhaps there are no dimension attributes\n\t\toAnnotation.DimensionAttributes = oAnnotation.DimensionAttributes || [];\n\n\t\tfor (i = 0; i < oAnnotation.Dimensions.length; i++) {\n\t\t\tconst sKey = oAnnotation.Dimensions[i].$PropertyPath;\n\t\t\tconst oText = oMetaModel.getObject(`${sEntitySetPath + sKey}@com.sap.vocabularies.Common.v1.Text`) || {};\n\t\t\tif (sKey.indexOf(\"/\") > -1) {\n\t\t\t\tLog.error(`$expand is not yet supported. Dimension: ${sKey} from an association cannot be used`);\n\t\t\t}\n\t\t\tif (oText.$Path && oText.$Path.indexOf(\"/\") > -1) {\n\t\t\t\tLog.error(\n\t\t\t\t\t`$expand is not yet supported. Text Property: ${oText.$Path} from an association cannot be used for the dimension ${sKey}`\n\t\t\t\t);\n\t\t\t\tbIsNavigationText = true;\n\t\t\t}\n\t\t\tconst oDimension: any = {\n\t\t\t\tkey: sKey,\n\t\t\t\ttextPath: !bIsNavigationText ? oText.$Path : undefined,\n\t\t\t\tlabel: oMetaModel.getObject(`${sEntitySetPath + sKey}@com.sap.vocabularies.Common.v1.Label`),\n\t\t\t\trole: \"category\"\n\t\t\t};\n\n\t\t\tfor (j = 0; j < oAnnotation.DimensionAttributes.length; j++) {\n\t\t\t\tconst oAttribute = oAnnotation.DimensionAttributes[j];\n\n\t\t\t\tif (oDimension.key === oAttribute.Dimension.$PropertyPath) {\n\t\t\t\t\toDimension.role = mDimensionRole[oAttribute.Role.$EnumMember as keyof typeof mDimensionRole] || oDimension.role;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\toDimension.criticality = ODataMetaModelUtil.fetchCriticality(\n\t\t\t\toMetaModel,\n\t\t\t\toMetaModel.createBindingContext(sEntitySetPath + sKey)\n\t\t\t).then(formatJSONToString);\n\n\t\t\taDimensions.push(oDimension);\n\t\t}\n\n\t\tconst oDimensionModel = new JSONModel(aDimensions);\n\t\t(oDimensionModel as any).$$valueAsPromise = true;\n\t\treturn oDimensionModel.createBindingContext(\"/\");\n\t},\n\n\tformatMeasures(oAnnotationContext: any) {\n\t\treturn oAnnotationContext.getModel().getData();\n\t},\n\n\tgetUiChart(oPresentationContext: any) {\n\t\treturn getUiControl(oPresentationContext, \"@com.sap.vocabularies.UI.v1.Chart\");\n\t},\n\tgetOperationAvailableMap(oChartContext: any, oContext: any) {\n\t\tconst aChartCollection = oChartContext.Actions || [];\n\t\treturn JSON.stringify(ActionHelper.getOperationAvailableMap(aChartCollection, \"chart\", oContext));\n\t},\n\t/**\n\t * Returns a stringified JSON object containing Presentation Variant sort conditions.\n\t *\n\t * @param oContext\n\t * @param oPresentationVariant Presentation Variant annotation\n\t * @param sPresentationVariantPath\n\t * @param oApplySupported\n\t * @returns Stringified JSON object\n\t */\n\tgetSortConditions: function (oContext: any, oPresentationVariant: any, sPresentationVariantPath: string, oApplySupported: any) {\n\t\tif (\n\t\t\toPresentationVariant &&\n\t\t\tCommonHelper._isPresentationVariantAnnotation(sPresentationVariantPath) &&\n\t\t\toPresentationVariant.SortOrder\n\t\t) {\n\t\t\tconst aSortConditions: any = {\n\t\t\t\tsorters: []\n\t\t\t};\n\t\t\tconst sEntityPath = oContext.getPath(0).split(\"@\")[0];\n\t\t\toPresentationVariant.SortOrder.forEach(function (oCondition: any = {}) {\n\t\t\t\tlet oSortProperty: any = \"\";\n\t\t\t\tconst oSorter: any = {};\n\t\t\t\tif (oCondition.DynamicProperty) {\n\t\t\t\t\toSortProperty =\n\t\t\t\t\t\t\"_fe_aggregatable_\" +\n\t\t\t\t\t\toContext.getModel(0).getObject(sEntityPath + oCondition.DynamicProperty.$AnnotationPath)?.Name;\n\t\t\t\t} else if (oCondition.Property) {\n\t\t\t\t\tconst aGroupableProperties = oApplySupported.GroupableProperties;\n\t\t\t\t\tif (aGroupableProperties && aGroupableProperties.length) {\n\t\t\t\t\t\tfor (let i = 0; i < aGroupableProperties.length; i++) {\n\t\t\t\t\t\t\tif (aGroupableProperties[i].$PropertyPath === oCondition.Property.$PropertyPath) {\n\t\t\t\t\t\t\t\toSortProperty = \"_fe_groupable_\" + oCondition.Property.$PropertyPath;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (!oSortProperty) {\n\t\t\t\t\t\t\t\toSortProperty = \"_fe_aggregatable_\" + oCondition.Property.$PropertyPath;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (\n\t\t\t\t\t\toContext\n\t\t\t\t\t\t\t.getModel(0)\n\t\t\t\t\t\t\t.getObject(sEntityPath + oCondition.Property.$PropertyPath + \"@Org.OData.Aggregation.V1.Groupable\")\n\t\t\t\t\t) {\n\t\t\t\t\t\toSortProperty = \"_fe_groupable_\" + oCondition.Property.$PropertyPath;\n\t\t\t\t\t} else {\n\t\t\t\t\t\toSortProperty = \"_fe_aggregatable_\" + oCondition.Property.$PropertyPath;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (oSortProperty) {\n\t\t\t\t\toSorter.name = oSortProperty;\n\t\t\t\t\toSorter.descending = !!oCondition.Descending;\n\t\t\t\t\taSortConditions.sorters.push(oSorter);\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error(\"Please define the right path to the sort property\");\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn JSON.stringify(aSortConditions);\n\t\t}\n\t\treturn undefined;\n\t},\n\tgetBindingData(sTargetCollection: any, oContext: any, aActions: any) {\n\t\tconst aOperationAvailablePath = [];\n\t\tlet sSelect;\n\t\tfor (const i in aActions) {\n\t\t\tif (aActions[i].$Type === \"com.sap.vocabularies.UI.v1.DataFieldForAction\") {\n\t\t\t\tconst sActionName = aActions[i].Action;\n\t\t\t\tconst oActionOperationAvailable = CommonHelper.getActionPath(oContext, false, sActionName, true);\n\t\t\t\tif (oActionOperationAvailable && oActionOperationAvailable.$Path) {\n\t\t\t\t\taOperationAvailablePath.push(`'${oActionOperationAvailable.$Path}'`);\n\t\t\t\t} else if (oActionOperationAvailable === null) {\n\t\t\t\t\t// We disabled action advertisement but kept it in the code for the time being\n\t\t\t\t\t//aOperationAvailablePath.push(sActionName);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (aOperationAvailablePath.length > 0) {\n\t\t\t//TODO: request fails with $select. check this with odata v4 model\n\t\t\tsSelect = \" $select: '\" + aOperationAvailablePath.join() + \"'\";\n\t\t}\n\t\treturn (\n\t\t\t\"'{path: '\" +\n\t\t\t(oContext.getObject(\"$kind\") === \"EntitySet\" ? \"/\" : \"\") +\n\t\t\toContext.getObject(\"@sapui.name\") +\n\t\t\t\"'\" +\n\t\t\t(sSelect ? \",parameters:{\" + sSelect + \"}\" : \"\") +\n\t\t\t\"}'\"\n\t\t);\n\t},\n\t_getModel(oCollection: any, oInterface: any) {\n\t\treturn oInterface.context;\n\t},\n\t// TODO: combine this one with the one from the table\n\tisDataFieldForActionButtonEnabled(\n\t\tbIsBound: boolean,\n\t\tsAction: string,\n\t\toCollection: Context,\n\t\tsOperationAvailableMap: string,\n\t\tsEnableSelectOn: string\n\t) {\n\t\tif (bIsBound !== true) {\n\t\t\treturn \"true\";\n\t\t}\n\t\tconst oModel = oCollection.getModel();\n\t\tconst sNavPath = oCollection.getPath();\n\t\tconst sPartner = oModel.getObject(sNavPath).$Partner;\n\t\tconst oOperationAvailableMap = sOperationAvailableMap && JSON.parse(sOperationAvailableMap);\n\t\tconst aPath = oOperationAvailableMap && oOperationAvailableMap[sAction] && oOperationAvailableMap[sAction].split(\"/\");\n\t\tconst sNumberOfSelectedContexts = ActionHelper.getNumberOfContextsExpression(sEnableSelectOn);\n\t\tif (aPath && aPath[0] === sPartner) {\n\t\t\tconst sPath = oOperationAvailableMap[sAction].replace(sPartner + \"/\", \"\");\n\t\t\treturn \"{= ${\" + sNumberOfSelectedContexts + \" && ${\" + sPath + \"}}\";\n\t\t} else {\n\t\t\treturn \"{= ${\" + sNumberOfSelectedContexts + \"}\";\n\t\t}\n\t},\n\tgetHiddenPathExpressionForTableActionsAndIBN(sHiddenPath: any, oDetails: any) {\n\t\tconst oContext = oDetails.context,\n\t\t\tsPropertyPath = oContext.getPath(),\n\t\t\tsEntitySetPath = ODataModelAnnotationHelper.getNavigationPath(sPropertyPath);\n\t\tif (sHiddenPath.indexOf(\"/\") > 0) {\n\t\t\tconst aSplitHiddenPath = sHiddenPath.split(\"/\");\n\t\t\tconst sNavigationPath = aSplitHiddenPath[0];\n\t\t\t// supports visiblity based on the property from the partner association\n\t\t\tif (oContext.getObject(sEntitySetPath + \"/$Partner\") === sNavigationPath) {\n\t\t\t\treturn \"{= !%{\" + aSplitHiddenPath.slice(1).join(\"/\") + \"} }\";\n\t\t\t}\n\t\t\t// any other association will be ignored and the button will be made visible\n\t\t}\n\t\treturn true;\n\t},\n\t/**\n\t * Method to get press event for DataFieldForActionButton.\n\t *\n\t * @function\n\t * @name getPressEventForDataFieldForActionButton\n\t * @param sId Id of the current control\n\t * @param oAction Action model\n\t * @param sOperationAvailableMap OperationAvailableMap Stringified JSON object\n\t * @returns A binding expression for press property of DataFieldForActionButton\n\t */\n\tgetPressEventForDataFieldForActionButton(sId: string, oAction: any, sOperationAvailableMap: string) {\n\t\tconst oParams = {\n\t\t\tcontexts: \"${internal>selectedContexts}\"\n\t\t};\n\t\treturn ActionHelper.getPressEventDataFieldForActionButton(sId, oAction, oParams, sOperationAvailableMap);\n\t},\n\t/**\n\t * @function\n\t * @name getActionType\n\t * @param oAction Action model\n\t * @returns A Boolean value depending on the action type\n\t */\n\tgetActionType(oAction: any) {\n\t\treturn (\n\t\t\t(oAction[\"$Type\"].indexOf(\"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation\") > -1 ||\n\t\t\t\toAction[\"$Type\"].indexOf(\"com.sap.vocabularies.UI.v1.DataFieldForAction\") > -1) &&\n\t\t\toAction[\"Inline\"]\n\t\t);\n\t},\n\tgetCollectionName(sCollection: any) {\n\t\treturn sCollection.split(\"/\")[sCollection.split(\"/\").length - 1];\n\t}\n};\n(ChartHelper.getSortConditions as any).requiresIContext = true;\n\nexport default ChartHelper;\n"],"mappings":"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"}},{"offset":{"line":4215,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","DataVisualization","CommonHelper","ActionHelper","ODataMetaModelUtil","JSONModel","ODataModelAnnotationHelper","getUiControl","formatJSONToString","oCrit","undefined","sCriticality","JSON","stringify","replace","RegExp","getEntitySetPath","oAnnotationContext","sAnnoPath","getPath","sPathEntitySetPath","mChartType","mDimensionRole","ChartHelper","getP13nMode","oViewData","aPersonalization","bVariantManagement","variantManagement","personalization","type","push","sort","join","formatChartType","oChartType","$EnumMember","formatDimensions","oAnnotation","getObject","oMetaModel","getModel","sEntitySetPath","aDimensions","i","j","bIsNavigationText","DimensionAttributes","Dimensions","length","sKey","$PropertyPath","oText","indexOf","error","$Path","oDimension","key","textPath","label","role","oAttribute","Dimension","Role","criticality","fetchCriticality","createBindingContext","then","oDimensionModel","$$valueAsPromise","formatMeasures","getData","getUiChart","oPresentationContext","getOperationAvailableMap","oChartContext","oContext","aChartCollection","Actions","getSortConditions","oPresentationVariant","sPresentationVariantPath","oApplySupported","_isPresentationVariantAnnotation","SortOrder","aSortConditions","sorters","sEntityPath","split","forEach","oCondition","arguments","oSortProperty","oSorter","DynamicProperty","_oContext$getModel$ge","$AnnotationPath","Name","Property","aGroupableProperties","GroupableProperties","name","descending","Descending","Error","getBindingData","sTargetCollection","aActions","aOperationAvailablePath","sSelect","$Type","sActionName","Action","oActionOperationAvailable","getActionPath","_getModel","oCollection","oInterface","context","isDataFieldForActionButtonEnabled","bIsBound","sAction","sOperationAvailableMap","sEnableSelectOn","oModel","sNavPath","sPartner","$Partner","oOperationAvailableMap","parse","aPath","sNumberOfSelectedContexts","getNumberOfContextsExpression","sPath","getHiddenPathExpressionForTableActionsAndIBN","sHiddenPath","oDetails","sPropertyPath","getNavigationPath","aSplitHiddenPath","sNavigationPath","slice","getPressEventForDataFieldForActionButton","sId","oAction","oParams","contexts","getPressEventDataFieldForActionButton","getActionType","getCollectionName","sCollection","requiresIContext"],"sources":["ChartHelper-dbg.js"],"mappings":"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","sourceRoot":"chart"}},{"offset":{"line":4220,"column":0},"map":{"version":3,"names":["ChartRuntime","fnUpdateChart","oEvent","oInnerChart","getSource","oMdcChart","getParent","sActionsMultiselectDisabled","oActionOperationAvailableMap","aActionsMultiselectDisabled","getCustomData","forEach","oCustomData","getKey","DelegateUtil","customData","getValue","split","oInternalModelContext","getBindingContext","aSelectedContexts","oModelObject","aSelectedDataPoints","ChartUtils","getChartSelectedData","i","length","push","context","setProperty","getModel","getPath","getSelectedDataPoints","count","j","oSelectedContext","oContextData","getObject","key","indexOf","sActionPath","substring","ActionRuntime","setActionEnablement","sAction"],"sourceRoot":"chart","sources":["ChartRuntime.ts"],"sourcesContent":["import Chart from \"sap/chart/Chart\";\nimport ActionRuntime from \"sap/fe/core/ActionRuntime\";\nimport { InternalModelContext } from \"sap/fe/core/helpers/ModelHelper\";\nimport ChartUtils from \"sap/fe/macros/chart/ChartUtils\";\nimport DelegateUtil from \"sap/fe/macros/DelegateUtil\";\nimport UI5Event from \"sap/ui/base/Event\";\nimport Control from \"sap/ui/mdc/Control\";\n\ntype InnerChart = Control & Chart & { getParent: Function; getCustomData: Function };\ntype MDCChart = Control;\ntype ObjectWithCount = object & { count: number };\ninterface BooleanMap {\n\t[key: string]: boolean;\n}\n\n/**\n * Static class used by MDC_Chart during runtime\n *\n * @private\n * @experimental This module is only for internal/experimental use!\n */\nconst ChartRuntime = {\n\t/**\n\t * Updates the chart after selection or deselection of data points.\n\t *\n\t * @function\n\t * @static\n\t * @name sap.fe.macros.chart.ChartRuntime.fnUpdateChart\n\t * @memberof sap.fe.macros.chart.ChartRuntime\n\t * @param oEvent Chart event\n\t * @ui5-restricted\n\t */\n\tfnUpdateChart: function (oEvent: UI5Event) {\n\t\tconst oInnerChart = oEvent.getSource() as InnerChart;\n\t\tconst oMdcChart = oInnerChart.getParent() as MDCChart;\n\t\tlet sActionsMultiselectDisabled,\n\t\t\toActionOperationAvailableMap = {},\n\t\t\taActionsMultiselectDisabled: Object[] = [];\n\t\t// changing drill stack changes order of custom data, looping through all\n\t\toMdcChart.getCustomData().forEach(function (oCustomData: any) {\n\t\t\tif (oCustomData.getKey() === \"operationAvailableMap\") {\n\t\t\t\toActionOperationAvailableMap =\n\t\t\t\t\tDelegateUtil.getCustomData(oMdcChart, \"operationAvailableMap\") &&\n\t\t\t\t\tDelegateUtil.getCustomData(oMdcChart, \"operationAvailableMap\").customData;\n\t\t\t} else if (oCustomData.getKey() === \"multiSelectDisabledActions\") {\n\t\t\t\tsActionsMultiselectDisabled = oCustomData.getValue();\n\t\t\t\taActionsMultiselectDisabled = sActionsMultiselectDisabled ? sActionsMultiselectDisabled.split(\",\") : [];\n\t\t\t}\n\t\t});\n\t\tconst oInternalModelContext = oMdcChart.getBindingContext(\"internal\") as InternalModelContext;\n\n\t\tconst aSelectedContexts = [];\n\t\tlet oModelObject: BooleanMap | undefined;\n\t\tconst aSelectedDataPoints = ChartUtils.getChartSelectedData(oInnerChart);\n\t\tfor (let i = 0; i < aSelectedDataPoints.length; i++) {\n\t\t\taSelectedContexts.push(aSelectedDataPoints[i].context);\n\t\t}\n\t\toInternalModelContext.setProperty(\"selectedContexts\", aSelectedContexts);\n\t\toInternalModelContext\n\t\t\t.getModel()\n\t\t\t.setProperty(\n\t\t\t\t`${oInternalModelContext.getPath()}/numberOfSelectedContexts`,\n\t\t\t\t(oInnerChart.getSelectedDataPoints() as ObjectWithCount).count\n\t\t\t);\n\t\tfor (let j = 0; j < aSelectedContexts.length; j++) {\n\t\t\tconst oSelectedContext = aSelectedContexts[j];\n\t\t\tconst oContextData = oSelectedContext.getObject();\n\t\t\tfor (const key in oContextData) {\n\t\t\t\tif (key.indexOf(\"#\") === 0) {\n\t\t\t\t\tlet sActionPath = key;\n\t\t\t\t\tsActionPath = sActionPath.substring(1, sActionPath.length);\n\t\t\t\t\toModelObject = oInternalModelContext.getObject() as BooleanMap;\n\t\t\t\t\toModelObject[sActionPath] = true;\n\t\t\t\t\toInternalModelContext.setProperty(\"\", oModelObject);\n\t\t\t\t}\n\t\t\t}\n\t\t\toModelObject = oInternalModelContext.getObject() as BooleanMap;\n\t\t}\n\n\t\tActionRuntime.setActionEnablement(oInternalModelContext, oActionOperationAvailableMap, aSelectedContexts, \"chart\");\n\n\t\tif (aSelectedContexts.length > 1) {\n\t\t\taActionsMultiselectDisabled.forEach(function (sAction: any) {\n\t\t\t\toInternalModelContext.setProperty(sAction, false);\n\t\t\t});\n\t\t}\n\t}\n};\n\nexport default ChartRuntime;\n"],"mappings":"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"}},{"offset":{"line":4292,"column":0},"map":{"version":3,"names":["sap","ui","define","ActionRuntime","ChartUtils","DelegateUtil","ChartRuntime","fnUpdateChart","oEvent","oInnerChart","getSource","oMdcChart","getParent","sActionsMultiselectDisabled","oActionOperationAvailableMap","aActionsMultiselectDisabled","getCustomData","forEach","oCustomData","getKey","customData","getValue","split","oInternalModelContext","getBindingContext","aSelectedContexts","oModelObject","aSelectedDataPoints","getChartSelectedData","i","length","push","context","setProperty","getModel","getPath","getSelectedDataPoints","count","j","oSelectedContext","oContextData","getObject","key","indexOf","sActionPath","substring","setActionEnablement","sAction"],"sources":["ChartRuntime-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,8CAAO,CAAC,4BAA6B,iCAAkC,8BAA+B,SAAUC,EAAeC,EAAYC,GAChJ,aAQA,MAAMC,EAAe,CAWnBC,cAAe,SAAUC,GACvB,MAAMC,EAAcD,EAAOE,YAC3B,MAAMC,EAAYF,EAAYG,YAC9B,IAAIC,EACFC,EAA+B,CAAC,EAChCC,EAA8B,GAEhCJ,EAAUK,gBAAgBC,QAAQ,SAAUC,GAC1C,GAAIA,EAAYC,WAAa,wBAAyB,CACpDL,EAA+BT,EAAaW,cAAcL,EAAW,0BAA4BN,EAAaW,cAAcL,EAAW,yBAAyBS,UAClK,MAAO,GAAIF,EAAYC,WAAa,6BAA8B,CAChEN,EAA8BK,EAAYG,WAC1CN,EAA8BF,EAA8BA,EAA4BS,MAAM,KAAO,EACvG,CACF,GACA,MAAMC,EAAwBZ,EAAUa,kBAAkB,YAC1D,MAAMC,EAAoB,GAC1B,IAAIC,EACJ,MAAMC,EAAsBvB,EAAWwB,qBAAqBnB,GAC5D,IAAK,IAAIoB,EAAI,EAAGA,EAAIF,EAAoBG,OAAQD,IAAK,CACnDJ,EAAkBM,KAAKJ,EAAoBE,GAAGG,QAChD,CACAT,EAAsBU,YAAY,mBAAoBR,GACtDF,EAAsBW,WAAWD,YAAY,GAAGV,EAAsBY,qCAAsC1B,EAAY2B,wBAAwBC,OAChJ,IAAK,IAAIC,EAAI,EAAGA,EAAIb,EAAkBK,OAAQQ,IAAK,CACjD,MAAMC,EAAmBd,EAAkBa,GAC3C,MAAME,EAAeD,EAAiBE,YACtC,IAAK,MAAMC,KAAOF,EAAc,CAC9B,GAAIE,EAAIC,QAAQ,OAAS,EAAG,CAC1B,IAAIC,EAAcF,EAClBE,EAAcA,EAAYC,UAAU,EAAGD,EAAYd,QACnDJ,EAAeH,EAAsBkB,YACrCf,EAAakB,GAAe,KAC5BrB,EAAsBU,YAAY,GAAIP,EACxC,CACF,CACAA,EAAeH,EAAsBkB,WACvC,CACAtC,EAAc2C,oBAAoBvB,EAAuBT,EAA8BW,EAAmB,SAC1G,GAAIA,EAAkBK,OAAS,EAAG,CAChCf,EAA4BE,QAAQ,SAAU8B,GAC5CxB,EAAsBU,YAAYc,EAAS,MAC7C,EACF,CACF,GAEF,OAAOzC,CACT,EAAG","sourceRoot":"chart"}},{"offset":{"line":4297,"column":0},"map":{"version":3,"names":["aPrevDrillStack","ChartUtils","getChartSelectionsExist","oMdcChart","oInSource","oSource","oChart","getControlDelegate","_getChart","aDimensions","getDimensionsFromDrillStack","bIsDrillDown","length","bIsDrillUp","bNoChange","toString","aFilters","getChartSelections","isA","sError","bClearSelections","getChartModel","aVizSelections","getChartFilters","Filter","setChartFilters","oDrillStack","aChartFilters","aVisibleDimensions","addChartFilters","aSelectedData","item","aDimFilters","i","sPath","sValue","data","undefined","push","path","operator","FilterOperator","EQ","value1","getVizSelection","getVisibleDimensions","aDrillStackKeys","Object","keys","aPrevDrillStackData","getFilterBarFilterInfo","FilterUtil","getFilterInfo","getFilter","targetControl","getAllFilterInfo","oFilters","filters","getChartSelectedData","aSelectedPoints","getSelectionBehavior","getSelectedDataPoints","dataPoints","getSelectedCategories","categories","getSelectedSeries","series","vData","oInternalModelContext","getBindingContext","setProperty","getObject","aCurrentDrillStack","getDrillStack","aCurrentDrillView","pop","dimension","_getVizFrame","vizSelection"],"sourceRoot":"chart","sources":["ChartUtils.ts"],"sourcesContent":["import type Chart from \"sap/chart/Chart\";\nimport type { InternalModelContext } from \"sap/fe/core/helpers/ModelHelper\";\nimport FilterUtil from \"sap/fe/macros/filter/FilterUtils\";\nimport type Control from \"sap/ui/core/Control\";\nimport type MDCChart from \"sap/ui/mdc/Chart\";\nimport Filter from \"sap/ui/model/Filter\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nlet aPrevDrillStack: any[] = [];\nconst ChartUtils = {\n\t/**\n\t * Method to check if selections exist in the chart.\n\t *\n\t * @param oMdcChart The MDC chart control\n\t * @param oInSource The control that has to apply chart filters\n\t * @returns `true` if chart selection exists, false otherwise\n\t */\n\tgetChartSelectionsExist: function (oMdcChart: MDCChart, oInSource?: Control) {\n\t\t// consider chart selections in the current drill stack or on any further drill downs\n\t\tconst oSource = oInSource || oMdcChart;\n\t\tif (oMdcChart) {\n\t\t\ttry {\n\t\t\t\tconst oChart = (oMdcChart as any).getControlDelegate()._getChart(oMdcChart) as Chart;\n\t\t\t\tif (oChart) {\n\t\t\t\t\tconst aDimensions = this.getDimensionsFromDrillStack(oChart);\n\t\t\t\t\tconst bIsDrillDown = aDimensions.length > aPrevDrillStack.length;\n\t\t\t\t\tconst bIsDrillUp = aDimensions.length < aPrevDrillStack.length;\n\t\t\t\t\tconst bNoChange = aDimensions.toString() === aPrevDrillStack.toString();\n\t\t\t\t\tlet aFilters: any[];\n\t\t\t\t\tif (bIsDrillUp && aDimensions.length === 1) {\n\t\t\t\t\t\t// drilling up to level0 would clear all selections\n\t\t\t\t\t\taFilters = this.getChartSelections(oMdcChart, true) as any[];\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// apply filters of selections of previous drillstack when drilling up/down\n\t\t\t\t\t\t// to the chart and table\n\t\t\t\t\t\taFilters = this.getChartSelections(oMdcChart) as any[];\n\t\t\t\t\t}\n\t\t\t\t\tif (bIsDrillDown || bIsDrillUp) {\n\t\t\t\t\t\t// update the drillstack on a drill up/ drill down\n\t\t\t\t\t\taPrevDrillStack = aDimensions;\n\t\t\t\t\t\treturn aFilters.length > 0;\n\t\t\t\t\t} else if (bNoChange && oSource.isA(\"sap.ui.mdc.Table\")) {\n\t\t\t\t\t\t// bNoChange is true when chart is selected\n\t\t\t\t\t\treturn aFilters.length > 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (sError) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\t/**\n\t * Method that returns the chart filters stored in the UI model.\n\t *\n\t * @param oMdcChart The MDC chart control\n\t * @param bClearSelections Clears chart selections in the UI model if true\n\t * @returns The chart selections\n\t */\n\tgetChartSelections: function (oMdcChart: MDCChart, bClearSelections?: boolean) {\n\t\t// get chart selections\n\t\tif (bClearSelections) {\n\t\t\tthis.getChartModel(oMdcChart, \"\", {});\n\t\t}\n\t\tconst aVizSelections = this.getChartModel(oMdcChart, \"filters\");\n\t\treturn aVizSelections || [];\n\t},\n\t/**\n\t * Method that returns the chart selections as a filter.\n\t *\n\t * @param oMdcChart The MDC chart control\n\t * @returns Filter containing chart selections\n\t */\n\tgetChartFilters: function (oMdcChart: MDCChart) {\n\t\t// get chart selections as a filter\n\t\tconst aFilters = this.getChartSelections(oMdcChart) || [];\n\t\treturn new Filter(aFilters);\n\t},\n\t/**\n\t * Method that sets the chart selections as in the UI model.\n\t *\n\t * @param oMdcChart The MDC chart control\n\t */\n\tsetChartFilters: function (oMdcChart: MDCChart) {\n\t\t// saving selections in each drill stack for future use\n\t\tconst oDrillStack = this.getChartModel(oMdcChart, \"drillStack\") || ({} as any);\n\t\tconst oChart = (oMdcChart as any).getControlDelegate()._getChart(oMdcChart);\n\t\tconst aChartFilters: any[] = [];\n\t\tlet aVisibleDimensions: any;\n\n\t\tfunction addChartFilters(aSelectedData: any) {\n\t\t\tfor (const item in aSelectedData) {\n\t\t\t\tconst aDimFilters = [];\n\t\t\t\tfor (const i in aVisibleDimensions) {\n\t\t\t\t\tconst sPath = aVisibleDimensions[i];\n\t\t\t\t\tconst sValue = aSelectedData[item].data[sPath];\n\t\t\t\t\tif (sValue !== undefined) {\n\t\t\t\t\t\taDimFilters.push(\n\t\t\t\t\t\t\tnew Filter({\n\t\t\t\t\t\t\t\tpath: sPath,\n\t\t\t\t\t\t\t\toperator: FilterOperator.EQ,\n\t\t\t\t\t\t\t\tvalue1: sValue\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (aDimFilters.length > 0) {\n\t\t\t\t\taChartFilters.push(new Filter(aDimFilters, true));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (oChart) {\n\t\t\tconst aVizSelections = this.getVizSelection(oChart);\n\t\t\taVisibleDimensions = oChart.getVisibleDimensions();\n\t\t\tconst aDimensions = this.getDimensionsFromDrillStack(oChart);\n\t\t\tif (aDimensions.length > 0) {\n\t\t\t\tthis.getChartModel(oMdcChart, \"drillStack\", {});\n\t\t\t\toDrillStack[aDimensions.toString()] = aVizSelections;\n\t\t\t\tthis.getChartModel(oMdcChart, \"drillStack\", oDrillStack);\n\t\t\t}\n\t\t\tif (aVizSelections.length > 0) {\n\t\t\t\t// creating filters with selections in the current drillstack\n\t\t\t\taddChartFilters(aVizSelections);\n\t\t\t} else {\n\t\t\t\t// creating filters with selections in the previous drillstack when there are no selections in the current drillstack\n\t\t\t\tconst aDrillStackKeys = Object.keys(oDrillStack) || [];\n\t\t\t\tconst aPrevDrillStackData = oDrillStack[aDrillStackKeys[aDrillStackKeys.length - 2]] || [];\n\t\t\t\taddChartFilters(aPrevDrillStackData);\n\t\t\t}\n\t\t\tthis.getChartModel(oMdcChart, \"filters\", aChartFilters);\n\t\t}\n\t},\n\t/**\n\t * Method that returns the chart selections as a filter.\n\t *\n\t * @param oChart The inner chart control\n\t * @returns The filters in the filter bar\n\t */\n\tgetFilterBarFilterInfo: function (oChart: MDCChart) {\n\t\treturn FilterUtil.getFilterInfo(oChart.getFilter(), {\n\t\t\ttargetControl: oChart\n\t\t});\n\t},\n\t/**\n\t * Method that returns the filters for the chart and filter bar.\n\t *\n\t * @param oChart The inner chart control\n\t * @returns The new filter containing the filters for both the chart and the filter bar\n\t */\n\tgetAllFilterInfo: function (oChart: MDCChart) {\n\t\tconst oFilters = this.getFilterBarFilterInfo(oChart);\n\t\tconst aChartFilters = this.getChartFilters(oChart) as any;\n\n\t\tif (aChartFilters && aChartFilters.aFilters && aChartFilters.aFilters.length) {\n\t\t\toFilters.filters.push(aChartFilters);\n\t\t}\n\t\t// filterbar + chart filters\n\t\treturn oFilters;\n\t},\n\t/**\n\t * Method that returns selected data in the chart.\n\t *\n\t * @param oChart The inner chart control\n\t * @returns The selected chart data\n\t */\n\tgetChartSelectedData: function (oChart: Chart) {\n\t\tlet aSelectedPoints = [];\n\t\t// eslint-disable-next-line @typescript-eslint/switch-exhaustiveness-check\n\t\tswitch (oChart.getSelectionBehavior()) {\n\t\t\tcase \"DATAPOINT\":\n\t\t\t\taSelectedPoints = (oChart.getSelectedDataPoints() as any).dataPoints;\n\t\t\t\tbreak;\n\t\t\tcase \"CATEGORY\":\n\t\t\t\taSelectedPoints = (oChart.getSelectedCategories() as any).categories;\n\t\t\t\tbreak;\n\t\t\tcase \"SERIES\":\n\t\t\t\taSelectedPoints = (oChart.getSelectedSeries() as any).series;\n\t\t\t\tbreak;\n\t\t}\n\t\treturn aSelectedPoints;\n\t},\n\t/**\n\t * Method to get filters, drillstack and selected contexts in the UI model.\n\t * Can also be used to set data in the model.\n\t *\n\t * @param oMdcChart The MDC chart control\n\t * @param sPath The path in the UI model from which chart data is to be set/fetched\n\t * @param vData The chart info to be set\n\t * @returns The chart info (filters/drillstack/selectedContexts)\n\t */\n\tgetChartModel: function (oMdcChart: MDCChart, sPath: string, vData?: object | any[]) {\n\t\tconst oInternalModelContext = oMdcChart.getBindingContext(\"internal\") as InternalModelContext;\n\t\tif (!oInternalModelContext) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (vData) {\n\t\t\toInternalModelContext.setProperty(sPath, vData);\n\t\t}\n\t\treturn oInternalModelContext && oInternalModelContext.getObject(sPath);\n\t},\n\t/**\n\t * Method to fetch the current drillstack dimensions.\n\t *\n\t * @param oChart The inner chart control\n\t * @returns The current drillstack dimensions\n\t */\n\tgetDimensionsFromDrillStack: function (oChart: Chart) {\n\t\tconst aCurrentDrillStack = oChart.getDrillStack() || [];\n\t\tconst aCurrentDrillView = aCurrentDrillStack.pop() || ({} as any);\n\t\treturn aCurrentDrillView.dimension || [];\n\t},\n\t/**\n\t * Method to fetch chart selections.\n\t *\n\t * @param oChart The inner chart control\n\t * @returns The chart selections\n\t */\n\tgetVizSelection: function (oChart: any) {\n\t\treturn (oChart && oChart._getVizFrame() && oChart._getVizFrame().vizSelection()) || [];\n\t}\n};\n\nexport default ChartUtils;\n"],"mappings":"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"}},{"offset":{"line":4515,"column":0},"map":{"version":3,"names":["sap","ui","define","FilterUtil","Filter","FilterOperator","aPrevDrillStack","ChartUtils","getChartSelectionsExist","oMdcChart","oInSource","oSource","oChart","getControlDelegate","_getChart","aDimensions","this","getDimensionsFromDrillStack","bIsDrillDown","length","bIsDrillUp","bNoChange","toString","aFilters","getChartSelections","isA","sError","bClearSelections","getChartModel","aVizSelections","getChartFilters","setChartFilters","oDrillStack","aChartFilters","aVisibleDimensions","addChartFilters","aSelectedData","item","aDimFilters","i","sPath","sValue","data","undefined","push","path","operator","EQ","value1","getVizSelection","getVisibleDimensions","aDrillStackKeys","Object","keys","aPrevDrillStackData","getFilterBarFilterInfo","getFilterInfo","getFilter","targetControl","getAllFilterInfo","oFilters","filters","getChartSelectedData","aSelectedPoints","getSelectionBehavior","getSelectedDataPoints","dataPoints","getSelectedCategories","categories","getSelectedSeries","series","vData","oInternalModelContext","getBindingContext","setProperty","getObject","aCurrentDrillStack","getDrillStack","aCurrentDrillView","pop","dimension","_getVizFrame","vizSelection"],"sources":["ChartUtils-dbg.js"],"mappings":"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","sourceRoot":"chart"}},{"offset":{"line":4520,"column":0},"map":{"version":3,"names":["Contact","defineBuildingBlock","name","namespace","designtime","blockAttribute","type","$Type","required","$kind","getTemplate","id","_flexId","idPrefix","generate","undefined","convertedContact","convertMetaModelContext","metaPath","myDataModel","getInvolvedDataModelObjects","contextPath","value","getExpressionFromAnnotation","fn","getRelativePaths","delegateConfiguration","payload","contact","getPath","xml","attr","visible","ariaLabelledBy","JSON","stringify","BuildingBlockBase"],"sourceRoot":"contact","sources":["Contact.ts"],"sourcesContent":["/**\n * @classdesc\n * Macro for creating a Contact based on provided OData v4 metadata.\n *\n *\n * Usage example:\n * <pre>\n * &lt;macro:Contact\n *   id=\"someID\"\n *   contact=\"{contact>}\"\n *   contextPath=\"{contextPath>}\"\n * /&gt;\n * </pre>\n * @class sap.fe.macros.Contact\n * @hideconstructor\n * @private\n * @experimental\n */\nimport { blockAttribute, BuildingBlockBase, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockRuntime\";\nimport { convertMetaModelContext, getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport { getExpressionFromAnnotation } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport { getRelativePaths } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport type { V4Context } from \"types/extension_types\";\n\n@defineBuildingBlock({\n\t/**\n\t * Name of the macro control.\n\t */\n\tname: \"Contact\",\n\t/**\n\t * Namespace of the macro control\n\t */\n\tnamespace: \"sap.fe.macros\",\n\t/**\n\t * Location of the designtime info\n\t */\n\tdesigntime: \"sap/fe/macros/Contact.designtime\"\n})\n\n/**\n * Public external field representation\n */\nexport default class Contact extends BuildingBlockBase {\n\t/**\n\t * Prefix added to the generated ID of the field\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic idPrefix!: string;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic _flexId!: string; //needs to be added in v2, was there \"implicitly\" in v1\n\n\t/**\n\t * Metadata path to the Contact\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\t$Type: [\"com.sap.vocabularies.Communication.v1.ContactType\"],\n\t\trequired: true\n\t})\n\tpublic metaPath!: V4Context;\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\t$kind: [\"EntitySet\", \"NavigationProperty\", \"EntityType\", \"Singleton\"]\n\t})\n\tpublic contextPath!: V4Context;\n\n\t/**\n\t * Property added to associate the label and the contact\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic ariaLabelledBy!: string;\n\n\t/**\n\t * Boolean visible property\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tpublic visible!: boolean;\n\n\t/**\n\t * The building block template function.\n\t *\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetTemplate() {\n\t\tlet id;\n\t\tif (this._flexId) {\n\t\t\t//in case a flex id is given, take this one\n\t\t\tid = this._flexId;\n\t\t} else {\n\t\t\t//alternatively check for idPrefix and generate an appropriate id\n\t\t\tid = this.idPrefix ? generate([this.idPrefix, \"Field-content\"]) : undefined;\n\t\t}\n\n\t\tconst convertedContact = convertMetaModelContext(this.metaPath);\n\t\tconst myDataModel = getInvolvedDataModelObjects(this.metaPath, this.contextPath);\n\n\t\tconst value = getExpressionFromAnnotation(convertedContact.fn, getRelativePaths(myDataModel));\n\t\tconst delegateConfiguration = {\n\t\t\tname: \"sap/fe/macros/contact/ContactDelegate\",\n\t\t\tpayload: {\n\t\t\t\tcontact: this.metaPath.getPath()\n\t\t\t}\n\t\t};\n\n\t\treturn xml`<mdc:Field\n\t\txmlns:mdc=\"sap.ui.mdc\"\n\t\tdelegate=\"{name: 'sap/ui/mdc/odata/v4/FieldBaseDelegate'}\"\n\t\t${this.attr(\"id\", id)}\n\t\teditMode=\"Display\"\n\t\twidth=\"100%\"\n\t\t${this.attr(\"visible\", this.visible)}\n\t\t${this.attr(\"value\", value)}\n\t\t${this.attr(\"ariaLabelledBy\", this.ariaLabelledBy)}\n\t>\n\t\t<mdc:fieldInfo>\n\t\t\t<mdc:Link\n\t\t\t\tcore:require=\"{FieldRuntime: 'sap/fe/macros/field/FieldRuntime'}\"\n\t\t\t\tenablePersonalization=\"false\"\n\t\t\t\t${this.attr(\"delegate\", JSON.stringify(delegateConfiguration))}\n\t\t\t/>\n\t\t</mdc:fieldInfo>\n\t</mdc:Field>\n\t\t\t`;\n\t}\n}\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;MA4CqBA,OAAO,WAlB3BC,mBAAmB,CAAC;IACpB;AACD;AACA;IACCC,IAAI,EAAE,SAAS;IACf;AACD;AACA;IACCC,SAAS,EAAE,eAAe;IAC1B;AACD;AACA;IACCC,UAAU,EAAE;EACb,CAAC,CAAC,UASAC,cAAc,CAAC;IACfC,IAAI,EAAE;EACP,CAAC,CAAC,UAGDD,cAAc,CAAC;IACfC,IAAI,EAAE;EACP,CAAC,CAAC,UAMDD,cAAc,CAAC;IACfC,IAAI,EAAE,sBAAsB;IAC5BC,KAAK,EAAE,CAAC,mDAAmD,CAAC;IAC5DC,QAAQ,EAAE;EACX,CAAC,CAAC,UAGDH,cAAc,CAAC;IACfC,IAAI,EAAE,sBAAsB;IAC5BG,KAAK,EAAE,CAAC,WAAW,EAAE,oBAAoB,EAAE,YAAY,EAAE,WAAW;EACrE,CAAC,CAAC,UAMDJ,cAAc,CAAC;IACfC,IAAI,EAAE;EACP,CAAC,CAAC,UAMDD,cAAc,CAAC;IACfC,IAAI,EAAE;EACP,CAAC,CAAC;IAAA;IAAA;MAAA;MAAA;QAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;IAAA;IAAA;IAAA;IAGF;AACD;AACA;AACA;AACA;IAJC,OAKAI,WAAW,GAAX,uBAAc;MACb,IAAIC,EAAE;MACN,IAAI,IAAI,CAACC,OAAO,EAAE;QACjB;QACAD,EAAE,GAAG,IAAI,CAACC,OAAO;MAClB,CAAC,MAAM;QACN;QACAD,EAAE,GAAG,IAAI,CAACE,QAAQ,GAAGC,QAAQ,CAAC,CAAC,IAAI,CAACD,QAAQ,EAAE,eAAe,CAAC,CAAC,GAAGE,SAAS;MAC5E;MAEA,MAAMC,gBAAgB,GAAGC,uBAAuB,CAAC,IAAI,CAACC,QAAQ,CAAC;MAC/D,MAAMC,WAAW,GAAGC,2BAA2B,CAAC,IAAI,CAACF,QAAQ,EAAE,IAAI,CAACG,WAAW,CAAC;MAEhF,MAAMC,KAAK,GAAGC,2BAA2B,CAACP,gBAAgB,CAACQ,EAAE,EAAEC,gBAAgB,CAACN,WAAW,CAAC,CAAC;MAC7F,MAAMO,qBAAqB,GAAG;QAC7BxB,IAAI,EAAE,uCAAuC;QAC7CyB,OAAO,EAAE;UACRC,OAAO,EAAE,IAAI,CAACV,QAAQ,CAACW,OAAO;QAC/B;MACD,CAAC;MAED,OAAOC,GAAI;AACb;AACA;AACA,IAAI,IAAI,CAACC,IAAI,CAAC,IAAI,EAAEpB,EAAE,CAAE;AACxB;AACA;AACA,IAAI,IAAI,CAACoB,IAAI,CAAC,SAAS,EAAE,IAAI,CAACC,OAAO,CAAE;AACvC,IAAI,IAAI,CAACD,IAAI,CAAC,OAAO,EAAET,KAAK,CAAE;AAC9B,IAAI,IAAI,CAACS,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAACE,cAAc,CAAE;AACrD;AACA;AACA;AACA;AACA;AACA,MAAM,IAAI,CAACF,IAAI,CAAC,UAAU,EAAEG,IAAI,CAACC,SAAS,CAACT,qBAAqB,CAAC,CAAE;AACnE;AACA;AACA;AACA,IAAI;IACH,CAAC;IAAA;EAAA,EA3FmCU,iBAAiB;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;EAAA;EAAA;AAAA"}},{"offset":{"line":4668,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlock","BuildingBlockRuntime","MetaModelConverter","BindingToolkit","StableIdHelper","DataModelPathHelper","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_exports","getRelativePaths","generate","getExpressionFromAnnotation","getInvolvedDataModelObjects","convertMetaModelContext","xml","defineBuildingBlock","BuildingBlockBase","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","Contact","name","namespace","designtime","type","$Type","required","$kind","_BuildingBlockBase","_this","_len","arguments","length","args","Array","_key","this","_proto","getTemplate","id","_flexId","idPrefix","convertedContact","metaPath","myDataModel","contextPath","fn","delegateConfiguration","payload","contact","getPath","attr","visible","ariaLabelledBy","JSON","stringify"],"sources":["Contact-dbg.js"],"mappings":"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","sourceRoot":"contact"}},{"offset":{"line":4691,"column":0},"map":{"version":3,"names":["Object","assign","LinkDelegate","_fnTemplateFragment","payload","metaModel","fragmentName","preProcessorSettings","bindingContexts","models","contactContext","createBindingContext","contact","fragment","XMLTemplateProcessor","loadTemplate","templatedFragment","XMLPreprocessor","process","name","Fragment","load","definition","controller","fetchAdditionalContent","mdcLinkControl","navigateRegexpMatch","navigationPath","match","bindingContext","length","getModel","bindContext","getBindingContext","$$ownRequest","isA","getMetaModel","popoverContent","setBindingContext","getBoundContext","Promise","resolve","fetchLinkType","initialType","type","directLink","undefined","runtimeType"],"sourceRoot":"contact","sources":["ContactDelegate.ts"],"sourcesContent":["import Fragment from \"sap/ui/core/Fragment\";\nimport XMLPreprocessor from \"sap/ui/core/util/XMLPreprocessor\";\nimport XMLTemplateProcessor from \"sap/ui/core/XMLTemplateProcessor\";\n\nimport type Control from \"sap/ui/core/Control\";\nimport LinkDelegate from \"sap/ui/mdc/LinkDelegate\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\n\ntype ContactPayload = { navigationPath: string; contact: string };\n\nexport default Object.assign({}, LinkDelegate, {\n\t/**\n\t * Method called to do the templating of the popover content.\n\t *\n\t * @param payload\n\t * @param metaModel\n\t * @returns  A promise containing the popover content\n\t */\n\t_fnTemplateFragment: async function (payload: ContactPayload, metaModel: ODataMetaModel) {\n\t\tconst fragmentName = \"sap.fe.macros.contact.ContactQuickView\";\n\t\tconst preProcessorSettings: { bindingContexts: object; models: object } = { bindingContexts: {}, models: {} };\n\t\tconst contactContext = metaModel.createBindingContext(payload.contact);\n\t\tif (payload.contact && contactContext) {\n\t\t\tpreProcessorSettings.bindingContexts = {\n\t\t\t\tcontact: contactContext\n\t\t\t};\n\t\t\tpreProcessorSettings.models = {\n\t\t\t\tcontact: metaModel\n\t\t\t};\n\t\t}\n\n\t\tconst fragment = XMLTemplateProcessor.loadTemplate(fragmentName, \"fragment\");\n\t\tconst templatedFragment = await XMLPreprocessor.process(fragment, { name: fragmentName }, preProcessorSettings);\n\t\treturn Fragment.load({\n\t\t\tdefinition: templatedFragment,\n\t\t\tcontroller: this\n\t\t});\n\t},\n\n\t/**\n\t * Method calls by the mdc.field to determine what should be the content of the popup when mdcLink#open is called.\n\t *\n\t * @param payload\n\t * @param mdcLinkControl\n\t * @returns A promise containing the popover content\n\t */\n\tfetchAdditionalContent: async function (payload: ContactPayload, mdcLinkControl: Control) {\n\t\tconst navigateRegexpMatch = payload.navigationPath?.match(/{(.*?)}/);\n\t\tconst bindingContext =\n\t\t\tnavigateRegexpMatch && navigateRegexpMatch.length > 1 && navigateRegexpMatch[1]\n\t\t\t\t? mdcLinkControl\n\t\t\t\t\t\t.getModel()\n\t\t\t\t\t\t.bindContext(navigateRegexpMatch[1], mdcLinkControl.getBindingContext() as Context, { $$ownRequest: true })\n\t\t\t\t: null;\n\t\tif (mdcLinkControl.isA(\"sap.ui.mdc.Link\")) {\n\t\t\tconst metaModel = mdcLinkControl.getModel().getMetaModel() as ODataMetaModel;\n\t\t\tconst popoverContent = (await this._fnTemplateFragment(payload, metaModel)) as Control;\n\t\t\tif (bindingContext) {\n\t\t\t\tpopoverContent.setBindingContext(bindingContext.getBoundContext() as Context);\n\t\t\t}\n\t\t\treturn [popoverContent];\n\t\t}\n\t\treturn Promise.resolve([]);\n\t},\n\n\tfetchLinkType: async function () {\n\t\treturn {\n\t\t\tinitialType: {\n\t\t\t\ttype: 2, // this means mdcLink.open will open a popup which shows content retrieved by fetchAdditionalContent\n\t\t\t\tdirectLink: undefined\n\t\t\t},\n\t\t\truntimeType: undefined\n\t\t};\n\t}\n});\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;SAWeA,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEC,YAAY,EAAE;IAC9C;AACD;AACA;AACA;AACA;AACA;AACA;IACCC,mBAAmB,EAAE,gBAAgBC,OAAuB,EAAEC,SAAyB,EAAE;MACxF,MAAMC,YAAY,GAAG,wCAAwC;MAC7D,MAAMC,oBAAiE,GAAG;QAAEC,eAAe,EAAE,CAAC,CAAC;QAAEC,MAAM,EAAE,CAAC;MAAE,CAAC;MAC7G,MAAMC,cAAc,GAAGL,SAAS,CAACM,oBAAoB,CAACP,OAAO,CAACQ,OAAO,CAAC;MACtE,IAAIR,OAAO,CAACQ,OAAO,IAAIF,cAAc,EAAE;QACtCH,oBAAoB,CAACC,eAAe,GAAG;UACtCI,OAAO,EAAEF;QACV,CAAC;QACDH,oBAAoB,CAACE,MAAM,GAAG;UAC7BG,OAAO,EAAEP;QACV,CAAC;MACF;MAEA,MAAMQ,QAAQ,GAAGC,oBAAoB,CAACC,YAAY,CAACT,YAAY,EAAE,UAAU,CAAC;MAC5E,MAAMU,iBAAiB,GAAG,MAAMC,eAAe,CAACC,OAAO,CAACL,QAAQ,EAAE;QAAEM,IAAI,EAAEb;MAAa,CAAC,EAAEC,oBAAoB,CAAC;MAC/G,OAAOa,QAAQ,CAACC,IAAI,CAAC;QACpBC,UAAU,EAAEN,iBAAiB;QAC7BO,UAAU,EAAE;MACb,CAAC,CAAC;IACH,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;AACA;IACCC,sBAAsB,EAAE,gBAAgBpB,OAAuB,EAAEqB,cAAuB,EAAE;MAAA;MACzF,MAAMC,mBAAmB,4BAAGtB,OAAO,CAACuB,cAAc,0DAAtB,sBAAwBC,KAAK,CAAC,SAAS,CAAC;MACpE,MAAMC,cAAc,GACnBH,mBAAmB,IAAIA,mBAAmB,CAACI,MAAM,GAAG,CAAC,IAAIJ,mBAAmB,CAAC,CAAC,CAAC,GAC5ED,cAAc,CACbM,QAAQ,EAAE,CACVC,WAAW,CAACN,mBAAmB,CAAC,CAAC,CAAC,EAAED,cAAc,CAACQ,iBAAiB,EAAE,EAAa;QAAEC,YAAY,EAAE;MAAK,CAAC,CAAC,GAC3G,IAAI;MACR,IAAIT,cAAc,CAACU,GAAG,CAAC,iBAAiB,CAAC,EAAE;QAC1C,MAAM9B,SAAS,GAAGoB,cAAc,CAACM,QAAQ,EAAE,CAACK,YAAY,EAAoB;QAC5E,MAAMC,cAAc,GAAI,MAAM,IAAI,CAAClC,mBAAmB,CAACC,OAAO,EAAEC,SAAS,CAAa;QACtF,IAAIwB,cAAc,EAAE;UACnBQ,cAAc,CAACC,iBAAiB,CAACT,cAAc,CAACU,eAAe,EAAE,CAAY;QAC9E;QACA,OAAO,CAACF,cAAc,CAAC;MACxB;MACA,OAAOG,OAAO,CAACC,OAAO,CAAC,EAAE,CAAC;IAC3B,CAAC;IAEDC,aAAa,EAAE,kBAAkB;MAChC,OAAO;QACNC,WAAW,EAAE;UACZC,IAAI,EAAE,CAAC;UAAE;UACTC,UAAU,EAAEC;QACb,CAAC;QACDC,WAAW,EAAED;MACd,CAAC;IACF;EACD,CAAC,CAAC;AAAA"}},{"offset":{"line":4765,"column":0},"map":{"version":3,"names":["sap","ui","define","Fragment","XMLPreprocessor","XMLTemplateProcessor","LinkDelegate","Object","assign","_fnTemplateFragment","async","payload","metaModel","fragmentName","preProcessorSettings","bindingContexts","models","contactContext","createBindingContext","contact","fragment","loadTemplate","templatedFragment","process","name","load","definition","controller","this","fetchAdditionalContent","mdcLinkControl","_payload$navigationPa","navigateRegexpMatch","navigationPath","match","bindingContext","length","getModel","bindContext","getBindingContext","$$ownRequest","isA","getMetaModel","popoverContent","setBindingContext","getBoundContext","Promise","resolve","fetchLinkType","initialType","type","directLink","undefined","runtimeType"],"sources":["ContactDelegate-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,mDAAO,CAAC,uBAAwB,mCAAoC,mCAAoC,2BAA4B,SAAUC,EAAUC,EAAiBC,EAAsBC,GACpM,aAEA,OAAOC,OAAOC,OAAO,CAAC,EAAGF,EAAc,CAQrCG,oBAAqBC,eAAgBC,EAASC,GAC5C,MAAMC,EAAe,yCACrB,MAAMC,EAAuB,CAC3BC,gBAAiB,CAAC,EAClBC,OAAQ,CAAC,GAEX,MAAMC,EAAiBL,EAAUM,qBAAqBP,EAAQQ,SAC9D,GAAIR,EAAQQ,SAAWF,EAAgB,CACrCH,EAAqBC,gBAAkB,CACrCI,QAASF,GAEXH,EAAqBE,OAAS,CAC5BG,QAASP,EAEb,CACA,MAAMQ,EAAWf,EAAqBgB,aAAaR,EAAc,YACjE,MAAMS,QAA0BlB,EAAgBmB,QAAQH,EAAU,CAChEI,KAAMX,GACLC,GACH,OAAOX,EAASsB,KAAK,CACnBC,WAAYJ,EACZK,WAAYC,MAEhB,EAQAC,uBAAwBnB,eAAgBC,EAASmB,GAC/C,IAAIC,EACJ,MAAMC,GAAuBD,EAAwBpB,EAAQsB,kBAAoB,MAAQF,SAA+B,OAAS,EAAIA,EAAsBG,MAAM,WACjK,MAAMC,EAAiBH,GAAuBA,EAAoBI,OAAS,GAAKJ,EAAoB,GAAKF,EAAeO,WAAWC,YAAYN,EAAoB,GAAIF,EAAeS,oBAAqB,CACzMC,aAAc,OACX,KACL,GAAIV,EAAeW,IAAI,mBAAoB,CACzC,MAAM7B,EAAYkB,EAAeO,WAAWK,eAC5C,MAAMC,QAAuBf,KAAKnB,oBAAoBE,EAASC,GAC/D,GAAIuB,EAAgB,CAClBQ,EAAeC,kBAAkBT,EAAeU,kBAClD,CACA,MAAO,CAACF,EACV,CACA,OAAOG,QAAQC,QAAQ,GACzB,EACAC,cAAetC,iBACb,MAAO,CACLuC,YAAa,CACXC,KAAM,EAENC,WAAYC,WAEdC,YAAaD,UAEjB,GAEJ,EAAG","sourceRoot":"contact"}},{"offset":{"line":4770,"column":0},"map":{"version":3,"names":["oRB","Core","getLibraryResourceBundle","ContactHelper","formatUri","itemType","value","formatAddress","street","code","locality","region","country","textToWrite","push","join","computeLabel","subType","getText","indexOf","getContactTitle","getAvatarInitials","oInitials"],"sourceRoot":"contact","sources":["ContactHelper.ts"],"sourcesContent":["import Core from \"sap/ui/core/Core\";\n\nconst oRB = Core.getLibraryResourceBundle(\"sap.ui.mdc\");\nconst ContactHelper = {\n\t// emails: first preferred, then work\n\t// phones : first work, then cell, then fax, then preferred\n\t// address : first preferred, then work\n\tformatUri: function (itemType: any, value: any) {\n\t\tswitch (itemType) {\n\t\t\tcase \"phone\":\n\t\t\t\treturn `tel:${value}`;\n\t\t\tcase \"mail\":\n\t\t\t\treturn `mailto:${value}`;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t},\n\tformatAddress: function (street: any, code: any, locality: any, region: any, country: any) {\n\t\tconst textToWrite = [];\n\t\tif (street) {\n\t\t\ttextToWrite.push(street);\n\t\t}\n\t\tif (code && locality) {\n\t\t\ttextToWrite.push(`${code} ${locality}`);\n\t\t} else {\n\t\t\tif (code) {\n\t\t\t\ttextToWrite.push(code);\n\t\t\t}\n\t\t\tif (locality) {\n\t\t\t\ttextToWrite.push(locality);\n\t\t\t}\n\t\t}\n\t\tif (region) {\n\t\t\ttextToWrite.push(region);\n\t\t}\n\t\tif (country) {\n\t\t\ttextToWrite.push(country);\n\t\t}\n\t\treturn textToWrite.join(\", \");\n\t},\n\tcomputeLabel: function (itemType: any, subType: any) {\n\t\tswitch (itemType) {\n\t\t\tcase \"role\":\n\t\t\t\treturn oRB.getText(\"info.POPOVER_CONTACT_SECTION_ROLE\");\n\t\t\tcase \"title\":\n\t\t\t\treturn oRB.getText(\"info.POPOVER_CONTACT_SECTION_JOBTITLE\");\n\t\t\tcase \"org\":\n\t\t\t\treturn oRB.getText(\"info.POPOVER_CONTACT_SECTION_DEPARTMENT\");\n\t\t\tcase \"phone\":\n\t\t\t\tif (subType.indexOf(\"fax\") > -1) {\n\t\t\t\t\treturn oRB.getText(\"info.POPOVER_CONTACT_SECTION_FAX\");\n\t\t\t\t} else if (subType.indexOf(\"work\") > -1) {\n\t\t\t\t\treturn oRB.getText(\"info.POPOVER_CONTACT_SECTION_PHONE\");\n\t\t\t\t} else if (subType.indexOf(\"cell\") > -1) {\n\t\t\t\t\treturn oRB.getText(\"info.POPOVER_CONTACT_SECTION_MOBILE\");\n\t\t\t\t} else if (subType.indexOf(\"preferred\") > -1) {\n\t\t\t\t\treturn oRB.getText(\"info.POPOVER_CONTACT_SECTION_PHONE\");\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"mail\":\n\t\t\t\treturn oRB.getText(\"info.POPOVER_CONTACT_SECTION_EMAIL\");\n\t\t\tcase \"address\":\n\t\t\t\treturn oRB.getText(\"info.POPOVER_CONTACT_SECTION_ADR\");\n\t\t\tdefault:\n\t\t\t\treturn \"contactItem\";\n\t\t}\n\t},\n\tgetContactTitle: function () {\n\t\treturn oRB.getText(\"info.POPOVER_CONTACT_SECTION_TITLE\");\n\t},\n\tgetAvatarInitials: function (oInitials: any) {\n\t\treturn oInitials ? oInitials : \"\";\n\t}\n};\n\nexport default ContactHelper;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;EAEA,MAAMA,GAAG,GAAGC,IAAI,CAACC,wBAAwB,CAAC,YAAY,CAAC;EACvD,MAAMC,aAAa,GAAG;IACrB;IACA;IACA;IACAC,SAAS,EAAE,UAAUC,QAAa,EAAEC,KAAU,EAAE;MAC/C,QAAQD,QAAQ;QACf,KAAK,OAAO;UACX,OAAQ,OAAMC,KAAM,EAAC;QACtB,KAAK,MAAM;UACV,OAAQ,UAASA,KAAM,EAAC;QACzB;UACC,OAAOA,KAAK;MAAC;IAEhB,CAAC;IACDC,aAAa,EAAE,UAAUC,MAAW,EAAEC,IAAS,EAAEC,QAAa,EAAEC,MAAW,EAAEC,OAAY,EAAE;MAC1F,MAAMC,WAAW,GAAG,EAAE;MACtB,IAAIL,MAAM,EAAE;QACXK,WAAW,CAACC,IAAI,CAACN,MAAM,CAAC;MACzB;MACA,IAAIC,IAAI,IAAIC,QAAQ,EAAE;QACrBG,WAAW,CAACC,IAAI,CAAE,GAAEL,IAAK,IAAGC,QAAS,EAAC,CAAC;MACxC,CAAC,MAAM;QACN,IAAID,IAAI,EAAE;UACTI,WAAW,CAACC,IAAI,CAACL,IAAI,CAAC;QACvB;QACA,IAAIC,QAAQ,EAAE;UACbG,WAAW,CAACC,IAAI,CAACJ,QAAQ,CAAC;QAC3B;MACD;MACA,IAAIC,MAAM,EAAE;QACXE,WAAW,CAACC,IAAI,CAACH,MAAM,CAAC;MACzB;MACA,IAAIC,OAAO,EAAE;QACZC,WAAW,CAACC,IAAI,CAACF,OAAO,CAAC;MAC1B;MACA,OAAOC,WAAW,CAACE,IAAI,CAAC,IAAI,CAAC;IAC9B,CAAC;IACDC,YAAY,EAAE,UAAUX,QAAa,EAAEY,OAAY,EAAE;MACpD,QAAQZ,QAAQ;QACf,KAAK,MAAM;UACV,OAAOL,GAAG,CAACkB,OAAO,CAAC,mCAAmC,CAAC;QACxD,KAAK,OAAO;UACX,OAAOlB,GAAG,CAACkB,OAAO,CAAC,uCAAuC,CAAC;QAC5D,KAAK,KAAK;UACT,OAAOlB,GAAG,CAACkB,OAAO,CAAC,yCAAyC,CAAC;QAC9D,KAAK,OAAO;UACX,IAAID,OAAO,CAACE,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE;YAChC,OAAOnB,GAAG,CAACkB,OAAO,CAAC,kCAAkC,CAAC;UACvD,CAAC,MAAM,IAAID,OAAO,CAACE,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE;YACxC,OAAOnB,GAAG,CAACkB,OAAO,CAAC,oCAAoC,CAAC;UACzD,CAAC,MAAM,IAAID,OAAO,CAACE,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE;YACxC,OAAOnB,GAAG,CAACkB,OAAO,CAAC,qCAAqC,CAAC;UAC1D,CAAC,MAAM,IAAID,OAAO,CAACE,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,EAAE;YAC7C,OAAOnB,GAAG,CAACkB,OAAO,CAAC,oCAAoC,CAAC;UACzD;UACA;QACD,KAAK,MAAM;UACV,OAAOlB,GAAG,CAACkB,OAAO,CAAC,oCAAoC,CAAC;QACzD,KAAK,SAAS;UACb,OAAOlB,GAAG,CAACkB,OAAO,CAAC,kCAAkC,CAAC;QACvD;UACC,OAAO,aAAa;MAAC;IAExB,CAAC;IACDE,eAAe,EAAE,YAAY;MAC5B,OAAOpB,GAAG,CAACkB,OAAO,CAAC,oCAAoC,CAAC;IACzD,CAAC;IACDG,iBAAiB,EAAE,UAAUC,SAAc,EAAE;MAC5C,OAAOA,SAAS,GAAGA,SAAS,GAAG,EAAE;IAClC;EACD,CAAC;EAAC,OAEanB,aAAa;AAAA"}},{"offset":{"line":4851,"column":0},"map":{"version":3,"names":["sap","ui","define","Core","oRB","getLibraryResourceBundle","ContactHelper","formatUri","itemType","value","formatAddress","street","code","locality","region","country","textToWrite","push","join","computeLabel","subType","getText","indexOf","getContactTitle","getAvatarInitials","oInitials"],"sources":["ContactHelper-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,iDAAO,CAAC,oBAAqB,SAAUC,GAC5C,aAEA,MAAMC,EAAMD,EAAKE,yBAAyB,cAC1C,MAAMC,EAAgB,CAIpBC,UAAW,SAAUC,EAAUC,GAC7B,OAAQD,GACN,IAAK,QACH,MAAO,OAAOC,IAChB,IAAK,OACH,MAAO,UAAUA,IACnB,QACE,OAAOA,EAEb,EACAC,cAAe,SAAUC,EAAQC,EAAMC,EAAUC,EAAQC,GACvD,MAAMC,EAAc,GACpB,GAAIL,EAAQ,CACVK,EAAYC,KAAKN,EACnB,CACA,GAAIC,GAAQC,EAAU,CACpBG,EAAYC,KAAK,GAAGL,KAAQC,IAC9B,KAAO,CACL,GAAID,EAAM,CACRI,EAAYC,KAAKL,EACnB,CACA,GAAIC,EAAU,CACZG,EAAYC,KAAKJ,EACnB,CACF,CACA,GAAIC,EAAQ,CACVE,EAAYC,KAAKH,EACnB,CACA,GAAIC,EAAS,CACXC,EAAYC,KAAKF,EACnB,CACA,OAAOC,EAAYE,KAAK,KAC1B,EACAC,aAAc,SAAUX,EAAUY,GAChC,OAAQZ,GACN,IAAK,OACH,OAAOJ,EAAIiB,QAAQ,qCACrB,IAAK,QACH,OAAOjB,EAAIiB,QAAQ,yCACrB,IAAK,MACH,OAAOjB,EAAIiB,QAAQ,2CACrB,IAAK,QACH,GAAID,EAAQE,QAAQ,QAAU,EAAG,CAC/B,OAAOlB,EAAIiB,QAAQ,mCACrB,MAAO,GAAID,EAAQE,QAAQ,SAAW,EAAG,CACvC,OAAOlB,EAAIiB,QAAQ,qCACrB,MAAO,GAAID,EAAQE,QAAQ,SAAW,EAAG,CACvC,OAAOlB,EAAIiB,QAAQ,sCACrB,MAAO,GAAID,EAAQE,QAAQ,cAAgB,EAAG,CAC5C,OAAOlB,EAAIiB,QAAQ,qCACrB,CACA,MACF,IAAK,OACH,OAAOjB,EAAIiB,QAAQ,sCACrB,IAAK,UACH,OAAOjB,EAAIiB,QAAQ,oCACrB,QACE,MAAO,cAEb,EACAE,gBAAiB,WACf,OAAOnB,EAAIiB,QAAQ,qCACrB,EACAG,kBAAmB,SAAUC,GAC3B,OAAOA,EAAYA,EAAY,EACjC,GAEF,OAAOnB,CACT,EAAG","sourceRoot":"contact"}},{"offset":{"line":4856,"column":0},"map":{"version":3,"names":["DraftIndicator","defineBuildingBlock","name","namespace","isRuntime","blockAttribute","type","defaultValue","validate","value","ObjectMarkerVisibility","IconOnly","IconAndText","includes","Error","required","$kind","bindable","formatDraftOwnerTextInPopover","hasDraftEntity","draftInProcessByUser","draftLastChangedByUser","draftInProcessByUserDesc","draftLastChangedByUserDesc","userDescription","ResourceModel","getText","getDraftAdministrativeDataProperties","draftAdministrativeDataContext","entitySet","getModel","createBindingContext","convertedDraftAdministrativeData","convertMetaModelContext","targetType","entityProperties","map","property","getPopoverTitleBindingExpression","ifElse","not","Entity","IsActive","pathInModel","HasDraft","isEmpty","draftIndicatorType","getDraftOwnerTextBindingExpression","draftAdministrativeDataProperties","parts","path","push","formatter","createPopover","control","isDraftWithNoChangesBinding","and","draftWithNoChangesTextBinding","isDraftWithChangesBinding","draftWithChangesTextBinding","model","formatMessage","isActiveInstanceBinding","activeInstanceTextBinding","deepClone","popover","draftPopover","close","CommonUtils","getTargetView","addDependent","onObjectMarkerPressed","event","source","getSource","bindingContext","getBindingContext","setBindingContext","openBy","getIconAndTextAdditionalInfoBindingExpression","orBindings","or","getIconAndTextContent","ObjectMarkerType","Draft","LockedBy","UnsavedBy","Unsaved","Flagged","visibility","TextOnly","bind","isDraftIndicatorVisible","ariaLabelledBy","class","getIconOnlyContent","Locked","visible","UI","IsEditable","getContent","BuildingBlockBase"],"sourceRoot":"draftIndicator","sources":["DraftIndicator.block.tsx"],"sourcesContent":["import formatMessage from \"sap/base/strings/formatMessage\";\nimport deepClone from \"sap/base/util/deepClone\";\nimport { blockAttribute, BuildingBlockBase, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport { Entity, UI } from \"sap/fe/core/converters/helpers/BindingHelper\";\nimport { convertMetaModelContext } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type { BindingToolkitExpression } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { and, ifElse, isEmpty, not, or, pathInModel } from \"sap/fe/core/helpers/BindingToolkit\";\nimport ResourceModel from \"sap/fe/macros/ResourceModel\";\nimport Button from \"sap/m/Button\";\nimport { ObjectMarkerType, ObjectMarkerVisibility } from \"sap/m/library\";\nimport ObjectMarker from \"sap/m/ObjectMarker\";\nimport Popover from \"sap/m/Popover\";\nimport Text from \"sap/m/Text\";\nimport VBox from \"sap/m/VBox\";\nimport type Event from \"sap/ui/base/Event\";\nimport type Control from \"sap/ui/core/Control\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\n\n/**\n * Building block for creating a DraftIndicator based on the metadata provided by OData V4.\n *\n * Usage example:\n * <pre>\n * &lt;macro:DraftIndicator\n *   id=\"SomeID\"\n * /&gt;\n * </pre>\n *\n * @private\n */\n@defineBuildingBlock({ name: \"DraftIndicator\", namespace: \"sap.fe.macros\", isRuntime: true })\nexport default class DraftIndicator extends BuildingBlockBase {\n\t/**\n\t * ID of the DraftIndicator\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tpublic id!: string;\n\n\t/**\n\t * Property added to associate the label with the DraftIndicator\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tpublic ariaLabelledBy?: string;\n\n\t/**\n\t * Type of the DraftIndicator, either \"IconAndText\" (default) or \"IconOnly\"\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tdefaultValue: \"IconAndText\",\n\t\tvalidate: (value?: ObjectMarkerVisibility) => {\n\t\t\tif (value && ![ObjectMarkerVisibility.IconOnly, ObjectMarkerVisibility.IconAndText].includes(value)) {\n\t\t\t\tthrow new Error(`Allowed value ${value} does not match`);\n\t\t\t}\n\t\t}\n\t})\n\tpublic draftIndicatorType!: ObjectMarkerVisibility.IconOnly | ObjectMarkerVisibility.IconAndText;\n\n\t/**\n\t * Mandatory context to the EntitySet\n\t */\n\t@blockAttribute({ type: \"sap.ui.model.Context\", required: true, $kind: [\"EntitySet\", \"NavigationProperty\"] })\n\tpublic entitySet!: Context;\n\n\t@blockAttribute({ type: \"boolean\", defaultValue: false, bindable: true })\n\tpublic isDraftIndicatorVisible!: BindingToolkitExpression<boolean>;\n\n\t@blockAttribute({ type: \"string\", defaultValue: \"\" })\n\tpublic class!: string;\n\n\tdraftPopover?: Popover;\n\n\t/**\n\t * Runtime formatter function to format the correct text that displays the owner of a draft.\n\t *\n\t * This is used in case the DraftIndicator is shown for an active entity that has a draft of another user.\n\t *\n\t * @param hasDraftEntity\n\t * @param draftInProcessByUser\n\t * @param draftLastChangedByUser\n\t * @param draftInProcessByUserDesc\n\t * @param draftLastChangedByUserDesc\n\t * @returns Text to display\n\t */\n\tstatic formatDraftOwnerTextInPopover(\n\t\thasDraftEntity: boolean,\n\t\tdraftInProcessByUser: string,\n\t\tdraftLastChangedByUser: string,\n\t\tdraftInProcessByUserDesc: string,\n\t\tdraftLastChangedByUserDesc: string\n\t): string {\n\t\tif (hasDraftEntity) {\n\t\t\tconst userDescription =\n\t\t\t\tdraftInProcessByUserDesc || draftInProcessByUser || draftLastChangedByUserDesc || draftLastChangedByUser;\n\n\t\t\tif (!userDescription) {\n\t\t\t\treturn ResourceModel.getText(\"M_FIELD_RUNTIME_DRAFT_POPOVER_UNSAVED_CHANGES_BY_UNKNOWN\");\n\t\t\t} else {\n\t\t\t\treturn draftInProcessByUser\n\t\t\t\t\t? ResourceModel.getText(\"M_FIELD_RUNTIME_DRAFT_POPOVER_LOCKED_BY_KNOWN\", [userDescription])\n\t\t\t\t\t: ResourceModel.getText(\"M_FIELD_RUNTIME_DRAFT_POPOVER_UNSAVED_CHANGES_BY_KNOWN\", [userDescription]);\n\t\t\t}\n\t\t} else {\n\t\t\treturn ResourceModel.getText(\"M_FIELD_RUNTIME_DRAFT_POPOVER_NO_DATA_TEXT\");\n\t\t}\n\t}\n\n\t/***\n\t * Gets the properties of the DraftAdministrativeData entity connected to the given entity set\n\t *\n\t * @returns List of property names\n\t */\n\tgetDraftAdministrativeDataProperties(): string[] {\n\t\tconst draftAdministrativeDataContext = this.entitySet.getModel().createBindingContext(\"DraftAdministrativeData\", this.entitySet);\n\t\tconst convertedDraftAdministrativeData = convertMetaModelContext(draftAdministrativeDataContext);\n\t\treturn convertedDraftAdministrativeData.targetType.entityProperties.map((property: { name: string }) => property.name);\n\t}\n\n\t/**\n\t * Constructs the binding expression for the text displayed as title of the popup.\n\t *\n\t * @returns The binding expression\n\t */\n\tgetPopoverTitleBindingExpression() {\n\t\treturn ifElse(\n\t\t\tnot(Entity.IsActive),\n\t\t\tpathInModel(\"M_COMMON_DRAFT_OBJECT\", \"sap.fe.i18n\"),\n\t\t\tifElse(\n\t\t\t\tEntity.HasDraft,\n\t\t\t\tifElse(\n\t\t\t\t\tnot(isEmpty(pathInModel(\"DraftAdministrativeData/InProcessByUser\"))),\n\t\t\t\t\tpathInModel(\"M_COMMON_DRAFT_LOCKED_OBJECT\", \"sap.fe.i18n\"),\n\t\t\t\t\tpathInModel(\"M_DRAFT_POPOVER_ADMIN_UNSAVED_OBJECT\", \"sap.fe.i18n\")\n\t\t\t\t),\n\t\t\t\tthis.draftIndicatorType === ObjectMarkerVisibility.IconAndText\n\t\t\t\t\t? \" \"\n\t\t\t\t\t: pathInModel(\"C_DRAFT_POPOVER_ADMIN_DATA_DRAFTINFO_FLAGGED_OBJECT\", \"sap.fe.i18n\")\n\t\t\t)\n\t\t);\n\t}\n\n\t/**\n\t * Constructs the binding expression for the text displayed to identify the draft owner in the popup.\n\t * This binding is configured to call formatDraftOwnerTextInPopover at runtime.\n\t *\n\t * We cannot reference formatDraftOwnerTextInPopover directly as we need to conditionally pass properties that might exist or not,\n\t * and referring to non-existing properties fails the binding.\n\t *\n\t * @returns The binding expression\n\t */\n\tgetDraftOwnerTextBindingExpression() {\n\t\tconst draftAdministrativeDataProperties = this.getDraftAdministrativeDataProperties();\n\n\t\tconst parts = [\n\t\t\t{ path: \"HasDraftEntity\", targetType: \"any\" },\n\t\t\t{ path: \"DraftAdministrativeData/InProcessByUser\" },\n\t\t\t{ path: \"DraftAdministrativeData/LastChangedByUser\" }\n\t\t];\n\t\tif (draftAdministrativeDataProperties.includes(\"InProcessByUserDescription\")) {\n\t\t\tparts.push({ path: \"DraftAdministrativeData/InProcessByUserDescription\" });\n\t\t}\n\t\tif (draftAdministrativeDataProperties.includes(\"LastChangedByUserDescription\")) {\n\t\t\tparts.push({ path: \"DraftAdministrativeData/LastChangedByUserDescription\" });\n\t\t}\n\n\t\treturn { parts, formatter: DraftIndicator.formatDraftOwnerTextInPopover };\n\t}\n\n\t/**\n\t * Creates a popover control to display draft information.\n\t *\n\t * @param control Control that the popover is to be created for\n\t * @returns The created popover control\n\t */\n\tcreatePopover(control: Control): Popover {\n\t\tconst isDraftWithNoChangesBinding = and(not(Entity.IsActive), isEmpty(pathInModel(\"DraftAdministrativeData/LastChangeDateTime\")));\n\t\tconst draftWithNoChangesTextBinding =\n\t\t\tthis.draftIndicatorType === ObjectMarkerVisibility.IconAndText\n\t\t\t\t? pathInModel(\"M_DRAFT_POPOVER_ADMIN_GENERIC_LOCKED_OBJECT_POPOVER_TEXT\", \"sap.fe.i18n\")\n\t\t\t\t: pathInModel(\"C_DRAFT_POPOVER_ADMIN_DATA_DRAFTINFO_POPOVER_NO_DATA_TEXT\", \"sap.fe.i18n\");\n\n\t\tconst isDraftWithChangesBinding = and(\n\t\t\tnot(Entity.IsActive),\n\t\t\tnot(isEmpty(pathInModel(\"DraftAdministrativeData/LastChangeDateTime\")))\n\t\t);\n\t\tconst draftWithChangesTextBinding = {\n\t\t\tparts: [\n\t\t\t\t{ path: \"M_DRAFT_POPOVER_ADMIN_LAST_CHANGE_TEXT\", model: \"sap.fe.i18n\" },\n\t\t\t\t{ path: \"DraftAdministrativeData/LastChangeDateTime\" }\n\t\t\t],\n\t\t\tformatter: formatMessage\n\t\t};\n\n\t\tconst isActiveInstanceBinding = and(Entity.IsActive, not(isEmpty(pathInModel(\"DraftAdministrativeData/LastChangeDateTime\"))));\n\t\tconst activeInstanceTextBinding = deepClone(draftWithChangesTextBinding);\n\n\t\tconst popover = (\n\t\t\t<Popover\n\t\t\t\ttitle={this.getPopoverTitleBindingExpression()}\n\t\t\t\tshowHeader={true}\n\t\t\t\tcontentWidth={\"15.625rem\"}\n\t\t\t\tverticalScrolling={false}\n\t\t\t\tclass={\"sapUiContentPadding\"}\n\t\t\t\tendButton={<Button icon={\"sap-icon://decline\"} press={() => this.draftPopover?.close()} />}\n\t\t\t>\n\t\t\t\t<VBox class={\"sapUiContentPadding\"}>\n\t\t\t\t\t<VBox visible={isDraftWithNoChangesBinding}>\n\t\t\t\t\t\t<Text text={draftWithNoChangesTextBinding} />\n\t\t\t\t\t</VBox>\n\t\t\t\t\t<VBox visible={isDraftWithChangesBinding}>\n\t\t\t\t\t\t<Text text={draftWithChangesTextBinding} />\n\t\t\t\t\t</VBox>\n\t\t\t\t\t<VBox visible={isActiveInstanceBinding}>\n\t\t\t\t\t\t<Text text={this.getDraftOwnerTextBindingExpression()} />\n\t\t\t\t\t\t<Text class={\"sapUiSmallMarginTop\"} text={activeInstanceTextBinding} />\n\t\t\t\t\t</VBox>\n\t\t\t\t</VBox>\n\t\t\t</Popover>\n\t\t);\n\n\t\tCommonUtils.getTargetView(control).addDependent(popover);\n\t\treturn popover;\n\t}\n\n\t/**\n\t * Handles pressing of the object marker by opening a corresponding popover.\n\t *\n\t * @param event Event object passed from the press event\n\t */\n\tonObjectMarkerPressed(event: Event): void {\n\t\tconst source = event.getSource() as Control;\n\t\tconst bindingContext = source.getBindingContext() as Context;\n\n\t\tthis.draftPopover ??= this.createPopover(source);\n\n\t\tthis.draftPopover.setBindingContext(bindingContext);\n\t\tthis.draftPopover.openBy(source, false);\n\t}\n\n\t/**\n\t * Constructs the binding expression for the \"additionalInfo\" attribute in the \"IconAndText\" case.\n\t *\n\t * @returns The binding expression\n\t */\n\tgetIconAndTextAdditionalInfoBindingExpression() {\n\t\tconst draftAdministrativeDataProperties = this.getDraftAdministrativeDataProperties();\n\n\t\tconst orBindings = [];\n\t\tif (draftAdministrativeDataProperties.includes(\"InProcessByUserDescription\")) {\n\t\t\torBindings.push(pathInModel(\"DraftAdministrativeData/InProcessByUserDescription\"));\n\t\t}\n\t\torBindings.push(pathInModel(\"DraftAdministrativeData/InProcessByUser\"));\n\t\tif (draftAdministrativeDataProperties.includes(\"LastChangedByUserDescription\")) {\n\t\t\torBindings.push(pathInModel(\"DraftAdministrativeData/LastChangedByUserDescription\"));\n\t\t}\n\t\torBindings.push(pathInModel(\"DraftAdministrativeData/LastChangedByUser\"));\n\n\t\treturn ifElse<string>(Entity.HasDraft, or(...orBindings) as BindingToolkitExpression<string>, \"\");\n\t}\n\n\t/**\n\t * Returns the content of this building block for the \"IconAndText\" type.\n\t *\n\t * @returns The control tree\n\t */\n\tgetIconAndTextContent() {\n\t\tconst type = ifElse(\n\t\t\tnot(Entity.IsActive),\n\t\t\tObjectMarkerType.Draft,\n\t\t\tifElse(\n\t\t\t\tEntity.HasDraft,\n\t\t\t\tifElse(\n\t\t\t\t\tpathInModel(\"DraftAdministrativeData/InProcessByUser\"),\n\t\t\t\t\tObjectMarkerType.LockedBy,\n\t\t\t\t\tifElse(pathInModel(\"DraftAdministrativeData/LastChangedByUser\"), ObjectMarkerType.UnsavedBy, ObjectMarkerType.Unsaved)\n\t\t\t\t),\n\t\t\t\tObjectMarkerType.Flagged\n\t\t\t)\n\t\t);\n\n\t\tconst visibility = ifElse(not(Entity.HasDraft), ObjectMarkerVisibility.TextOnly, ObjectMarkerVisibility.IconAndText);\n\n\t\treturn (\n\t\t\t<ObjectMarker\n\t\t\t\ttype={type}\n\t\t\t\tpress={this.onObjectMarkerPressed.bind(this)}\n\t\t\t\tvisibility={visibility}\n\t\t\t\tvisible={this.isDraftIndicatorVisible}\n\t\t\t\tadditionalInfo={this.getIconAndTextAdditionalInfoBindingExpression()}\n\t\t\t\tariaLabelledBy={this.ariaLabelledBy ? [this.ariaLabelledBy] : []}\n\t\t\t\tclass={this.class}\n\t\t\t/>\n\t\t);\n\t}\n\n\t/**\n\t * Returns the content of this building block for the \"IconOnly\" type.\n\t *\n\t * @returns The control tree\n\t */\n\tgetIconOnlyContent() {\n\t\tconst type = ifElse(\n\t\t\tnot(Entity.IsActive),\n\t\t\tObjectMarkerType.Draft,\n\t\t\tifElse(\n\t\t\t\tEntity.HasDraft,\n\t\t\t\tifElse(pathInModel(\"DraftAdministrativeData/InProcessByUser\"), ObjectMarkerType.Locked, ObjectMarkerType.Unsaved),\n\t\t\t\tObjectMarkerType.Flagged\n\t\t\t)\n\t\t);\n\t\tconst visible = and(not(UI.IsEditable), Entity.HasDraft, not(pathInModel(\"DraftAdministrativeData/DraftIsCreatedByMe\")));\n\n\t\treturn (\n\t\t\t<ObjectMarker\n\t\t\t\ttype={type}\n\t\t\t\tpress={this.onObjectMarkerPressed.bind(this)}\n\t\t\t\tvisibility={ObjectMarkerVisibility.IconOnly}\n\t\t\t\tvisible={visible}\n\t\t\t\tariaLabelledBy={this.ariaLabelledBy ? [this.ariaLabelledBy] : []}\n\t\t\t\tclass={this.class}\n\t\t\t/>\n\t\t);\n\t}\n\n\t/**\n\t * Returns the content of this building block.\n\t *\n\t * @returns The control tree\n\t */\n\tgetContent() {\n\t\tif (this.draftIndicatorType === ObjectMarkerVisibility.IconAndText) {\n\t\t\treturn this.getIconAndTextContent();\n\t\t} else {\n\t\t\treturn this.getIconOnlyContent();\n\t\t}\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":5200,"column":0},"map":{"version":3,"names":["sap","ui","define","formatMessage","deepClone","BuildingBlock","CommonUtils","BindingHelper","MetaModelConverter","BindingToolkit","ResourceModel","Button","library","ObjectMarker","Popover","Text","VBox","_jsx","_jsxs","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_exports","ObjectMarkerVisibility","ObjectMarkerType","pathInModel","or","not","isEmpty","ifElse","and","convertMetaModelContext","UI","Entity","defineBuildingBlock","BuildingBlockBase","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","DraftIndicator","name","namespace","isRuntime","type","defaultValue","validate","IconOnly","IconAndText","includes","required","$kind","bindable","_BuildingBlockBase","_this","_len","arguments","length","args","Array","_key","this","formatDraftOwnerTextInPopover","hasDraftEntity","draftInProcessByUser","draftLastChangedByUser","draftInProcessByUserDesc","draftLastChangedByUserDesc","userDescription","getText","_proto","getDraftAdministrativeDataProperties","draftAdministrativeDataContext","entitySet","getModel","createBindingContext","convertedDraftAdministrativeData","targetType","entityProperties","map","getPopoverTitleBindingExpression","IsActive","HasDraft","draftIndicatorType","getDraftOwnerTextBindingExpression","draftAdministrativeDataProperties","parts","path","push","formatter","createPopover","control","isDraftWithNoChangesBinding","draftWithNoChangesTextBinding","isDraftWithChangesBinding","draftWithChangesTextBinding","model","isActiveInstanceBinding","activeInstanceTextBinding","popover","title","showHeader","contentWidth","verticalScrolling","class","endButton","icon","press","_this$draftPopover","draftPopover","close","children","visible","text","getTargetView","addDependent","onObjectMarkerPressed","event","source","getSource","bindingContext","getBindingContext","setBindingContext","openBy","getIconAndTextAdditionalInfoBindingExpression","orBindings","getIconAndTextContent","Draft","LockedBy","UnsavedBy","Unsaved","Flagged","visibility","TextOnly","isDraftIndicatorVisible","additionalInfo","ariaLabelledBy","getIconOnlyContent","Locked","IsEditable","getContent"],"sources":["DraftIndicator.block-dbg.js"],"mappings":"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","sourceRoot":"draftIndicator"}},{"offset":{"line":5205,"column":0},"map":{"version":3,"names":["FlexibleColumnLayoutActions","defineBuildingBlock","name","namespace","publicNamespace","getTemplate","xml","BuildingBlockBase"],"sourceRoot":"fcl","sources":["FlexibleColumnLayoutActions.ts"],"sourcesContent":["import { BuildingBlockBase, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockRuntime\";\n\n@defineBuildingBlock({ name: \"FlexibleColumnLayoutActions\", namespace: \"sap.fe.macros.fcl\", publicNamespace: \"sap.fe.macros\" })\nexport default class FlexibleColumnLayoutActions extends BuildingBlockBase {\n\tgetTemplate() {\n\t\treturn xml`\n            <m:OverflowToolbarButton\n                id=\"fe::FCLStandardAction::FullScreen\"\n                type=\"Transparent\"\n                icon=\"{fclhelper>/actionButtonsInfo/switchIcon}\"\n                visible=\"{fclhelper>/actionButtonsInfo/switchVisible}\"\n                press=\"._routing.switchFullScreen()\"\n            />\n            <m:OverflowToolbarButton\n                id=\"fe::FCLStandardAction::Close\"\n                type=\"Transparent\"\n                icon=\"sap-icon://decline\"\n                tooltip=\"{sap.fe.i18n>C_COMMON_SAPFE_CLOSE}\"\n                visible=\"{fclhelper>/actionButtonsInfo/closeVisible}\"\n                press=\"._routing.closeColumn()\"\n            />`;\n\t}\n}\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;MAIqBA,2BAA2B,WAD/CC,mBAAmB,CAAC;IAAEC,IAAI,EAAE,6BAA6B;IAAEC,SAAS,EAAE,mBAAmB;IAAEC,eAAe,EAAE;EAAgB,CAAC,CAAC;IAAA;IAAA;MAAA;IAAA;IAAA;IAAA;IAAA,OAE9HC,WAAW,GAAX,uBAAc;MACb,OAAOC,GAAI;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;IACd,CAAC;IAAA;EAAA,EAlBuDC,iBAAiB;EAAA;EAAA;AAAA"}},{"offset":{"line":5253,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlock","BuildingBlockRuntime","_dec","_class","_exports","xml","defineBuildingBlock","BuildingBlockBase","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","FlexibleColumnLayoutActions","name","namespace","publicNamespace","_BuildingBlockBase","apply","this","arguments","_proto","getTemplate"],"sources":["FlexibleColumnLayoutActions-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,2DAAO,CAAC,2CAA4C,mDAAoD,SAAUC,EAAeC,GACtI,aAEA,IAAIC,EAAMC,EACV,IAAIC,EAAW,CAAC,EAChB,IAAIC,EAAMJ,EAAqBI,IAC/B,IAAIC,EAAsBN,EAAcM,oBACxC,IAAIC,EAAoBP,EAAcO,kBACtC,SAASC,EAAeC,EAAUC,GAAcD,EAASE,UAAYC,OAAOC,OAAOH,EAAWC,WAAYF,EAASE,UAAUG,YAAcL,EAAUM,EAAgBN,EAAUC,EAAa,CAC5L,SAASK,EAAgBC,EAAGC,GAAKF,EAAkBH,OAAOM,eAAiBN,OAAOM,eAAeC,OAAS,SAASJ,EAAgBC,EAAGC,GAAKD,EAAEI,UAAYH,EAAG,OAAOD,CAAG,EAAG,OAAOD,EAAgBC,EAAGC,EAAI,CACvM,IAAII,GAA+BnB,EAAOI,EAAoB,CAC5DgB,KAAM,8BACNC,UAAW,oBACXC,gBAAiB,kBACftB,EAAKC,EAAsB,SAAUsB,GACvCjB,EAAea,EAA6BI,GAC5C,SAASJ,IACP,OAAOI,EAAmBC,MAAMC,KAAMC,YAAcD,IACtD,CACAvB,EAAWiB,EACX,IAAIQ,EAASR,EAA4BV,UACzCkB,EAAOC,YAAc,SAASA,IAC5B,OAAOzB,CAAG;;;;;;;;;;;;;;;eAgBZ,EACA,OAAOgB,CACT,CA1B+B,CA0B7Bd,KAAuBJ,GACzBC,EAAWiB,EACX,OAAOjB,CACT,EAAG","sourceRoot":"fcl"}},{"offset":{"line":5273,"column":0},"map":{"version":3,"names":["getControlInFieldWrapper","oControl","isA","oFieldWrapper","aControls","getEditMode","getContentDisplay","getContentEdit","length","undefined","FieldAPI","defineUI5Class","property","type","expectedAnnotations","expectedTypes","event","association","multiple","singularName","xmlEventHandler","handleChange","oEvent","fireChange","value","getValue","isValid","getParameter","onBeforeRendering","oContent","content","addAriaLabelledBy","aAriaLabelledBy","getAriaLabelledBy","i","sId","aAriaLabelledBys","indexOf","enhanceAccessibilityState","_oElement","mAriaProps","oParent","getParent","getAccessibilityInfo","getIdForLabel","collaborationEnabled","getItems","getSelected","addMessage","parameters","msgManager","getMessageManager","path","getBinding","getResolvedPath","oMessage","Message","target","message","processor","getModel","description","persistent","addMessages","getId","removeMessage","id","arr","getMessageModel","getData","result","find","e","removeMessages","sap","ui","getCore","MacroAPI"],"sourceRoot":"field","sources":["FieldAPI.ts"],"sourcesContent":["import type FieldWrapper from \"sap/fe/core/controls/FieldWrapper\";\nimport type { EnhanceWithUI5 } from \"sap/fe/core/helpers/ClassSupport\";\nimport { association, defineUI5Class, event, property, xmlEventHandler } from \"sap/fe/core/helpers/ClassSupport\";\nimport type Button from \"sap/m/Button\";\nimport type CheckBox from \"sap/m/CheckBox\";\nimport type HBox from \"sap/m/HBox\";\nimport type InputBase from \"sap/m/InputBase\";\nimport type UI5Event from \"sap/ui/base/Event\";\nimport type Control from \"sap/ui/core/Control\";\nimport type { MessageType } from \"sap/ui/core/library\";\nimport Message from \"sap/ui/core/message/Message\";\nimport MacroAPI from \"../MacroAPI\";\n\n/**\n * Additional format options for the field.\n *\n * @alias sap.fe.macros.FieldFormatOptions\n * @public\n */\nexport type FieldFormatOptions = {\n\t/**\n\t *  Defines how the field value and associated text will be displayed together.<br/>\n\t *\n\t *  Allowed values are \"Value\", \"Description\", \"ValueDescription\" and \"DescriptionValue\"\n\t *\n\t *  @public\n\t */\n\tdisplayMode: string;\n\t/**\n\t * Defines if and how the field measure will be displayed.<br/>\n\t *\n\t * Allowed values are \"Hidden\" and \"ReadOnly\"\n\t *\n\t *  @public\n\t */\n\tmeasureDisplayMode: string;\n\t/**\n\t * Maximum number of lines for multiline texts in edit mode.<br/>\n\t *\n\t *  @public\n\t */\n\ttextLinesEdit: number;\n\t/**\n\t * Maximum number of lines that multiline texts in edit mode can grow to.<br/>\n\t *\n\t *  @public\n\t */\n\ttextMaxLines: number;\n\t/**\n\t * Maximum number of characters from the beginning of the text field that are shown initially.<br/>\n\t *\n\t *  @public\n\t */\n\ttextMaxCharactersDisplay: number;\n\t/**\n\t * Defines how the full text will be displayed.<br/>\n\t *\n\t * Allowed values are \"InPlace\" and \"Popover\"\n\t *\n\t *  @public\n\t */\n\ttextExpandBehaviorDisplay: string;\n\t/**\n\t * Defines the maximum number of characters for the multiline text value.<br/>\n\t *\n\t * If a multiline text exceeds the maximum number of allowed characters, the counter below the input field displays the exact number.\n\t *\n\t *  @public\n\t */\n\ttextMaxLength: number;\n\t/**\n\t * Defines if the date part of a date time with timezone field should be shown. <br/>\n\t *\n\t * The dateTimeOffset field must have a timezone annotation.\n\t *\n\t * Allowed values are \"true\" and \"false\". The default value is \"true\".\n\t *\n\t *  @public\n\t */\n\tshowDate: string;\n\t/**\n\t * Defines if the time part of a date time with timezone field should be shown. <br/>\n\t *\n\t * The dateTimeOffset field must have a timezone annotation.\n\t *\n\t * Allowed values are \"true\" and \"false\". The default value is \"true\".\n\t *\n\t *  @public\n\t */\n\tshowTime: string;\n\t/**\n\t * Defines if the timezone part of a date time with timezone field should be shown. <br/>\n\t *\n\t * The dateTimeOffset field must have a timezone annotation.\n\t *\n\t * Allowed values are \"true\" and \"false\". The default value is \"true\".\n\t *\n\t *  @public\n\t */\n\tshowTimezone: string;\n};\n\n/**\n * Returns the first visible control in the FieldWrapper.\n *\n * @param oControl FieldWrapper\n * @returns The first visible control\n */\nfunction getControlInFieldWrapper(oControl: Control): Control | undefined {\n\tif (oControl.isA(\"sap.fe.core.controls.FieldWrapper\")) {\n\t\tconst oFieldWrapper = oControl as EnhanceWithUI5<FieldWrapper>;\n\t\tconst aControls = oFieldWrapper.getEditMode() === \"Display\" ? [oFieldWrapper.getContentDisplay()] : oFieldWrapper.getContentEdit();\n\t\tif (aControls.length >= 1) {\n\t\t\treturn aControls.length ? aControls[0] : undefined;\n\t\t}\n\t} else {\n\t\treturn oControl;\n\t}\n\treturn undefined;\n}\n\n/**\n * Building block for creating a field based on the metadata provided by OData V4.\n * <br>\n * Usually, a DataField or DataPoint annotation is expected, but the field can also be used to display a property from the entity type.\n *\n *\n * Usage example:\n * <pre>\n * &lt;macro:Field id=\"MyField\" metaPath=\"MyProperty\" /&gt;\n * </pre>\n *\n * @alias sap.fe.macros.Field\n * @public\n */\n@defineUI5Class(\"sap.fe.macros.field.FieldAPI\")\nclass FieldAPI extends MacroAPI {\n\t/**\n\t * An expression that allows you to control the editable state of the field.\n\t *\n\t * If you do not set any expression, SAP Fiori elements hooks into the standard lifecycle to determine if the page is currently editable.\n\t * Please note that you cannot set a field to editable if it has been defined in the annotation as not editable.\n\t *\n\t * @private\n\t * @deprecated\n\t */\n\t@property({ type: \"boolean\" })\n\teditable!: boolean;\n\n\t/**\n\t * An expression that allows you to control the read-only state of the field.\n\t *\n\t * If you do not set any expression, SAP Fiori elements hooks into the standard lifecycle to determine the current state.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean\" })\n\treadOnly!: boolean;\n\n\t/**\n\t * The identifier of the Field control.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\tid!: string;\n\n\t/**\n\t * Defines the relative path of the property in the metamodel, based on the current contextPath.\n\t *\n\t * @public\n\t */\n\t@property({\n\t\ttype: \"string\",\n\t\texpectedAnnotations: [],\n\t\texpectedTypes: [\"EntitySet\", \"EntityType\", \"Singleton\", \"NavigationProperty\", \"Property\"]\n\t})\n\tmetaPath!: string;\n\n\t/**\n\t * An event containing details is triggered when the value of the field is changed.\n\t *\n\t * @public\n\t */\n\t@event()\n\tchange!: Function;\n\n\t@association({ type: \"sap.ui.core.Control\", multiple: true, singularName: \"ariaLabelledBy\" })\n\tariaLabelledBy!: Control;\n\n\t@property({ type: \"boolean\" })\n\trequired!: boolean;\n\n\t/**\n\t * A set of options that can be configured.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"sap.fe.macros.FieldFormatOptions\" })\n\tformatOptions!: FieldFormatOptions;\n\n\t/**\n\t * Option to add semantic objects to a field.\n\t * Valid options are either a single semantic object, a stringified array of semantic objects\n\t * or a single binding expression returning either a single semantic object or an array of semantic objects\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\tsemanticObject!: string;\n\n\t@property({ type: \"boolean\" })\n\tcollaborationEnabled!: boolean;\n\n\t@property({ type: \"boolean\" })\n\tvisible!: boolean;\n\n\t@xmlEventHandler()\n\thandleChange(oEvent: UI5Event) {\n\t\t(this as any).fireChange({ value: this.getValue(), isValid: oEvent.getParameter(\"valid\") });\n\t}\n\n\tonBeforeRendering() {\n\t\tconst oContent = this.content;\n\t\tif (oContent && oContent.isA<Button>([\"sap.m.Button\"]) && oContent.addAriaLabelledBy) {\n\t\t\tconst aAriaLabelledBy = (this as any).getAriaLabelledBy();\n\n\t\t\tfor (let i = 0; i < aAriaLabelledBy.length; i++) {\n\t\t\t\tconst sId = aAriaLabelledBy[i];\n\t\t\t\tconst aAriaLabelledBys = oContent.getAriaLabelledBy() || [];\n\t\t\t\tif (aAriaLabelledBys.indexOf(sId) === -1) {\n\t\t\t\t\toContent.addAriaLabelledBy(sId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tenhanceAccessibilityState(_oElement: object, mAriaProps: object): object {\n\t\tconst oParent = this.getParent();\n\n\t\tif (oParent && (oParent as any).enhanceAccessibilityState) {\n\t\t\t// use FieldWrapper as control, but aria properties of rendered inner control.\n\t\t\t(oParent as any).enhanceAccessibilityState(this, mAriaProps);\n\t\t}\n\n\t\treturn mAriaProps;\n\t}\n\tgetAccessibilityInfo(): Object {\n\t\tconst oContent = this.content;\n\t\treturn oContent && oContent.getAccessibilityInfo ? oContent.getAccessibilityInfo() : {};\n\t}\n\t/**\n\t * Returns the DOMNode ID to be used for the \"labelFor\" attribute.\n\t *\n\t * We forward the call of this method to the content control.\n\t *\n\t * @returns ID to be used for the <code>labelFor</code>\n\t */\n\tgetIdForLabel(): string {\n\t\tconst oContent = this.content;\n\t\treturn oContent.getIdForLabel();\n\t}\n\t/**\n\t * Retrieves the current value of the field.\n\t *\n\t * @public\n\t * @returns The current value of the field\n\t */\n\tgetValue(): boolean | string {\n\t\tlet oControl = getControlInFieldWrapper(this.content);\n\t\tif (this.collaborationEnabled && oControl?.isA(\"sap.m.HBox\")) {\n\t\t\toControl = (oControl as HBox).getItems()[0];\n\t\t}\n\t\tif (oControl?.isA(\"sap.m.CheckBox\")) {\n\t\t\treturn (oControl as CheckBox).getSelected();\n\t\t} else if (oControl?.isA(\"sap.m.InputBase\")) {\n\t\t\treturn (oControl as InputBase).getValue();\n\t\t} else if (oControl?.isA(\"sap.ui.mdc.Field\")) {\n\t\t\treturn (oControl as any).getValue(); // FieldWrapper\n\t\t} else {\n\t\t\tthrow \"getting value not yet implemented for this field type\";\n\t\t}\n\t}\n\n\t/**\n\t * Adds a message to the field.\n\t *\n\t * @param [parameters] The parameters to create message\n\t * @param parameters.type Type of the message\n\t * @param parameters.message Message text\n\t * @param parameters.description Message description\n\t * @param parameters.persistent True if the message is persistent\n\t * @returns The id of the message\n\t * @public\n\t */\n\taddMessage(parameters: { type?: MessageType; message?: string; description?: string; persistent?: boolean }) {\n\t\tconst msgManager = this.getMessageManager();\n\t\tconst oControl = getControlInFieldWrapper(this.content);\n\n\t\tlet path; //target for oMessage\n\t\tif (oControl?.isA(\"sap.m.CheckBox\")) {\n\t\t\tpath = (oControl as CheckBox).getBinding(\"selected\")?.getResolvedPath();\n\t\t} else if (oControl?.isA(\"sap.m.InputBase\")) {\n\t\t\tpath = (oControl as InputBase).getBinding(\"value\")?.getResolvedPath();\n\t\t} else if (oControl?.isA(\"sap.ui.mdc.Field\")) {\n\t\t\tpath = (oControl as any).getBinding(\"value\").getResolvedPath();\n\t\t}\n\n\t\tconst oMessage = new Message({\n\t\t\ttarget: path,\n\t\t\ttype: parameters.type,\n\t\t\tmessage: parameters.message,\n\t\t\tprocessor: oControl?.getModel(),\n\t\t\tdescription: parameters.description,\n\t\t\tpersistent: parameters.persistent\n\t\t});\n\n\t\tmsgManager.addMessages(oMessage);\n\t\treturn oMessage.getId();\n\t}\n\n\t/**\n\t * Removes a message from the field.\n\t *\n\t * @param id The id of the message\n\t * @public\n\t */\n\tremoveMessage(id: string) {\n\t\tconst msgManager = this.getMessageManager();\n\t\tconst arr = msgManager.getMessageModel().getData();\n\t\tconst result = arr.find((e: any) => e.id === id);\n\t\tif (result) {\n\t\t\tmsgManager.removeMessages(result);\n\t\t}\n\t}\n\n\tgetMessageManager() {\n\t\treturn sap.ui.getCore().getMessageManager();\n\t}\n}\n\nexport default FieldAPI;\n"],"mappings":"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"}},{"offset":{"line":5548,"column":0},"map":{"version":3,"names":["sap","ui","define","ClassSupport","Message","MacroAPI","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","xmlEventHandler","property","event","defineUI5Class","association","_initializerDefineProperty","target","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","getControlInFieldWrapper","oControl","isA","oFieldWrapper","aControls","getEditMode","getContentDisplay","getContentEdit","length","FieldAPI","type","expectedAnnotations","expectedTypes","multiple","singularName","_MacroAPI","_this","_len","arguments","args","Array","_key","this","_proto","handleChange","oEvent","fireChange","getValue","isValid","getParameter","onBeforeRendering","oContent","content","addAriaLabelledBy","aAriaLabelledBy","getAriaLabelledBy","i","sId","aAriaLabelledBys","indexOf","enhanceAccessibilityState","_oElement","mAriaProps","oParent","getParent","getAccessibilityInfo","getIdForLabel","_oControl","_oControl2","_oControl3","_oControl4","collaborationEnabled","getItems","getSelected","addMessage","parameters","msgManager","getMessageManager","path","_getBinding","getBinding","getResolvedPath","_getBinding2","oMessage","message","processor","getModel","description","persistent","addMessages","getId","removeMessage","id","arr","getMessageModel","getData","result","find","e","removeMessages","getCore","getOwnPropertyDescriptor"],"sources":["FieldAPI-dbg.js"],"mappings":"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","sourceRoot":"field"}},{"offset":{"line":5553,"column":0},"map":{"version":3,"names":["Object","assign","FieldBaseDelegate","initializeTypeFromBinding","_payload","type","value","result","isA","Array","isArray","length","undefined","formatValue","bTypeInitialized","mCustomUnits","initializeInternalUnitType","typeInitialization","enhanceValueForUnit","values","push","getDefaultValueHelpDelegate","name","payload","getTypeUtil","TypeUtil","_getValueListParameter","valueListInfo","propertyName","Parameters","filter","entry","LocalDataProperty","$PropertyPath","_getFilter","valueList","valueHelpProperty","vKey","valuehelpPayload","filters","parameters","parameter","$Type","ValueListProperty","Filter","path","operator","value1","isActionParameterDialog","apdFieldPath","apdField","sap","ui","getCore","byId","apdFieldValue","getValue","getItemForValue","fieldHelp","config","getDescription","valueHelp","key","_conditionIn","_conditionOut","bindingContext","_ConditionModel","_conditionModelName","_conditionPayload","control","_type","getDisplay","includes","retrieveTextFromValueList","isFilterField","dataModel","getModel","metaModel","getMetaModel","CommonUtils","getAppComponent","getPayload","propertyPath","textProperty","requestValueListInfo","getObject","keys","valueHelpParameters","Error","valueListModel","$model","textAnnotation","CollectionPath","$Path","listBinding","bindList","$select","contexts","requestContexts","message","Log","error","status","String","msg"],"sourceRoot":"field","sources":["FieldBaseDelegate.ts"],"sourcesContent":["import { CommonAnnotationTypes } from \"@sap-ux/vocabularies-types/vocabularies/Common\";\nimport Log from \"sap/base/Log\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport TypeUtil from \"sap/fe/core/type/TypeUtil\";\nimport type {\n\tAnnotationValueListType,\n\tAnnotationValueListTypeByQualifier,\n\tValueHelpPayload\n} from \"sap/fe/macros/internal/valuehelp/ValueListHelper\";\nimport type Control from \"sap/ui/core/Control\";\nimport type ConditionModel from \"sap/ui/mdc/condition/ConditionModel\";\nimport type Field from \"sap/ui/mdc/Field\";\nimport type FieldBase from \"sap/ui/mdc/field/FieldBase\";\nimport FieldBaseDelegate from \"sap/ui/mdc/field/FieldBaseDelegate\";\nimport type FieldHelpBase from \"sap/ui/mdc/field/FieldHelpBase\";\nimport type ValueHelp from \"sap/ui/mdc/ValueHelp\";\nimport Filter from \"sap/ui/model/Filter\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport type ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\nimport type SimpleType from \"sap/ui/model/SimpleType\";\n\ntype FieldPayload = {\n\tretrieveTextFromValueList?: boolean;\n\tisFilterField?: boolean;\n};\n\nexport type Value = string | Date | number | boolean | undefined | null;\n\nexport type TypeInitialization = {\n\tbTypeInitialized?: boolean;\n\tmCustomUnits?: string;\n};\n\nexport type Config = {\n\tvalue: Value;\n\tparsedValue: Value;\n\tbindingContext: Context;\n\tcheckKey: boolean;\n\tcheckDescription: boolean;\n\tconditionModel?: ConditionModel;\n\tconditionModelName?: string;\n\tcontrol?: object;\n};\n\nexport default Object.assign({}, FieldBaseDelegate, {\n\t/**\n\t * If the <code>Field</code> control is used, the used data type might come from the binding.\n\t * In V4-unit or currency case it might need to be formatted once.\n\t * To initialize the internal type later on, the currencies must be returned.\n\t *\n\t * @param _payload Payload for delegate\n\t * @param type Type from binding\n\t * @param value Given value\n\t * @returns Information needed to initialize internal type (needs to set bTypeInitialized to true if initialized)\n\t */\n\tinitializeTypeFromBinding: function (_payload: FieldPayload, type: SimpleType | undefined, value: Value | Value[]) {\n\t\t// V4 Unit and Currency types have a map with valid units and create an internal customizing for it.\n\t\t// The Field needs to keep this customizing logic when creating the internal type.\n\t\t// (As external RAW binding is used there is no formatting on parsing.)\n\n\t\tconst result: TypeInitialization = {};\n\t\tif (\n\t\t\ttype &&\n\t\t\ttype.isA([\"sap.ui.model.odata.type.Unit\", \"sap.ui.model.odata.type.Currency\"]) &&\n\t\t\tArray.isArray(value) &&\n\t\t\tvalue.length > 2 &&\n\t\t\tvalue[2] !== undefined\n\t\t) {\n\t\t\t// format once to set internal customizing. Allow null as valid values for custom units\n\t\t\ttype.formatValue(value, \"string\");\n\t\t\tresult.bTypeInitialized = true;\n\t\t\tresult.mCustomUnits = value[2] as string; // TODO: find a better way to provide custom units to internal type\n\t\t}\n\n\t\treturn result;\n\t},\n\n\t/**\n\t * This function initializes the unit type.\n\t * If the <code>Field</code> control is used, the used data type might come from the binding.\n\t * If the type is a V4 unit or currency, it might need to be formatted once.\n\t *\n\t * @param _payload Payload for delegate\n\t * @param type Type from binding\n\t * @param typeInitialization Information needed to initialize internal type\n\t */\n\tinitializeInternalUnitType: function (_payload: FieldPayload, type: SimpleType, typeInitialization?: TypeInitialization) {\n\t\tif (typeInitialization?.mCustomUnits !== undefined) {\n\t\t\t// if already initialized initialize new type too.\n\t\t\ttype.formatValue([null, null, typeInitialization.mCustomUnits], \"string\");\n\t\t}\n\t},\n\n\t/**\n\t * This function enhances the value with unit or currency information if needed by the data type.\n\t *\n\t * @param _payload Payload for delegate\n\t * @param  values Values\n\t * @param  typeInitialization Information needed to initialize internal type\n\t * @returns Values\n\t */\n\tenhanceValueForUnit: function (_payload: FieldPayload, values: Value[], typeInitialization?: TypeInitialization) {\n\t\tif (typeInitialization?.bTypeInitialized === true && values.length === 2) {\n\t\t\tvalues.push(typeInitialization.mCustomUnits);\n\t\t\treturn values;\n\t\t}\n\n\t\treturn undefined;\n\t},\n\n\t/**\n\t * This function returns which <code>ValueHelpDelegate</code> is used\n\t * if a default field help (for example, for defining conditions in </code>FilterField</code>)\n\t * is created.\n\t *\n\t * @param _payload Payload for delegate\n\t * @returns Delegate object with name and payload\n\t */\n\tgetDefaultValueHelpDelegate: function (_payload: FieldPayload) {\n\t\treturn { name: \"sap/ui/mdc/odata/v4/ValueHelpDelegate\", payload: {} };\n\t},\n\n\tgetTypeUtil: function (_payload: FieldPayload) {\n\t\treturn TypeUtil;\n\t},\n\n\t/**\n\t * Determine all parameters in a value help that use a specific property.\n\t *\n\t * @param valueListInfo Value list info\n\t * @param propertyName Name of the property\n\t * @returns List of all found parameters\n\t */\n\t_getValueListParameter: function (valueListInfo: AnnotationValueListType, propertyName: string) {\n\t\t//determine path to value list property\n\t\treturn valueListInfo.Parameters.filter(function (entry) {\n\t\t\tif (entry.LocalDataProperty) {\n\t\t\t\treturn entry.LocalDataProperty.$PropertyPath === propertyName;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t},\n\t/**\n\t * Build filters for each in-parameter.\n\t *\n\t * @param valueList Value list info\n\t * @param propertyName Name of the property\n\t * @param valueHelpProperty Name of the value help property\n\t * @param vKey Value of the property\n\t * @param valuehelpPayload Payload of the value help\n\t * @returns List of filters\n\t */\n\t_getFilter: function (\n\t\tvalueList: AnnotationValueListType,\n\t\tpropertyName: string,\n\t\tvalueHelpProperty: string,\n\t\tvKey: string,\n\t\tvaluehelpPayload: ValueHelpPayload\n\t) {\n\t\tconst filters = [];\n\t\tconst parameters = valueList.Parameters.filter(function (parameter) {\n\t\t\treturn (\n\t\t\t\tparameter.$Type === CommonAnnotationTypes.ValueListParameterIn ||\n\t\t\t\tparameter.$Type === CommonAnnotationTypes.ValueListParameterInOut ||\n\t\t\t\t(parameter.LocalDataProperty?.$PropertyPath === propertyName && parameter.ValueListProperty === valueHelpProperty)\n\t\t\t);\n\t\t});\n\t\tfor (const parameter of parameters) {\n\t\t\tif (parameter.LocalDataProperty?.$PropertyPath === propertyName) {\n\t\t\t\tfilters.push(new Filter({ path: valueHelpProperty, operator: \"EQ\", value1: vKey }));\n\t\t\t} else if (\n\t\t\t\t(parameter.$Type === CommonAnnotationTypes.ValueListParameterIn ||\n\t\t\t\t\tparameter.$Type === CommonAnnotationTypes.ValueListParameterInOut) &&\n\t\t\t\tvaluehelpPayload?.isActionParameterDialog\n\t\t\t) {\n\t\t\t\tconst apdFieldPath = `APD_::${parameter.LocalDataProperty?.$PropertyPath}`;\n\t\t\t\tconst apdField = sap.ui.getCore().byId(apdFieldPath) as Field;\n\t\t\t\tconst apdFieldValue = apdField?.getValue();\n\t\t\t\tif (apdFieldValue !== null) {\n\t\t\t\t\tfilters.push(new Filter({ path: parameter.ValueListProperty, operator: \"EQ\", value1: apdFieldValue }));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn filters;\n\t},\n\tgetItemForValue: function (payload: FieldPayload, fieldHelp: FieldHelpBase, config: Config) {\n\t\t//BCP: 2270162887 . The MDC field should not try to get the item when the field is emptied\n\t\tif (config.value !== \"\") {\n\t\t\treturn FieldBaseDelegate.getItemForValue(payload, fieldHelp, config);\n\t\t}\n\n\t\treturn undefined;\n\t},\n\n\t/**\n\t * Determines the description for a given key.\n\t *\n\t * @param payload Payload for delegate\n\t * @param valueHelp Field help assigned to the <code>Field</code> or <code>FilterField</code> control\n\t * @param key Key value of the description\n\t * @param _conditionIn In parameters for the key (no longer supported)\n\t * @param _conditionOut Out parameters for the key (no longer supported)\n\t * @param bindingContext BindingContext <code>BindingContext</code> of the checked field. Inside a table, the <code>FieldHelp</code> element can be connected to a different row\n\t * @param _ConditionModel ConditionModel</code>, if bound to one\n\t * @param _conditionModelName Name of the <code>ConditionModel</code>, if bound to one\n\t * @param _conditionPayload Additional context information for this key\n\t * @param control Instance of the calling control\n\t * @param _type Type of the value\n\t * @returns Description for the key or object containing a description, key and payload. If the description is not available right away (it must be requested), a <code>Promise</code> is returned\n\t */\n\tgetDescription: async function (\n\t\tpayload: FieldPayload | undefined,\n\t\tvalueHelp: ValueHelp,\n\t\tkey: string,\n\t\t_conditionIn: object,\n\t\t_conditionOut: object,\n\t\tbindingContext: Context,\n\t\t_ConditionModel: ConditionModel,\n\t\t_conditionModelName: string,\n\t\t_conditionPayload: object,\n\t\tcontrol: Control,\n\t\t_type: unknown\n\t) {\n\t\t//JIRA: FIORITECHP1-22022 . The MDC field should not  tries to determine description with the initial GET of the data.\n\t\t// it should rely on the data we already received from the backend\n\t\t// But The getDescription function is also called in the FilterField case if a variant is loaded.\n\t\t// As the description text could be language dependent it is not stored in the variant, so it needs to be read on rendering.\n\n\t\t/* Retrieve text from value help, if value was set by out-parameter (BCP 2270160633) */\n\t\tif (!payload && (control as FieldBase)?.getDisplay().includes(\"Description\")) {\n\t\t\tpayload = {\n\t\t\t\tretrieveTextFromValueList: true\n\t\t\t};\n\t\t}\n\n\t\tif (payload?.retrieveTextFromValueList === true || payload?.isFilterField === true) {\n\t\t\tconst dataModel = valueHelp.getModel() as ODataModel | undefined;\n\t\t\tconst metaModel = dataModel\n\t\t\t\t? dataModel.getMetaModel()\n\t\t\t\t: (CommonUtils.getAppComponent(valueHelp as unknown as Control)\n\t\t\t\t\t\t.getModel()\n\t\t\t\t\t\t.getMetaModel() as ODataMetaModel);\n\t\t\tconst valuehelpPayload = valueHelp.getPayload() as ValueHelpPayload;\n\t\t\tconst propertyPath: string = valuehelpPayload?.propertyPath;\n\t\t\tlet textProperty: string;\n\n\t\t\ttry {\n\t\t\t\t/* Request value help metadata */\n\t\t\t\tconst valueListInfo = (await metaModel.requestValueListInfo(\n\t\t\t\t\tpropertyPath,\n\t\t\t\t\ttrue,\n\t\t\t\t\tbindingContext\n\t\t\t\t)) as AnnotationValueListTypeByQualifier;\n\n\t\t\t\tconst propertyName = metaModel.getObject(`${propertyPath}@sapui.name`) as string;\n\t\t\t\t// take the first value list annotation - alternatively take the one without qualifier or the first one\n\t\t\t\tconst valueList = valueListInfo[Object.keys(valueListInfo)[0]];\n\t\t\t\tconst valueHelpParameters = this._getValueListParameter(valueList, propertyName);\n\t\t\t\tconst valueHelpProperty = valueHelpParameters?.[0]?.ValueListProperty;\n\t\t\t\tif (!valueHelpProperty) {\n\t\t\t\t\tthrow Error(`Inconsistent value help annotation for ${propertyName}`);\n\t\t\t\t}\n\t\t\t\t// get text annotation for this value list property\n\t\t\t\tconst valueListModel = valueList.$model;\n\t\t\t\tconst textAnnotation = valueListModel\n\t\t\t\t\t.getMetaModel()\n\t\t\t\t\t.getObject(`/${valueList.CollectionPath}/${valueHelpProperty}@com.sap.vocabularies.Common.v1.Text`);\n\t\t\t\tif (textAnnotation && textAnnotation.$Path) {\n\t\t\t\t\ttextProperty = textAnnotation.$Path;\n\t\t\t\t\t/* Build the filter for each in-parameter */\n\t\t\t\t\tconst filters = this._getFilter(valueList, propertyName, valueHelpProperty, key, valuehelpPayload);\n\t\t\t\t\tconst listBinding = valueListModel.bindList(`/${valueList.CollectionPath}`, undefined, undefined, filters, {\n\t\t\t\t\t\t$select: textProperty\n\t\t\t\t\t});\n\t\t\t\t\t/* Request description for given key from value list entity */\n\t\t\t\t\tconst contexts = await listBinding.requestContexts(0, 2);\n\t\t\t\t\treturn contexts.length ? contexts[0].getObject(textProperty) : undefined;\n\n\t\t\t\t} else {\n\t\t\t\t\tconst message = `Text Annotation for ${valueHelpProperty} is not defined`;\n\t\t\t\t\tLog.error(message);\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\n\t\t\t} catch (error) {\n\t\t\t\tconst status = error ? (error as XMLHttpRequest).status : undefined;\n\t\t\t\tconst message = error instanceof Error ? error.message : String(error);\n\t\t\t\tconst msg = status === 404 ? `Metadata not found (${status}) for value help of property ${propertyPath}` : message;\n\t\t\t\tLog.error(msg);\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n});\n"],"mappings":"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"}},{"offset":{"line":5773,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","CommonUtils","TypeUtil","FieldBaseDelegate","Filter","Object","assign","initializeTypeFromBinding","_payload","type","value","result","isA","Array","isArray","length","undefined","formatValue","bTypeInitialized","mCustomUnits","initializeInternalUnitType","typeInitialization","enhanceValueForUnit","values","push","getDefaultValueHelpDelegate","name","payload","getTypeUtil","_getValueListParameter","valueListInfo","propertyName","Parameters","filter","entry","LocalDataProperty","$PropertyPath","_getFilter","valueList","valueHelpProperty","vKey","valuehelpPayload","filters","parameters","parameter","_parameter$LocalDataP","$Type","ValueListProperty","_parameter$LocalDataP2","path","operator","value1","isActionParameterDialog","_parameter$LocalDataP3","apdFieldPath","apdField","getCore","byId","apdFieldValue","getValue","getItemForValue","fieldHelp","config","getDescription","async","valueHelp","key","_conditionIn","_conditionOut","bindingContext","_ConditionModel","_conditionModelName","_conditionPayload","control","_type","_payload2","_payload3","getDisplay","includes","retrieveTextFromValueList","isFilterField","dataModel","getModel","metaModel","getMetaModel","getAppComponent","getPayload","propertyPath","textProperty","_valueHelpParameters$","requestValueListInfo","getObject","keys","valueHelpParameters","this","Error","valueListModel","$model","textAnnotation","CollectionPath","$Path","listBinding","bindList","$select","contexts","requestContexts","message","error","status","String","msg"],"sources":["FieldBaseDelegate-dbg.js"],"mappings":"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","sourceRoot":"field"}},{"offset":{"line":5778,"column":0},"map":{"version":3,"names":["ISOCurrency","Unit","_generateSideEffectsMap","oInterface","oMetaModel","getModel","oFieldSettings","getSetting","oSideEffects","sideEffects","SideEffectsHelper","generateSideEffectsMapFromMetaModel","FieldHelper","displayMode","oPropertyAnnotations","oCollectionAnnotations","oTextAnnotation","oTextArrangementAnnotation","$EnumMember","buildExpressionForTextValue","sPropertyPath","oDataField","context","sPath","getPath","oTextAnnotationContext","createBindingContext","getProperty","sTextExpression","AnnotationHelper","value","undefined","sExpression","getNavigationPath","indexOf","replace","substr","length","buildTargetPathFromDataModelObjectPath","oDataModelObjectPath","sSartEntitySet","startingEntitySet","name","aNavigationProperties","navigationProperties","i","hasSemanticObjectTargets","oPropertyDataModelObjectPath","oPropertyDefinition","isProperty","targetObject","$target","sSemanticObject","annotations","Common","SemanticObject","aSemanticObjectUnavailableActions","SemanticObjectUnavailableActions","sPropertyLocationPath","sBindingExpression","path","compileExpression","pathInModel","valueOf","sAlternatePath","sBindingPath","getStateDependingOnSemanticObjectTargets","isNotAlwaysHidden","oDetails","oContext","isAlwaysHidden","Value","$Path","getObject","isDraftIndicatorVisibleInFieldGroup","column","formatOptions","fieldGroupDraftIndicatorPropertyPath","fieldGroupName","isRequired","oFieldControl","sEditMode","ManagedObject","bindingParser","getActionParameterVisibility","oParam","$If","oNegParam","propertyName","vProperty","sPropertyName","$PropertyPath","sContextPath","getFieldGroupIds","getInterface","then","sOwnerEntityType","aFieldGroupIds","getSideEffectsOnEntityAndProperty","sFieldGroupIds","reduce","sResult","sId","bIsNavigationPath","lastIndexOf","concat","fieldControl","oModel","oFieldControlContext","hasOwnProperty","valueHelpProperty","oPropertyContext","bInFilterField","oContent","sAnnoPath","sAnnotation","sUnitOrCurrencyPath","valueHelpPropertyForFilterField","getIDForFieldValueHelp","sFlexId","sIdPrefix","sOriginalPropertyName","sProperty","generate","getFieldHelpPropertyForFilterField","propertyContext","oProperty","sPropertyType","sVhIdPrefix","sValueHelpPropertyName","bHasValueListWithFixedValues","bUseSemanticDateRange","bSemanticDateRange","CommonHelper","getLocationForPropertyPath","oFilterRestrictions","CommonUtils","getFilterRestrictionsByPath","FilterAllowedExpressions","getSemanticKeyTitle","sPropertyTextValue","sPropertyValue","sDataField","oTextArrangement","sSemanticKeyStyle","oDraftRoot","sNewObject","ResourceModel","getText","sUnnamedObject","sNewObjectExpression","sUnnnamedObjectExpression","sSemanticKeyTitleExpression","addNewObjectUnNamedObjectExpression","sValue","buildExpressionForSemantickKeyTitle","bIsExpressionBinding","sTextArrangement","getObjectIdentifierText","sPropertyValueBinding","sDataFieldName","getSemanticObjectsList","propertyAnnotations","aSemanticObjects","key","semanticObjectValue","push","oSemanticObjectsModel","JSONModel","$$valueAsPromise","getSemanticObjectsQualifiers","qualifiersAnnotations","findObject","qualifier","find","object","annotationContent","annotation","split","qualifierObject","filter","oQualifier","oQualifiersModel","computeSemanticLinkModelContextChange","hasSemanticObjectsWithPath","sPathToProperty","bSemanticObjectHasAPath","isSemanticKeyHasFieldGroupColumn","isFieldGroupColumn","computeFieldBaseDelegate","delegateName","retrieveTextFromValueList","JSON","stringify","payload","_getPrimaryIntents","aSemanticObjectsList","aPromises","oUshellContainer","sap","ushell","Container","oService","getService","forEach","semObject","getPrimaryIntent","Promise","all","aSemObjectPrimaryAction","catch","oError","Log","error","_SemanticObjectsHasPrimaryAction","oSemantics","aSemanticObjectsPrimaryActions","_fnIsSemanticObjectActionUnavailable","_oSemantics","_oPrimaryAction","_index","unavailableActionsIndex","semanticObjectUnavailableActions","actions","intent","semanticPrimaryActions","oPrimaryAction","semanticObjects","mainSemanticObject","sCurrentHash","getHash","index","semanticObject","checkPrimaryActions","bGetTitleLink","titleLink","hasTitleLink","_getTitleLinkWithParameters","_oSemanticObjectModel","_linkIntent","titlelink","getPrimaryAction","primaryIntentAction","operators","sSettings","contextPath","propertyType","$Type","getOperatorsForGuidProperty","slice","isTableBoundToNavigation","isNavigationPath","navigationPath","propertyPath","getOperatorsForProperty","ModelHelper","getEntitySetPath","toString","getOperatorsForDateProperty","getPropertyContextForQuickView","oDataFieldContext","endsWith","getPropertyPathForQuickView","getDataFieldDefault","oDataFieldDefault","isDataFieldActionButtonVisible","oThis","bIsBound","oActionContext","getPressEventForDataFieldActionButton","sInvocationGrouping","InvocationGrouping","bIsNavigable","navigateAfterAction","entities","entitySet","entitySetName","oParams","contexts","invocationGrouping","addSingleQuotes","model","label","Label","isNavigable","generateFunction","Action","objectToString","isNumericDataType","sDataFieldType","_sDataFieldType","aNumericDataTypes","isDateOrTimeDataType","aDateTimeDataTypes","isDateTimeDataType","aDateDataTypes","isDateDataType","isTimeDataType","getUnderlyingPropertyDataType","oAnnotations","sEntityPath","sType","sTextAnnotation","sTextArrangementAnnotation","getColumnAlignment","oTable","collection","Inline","IconUrl","aSemanticKeys","bIsSemanticKey","every","oKey","getDataFieldAlignment","getPropertyAlignment","oFormatOptions","oComputedEditMode","sDefaultAlignment","sTextAlignment","textAlignMode","getAlignmentExpression","sDataFieldPath","Target","$AnnotationPath","oFieldGroup","Data","getTypeAlignment","fullyQualifiedName","isDataFieldActionButtonEnabled","sActionContextFormat","getLabelTextForDataField","oEntitySetModel","oPropertyPath","sPropertyPathBuildExpression","sUiName","sPropertyFullPath","sDisplayFormat","setMetaModel","computeLabelText","sDataFieldLabel","sDataFieldTargetTitle","sDataFieldTargetLabel","sDataFieldValueLabel","sDataFieldTargetValueLabel","buildExpressionForAlignItems","sVisualization","fieldVisualizationBindingExpression","constant","progressVisualizationBindingExpression","ratingVisualizationBindingExpression","ifElse","or","equal","UI","IsEditable","hasValueHelpAnnotation","getAPDialogDisplayFormat","oAnnotation","$Name","oActionParameterAnnotations","oValueHelpAnnotation","getValueListPropertyName","oValueList","oValueListParameter","Parameters","oParameter","LocalDataProperty","ValueListProperty","sValueListPropertyName","computeDisplayMode","CollectionPath","requestValueListInfo","oValueListInfo","$model","getMetaModel","getActionParameterDialogFieldHelp","oActionParameter","sSapUIName","sParamName","getValueHelpDelegate","isBound","entityTypePath","sapUIName","paramName","delegateConfiguration","ValueListHelper","getPropertyPath","UnboundAction","EntityTypePath","Property","qualifiers","valueHelpQualifier","isActionParameterDialog","getValueHelpDelegateForNonComputedVisibleKeyField","_getEntitySetFromMultiLevel","sSourceEntity","iStart","iDiff","aNavParts","Boolean","sPart","getPropertyCollection","oContextObject","aMainEntityParts","sMainEntity","sFieldSourceEntity","iAnnoIndex","sInnerPath","substring","getUnitOrCurrency","oPropertyAnnotationsObject","sAnnotationPath","hasStaticUnitOrCurrency","getStaticUnitOrCurrency","measureDisplayMode","unit","dateFormat","DateFormat","getDateInstance","localeData","oLocaleData","mData","units","short","displayName","getEmptyIndicatorTrigger","bActive","sBinding","sFullTextBinding","getBindingInfoForTextArrangement","oDataFieldTextArrangement","semanticKeyFormat","vRaw","arguments","groupingEnabled","format","getIsMediaContentTypeNullExpr","sOperator","getPathForIconSource","getFilenameExpr","sFilename","sNoFilenameText","calculateMBfromByte","iByte","toFixed","getDownloadUrl","getMarginClass","compactSemanticKey","getRequired","immutableKey","target","requiredProperties","targetRequiredExpression","isRequiredExpression","isFieldPartOfForm","dataFieldCollection","dataFieldObjectPath","connectedDataFieldKey","KeyHelper","generateKeyFromDataField","isFieldFound","field","requiresIContext"],"sourceRoot":"field","sources":["FieldHelper.ts"],"sourcesContent":["import type { Property } from \"@sap-ux/vocabularies-types\";\nimport Log from \"sap/base/Log\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type { FormElement } from \"sap/fe/core/converters/controls/Common/Form\";\nimport { UI } from \"sap/fe/core/converters/helpers/BindingHelper\";\nimport { KeyHelper } from \"sap/fe/core/converters/helpers/Key\";\nimport type { BindingToolkitExpression } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { compileExpression, constant, equal, ifElse, or, pathInModel } from \"sap/fe/core/helpers/BindingToolkit\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport SideEffectsHelper from \"sap/fe/core/helpers/SideEffectsHelper\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { isRequiredExpression } from \"sap/fe/core/templating/FieldControlHelper\";\nimport { isProperty } from \"sap/fe/core/templating/PropertyHelper\";\nimport { getAlignmentExpression } from \"sap/fe/core/templating/UIFormatters\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport type { ValueHelpPayload } from \"sap/fe/macros/internal/valuehelp/ValueListHelper\";\nimport ValueListHelper from \"sap/fe/macros/internal/valuehelp/ValueListHelper\";\nimport ResourceModel from \"sap/fe/macros/ResourceModel\";\nimport ManagedObject from \"sap/ui/base/ManagedObject\";\nimport DateFormat from \"sap/ui/core/format/DateFormat\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport AnnotationHelper from \"sap/ui/model/odata/v4/AnnotationHelper\";\n\nimport type BaseContext from \"sap/ui/model/Context\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\n\nconst ISOCurrency = \"@Org.OData.Measures.V1.ISOCurrency\",\n\tUnit = \"@Org.OData.Measures.V1.Unit\";\n\n/**\n * What does the map look like?\n *    {\n *  \t'namespace.of.entityType' : [\n * \t\t\t[namespace.of.entityType1#Qualifier,namespace.of.entityType2#Qualifier], --> Search For: mappingSourceEntities\n * \t\t\t{\n * \t\t\t\t'property' : [namespace.of.entityType3#Qualifier,namespace.of.entityType4#Qualifier] --> Search For: mappingSourceProperties\n * \t\t\t}\n * \t}.\n *\n * @param oInterface Interface instance\n * @returns Promise resolved when the map is ready and provides the map\n */\nasync function _generateSideEffectsMap(oInterface: any) {\n\tconst oMetaModel = oInterface.getModel();\n\tconst oFieldSettings = oInterface.getSetting(\"sap.fe.macros.internal.Field\");\n\tconst oSideEffects = oFieldSettings.sideEffects;\n\n\t// Generate map once\n\tif (oSideEffects) {\n\t\treturn oSideEffects;\n\t}\n\n\treturn SideEffectsHelper.generateSideEffectsMapFromMetaModel(oMetaModel);\n}\n\nconst FieldHelper = {\n\t/**\n\t * Determine how to show the value by analyzing Text and TextArrangement Annotations.\n\t *\n\t * @function\n\t * @name sap.fe.macros.field.FieldHelper#displayMode\n\t * @memberof sap.fe.macros.field.FieldHelper\n\t * @static\n\t * @param oPropertyAnnotations The Property annotations\n\t * @param oCollectionAnnotations The EntityType annotations\n\t * @returns The display mode of the field\n\t * @private\n\t * @ui5-restricted\n\t */\n\tdisplayMode: function (oPropertyAnnotations: any, oCollectionAnnotations: any) {\n\t\tconst oTextAnnotation = oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Text\"],\n\t\t\toTextArrangementAnnotation =\n\t\t\t\toTextAnnotation &&\n\t\t\t\t((oPropertyAnnotations &&\n\t\t\t\t\toPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement\"]) ||\n\t\t\t\t\t(oCollectionAnnotations && oCollectionAnnotations[\"@com.sap.vocabularies.UI.v1.TextArrangement\"]));\n\n\t\tif (oTextArrangementAnnotation) {\n\t\t\tif (oTextArrangementAnnotation.$EnumMember === \"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly\") {\n\t\t\t\treturn \"Description\";\n\t\t\t} else if (oTextArrangementAnnotation.$EnumMember === \"com.sap.vocabularies.UI.v1.TextArrangementType/TextLast\") {\n\t\t\t\treturn \"ValueDescription\";\n\t\t\t}\n\t\t\t//Default should be TextFirst if there is a Text annotation and neither TextOnly nor TextLast are set\n\t\t\treturn \"DescriptionValue\";\n\t\t}\n\t\treturn oTextAnnotation ? \"DescriptionValue\" : \"Value\";\n\t},\n\tbuildExpressionForTextValue: function (sPropertyPath: any, oDataField: any) {\n\t\tconst oMetaModel = oDataField.context.getModel();\n\t\tconst sPath = oDataField.context.getPath();\n\t\tconst oTextAnnotationContext = oMetaModel.createBindingContext(`${sPath}@com.sap.vocabularies.Common.v1.Text`);\n\t\tconst oTextAnnotation = oTextAnnotationContext.getProperty();\n\t\tconst sTextExpression = oTextAnnotation ? AnnotationHelper.value(oTextAnnotation, { context: oTextAnnotationContext }) : undefined;\n\t\tlet sExpression: string | undefined = \"\";\n\t\tsPropertyPath = AnnotationHelper.getNavigationPath(sPropertyPath);\n\t\tif (sPropertyPath.indexOf(\"/\") > -1 && sTextExpression) {\n\t\t\tsExpression = sPropertyPath.replace(/[^\\/]*$/, sTextExpression.substr(1, sTextExpression.length - 2));\n\t\t} else {\n\t\t\tsExpression = sTextExpression;\n\t\t}\n\t\tif (sExpression) {\n\t\t\tsExpression = \"{ path : '\" + sExpression.replace(/^\\{+/g, \"\").replace(/\\}+$/g, \"\") + \"', parameters: {'$$noPatch': true}}\";\n\t\t}\n\t\treturn sExpression;\n\t},\n\n\tbuildTargetPathFromDataModelObjectPath: function (oDataModelObjectPath: any) {\n\t\tconst sSartEntitySet = oDataModelObjectPath.startingEntitySet.name;\n\t\tlet sPath = `/${sSartEntitySet}`;\n\t\tconst aNavigationProperties = oDataModelObjectPath.navigationProperties;\n\t\tfor (let i = 0; i < aNavigationProperties.length; i++) {\n\t\t\tsPath += `/${aNavigationProperties[i].name}`;\n\t\t}\n\t\treturn sPath;\n\t},\n\thasSemanticObjectTargets: function (oPropertyDataModelObjectPath: DataModelObjectPath) {\n\t\tconst oPropertyDefinition = isProperty(oPropertyDataModelObjectPath.targetObject)\n\t\t\t? oPropertyDataModelObjectPath.targetObject\n\t\t\t: (oPropertyDataModelObjectPath.targetObject.$target as Property);\n\t\tconst sSemanticObject = oPropertyDefinition.annotations?.Common?.SemanticObject;\n\t\tconst aSemanticObjectUnavailableActions = oPropertyDefinition.annotations?.Common?.SemanticObjectUnavailableActions;\n\t\tconst sPropertyLocationPath = FieldHelper.buildTargetPathFromDataModelObjectPath(oPropertyDataModelObjectPath);\n\t\tconst sPropertyPath = `${sPropertyLocationPath}/${oPropertyDefinition.name}`;\n\t\tlet sBindingExpression;\n\t\tif ((sSemanticObject as any)?.path) {\n\t\t\tsBindingExpression = compileExpression(pathInModel((sSemanticObject as any).path));\n\t\t}\n\t\tif (sPropertyPath && (sBindingExpression || (sSemanticObject?.valueOf() as any)?.length > 0)) {\n\t\t\tconst sAlternatePath = sPropertyPath.replace(/\\//g, \"_\"); //replaceAll(\"/\",\"_\");\n\t\t\tif (!sBindingExpression) {\n\t\t\t\tconst sBindingPath =\n\t\t\t\t\t\"pageInternal>semanticsTargets/\" +\n\t\t\t\t\tsSemanticObject?.valueOf() +\n\t\t\t\t\t\"/\" +\n\t\t\t\t\tsAlternatePath +\n\t\t\t\t\t(!aSemanticObjectUnavailableActions ? \"/HasTargetsNotFiltered\" : \"/HasTargets\");\n\t\t\t\treturn \"{parts:[{path:'\" + sBindingPath + \"'}], formatter:'FieldRuntime.hasTargets'}\";\n\t\t\t} else {\n\t\t\t\t// Semantic Object Name is a path we return undefined\n\t\t\t\t// this will be updated later via modelContextChange\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\tgetStateDependingOnSemanticObjectTargets: function (oPropertyDataModelObjectPath: DataModelObjectPath) {\n\t\tconst oPropertyDefinition = isProperty(oPropertyDataModelObjectPath.targetObject)\n\t\t\t? oPropertyDataModelObjectPath.targetObject\n\t\t\t: (oPropertyDataModelObjectPath.targetObject.$target as Property);\n\t\tconst sSemanticObject = oPropertyDefinition.annotations?.Common?.SemanticObject;\n\t\tconst aSemanticObjectUnavailableActions = oPropertyDefinition.annotations?.Common?.SemanticObjectUnavailableActions;\n\t\tconst sPropertyLocationPath = FieldHelper.buildTargetPathFromDataModelObjectPath(oPropertyDataModelObjectPath);\n\t\tconst sPropertyPath = `${sPropertyLocationPath}/${oPropertyDefinition.name}`;\n\t\tlet sBindingExpression;\n\t\tif ((sSemanticObject as any)?.path) {\n\t\t\tsBindingExpression = compileExpression(pathInModel((sSemanticObject as any).path));\n\t\t}\n\t\tif (sPropertyPath && (sBindingExpression || (sSemanticObject?.valueOf() as any)?.length > 0)) {\n\t\t\tconst sAlternatePath = sPropertyPath.replace(/\\//g, \"_\");\n\t\t\tif (!sBindingExpression) {\n\t\t\t\tconst sBindingPath = `pageInternal>semanticsTargets/${sSemanticObject?.valueOf()}/${sAlternatePath}${\n\t\t\t\t\t!aSemanticObjectUnavailableActions ? \"/HasTargetsNotFiltered\" : \"/HasTargets\"\n\t\t\t\t}`;\n\t\t\t\treturn `{parts:[{path:'${sBindingPath}'}], formatter:'FieldRuntime.getStateDependingOnSemanticObjectTargets'}`;\n\t\t\t} else {\n\t\t\t\treturn \"Information\";\n\t\t\t}\n\t\t} else {\n\t\t\treturn \"None\";\n\t\t}\n\t},\n\tisNotAlwaysHidden: function (oDataField: any, oDetails: any) {\n\t\tconst oContext = oDetails.context;\n\t\tlet isAlwaysHidden: any = false;\n\t\tif (oDataField.Value && oDataField.Value.$Path) {\n\t\t\tisAlwaysHidden = oContext.getObject(\"Value/$Path@com.sap.vocabularies.UI.v1.Hidden\");\n\t\t}\n\t\tif (!isAlwaysHidden || isAlwaysHidden.$Path) {\n\t\t\tisAlwaysHidden = oContext.getObject(\"@com.sap.vocabularies.UI.v1.Hidden\");\n\t\t\tif (!isAlwaysHidden || isAlwaysHidden.$Path) {\n\t\t\t\tisAlwaysHidden = false;\n\t\t\t}\n\t\t}\n\t\treturn !isAlwaysHidden;\n\t},\n\tisDraftIndicatorVisibleInFieldGroup: function (column: any) {\n\t\tif (\n\t\t\tcolumn &&\n\t\t\tcolumn.formatOptions &&\n\t\t\tcolumn.formatOptions.fieldGroupDraftIndicatorPropertyPath &&\n\t\t\tcolumn.formatOptions.fieldGroupName\n\t\t) {\n\t\t\treturn (\n\t\t\t\t\"{parts: [\" +\n\t\t\t\t\"{value: '\" +\n\t\t\t\tcolumn.formatOptions.fieldGroupName +\n\t\t\t\t\"'},\" +\n\t\t\t\t\"{path: 'internal>semanticKeyHasDraftIndicator'} , \" +\n\t\t\t\t\"{path: 'HasDraftEntity', targetType: 'any'}, \" +\n\t\t\t\t\"{path: 'IsActiveEntity', targetType: 'any'}, \" +\n\t\t\t\t\"{path: 'pageInternal>hideDraftInfo', targetType: 'any'}], \" +\n\t\t\t\t\"formatter: 'sap.fe.macros.field.FieldRuntime.isDraftIndicatorVisible'}\"\n\t\t\t);\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\tisRequired: function (oFieldControl: any, sEditMode: any) {\n\t\tif (sEditMode === \"Display\" || sEditMode === \"ReadOnly\" || sEditMode === \"Disabled\") {\n\t\t\treturn false;\n\t\t}\n\t\tif (oFieldControl) {\n\t\t\tif ((ManagedObject as any).bindingParser(oFieldControl)) {\n\t\t\t\treturn \"{= %\" + oFieldControl + \" === 7}\";\n\t\t\t} else {\n\t\t\t\treturn oFieldControl == \"com.sap.vocabularies.Common.v1.FieldControlType/Mandatory\";\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\tgetActionParameterVisibility: function (oParam: any, oContext: any) {\n\t\t// To use the UI.Hidden annotation for controlling visibility the value needs to be negated\n\t\tif (typeof oParam === \"object\") {\n\t\t\tif (oParam && oParam.$If && oParam.$If.length === 3) {\n\t\t\t\t// In case the UI.Hidden contains a dynamic expression we do this\n\t\t\t\t// by just switching the \"then\" and \"else\" part of the erpression\n\t\t\t\t// oParam.$If[0] <== Condition part\n\t\t\t\t// oParam.$If[1] <== Then part\n\t\t\t\t// oParam.$If[2] <== Else part\n\t\t\t\tconst oNegParam: any = { $If: [] };\n\t\t\t\toNegParam.$If[0] = oParam.$If[0];\n\t\t\t\toNegParam.$If[1] = oParam.$If[2];\n\t\t\t\toNegParam.$If[2] = oParam.$If[1];\n\t\t\t\treturn AnnotationHelper.value(oNegParam, oContext);\n\t\t\t} else {\n\t\t\t\treturn \"{= !%{\" + oParam.$Path + \"} }\";\n\t\t\t}\n\t\t} else if (typeof oParam === \"boolean\") {\n\t\t\treturn AnnotationHelper.value(!oParam, oContext);\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t},\n\n\t/**\n\t * Computed annotation that returns vProperty for a string and @sapui.name for an object.\n\t *\n\t * @param vProperty The property\n\t * @param oInterface The interface instance\n\t * @returns The property name\n\t */\n\tpropertyName: function (vProperty: any, oInterface: any) {\n\t\tlet sPropertyName;\n\t\tif (typeof vProperty === \"string\") {\n\t\t\tif (oInterface.context.getPath().indexOf(\"$Path\") > -1 || oInterface.context.getPath().indexOf(\"$PropertyPath\") > -1) {\n\t\t\t\t// We could end up with a pure string property (no $Path), and this is not a real property in that case\n\t\t\t\tsPropertyName = vProperty;\n\t\t\t}\n\t\t} else if (vProperty.$Path || vProperty.$PropertyPath) {\n\t\t\tconst sPath = vProperty.$Path ? \"/$Path\" : \"/$PropertyPath\";\n\t\t\tconst sContextPath = oInterface.context.getPath();\n\t\t\tsPropertyName = oInterface.context.getObject(`${sContextPath + sPath}/$@sapui.name`);\n\t\t} else if (vProperty.Value && vProperty.Value.$Path) {\n\t\t\tsPropertyName = vProperty.Value.$Path;\n\t\t} else {\n\t\t\tsPropertyName = oInterface.context.getObject(\"@sapui.name\");\n\t\t}\n\n\t\treturn sPropertyName;\n\t},\n\n\t/**\n\t * This method getFieldGroupIDs uses a map stored in preprocessing data for the macro Field\n\t * _generateSideEffectsMap generates this map once during templating for the first macro field\n\t * and then reuses it. Map exists only during templating.\n\t * The map is used to set the field group IDs for the macro field.\n\t * A field group ID has the format -- namespace.of.entityType#Qualifier\n\t * where 'namespace.of.entityType' is the target entity type of the side effect annotation\n\t * and 'Qualifier' is the qualififer of the side effect annotation.\n\t * This information is enough to identify the side effect annotation.\n\t *\n\t * @param oContext Context instance\n\t * @param sPropertyPath Property path\n\t * @returns A promise which provides a string of field group IDs separated by a comma\n\t */\n\tgetFieldGroupIds: function (oContext: any, sPropertyPath: string) {\n\t\tif (!sPropertyPath) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst oInterface = oContext.getInterface(0);\n\t\t// generate the mapping for side effects or get the generated map if it is already generated\n\t\treturn _generateSideEffectsMap(oInterface).then(function (oSideEffects: any) {\n\t\t\tconst oFieldSettings = oInterface.getSetting(\"sap.fe.macros.internal.Field\");\n\t\t\toFieldSettings.sideEffects = oSideEffects;\n\t\t\tconst sOwnerEntityType = oContext.getPath(1).substr(1);\n\t\t\tconst aFieldGroupIds = FieldHelper.getSideEffectsOnEntityAndProperty(sPropertyPath, sOwnerEntityType, oSideEffects);\n\t\t\tlet sFieldGroupIds;\n\n\t\t\tif (aFieldGroupIds.length) {\n\t\t\t\tsFieldGroupIds = aFieldGroupIds.reduce(function (sResult: any, sId: any) {\n\t\t\t\t\treturn (sResult && `${sResult},${sId}`) || sId;\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn sFieldGroupIds; //\"ID1,ID2,ID3...\"\n\t\t});\n\t},\n\n\t/**\n\t * Generate map which has data from source entity as well as source property for a given field.\n\t *\n\t * @param sPath\n\t * @param sOwnerEntityType\n\t * @param oSideEffects\n\t * @returns An array of side Effect Ids.\n\t */\n\tgetSideEffectsOnEntityAndProperty: function (sPath: string, sOwnerEntityType: string, oSideEffects: any) {\n\t\tconst bIsNavigationPath = sPath.indexOf(\"/\") > 0;\n\t\tsPath = bIsNavigationPath ? sPath.substr(sPath.lastIndexOf(\"/\") + 1) : sPath;\n\t\t// add to fieldGroupIds, all side effects which mention sPath as source property or sOwnerEntityType as source entity\n\t\treturn (\n\t\t\t(oSideEffects[sOwnerEntityType] && oSideEffects[sOwnerEntityType][0].concat(oSideEffects[sOwnerEntityType][1][sPath] || [])) ||\n\t\t\t[]\n\t\t);\n\t},\n\n\tfieldControl: function (sPropertyPath: any, oInterface: any) {\n\t\tconst oModel = oInterface && oInterface.context.getModel();\n\t\tconst sPath = oInterface && oInterface.context.getPath();\n\t\tconst oFieldControlContext = oModel && oModel.createBindingContext(`${sPath}@com.sap.vocabularies.Common.v1.FieldControl`);\n\t\tconst oFieldControl = oFieldControlContext && oFieldControlContext.getProperty();\n\t\tif (oFieldControl) {\n\t\t\tif (oFieldControl.hasOwnProperty(\"$EnumMember\")) {\n\t\t\t\treturn oFieldControl.$EnumMember;\n\t\t\t} else if (oFieldControl.hasOwnProperty(\"$Path\")) {\n\t\t\t\treturn AnnotationHelper.value(oFieldControl, { context: oFieldControlContext });\n\t\t\t}\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t},\n\n\t/**\n\t * Method to get the value help property from a DataField or a PropertyPath (in case a SelectionField is used)\n\t * Priority from where to get the property value of the field (examples are \"Name\" and \"Supplier\"):\n\t * 1. If oPropertyContext.getObject() has key '$Path', then we take the value at '$Path'.\n\t * 2. Else, value at oPropertyContext.getObject().\n\t * If there is an ISOCurrency or if there are Unit annotations for the field property,\n\t * then the Path at the ISOCurrency or Unit annotations of the field property is considered.\n\t *\n\t * @memberof sap.fe.macros.field.FieldHelper.js\n\t * @param oPropertyContext The context from which value help property need to be extracted.\n\t * @param bInFilterField Whether or not we're in the filter field and should ignore\n\t * @returns The value help property path\n\t */\n\tvalueHelpProperty: function (oPropertyContext: Context, bInFilterField?: boolean) {\n\t\t/* For currency (and later Unit) we need to forward the value help to the annotated field */\n\t\tconst sContextPath = oPropertyContext.getPath();\n\t\tconst oContent = oPropertyContext.getObject() || {};\n\t\tlet sPath = oContent.$Path ? `${sContextPath}/$Path` : sContextPath;\n\t\tconst sAnnoPath = `${sPath}@`;\n\t\tconst oPropertyAnnotations = oPropertyContext.getObject(sAnnoPath);\n\t\tlet sAnnotation;\n\t\tif (oPropertyAnnotations) {\n\t\t\tsAnnotation =\n\t\t\t\t(oPropertyAnnotations.hasOwnProperty(ISOCurrency) && ISOCurrency) || (oPropertyAnnotations.hasOwnProperty(Unit) && Unit);\n\t\t\tif (sAnnotation && !bInFilterField) {\n\t\t\t\tconst sUnitOrCurrencyPath = `${sPath + sAnnotation}/$Path`;\n\t\t\t\t// we check that the currency or unit is a Property and not a fixed value\n\t\t\t\tif (oPropertyContext.getObject(sUnitOrCurrencyPath)) {\n\t\t\t\t\tsPath = sUnitOrCurrencyPath;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn sPath;\n\t},\n\n\t/**\n\t * Dedicated method to avoid looking for unit properties.\n\t *\n\t * @param oPropertyContext\n\t * @returns The value help property path\n\t */\n\tvalueHelpPropertyForFilterField: function (oPropertyContext: any) {\n\t\treturn FieldHelper.valueHelpProperty(oPropertyContext, true);\n\t},\n\n\t/**\n\t * Method to generate the ID for Value Help.\n\t *\n\t * @function\n\t * @name getIDForFieldValueHelp\n\t * @memberof sap.fe.macros.field.FieldHelper.js\n\t * @param sFlexId Flex ID of the current object\n\t * @param sIdPrefix Prefix for the ValueHelp ID\n\t * @param sOriginalPropertyName Name of the property\n\t * @param sPropertyName Name of the ValueHelp Property\n\t * @returns The ID generated for the ValueHelp\n\t */\n\tgetIDForFieldValueHelp: function (sFlexId: string | null, sIdPrefix: string, sOriginalPropertyName: string, sPropertyName: string) {\n\t\tif (sFlexId) {\n\t\t\treturn sFlexId;\n\t\t}\n\t\tlet sProperty = sPropertyName;\n\t\tif (sOriginalPropertyName !== sPropertyName) {\n\t\t\tsProperty = `${sOriginalPropertyName}::${sPropertyName}`;\n\t\t}\n\t\treturn generate([sIdPrefix, sProperty]);\n\t},\n\n\t/**\n\t * Method to get the fieldHelp property of the FilterField.\n\t *\n\t * @function\n\t * @name getFieldHelpPropertyForFilterField\n\t * @memberof sap.fe.macros.field.FieldHelper.js\n\t * @param propertyContext Property context for filter field\n\t * @param oProperty The object of the FieldHelp property\n\t * @param sPropertyType The $Type of the property\n\t * @param sVhIdPrefix The ID prefix of the value help\n\t * @param sPropertyName The name of the property\n\t * @param sValueHelpPropertyName The property name of the value help\n\t * @param bHasValueListWithFixedValues `true` if there is a value list with a fixed value annotation\n\t * @param bUseSemanticDateRange `true` if the semantic date range is set to 'true' in the manifest\n\t * @returns The field help property of the value help\n\t */\n\tgetFieldHelpPropertyForFilterField: function (\n\t\tpropertyContext: BaseContext,\n\t\toProperty: any,\n\t\tsPropertyType: string,\n\t\tsVhIdPrefix: string,\n\t\tsPropertyName: string,\n\t\tsValueHelpPropertyName: string,\n\t\tbHasValueListWithFixedValues: boolean,\n\t\tbUseSemanticDateRange: boolean | string\n\t) {\n\t\tconst sProperty = FieldHelper.propertyName(oProperty, { context: propertyContext }),\n\t\t\tbSemanticDateRange = bUseSemanticDateRange === \"true\" || bUseSemanticDateRange === true;\n\t\tconst oModel = propertyContext.getModel() as ODataMetaModel,\n\t\t\tsPropertyPath = propertyContext.getPath(),\n\t\t\tsPropertyLocationPath = CommonHelper.getLocationForPropertyPath(oModel, sPropertyPath),\n\t\t\toFilterRestrictions = CommonUtils.getFilterRestrictionsByPath(sPropertyLocationPath, oModel);\n\t\tif (\n\t\t\t((sPropertyType === \"Edm.DateTimeOffset\" || sPropertyType === \"Edm.Date\") &&\n\t\t\t\tbSemanticDateRange &&\n\t\t\t\toFilterRestrictions &&\n\t\t\t\toFilterRestrictions.FilterAllowedExpressions &&\n\t\t\t\toFilterRestrictions.FilterAllowedExpressions[sProperty] &&\n\t\t\t\t(oFilterRestrictions.FilterAllowedExpressions[sProperty].indexOf(\"SingleRange\") !== -1 ||\n\t\t\t\t\toFilterRestrictions.FilterAllowedExpressions[sProperty].indexOf(\"SingleValue\") !== -1)) ||\n\t\t\t(sPropertyType === \"Edm.Boolean\" && !bHasValueListWithFixedValues)\n\t\t) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn FieldHelper.getIDForFieldValueHelp(null, sVhIdPrefix || \"FilterFieldValueHelp\", sPropertyName, sValueHelpPropertyName);\n\t},\n\t/**\n\t * Method to get semantic key title\n\t *\n\t * @function\n\t * @name getSemanticKeyTitle\n\t * @memberof sap.fe.macros.field.FieldHelper.js\n\t * @param {string} sPropertyTextValue String containing the binding of text associated to the property\n\t * @param {string} sPropertyValue String containing the binding of a property\n\t * @param {string} sDataField String containing the name of a data field\n\t * @param {object} oTextArrangement Object containing the text arrangement\n\t * @param {string} sSemanticKeyStyle enum containing the style of the semantic key\n\t * @param {object} oDraftRoot Draft root object\n\t * @returns {string} - Binding that resolves to the title of the semantic key\n\t */\n\n\tgetSemanticKeyTitle: function (\n\t\tsPropertyTextValue: string,\n\t\tsPropertyValue: string,\n\t\tsDataField: string,\n\t\toTextArrangement: any,\n\t\tsSemanticKeyStyle: string,\n\t\toDraftRoot: any\n\t) {\n\t\tconst sNewObject = ResourceModel.getText(\"T_NEW_OBJECT\");\n\t\tconst sUnnamedObject = ResourceModel.getText(\"T_ANNOTATION_HELPER_DEFAULT_OBJECT_PAGE_HEADER_TITLE_NO_HEADER_INFO\");\n\t\tlet sNewObjectExpression, sUnnnamedObjectExpression;\n\t\tlet sSemanticKeyTitleExpression;\n\t\tconst addNewObjectUnNamedObjectExpression = function (sValue: string) {\n\t\t\tsNewObjectExpression =\n\t\t\t\t\"($\" +\n\t\t\t\tsValue +\n\t\t\t\t\" === '' || $\" +\n\t\t\t\tsValue +\n\t\t\t\t\" === undefined || $\" +\n\t\t\t\tsValue +\n\t\t\t\t\" === null ? '\" +\n\t\t\t\tsNewObject +\n\t\t\t\t\"': $\" +\n\t\t\t\tsValue +\n\t\t\t\t\")\";\n\t\t\tsUnnnamedObjectExpression =\n\t\t\t\t\"($\" +\n\t\t\t\tsValue +\n\t\t\t\t\" === '' || $\" +\n\t\t\t\tsValue +\n\t\t\t\t\" === undefined || $\" +\n\t\t\t\tsValue +\n\t\t\t\t\" === null ? '\" +\n\t\t\t\tsUnnamedObject +\n\t\t\t\t\"': $\" +\n\t\t\t\tsValue +\n\t\t\t\t\")\";\n\t\t\treturn (\n\t\t\t\t\"(!%{IsActiveEntity} ? !%{HasActiveEntity} ? \" +\n\t\t\t\tsNewObjectExpression +\n\t\t\t\t\" : \" +\n\t\t\t\tsUnnnamedObjectExpression +\n\t\t\t\t\" : \" +\n\t\t\t\tsUnnnamedObjectExpression +\n\t\t\t\t\")\"\n\t\t\t);\n\t\t};\n\t\tconst buildExpressionForSemantickKeyTitle = function (sValue: string, bIsExpressionBinding: boolean) {\n\t\t\tlet sExpression;\n\t\t\tif (oDraftRoot) {\n\t\t\t\t//check if it is draft root so that we can add NewObject and UnnamedObject feature\n\t\t\t\tsExpression = addNewObjectUnNamedObjectExpression(sValue);\n\t\t\t\treturn bIsExpressionBinding ? \"{= \" + sExpression + \"}\" : sExpression;\n\t\t\t} else {\n\t\t\t\treturn bIsExpressionBinding ? sValue : \"$\" + sValue;\n\t\t\t}\n\t\t};\n\n\t\tif (sPropertyTextValue) {\n\t\t\t// check for text association\n\t\t\tif (oTextArrangement && sSemanticKeyStyle !== \"ObjectIdentifier\") {\n\t\t\t\t// check if text arrangement is present and table type is GridTable\n\t\t\t\tconst sTextArrangement = oTextArrangement.$EnumMember;\n\t\t\t\tif (sTextArrangement === \"com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst\") {\n\t\t\t\t\t// Eg: English (EN)\n\t\t\t\t\tsSemanticKeyTitleExpression = buildExpressionForSemantickKeyTitle(sPropertyTextValue, false);\n\t\t\t\t\treturn (\n\t\t\t\t\t\t\"{= \" +\n\t\t\t\t\t\tsSemanticKeyTitleExpression +\n\t\t\t\t\t\t\" +' (' + \" +\n\t\t\t\t\t\t\"($\" +\n\t\t\t\t\t\tsPropertyValue +\n\t\t\t\t\t\t(sDataField ? \" || ${\" + sDataField + \"}\" : \"\") +\n\t\t\t\t\t\t\") +')' }\"\n\t\t\t\t\t);\n\t\t\t\t} else if (sTextArrangement === \"com.sap.vocabularies.UI.v1.TextArrangementType/TextLast\") {\n\t\t\t\t\t// Eg: EN (English)\n\t\t\t\t\tsSemanticKeyTitleExpression = buildExpressionForSemantickKeyTitle(sPropertyTextValue, false);\n\t\t\t\t\treturn (\n\t\t\t\t\t\t\"{= ($\" +\n\t\t\t\t\t\tsPropertyValue +\n\t\t\t\t\t\t(sDataField ? \" || ${\" + sDataField + \"}\" : \"\") +\n\t\t\t\t\t\t\")\" +\n\t\t\t\t\t\t\" + ' (' + \" +\n\t\t\t\t\t\tsSemanticKeyTitleExpression +\n\t\t\t\t\t\t\" +')' }\"\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\t// for a Grid table when text is available and text arrangement is TextOnly or TextSeperate or no text arrangement then we return Text\n\t\t\t\t\treturn buildExpressionForSemantickKeyTitle(sPropertyTextValue, true);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn buildExpressionForSemantickKeyTitle(sPropertyTextValue, true);\n\t\t\t}\n\t\t} else {\n\t\t\t// if there is no text association then we return the property value\n\t\t\treturn buildExpressionForSemantickKeyTitle(sPropertyValue, true);\n\t\t}\n\t},\n\n\tgetObjectIdentifierText: function (\n\t\toTextAnnotation: any,\n\t\toTextArrangementAnnotation: any,\n\t\tsPropertyValueBinding: any,\n\t\tsDataFieldName: any\n\t) {\n\t\tif (oTextAnnotation) {\n\t\t\t// There is a text annotation. In this case, the ObjectIdentifier shows:\n\t\t\t//  - the *text* as the ObjectIdentifier's title\n\t\t\t//  - the *value* as the ObjectIdentifier's text\n\t\t\t//\n\t\t\t// So if the TextArrangement is #TextOnly or #TextSeparate, do not set the ObjectIdentifier's text\n\t\t\t// property\n\t\t\tif (\n\t\t\t\toTextArrangementAnnotation &&\n\t\t\t\t(oTextArrangementAnnotation.$EnumMember === \"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly\" ||\n\t\t\t\t\toTextArrangementAnnotation.$EnumMember === \"com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate\" ||\n\t\t\t\t\toTextArrangementAnnotation.$EnumMember === \"com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst\")\n\t\t\t) {\n\t\t\t\treturn undefined;\n\t\t\t} else {\n\t\t\t\treturn sPropertyValueBinding || `{${sDataFieldName}}`;\n\t\t\t}\n\t\t}\n\n\t\t// no text annotation: the property value is part of the ObjectIdentifier's title already\n\t\treturn undefined;\n\t},\n\n\tgetSemanticObjectsList: function (propertyAnnotations: any) {\n\t\t// look for annotations SemanticObject with and without qualifier\n\t\t// returns : list of SemanticObjects\n\t\tconst annotations = propertyAnnotations;\n\t\tconst aSemanticObjects = [];\n\t\tfor (const key in annotations.getObject()) {\n\t\t\t// var qualifier;\n\t\t\tif (\n\t\t\t\tkey.indexOf(\"com.sap.vocabularies.Common.v1.SemanticObject\") > -1 &&\n\t\t\t\tkey.indexOf(\"com.sap.vocabularies.Common.v1.SemanticObjectMapping\") === -1 &&\n\t\t\t\tkey.indexOf(\"com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions\") === -1\n\t\t\t) {\n\t\t\t\tlet semanticObjectValue = annotations.getObject()[key];\n\t\t\t\tif (typeof semanticObjectValue === \"object\") {\n\t\t\t\t\tsemanticObjectValue = AnnotationHelper.value(semanticObjectValue, { context: propertyAnnotations });\n\t\t\t\t}\n\t\t\t\tif (aSemanticObjects.indexOf(semanticObjectValue) === -1) {\n\t\t\t\t\taSemanticObjects.push(semanticObjectValue);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst oSemanticObjectsModel = new JSONModel(aSemanticObjects);\n\t\t(oSemanticObjectsModel as any).$$valueAsPromise = true;\n\t\treturn oSemanticObjectsModel.createBindingContext(\"/\");\n\t},\n\tgetSemanticObjectsQualifiers: function (propertyAnnotations: any) {\n\t\t// look for annotations SemanticObject, SemanticObjectUnavailableActions, SemanticObjectMapping\n\t\t// returns : list of qualifiers (array of objects with qualifiers : {qualifier, SemanticObject, SemanticObjectUnavailableActions, SemanticObjectMapping for this qualifier}\n\t\tconst annotations = propertyAnnotations;\n\t\tlet qualifiersAnnotations: any[] = [];\n\t\tconst findObject = function (qualifier: any) {\n\t\t\treturn qualifiersAnnotations.find(function (object: any) {\n\t\t\t\treturn object.qualifier === qualifier;\n\t\t\t});\n\t\t};\n\t\tfor (const key in annotations.getObject()) {\n\t\t\t// var qualifier;\n\t\t\tif (\n\t\t\t\tkey.indexOf(\"com.sap.vocabularies.Common.v1.SemanticObject#\") > -1 ||\n\t\t\t\tkey.indexOf(\"com.sap.vocabularies.Common.v1.SemanticObjectMapping#\") > -1 ||\n\t\t\t\tkey.indexOf(\"com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions#\") > -1\n\t\t\t) {\n\t\t\t\tconst annotationContent = annotations.getObject()[key],\n\t\t\t\t\tannotation = key.split(\"#\")[0],\n\t\t\t\t\tqualifier = key.split(\"#\")[1];\n\t\t\t\tlet qualifierObject = findObject(qualifier);\n\n\t\t\t\tif (!qualifierObject) {\n\t\t\t\t\tqualifierObject = {\n\t\t\t\t\t\tqualifier: qualifier\n\t\t\t\t\t};\n\t\t\t\t\tqualifierObject[annotation] = annotationContent;\n\t\t\t\t\tqualifiersAnnotations.push(qualifierObject);\n\t\t\t\t} else {\n\t\t\t\t\tqualifierObject[annotation] = annotationContent;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tqualifiersAnnotations = qualifiersAnnotations.filter(function (oQualifier: any) {\n\t\t\treturn !!oQualifier[\"@com.sap.vocabularies.Common.v1.SemanticObject\"];\n\t\t});\n\t\tconst oQualifiersModel = new JSONModel(qualifiersAnnotations);\n\t\t(oQualifiersModel as any).$$valueAsPromise = true;\n\t\treturn oQualifiersModel.createBindingContext(\"/\");\n\t},\n\tcomputeSemanticLinkModelContextChange: function (aSemanticObjects: any, oDataModelObjectPath: any) {\n\t\tif (FieldHelper.hasSemanticObjectsWithPath(aSemanticObjects)) {\n\t\t\tconst sPathToProperty = FieldHelper.buildTargetPathFromDataModelObjectPath(oDataModelObjectPath);\n\t\t\treturn `FieldRuntime.LinkModelContextChange($event, '${\n\t\t\t\t(oDataModelObjectPath.targetObject as Property).name\n\t\t\t}', '${sPathToProperty}')`;\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t},\n\thasSemanticObjectsWithPath: function (aSemanticObjects: any) {\n\t\tlet bSemanticObjectHasAPath = false;\n\t\tif (aSemanticObjects && aSemanticObjects.length) {\n\t\t\tfor (let i = 0; i < aSemanticObjects.length; i++) {\n\t\t\t\tif (aSemanticObjects[i] && aSemanticObjects[i].value && aSemanticObjects[i].value.indexOf(\"{\") === 0) {\n\t\t\t\t\tbSemanticObjectHasAPath = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn bSemanticObjectHasAPath;\n\t},\n\tisSemanticKeyHasFieldGroupColumn: function (isFieldGroupColumn: any) {\n\t\treturn isFieldGroupColumn;\n\t},\n\t/*\n\t * Method to compute the delegate with payload\n\t * @function\n\t * @param {object} delegateName - name of the delegate methode\n\t * @param {boolean} retrieveTextFromValueList - added to the payload of the delegate methode\n\t * @return {object} - returns the delegate with payload\n\t */\n\tcomputeFieldBaseDelegate: function (delegateName: string, retrieveTextFromValueList: boolean) {\n\t\tif (retrieveTextFromValueList) {\n\t\t\treturn JSON.stringify({\n\t\t\t\tname: delegateName,\n\t\t\t\tpayload: {\n\t\t\t\t\tretrieveTextFromValueList: retrieveTextFromValueList\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn `{name: '${delegateName}'}`;\n\t},\n\t_getPrimaryIntents: function (aSemanticObjectsList: any[]): Promise<any[]> {\n\t\tconst aPromises: any[] = [];\n\t\tif (aSemanticObjectsList) {\n\t\t\tconst oUshellContainer = sap.ushell && sap.ushell.Container;\n\t\t\tconst oService = oUshellContainer && oUshellContainer.getService(\"CrossApplicationNavigation\");\n\t\t\taSemanticObjectsList.forEach(function (semObject) {\n\t\t\t\tif (typeof semObject === \"string\") {\n\t\t\t\t\taPromises.push(oService.getPrimaryIntent(semObject, {}));\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn Promise.all(aPromises)\n\t\t\t.then(function (aSemObjectPrimaryAction) {\n\t\t\t\treturn aSemObjectPrimaryAction;\n\t\t\t})\n\t\t\t.catch(function (oError) {\n\t\t\t\tLog.error(\"Error fetching primary intents\", oError);\n\t\t\t\treturn [];\n\t\t\t});\n\t},\n\t_SemanticObjectsHasPrimaryAction: function (oSemantics: any, aSemanticObjectsPrimaryActions: any): boolean {\n\t\tconst _fnIsSemanticObjectActionUnavailable = function (_oSemantics: any, _oPrimaryAction: any, _index: string) {\n\t\t\tfor (const unavailableActionsIndex in _oSemantics.semanticObjectUnavailableActions[_index].actions) {\n\t\t\t\tif (\n\t\t\t\t\t_oPrimaryAction.intent\n\t\t\t\t\t\t.split(\"-\")[1]\n\t\t\t\t\t\t.indexOf(_oSemantics.semanticObjectUnavailableActions[_index].actions[unavailableActionsIndex]) === 0\n\t\t\t\t) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t};\n\t\toSemantics.semanticPrimaryActions = aSemanticObjectsPrimaryActions;\n\t\tconst oPrimaryAction =\n\t\t\toSemantics.semanticObjects &&\n\t\t\toSemantics.mainSemanticObject &&\n\t\t\toSemantics.semanticPrimaryActions[oSemantics.semanticObjects.indexOf(oSemantics.mainSemanticObject)];\n\t\tconst sCurrentHash = CommonUtils.getHash();\n\t\tif (oSemantics.mainSemanticObject && oPrimaryAction !== null && oPrimaryAction.intent !== sCurrentHash) {\n\t\t\tfor (const index in oSemantics.semanticObjectUnavailableActions) {\n\t\t\t\tif (oSemantics.mainSemanticObject.indexOf(oSemantics.semanticObjectUnavailableActions[index].semanticObject) === 0) {\n\t\t\t\t\treturn _fnIsSemanticObjectActionUnavailable(oSemantics, oPrimaryAction, index);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\tcheckPrimaryActions: function (oSemantics: any, bGetTitleLink: boolean) {\n\t\treturn this._getPrimaryIntents(oSemantics && oSemantics.semanticObjects)\n\t\t\t.then((aSemanticObjectsPrimaryActions: any[]) => {\n\t\t\t\treturn bGetTitleLink\n\t\t\t\t\t? {\n\t\t\t\t\t\t\ttitleLink: aSemanticObjectsPrimaryActions,\n\t\t\t\t\t\t\thasTitleLink: this._SemanticObjectsHasPrimaryAction(oSemantics, aSemanticObjectsPrimaryActions)\n\t\t\t\t\t  }\n\t\t\t\t\t: this._SemanticObjectsHasPrimaryAction(oSemantics, aSemanticObjectsPrimaryActions);\n\t\t\t})\n\t\t\t.catch(function (oError) {\n\t\t\t\tLog.error(\"Error in checkPrimaryActions\", oError);\n\t\t\t});\n\t},\n\t_getTitleLinkWithParameters: function (_oSemanticObjectModel: any, _linkIntent: string) {\n\t\tif (_oSemanticObjectModel && _oSemanticObjectModel.titlelink) {\n\t\t\treturn _oSemanticObjectModel.titlelink;\n\t\t} else {\n\t\t\treturn _linkIntent;\n\t\t}\n\t},\n\n\tgetPrimaryAction: function (oSemantics: any) {\n\t\treturn oSemantics.semanticPrimaryActions[oSemantics.semanticObjects.indexOf(oSemantics.mainSemanticObject)].intent\n\t\t\t? FieldHelper._getTitleLinkWithParameters(\n\t\t\t\t\toSemantics,\n\t\t\t\t\toSemantics.semanticPrimaryActions[oSemantics.semanticObjects.indexOf(oSemantics.mainSemanticObject)].intent\n\t\t\t  )\n\t\t\t: oSemantics.primaryIntentAction;\n\t},\n\t/**\n\t * Method to fetch the filter restrictions. Filter restrictions can be annotated on an entity set or a navigation property.\n\t * Depending on the path to which the control is bound, we check for filter restrictions on the context path of the control,\n\t * or on the navigation property (if there is a navigation).\n\t * Eg. If the table is bound to '/EntitySet', for property path '/EntitySet/_Association/PropertyName', the filter restrictions\n\t * on '/EntitySet' win over filter restrictions on '/EntitySet/_Association'.\n\t * If the table is bound to '/EntitySet/_Association', the filter restrictions on '/EntitySet/_Association' win over filter\n\t * retrictions on '/AssociationEntitySet'.\n\t *\n\t * @param oContext Property Context\n\t * @param oProperty Property object in the metadata\n\t * @param bUseSemanticDateRange Boolean Suggests if semantic date range should be used\n\t * @param sSettings Stringified object of the property settings\n\t * @param contextPath Path to which the parent control (the table or the filter bar) is bound\n\t * @returns String containing comma-separated list of operators for filtering\n\t */\n\toperators: function (oContext: BaseContext, oProperty: any, bUseSemanticDateRange: boolean, sSettings: string, contextPath: string) {\n\t\tif (!oProperty || !contextPath) {\n\t\t\treturn undefined;\n\t\t}\n\t\tlet operators: string[];\n\t\tconst sProperty = FieldHelper.propertyName(oProperty, { context: oContext });\n\t\tconst oModel = oContext.getModel() as ODataMetaModel,\n\t\t\tsPropertyPath = oContext.getPath(),\n\t\t\tsPropertyLocationPath = CommonHelper.getLocationForPropertyPath(oModel, sPropertyPath),\n\t\t\tpropertyType = oProperty.$Type;\n\n\t\tif (propertyType === \"Edm.Guid\") {\n\t\t\treturn CommonUtils.getOperatorsForGuidProperty();\n\t\t}\n\n\t\t// remove '/'\n\t\tcontextPath = contextPath.slice(0, -1);\n\t\tconst isTableBoundToNavigation: Boolean = contextPath.lastIndexOf(\"/\") > 0;\n\t\tconst isNavigationPath: Boolean =\n\t\t\t(isTableBoundToNavigation && contextPath !== sPropertyLocationPath) ||\n\t\t\t(!isTableBoundToNavigation && sPropertyLocationPath.lastIndexOf(\"/\") > 0);\n\t\tconst navigationPath: string =\n\t\t\t(isNavigationPath && sPropertyLocationPath.substr(sPropertyLocationPath.indexOf(contextPath) + contextPath.length + 1)) || \"\";\n\t\tconst propertyPath: string = (isNavigationPath && navigationPath + \"/\" + sProperty) || sProperty;\n\n\t\tif (!isTableBoundToNavigation) {\n\t\t\tif (!isNavigationPath) {\n\t\t\t\t// /SalesOrderManage/ID\n\t\t\t\toperators = CommonUtils.getOperatorsForProperty(\n\t\t\t\t\tsProperty,\n\t\t\t\t\tsPropertyLocationPath,\n\t\t\t\t\toModel,\n\t\t\t\t\tpropertyType,\n\t\t\t\t\tbUseSemanticDateRange,\n\t\t\t\t\tsSettings\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t// /SalesOrderManange/_Item/Material\n\t\t\t\t//let operators\n\t\t\t\toperators = CommonUtils.getOperatorsForProperty(\n\t\t\t\t\tpropertyPath,\n\t\t\t\t\tcontextPath,\n\t\t\t\t\toModel,\n\t\t\t\t\tpropertyType,\n\t\t\t\t\tbUseSemanticDateRange,\n\t\t\t\t\tsSettings\n\t\t\t\t);\n\t\t\t\tif (operators.length === 0) {\n\t\t\t\t\toperators = CommonUtils.getOperatorsForProperty(\n\t\t\t\t\t\tsProperty,\n\t\t\t\t\t\tsPropertyLocationPath,\n\t\t\t\t\t\toModel,\n\t\t\t\t\t\tpropertyType,\n\t\t\t\t\t\tbUseSemanticDateRange,\n\t\t\t\t\t\tsSettings\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!isNavigationPath) {\n\t\t\t// /SalesOrderManage/_Item/Material\n\t\t\toperators = CommonUtils.getOperatorsForProperty(\n\t\t\t\tpropertyPath,\n\t\t\t\tcontextPath,\n\t\t\t\toModel,\n\t\t\t\tpropertyType,\n\t\t\t\tbUseSemanticDateRange,\n\t\t\t\tsSettings\n\t\t\t);\n\t\t\tif (operators.length === 0) {\n\t\t\t\toperators = CommonUtils.getOperatorsForProperty(\n\t\t\t\t\tsProperty,\n\t\t\t\t\tModelHelper.getEntitySetPath(contextPath),\n\t\t\t\t\toModel,\n\t\t\t\t\tpropertyType,\n\t\t\t\t\tbUseSemanticDateRange,\n\t\t\t\t\tsSettings\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn operators?.length > 0 ? operators.toString() : undefined;\n\t\t} else {\n\t\t\t// /SalesOrderManage/_Item/_Association/PropertyName\n\t\t\t// This is currently not supported for tables\n\t\t\toperators = CommonUtils.getOperatorsForProperty(\n\t\t\t\tpropertyPath,\n\t\t\t\tcontextPath,\n\t\t\t\toModel,\n\t\t\t\tpropertyType,\n\t\t\t\tbUseSemanticDateRange,\n\t\t\t\tsSettings\n\t\t\t);\n\t\t\tif (operators.length === 0) {\n\t\t\t\toperators = CommonUtils.getOperatorsForProperty(\n\t\t\t\t\tpropertyPath,\n\t\t\t\t\tModelHelper.getEntitySetPath(contextPath),\n\t\t\t\t\toModel,\n\t\t\t\t\tpropertyType,\n\t\t\t\t\tbUseSemanticDateRange,\n\t\t\t\t\tsSettings\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tif ((!operators || operators.length === 0) && (propertyType === \"Edm.Date\" || propertyType === \"Edm.DateTimeOffset\")) {\n\t\t\toperators = CommonUtils.getOperatorsForDateProperty(propertyType);\n\t\t}\n\n\t\treturn operators.length > 0 ? operators.toString() : undefined;\n\t},\n\t/**\n\t * Return the property context for usage in QuickView.\n\t *\n\t * @param oDataFieldContext Context of the data field or associated property\n\t * @returns Binding context\n\t */\n\tgetPropertyContextForQuickView: function (oDataFieldContext: any) {\n\t\tif (oDataFieldContext.getObject(\"Value\") !== undefined) {\n\t\t\t// Create a binding context to the property from the data field.\n\t\t\tconst oInterface = oDataFieldContext.getInterface(),\n\t\t\t\toModel = oInterface.getModel();\n\t\t\tlet sPath = oInterface.getPath();\n\t\t\tsPath = sPath + (sPath.endsWith(\"/\") ? \"Value\" : \"/Value\");\n\t\t\treturn oModel.createBindingContext(sPath);\n\t\t} else {\n\t\t\t// It is a property. Just return the context as it is.\n\t\t\treturn oDataFieldContext;\n\t\t}\n\t},\n\t/**\n\t * Return the binding context corresponding to the property path.\n\t *\n\t * @param oPropertyContext Context of the property\n\t * @returns Binding context\n\t */\n\tgetPropertyPathForQuickView: function (oPropertyContext: any) {\n\t\tif (oPropertyContext && oPropertyContext.getObject(\"$Path\")) {\n\t\t\tconst oInterface = oPropertyContext.getInterface(),\n\t\t\t\toModel = oInterface.getModel();\n\t\t\tlet sPath = oInterface.getPath();\n\t\t\tsPath = sPath + (sPath.endsWith(\"/\") ? \"$Path\" : \"/$Path\");\n\t\t\treturn oModel.createBindingContext(sPath);\n\t\t}\n\n\t\treturn oPropertyContext;\n\t},\n\t/**\n\t * Return the path of the DaFieldDefault (if any). Otherwise, the DataField path is returned.\n\t *\n\t * @param oDataFieldContext Context of the DataField\n\t * @returns Object path\n\t */\n\tgetDataFieldDefault: function (oDataFieldContext: any) {\n\t\tconst oDataFieldDefault = oDataFieldContext\n\t\t\t.getModel()\n\t\t\t.getObject(`${oDataFieldContext.getPath()}@com.sap.vocabularies.UI.v1.DataFieldDefault`);\n\t\treturn oDataFieldDefault\n\t\t\t? `${oDataFieldContext.getPath()}@com.sap.vocabularies.UI.v1.DataFieldDefault`\n\t\t\t: oDataFieldContext.getPath();\n\t},\n\t/*\n\t * Method to get visible expression for DataFieldActionButton\n\t * @function\n\t * @name isDataFieldActionButtonVisible\n\t * @param {object} oThis - Current Object\n\t * @param {object} oDataField - DataPoint's Value\n\t * @param {boolean} bIsBound - DataPoint action bound\n\t * @param {object} oActionContext - ActionContext Value\n\t * @return {boolean} - returns boolean\n\t */\n\tisDataFieldActionButtonVisible: function (oThis: any, oDataField: any, bIsBound: any, oActionContext: any) {\n\t\treturn oDataField[\"@com.sap.vocabularies.UI.v1.Hidden\"] !== true && (bIsBound !== true || oActionContext !== false);\n\t},\n\t/**\n\t * Method to get press event for DataFieldActionButton.\n\t *\n\t * @function\n\t * @name getPressEventForDataFieldActionButton\n\t * @param oThis Current Object\n\t * @param oDataField DataPoint's Value\n\t * @returns The binding expression for the DataFieldActionButton press event\n\t */\n\tgetPressEventForDataFieldActionButton: function (oThis: any, oDataField: any) {\n\t\tlet sInvocationGrouping = \"Isolated\";\n\t\tif (\n\t\t\toDataField.InvocationGrouping &&\n\t\t\toDataField.InvocationGrouping.$EnumMember === \"com.sap.vocabularies.UI.v1.OperationGroupingType/ChangeSet\"\n\t\t) {\n\t\t\tsInvocationGrouping = \"ChangeSet\";\n\t\t}\n\t\tlet bIsNavigable = oThis.navigateAfterAction;\n\t\tbIsNavigable = bIsNavigable === \"false\" ? false : true;\n\n\t\tconst entities: Array<string> = oThis?.entitySet?.getPath().split(\"/\");\n\t\tconst entitySetName: string = entities[entities.length - 1];\n\n\t\tconst oParams = {\n\t\t\tcontexts: \"${$source>/}.getBindingContext()\",\n\t\t\tinvocationGrouping: CommonHelper.addSingleQuotes(sInvocationGrouping),\n\t\t\tmodel: \"${$source>/}.getModel()\",\n\t\t\tlabel: CommonHelper.addSingleQuotes(oDataField.Label, true),\n\t\t\tisNavigable: bIsNavigable,\n\t\t\tentitySetName: CommonHelper.addSingleQuotes(entitySetName)\n\t\t};\n\n\t\treturn CommonHelper.generateFunction(\n\t\t\t\".editFlow.invokeAction\",\n\t\t\tCommonHelper.addSingleQuotes(oDataField.Action),\n\t\t\tCommonHelper.objectToString(oParams)\n\t\t);\n\t},\n\n\tisNumericDataType: function (sDataFieldType: any) {\n\t\tconst _sDataFieldType = sDataFieldType;\n\t\tif (_sDataFieldType !== undefined) {\n\t\t\tconst aNumericDataTypes = [\n\t\t\t\t\"Edm.Int16\",\n\t\t\t\t\"Edm.Int32\",\n\t\t\t\t\"Edm.Int64\",\n\t\t\t\t\"Edm.Byte\",\n\t\t\t\t\"Edm.SByte\",\n\t\t\t\t\"Edm.Single\",\n\t\t\t\t\"Edm.Decimal\",\n\t\t\t\t\"Edm.Double\"\n\t\t\t];\n\t\t\treturn aNumericDataTypes.indexOf(_sDataFieldType) === -1 ? false : true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\n\tisDateOrTimeDataType: function (sPropertyType: any) {\n\t\tif (sPropertyType !== undefined) {\n\t\t\tconst aDateTimeDataTypes = [\"Edm.DateTimeOffset\", \"Edm.DateTime\", \"Edm.Date\", \"Edm.TimeOfDay\", \"Edm.Time\"];\n\t\t\treturn aDateTimeDataTypes.indexOf(sPropertyType) > -1;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\tisDateTimeDataType: function (sPropertyType: any) {\n\t\tif (sPropertyType !== undefined) {\n\t\t\tconst aDateDataTypes = [\"Edm.DateTimeOffset\", \"Edm.DateTime\"];\n\t\t\treturn aDateDataTypes.indexOf(sPropertyType) > -1;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\tisDateDataType: function (sPropertyType: any) {\n\t\treturn sPropertyType === \"Edm.Date\";\n\t},\n\tisTimeDataType: function (sPropertyType: any) {\n\t\tif (sPropertyType !== undefined) {\n\t\t\tconst aDateDataTypes = [\"Edm.TimeOfDay\", \"Edm.Time\"];\n\t\t\treturn aDateDataTypes.indexOf(sPropertyType) > -1;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\n\t/**\n\t * Method to return the underlying property data type in case TextArrangement annotation of Text annotation 'TextOnly' exists.\n\t *\n\t * @param oAnnotations All the annotations of a property\n\t * @param oModel An instance of OData v4 model\n\t * @param sEntityPath The path to root Entity\n\t * @param sType The property data type\n\t * @returns The underlying property data type for TextOnly annotated property, otherwise the original data type.\n\t * @private\n\t */\n\tgetUnderlyingPropertyDataType: function (oAnnotations: any, oModel: ODataMetaModel, sEntityPath: string, sType: string) {\n\t\tconst sTextAnnotation = \"@com.sap.vocabularies.Common.v1.Text\",\n\t\t\tsTextArrangementAnnotation = \"@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement\";\n\t\tif (\n\t\t\t!!oAnnotations &&\n\t\t\t!!oAnnotations[sTextArrangementAnnotation] &&\n\t\t\toAnnotations[sTextArrangementAnnotation].$EnumMember === \"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly\" &&\n\t\t\t!!oAnnotations[sTextAnnotation] &&\n\t\t\t!!oAnnotations[sTextAnnotation].$Path\n\t\t) {\n\t\t\treturn oModel.getObject(`${sEntityPath}/${oAnnotations[sTextAnnotation].$Path}/$Type`);\n\t\t}\n\n\t\treturn sType;\n\t},\n\n\tgetColumnAlignment: function (oDataField: any, oTable: any) {\n\t\tconst sEntityPath = oTable.collection.sPath,\n\t\t\toModel = oTable.collection.oModel;\n\t\tif (\n\t\t\t(oDataField[\"$Type\"] === \"com.sap.vocabularies.UI.v1.DataFieldForAction\" ||\n\t\t\t\toDataField[\"$Type\"] === \"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation\") &&\n\t\t\toDataField.Inline &&\n\t\t\toDataField.IconUrl\n\t\t) {\n\t\t\treturn \"Center\";\n\t\t}\n\t\t// Columns containing a Semantic Key must be Begin aligned\n\t\tconst aSemanticKeys = oModel.getObject(`${sEntityPath}/@com.sap.vocabularies.Common.v1.SemanticKey`);\n\t\tif (oDataField[\"$Type\"] === \"com.sap.vocabularies.UI.v1.DataField\") {\n\t\t\tconst sPropertyPath = oDataField.Value.$Path;\n\t\t\tconst bIsSemanticKey =\n\t\t\t\taSemanticKeys &&\n\t\t\t\t!aSemanticKeys.every(function (oKey: any) {\n\t\t\t\t\treturn oKey.$PropertyPath !== sPropertyPath;\n\t\t\t\t});\n\t\t\tif (bIsSemanticKey) {\n\t\t\t\treturn \"Begin\";\n\t\t\t}\n\t\t}\n\t\treturn FieldHelper.getDataFieldAlignment(oDataField, oModel, sEntityPath);\n\t},\n\t/**\n\t * Get alignment based only on the property.\n\t *\n\t * @param sType The property's type\n\t * @param oFormatOptions The field format options\n\t * @param [oComputedEditMode] The computed Edit mode of the property is empty when directly called from the ColumnProperty fragment\n\t * @returns The property alignment\n\t */\n\tgetPropertyAlignment: function (sType: string, oFormatOptions: any, oComputedEditMode?: BindingToolkitExpression<string>) {\n\t\tlet sDefaultAlignment = \"Begin\" as any;\n\t\tconst sTextAlignment = oFormatOptions ? oFormatOptions.textAlignMode : \"\";\n\t\tswitch (sTextAlignment) {\n\t\t\tcase \"Form\":\n\t\t\t\tif (this.isNumericDataType(sType)) {\n\t\t\t\t\tsDefaultAlignment = \"Begin\";\n\t\t\t\t\tif (oComputedEditMode) {\n\t\t\t\t\t\tsDefaultAlignment = getAlignmentExpression(oComputedEditMode, \"Begin\", \"End\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tif (this.isNumericDataType(sType) || this.isDateOrTimeDataType(sType)) {\n\t\t\t\t\tsDefaultAlignment = \"Right\";\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\treturn sDefaultAlignment;\n\t},\n\n\tgetDataFieldAlignment: function (oDataField: any, oModel: any, sEntityPath: any, oFormatOptions?: any, oComputedEditMode?: any) {\n\t\tlet sDataFieldPath,\n\t\t\tsDefaultAlignment = \"Begin\",\n\t\t\tsType,\n\t\t\toAnnotations;\n\n\t\tif (oDataField[\"$Type\"] === \"com.sap.vocabularies.UI.v1.DataFieldForAnnotation\") {\n\t\t\tsDataFieldPath = oDataField.Target.$AnnotationPath;\n\t\t\tif (\n\t\t\t\toDataField.Target[\"$AnnotationPath\"] &&\n\t\t\t\toDataField.Target[\"$AnnotationPath\"].indexOf(\"com.sap.vocabularies.UI.v1.FieldGroup\") >= 0\n\t\t\t) {\n\t\t\t\tconst oFieldGroup = oModel.getObject(`${sEntityPath}/${sDataFieldPath}`);\n\n\t\t\t\tfor (let i = 0; i < oFieldGroup.Data.length; i++) {\n\t\t\t\t\tsType = oModel.getObject(`${sEntityPath}/${sDataFieldPath}/Data/${i.toString()}/Value/$Path/$Type`);\n\t\t\t\t\toAnnotations = oModel.getObject(`${sEntityPath}/${sDataFieldPath}/Data/${i.toString()}/Value/$Path@`);\n\t\t\t\t\tsType = this.getUnderlyingPropertyDataType(oAnnotations, oModel, sEntityPath, sType);\n\t\t\t\t\tsDefaultAlignment = this.getPropertyAlignment(sType, oFormatOptions, oComputedEditMode);\n\n\t\t\t\t\tif (sDefaultAlignment === \"Begin\") {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn sDefaultAlignment;\n\t\t\t} else if (\n\t\t\t\toDataField.Target[\"$AnnotationPath\"] &&\n\t\t\t\toDataField.Target[\"$AnnotationPath\"].indexOf(\"com.sap.vocabularies.UI.v1.DataPoint\") >= 0 &&\n\t\t\t\toModel.getObject(`${sEntityPath}/${sDataFieldPath}/Visualization/$EnumMember`) ===\n\t\t\t\t\t\"com.sap.vocabularies.UI.v1.VisualizationType/Rating\"\n\t\t\t) {\n\t\t\t\treturn sDefaultAlignment;\n\t\t\t} else {\n\t\t\t\tsType = oModel.getObject(`${sEntityPath}/${sDataFieldPath}/$Type`);\n\t\t\t\tif (sType === \"com.sap.vocabularies.UI.v1.DataPointType\") {\n\t\t\t\t\tsType = oModel.getObject(`${sEntityPath}/${sDataFieldPath}/Value/$Path/$Type`);\n\t\t\t\t\toAnnotations = oModel.getObject(`${sEntityPath}/${sDataFieldPath}/Value/$Path@`);\n\t\t\t\t\tsType = this.getUnderlyingPropertyDataType(oAnnotations, oModel, sEntityPath, sType);\n\t\t\t\t}\n\t\t\t\tsDefaultAlignment = this.getPropertyAlignment(sType, oFormatOptions, oComputedEditMode);\n\t\t\t}\n\t\t} else {\n\t\t\tsDataFieldPath = oDataField.Value.$Path;\n\t\t\tsType = oModel.getObject(`${sEntityPath}/${sDataFieldPath}/$Type`);\n\t\t\toAnnotations = oModel.getObject(`${sEntityPath}/${sDataFieldPath}@`);\n\t\t\tsType = this.getUnderlyingPropertyDataType(oAnnotations, oModel, sEntityPath, sType);\n\t\t\tif (!(oModel.getObject(`${sEntityPath}/`)[\"$Key\"].indexOf(sDataFieldPath) === 0)) {\n\t\t\t\tsDefaultAlignment = this.getPropertyAlignment(sType, oFormatOptions, oComputedEditMode);\n\t\t\t}\n\t\t}\n\t\treturn sDefaultAlignment;\n\t},\n\tgetTypeAlignment: function (\n\t\toContext: any,\n\t\toDataField: any,\n\t\toFormatOptions: any,\n\t\tsEntityPath: string,\n\t\toComputedEditMode: any,\n\t\toProperty: any\n\t) {\n\t\tconst oInterface = oContext.getInterface(0);\n\t\tconst oModel = oInterface.getModel();\n\n\t\tif (sEntityPath === \"/undefined\" && oProperty && oProperty.$target) {\n\t\t\tsEntityPath = `/${oProperty.$target.fullyQualifiedName.split(\"/\")[0]}`;\n\t\t}\n\t\treturn FieldHelper.getDataFieldAlignment(oDataField, oModel, sEntityPath, oFormatOptions, oComputedEditMode);\n\t},\n\n\t/**\n\t * Method to get enabled expression for DataFieldActionButton.\n\t *\n\t * @function\n\t * @name isDataFieldActionButtonEnabled\n\t * @param oDataField DataPoint's Value\n\t * @param bIsBound DataPoint action bound\n\t * @param oActionContext ActionContext Value\n\t * @param sActionContextFormat Formatted value of ActionContext\n\t * @returns A boolean or string expression for enabled property\n\t */\n\tisDataFieldActionButtonEnabled: function (oDataField: any, bIsBound: boolean, oActionContext: any, sActionContextFormat: string) {\n\t\tif (bIsBound !== true) {\n\t\t\treturn \"true\";\n\t\t}\n\t\treturn (oActionContext === null ? \"{= !${#\" + oDataField.Action + \"} ? false : true }\" : oActionContext)\n\t\t\t? sActionContextFormat\n\t\t\t: \"true\";\n\t},\n\t/**\n\t * Method to get labelText for DataField.\n\t *\n\t * @function\n\t * @name getLabelTextForDataField\n\t * @param oEntitySetModel The EntitySet model Object\n\t * @param oPropertyPath The Property path's object\n\t * @param sPropertyPathBuildExpression The evaluated value of expression @@FIELD.buildExpressionForTextValue\n\t * @param sPropertyValue Property value from model\n\t * @param sUiName The sapui.name annotation value\n\t * @param sSemanticKeyStyle\n\t * @returns The binding expression for datafield label.\n\t */\n\tgetLabelTextForDataField: function (\n\t\toEntitySetModel: any,\n\t\toPropertyPath: any,\n\t\tsPropertyPathBuildExpression: string,\n\t\tsPropertyValue: string,\n\t\tsUiName: string,\n\t\tsSemanticKeyStyle: string\n\t) {\n\t\tconst oDraftRoot = oEntitySetModel[\"@com.sap.vocabularies.Common.v1.DraftRoot\"];\n\t\treturn FieldHelper.getSemanticKeyTitle(\n\t\t\toPropertyPath[\"@com.sap.vocabularies.Common.v1.Text\"] && sPropertyPathBuildExpression,\n\t\t\tsPropertyValue,\n\t\t\tsUiName,\n\t\t\toPropertyPath[\"@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement\"],\n\t\t\tsSemanticKeyStyle,\n\t\t\toDraftRoot\n\t\t);\n\t},\n\n\t/**\n\t * Method to retrieve text from value list for DataField.\n\t *\n\t * @function\n\t * @name retrieveTextFromValueList\n\t * @param oEntitySetModel The EntitySet model Object\n\t * @param sPropertyPath The property path's name\n\t * @param oFormatOptions The evaluated informations for the format option\n\t * @returns The binding expression for datafield text.\n\t */\n\tretrieveTextFromValueList: function (oEntitySetModel: any, sPropertyPath: string, oFormatOptions: any) {\n\t\tconst sPropertyFullPath = `${oEntitySetModel.sPath}/${sPropertyPath}`;\n\t\tconst sDisplayFormat = oFormatOptions.displayMode;\n\t\tCommonHelper.setMetaModel(oEntitySetModel.getModel());\n\t\treturn \"{= FieldRuntime.retrieveTextFromValueList(%{\" + sPropertyPath + \"},'\" + sPropertyFullPath + \"','\" + sDisplayFormat + \"')}\";\n\t},\n\n\t/**\n\t * Method to compute the label for a DataField.\n\t * If the DataField's label is an empty string, it's not rendered even if a fallback exists.\n\t *\n\t * @function\n\t * @name computeLabelText\n\t * @param {object} oDataField The DataField being processed\n\t * @param {object} oInterface The interface for context instance\n\t * @returns {string} The computed text for the DataField label.\n\t */\n\n\tcomputeLabelText: function (oDataField: any, oInterface: any) {\n\t\tconst oModel = oInterface.context.getModel();\n\t\tlet sContextPath = oInterface.context.getPath();\n\t\tif (sContextPath.endsWith(\"/\")) {\n\t\t\tsContextPath = sContextPath.slice(0, sContextPath.lastIndexOf(\"/\"));\n\t\t}\n\t\tconst sDataFieldLabel = oModel.getObject(`${sContextPath}/Label`);\n\t\t//We do not show an additional label text for a button:\n\t\tif (\n\t\t\toDataField.$Type === \"com.sap.vocabularies.UI.v1.DataFieldForAction\" ||\n\t\t\toDataField.$Type === \"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation\"\n\t\t) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (sDataFieldLabel) {\n\t\t\treturn sDataFieldLabel;\n\t\t} else if (sDataFieldLabel === \"\") {\n\t\t\treturn \"\";\n\t\t}\n\t\tlet sDataFieldTargetTitle;\n\t\tif (oDataField.$Type === \"com.sap.vocabularies.UI.v1.DataFieldForAnnotation\") {\n\t\t\tif (\n\t\t\t\toDataField.Target.$AnnotationPath.indexOf(\"@com.sap.vocabularies.UI.v1.DataPoint\") > -1 ||\n\t\t\t\toDataField.Target.$AnnotationPath.indexOf(\"@com.sap.vocabularies.UI.v1.Chart\") > -1\n\t\t\t) {\n\t\t\t\tsDataFieldTargetTitle = oModel.getObject(`${sContextPath}/Target/$AnnotationPath@/Title`);\n\t\t\t}\n\t\t\tif (oDataField.Target.$AnnotationPath.indexOf(\"@com.sap.vocabularies.Communication.v1.Contact\") > -1) {\n\t\t\t\tsDataFieldTargetTitle = oModel.getObject(\n\t\t\t\t\t`${sContextPath}/Target/$AnnotationPath@/fn/$Path@com.sap.vocabularies.Common.v1.Label`\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tif (sDataFieldTargetTitle) {\n\t\t\treturn sDataFieldTargetTitle;\n\t\t}\n\t\tlet sDataFieldTargetLabel;\n\t\tif (oDataField.$Type === \"com.sap.vocabularies.UI.v1.DataFieldForAnnotation\") {\n\t\t\tsDataFieldTargetLabel = oModel.getObject(`${sContextPath}/Target/$AnnotationPath@/Label`);\n\t\t}\n\t\tif (sDataFieldTargetLabel) {\n\t\t\treturn sDataFieldTargetLabel;\n\t\t}\n\n\t\tconst sDataFieldValueLabel = oModel.getObject(`${sContextPath}/Value/$Path@com.sap.vocabularies.Common.v1.Label`);\n\t\tif (sDataFieldValueLabel) {\n\t\t\treturn sDataFieldValueLabel;\n\t\t}\n\n\t\tlet sDataFieldTargetValueLabel;\n\t\tif (oDataField.$Type === \"com.sap.vocabularies.UI.v1.DataFieldForAnnotation\") {\n\t\t\tsDataFieldTargetValueLabel = oModel.getObject(\n\t\t\t\t`${sContextPath}/Target/$AnnotationPath/Value/$Path@com.sap.vocabularies.Common.v1.Label`\n\t\t\t);\n\t\t}\n\t\tif (sDataFieldTargetValueLabel) {\n\t\t\treturn sDataFieldTargetValueLabel;\n\t\t}\n\t\treturn \"\";\n\t},\n\t/**\n\t * Method to align the data fields with their label.\n\t *\n\t * @function\n\t * @name buildExpressionForAlignItems\n\t * @param sVisualization\n\t * @returns Expression binding for alignItems property\n\t */\n\tbuildExpressionForAlignItems: function (sVisualization: string) {\n\t\tconst fieldVisualizationBindingExpression = constant(sVisualization);\n\t\tconst progressVisualizationBindingExpression = constant(\"com.sap.vocabularies.UI.v1.VisualizationType/Progress\");\n\t\tconst ratingVisualizationBindingExpression = constant(\"com.sap.vocabularies.UI.v1.VisualizationType/Rating\");\n\t\treturn compileExpression(\n\t\t\tifElse(\n\t\t\t\tor(\n\t\t\t\t\tequal(fieldVisualizationBindingExpression, progressVisualizationBindingExpression),\n\t\t\t\t\tequal(fieldVisualizationBindingExpression, ratingVisualizationBindingExpression)\n\t\t\t\t),\n\t\t\t\tconstant(\"Center\"),\n\t\t\t\tifElse(UI.IsEditable, constant(\"Center\"), constant(\"Stretch\"))\n\t\t\t)\n\t\t);\n\t},\n\n\t/**\n\t * Method to check ValueListReferences, ValueListMapping and ValueList inside ActionParameters for FieldHelp.\n\t *\n\t * @function\n\t * @name hasValueHelp\n\t * @param oPropertyAnnotations Action parameter object\n\t * @returns `true` if there is a ValueList* annotation defined\n\t */\n\thasValueHelpAnnotation: function (oPropertyAnnotations: any) {\n\t\tif (oPropertyAnnotations) {\n\t\t\treturn (\n\t\t\t\toPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.ValueListReferences\"] ||\n\t\t\t\toPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.ValueListMapping\"] ||\n\t\t\t\toPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.ValueList\"]\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t},\n\t/**\n\t * Method to get display property for ActionParameter dialog.\n\t *\n\t * \t@function\n\t * @name getAPDialogDisplayFormat\n\t * @param oProperty The action parameter instance\n\t * @param oInterface The interface for the context instance\n\t * @returns The display format  for an action parameter Field\n\t */\n\tgetAPDialogDisplayFormat: function (oProperty: any, oInterface: any) {\n\t\tlet oAnnotation;\n\t\tconst oModel = oInterface.context.getModel();\n\t\tconst sContextPath = oInterface.context.getPath();\n\t\tconst sPropertyName = oProperty.$Name || oInterface.context.getProperty(`${sContextPath}@sapui.name`);\n\t\tconst oActionParameterAnnotations = oModel.getObject(`${sContextPath}@`);\n\t\tconst oValueHelpAnnotation =\n\t\t\toActionParameterAnnotations[\"@com.sap.vocabularies.Common.v1.ValueList\"] ||\n\t\t\toActionParameterAnnotations[\"@com.sap.vocabularies.Common.v1.ValueListMapping\"] ||\n\t\t\toActionParameterAnnotations[\"@com.sap.vocabularies.Common.v1.ValueListReferences\"];\n\t\tconst getValueListPropertyName = function (oValueList: any) {\n\t\t\tconst oValueListParameter = oValueList.Parameters.find(function (oParameter: any) {\n\t\t\t\treturn oParameter.LocalDataProperty && oParameter.LocalDataProperty.$PropertyPath === sPropertyName;\n\t\t\t});\n\t\t\treturn oValueListParameter && oValueListParameter.ValueListProperty;\n\t\t};\n\t\tlet sValueListPropertyName;\n\t\tif (\n\t\t\toActionParameterAnnotations[\"@com.sap.vocabularies.Common.v1.TextArrangement\"] ||\n\t\t\toActionParameterAnnotations[\"@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement\"]\n\t\t) {\n\t\t\treturn CommonUtils.computeDisplayMode(oActionParameterAnnotations, undefined);\n\t\t} else if (oValueHelpAnnotation) {\n\t\t\tif (oValueHelpAnnotation.CollectionPath) {\n\t\t\t\t// get the name of the corresponding property in value list collection\n\t\t\t\tsValueListPropertyName = getValueListPropertyName(oValueHelpAnnotation);\n\t\t\t\tif (!sValueListPropertyName) {\n\t\t\t\t\treturn \"Value\";\n\t\t\t\t}\n\t\t\t\t// get text for this property\n\t\t\t\toAnnotation = oModel.getObject(`/${oValueHelpAnnotation.CollectionPath}/${sValueListPropertyName}@`);\n\t\t\t\treturn oAnnotation && oAnnotation[\"@com.sap.vocabularies.Common.v1.Text\"]\n\t\t\t\t\t? CommonUtils.computeDisplayMode(oAnnotation, undefined)\n\t\t\t\t\t: \"Value\";\n\t\t\t} else {\n\t\t\t\treturn oModel.requestValueListInfo(sContextPath, true).then(function (oValueListInfo: any) {\n\t\t\t\t\t// get the name of the corresponding property in value list collection\n\t\t\t\t\tsValueListPropertyName = getValueListPropertyName(oValueListInfo[\"\"]);\n\t\t\t\t\tif (!sValueListPropertyName) {\n\t\t\t\t\t\treturn \"Value\";\n\t\t\t\t\t}\n\t\t\t\t\t// get text for this property\n\t\t\t\t\toAnnotation = oValueListInfo[\"\"].$model\n\t\t\t\t\t\t.getMetaModel()\n\t\t\t\t\t\t.getObject(`/${oValueListInfo[\"\"][\"CollectionPath\"]}/${sValueListPropertyName}@`);\n\t\t\t\t\treturn oAnnotation && oAnnotation[\"@com.sap.vocabularies.Common.v1.Text\"]\n\t\t\t\t\t\t? CommonUtils.computeDisplayMode(oAnnotation, undefined)\n\t\t\t\t\t\t: \"Value\";\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\treturn \"Value\";\n\t\t}\n\t},\n\t/**\n\t * Method to get display property for ActionParameter dialog FieldHelp.\n\t *\n\t * @function\n\t * @name getActionParameterDialogFieldHelp\n\t * @param oActionParameter Action parameter object\n\t * @param sSapUIName Action sapui name\n\t * @param sParamName The parameter name\n\t * @returns The ID of the fieldHelp used by this action parameter\n\t */\n\tgetActionParameterDialogFieldHelp: function (oActionParameter: object, sSapUIName: string, sParamName: string) {\n\t\treturn this.hasValueHelpAnnotation(oActionParameter) ? generate([sSapUIName, sParamName]) : undefined;\n\t},\n\t/**\n\t * Method to get the delegate configuration for ActionParameter dialog.\n\t *\n\t * @function\n\t * @name getValueHelpDelegate\n\t * @param isBound Action is bound\n\t * @param entityTypePath The EntityType Path\n\t * @param sapUIName The name of the Action\n\t * @param paramName The name of the ActionParameter\n\t * @returns The delegate configuration object as a string\n\t */\n\tgetValueHelpDelegate: function (isBound: boolean, entityTypePath: string, sapUIName: string, paramName: string) {\n\t\tconst delegateConfiguration: { name: string; payload: ValueHelpPayload } = {\n\t\t\tname: CommonHelper.addSingleQuotes(\"sap/fe/macros/valuehelp/ValueHelpDelegate\"),\n\t\t\tpayload: {\n\t\t\t\tpropertyPath: CommonHelper.addSingleQuotes(\n\t\t\t\t\tValueListHelper.getPropertyPath({\n\t\t\t\t\t\tUnboundAction: !isBound,\n\t\t\t\t\t\tEntityTypePath: entityTypePath,\n\t\t\t\t\t\tAction: sapUIName,\n\t\t\t\t\t\tProperty: paramName\n\t\t\t\t\t})\n\t\t\t\t),\n\t\t\t\tqualifiers: {},\n\t\t\t\tvalueHelpQualifier: CommonHelper.addSingleQuotes(\"\"),\n\t\t\t\tisActionParameterDialog: true\n\t\t\t}\n\t\t};\n\t\treturn CommonHelper.objectToString(delegateConfiguration);\n\t},\n\t/**\n\t * Method to get the delegate configuration for NonComputedVisibleKeyField dialog.\n\t *\n\t * @function\n\t * @name getValueHelpDelegateForNonComputedVisibleKeyField\n\t * @param propertyPath The current property path\n\t * @returns The delegate configuration object as a string\n\t */\n\tgetValueHelpDelegateForNonComputedVisibleKeyField: function (propertyPath: string) {\n\t\tconst delegateConfiguration: { name: string; payload: ValueHelpPayload } = {\n\t\t\tname: CommonHelper.addSingleQuotes(\"sap/fe/macros/valuehelp/ValueHelpDelegate\"),\n\t\t\tpayload: {\n\t\t\t\tpropertyPath: CommonHelper.addSingleQuotes(propertyPath),\n\t\t\t\tqualifiers: {},\n\t\t\t\tvalueHelpQualifier: CommonHelper.addSingleQuotes(\"\")\n\t\t\t}\n\t\t};\n\t\treturn CommonHelper.objectToString(delegateConfiguration);\n\t},\n\n\t/**\n\t * Method to fetch entity from a path containing multiple associations.\n\t *\n\t * @function\n\t * @name _getEntitySetFromMultiLevel\n\t * @param oContext The context whose path is to be checked\n\t * @param sPath The path from which entity has to be fetched\n\t * @param sSourceEntity The entity path in which nav entity exists\n\t * @param iStart The start index : beginning parts of the path to be ignored\n\t * @param iDiff The diff index : end parts of the path to be ignored\n\t * @returns The path of the entity set\n\t */\n\t_getEntitySetFromMultiLevel: function (oContext: Context, sPath: string, sSourceEntity: string, iStart: any, iDiff: any) {\n\t\tlet aNavParts = sPath.split(\"/\").filter(Boolean);\n\t\taNavParts = aNavParts.filter(function (sPart: string) {\n\t\t\treturn sPart !== \"$NavigationPropertyBinding\";\n\t\t});\n\t\tif (aNavParts.length > 0) {\n\t\t\tfor (let i = iStart; i < aNavParts.length - iDiff; i++) {\n\t\t\t\tsSourceEntity = `/${oContext.getObject(`${sSourceEntity}/$NavigationPropertyBinding/${aNavParts[i]}`)}`;\n\t\t\t}\n\t\t}\n\t\treturn sSourceEntity;\n\t},\n\t/**\n\t * Method to find the entity of the property.\n\t *\n\t * @function\n\t * @name getPropertyCollection\n\t * @param oProperty The context from which datafield's path needs to be extracted.\n\t * @param oContextObject The Metadata Context(Not passed when called with template:with)\n\t * @returns The entity set path of the property\n\t */\n\tgetPropertyCollection: function (oProperty: object, oContextObject: any) {\n\t\tconst oContext = (oContextObject && oContextObject.context) || oProperty;\n\t\tconst sPath = oContext.getPath();\n\t\tconst aMainEntityParts = sPath.split(\"/\").filter(Boolean);\n\t\tconst sMainEntity = aMainEntityParts[0];\n\t\tconst sPropertyPath = oContext.getObject(\"$Path\");\n\t\tlet sFieldSourceEntity = `/${sMainEntity}`;\n\t\t// checking against prefix of annotations, ie. @com.sap.vocabularies.\n\t\t// as annotation path can be of a line item, field group or facet\n\t\tif (sPath.indexOf(\"/@com.sap.vocabularies.\") > -1) {\n\t\t\tconst iAnnoIndex = sPath.indexOf(\"/@com.sap.vocabularies.\");\n\t\t\tconst sInnerPath = sPath.substring(0, iAnnoIndex);\n\t\t\t// the facet or line item's entity could be a navigation entity\n\t\t\tsFieldSourceEntity = FieldHelper._getEntitySetFromMultiLevel(oContext, sInnerPath, sFieldSourceEntity, 1, 0);\n\t\t}\n\t\tif (sPropertyPath && sPropertyPath.indexOf(\"/\") > -1) {\n\t\t\t// the field within facet or line item could be from a navigation entity\n\t\t\tsFieldSourceEntity = FieldHelper._getEntitySetFromMultiLevel(oContext, sPropertyPath, sFieldSourceEntity, 0, 1);\n\t\t}\n\t\treturn sFieldSourceEntity;\n\t},\n\t/**\n\t * Method used in a template with to retrieve the currency or the unit property inside a templating variable.\n\t *\n\t * @param oPropertyAnnotations\n\t * @returns The annotationPath to be dealt with by template:with\n\t */\n\tgetUnitOrCurrency: function (oPropertyAnnotations: any) {\n\t\tconst oPropertyAnnotationsObject = oPropertyAnnotations.getObject();\n\t\tlet sAnnotationPath = oPropertyAnnotations.sPath;\n\t\tif (oPropertyAnnotationsObject[\"@Org.OData.Measures.V1.ISOCurrency\"]) {\n\t\t\tsAnnotationPath = `${sAnnotationPath}Org.OData.Measures.V1.ISOCurrency`;\n\t\t} else {\n\t\t\tsAnnotationPath = `${sAnnotationPath}Org.OData.Measures.V1.Unit`;\n\t\t}\n\n\t\treturn sAnnotationPath;\n\t},\n\thasStaticUnitOrCurrency: function (oPropertyAnnotations: any) {\n\t\treturn oPropertyAnnotations[\"@Org.OData.Measures.V1.ISOCurrency\"]\n\t\t\t? !oPropertyAnnotations[\"@Org.OData.Measures.V1.ISOCurrency\"].$Path\n\t\t\t: !oPropertyAnnotations[\"@Org.OData.Measures.V1.Unit\"].$Path;\n\t},\n\tgetStaticUnitOrCurrency: function (oPropertyAnnotations: any, oFormatOptions: any) {\n\t\tif (oFormatOptions && oFormatOptions.measureDisplayMode !== \"Hidden\") {\n\t\t\tconst unit = oPropertyAnnotations[\"@Org.OData.Measures.V1.ISOCurrency\"] || oPropertyAnnotations[\"@Org.OData.Measures.V1.Unit\"];\n\n\t\t\tconst dateFormat = DateFormat.getDateInstance() as any;\n\t\t\tconst localeData = dateFormat.oLocaleData.mData;\n\n\t\t\tif (\n\t\t\t\tlocaleData &&\n\t\t\t\tlocaleData.units &&\n\t\t\t\tlocaleData.units.short &&\n\t\t\t\tlocaleData.units.short[unit] &&\n\t\t\t\tlocaleData.units.short[unit].displayName\n\t\t\t) {\n\t\t\t\treturn localeData.units.short[unit].displayName;\n\t\t\t}\n\n\t\t\treturn unit;\n\t\t}\n\t},\n\tgetEmptyIndicatorTrigger: function (bActive: any, sBinding: any, sFullTextBinding: any) {\n\t\tif (sFullTextBinding) {\n\t\t\treturn bActive ? sFullTextBinding : \"inactive\";\n\t\t}\n\t\treturn bActive ? sBinding : \"inactive\";\n\t},\n\t/**\n\t * When the value displayed is in text arrangement TextOnly we also want to retrieve the Text value for tables even if we don't show it.\n\t * This method will return the value of the original data field.\n\t *\n\t * @param oThis The current object\n\t * @param oDataFieldTextArrangement DataField using text arrangement annotation\n\t * @param oDataField DataField containing the value using text arrangement annotation\n\t * @returns The binding to the value\n\t */\n\tgetBindingInfoForTextArrangement: function (oThis: object, oDataFieldTextArrangement: any, oDataField: any) {\n\t\tif (\n\t\t\toDataFieldTextArrangement &&\n\t\t\toDataFieldTextArrangement.$EnumMember &&\n\t\t\toDataFieldTextArrangement.$EnumMember === \"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly\" &&\n\t\t\toDataField\n\t\t) {\n\t\t\treturn `{${oDataField.Value.$Path}}`;\n\t\t}\n\t\treturn undefined;\n\t},\n\n\tsemanticKeyFormat: function (vRaw: any, oInterface: any) {\n\t\t// The Empty argument ensures that \"groupingEnabled\" is added to \"formatOptions\"\n\t\toInterface.arguments = [{}, { groupingEnabled: false }];\n\t\treturn AnnotationHelper.format(vRaw, oInterface);\n\t},\n\tgetIsMediaContentTypeNullExpr: function (sPropertyPath: any, sOperator: any) {\n\t\tsOperator = sOperator || \"===\";\n\t\treturn \"{= %{\" + sPropertyPath + \"@odata.mediaContentType} \" + sOperator + \" null }\";\n\t},\n\tgetPathForIconSource: function (sPropertyPath: any) {\n\t\treturn \"{= FIELDRUNTIME.getIconForMimeType(%{\" + sPropertyPath + \"@odata.mediaContentType})}\";\n\t},\n\tgetFilenameExpr: function (sFilename: any, sNoFilenameText: any) {\n\t\tif (sFilename) {\n\t\t\tif (sFilename.indexOf(\"{\") === 0) {\n\t\t\t\t// filename is referenced via path, i.e. @Core.ContentDisposition.Filename : path\n\t\t\t\treturn \"{= $\" + sFilename + \" ? $\" + sFilename + \" : $\" + sNoFilenameText + \"}\";\n\t\t\t}\n\t\t\t// static filename, i.e. @Core.ContentDisposition.Filename : 'someStaticName'\n\t\t\treturn sFilename;\n\t\t}\n\t\t// no @Core.ContentDisposition.Filename\n\t\treturn sNoFilenameText;\n\t},\n\n\tcalculateMBfromByte: function (iByte: any) {\n\t\treturn iByte ? (iByte / (1024 * 1024)).toFixed(6) : undefined;\n\t},\n\tgetDownloadUrl: function (propertyPath: string) {\n\t\treturn propertyPath + \"{= ${internal>/stickySessionToken} ? ('?SAP-ContextId=' + ${internal>/stickySessionToken}) : '' }\";\n\t},\n\tgetMarginClass: function (compactSemanticKey: string | boolean) {\n\t\treturn compactSemanticKey === \"true\" || compactSemanticKey === true ? \"sapMTableContentMargin\" : undefined;\n\t},\n\tgetRequired: function (immutableKey: any, target: any, requiredProperties: any) {\n\t\tlet targetRequiredExpression: any = constant(false);\n\t\tif (target !== null) {\n\t\t\ttargetRequiredExpression = isRequiredExpression(target?.targetObject);\n\t\t}\n\t\treturn compileExpression(or(targetRequiredExpression, requiredProperties.indexOf(immutableKey) > -1));\n\t},\n\n\t/**\n\t * The method checks if the field is already part of a form.\n\t *\n\t * @param dataFieldCollection The list of the fields of the form\n\t * @param dataFieldObjectPath The data model object path of the field which needs to be checked in the form\n\t * @returns `true` if the field is already part of the form, `false` otherwise\n\t */\n\tisFieldPartOfForm: function (dataFieldCollection: FormElement[], dataFieldObjectPath: DataModelObjectPath) {\n\t\t//generating key for the received data field\n\t\tconst connectedDataFieldKey = KeyHelper.generateKeyFromDataField(dataFieldObjectPath.targetObject);\n\t\t// trying to find the generated key in already existing form elements\n\t\tconst isFieldFound = dataFieldCollection.find((field) => {\n\t\t\treturn field.key === connectedDataFieldKey;\n\t\t});\n\t\treturn isFieldFound ? true : false;\n\t}\n};\n(FieldHelper.buildExpressionForTextValue as any).requiresIContext = true;\n(FieldHelper.getFieldGroupIds as any).requiresIContext = true;\n(FieldHelper.fieldControl as any).requiresIContext = true;\n(FieldHelper.getTypeAlignment as any).requiresIContext = true;\n(FieldHelper.getPropertyCollection as any).requiresIContext = true;\n(FieldHelper.getAPDialogDisplayFormat as any).requiresIContext = true;\n(FieldHelper.semanticKeyFormat as any).requiresIContext = true;\n(FieldHelper.computeLabelText as any).requiresIContext = true;\n(FieldHelper.retrieveTextFromValueList as any).requiresIContext = true;\n(FieldHelper.getActionParameterVisibility as any).requiresIContext = true;\n\nexport default FieldHelper;\n"],"mappings":"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"}},{"offset":{"line":7143,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","CommonUtils","BindingHelper","Key","BindingToolkit","ModelHelper","SideEffectsHelper","StableIdHelper","FieldControlHelper","PropertyHelper","UIFormatters","CommonHelper","ValueListHelper","ResourceModel","ManagedObject","DateFormat","JSONModel","AnnotationHelper","getAlignmentExpression","isProperty","isRequiredExpression","generate","pathInModel","or","ifElse","equal","constant","compileExpression","KeyHelper","UI","ISOCurrency","Unit","async","_generateSideEffectsMap","oInterface","oMetaModel","getModel","oFieldSettings","getSetting","oSideEffects","sideEffects","generateSideEffectsMapFromMetaModel","FieldHelper","displayMode","oPropertyAnnotations","oCollectionAnnotations","oTextAnnotation","oTextArrangementAnnotation","$EnumMember","buildExpressionForTextValue","sPropertyPath","oDataField","context","sPath","getPath","oTextAnnotationContext","createBindingContext","getProperty","sTextExpression","value","undefined","sExpression","getNavigationPath","indexOf","replace","substr","length","buildTargetPathFromDataModelObjectPath","oDataModelObjectPath","sSartEntitySet","startingEntitySet","name","aNavigationProperties","navigationProperties","i","hasSemanticObjectTargets","oPropertyDataModelObjectPath","_oPropertyDefinition$","_oPropertyDefinition$2","_oPropertyDefinition$3","_oPropertyDefinition$4","_sSemanticObject$valu","oPropertyDefinition","targetObject","$target","sSemanticObject","annotations","Common","SemanticObject","aSemanticObjectUnavailableActions","SemanticObjectUnavailableActions","sPropertyLocationPath","sBindingExpression","path","valueOf","sAlternatePath","sBindingPath","getStateDependingOnSemanticObjectTargets","_oPropertyDefinition$5","_oPropertyDefinition$6","_oPropertyDefinition$7","_oPropertyDefinition$8","_sSemanticObject$valu2","isNotAlwaysHidden","oDetails","oContext","isAlwaysHidden","Value","$Path","getObject","isDraftIndicatorVisibleInFieldGroup","column","formatOptions","fieldGroupDraftIndicatorPropertyPath","fieldGroupName","isRequired","oFieldControl","sEditMode","bindingParser","getActionParameterVisibility","oParam","$If","oNegParam","propertyName","vProperty","sPropertyName","$PropertyPath","sContextPath","getFieldGroupIds","getInterface","then","sOwnerEntityType","aFieldGroupIds","getSideEffectsOnEntityAndProperty","sFieldGroupIds","reduce","sResult","sId","bIsNavigationPath","lastIndexOf","concat","fieldControl","oModel","oFieldControlContext","hasOwnProperty","valueHelpProperty","oPropertyContext","bInFilterField","oContent","sAnnoPath","sAnnotation","sUnitOrCurrencyPath","valueHelpPropertyForFilterField","getIDForFieldValueHelp","sFlexId","sIdPrefix","sOriginalPropertyName","sProperty","getFieldHelpPropertyForFilterField","propertyContext","oProperty","sPropertyType","sVhIdPrefix","sValueHelpPropertyName","bHasValueListWithFixedValues","bUseSemanticDateRange","bSemanticDateRange","getLocationForPropertyPath","oFilterRestrictions","getFilterRestrictionsByPath","FilterAllowedExpressions","getSemanticKeyTitle","sPropertyTextValue","sPropertyValue","sDataField","oTextArrangement","sSemanticKeyStyle","oDraftRoot","sNewObject","getText","sUnnamedObject","sNewObjectExpression","sUnnnamedObjectExpression","sSemanticKeyTitleExpression","addNewObjectUnNamedObjectExpression","sValue","buildExpressionForSemantickKeyTitle","bIsExpressionBinding","sTextArrangement","getObjectIdentifierText","sPropertyValueBinding","sDataFieldName","getSemanticObjectsList","propertyAnnotations","aSemanticObjects","key","semanticObjectValue","push","oSemanticObjectsModel","$$valueAsPromise","getSemanticObjectsQualifiers","qualifiersAnnotations","findObject","qualifier","find","object","annotationContent","annotation","split","qualifierObject","filter","oQualifier","oQualifiersModel","computeSemanticLinkModelContextChange","hasSemanticObjectsWithPath","sPathToProperty","bSemanticObjectHasAPath","isSemanticKeyHasFieldGroupColumn","isFieldGroupColumn","computeFieldBaseDelegate","delegateName","retrieveTextFromValueList","JSON","stringify","payload","_getPrimaryIntents","aSemanticObjectsList","aPromises","oUshellContainer","ushell","Container","oService","getService","forEach","semObject","getPrimaryIntent","Promise","all","aSemObjectPrimaryAction","catch","oError","error","_SemanticObjectsHasPrimaryAction","oSemantics","aSemanticObjectsPrimaryActions","_fnIsSemanticObjectActionUnavailable","_oSemantics","_oPrimaryAction","_index","unavailableActionsIndex","semanticObjectUnavailableActions","actions","intent","semanticPrimaryActions","oPrimaryAction","semanticObjects","mainSemanticObject","sCurrentHash","getHash","index","semanticObject","checkPrimaryActions","bGetTitleLink","this","titleLink","hasTitleLink","_getTitleLinkWithParameters","_oSemanticObjectModel","_linkIntent","titlelink","getPrimaryAction","primaryIntentAction","operators","sSettings","contextPath","propertyType","$Type","getOperatorsForGuidProperty","slice","isTableBoundToNavigation","isNavigationPath","navigationPath","propertyPath","getOperatorsForProperty","_operators","getEntitySetPath","toString","getOperatorsForDateProperty","getPropertyContextForQuickView","oDataFieldContext","endsWith","getPropertyPathForQuickView","getDataFieldDefault","oDataFieldDefault","isDataFieldActionButtonVisible","oThis","bIsBound","oActionContext","getPressEventForDataFieldActionButton","_oThis$entitySet","sInvocationGrouping","InvocationGrouping","bIsNavigable","navigateAfterAction","entities","entitySet","entitySetName","oParams","contexts","invocationGrouping","addSingleQuotes","model","label","Label","isNavigable","generateFunction","Action","objectToString","isNumericDataType","sDataFieldType","_sDataFieldType","aNumericDataTypes","isDateOrTimeDataType","aDateTimeDataTypes","isDateTimeDataType","aDateDataTypes","isDateDataType","isTimeDataType","getUnderlyingPropertyDataType","oAnnotations","sEntityPath","sType","sTextAnnotation","sTextArrangementAnnotation","getColumnAlignment","oTable","collection","Inline","IconUrl","aSemanticKeys","bIsSemanticKey","every","oKey","getDataFieldAlignment","getPropertyAlignment","oFormatOptions","oComputedEditMode","sDefaultAlignment","sTextAlignment","textAlignMode","sDataFieldPath","Target","$AnnotationPath","oFieldGroup","Data","getTypeAlignment","fullyQualifiedName","isDataFieldActionButtonEnabled","sActionContextFormat","getLabelTextForDataField","oEntitySetModel","oPropertyPath","sPropertyPathBuildExpression","sUiName","sPropertyFullPath","sDisplayFormat","setMetaModel","computeLabelText","sDataFieldLabel","sDataFieldTargetTitle","sDataFieldTargetLabel","sDataFieldValueLabel","sDataFieldTargetValueLabel","buildExpressionForAlignItems","sVisualization","fieldVisualizationBindingExpression","progressVisualizationBindingExpression","ratingVisualizationBindingExpression","IsEditable","hasValueHelpAnnotation","getAPDialogDisplayFormat","oAnnotation","$Name","oActionParameterAnnotations","oValueHelpAnnotation","getValueListPropertyName","oValueList","oValueListParameter","Parameters","oParameter","LocalDataProperty","ValueListProperty","sValueListPropertyName","computeDisplayMode","CollectionPath","requestValueListInfo","oValueListInfo","$model","getMetaModel","getActionParameterDialogFieldHelp","oActionParameter","sSapUIName","sParamName","getValueHelpDelegate","isBound","entityTypePath","sapUIName","paramName","delegateConfiguration","getPropertyPath","UnboundAction","EntityTypePath","Property","qualifiers","valueHelpQualifier","isActionParameterDialog","getValueHelpDelegateForNonComputedVisibleKeyField","_getEntitySetFromMultiLevel","sSourceEntity","iStart","iDiff","aNavParts","Boolean","sPart","getPropertyCollection","oContextObject","aMainEntityParts","sMainEntity","sFieldSourceEntity","iAnnoIndex","sInnerPath","substring","getUnitOrCurrency","oPropertyAnnotationsObject","sAnnotationPath","hasStaticUnitOrCurrency","getStaticUnitOrCurrency","measureDisplayMode","unit","dateFormat","getDateInstance","localeData","oLocaleData","mData","units","short","displayName","getEmptyIndicatorTrigger","bActive","sBinding","sFullTextBinding","getBindingInfoForTextArrangement","oDataFieldTextArrangement","semanticKeyFormat","vRaw","arguments","groupingEnabled","format","getIsMediaContentTypeNullExpr","sOperator","getPathForIconSource","getFilenameExpr","sFilename","sNoFilenameText","calculateMBfromByte","iByte","toFixed","getDownloadUrl","getMarginClass","compactSemanticKey","getRequired","immutableKey","target","requiredProperties","targetRequiredExpression","isFieldPartOfForm","dataFieldCollection","dataFieldObjectPath","connectedDataFieldKey","generateKeyFromDataField","isFieldFound","field","requiresIContext"],"sources":["FieldHelper-dbg.js"],"mappings":"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","sourceRoot":"field"}},{"offset":{"line":7148,"column":0},"map":{"version":3,"names":["getCollaborationBinding","field","binding","getBindingContext","getBinding","isA","oView","CommonUtils","getTargetView","FieldRuntime","resetChangesHandler","undefined","uploadPromises","onDataFieldWithNavigationPath","oSource","oController","sNavPath","_routing","oBindingContext","oMetaModel","getModel","getMetaModel","fnNavigate","oContext","navigateToTarget","getViewData","converterType","ModelHelper","isStickySessionSupported","draft","processDataLossOrDraftDiscardConfirmation","Function","prototype","getController","NavigationType","ForwardNavigation","Log","error","isDraftIndicatorVisible","sPropertyPath","sSemanticKeyHasDraftIndicator","HasDraftEntity","IsActiveEntity","hideDraftInfo","hasTargets","bSemanticObjectHasTargets","getStateDependingOnSemanticObjectTargets","onValidateFieldGroup","oEvent","oFEController","_getExtensionController","_sideEffects","handleFieldGroupChange","handleChange","oSourceField","getSource","bIsTransient","isTransient","pValueResolved","getParameter","Promise","resolve","bValid","fieldValidity","getFieldStateOnChange","state","then","mParameters","valid","FieldAPI","catch","_editFlow","syncTask","handleFieldChange","oField","bCollaborationEnabled","CollaborationActivitySync","isConnected","data","getBindingInfo","parts","map","part","getPath","path","hasPendingChanges","attachEventOnce","send","Activity","Change","Undo","handleLiveChange","event","bindingPath","fullPath","LiveChange","setTimeout","focusedControl","Core","byId","getCurrentFocusedControlId","getParent","detachBrowserEvent","attachBrowserEvent","handleOpenPicker","sBindingPath","sFullPath","handleClosePicker","_sendCollaborationMessageForFileUploader","fileUploader","activity","isCollaborationEnabled","getProperty","handleOpenUploader","handleCloseUploader","mFieldState","_isBindingStateMessages","oBinding","getDataState","getInvalidValue","getContent","FieldWrapper","getMetadata","getName","getEditMode","getContentEdit","bIsValid","getMaxConditions","oValueBindingInfo","getValue","fieldValue","validity","_fnFixHashQueryString","sCurrentHash","indexOf","split","_fnGetLinkInformation","_oSource","_oLink","_sPropertyPath","_sValue","fnSetActive","oModel","sSemanticObjectName","oInternalModelContext","oAppComponent","getAppComponent","oShellServiceHelper","getShellServices","pGetLinksPromise","getLinksWithCache","semanticObject","aSemanticObjectUnavailableActions","getObject","SemanticObjectName","SemanticObjectFullPath","MetaModel","InternalModelContext","ShellServiceHelper","GetLinksPromise","SemanticObjectUnavailableActions","_fnQuickViewHasNewCondition","oSemanticObjectPayload","_oLinkInfo","bResultingNewConditionForConditionalWrapper","_fnQuickViewSetNewConditionForConditionalWrapper","_oFinalSemanticObjects","sTmpPath","aSemanticObjectPaths","Object","keys","iPathsCount","_fnUpdateSemanticObjectsTargetModel","sValue","oControl","bActive","setActive","setTitleActive","oConditionalWrapper","setCondition","oLinkInfo","getHash","updateSemanticTargets","oFinalSemanticObjects","oError","_checkControlHasModelAndBindingContext","_control","_checkCustomDataValueBeforeUpdatingSemanticObjectModel","propertyPath","aCustomData","sSemanticObjectPathValue","oValueBinding","_fnCustomDataValueIsString","semanticObjectPathValue","filter","customData","getKey","index","_oChangeEvent","LinkModelContextChange","sProperty","sPathToProperty","control","mdcLink","getDependents","length","getCustomData","openExternalLink","source","openWindow","pressLink","oLink","findElements","elem","openLink","sHref","getTriggerHref","open","oShellHash","parseShellHash","oNavArgs","target","action","params","KeepAliveHelper","storeControlRefreshStrategyForHash","isStickyEditMode","toExternal","sNewHref","hrefForExternalAsync","oFieldInfo","uploadStream","controller","FEController","fileWrapper","uploadUrl","getUploadUrl","setUIBusy","setUploadUrl","removeAllHeaderParameters","token","getHttpHeaders","headerParameterCSRFToken","FileUploaderParameter","setName","setValue","addHeaderParameter","eTag","headerParameterETag","headerParameterAccept","uploadPromise","reject","getId","upload","MessageBox","ResourceModel","getText","handleUploadComplete","propertyFileName","status","context","_displayMessageForFailedUpload","newETag","etag","setProperty","_callSideEffectsForStream","notificationData","push","sError","sMessageText","JSON","parse","message","e","removeStream","deleteButton","getIconForMimeType","sMimeType","IconPool","retrieveTextFromValueList","sPropertyValue","sPropertyFullPath","sDisplayFormat","sTextProperty","sPropertyName","CommonHelper","requestValueListInfo","mValueListInfo","oValueListInfo","oValueListModel","$model","oMetaModelValueList","oParamWithKey","Parameters","find","oParameter","LocalDataProperty","$PropertyPath","ValueListProperty","oTextAnnotation","CollectionPath","$Path","oFilter","Filter","operator","value1","oListBinding","bindList","$select","requestContexts","aContexts","sDescription","getLibraryResourceBundle","sMsg","handleTypeMissmatch","details","getParameters","mimeType","getMimeType","toString","replaceAll","contentWidth","handleFileSizeExceed","getMaximumFileSize","toFixed","_controller"],"sourceRoot":"field","sources":["FieldRuntime.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport CollaborationActivitySync from \"sap/fe/core/controllerextensions/collaboration/ActivitySync\";\nimport { Activity } from \"sap/fe/core/controllerextensions/collaboration/CollaborationCommon\";\nimport draft from \"sap/fe/core/controllerextensions/editFlow/draft\";\nimport FieldWrapper from \"sap/fe/core/controls/FieldWrapper\";\nimport type FileWrapper from \"sap/fe/core/controls/FileWrapper\";\nimport type { EnhanceWithUI5 } from \"sap/fe/core/helpers/ClassSupport\";\nimport KeepAliveHelper from \"sap/fe/core/helpers/KeepAliveHelper\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport type PageController from \"sap/fe/core/PageController\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport FieldAPI from \"sap/fe/macros/field/FieldAPI\";\nimport ResourceModel from \"sap/fe/macros/ResourceModel\";\nimport type Button from \"sap/m/Button\";\nimport MessageBox from \"sap/m/MessageBox\";\nimport type Event from \"sap/ui/base/Event\";\nimport type Control from \"sap/ui/core/Control\";\nimport Core from \"sap/ui/core/Core\";\nimport type CustomData from \"sap/ui/core/CustomData\";\nimport IconPool from \"sap/ui/core/IconPool\";\nimport type Controller from \"sap/ui/core/mvc/Controller\";\nimport Filter from \"sap/ui/model/Filter\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataContextBinding from \"sap/ui/model/odata/v4/ODataContextBinding\";\nimport type ODataListBinding from \"sap/ui/model/odata/v4/ODataListBinding\";\nimport type FileUploader from \"sap/ui/unified/FileUploader\";\nimport FileUploaderParameter from \"sap/ui/unified/FileUploaderParameter\";\nimport openWindow from \"sap/ui/util/openWindow\";\nimport type { V4Context } from \"types/extension_types\";\n\n/**\n * Gets the binding used for collaboration notifications.\n *\n * @param field\n * @returns The binding\n */\nfunction getCollaborationBinding(field: Control): ODataListBinding | ODataContextBinding {\n\tlet binding = (field.getBindingContext() as Context).getBinding();\n\n\tif (!binding.isA(\"sap.ui.model.odata.v4.ODataListBinding\")) {\n\t\tconst oView = CommonUtils.getTargetView(field);\n\t\tbinding = (oView.getBindingContext() as V4Context).getBinding();\n\t}\n\n\treturn binding;\n}\n\n/**\n * Static class used by \"sap.ui.mdc.Field\" during runtime\n *\n * @private\n * @experimental This module is only for internal/experimental use!\n */\nconst FieldRuntime = {\n\tresetChangesHandler: undefined as any,\n\tuploadPromises: undefined as any,\n\n\t/**\n\t * Triggers an internal navigation on the link pertaining to DataFieldWithNavigationPath.\n\t *\n\t * @param oSource Source of the press event\n\t * @param oController Instance of the controller\n\t * @param sNavPath The navigation path\n\t */\n\tonDataFieldWithNavigationPath: function (oSource: Control, oController: PageController, sNavPath: string) {\n\t\tif (oController._routing) {\n\t\t\tlet oBindingContext = oSource.getBindingContext() as Context;\n\t\t\tconst oView = CommonUtils.getTargetView(oSource),\n\t\t\t\toMetaModel = oBindingContext.getModel().getMetaModel(),\n\t\t\t\tfnNavigate = function (oContext?: any) {\n\t\t\t\t\tif (oContext) {\n\t\t\t\t\t\toBindingContext = oContext;\n\t\t\t\t\t}\n\t\t\t\t\toController._routing.navigateToTarget(oBindingContext, sNavPath, true);\n\t\t\t\t};\n\t\t\t// Show draft loss confirmation dialog in case of Object page\n\t\t\tif ((oView.getViewData() as any).converterType === \"ObjectPage\" && !ModelHelper.isStickySessionSupported(oMetaModel)) {\n\t\t\t\tdraft.processDataLossOrDraftDiscardConfirmation(\n\t\t\t\t\tfnNavigate,\n\t\t\t\t\tFunction.prototype,\n\t\t\t\t\toBindingContext,\n\t\t\t\t\toView.getController(),\n\t\t\t\t\ttrue,\n\t\t\t\t\tdraft.NavigationType.ForwardNavigation\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tfnNavigate();\n\t\t\t}\n\t\t} else {\n\t\t\tLog.error(\n\t\t\t\t\"FieldRuntime: No routing listener controller extension found. Internal navigation aborted.\",\n\t\t\t\t\"sap.fe.macros.field.FieldRuntime\",\n\t\t\t\t\"onDataFieldWithNavigationPath\"\n\t\t\t);\n\t\t}\n\t},\n\tisDraftIndicatorVisible: function (\n\t\tsPropertyPath: any,\n\t\tsSemanticKeyHasDraftIndicator: any,\n\t\tHasDraftEntity: any,\n\t\tIsActiveEntity: any,\n\t\thideDraftInfo: any\n\t) {\n\t\tif (IsActiveEntity !== undefined && HasDraftEntity !== undefined && (!IsActiveEntity || HasDraftEntity) && !hideDraftInfo) {\n\t\t\treturn sPropertyPath === sSemanticKeyHasDraftIndicator;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\thasTargets: function (bSemanticObjectHasTargets: any /*sSemanticObjectPathValue: any*/) {\n\t\treturn bSemanticObjectHasTargets ? bSemanticObjectHasTargets : false;\n\t},\n\tgetStateDependingOnSemanticObjectTargets: function (bSemanticObjectHasTargets: any /*sSemanticObjectPathValue: any*/) {\n\t\treturn bSemanticObjectHasTargets ? \"Information\" : \"None\";\n\t},\n\t/**\n\t * Handler for the validateFieldGroup event.\n\t *\n\t * @function\n\t * @name onValidateFieldGroup\n\t * @param oController The controller of the page containing the field\n\t * @param oEvent The event object passed by the validateFieldGroup event\n\t */\n\tonValidateFieldGroup: function (oController: object, oEvent: object) {\n\t\tconst oFEController = FieldRuntime._getExtensionController(oController);\n\t\toFEController._sideEffects.handleFieldGroupChange(oEvent);\n\t},\n\t/**\n\t * Handler for the change event.\n\t * Store field group IDs of this field for requesting side effects when required.\n\t * We store them here to ensure a change in the value of the field has taken place.\n\t *\n\t * @function\n\t * @name handleChange\n\t * @param oController The controller of the page containing the field\n\t * @param oEvent The event object passed by the change event\n\t */\n\thandleChange: function (oController: object, oEvent: Event) {\n\t\tconst oSourceField = oEvent.getSource() as Control,\n\t\t\tbIsTransient = oSourceField && (oSourceField.getBindingContext() as any).isTransient(),\n\t\t\tpValueResolved = oEvent.getParameter(\"promise\") || Promise.resolve(),\n\t\t\toSource = oEvent.getSource(),\n\t\t\tbValid = oEvent.getParameter(\"valid\"),\n\t\t\tfieldValidity = this.getFieldStateOnChange(oEvent).state[\"validity\"];\n\n\t\t// TODO: currently we have undefined and true... and our creation row implementation relies on this.\n\t\t// I would move this logic to this place as it's hard to understand for field consumer\n\n\t\tpValueResolved\n\t\t\t.then(function () {\n\t\t\t\t// The event is gone. For now we'll just recreate it again\n\t\t\t\t(oEvent as any).oSource = oSource;\n\t\t\t\t(oEvent as any).mParameters = {\n\t\t\t\t\tvalid: bValid\n\t\t\t\t};\n\t\t\t\t(FieldAPI as any).handleChange(oEvent, oController);\n\t\t\t})\n\t\t\t.catch(function (/*oError: any*/) {\n\t\t\t\t// The event is gone. For now we'll just recreate it again\n\t\t\t\t(oEvent as any).oSource = oSource;\n\t\t\t\t(oEvent as any).mParameters = {\n\t\t\t\t\tvalid: false\n\t\t\t\t};\n\n\t\t\t\t// as the UI might need to react on. We could provide a parameter to inform if validation\n\t\t\t\t// was successful?\n\t\t\t\t(FieldAPI as any).handleChange(oEvent, oController);\n\t\t\t});\n\n\t\t// Use the FE Controller instead of the extensionAPI to access internal FE controllers\n\t\tconst oFEController = FieldRuntime._getExtensionController(oController);\n\n\t\toFEController._editFlow.syncTask(pValueResolved);\n\n\t\t// if the context is transient, it means the request would fail anyway as the record does not exist in reality\n\t\t// TODO: should the request be made in future if the context is transient?\n\t\tif (bIsTransient) {\n\t\t\treturn;\n\t\t}\n\n\t\t// SIDE EFFECTS\n\t\toFEController._sideEffects.handleFieldChange(oEvent, fieldValidity, pValueResolved);\n\n\t\t// Collaboration Draft Activity Sync\n\t\tconst oField = oEvent.getSource() as Control,\n\t\t\tbCollaborationEnabled = CollaborationActivitySync.isConnected(oField);\n\n\t\tif (bCollaborationEnabled && fieldValidity) {\n\t\t\t/* TODO: for now we use always the first binding part (so in case of composite bindings like amount and\n\t\t\t\t\tunit or currency only the amount is considered) */\n\t\t\tconst binding = getCollaborationBinding(oField);\n\n\t\t\tconst data = [\n\t\t\t\t...((oField.getBindingInfo(\"value\") || oField.getBindingInfo(\"selected\")) as any)?.parts,\n\t\t\t\t...((oField.getBindingInfo(\"additionalValue\") as any)?.parts || [])\n\t\t\t].map(function (part: any) {\n\t\t\t\tif (part) {\n\t\t\t\t\treturn `${oField.getBindingContext()?.getPath()}/${part.path}`;\n\t\t\t\t}\n\t\t\t}) as [];\n\n\t\t\tif (binding.hasPendingChanges()) {\n\t\t\t\t// The value has been changed by the user --> wait until it's sent to the server before sending a notification to other users\n\t\t\t\tbinding.attachEventOnce(\"patchCompleted\", function () {\n\t\t\t\t\tCollaborationActivitySync.send(oField, Activity.Change, data);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// No changes --> send a Undo notification\n\t\t\t\tCollaborationActivitySync.send(oField, Activity.Undo, data);\n\t\t\t}\n\t\t}\n\t},\n\n\thandleLiveChange: function (event: any) {\n\t\t// Collaboration Draft Activity Sync\n\t\tconst field = event.getSource();\n\n\t\tif (CollaborationActivitySync.isConnected(field)) {\n\t\t\t/* TODO: for now we use always the first binding part (so in case of composite bindings like amount and\n\t\t\t\t\tunit or currency only the amount is considered) */\n\t\t\tconst bindingPath = field.getBindingInfo(\"value\").parts[0].path;\n\t\t\tconst fullPath = `${field.getBindingContext().getPath()}/${bindingPath}`;\n\t\t\tCollaborationActivitySync.send(field, Activity.LiveChange, fullPath);\n\n\t\t\t// If the user reverted the change no change event is sent therefore we have to handle it here\n\t\t\tif (!this.resetChangesHandler) {\n\t\t\t\tthis.resetChangesHandler = () => {\n\t\t\t\t\t// We need to wait a little bit for the focus to be updated\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tif (field.isA(\"sap.ui.mdc.Field\")) {\n\t\t\t\t\t\t\tconst focusedControl = Core.byId(Core.getCurrentFocusedControlId());\n\t\t\t\t\t\t\tif (focusedControl?.getParent() === field) {\n\t\t\t\t\t\t\t\t// We're still un the same MDC Field --> do nothing\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfield.detachBrowserEvent(\"focusout\", this.resetChangesHandler);\n\t\t\t\t\t\tdelete this.resetChangesHandler;\n\t\t\t\t\t\tCollaborationActivitySync.send(field, Activity.Undo, fullPath);\n\t\t\t\t\t}, 100);\n\t\t\t\t};\n\t\t\t\tfield.attachBrowserEvent(\"focusout\", this.resetChangesHandler);\n\t\t\t}\n\t\t}\n\t},\n\n\thandleOpenPicker: function (oEvent: any) {\n\t\t// Collaboration Draft Activity Sync\n\t\tconst oField = oEvent.getSource();\n\t\tconst bCollaborationEnabled = CollaborationActivitySync.isConnected(oField);\n\n\t\tif (bCollaborationEnabled) {\n\t\t\tconst sBindingPath = oField.getBindingInfo(\"value\").parts[0].path;\n\t\t\tconst sFullPath = `${oField.getBindingContext().getPath()}/${sBindingPath}`;\n\t\t\tCollaborationActivitySync.send(oField, Activity.LiveChange, sFullPath);\n\t\t}\n\t},\n\thandleClosePicker: function (oEvent: any) {\n\t\t// Collaboration Draft Activity Sync\n\t\tconst oField = oEvent.getSource();\n\t\tconst bCollaborationEnabled = CollaborationActivitySync.isConnected(oField);\n\n\t\tif (bCollaborationEnabled) {\n\t\t\tconst binding = getCollaborationBinding(oField);\n\t\t\tif (!binding.hasPendingChanges()) {\n\t\t\t\t// If there are no pending changes, the picker was closed without changing the value --> send a UNDO notification\n\t\t\t\t// In case there were changes, notifications are managed in handleChange\n\t\t\t\tconst sBindingPath = oField.getBindingInfo(\"value\").parts[0].path;\n\t\t\t\tconst sFullPath = `${oField.getBindingContext().getPath()}/${sBindingPath}`;\n\t\t\t\tCollaborationActivitySync.send(oField, Activity.Undo, sFullPath);\n\t\t\t}\n\t\t}\n\t},\n\n\t_sendCollaborationMessageForFileUploader(fileUploader: FileUploader, activity: Activity) {\n\t\tconst isCollaborationEnabled = CollaborationActivitySync.isConnected(fileUploader);\n\n\t\tif (isCollaborationEnabled) {\n\t\t\tconst bindingPath = fileUploader.getParent()?.getProperty(\"propertyPath\");\n\t\t\tconst fullPath = `${fileUploader.getBindingContext()?.getPath()}/${bindingPath}`;\n\t\t\tCollaborationActivitySync.send(fileUploader, activity, fullPath);\n\t\t}\n\t},\n\n\thandleOpenUploader: function (event: Event) {\n\t\t// Collaboration Draft Activity Sync\n\t\tconst fileUploader = event.getSource() as FileUploader;\n\t\tFieldRuntime._sendCollaborationMessageForFileUploader(fileUploader, Activity.LiveChange);\n\t},\n\thandleCloseUploader: function (event: Event) {\n\t\t// Collaboration Draft Activity Sync\n\t\tconst fileUploader = event.getSource() as FileUploader;\n\t\tFieldRuntime._sendCollaborationMessageForFileUploader(fileUploader, Activity.Undo);\n\t},\n\n\t/**\n\t * Gets the field value and validity on a change event.\n\t *\n\t * @function\n\t * @name fieldValidityOnChange\n\t * @param oEvent The event object passed by the change event\n\t * @returns Field value and validity\n\t */\n\tgetFieldStateOnChange: function (oEvent: Event): any {\n\t\tlet oSourceField = oEvent.getSource() as any,\n\t\t\tmFieldState = {};\n\t\tconst _isBindingStateMessages = function (oBinding: any) {\n\t\t\treturn oBinding && oBinding.getDataState() ? oBinding.getDataState().getInvalidValue() === undefined : true;\n\t\t};\n\t\tif (oSourceField.isA(\"sap.fe.macros.field.FieldAPI\")) {\n\t\t\toSourceField = (oSourceField as EnhanceWithUI5<FieldAPI>).getContent();\n\t\t}\n\n\t\tif (oSourceField.isA(FieldWrapper.getMetadata().getName()) && oSourceField.getEditMode() === \"Editable\") {\n\t\t\toSourceField = oSourceField.getContentEdit()[0];\n\t\t}\n\n\t\tif (oSourceField.isA(\"sap.ui.mdc.Field\")) {\n\t\t\tlet bIsValid = oEvent.getParameter(\"valid\") || oEvent.getParameter(\"isValid\");\n\t\t\tif (bIsValid === undefined) {\n\t\t\t\tif (oSourceField.getMaxConditions() === 1) {\n\t\t\t\t\tconst oValueBindingInfo = oSourceField.getBindingInfo(\"value\");\n\t\t\t\t\tbIsValid = _isBindingStateMessages(oValueBindingInfo && oValueBindingInfo.binding);\n\t\t\t\t}\n\t\t\t\tif (oSourceField.getValue() === \"\" && !oSourceField.getProperty(\"required\")) {\n\t\t\t\t\tbIsValid = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmFieldState = {\n\t\t\t\tfieldValue: oSourceField.getValue(),\n\t\t\t\tvalidity: !!bIsValid\n\t\t\t};\n\t\t} else {\n\t\t\t// oSourceField extends from a FileUploader || Input || is a CheckBox\n\t\t\tconst oBinding =\n\t\t\t\toSourceField.getBinding(\"uploadUrl\") || oSourceField.getBinding(\"value\") || oSourceField.getBinding(\"selected\");\n\t\t\tmFieldState = {\n\t\t\t\tfieldValue: oBinding && oBinding.getValue(),\n\t\t\t\tvalidity: _isBindingStateMessages(oBinding)\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\tfield: oSourceField,\n\t\t\tstate: mFieldState\n\t\t};\n\t},\n\t_fnFixHashQueryString: function (sCurrentHash: any) {\n\t\tif (sCurrentHash && sCurrentHash.indexOf(\"?\") !== -1) {\n\t\t\t// sCurrentHash can contain query string, cut it off!\n\t\t\tsCurrentHash = sCurrentHash.split(\"?\")[0];\n\t\t}\n\t\treturn sCurrentHash;\n\t},\n\t_fnGetLinkInformation: function (_oSource: any, _oLink: any, _sPropertyPath: any, _sValue: any, fnSetActive: any) {\n\t\tconst oModel = _oLink && _oLink.getModel();\n\t\tconst oMetaModel = oModel && oModel.getMetaModel();\n\t\tconst sSemanticObjectName = _sValue || (_oSource && _oSource.getValue());\n\t\tconst oView = _oLink && CommonUtils.getTargetView(_oLink);\n\t\tconst oInternalModelContext = oView && oView.getBindingContext(\"internal\");\n\t\tconst oAppComponent = oView && CommonUtils.getAppComponent(oView);\n\t\tconst oShellServiceHelper = oAppComponent && oAppComponent.getShellServices();\n\t\tconst pGetLinksPromise = oShellServiceHelper && oShellServiceHelper.getLinksWithCache([[{ semanticObject: sSemanticObjectName }]]);\n\t\tconst aSemanticObjectUnavailableActions =\n\t\t\toMetaModel && oMetaModel.getObject(`${_sPropertyPath}@com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions`);\n\t\treturn {\n\t\t\tSemanticObjectName: sSemanticObjectName,\n\t\t\tSemanticObjectFullPath: _sPropertyPath, //sSemanticObjectFullPath,\n\t\t\tMetaModel: oMetaModel,\n\t\t\tInternalModelContext: oInternalModelContext,\n\t\t\tShellServiceHelper: oShellServiceHelper,\n\t\t\tGetLinksPromise: pGetLinksPromise,\n\t\t\tSemanticObjectUnavailableActions: aSemanticObjectUnavailableActions,\n\t\t\tfnSetActive: fnSetActive\n\t\t};\n\t},\n\t_fnQuickViewHasNewCondition: function (oSemanticObjectPayload: any, _oLinkInfo: any) {\n\t\tif (oSemanticObjectPayload && oSemanticObjectPayload.path && oSemanticObjectPayload.path === _oLinkInfo.SemanticObjectFullPath) {\n\t\t\t// Got the resolved Semantic Object!\n\t\t\tconst bResultingNewConditionForConditionalWrapper =\n\t\t\t\toSemanticObjectPayload[!_oLinkInfo.SemanticObjectUnavailableActions ? \"HasTargetsNotFiltered\" : \"HasTargets\"];\n\t\t\t_oLinkInfo.fnSetActive(!!bResultingNewConditionForConditionalWrapper);\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\t_fnQuickViewSetNewConditionForConditionalWrapper: function (_oLinkInfo: any, _oFinalSemanticObjects: any) {\n\t\tif (_oFinalSemanticObjects[_oLinkInfo.SemanticObjectName]) {\n\t\t\tlet sTmpPath, oSemanticObjectPayload;\n\t\t\tconst aSemanticObjectPaths = Object.keys(_oFinalSemanticObjects[_oLinkInfo.SemanticObjectName]);\n\t\t\tfor (const iPathsCount in aSemanticObjectPaths) {\n\t\t\t\tsTmpPath = aSemanticObjectPaths[iPathsCount];\n\t\t\t\toSemanticObjectPayload =\n\t\t\t\t\t_oFinalSemanticObjects[_oLinkInfo.SemanticObjectName] &&\n\t\t\t\t\t_oFinalSemanticObjects[_oLinkInfo.SemanticObjectName][sTmpPath];\n\t\t\t\tif (FieldRuntime._fnQuickViewHasNewCondition(oSemanticObjectPayload, _oLinkInfo)) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t_fnUpdateSemanticObjectsTargetModel: function (oEvent: any, sValue: any, oControl: any, _sPropertyPath: any) {\n\t\tconst oSource = oEvent && oEvent.getSource();\n\t\tlet fnSetActive;\n\t\tif (oControl.isA(\"sap.m.ObjectStatus\")) {\n\t\t\tfnSetActive = (bActive: boolean) => oControl.setActive(bActive);\n\t\t}\n\t\tif (oControl.isA(\"sap.m.ObjectIdentifier\")) {\n\t\t\tfnSetActive = (bActive: boolean) => oControl.setTitleActive(bActive);\n\t\t}\n\t\tconst oConditionalWrapper = oControl && oControl.getParent();\n\t\tif (oConditionalWrapper && oConditionalWrapper.isA(\"sap.fe.core.controls.ConditionalWrapper\")) {\n\t\t\tfnSetActive = (bActive: boolean) => oConditionalWrapper.setCondition(bActive);\n\t\t}\n\t\tif (fnSetActive !== undefined) {\n\t\t\tconst oLinkInfo = FieldRuntime._fnGetLinkInformation(oSource, oControl, _sPropertyPath, sValue, fnSetActive);\n\t\t\toLinkInfo.fnSetActive = fnSetActive;\n\t\t\tconst sCurrentHash = FieldRuntime._fnFixHashQueryString(CommonUtils.getHash());\n\t\t\tCommonUtils.updateSemanticTargets(\n\t\t\t\t[oLinkInfo.GetLinksPromise],\n\t\t\t\t[{ semanticObject: oLinkInfo.SemanticObjectName, path: oLinkInfo.SemanticObjectFullPath }],\n\t\t\t\toLinkInfo.InternalModelContext,\n\t\t\t\tsCurrentHash\n\t\t\t)\n\t\t\t\t.then(function (oFinalSemanticObjects: any) {\n\t\t\t\t\tif (oFinalSemanticObjects) {\n\t\t\t\t\t\tFieldRuntime._fnQuickViewSetNewConditionForConditionalWrapper(oLinkInfo, oFinalSemanticObjects);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(function (oError: any) {\n\t\t\t\t\tLog.error(\"Cannot update Semantic Targets model\", oError);\n\t\t\t\t});\n\t\t}\n\t},\n\t_checkControlHasModelAndBindingContext(_control: Control) {\n\t\tif (!_control.getModel() || !_control.getBindingContext()) {\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t},\n\t_checkCustomDataValueBeforeUpdatingSemanticObjectModel(_control: Control, propertyPath: string, aCustomData: CustomData[]): void {\n\t\tlet sSemanticObjectPathValue: any;\n\t\tlet oValueBinding;\n\t\tconst _fnCustomDataValueIsString = function (semanticObjectPathValue: any) {\n\t\t\treturn !(semanticObjectPathValue !== null && typeof semanticObjectPathValue === \"object\");\n\t\t};\n\t\t// remove technical custom datas set by UI5\n\t\taCustomData = aCustomData.filter((customData) => customData.getKey() !== \"sap-ui-custom-settings\");\n\t\tfor (const index in aCustomData) {\n\t\t\tsSemanticObjectPathValue = aCustomData[index].getValue();\n\t\t\tif (!sSemanticObjectPathValue && _fnCustomDataValueIsString(sSemanticObjectPathValue)) {\n\t\t\t\toValueBinding = aCustomData[index].getBinding(\"value\");\n\t\t\t\tif (oValueBinding) {\n\t\t\t\t\toValueBinding.attachEventOnce(\"change\", function (_oChangeEvent: any) {\n\t\t\t\t\t\tFieldRuntime._fnUpdateSemanticObjectsTargetModel(_oChangeEvent, null, _control, propertyPath);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else if (_fnCustomDataValueIsString(sSemanticObjectPathValue)) {\n\t\t\t\tFieldRuntime._fnUpdateSemanticObjectsTargetModel(null, sSemanticObjectPathValue, _control, propertyPath);\n\t\t\t}\n\t\t}\n\t},\n\tLinkModelContextChange: function (oEvent: any, sProperty: any, sPathToProperty: any): void {\n\t\tconst control = oEvent.getSource();\n\t\tif (FieldRuntime._checkControlHasModelAndBindingContext(control)) {\n\t\t\tconst sPropertyPath = `${sPathToProperty}/${sProperty}`;\n\t\t\tconst mdcLink = control.getDependents().length ? control.getDependents()[0] : undefined;\n\t\t\tconst aCustomData = mdcLink?.getCustomData();\n\t\t\tif (aCustomData && aCustomData.length > 0) {\n\t\t\t\tFieldRuntime._checkCustomDataValueBeforeUpdatingSemanticObjectModel(control, sPropertyPath, aCustomData);\n\t\t\t}\n\t\t}\n\t},\n\topenExternalLink: function (event: Event) {\n\t\tconst source = event.getSource() as any;\n\t\tif (source.data(\"url\") && source.getProperty(\"text\") !== \"\") {\n\t\t\topenWindow(source.data(\"url\"));\n\t\t}\n\t},\n\tpressLink: async function (oEvent: any): Promise<void> {\n\t\tconst oSource = oEvent.getSource();\n\t\tconst oLink = oSource.isA(\"sap.m.ObjectIdentifier\")\n\t\t\t? oSource.findElements(false, (elem: Event) => {\n\t\t\t\t\treturn elem.isA(\"sap.m.Link\");\n\t\t\t  })[0]\n\t\t\t: oSource;\n\n\t\tasync function openLink(mdcLink: any) {\n\t\t\ttry {\n\t\t\t\tconst sHref = await mdcLink.getTriggerHref();\n\t\t\t\tif (!sHref) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait mdcLink.open(oLink);\n\t\t\t\t\t} catch (oError: any) {\n\t\t\t\t\t\tLog.error(\"Cannot retrieve the QuickView Popover dialog\", oError);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst oView = CommonUtils.getTargetView(oLink);\n\t\t\t\t\tconst oAppComponent = CommonUtils.getAppComponent(oView);\n\t\t\t\t\tconst oShellServiceHelper = oAppComponent.getShellServices();\n\t\t\t\t\tconst oShellHash = oShellServiceHelper.parseShellHash(sHref);\n\t\t\t\t\tconst oNavArgs = {\n\t\t\t\t\t\ttarget: {\n\t\t\t\t\t\t\tsemanticObject: oShellHash.semanticObject,\n\t\t\t\t\t\t\taction: oShellHash.action\n\t\t\t\t\t\t},\n\t\t\t\t\t\tparams: oShellHash.params\n\t\t\t\t\t};\n\n\t\t\t\t\tKeepAliveHelper.storeControlRefreshStrategyForHash(oView, oShellHash);\n\n\t\t\t\t\tif (CommonUtils.isStickyEditMode(oLink) !== true) {\n\t\t\t\t\t\t//URL params and xappState has been generated earlier hence using toExternal\n\t\t\t\t\t\toShellServiceHelper.toExternal(oNavArgs as any, oAppComponent);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst sNewHref = await oShellServiceHelper.hrefForExternalAsync(oNavArgs, oAppComponent);\n\t\t\t\t\t\t\topenWindow(sNewHref);\n\t\t\t\t\t\t} catch (oError: any) {\n\t\t\t\t\t\t\tLog.error(`Error while retireving hrefForExternal : ${oError}`);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (oError: any) {\n\t\t\t\tLog.error(\"Error triggering link Href\", oError);\n\t\t\t}\n\t\t}\n\n\t\tif (oSource.getDependents() && oSource.getDependents().length > 0 && oLink.getProperty(\"text\") !== \"\") {\n\t\t\tconst oFieldInfo = oSource.getDependents()[0];\n\t\t\tif (oFieldInfo && oFieldInfo.isA(\"sap.ui.mdc.Link\")) {\n\t\t\t\tawait openLink(oFieldInfo);\n\t\t\t}\n\t\t}\n\t\treturn oLink;\n\t},\n\tuploadStream: function (controller: Controller, event: Event) {\n\t\tconst fileUploader = event.getSource() as FileUploader,\n\t\t\tFEController = FieldRuntime._getExtensionController(controller),\n\t\t\tfileWrapper = fileUploader.getParent() as unknown as FileWrapper,\n\t\t\tuploadUrl = fileWrapper.getUploadUrl();\n\n\t\tif (uploadUrl !== \"\") {\n\t\t\tfileWrapper.setUIBusy(true);\n\n\t\t\t// use uploadUrl from FileWrapper which returns a canonical URL\n\t\t\tfileUploader.setUploadUrl(uploadUrl);\n\n\t\t\tfileUploader.removeAllHeaderParameters();\n\t\t\tconst token = (fileUploader.getModel() as any)?.getHttpHeaders()[\"X-CSRF-Token\"];\n\t\t\tif (token) {\n\t\t\t\tconst headerParameterCSRFToken = new FileUploaderParameter();\n\t\t\t\theaderParameterCSRFToken.setName(\"x-csrf-token\");\n\t\t\t\theaderParameterCSRFToken.setValue(token);\n\t\t\t\tfileUploader.addHeaderParameter(headerParameterCSRFToken);\n\t\t\t}\n\t\t\tconst eTag = (fileUploader.getBindingContext() as Context | undefined | null)?.getProperty(\"@odata.etag\");\n\t\t\tif (eTag) {\n\t\t\t\tconst headerParameterETag = new FileUploaderParameter();\n\t\t\t\theaderParameterETag.setName(\"If-Match\");\n\t\t\t\t// Ignore ETag in collaboration draft\n\t\t\t\theaderParameterETag.setValue(CollaborationActivitySync.isConnected(fileUploader) ? \"*\" : eTag);\n\t\t\t\tfileUploader.addHeaderParameter(headerParameterETag);\n\t\t\t}\n\t\t\tconst headerParameterAccept = new FileUploaderParameter();\n\t\t\theaderParameterAccept.setName(\"Accept\");\n\t\t\theaderParameterAccept.setValue(\"application/json\");\n\t\t\tfileUploader.addHeaderParameter(headerParameterAccept);\n\n\t\t\t// synchronize upload with other requests\n\t\t\tconst uploadPromise = new Promise((resolve: any, reject: any) => {\n\t\t\t\tthis.uploadPromises = this.uploadPromises || {};\n\t\t\t\tthis.uploadPromises[fileUploader.getId()] = {\n\t\t\t\t\tresolve: resolve,\n\t\t\t\t\treject: reject\n\t\t\t\t};\n\t\t\t\tfileUploader.upload();\n\t\t\t});\n\t\t\tFEController._editFlow.syncTask(uploadPromise);\n\t\t} else {\n\t\t\tMessageBox.error(ResourceModel.getText(\"M_FIELD_FILEUPLOADER_ABORTED_TEXT\"));\n\t\t}\n\t},\n\n\thandleUploadComplete: function (\n\t\tevent: Event,\n\t\tpropertyFileName: { path: string } | undefined,\n\t\tpropertyPath: string,\n\t\tcontroller: Controller\n\t) {\n\t\tconst status = event.getParameter(\"status\"),\n\t\t\tfileUploader = event.getSource() as FileUploader,\n\t\t\tfileWrapper = fileUploader.getParent() as unknown as FileWrapper;\n\n\t\tfileWrapper.setUIBusy(false);\n\n\t\tconst context = fileUploader.getBindingContext() as Context | undefined | null;\n\t\tif (status === 0 || status >= 400) {\n\t\t\tthis._displayMessageForFailedUpload(event);\n\t\t\tthis.uploadPromises[fileUploader.getId()].reject();\n\t\t} else {\n\t\t\tconst newETag = event.getParameter(\"headers\").etag;\n\n\t\t\tif (newETag) {\n\t\t\t\t// set new etag for filename update, but without sending patch request\n\t\t\t\tcontext?.setProperty(\"@odata.etag\", newETag, null as any);\n\t\t\t}\n\n\t\t\t// set filename for link text\n\t\t\tif (propertyFileName?.path) {\n\t\t\t\tcontext?.setProperty(propertyFileName.path, fileUploader.getValue());\n\t\t\t}\n\n\t\t\t// invalidate the property that not gets updated otherwise\n\t\t\tcontext?.setProperty(propertyPath, null, null as any);\n\t\t\tcontext?.setProperty(propertyPath, undefined, null as any);\n\n\t\t\tthis._callSideEffectsForStream(event, fileWrapper, controller);\n\n\t\t\tthis.uploadPromises[fileUploader.getId()].resolve();\n\t\t}\n\n\t\tdelete this.uploadPromises[fileUploader.getId()];\n\n\t\t// Collaboration Draft Activity Sync\n\t\tconst isCollaborationEnabled = CollaborationActivitySync.isConnected(fileUploader);\n\t\tif (!isCollaborationEnabled || !context) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst notificationData = [`${context.getPath()}/${propertyPath}`];\n\t\tif (propertyFileName?.path) {\n\t\t\tnotificationData.push(`${context.getPath()}/${propertyFileName.path}`);\n\t\t}\n\n\t\tlet binding = context.getBinding();\n\t\tif (!binding.isA(\"sap.ui.model.odata.v4.ODataListBinding\")) {\n\t\t\tconst oView = CommonUtils.getTargetView(fileUploader);\n\t\t\tbinding = (oView.getBindingContext() as V4Context).getBinding();\n\t\t}\n\t\tif (binding.hasPendingChanges()) {\n\t\t\tbinding.attachEventOnce(\"patchCompleted\", () => {\n\t\t\t\tCollaborationActivitySync.send(fileWrapper, Activity.Change, notificationData);\n\t\t\t});\n\t\t} else {\n\t\t\tCollaborationActivitySync.send(fileWrapper, Activity.Change, notificationData);\n\t\t}\n\t},\n\n\t_displayMessageForFailedUpload: function (oEvent: any) {\n\t\t// handling of backend errors\n\t\tconst sError = oEvent.getParameter(\"responseRaw\") || oEvent.getParameter(\"response\");\n\t\tlet sMessageText, oError;\n\t\ttry {\n\t\t\toError = sError && JSON.parse(sError);\n\t\t\tsMessageText = oError.error && oError.error.message;\n\t\t} catch (e) {\n\t\t\tsMessageText = sError || ResourceModel.getText(\"M_FIELD_FILEUPLOADER_ABORTED_TEXT\");\n\t\t}\n\t\tMessageBox.error(sMessageText);\n\t},\n\n\tremoveStream: function (event: Event, propertyFileName: { path: string } | undefined, propertyPath: string, controller: Controller) {\n\t\tconst deleteButton = event.getSource() as Button;\n\t\tconst fileWrapper = deleteButton.getParent() as unknown as FileWrapper;\n\t\tconst context = fileWrapper.getBindingContext() as Context;\n\n\t\t// streams are removed by assigning the null value\n\t\tcontext.setProperty(propertyPath, null);\n\t\t// When setting the property to null, the uploadUrl (@@MODEL.format) is set to \"\" by the model\n\t\t//\twith that another upload is not possible before refreshing the page\n\t\t// (refreshing the page would recreate the URL)\n\t\t//\tThis is the workaround:\n\t\t//\tWe set the property to undefined only on the frontend which will recreate the uploadUrl\n\t\tcontext.setProperty(propertyPath, undefined, null as any);\n\n\t\tthis._callSideEffectsForStream(event, fileWrapper, controller);\n\n\t\t// Collaboration Draft Activity Sync\n\t\tconst bCollaborationEnabled = CollaborationActivitySync.isConnected(deleteButton);\n\t\tif (bCollaborationEnabled) {\n\t\t\tlet binding = context.getBinding();\n\t\t\tif (!binding.isA(\"sap.ui.model.odata.v4.ODataListBinding\")) {\n\t\t\t\tconst oView = CommonUtils.getTargetView(deleteButton);\n\t\t\t\tbinding = (oView.getBindingContext() as V4Context).getBinding();\n\t\t\t}\n\n\t\t\tconst data = [`${context.getPath()}/${propertyPath}`];\n\t\t\tif (propertyFileName?.path) {\n\t\t\t\tdata.push(`${context.getPath()}/${propertyFileName.path}`);\n\t\t\t}\n\t\t\tCollaborationActivitySync.send(deleteButton, Activity.LiveChange, data);\n\n\t\t\tbinding.attachEventOnce(\"patchCompleted\", function () {\n\t\t\t\tCollaborationActivitySync.send(deleteButton, Activity.Change, data);\n\t\t\t});\n\t\t}\n\t},\n\n\t_callSideEffectsForStream: function (oEvent: any, oControl: any, oController: any) {\n\t\tconst oFEController = FieldRuntime._getExtensionController(oController);\n\t\tif (oControl && oControl.getBindingContext().isTransient()) {\n\t\t\treturn;\n\t\t}\n\t\tif (oControl) {\n\t\t\toEvent.oSource = oControl;\n\t\t}\n\t\toFEController._sideEffects.handleFieldChange(oEvent, this.getFieldStateOnChange(oEvent).state[\"validity\"]);\n\t},\n\n\tgetIconForMimeType: function (sMimeType: any) {\n\t\treturn IconPool.getIconForMimeType(sMimeType);\n\t},\n\n\t/**\n\t * Method to retrieve text from value list for DataField.\n\t *\n\t * @function\n\t * @name retrieveTextFromValueList\n\t * @param sPropertyValue The property value of the datafield\n\t * @param sPropertyFullPath The property full path's\n\t * @param sDisplayFormat The display format for the datafield\n\t * @returns The formatted value in corresponding display format.\n\t */\n\tretrieveTextFromValueList: function (sPropertyValue: string, sPropertyFullPath: string, sDisplayFormat: string) {\n\t\tlet sTextProperty: string;\n\t\tlet oMetaModel;\n\t\tlet sPropertyName: string;\n\t\tif (sPropertyValue) {\n\t\t\toMetaModel = CommonHelper.getMetaModel();\n\t\t\tsPropertyName = oMetaModel.getObject(`${sPropertyFullPath}@sapui.name`);\n\t\t\treturn oMetaModel\n\t\t\t\t.requestValueListInfo(sPropertyFullPath, true)\n\t\t\t\t.then(function (mValueListInfo: any) {\n\t\t\t\t\t// take the \"\" one if exists, otherwise take the first one in the object TODO: to be discussed\n\t\t\t\t\tconst oValueListInfo = mValueListInfo[mValueListInfo[\"\"] ? \"\" : Object.keys(mValueListInfo)[0]];\n\t\t\t\t\tconst oValueListModel = oValueListInfo.$model;\n\t\t\t\t\tconst oMetaModelValueList = oValueListModel.getMetaModel();\n\t\t\t\t\tconst oParamWithKey = oValueListInfo.Parameters.find(function (oParameter: any) {\n\t\t\t\t\t\treturn oParameter.LocalDataProperty && oParameter.LocalDataProperty.$PropertyPath === sPropertyName;\n\t\t\t\t\t});\n\t\t\t\t\tif (oParamWithKey && !oParamWithKey.ValueListProperty) {\n\t\t\t\t\t\treturn Promise.reject(`Inconsistent value help annotation for ${sPropertyName}`);\n\t\t\t\t\t}\n\t\t\t\t\tconst oTextAnnotation = oMetaModelValueList.getObject(\n\t\t\t\t\t\t`/${oValueListInfo.CollectionPath}/${oParamWithKey.ValueListProperty}@com.sap.vocabularies.Common.v1.Text`\n\t\t\t\t\t);\n\n\t\t\t\t\tif (oTextAnnotation && oTextAnnotation.$Path) {\n\t\t\t\t\t\tsTextProperty = oTextAnnotation.$Path;\n\t\t\t\t\t\tconst oFilter = new Filter({\n\t\t\t\t\t\t\tpath: oParamWithKey.ValueListProperty,\n\t\t\t\t\t\t\toperator: \"EQ\",\n\t\t\t\t\t\t\tvalue1: sPropertyValue\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst oListBinding = oValueListModel.bindList(`/${oValueListInfo.CollectionPath}`, undefined, undefined, oFilter, {\n\t\t\t\t\t\t\t$select: sTextProperty\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn oListBinding.requestContexts(0, 2);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsDisplayFormat = \"Value\";\n\t\t\t\t\t\treturn sPropertyValue;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then(function (aContexts: any) {\n\t\t\t\t\tconst sDescription = sTextProperty ? aContexts[0]?.getObject()[sTextProperty] : \"\";\n\t\t\t\t\tswitch (sDisplayFormat) {\n\t\t\t\t\t\tcase \"Description\":\n\t\t\t\t\t\t\treturn sDescription;\n\t\t\t\t\t\tcase \"DescriptionValue\":\n\t\t\t\t\t\t\treturn Core.getLibraryResourceBundle(\"sap.fe.core\").getText(\"C_FORMAT_FOR_TEXT_ARRANGEMENT\", [\n\t\t\t\t\t\t\t\tsDescription,\n\t\t\t\t\t\t\t\tsPropertyValue\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\tcase \"ValueDescription\":\n\t\t\t\t\t\t\treturn Core.getLibraryResourceBundle(\"sap.fe.core\").getText(\"C_FORMAT_FOR_TEXT_ARRANGEMENT\", [\n\t\t\t\t\t\t\t\tsPropertyValue,\n\t\t\t\t\t\t\t\tsDescription\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn sPropertyValue;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(function (oError: any) {\n\t\t\t\t\tconst sMsg =\n\t\t\t\t\t\toError.status && oError.status === 404\n\t\t\t\t\t\t\t? `Metadata not found (${oError.status}) for value help of property ${sPropertyFullPath}`\n\t\t\t\t\t\t\t: oError.message;\n\t\t\t\t\tLog.error(sMsg);\n\t\t\t\t});\n\t\t}\n\t\treturn sPropertyValue;\n\t},\n\n\thandleTypeMissmatch: function (oEvent: any) {\n\t\tMessageBox.error(ResourceModel.getText(\"M_FIELD_FILEUPLOADER_WRONG_MIMETYPE\"), {\n\t\t\tdetails:\n\t\t\t\t`<p><strong>${ResourceModel.getText(\"M_FIELD_FILEUPLOADER_WRONG_MIMETYPE_DETAILS_SELECTED\")}</strong></p>${\n\t\t\t\t\toEvent.getParameters().mimeType\n\t\t\t\t}<br><br>` +\n\t\t\t\t`<p><strong>${ResourceModel.getText(\"M_FIELD_FILEUPLOADER_WRONG_MIMETYPE_DETAILS_ALLOWED\")}</strong></p>${oEvent\n\t\t\t\t\t.getSource()\n\t\t\t\t\t.getMimeType()\n\t\t\t\t\t.toString()\n\t\t\t\t\t.replaceAll(\",\", \", \")}`,\n\t\t\tcontentWidth: \"150px\"\n\t\t} as any);\n\t},\n\n\thandleFileSizeExceed: function (oEvent: any /*iFileSize: any*/) {\n\t\tMessageBox.error(ResourceModel.getText(\"M_FIELD_FILEUPLOADER_FILE_TOO_BIG\", oEvent.getSource().getMaximumFileSize().toFixed(3)), {\n\t\t\tcontentWidth: \"150px\"\n\t\t} as any);\n\t},\n\n\t_getExtensionController: function (oController: any) {\n\t\treturn oController.isA(\"sap.fe.core.ExtensionAPI\") ? oController._controller : oController;\n\t}\n};\n\n/**\n * @global\n */\nexport default FieldRuntime;\n"],"mappings":"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"}},{"offset":{"line":7855,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","CommonUtils","CollaborationActivitySync","CollaborationCommon","draft","FieldWrapper","KeepAliveHelper","ModelHelper","CommonHelper","FieldAPI","ResourceModel","MessageBox","Core","IconPool","Filter","FileUploaderParameter","openWindow","Activity","getCollaborationBinding","field","binding","getBindingContext","getBinding","isA","oView","getTargetView","FieldRuntime","resetChangesHandler","undefined","uploadPromises","onDataFieldWithNavigationPath","oSource","oController","sNavPath","_routing","oBindingContext","oMetaModel","getModel","getMetaModel","fnNavigate","oContext","navigateToTarget","getViewData","converterType","isStickySessionSupported","processDataLossOrDraftDiscardConfirmation","Function","prototype","getController","NavigationType","ForwardNavigation","error","isDraftIndicatorVisible","sPropertyPath","sSemanticKeyHasDraftIndicator","HasDraftEntity","IsActiveEntity","hideDraftInfo","hasTargets","bSemanticObjectHasTargets","getStateDependingOnSemanticObjectTargets","onValidateFieldGroup","oEvent","oFEController","_getExtensionController","_sideEffects","handleFieldGroupChange","handleChange","oSourceField","getSource","bIsTransient","isTransient","pValueResolved","getParameter","Promise","resolve","bValid","fieldValidity","this","getFieldStateOnChange","state","then","mParameters","valid","catch","_editFlow","syncTask","handleFieldChange","oField","bCollaborationEnabled","isConnected","_ref","_oField$getBindingInf","data","getBindingInfo","parts","map","part","_oField$getBindingCon","getPath","path","hasPendingChanges","attachEventOnce","send","Change","Undo","handleLiveChange","event","bindingPath","fullPath","LiveChange","setTimeout","focusedControl","byId","getCurrentFocusedControlId","getParent","detachBrowserEvent","attachBrowserEvent","handleOpenPicker","sBindingPath","sFullPath","handleClosePicker","_sendCollaborationMessageForFileUploader","fileUploader","activity","isCollaborationEnabled","_fileUploader$getPare","_fileUploader$getBind","getProperty","handleOpenUploader","handleCloseUploader","mFieldState","_isBindingStateMessages","oBinding","getDataState","getInvalidValue","getContent","getMetadata","getName","getEditMode","getContentEdit","bIsValid","getMaxConditions","oValueBindingInfo","getValue","fieldValue","validity","_fnFixHashQueryString","sCurrentHash","indexOf","split","_fnGetLinkInformation","_oSource","_oLink","_sPropertyPath","_sValue","fnSetActive","oModel","sSemanticObjectName","oInternalModelContext","oAppComponent","getAppComponent","oShellServiceHelper","getShellServices","pGetLinksPromise","getLinksWithCache","semanticObject","aSemanticObjectUnavailableActions","getObject","SemanticObjectName","SemanticObjectFullPath","MetaModel","InternalModelContext","ShellServiceHelper","GetLinksPromise","SemanticObjectUnavailableActions","_fnQuickViewHasNewCondition","oSemanticObjectPayload","_oLinkInfo","bResultingNewConditionForConditionalWrapper","_fnQuickViewSetNewConditionForConditionalWrapper","_oFinalSemanticObjects","sTmpPath","aSemanticObjectPaths","Object","keys","iPathsCount","_fnUpdateSemanticObjectsTargetModel","sValue","oControl","bActive","setActive","setTitleActive","oConditionalWrapper","setCondition","oLinkInfo","getHash","updateSemanticTargets","oFinalSemanticObjects","oError","_checkControlHasModelAndBindingContext","_control","_checkCustomDataValueBeforeUpdatingSemanticObjectModel","propertyPath","aCustomData","sSemanticObjectPathValue","oValueBinding","_fnCustomDataValueIsString","semanticObjectPathValue","filter","customData","getKey","index","_oChangeEvent","LinkModelContextChange","sProperty","sPathToProperty","control","mdcLink","getDependents","length","getCustomData","openExternalLink","source","pressLink","async","oLink","findElements","elem","openLink","sHref","getTriggerHref","open","oShellHash","parseShellHash","oNavArgs","target","action","params","storeControlRefreshStrategyForHash","isStickyEditMode","toExternal","sNewHref","hrefForExternalAsync","oFieldInfo","uploadStream","controller","FEController","fileWrapper","uploadUrl","getUploadUrl","_fileUploader$getMode","_fileUploader$getBind2","setUIBusy","setUploadUrl","removeAllHeaderParameters","token","getHttpHeaders","headerParameterCSRFToken","setName","setValue","addHeaderParameter","eTag","headerParameterETag","headerParameterAccept","uploadPromise","reject","getId","upload","getText","handleUploadComplete","propertyFileName","status","context","_displayMessageForFailedUpload","newETag","etag","setProperty","_callSideEffectsForStream","notificationData","push","sError","sMessageText","JSON","parse","message","e","removeStream","deleteButton","getIconForMimeType","sMimeType","retrieveTextFromValueList","sPropertyValue","sPropertyFullPath","sDisplayFormat","sTextProperty","sPropertyName","requestValueListInfo","mValueListInfo","oValueListInfo","oValueListModel","$model","oMetaModelValueList","oParamWithKey","Parameters","find","oParameter","LocalDataProperty","$PropertyPath","ValueListProperty","oTextAnnotation","CollectionPath","$Path","oFilter","operator","value1","oListBinding","bindList","$select","requestContexts","aContexts","_aContexts$","sDescription","getLibraryResourceBundle","sMsg","handleTypeMissmatch","details","getParameters","mimeType","getMimeType","toString","replaceAll","contentWidth","handleFileSizeExceed","getMaximumFileSize","toFixed","_controller"],"sources":["FieldRuntime-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,8CAAO,CAAC,eAAgB,0BAA2B,8DAA+D,qEAAsE,kDAAmD,oCAAqC,sCAAuC,kCAAmC,6BAA8B,+BAAgC,8BAA+B,mBAAoB,mBAAoB,uBAAwB,sBAAuB,uCAAwC,0BAA2B,SAAUC,EAAKC,EAAaC,EAA2BC,EAAqBC,EAAOC,EAAcC,EAAiBC,EAAaC,EAAcC,EAAUC,EAAeC,EAAYC,EAAMC,EAAUC,EAAQC,EAAuBC,GACvzB,aAEA,IAAIC,EAAWd,EAAoBc,SAOnC,SAASC,EAAwBC,GAC/B,IAAIC,EAAUD,EAAME,oBAAoBC,aACxC,IAAKF,EAAQG,IAAI,0CAA2C,CAC1D,MAAMC,EAAQvB,EAAYwB,cAAcN,GACxCC,EAAUI,EAAMH,oBAAoBC,YACtC,CACA,OAAOF,CACT,CAQA,MAAMM,EAAe,CACnBC,oBAAqBC,UACrBC,eAAgBD,UAQhBE,8BAA+B,SAAUC,EAASC,EAAaC,GAC7D,GAAID,EAAYE,SAAU,CACxB,IAAIC,EAAkBJ,EAAQV,oBAC9B,MAAMG,EAAQvB,EAAYwB,cAAcM,GACtCK,EAAaD,EAAgBE,WAAWC,eACxCC,EAAa,SAAUC,GACrB,GAAIA,EAAU,CACZL,EAAkBK,CACpB,CACAR,EAAYE,SAASO,iBAAiBN,EAAiBF,EAAU,KACnE,EAEF,GAAIT,EAAMkB,cAAcC,gBAAkB,eAAiBpC,EAAYqC,yBAAyBR,GAAa,CAC3GhC,EAAMyC,0CAA0CN,EAAYO,SAASC,UAAWZ,EAAiBX,EAAMwB,gBAAiB,KAAM5C,EAAM6C,eAAeC,kBACrJ,KAAO,CACLX,GACF,CACF,KAAO,CACLvC,EAAImD,MAAM,6FAA8F,mCAAoC,gCAC9I,CACF,EACAC,wBAAyB,SAAUC,EAAeC,EAA+BC,EAAgBC,EAAgBC,GAC/G,GAAID,IAAmB5B,WAAa2B,IAAmB3B,aAAe4B,GAAkBD,KAAoBE,EAAe,CACzH,OAAOJ,IAAkBC,CAC3B,KAAO,CACL,OAAO,KACT,CACF,EACAI,WAAY,SAAUC,GACpB,OAAOA,EAA4BA,EAA4B,KACjE,EACAC,yCAA0C,SAAUD,GAClD,OAAOA,EAA4B,cAAgB,MACrD,EASAE,qBAAsB,SAAU7B,EAAa8B,GAC3C,MAAMC,EAAgBrC,EAAasC,wBAAwBhC,GAC3D+B,EAAcE,aAAaC,uBAAuBJ,EACpD,EAWAK,aAAc,SAAUnC,EAAa8B,GACnC,MAAMM,EAAeN,EAAOO,YAC1BC,EAAeF,GAAgBA,EAAa/C,oBAAoBkD,cAChEC,EAAiBV,EAAOW,aAAa,YAAcC,QAAQC,UAC3D5C,EAAU+B,EAAOO,YACjBO,EAASd,EAAOW,aAAa,SAC7BI,EAAgBC,KAAKC,sBAAsBjB,GAAQkB,MAAM,YAK3DR,EAAeS,KAAK,WAElBnB,EAAO/B,QAAUA,EACjB+B,EAAOoB,YAAc,CACnBC,MAAOP,GAETnE,EAAS0D,aAAaL,EAAQ9B,EAChC,GAAGoD,MAAM,WAGPtB,EAAO/B,QAAUA,EACjB+B,EAAOoB,YAAc,CACnBC,MAAO,OAKT1E,EAAS0D,aAAaL,EAAQ9B,EAChC,GAGA,MAAM+B,EAAgBrC,EAAasC,wBAAwBhC,GAC3D+B,EAAcsB,UAAUC,SAASd,GAIjC,GAAIF,EAAc,CAChB,MACF,CAGAP,EAAcE,aAAasB,kBAAkBzB,EAAQe,EAAeL,GAGpE,MAAMgB,EAAS1B,EAAOO,YACpBoB,EAAwBvF,EAA0BwF,YAAYF,GAChE,GAAIC,GAAyBZ,EAAe,CAC1C,IAAIc,EAAMC,EAGV,MAAMxE,EAAUF,EAAwBsE,GACxC,MAAMK,EAAO,KAAMF,EAAOH,EAAOM,eAAe,UAAYN,EAAOM,eAAe,eAAiB,MAAQH,SAAc,OAAS,EAAIA,EAAKI,WAAcH,EAAwBJ,EAAOM,eAAe,sBAAwB,MAAQF,SAA+B,OAAS,EAAIA,EAAsBG,QAAU,IAAKC,IAAI,SAAUC,GACpU,GAAIA,EAAM,CACR,IAAIC,EACJ,MAAO,IAAIA,EAAwBV,EAAOnE,uBAAyB,MAAQ6E,SAA+B,OAAS,EAAIA,EAAsBC,aAAaF,EAAKG,MACjK,CACF,GACA,GAAIhF,EAAQiF,oBAAqB,CAE/BjF,EAAQkF,gBAAgB,iBAAkB,WACxCpG,EAA0BqG,KAAKf,EAAQvE,EAASuF,OAAQX,EAC1D,EACF,KAAO,CAEL3F,EAA0BqG,KAAKf,EAAQvE,EAASwF,KAAMZ,EACxD,CACF,CACF,EACAa,iBAAkB,SAAUC,GAE1B,MAAMxF,EAAQwF,EAAMtC,YACpB,GAAInE,EAA0BwF,YAAYvE,GAAQ,CAGhD,MAAMyF,EAAczF,EAAM2E,eAAe,SAASC,MAAM,GAAGK,KAC3D,MAAMS,EAAW,GAAG1F,EAAME,oBAAoB8E,aAAaS,IAC3D1G,EAA0BqG,KAAKpF,EAAOF,EAAS6F,WAAYD,GAG3D,IAAK/B,KAAKnD,oBAAqB,CAC7BmD,KAAKnD,oBAAsB,KAEzBoF,WAAW,KACT,GAAI5F,EAAMI,IAAI,oBAAqB,CACjC,MAAMyF,EAAiBpG,EAAKqG,KAAKrG,EAAKsG,8BACtC,IAAKF,IAAmB,MAAQA,SAAwB,OAAS,EAAIA,EAAeG,eAAiBhG,EAAO,CAE1G,MACF,CACF,CACAA,EAAMiG,mBAAmB,WAAYtC,KAAKnD,4BACnCmD,KAAKnD,oBACZzB,EAA0BqG,KAAKpF,EAAOF,EAASwF,KAAMI,EAAS,EAC7D,IAAI,EAET1F,EAAMkG,mBAAmB,WAAYvC,KAAKnD,oBAC5C,CACF,CACF,EACA2F,iBAAkB,SAAUxD,GAE1B,MAAM0B,EAAS1B,EAAOO,YACtB,MAAMoB,EAAwBvF,EAA0BwF,YAAYF,GACpE,GAAIC,EAAuB,CACzB,MAAM8B,EAAe/B,EAAOM,eAAe,SAASC,MAAM,GAAGK,KAC7D,MAAMoB,EAAY,GAAGhC,EAAOnE,oBAAoB8E,aAAaoB,IAC7DrH,EAA0BqG,KAAKf,EAAQvE,EAAS6F,WAAYU,EAC9D,CACF,EACAC,kBAAmB,SAAU3D,GAE3B,MAAM0B,EAAS1B,EAAOO,YACtB,MAAMoB,EAAwBvF,EAA0BwF,YAAYF,GACpE,GAAIC,EAAuB,CACzB,MAAMrE,EAAUF,EAAwBsE,GACxC,IAAKpE,EAAQiF,oBAAqB,CAGhC,MAAMkB,EAAe/B,EAAOM,eAAe,SAASC,MAAM,GAAGK,KAC7D,MAAMoB,EAAY,GAAGhC,EAAOnE,oBAAoB8E,aAAaoB,IAC7DrH,EAA0BqG,KAAKf,EAAQvE,EAASwF,KAAMe,EACxD,CACF,CACF,EACAE,yCAAyCC,EAAcC,GACrD,MAAMC,EAAyB3H,EAA0BwF,YAAYiC,GACrE,GAAIE,EAAwB,CAC1B,IAAIC,EAAuBC,EAC3B,MAAMnB,GAAekB,EAAwBH,EAAaR,eAAiB,MAAQW,SAA+B,OAAS,EAAIA,EAAsBE,YAAY,gBACjK,MAAMnB,EAAW,IAAIkB,EAAwBJ,EAAatG,uBAAyB,MAAQ0G,SAA+B,OAAS,EAAIA,EAAsB5B,aAAaS,IAC1K1G,EAA0BqG,KAAKoB,EAAcC,EAAUf,EACzD,CACF,EACAoB,mBAAoB,SAAUtB,GAE5B,MAAMgB,EAAehB,EAAMtC,YAC3B3C,EAAagG,yCAAyCC,EAAc1G,EAAS6F,WAC/E,EACAoB,oBAAqB,SAAUvB,GAE7B,MAAMgB,EAAehB,EAAMtC,YAC3B3C,EAAagG,yCAAyCC,EAAc1G,EAASwF,KAC/E,EASA1B,sBAAuB,SAAUjB,GAC/B,IAAIM,EAAeN,EAAOO,YACxB8D,EAAc,CAAC,EACjB,MAAMC,EAA0B,SAAUC,GACxC,OAAOA,GAAYA,EAASC,eAAiBD,EAASC,eAAeC,oBAAsB3G,UAAY,IACzG,EACA,GAAIwC,EAAa7C,IAAI,gCAAiC,CACpD6C,EAAeA,EAAaoE,YAC9B,CACA,GAAIpE,EAAa7C,IAAIlB,EAAaoI,cAAcC,YAActE,EAAauE,gBAAkB,WAAY,CACvGvE,EAAeA,EAAawE,iBAAiB,EAC/C,CACA,GAAIxE,EAAa7C,IAAI,oBAAqB,CACxC,IAAIsH,EAAW/E,EAAOW,aAAa,UAAYX,EAAOW,aAAa,WACnE,GAAIoE,IAAajH,UAAW,CAC1B,GAAIwC,EAAa0E,qBAAuB,EAAG,CACzC,MAAMC,EAAoB3E,EAAa0B,eAAe,SACtD+C,EAAWT,EAAwBW,GAAqBA,EAAkB3H,QAC5E,CACA,GAAIgD,EAAa4E,aAAe,KAAO5E,EAAa4D,YAAY,YAAa,CAC3Ea,EAAW,IACb,CACF,CACAV,EAAc,CACZc,WAAY7E,EAAa4E,WACzBE,WAAYL,EAEhB,KAAO,CAEL,MAAMR,EAAWjE,EAAa9C,WAAW,cAAgB8C,EAAa9C,WAAW,UAAY8C,EAAa9C,WAAW,YACrH6G,EAAc,CACZc,WAAYZ,GAAYA,EAASW,WACjCE,SAAUd,EAAwBC,GAEtC,CACA,MAAO,CACLlH,MAAOiD,EACPY,MAAOmD,EAEX,EACAgB,sBAAuB,SAAUC,GAC/B,GAAIA,GAAgBA,EAAaC,QAAQ,QAAU,EAAG,CAEpDD,EAAeA,EAAaE,MAAM,KAAK,EACzC,CACA,OAAOF,CACT,EACAG,sBAAuB,SAAUC,EAAUC,EAAQC,EAAgBC,EAASC,GAC1E,MAAMC,EAASJ,GAAUA,EAAOpH,WAChC,MAAMD,EAAayH,GAAUA,EAAOvH,eACpC,MAAMwH,EAAsBH,GAAWH,GAAYA,EAASR,WAC5D,MAAMxH,EAAQiI,GAAUxJ,EAAYwB,cAAcgI,GAClD,MAAMM,EAAwBvI,GAASA,EAAMH,kBAAkB,YAC/D,MAAM2I,EAAgBxI,GAASvB,EAAYgK,gBAAgBzI,GAC3D,MAAM0I,EAAsBF,GAAiBA,EAAcG,mBAC3D,MAAMC,EAAmBF,GAAuBA,EAAoBG,kBAAkB,CAAC,CAAC,CACtFC,eAAgBR,MAElB,MAAMS,EAAoCnI,GAAcA,EAAWoI,UAAU,GAAGd,qEAChF,MAAO,CACLe,mBAAoBX,EACpBY,uBAAwBhB,EAExBiB,UAAWvI,EACXwI,qBAAsBb,EACtBc,mBAAoBX,EACpBY,gBAAiBV,EACjBW,iCAAkCR,EAClCX,YAAaA,EAEjB,EACAoB,4BAA6B,SAAUC,EAAwBC,GAC7D,GAAID,GAA0BA,EAAuB7E,MAAQ6E,EAAuB7E,OAAS8E,EAAWR,uBAAwB,CAE9H,MAAMS,EAA8CF,GAAwBC,EAAWH,iCAAmC,wBAA0B,cACpJG,EAAWtB,cAAcuB,GACzB,OAAO,IACT,KAAO,CACL,OAAO,KACT,CACF,EACAC,iDAAkD,SAAUF,EAAYG,GACtE,GAAIA,EAAuBH,EAAWT,oBAAqB,CACzD,IAAIa,EAAUL,EACd,MAAMM,EAAuBC,OAAOC,KAAKJ,EAAuBH,EAAWT,qBAC3E,IAAK,MAAMiB,KAAeH,EAAsB,CAC9CD,EAAWC,EAAqBG,GAChCT,EAAyBI,EAAuBH,EAAWT,qBAAuBY,EAAuBH,EAAWT,oBAAoBa,GACxI,GAAI5J,EAAasJ,4BAA4BC,EAAwBC,GAAa,CAChF,KACF,CACF,CACF,CACF,EACAS,oCAAqC,SAAU7H,EAAQ8H,EAAQC,EAAUnC,GACvE,MAAM3H,EAAU+B,GAAUA,EAAOO,YACjC,IAAIuF,EACJ,GAAIiC,EAAStK,IAAI,sBAAuB,CACtCqI,EAAckC,GAAWD,EAASE,UAAUD,EAC9C,CACA,GAAID,EAAStK,IAAI,0BAA2B,CAC1CqI,EAAckC,GAAWD,EAASG,eAAeF,EACnD,CACA,MAAMG,EAAsBJ,GAAYA,EAAS1E,YACjD,GAAI8E,GAAuBA,EAAoB1K,IAAI,2CAA4C,CAC7FqI,EAAckC,GAAWG,EAAoBC,aAAaJ,EAC5D,CACA,GAAIlC,IAAgBhI,UAAW,CAC7B,MAAMuK,EAAYzK,EAAa6H,sBAAsBxH,EAAS8J,EAAUnC,EAAgBkC,EAAQhC,GAChGuC,EAAUvC,YAAcA,EACxB,MAAMR,EAAe1H,EAAayH,sBAAsBlJ,EAAYmM,WACpEnM,EAAYoM,sBAAsB,CAACF,EAAUrB,iBAAkB,CAAC,CAC9DR,eAAgB6B,EAAU1B,mBAC1BrE,KAAM+F,EAAUzB,yBACdyB,EAAUvB,qBAAsBxB,GAAcnE,KAAK,SAAUqH,GAC/D,GAAIA,EAAuB,CACzB5K,EAAa0J,iDAAiDe,EAAWG,EAC3E,CACF,GAAGlH,MAAM,SAAUmH,GACjBvM,EAAImD,MAAM,uCAAwCoJ,EACpD,EACF,CACF,EACAC,uCAAuCC,GACrC,IAAKA,EAASpK,aAAeoK,EAASpL,oBAAqB,CACzD,OAAO,KACT,KAAO,CACL,OAAO,IACT,CACF,EACAqL,uDAAuDD,EAAUE,EAAcC,GAC7E,IAAIC,EACJ,IAAIC,EACJ,MAAMC,EAA6B,SAAUC,GAC3C,QAASA,IAA4B,aAAeA,IAA4B,SAClF,EAEAJ,EAAcA,EAAYK,OAAOC,GAAcA,EAAWC,WAAa,0BACvE,IAAK,MAAMC,KAASR,EAAa,CAC/BC,EAA2BD,EAAYQ,GAAOpE,WAC9C,IAAK6D,GAA4BE,EAA2BF,GAA2B,CACrFC,EAAgBF,EAAYQ,GAAO9L,WAAW,SAC9C,GAAIwL,EAAe,CACjBA,EAAcxG,gBAAgB,SAAU,SAAU+G,GAChD3L,EAAaiK,oCAAoC0B,EAAe,KAAMZ,EAAUE,EAClF,EACF,CACF,MAAO,GAAII,EAA2BF,GAA2B,CAC/DnL,EAAaiK,oCAAoC,KAAMkB,EAA0BJ,EAAUE,EAC7F,CACF,CACF,EACAW,uBAAwB,SAAUxJ,EAAQyJ,EAAWC,GACnD,MAAMC,EAAU3J,EAAOO,YACvB,GAAI3C,EAAa8K,uCAAuCiB,GAAU,CAChE,MAAMpK,EAAgB,GAAGmK,KAAmBD,IAC5C,MAAMG,EAAUD,EAAQE,gBAAgBC,OAASH,EAAQE,gBAAgB,GAAK/L,UAC9E,MAAMgL,EAAcc,IAAY,MAAQA,SAAiB,OAAS,EAAIA,EAAQG,gBAC9E,GAAIjB,GAAeA,EAAYgB,OAAS,EAAG,CACzClM,EAAagL,uDAAuDe,EAASpK,EAAeuJ,EAC9F,CACF,CACF,EACAkB,iBAAkB,SAAUnH,GAC1B,MAAMoH,EAASpH,EAAMtC,YACrB,GAAI0J,EAAOlI,KAAK,QAAUkI,EAAO/F,YAAY,UAAY,GAAI,CAC3DhH,EAAW+M,EAAOlI,KAAK,OACzB,CACF,EACAmI,UAAWC,eAAgBnK,GACzB,MAAM/B,EAAU+B,EAAOO,YACvB,MAAM6J,EAAQnM,EAAQR,IAAI,0BAA4BQ,EAAQoM,aAAa,MAAOC,GACzEA,EAAK7M,IAAI,eACf,GAAKQ,EACRkM,eAAeI,EAASX,GACtB,IACE,MAAMY,QAAcZ,EAAQa,iBAC5B,IAAKD,EAAO,CACV,UACQZ,EAAQc,KAAKN,EAGrB,CAFE,MAAO3B,GACPvM,EAAImD,MAAM,+CAAgDoJ,EAC5D,CACF,KAAO,CACL,MAAM/K,EAAQvB,EAAYwB,cAAcyM,GACxC,MAAMlE,EAAgB/J,EAAYgK,gBAAgBzI,GAClD,MAAM0I,EAAsBF,EAAcG,mBAC1C,MAAMsE,EAAavE,EAAoBwE,eAAeJ,GACtD,MAAMK,EAAW,CACfC,OAAQ,CACNtE,eAAgBmE,EAAWnE,eAC3BuE,OAAQJ,EAAWI,QAErBC,OAAQL,EAAWK,QAErBxO,EAAgByO,mCAAmCvN,EAAOiN,GAC1D,GAAIxO,EAAY+O,iBAAiBd,KAAW,KAAM,CAEhDhE,EAAoB+E,WAAWN,EAAU3E,EAC3C,KAAO,CACL,IACE,MAAMkF,QAAiBhF,EAAoBiF,qBAAqBR,EAAU3E,GAC1EhJ,EAAWkO,EAGb,CAFE,MAAO3C,GACPvM,EAAImD,MAAM,4CAA4CoJ,IACxD,CACF,CACF,CAGF,CAFE,MAAOA,GACPvM,EAAImD,MAAM,6BAA8BoJ,EAC1C,CACF,CACA,GAAIxK,EAAQ4L,iBAAmB5L,EAAQ4L,gBAAgBC,OAAS,GAAKM,EAAMlG,YAAY,UAAY,GAAI,CACrG,MAAMoH,EAAarN,EAAQ4L,gBAAgB,GAC3C,GAAIyB,GAAcA,EAAW7N,IAAI,mBAAoB,OAC7C8M,EAASe,EACjB,CACF,CACA,OAAOlB,CACT,EACAmB,aAAc,SAAUC,EAAY3I,GAClC,MAAMgB,EAAehB,EAAMtC,YACzBkL,EAAe7N,EAAasC,wBAAwBsL,GACpDE,EAAc7H,EAAaR,YAC3BsI,EAAYD,EAAYE,eAC1B,GAAID,IAAc,GAAI,CACpB,IAAIE,EAAuBC,EAC3BJ,EAAYK,UAAU,MAGtBlI,EAAamI,aAAaL,GAC1B9H,EAAaoI,4BACb,MAAMC,GAASL,EAAwBhI,EAAatF,cAAgB,MAAQsN,SAA+B,OAAS,EAAIA,EAAsBM,iBAAiB,gBAC/J,GAAID,EAAO,CACT,MAAME,EAA2B,IAAInP,EACrCmP,EAAyBC,QAAQ,gBACjCD,EAAyBE,SAASJ,GAClCrI,EAAa0I,mBAAmBH,EAClC,CACA,MAAMI,GAAQV,EAAyBjI,EAAatG,uBAAyB,MAAQuO,SAAgC,OAAS,EAAIA,EAAuB5H,YAAY,eACrK,GAAIsI,EAAM,CACR,MAAMC,EAAsB,IAAIxP,EAChCwP,EAAoBJ,QAAQ,YAE5BI,EAAoBH,SAASlQ,EAA0BwF,YAAYiC,GAAgB,IAAM2I,GACzF3I,EAAa0I,mBAAmBE,EAClC,CACA,MAAMC,EAAwB,IAAIzP,EAClCyP,EAAsBL,QAAQ,UAC9BK,EAAsBJ,SAAS,oBAC/BzI,EAAa0I,mBAAmBG,GAGhC,MAAMC,EAAgB,IAAI/L,QAAQ,CAACC,EAAS+L,KAC1C5L,KAAKjD,eAAiBiD,KAAKjD,gBAAkB,CAAC,EAC9CiD,KAAKjD,eAAe8F,EAAagJ,SAAW,CAC1ChM,QAASA,EACT+L,OAAQA,GAEV/I,EAAaiJ,QAAQ,GAEvBrB,EAAalK,UAAUC,SAASmL,EAClC,KAAO,CACL9P,EAAWwC,MAAMzC,EAAcmQ,QAAQ,qCACzC,CACF,EACAC,qBAAsB,SAAUnK,EAAOoK,EAAkBpE,EAAc2C,GACrE,MAAM0B,EAASrK,EAAMlC,aAAa,UAChCkD,EAAehB,EAAMtC,YACrBmL,EAAc7H,EAAaR,YAC7BqI,EAAYK,UAAU,OACtB,MAAMoB,EAAUtJ,EAAatG,oBAC7B,GAAI2P,IAAW,GAAKA,GAAU,IAAK,CACjClM,KAAKoM,+BAA+BvK,GACpC7B,KAAKjD,eAAe8F,EAAagJ,SAASD,QAC5C,KAAO,CACL,MAAMS,EAAUxK,EAAMlC,aAAa,WAAW2M,KAC9C,GAAID,EAAS,CAEXF,IAAY,MAAQA,SAAiB,OAAS,EAAIA,EAAQI,YAAY,cAAeF,EAAS,KAChG,CAGA,GAAIJ,IAAqB,MAAQA,SAA0B,GAAKA,EAAiB3K,KAAM,CACrF6K,IAAY,MAAQA,SAAiB,OAAS,EAAIA,EAAQI,YAAYN,EAAiB3K,KAAMuB,EAAaqB,WAC5G,CAGAiI,IAAY,MAAQA,SAAiB,OAAS,EAAIA,EAAQI,YAAY1E,EAAc,KAAM,MAC1FsE,IAAY,MAAQA,SAAiB,OAAS,EAAIA,EAAQI,YAAY1E,EAAc/K,UAAW,MAC/FkD,KAAKwM,0BAA0B3K,EAAO6I,EAAaF,GACnDxK,KAAKjD,eAAe8F,EAAagJ,SAAShM,SAC5C,QACOG,KAAKjD,eAAe8F,EAAagJ,SAGxC,MAAM9I,EAAyB3H,EAA0BwF,YAAYiC,GACrE,IAAKE,IAA2BoJ,EAAS,CACvC,MACF,CACA,MAAMM,EAAmB,CAAC,GAAGN,EAAQ9K,aAAawG,KAClD,GAAIoE,IAAqB,MAAQA,SAA0B,GAAKA,EAAiB3K,KAAM,CACrFmL,EAAiBC,KAAK,GAAGP,EAAQ9K,aAAa4K,EAAiB3K,OACjE,CACA,IAAIhF,EAAU6P,EAAQ3P,aACtB,IAAKF,EAAQG,IAAI,0CAA2C,CAC1D,MAAMC,EAAQvB,EAAYwB,cAAckG,GACxCvG,EAAUI,EAAMH,oBAAoBC,YACtC,CACA,GAAIF,EAAQiF,oBAAqB,CAC/BjF,EAAQkF,gBAAgB,iBAAkB,KACxCpG,EAA0BqG,KAAKiJ,EAAavO,EAASuF,OAAQ+K,EAAiB,EAElF,KAAO,CACLrR,EAA0BqG,KAAKiJ,EAAavO,EAASuF,OAAQ+K,EAC/D,CACF,EACAL,+BAAgC,SAAUpN,GAExC,MAAM2N,EAAS3N,EAAOW,aAAa,gBAAkBX,EAAOW,aAAa,YACzE,IAAIiN,EAAcnF,EAClB,IACEA,EAASkF,GAAUE,KAAKC,MAAMH,GAC9BC,EAAenF,EAAOpJ,OAASoJ,EAAOpJ,MAAM0O,OAG9C,CAFE,MAAOC,GACPJ,EAAeD,GAAU/Q,EAAcmQ,QAAQ,oCACjD,CACAlQ,EAAWwC,MAAMuO,EACnB,EACAK,aAAc,SAAUpL,EAAOoK,EAAkBpE,EAAc2C,GAC7D,MAAM0C,EAAerL,EAAMtC,YAC3B,MAAMmL,EAAcwC,EAAa7K,YACjC,MAAM8J,EAAUzB,EAAYnO,oBAG5B4P,EAAQI,YAAY1E,EAAc,MAMlCsE,EAAQI,YAAY1E,EAAc/K,UAAW,MAC7CkD,KAAKwM,0BAA0B3K,EAAO6I,EAAaF,GAGnD,MAAM7J,EAAwBvF,EAA0BwF,YAAYsM,GACpE,GAAIvM,EAAuB,CACzB,IAAIrE,EAAU6P,EAAQ3P,aACtB,IAAKF,EAAQG,IAAI,0CAA2C,CAC1D,MAAMC,EAAQvB,EAAYwB,cAAcuQ,GACxC5Q,EAAUI,EAAMH,oBAAoBC,YACtC,CACA,MAAMuE,EAAO,CAAC,GAAGoL,EAAQ9K,aAAawG,KACtC,GAAIoE,IAAqB,MAAQA,SAA0B,GAAKA,EAAiB3K,KAAM,CACrFP,EAAK2L,KAAK,GAAGP,EAAQ9K,aAAa4K,EAAiB3K,OACrD,CACAlG,EAA0BqG,KAAKyL,EAAc/Q,EAAS6F,WAAYjB,GAClEzE,EAAQkF,gBAAgB,iBAAkB,WACxCpG,EAA0BqG,KAAKyL,EAAc/Q,EAASuF,OAAQX,EAChE,EACF,CACF,EACAyL,0BAA2B,SAAUxN,EAAQ+H,EAAU7J,GACrD,MAAM+B,EAAgBrC,EAAasC,wBAAwBhC,GAC3D,GAAI6J,GAAYA,EAASxK,oBAAoBkD,cAAe,CAC1D,MACF,CACA,GAAIsH,EAAU,CACZ/H,EAAO/B,QAAU8J,CACnB,CACA9H,EAAcE,aAAasB,kBAAkBzB,EAAQgB,KAAKC,sBAAsBjB,GAAQkB,MAAM,YAChG,EACAiN,mBAAoB,SAAUC,GAC5B,OAAOrR,EAASoR,mBAAmBC,EACrC,EAWAC,0BAA2B,SAAUC,EAAgBC,EAAmBC,GACtE,IAAIC,EACJ,IAAInQ,EACJ,IAAIoQ,EACJ,GAAIJ,EAAgB,CAClBhQ,EAAa5B,EAAa8B,eAC1BkQ,EAAgBpQ,EAAWoI,UAAU,GAAG6H,gBACxC,OAAOjQ,EAAWqQ,qBAAqBJ,EAAmB,MAAMpN,KAAK,SAAUyN,GAE7E,MAAMC,EAAiBD,EAAeA,EAAe,IAAM,GAAKlH,OAAOC,KAAKiH,GAAgB,IAC5F,MAAME,EAAkBD,EAAeE,OACvC,MAAMC,EAAsBF,EAAgBtQ,eAC5C,MAAMyQ,EAAgBJ,EAAeK,WAAWC,KAAK,SAAUC,GAC7D,OAAOA,EAAWC,mBAAqBD,EAAWC,kBAAkBC,gBAAkBZ,CACxF,GACA,GAAIO,IAAkBA,EAAcM,kBAAmB,CACrD,OAAO3O,QAAQgM,OAAO,0CAA0C8B,IAClE,CACA,MAAMc,EAAkBR,EAAoBtI,UAAU,IAAImI,EAAeY,kBAAkBR,EAAcM,yDACzG,GAAIC,GAAmBA,EAAgBE,MAAO,CAC5CjB,EAAgBe,EAAgBE,MAChC,MAAMC,EAAU,IAAI3S,EAAO,CACzBsF,KAAM2M,EAAcM,kBACpBK,SAAU,KACVC,OAAQvB,IAEV,MAAMwB,EAAehB,EAAgBiB,SAAS,IAAIlB,EAAeY,iBAAkB3R,UAAWA,UAAW6R,EAAS,CAChHK,QAASvB,IAEX,OAAOqB,EAAaG,gBAAgB,EAAG,EACzC,KAAO,CACLzB,EAAiB,QACjB,OAAOF,CACT,CACF,GAAGnN,KAAK,SAAU+O,GAChB,IAAIC,EACJ,MAAMC,EAAe3B,GAAiB0B,EAAcD,EAAU,MAAQ,MAAQC,SAAqB,OAAS,EAAIA,EAAYzJ,YAAY+H,GAAiB,GACzJ,OAAQD,GACN,IAAK,cACH,OAAO4B,EACT,IAAK,mBACH,OAAOtT,EAAKuT,yBAAyB,eAAetD,QAAQ,gCAAiC,CAACqD,EAAc9B,IAC9G,IAAK,mBACH,OAAOxR,EAAKuT,yBAAyB,eAAetD,QAAQ,gCAAiC,CAACuB,EAAgB8B,IAChH,QACE,OAAO9B,EAEb,GAAGhN,MAAM,SAAUmH,GACjB,MAAM6H,EAAO7H,EAAOyE,QAAUzE,EAAOyE,SAAW,IAAM,uBAAuBzE,EAAOyE,sCAAsCqB,IAAsB9F,EAAOsF,QACvJ7R,EAAImD,MAAMiR,EACZ,EACF,CACA,OAAOhC,CACT,EACAiC,oBAAqB,SAAUvQ,GAC7BnD,EAAWwC,MAAMzC,EAAcmQ,QAAQ,uCAAwC,CAC7EyD,QAAS,cAAc5T,EAAcmQ,QAAQ,uEAAuE/M,EAAOyQ,gBAAgBC,mBAAqB,cAAc9T,EAAcmQ,QAAQ,sEAAsE/M,EAAOO,YAAYoQ,cAAcC,WAAWC,WAAW,IAAK,QACtUC,aAAc,SAElB,EACAC,qBAAsB,SAAU/Q,GAC9BnD,EAAWwC,MAAMzC,EAAcmQ,QAAQ,oCAAqC/M,EAAOO,YAAYyQ,qBAAqBC,QAAQ,IAAK,CAC/HH,aAAc,SAElB,EACA5Q,wBAAyB,SAAUhC,GACjC,OAAOA,EAAYT,IAAI,4BAA8BS,EAAYgT,YAAchT,CACjF,GAMF,OAAON,CACT,EAAG","sourceRoot":"field"}},{"offset":{"line":7860,"column":0},"map":{"version":3,"names":["addTextArrangementToBindingExpression","bindingExpressionToEnhance","fullContextPath","transformRecursively","expression","outExpression","modelName","undefined","oPropertyDataModelPath","enhanceDataModelPath","path","CommonFormatters","getBindingWithTextArrangement","formatValueRecursively","formatWithTypeInformation","targetObject","getTextBindingExpression","oPropertyDataModelObjectPath","fieldFormatOptions","getTextBinding","asObject","$Type","fieldValue","Value","compileExpression","constant","PropertyHelper","isPathExpression","$target","oBindingExpression","pathInModel","getContextRelativeTargetObjectPath","oTargetBinding","annotations","Measures","Unit","ISOCurrency","UIFormatters","getBindingWithUnitOrCurrency","measureDisplayMode","isComplexTypeExpression","formatOptions","showMeasure","Common","Timezone","getBindingWithTimezone","dateFormatOptions","getValueBinding","ignoreUnit","ignoreFormatting","bindingParameters","targetTypeAny","keepUnit","oNavPath","targetEntityType","resolvePath","target","visitedObjects","forEach","oNavObj","_type","navigationProperties","push","isProperty","isPathInModelExpression","Communication","IsEmailAddress","type","oTimezone","parseKeepsEmptyString","constraints","parameters","targetType","getExpressionFromAnnotation","getAssociatedTextBinding","textPropertyPath","getAssociatedTextPropertyPath","oTextPropertyPath","$$noPatch","isUsedInNavigationWithQuickViewFacets","oDataModelPath","oProperty","aNavigationProperties","aSemanticObjects","SemanticKey","bIsUsedInNavigationWithQuickViewFacets","oNavProp","referentialConstraint","length","oRefConstraint","sourceProperty","name","UI","QuickViewFacets","contextLocation","targetEntitySet","aIsTargetSemanticKey","some","oSemantic","isKey","isRetrieveTextFromValueListEnabled","oPropertyPath","Text","hasValueHelp","textAlignMode","getVisibleExpression","dataFieldModelPath","propertyValue","Target","isAnalyticalGroupHeaderExpanded","isAnalytics","IsExpanded","isAnalyticalLeaf","equal","NodeLevel","and","not","Hidden","ifElse","or","QVTextBinding","oPropertyValueDataModelObjectPath","returnValue","getQuickViewType","IsPhoneNumber","getSemanticObjectExpressionToResolve","propertyAnnotations","dynamicSemanticObjectsOnly","aSemObjExprToResolve","sSemObjExpression","annotation","semanticObjectsKeys","Object","keys","filter","element","startsWith","semanticObject","key","getDynamicPathFromSemanticObject","value","getSemanticObjects","sCustomDataKey","sCustomDataValue","aSemObjCustomData","iSemObjCount","oSemanticObjectsModel","JSONModel","$$valueAsPromise","oSemObjBindingContext","createBindingContext","getMultipleLinesForDataField","oThis","sPropertyType","isMultiLineText","wrap","editMode","indexOf","IsEditable","_hasValueHelpToShow","oPropertyUnit","getAssociatedUnitProperty","oPropertyCurrency","getAssociatedCurrencyProperty","setEditStyleProperties","oProps","oDataField","onlyEditStyle","editStyle","valueBindingExpression","Visualization","textBindingExpression","showTimezone","MultiLineText","valueOf","unitBindingExpression","getBindingForUnitOrCurrency","descriptionBindingExpression","ifUnitEditable","unitProperty","unitEditable","isReadOnlyExpression","hasSemanticObjectInNavigationOrProperty","propertyDataModelObjectPath","property","SemanticObjectHelper","hasSemanticObject","lastNavProp","find","contextNavProp","getDataModelObjectPathForValue","initialDataModelObjectPath","valuePath","term","replace"],"sourceRoot":"field","sources":["FieldTemplating.ts"],"sourcesContent":["import type { NavigationProperty, Property } from \"@sap-ux/vocabularies-types\";\nimport type { DataFieldAbstractTypes, DataFieldWithUrl, DataPointTypeTypes } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport { UIAnnotationTypes } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport { UI } from \"sap/fe/core/converters/helpers/BindingHelper\";\nimport type { BindingToolkitExpression, CompiledBindingToolkitExpression } from \"sap/fe/core/helpers/BindingToolkit\";\nimport {\n\tand,\n\tcompileExpression,\n\tconstant,\n\tequal,\n\tformatWithTypeInformation,\n\tgetExpressionFromAnnotation,\n\tifElse,\n\tisComplexTypeExpression,\n\tisPathInModelExpression,\n\tnot,\n\tor,\n\tpathInModel,\n\ttransformRecursively\n} from \"sap/fe/core/helpers/BindingToolkit\";\nimport * as CommonFormatters from \"sap/fe/core/templating/CommonFormatters\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { enhanceDataModelPath, getContextRelativeTargetObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { isReadOnlyExpression } from \"sap/fe/core/templating/FieldControlHelper\";\nimport * as PropertyHelper from \"sap/fe/core/templating/PropertyHelper\";\nimport * as SemanticObjectHelper from \"sap/fe/core/templating/SemanticObjectHelper\";\nimport { getDynamicPathFromSemanticObject } from \"sap/fe/core/templating/SemanticObjectHelper\";\nimport type { DisplayMode, PropertyOrPath } from \"sap/fe/core/templating/UIFormatters\";\nimport * as UIFormatters from \"sap/fe/core/templating/UIFormatters\";\nimport type { FieldProperties } from \"sap/fe/macros/internal/InternalField\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\n\n/**\n * Recursively add the text arrangement to a binding expression.\n *\n * @param bindingExpressionToEnhance The binding expression to be enhanced\n * @param fullContextPath The current context path we're on (to properly resolve the text arrangement properties)\n * @returns An updated expression containing the text arrangement binding.\n */\nexport const addTextArrangementToBindingExpression = function (\n\tbindingExpressionToEnhance: BindingToolkitExpression<any>,\n\tfullContextPath: DataModelObjectPath\n): BindingToolkitExpression<any> {\n\treturn transformRecursively(bindingExpressionToEnhance, \"PathInModel\", (expression) => {\n\t\tlet outExpression: BindingToolkitExpression<any> = expression;\n\t\tif (expression.modelName === undefined) {\n\t\t\t// In case of default model we then need to resolve the text arrangement property\n\t\t\tconst oPropertyDataModelPath = enhanceDataModelPath(fullContextPath, expression.path);\n\t\t\toutExpression = CommonFormatters.getBindingWithTextArrangement(oPropertyDataModelPath, expression);\n\t\t}\n\t\treturn outExpression;\n\t});\n};\n\nexport const formatValueRecursively = function (\n\tbindingExpressionToEnhance: BindingToolkitExpression<any>,\n\tfullContextPath: DataModelObjectPath\n): BindingToolkitExpression<any> {\n\treturn transformRecursively(bindingExpressionToEnhance, \"PathInModel\", (expression) => {\n\t\tlet outExpression: BindingToolkitExpression<any> = expression;\n\t\tif (expression.modelName === undefined) {\n\t\t\t// In case of default model we then need to resolve the text arrangement property\n\t\t\tconst oPropertyDataModelPath = enhanceDataModelPath(fullContextPath, expression.path);\n\t\t\toutExpression = formatWithTypeInformation(oPropertyDataModelPath.targetObject, expression);\n\t\t}\n\t\treturn outExpression;\n\t});\n};\nexport const getTextBindingExpression = function (\n\toPropertyDataModelObjectPath: DataModelObjectPath,\n\tfieldFormatOptions: { displayMode?: DisplayMode; measureDisplayMode?: string }\n): BindingToolkitExpression<string> {\n\treturn getTextBinding(oPropertyDataModelObjectPath, fieldFormatOptions, true) as BindingToolkitExpression<string>;\n};\nexport const getTextBinding = function (\n\toPropertyDataModelObjectPath: DataModelObjectPath,\n\tfieldFormatOptions: {\n\t\tdisplayMode?: DisplayMode;\n\t\tmeasureDisplayMode?: string;\n\t\tdateFormatOptions?: { showTime: string; showDate: string; showTimezone: string };\n\t},\n\tasObject: boolean = false\n): BindingToolkitExpression<string> | CompiledBindingToolkitExpression {\n\tif (\n\t\toPropertyDataModelObjectPath.targetObject?.$Type === \"com.sap.vocabularies.UI.v1.DataField\" ||\n\t\toPropertyDataModelObjectPath.targetObject?.$Type === \"com.sap.vocabularies.UI.v1.DataPointType\" ||\n\t\toPropertyDataModelObjectPath.targetObject?.$Type === \"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath\" ||\n\t\toPropertyDataModelObjectPath.targetObject?.$Type === \"com.sap.vocabularies.UI.v1.DataFieldWithUrl\" ||\n\t\toPropertyDataModelObjectPath.targetObject?.$Type === \"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation\" ||\n\t\toPropertyDataModelObjectPath.targetObject?.$Type === \"com.sap.vocabularies.UI.v1.DataFieldWithAction\"\n\t) {\n\t\t// If there is no resolved property, the value is returned as a constant\n\t\tconst fieldValue = oPropertyDataModelObjectPath.targetObject.Value || \"\";\n\t\treturn compileExpression(constant(fieldValue));\n\t}\n\tif (PropertyHelper.isPathExpression(oPropertyDataModelObjectPath.targetObject) && oPropertyDataModelObjectPath.targetObject.$target) {\n\t\toPropertyDataModelObjectPath = enhanceDataModelPath(oPropertyDataModelObjectPath, oPropertyDataModelObjectPath.targetObject.path);\n\t}\n\tconst oBindingExpression = pathInModel(getContextRelativeTargetObjectPath(oPropertyDataModelObjectPath));\n\tlet oTargetBinding;\n\tif (\n\t\toPropertyDataModelObjectPath.targetObject?.annotations?.Measures?.Unit ||\n\t\toPropertyDataModelObjectPath.targetObject?.annotations?.Measures?.ISOCurrency\n\t) {\n\t\toTargetBinding = UIFormatters.getBindingWithUnitOrCurrency(oPropertyDataModelObjectPath, oBindingExpression);\n\t\tif (fieldFormatOptions?.measureDisplayMode === \"Hidden\" && isComplexTypeExpression(oTargetBinding)) {\n\t\t\t// TODO: Refactor once types are less generic here\n\t\t\toTargetBinding.formatOptions = {\n\t\t\t\t...oTargetBinding.formatOptions,\n\t\t\t\tshowMeasure: false\n\t\t\t};\n\t\t}\n\t} else if (oPropertyDataModelObjectPath.targetObject?.annotations?.Common?.Timezone) {\n\t\toTargetBinding = UIFormatters.getBindingWithTimezone(\n\t\t\toPropertyDataModelObjectPath,\n\t\t\toBindingExpression,\n\t\t\tfalse,\n\t\t\ttrue,\n\t\t\tfieldFormatOptions.dateFormatOptions\n\t\t);\n\t} else {\n\t\toTargetBinding = CommonFormatters.getBindingWithTextArrangement(\n\t\t\toPropertyDataModelObjectPath,\n\t\t\toBindingExpression,\n\t\t\tfieldFormatOptions\n\t\t);\n\t}\n\tif (asObject) {\n\t\treturn oTargetBinding;\n\t}\n\t// We don't include $$nopatch and parseKeepEmptyString as they make no sense in the text binding case\n\treturn compileExpression(oTargetBinding);\n};\n\nexport const getValueBinding = function (\n\toPropertyDataModelObjectPath: DataModelObjectPath,\n\tfieldFormatOptions: { measureDisplayMode?: string },\n\tignoreUnit: boolean = false,\n\tignoreFormatting: boolean = false,\n\tbindingParameters?: object,\n\ttargetTypeAny = false,\n\tkeepUnit = false\n): CompiledBindingToolkitExpression {\n\tif (PropertyHelper.isPathExpression(oPropertyDataModelObjectPath.targetObject) && oPropertyDataModelObjectPath.targetObject.$target) {\n\t\tconst oNavPath = oPropertyDataModelObjectPath.targetEntityType.resolvePath(oPropertyDataModelObjectPath.targetObject.path, true);\n\t\toPropertyDataModelObjectPath.targetObject = oNavPath.target;\n\t\toNavPath.visitedObjects.forEach((oNavObj: any) => {\n\t\t\tif (oNavObj && oNavObj._type === \"NavigationProperty\") {\n\t\t\t\toPropertyDataModelObjectPath.navigationProperties.push(oNavObj);\n\t\t\t}\n\t\t});\n\t}\n\n\tconst targetObject = oPropertyDataModelObjectPath.targetObject;\n\tif (PropertyHelper.isProperty(targetObject)) {\n\t\tlet oBindingExpression: BindingToolkitExpression<any> = pathInModel(\n\t\t\tgetContextRelativeTargetObjectPath(oPropertyDataModelObjectPath)\n\t\t);\n\t\tif (isPathInModelExpression(oBindingExpression)) {\n\t\t\tif (targetObject.annotations?.Communication?.IsEmailAddress) {\n\t\t\t\toBindingExpression.type = \"sap.fe.core.type.Email\";\n\t\t\t} else if (!ignoreUnit && (targetObject.annotations?.Measures?.ISOCurrency || targetObject.annotations?.Measures?.Unit)) {\n\t\t\t\toBindingExpression = UIFormatters.getBindingWithUnitOrCurrency(\n\t\t\t\t\toPropertyDataModelObjectPath,\n\t\t\t\t\toBindingExpression,\n\t\t\t\t\ttrue,\n\t\t\t\t\tkeepUnit ? undefined : { showMeasure: false }\n\t\t\t\t) as any;\n\t\t\t} else {\n\t\t\t\tconst oTimezone = oPropertyDataModelObjectPath.targetObject.annotations?.Common?.Timezone;\n\t\t\t\tif (oTimezone) {\n\t\t\t\t\toBindingExpression = UIFormatters.getBindingWithTimezone(oPropertyDataModelObjectPath, oBindingExpression, true) as any;\n\t\t\t\t} else {\n\t\t\t\t\toBindingExpression = formatWithTypeInformation(targetObject, oBindingExpression) as any;\n\t\t\t\t}\n\t\t\t\tif (isPathInModelExpression(oBindingExpression) && oBindingExpression.type === \"sap.ui.model.odata.type.String\") {\n\t\t\t\t\toBindingExpression.formatOptions = {\n\t\t\t\t\t\tparseKeepsEmptyString: true\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (isPathInModelExpression(oBindingExpression)) {\n\t\t\t\tif (ignoreFormatting) {\n\t\t\t\t\tdelete oBindingExpression.formatOptions;\n\t\t\t\t\tdelete oBindingExpression.constraints;\n\t\t\t\t\tdelete oBindingExpression.type;\n\t\t\t\t}\n\t\t\t\tif (bindingParameters) {\n\t\t\t\t\toBindingExpression.parameters = bindingParameters;\n\t\t\t\t}\n\t\t\t\tif (targetTypeAny) {\n\t\t\t\t\toBindingExpression.targetType = \"any\";\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn compileExpression(oBindingExpression);\n\t\t} else {\n\t\t\t// if somehow we could not compile the binding -> return empty string\n\t\t\treturn \"\";\n\t\t}\n\t} else if (\n\t\ttargetObject?.$Type === UIAnnotationTypes.DataFieldWithUrl ||\n\t\ttargetObject?.$Type === UIAnnotationTypes.DataFieldWithNavigationPath\n\t) {\n\t\treturn compileExpression(getExpressionFromAnnotation((targetObject as DataFieldWithUrl).Value));\n\t} else {\n\t\treturn \"\";\n\t}\n};\n\nexport const getAssociatedTextBinding = function (\n\toPropertyDataModelObjectPath: DataModelObjectPath,\n\tfieldFormatOptions: { measureDisplayMode?: string }\n): CompiledBindingToolkitExpression {\n\tconst textPropertyPath = PropertyHelper.getAssociatedTextPropertyPath(oPropertyDataModelObjectPath.targetObject);\n\tif (textPropertyPath) {\n\t\tconst oTextPropertyPath = enhanceDataModelPath(oPropertyDataModelObjectPath, textPropertyPath);\n\t\treturn getValueBinding(oTextPropertyPath, fieldFormatOptions, true, true, { $$noPatch: true });\n\t}\n\treturn undefined;\n};\n\nexport const isUsedInNavigationWithQuickViewFacets = function (oDataModelPath: DataModelObjectPath, oProperty: Property): boolean {\n\tconst aNavigationProperties = oDataModelPath?.targetEntityType?.navigationProperties || [];\n\tconst aSemanticObjects = oDataModelPath?.targetEntityType?.annotations?.Common?.SemanticKey || [];\n\tlet bIsUsedInNavigationWithQuickViewFacets = false;\n\taNavigationProperties.forEach((oNavProp: NavigationProperty) => {\n\t\tif (oNavProp.referentialConstraint && oNavProp.referentialConstraint.length) {\n\t\t\toNavProp.referentialConstraint.forEach((oRefConstraint) => {\n\t\t\t\tif (oRefConstraint?.sourceProperty === oProperty.name) {\n\t\t\t\t\tif (oNavProp?.targetType?.annotations?.UI?.QuickViewFacets) {\n\t\t\t\t\t\tbIsUsedInNavigationWithQuickViewFacets = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\tif (oDataModelPath.contextLocation?.targetEntitySet !== oDataModelPath.targetEntitySet) {\n\t\tconst aIsTargetSemanticKey = aSemanticObjects.some(function (oSemantic) {\n\t\t\treturn oSemantic?.$target?.name === oProperty.name;\n\t\t});\n\t\tif ((aIsTargetSemanticKey || oProperty.isKey) && oDataModelPath?.targetEntityType?.annotations?.UI?.QuickViewFacets) {\n\t\t\tbIsUsedInNavigationWithQuickViewFacets = true;\n\t\t}\n\t}\n\treturn bIsUsedInNavigationWithQuickViewFacets;\n};\n\nexport const isRetrieveTextFromValueListEnabled = function (\n\toPropertyPath: PropertyOrPath<Property>,\n\tfieldFormatOptions: { displayMode?: DisplayMode; textAlignMode?: string }\n): boolean {\n\tconst oProperty: Property = (PropertyHelper.isPathExpression(oPropertyPath) && oPropertyPath.$target) || (oPropertyPath as Property);\n\tif (\n\t\t!oProperty.annotations?.Common?.Text &&\n\t\t!oProperty.annotations?.Measures &&\n\t\tPropertyHelper.hasValueHelp(oProperty) &&\n\t\tfieldFormatOptions.textAlignMode === \"Form\"\n\t) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\n/**\n * Returns the binding expression to evaluate the visibility of a DataField or DataPoint annotation.\n *\n * SAP Fiori elements will evaluate either the UI.Hidden annotation defined on the annotation itself or on the target property.\n *\n * @param dataFieldModelPath The metapath referring to the annotation we are evaluating.\n * @param [formatOptions] FormatOptions optional.\n * @param formatOptions.isAnalytics This flag is set when using an analytical table.\n * @returns An expression that you can bind to the UI.\n */\nexport const getVisibleExpression = function (\n\tdataFieldModelPath: DataModelObjectPath,\n\tformatOptions?: { isAnalytics?: boolean }\n): CompiledBindingToolkitExpression {\n\tconst targetObject: DataFieldAbstractTypes | DataPointTypeTypes = dataFieldModelPath.targetObject;\n\tlet propertyValue;\n\tif (targetObject) {\n\t\tswitch (targetObject.$Type) {\n\t\t\tcase UIAnnotationTypes.DataField:\n\t\t\tcase UIAnnotationTypes.DataFieldWithUrl:\n\t\t\tcase UIAnnotationTypes.DataFieldWithNavigationPath:\n\t\t\tcase UIAnnotationTypes.DataFieldWithIntentBasedNavigation:\n\t\t\tcase UIAnnotationTypes.DataFieldWithAction:\n\t\t\tcase UIAnnotationTypes.DataPointType:\n\t\t\t\tpropertyValue = targetObject.Value.$target;\n\t\t\t\tbreak;\n\t\t\tcase UIAnnotationTypes.DataFieldForAnnotation:\n\t\t\t\t// if it is a DataFieldForAnnotation pointing to a DataPoint we look at the dataPoint's value\n\t\t\t\tif (targetObject?.Target?.$target?.$Type === UIAnnotationTypes.DataPointType) {\n\t\t\t\t\tpropertyValue = targetObject.Target.$target?.Value.$target;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t// eslint-disable-next-line no-fallthrough\n\t\t\tcase UIAnnotationTypes.DataFieldForIntentBasedNavigation:\n\t\t\tcase UIAnnotationTypes.DataFieldForAction:\n\t\t\tdefault:\n\t\t\t\tpropertyValue = undefined;\n\t\t}\n\t}\n\tconst isAnalyticalGroupHeaderExpanded = formatOptions?.isAnalytics ? UI.IsExpanded : constant(false);\n\tconst isAnalyticalLeaf = formatOptions?.isAnalytics ? equal(UI.NodeLevel, 0) : constant(false);\n\n\t// A data field is visible if:\n\t// - the UI.Hidden expression in the original annotation does not evaluate to 'true'\n\t// - the UI.Hidden expression in the target property does not evaluate to 'true'\n\t// - in case of Analytics it's not visible for an expanded GroupHeader\n\treturn compileExpression(\n\t\tand(\n\t\t\t...[\n\t\t\t\tnot(equal(getExpressionFromAnnotation(targetObject?.annotations?.UI?.Hidden), true)),\n\t\t\t\tifElse(\n\t\t\t\t\t!!propertyValue,\n\t\t\t\t\tpropertyValue && not(equal(getExpressionFromAnnotation(propertyValue.annotations?.UI?.Hidden), true)),\n\t\t\t\t\ttrue\n\t\t\t\t),\n\t\t\t\tor(not(isAnalyticalGroupHeaderExpanded), isAnalyticalLeaf)\n\t\t\t]\n\t\t)\n\t);\n};\n\nexport const QVTextBinding = function (\n\toPropertyDataModelObjectPath: DataModelObjectPath,\n\toPropertyValueDataModelObjectPath: DataModelObjectPath,\n\tfieldFormatOptions: { displayMode?: DisplayMode; measureDisplayMode?: string },\n\tasObject: boolean = false\n) {\n\tlet returnValue: any = getValueBinding(oPropertyDataModelObjectPath, fieldFormatOptions, asObject);\n\tif (returnValue === \"\") {\n\t\treturnValue = getTextBinding(oPropertyValueDataModelObjectPath, fieldFormatOptions, asObject);\n\t}\n\treturn returnValue;\n};\n\nexport const getQuickViewType = function (oPropertyDataModelObjectPath: DataModelObjectPath): string {\n\tconst targetObject = oPropertyDataModelObjectPath.targetObject;\n\tif (targetObject?.$target?.annotations?.Communication?.IsEmailAddress) {\n\t\treturn \"email\";\n\t}\n\tif (targetObject?.$target?.annotations?.Communication?.IsPhoneNumber) {\n\t\treturn \"phone\";\n\t}\n\treturn \"text\";\n};\n\nexport type SemanticObjectCustomData = {\n\tkey: string;\n\tvalue: string;\n};\n\n/**\n * Get the customData key value pair of SemanticObjects.\n *\n * @param propertyAnnotations The value of the Common annotation.\n * @param [dynamicSemanticObjectsOnly] Flag for retrieving dynamic Semantic Objects only.\n * @returns The array of the semantic Objects.\n */\nexport const getSemanticObjectExpressionToResolve = function (\n\tpropertyAnnotations: any,\n\tdynamicSemanticObjectsOnly?: boolean\n): SemanticObjectCustomData[] {\n\tconst aSemObjExprToResolve: SemanticObjectCustomData[] = [];\n\tlet sSemObjExpression: string;\n\tlet annotation;\n\tif (propertyAnnotations) {\n\t\tconst semanticObjectsKeys = Object.keys(propertyAnnotations).filter(function (element) {\n\t\t\treturn element === \"SemanticObject\" || element.startsWith(\"SemanticObject#\");\n\t\t});\n\t\tfor (const semanticObject of semanticObjectsKeys) {\n\t\t\tannotation = propertyAnnotations[semanticObject];\n\t\t\tsSemObjExpression = compileExpression(getExpressionFromAnnotation(annotation)) as string;\n\t\t\tif (!dynamicSemanticObjectsOnly || (dynamicSemanticObjectsOnly && annotation?.type === \"Path\")) {\n\t\t\t\taSemObjExprToResolve.push({\n\t\t\t\t\tkey: getDynamicPathFromSemanticObject(sSemObjExpression) || sSemObjExpression,\n\t\t\t\t\tvalue: sSemObjExpression\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\treturn aSemObjExprToResolve;\n};\n\nexport const getSemanticObjects = function (aSemObjExprToResolve: any[]): any {\n\tif (aSemObjExprToResolve.length > 0) {\n\t\tlet sCustomDataKey: string = \"\";\n\t\tlet sCustomDataValue: any = \"\";\n\t\tconst aSemObjCustomData: any[] = [];\n\t\tfor (let iSemObjCount = 0; iSemObjCount < aSemObjExprToResolve.length; iSemObjCount++) {\n\t\t\tsCustomDataKey = aSemObjExprToResolve[iSemObjCount].key;\n\t\t\tsCustomDataValue = compileExpression(getExpressionFromAnnotation(aSemObjExprToResolve[iSemObjCount].value));\n\t\t\taSemObjCustomData.push({\n\t\t\t\tkey: sCustomDataKey,\n\t\t\t\tvalue: sCustomDataValue\n\t\t\t});\n\t\t}\n\t\tconst oSemanticObjectsModel: any = new JSONModel(aSemObjCustomData);\n\t\toSemanticObjectsModel.$$valueAsPromise = true;\n\t\tconst oSemObjBindingContext: any = oSemanticObjectsModel.createBindingContext(\"/\");\n\t\treturn oSemObjBindingContext;\n\t} else {\n\t\treturn new JSONModel([]).createBindingContext(\"/\");\n\t}\n};\n\n/**\n * Method to get MultipleLines for a DataField.\n *\n * @name getMultipleLinesForDataField\n * @param {any} oThis The current object\n * @param {string} sPropertyType The property type\n * @param {boolean} isMultiLineText The property isMultiLineText\n * @returns {CompiledBindingToolkitExpression<string>} The binding expression to determine if a data field should be a MultiLineText or not\n * @public\n */\n\nexport const getMultipleLinesForDataField = function (oThis: any, sPropertyType: string, isMultiLineText: boolean): any {\n\tif (oThis.wrap === false) {\n\t\treturn false;\n\t}\n\tif (sPropertyType !== \"Edm.String\") {\n\t\treturn isMultiLineText;\n\t}\n\tif (oThis.editMode === \"Display\") {\n\t\treturn true;\n\t}\n\tif (oThis.editMode.indexOf(\"{\") > -1) {\n\t\t// If the editMode is computed then we just care about the page editMode to determine if the multiline property should be taken into account\n\t\treturn compileExpression(or(not(UI.IsEditable), isMultiLineText));\n\t}\n\treturn isMultiLineText;\n};\n\nconst _hasValueHelpToShow = function (oProperty: Property, measureDisplayMode: string | undefined): boolean | undefined {\n\t// we show a value help if teh property has one or if its visible unit has one\n\tconst oPropertyUnit = PropertyHelper.getAssociatedUnitProperty(oProperty);\n\tconst oPropertyCurrency = PropertyHelper.getAssociatedCurrencyProperty(oProperty);\n\treturn (\n\t\t(PropertyHelper.hasValueHelp(oProperty) && oProperty.type !== \"Edm.Boolean\") ||\n\t\t(measureDisplayMode !== \"Hidden\" &&\n\t\t\t((oPropertyUnit && PropertyHelper.hasValueHelp(oPropertyUnit)) ||\n\t\t\t\t(oPropertyCurrency && PropertyHelper.hasValueHelp(oPropertyCurrency))))\n\t);\n};\n\n/**\n * Sets Edit Style properties for Field in case of Macro Field(Field.metadata.ts) and MassEditDialog fields.\n *\n * @param oProps Field Properties for the Macro Field.\n * @param oDataField DataField Object.\n * @param oDataModelPath DataModel Object Path to the property.\n * @param onlyEditStyle To add only editStyle.\n */\nexport const setEditStyleProperties = function (\n\toProps: FieldProperties,\n\toDataField: any,\n\toDataModelPath: DataModelObjectPath,\n\tonlyEditStyle?: boolean\n): void {\n\tconst oProperty = oDataModelPath.targetObject;\n\tif (!PropertyHelper.isProperty(oProperty)) {\n\t\toProps.editStyle = null;\n\t\treturn;\n\t}\n\tif (!onlyEditStyle) {\n\t\toProps.valueBindingExpression = getValueBinding(oDataModelPath, oProps.formatOptions);\n\t}\n\n\tswitch (oDataField.$Type) {\n\t\tcase UIAnnotationTypes.DataFieldForAnnotation:\n\t\t\tif (oDataField.Target?.$target?.Visualization === \"UI.VisualizationType/Rating\") {\n\t\t\t\toProps.editStyle = \"RatingIndicator\";\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase UIAnnotationTypes.DataPointType:\n\t\t\tif (oDataField?.Visualization === \"UI.VisualizationType/Rating\") {\n\t\t\t\toProps.editStyle = \"RatingIndicator\";\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase UIAnnotationTypes.DataFieldForAction:\n\t\tcase UIAnnotationTypes.DataFieldWithNavigationPath:\n\t\tcase UIAnnotationTypes.DataFieldForIntentBasedNavigation:\n\t\t\toProps.editStyle = null;\n\t\t\treturn;\n\t\tdefault:\n\t}\n\tif (_hasValueHelpToShow(oProperty, oProps.formatOptions?.measureDisplayMode)) {\n\t\tif (!onlyEditStyle) {\n\t\t\toProps.textBindingExpression = getAssociatedTextBinding(oDataModelPath, oProps.formatOptions);\n\t\t\tif (oProps.formatOptions?.measureDisplayMode !== \"Hidden\") {\n\t\t\t\t// for the MDC Field we need to keep the unit inside the valueBindingExpression\n\t\t\t\toProps.valueBindingExpression = getValueBinding(oDataModelPath, oProps.formatOptions, false, false, undefined, false, true);\n\t\t\t}\n\t\t}\n\t\toProps.editStyle = \"InputWithValueHelp\";\n\t\treturn;\n\t}\n\n\tswitch (oProperty.type) {\n\t\tcase \"Edm.Date\":\n\t\t\toProps.editStyle = \"DatePicker\";\n\t\t\treturn;\n\t\tcase \"Edm.Time\":\n\t\tcase \"Edm.TimeOfDay\":\n\t\t\toProps.editStyle = \"TimePicker\";\n\t\t\treturn;\n\t\tcase \"Edm.DateTime\":\n\t\tcase \"Edm.DateTimeOffset\":\n\t\t\toProps.editStyle = \"DateTimePicker\";\n\t\t\t// No timezone defined. Also for compatibility reasons.\n\t\t\tif (!oProperty.annotations?.Common?.Timezone) {\n\t\t\t\toProps.showTimezone = undefined;\n\t\t\t} else {\n\t\t\t\toProps.showTimezone = true;\n\t\t\t}\n\t\t\treturn;\n\t\tcase \"Edm.Boolean\":\n\t\t\toProps.editStyle = \"CheckBox\";\n\t\t\treturn;\n\t\tcase \"Edm.Stream\":\n\t\t\toProps.editStyle = \"File\";\n\t\t\treturn;\n\t\tcase \"Edm.String\":\n\t\t\tif (oProperty.annotations?.UI?.MultiLineText?.valueOf()) {\n\t\t\t\toProps.editStyle = \"TextArea\";\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\toProps.editStyle = \"Input\";\n\t}\n\tif (oProperty.annotations?.Measures?.ISOCurrency || oProperty.annotations?.Measures?.Unit) {\n\t\tif (!onlyEditStyle) {\n\t\t\toProps.unitBindingExpression = compileExpression(UIFormatters.getBindingForUnitOrCurrency(oDataModelPath));\n\t\t\toProps.descriptionBindingExpression = UIFormatters.ifUnitEditable(\n\t\t\t\toProperty,\n\t\t\t\t\"\",\n\t\t\t\tUIFormatters.getBindingForUnitOrCurrency(oDataModelPath)\n\t\t\t);\n\t\t\tconst unitProperty =\n\t\t\t\tPropertyHelper.getAssociatedCurrencyProperty(oProperty) || PropertyHelper.getAssociatedUnitProperty(oProperty);\n\t\t\toProps.unitEditable = compileExpression(not(isReadOnlyExpression(unitProperty)));\n\t\t}\n\t\toProps.editStyle = \"InputWithUnit\";\n\t\treturn;\n\t}\n\n\toProps.editStyle = \"Input\";\n};\n\nexport const hasSemanticObjectInNavigationOrProperty = (propertyDataModelObjectPath: DataModelObjectPath) => {\n\tconst property = propertyDataModelObjectPath.targetObject as Property;\n\tif (SemanticObjectHelper.hasSemanticObject(property)) {\n\t\treturn true;\n\t}\n\tconst lastNavProp = propertyDataModelObjectPath?.navigationProperties?.length\n\t\t? propertyDataModelObjectPath?.navigationProperties[propertyDataModelObjectPath?.navigationProperties?.length - 1]\n\t\t: null;\n\tif (\n\t\t!lastNavProp ||\n\t\tpropertyDataModelObjectPath.contextLocation?.navigationProperties?.find(\n\t\t\t(contextNavProp) => contextNavProp.name === lastNavProp.name\n\t\t)\n\t) {\n\t\treturn false;\n\t}\n\treturn SemanticObjectHelper.hasSemanticObject(lastNavProp);\n};\n\n/**\n * Get the dataModelObjectPath with the value property as targetObject if it exists\n * for a dataModelObjectPath targeting a DataField or a DataPoint annotation.\n *\n * @param initialDataModelObjectPath\n * @returns The dataModelObjectPath targetiing the value property or undefined\n */\nexport const getDataModelObjectPathForValue = (initialDataModelObjectPath: DataModelObjectPath): DataModelObjectPath | undefined => {\n\tif (!initialDataModelObjectPath.targetObject) {\n\t\treturn undefined;\n\t}\n\tlet valuePath = \"\";\n\t// data point annotations need not have $Type defined, so add it if missing\n\tif (initialDataModelObjectPath.targetObject.term === \"com.sap.vocabularies.UI.v1.DataPoint\") {\n\t\tinitialDataModelObjectPath.targetObject.$Type = initialDataModelObjectPath.targetObject.$Type || UIAnnotationTypes.DataPointType;\n\t}\n\tswitch (initialDataModelObjectPath.targetObject.$Type) {\n\t\tcase UIAnnotationTypes.DataField:\n\t\tcase UIAnnotationTypes.DataPointType:\n\t\tcase UIAnnotationTypes.DataFieldWithNavigationPath:\n\t\tcase UIAnnotationTypes.DataFieldWithUrl:\n\t\tcase UIAnnotationTypes.DataFieldWithIntentBasedNavigation:\n\t\tcase UIAnnotationTypes.DataFieldWithAction:\n\t\t\tif (typeof initialDataModelObjectPath.targetObject.Value === \"object\") {\n\t\t\t\tvaluePath = initialDataModelObjectPath.targetObject.Value.path;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase UIAnnotationTypes.DataFieldForAnnotation:\n\t\t\tif (initialDataModelObjectPath.targetObject.Target.$target) {\n\t\t\t\tif (\n\t\t\t\t\tinitialDataModelObjectPath.targetObject.Target.$target.$Type === UIAnnotationTypes.DataField ||\n\t\t\t\t\tinitialDataModelObjectPath.targetObject.Target.$target.$Type === UIAnnotationTypes.DataPointType\n\t\t\t\t) {\n\t\t\t\t\tif (initialDataModelObjectPath.targetObject.Target.value.indexOf(\"/\") > 0) {\n\t\t\t\t\t\tvaluePath = initialDataModelObjectPath.targetObject.Target.value.replace(\n\t\t\t\t\t\t\t/\\/@.*/,\n\t\t\t\t\t\t\t`/${initialDataModelObjectPath.targetObject.Target.$target.Value?.path}`\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvaluePath = initialDataModelObjectPath.targetObject.Target.$target.Value?.path;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvaluePath = initialDataModelObjectPath.targetObject.Target?.path;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t}\n\n\tif (valuePath && valuePath.length > 0) {\n\t\treturn enhanceDataModelPath(initialDataModelObjectPath, valuePath);\n\t} else {\n\t\treturn undefined;\n\t}\n};\n"],"mappings":"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"}},{"offset":{"line":8390,"column":0},"map":{"version":3,"names":["sap","ui","define","BindingHelper","BindingToolkit","CommonFormatters","DataModelPathHelper","FieldControlHelper","PropertyHelper","SemanticObjectHelper","UIFormatters","JSONModel","_exports","getDynamicPathFromSemanticObject","isReadOnlyExpression","getContextRelativeTargetObjectPath","enhanceDataModelPath","transformRecursively","pathInModel","or","not","isPathInModelExpression","isComplexTypeExpression","ifElse","getExpressionFromAnnotation","formatWithTypeInformation","equal","constant","compileExpression","and","UI","addTextArrangementToBindingExpression","bindingExpressionToEnhance","fullContextPath","expression","outExpression","modelName","undefined","oPropertyDataModelPath","path","getBindingWithTextArrangement","formatValueRecursively","targetObject","getTextBindingExpression","oPropertyDataModelObjectPath","fieldFormatOptions","getTextBinding","_oPropertyDataModelOb","_oPropertyDataModelOb2","_oPropertyDataModelOb3","_oPropertyDataModelOb4","_oPropertyDataModelOb5","_oPropertyDataModelOb6","_oPropertyDataModelOb7","_oPropertyDataModelOb8","_oPropertyDataModelOb9","_oPropertyDataModelOb10","_oPropertyDataModelOb11","_oPropertyDataModelOb12","_oPropertyDataModelOb13","_oPropertyDataModelOb14","_oPropertyDataModelOb15","asObject","arguments","length","$Type","fieldValue","Value","isPathExpression","$target","oBindingExpression","oTargetBinding","annotations","Measures","Unit","ISOCurrency","getBindingWithUnitOrCurrency","measureDisplayMode","formatOptions","showMeasure","Common","Timezone","getBindingWithTimezone","dateFormatOptions","getValueBinding","ignoreUnit","ignoreFormatting","bindingParameters","targetTypeAny","keepUnit","oNavPath","targetEntityType","resolvePath","target","visitedObjects","forEach","oNavObj","_type","navigationProperties","push","isProperty","_targetObject$annotat","_targetObject$annotat2","_targetObject$annotat3","_targetObject$annotat4","_targetObject$annotat5","_targetObject$annotat6","Communication","IsEmailAddress","type","_oPropertyDataModelOb16","_oPropertyDataModelOb17","oTimezone","parseKeepsEmptyString","constraints","parameters","targetType","getAssociatedTextBinding","textPropertyPath","getAssociatedTextPropertyPath","oTextPropertyPath","$$noPatch","isUsedInNavigationWithQuickViewFacets","oDataModelPath","oProperty","_oDataModelPath$targe","_oDataModelPath$targe2","_oDataModelPath$targe3","_oDataModelPath$targe4","_oDataModelPath$conte","aNavigationProperties","aSemanticObjects","SemanticKey","bIsUsedInNavigationWithQuickViewFacets","oNavProp","referentialConstraint","oRefConstraint","sourceProperty","name","_oNavProp$targetType","_oNavProp$targetType$","_oNavProp$targetType$2","QuickViewFacets","contextLocation","targetEntitySet","_oDataModelPath$targe5","_oDataModelPath$targe6","_oDataModelPath$targe7","aIsTargetSemanticKey","some","oSemantic","_oSemantic$$target","isKey","isRetrieveTextFromValueListEnabled","oPropertyPath","_oProperty$annotation","_oProperty$annotation2","_oProperty$annotation3","Text","hasValueHelp","textAlignMode","getVisibleExpression","dataFieldModelPath","_targetObject$Target","_targetObject$Target$","_targetObject$annotat7","_targetObject$annotat8","_propertyValue$annota","_propertyValue$annota2","propertyValue","Target","_targetObject$Target$2","isAnalyticalGroupHeaderExpanded","isAnalytics","IsExpanded","isAnalyticalLeaf","NodeLevel","Hidden","QVTextBinding","oPropertyValueDataModelObjectPath","returnValue","getQuickViewType","_targetObject$$target","_targetObject$$target2","_targetObject$$target3","_targetObject$$target4","_targetObject$$target5","_targetObject$$target6","IsPhoneNumber","getSemanticObjectExpressionToResolve","propertyAnnotations","dynamicSemanticObjectsOnly","aSemObjExprToResolve","sSemObjExpression","annotation","semanticObjectsKeys","Object","keys","filter","element","startsWith","semanticObject","_annotation","key","value","getSemanticObjects","sCustomDataKey","sCustomDataValue","aSemObjCustomData","iSemObjCount","oSemanticObjectsModel","$$valueAsPromise","oSemObjBindingContext","createBindingContext","getMultipleLinesForDataField","oThis","sPropertyType","isMultiLineText","wrap","editMode","indexOf","IsEditable","_hasValueHelpToShow","oPropertyUnit","getAssociatedUnitProperty","oPropertyCurrency","getAssociatedCurrencyProperty","setEditStyleProperties","oProps","oDataField","onlyEditStyle","_oDataField$Target","_oDataField$Target$$t","_oProps$formatOptions","_oProperty$annotation4","_oProperty$annotation5","_oProperty$annotation6","_oProperty$annotation7","_oProperty$annotation8","_oProperty$annotation9","_oProperty$annotation10","_oProperty$annotation11","_oProperty$annotation12","editStyle","valueBindingExpression","Visualization","_oProps$formatOptions2","textBindingExpression","showTimezone","MultiLineText","valueOf","unitBindingExpression","getBindingForUnitOrCurrency","descriptionBindingExpression","ifUnitEditable","unitProperty","unitEditable","hasSemanticObjectInNavigationOrProperty","propertyDataModelObjectPath","_propertyDataModelObj","_propertyDataModelObj2","_propertyDataModelObj3","_propertyDataModelObj4","property","hasSemanticObject","lastNavProp","find","contextNavProp","getDataModelObjectPathForValue","initialDataModelObjectPath","valuePath","term","_initialDataModelObje","replace","_initialDataModelObje2","_initialDataModelObje3"],"sources":["FieldTemplating-dbg.js"],"mappings":"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","sourceRoot":"field"}},{"offset":{"line":8395,"column":0},"map":{"version":3,"names":["Field","defineBuildingBlock","name","namespace","blockAttribute","type","isPublic","required","validate","formatOptionsInput","displayMode","includes","Error","measureDisplayMode","textExpandBehaviorDisplay","blockEvent","props","readOnly","undefined","editModeExpression","compileExpression","ifElse","equal","resolveBindingString","getFormatOptions","xml","formatOptions","textLinesEdit","textMaxLines","textMaxCharactersDisplay","textMaxLength","writeDateFormatOptions","showTime","showDate","showTimezone","getPossibleValueHelpTemplate","vhp","FieldHelper","valueHelpProperty","metaPath","vhpCtx","getModel","createBindingContext","hasValueHelpAnnotations","hasValueHelpAnnotation","getObject","id","contextPath","getTemplate","contextPathPath","getPath","metaPathPath","change","semanticObject","BuildingBlockBase"],"sourceRoot":"field","sources":["PublicField.ts"],"sourcesContent":["import { blockAttribute, blockEvent, BuildingBlockBase, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockRuntime\";\nimport { compileExpression, equal, ifElse, resolveBindingString } from \"sap/fe/core/helpers/BindingToolkit\";\nimport type { PropertiesOf } from \"sap/fe/core/helpers/ClassSupport\";\nimport FieldHelper from \"sap/fe/macros/field/FieldHelper\";\nimport type { V4Context } from \"types/extension_types\";\n\ntype FieldFormatOptions = {\n\tdisplayMode?: string;\n\tmeasureDisplayMode?: string;\n\ttextLinesEdit?: number;\n\ttextMaxLines?: number;\n\ttextMaxCharactersDisplay?: number;\n\ttextExpandBehaviorDisplay?: string;\n\ttextMaxLength?: number;\n\tshowDate?: boolean;\n\tshowTime?: boolean;\n\tshowTimezone?: boolean;\n};\n\n/**\n * Public external field representation\n */\n@defineBuildingBlock({\n\tname: \"Field\",\n\tnamespace: \"sap.fe.macros\"\n})\nexport default class Field extends BuildingBlockBase {\n\t/**\n\t * The 'id' property\n\t */\n\t@blockAttribute({ type: \"string\", isPublic: true, required: true })\n\tpublic id!: string;\n\n\t/**\n\t * The meta path provided for the field\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true\n\t})\n\tpublic metaPath!: V4Context;\n\n\t/**\n\t * The context path provided for the field\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true\n\t})\n\tpublic contextPath!: V4Context;\n\n\t/**\n\t * The readOnly flag\n\t */\n\t@blockAttribute({ type: \"boolean\", required: false })\n\tpublic readOnly?: boolean;\n\n\t/**\n\t * The semantic object associated to the field\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\trequired: false\n\t})\n\tpublic semanticObject?: string;\n\n\t/**\n\t * The edit mode expression for the field\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\trequired: false\n\t})\n\tpublic editModeExpression?;\n\n\t/**\n\t * The object with the formatting options\n\t */\n\t@blockAttribute({\n\t\ttype: \"object\",\n\t\tvalidate: function (formatOptionsInput: FieldFormatOptions) {\n\t\t\tif (\n\t\t\t\tformatOptionsInput.displayMode &&\n\t\t\t\t![\"Value\", \"Description\", \"ValueDescription\", \"DescriptionValue\"].includes(formatOptionsInput.displayMode)\n\t\t\t) {\n\t\t\t\tthrow new Error(`Allowed value ${formatOptionsInput.displayMode} for displayMode does not match`);\n\t\t\t}\n\n\t\t\tif (formatOptionsInput.measureDisplayMode && ![\"Hidden\", \"ReadOnly\"].includes(formatOptionsInput.measureDisplayMode)) {\n\t\t\t\tthrow new Error(`Allowed value ${formatOptionsInput.measureDisplayMode} for measureDisplayMode does not match`);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tformatOptionsInput.textExpandBehaviorDisplay &&\n\t\t\t\t![\"InPlace\", \"Popover\"].includes(formatOptionsInput.textExpandBehaviorDisplay)\n\t\t\t) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`Allowed value ${formatOptionsInput.textExpandBehaviorDisplay} for textExpandBehaviorDisplay does not match`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn formatOptionsInput;\n\t\t}\n\t})\n\tpublic formatOptions: FieldFormatOptions = {};\n\n\t/**\n\t * The generic change event\n\t */\n\t@blockEvent()\n\tchange = \"\";\n\n\tconstructor(props: PropertiesOf<Field>) {\n\t\tsuper(props);\n\n\t\tif (this.readOnly !== undefined) {\n\t\t\tthis.editModeExpression = compileExpression(\n\t\t\t\tifElse(equal(resolveBindingString(this.readOnly, \"boolean\"), true), \"Display\", \"Editable\")\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Sets the internal formatOptions for the building block.\n\t *\n\t * @returns A string with the internal formatOptions for the building block\n\t */\n\tgetFormatOptions(): string {\n\t\treturn xml`\n\t\t<internalMacro:formatOptions\n\t\t\ttextAlignMode=\"Form\"\n\t\t\tshowEmptyIndicator=\"true\"\n\t\t\tdisplayMode=\"${this.formatOptions.displayMode}\"\n\t\t\tmeasureDisplayMode=\"${this.formatOptions.measureDisplayMode}\"\n\t\t\ttextLinesEdit=\"${this.formatOptions.textLinesEdit}\"\n\t\t\ttextMaxLines=\"${this.formatOptions.textMaxLines}\"\n\t\t\ttextMaxCharactersDisplay=\"${this.formatOptions.textMaxCharactersDisplay}\"\n\t\t\ttextExpandBehaviorDisplay=\"${this.formatOptions.textExpandBehaviorDisplay}\"\n\t\t\ttextMaxLength=\"${this.formatOptions.textMaxLength}\"\n\t\t\t>\n\t\t\t${this.writeDateFormatOptions()}\n\t\t</internalMacro:formatOptions>\n\t\t\t`;\n\t}\n\n\twriteDateFormatOptions(): string {\n\t\tif (this.formatOptions.showTime || this.formatOptions.showDate || this.formatOptions.showTimezone) {\n\t\t\treturn xml`<internalMacro:dateFormatOptions showTime=\"${this.formatOptions.showTime}\" \n\t\t\t\tshowDate=\"${this.formatOptions.showDate}\" \n\t\t\t\tshowTimezone=\"${this.formatOptions.showTimezone}\" \n\t\t\t\t/>`;\n\t\t}\n\t\treturn \"\";\n\t}\n\n\t/**\n\t * The function calculates the corresponding ValueHelp field in case its\n\t * defined for the specific control.\n\t *\n\t * @returns An XML-based string with a possible ValueHelp control.\n\t */\n\tgetPossibleValueHelpTemplate(): string {\n\t\tconst vhp = FieldHelper.valueHelpProperty(this.metaPath);\n\t\tconst vhpCtx = this.metaPath.getModel().createBindingContext(vhp, this.metaPath);\n\t\tconst hasValueHelpAnnotations = FieldHelper.hasValueHelpAnnotation(vhpCtx.getObject(\"@\"));\n\t\tif (hasValueHelpAnnotations) {\n\t\t\t// depending on whether this one has a value help annotation included, add the dependent\n\t\t\treturn xml`\n\t\t\t<internalMacro:dependents>\n\t\t\t\t<macros:ValueHelp _flexId=\"${this.id}-content_FieldValueHelp\" property=\"${vhpCtx}\" contextPath=\"${this.contextPath}\" />\n\t\t\t</internalMacro:dependents>`;\n\t\t}\n\t\treturn \"\";\n\t}\n\n\t/**\n\t * The building block template function.\n\t *\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetTemplate() {\n\t\tconst contextPathPath = this.contextPath.getPath();\n\t\tconst metaPathPath = this.metaPath.getPath();\n\t\treturn xml`\n\t\t<internalMacro:Field\n\t\t\txmlns:internalMacro=\"sap.fe.macros.internal\"\n\t\t\tentitySet=\"${contextPathPath}\"\n\t\t\tdataField=\"${metaPathPath}\"\n\t\t\teditMode=\"${this.editModeExpression}\"\n\t\t\tonChange=\"${this.change}\"\n\t\t\t_flexId=\"${this.id}\"\n\t\t\tsemanticObject=\"${this.semanticObject}\"\n\t\t>\n\t\t\t${this.getFormatOptions()}\n\t\t\t${this.getPossibleValueHelpTemplate()}\n\t\t</internalMacro:Field>`;\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":8635,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlock","BuildingBlockRuntime","BindingToolkit","FieldHelper","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_exports","resolveBindingString","ifElse","equal","compileExpression","xml","defineBuildingBlock","BuildingBlockBase","blockEvent","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","Field","name","namespace","type","isPublic","required","validate","formatOptionsInput","displayMode","includes","measureDisplayMode","textExpandBehaviorDisplay","_BuildingBlockBase","props","_this","this","readOnly","editModeExpression","_proto","getFormatOptions","formatOptions","textLinesEdit","textMaxLines","textMaxCharactersDisplay","textMaxLength","writeDateFormatOptions","showTime","showDate","showTimezone","getPossibleValueHelpTemplate","vhp","valueHelpProperty","metaPath","vhpCtx","getModel","createBindingContext","hasValueHelpAnnotations","hasValueHelpAnnotation","getObject","id","contextPath","getTemplate","contextPathPath","getPath","metaPathPath","change","semanticObject"],"sources":["PublicField-dbg.js"],"mappings":"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","sourceRoot":"field"}},{"offset":{"line":8672,"column":0},"map":{"version":3,"names":["TextAreaEx","defineUI5Class","fireLiveChange","parameters","_validateTextLength","value","setValue","maxLength","getMaxLength","undefined","length","valueStateText","ResourceModel","getText","setValueState","ValueState","Error","setValueStateText","None","_TextArea"],"sourceRoot":"field","sources":["TextAreaEx.ts"],"sourcesContent":["import { defineUI5Class } from \"sap/fe/core/helpers/ClassSupport\";\nimport ResourceModel from \"sap/fe/macros/ResourceModel\";\nimport _TextArea from \"sap/m/TextArea\";\nimport { ValueState } from \"sap/ui/core/library\";\n\n/**\n * Extension of the TextArea control to add a check for the maximum length when setting the value.\n *\n * @extends sap.m.TextArea\n * @public\n */\n@defineUI5Class(\"sap.fe.macros.field.TextAreaEx\")\nexport default class TextAreaEx extends _TextArea {\n\t/**\n\t * Fires live change event.\n\t *\n\t * @param {object} [parameters] Parameters to pass along with the event\n\t * @param parameters.value\n\t * @returns Reference to `this` in order to allow method chaining\n\t */\n\tfireLiveChange(parameters?: { value?: string }): this {\n\t\tsuper.fireLiveChange(parameters);\n\t\tthis._validateTextLength(parameters?.value);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Sets the value for the text area.\n\t *\n\t * @param {string} value New value for the property `value`\n\t * @returns Reference to `this` in order to allow method chaining\n\t * @private\n\t */\n\tsetValue(value: string) {\n\t\tsuper.setValue(value);\n\t\tthis._validateTextLength(value);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Sets an error message for the value state if the maximum length is specified and the new value exceeds this maximum length.\n\t *\n\t * @param {string} [value] New value for property `value`\n\t * @private\n\t */\n\t_validateTextLength(value?: string) {\n\t\tconst maxLength = this.getMaxLength();\n\t\tif (!maxLength || value === undefined) {\n\t\t\treturn;\n\t\t}\n\t\tif (value.length > maxLength) {\n\t\t\tconst valueStateText = ResourceModel.getText(\"M_FIELD_TEXTAREA_TEXT_TOO_LONG\");\n\t\t\tthis.setValueState(ValueState.Error);\n\t\t\tthis.setValueStateText(valueStateText);\n\t\t} else {\n\t\t\tthis.setValueState(ValueState.None);\n\t\t}\n\t}\n}\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;MAYqBA,UAAU;EAP/B;AACA;AACA;AACA;AACA;AACA;EALA,OAMCC,cAAc,CAAC,gCAAgC,CAAC;IAAA;IAAA;MAAA;IAAA;IAAA;IAAA;IAEhD;AACD;AACA;AACA;AACA;AACA;AACA;IANC,OAOAC,cAAc,GAAd,wBAAeC,UAA+B,EAAQ;MACrD,qBAAMD,cAAc,YAACC,UAAU;MAC/B,IAAI,CAACC,mBAAmB,CAACD,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAEE,KAAK,CAAC;MAC3C,OAAO,IAAI;IACZ;;IAEA;AACD;AACA;AACA;AACA;AACA;AACA,OANC;IAAA,OAOAC,QAAQ,GAAR,kBAASD,KAAa,EAAE;MACvB,qBAAMC,QAAQ,YAACD,KAAK;MACpB,IAAI,CAACD,mBAAmB,CAACC,KAAK,CAAC;MAC/B,OAAO,IAAI;IACZ;;IAEA;AACD;AACA;AACA;AACA;AACA,OALC;IAAA,OAMAD,mBAAmB,GAAnB,6BAAoBC,KAAc,EAAE;MACnC,MAAME,SAAS,GAAG,IAAI,CAACC,YAAY,EAAE;MACrC,IAAI,CAACD,SAAS,IAAIF,KAAK,KAAKI,SAAS,EAAE;QACtC;MACD;MACA,IAAIJ,KAAK,CAACK,MAAM,GAAGH,SAAS,EAAE;QAC7B,MAAMI,cAAc,GAAGC,aAAa,CAACC,OAAO,CAAC,gCAAgC,CAAC;QAC9E,IAAI,CAACC,aAAa,CAACC,UAAU,CAACC,KAAK,CAAC;QACpC,IAAI,CAACC,iBAAiB,CAACN,cAAc,CAAC;MACvC,CAAC,MAAM;QACN,IAAI,CAACG,aAAa,CAACC,UAAU,CAACG,IAAI,CAAC;MACpC;IACD,CAAC;IAAA;EAAA,EA7CsCC,SAAS;EAAA;EAAA;AAAA"}},{"offset":{"line":8749,"column":0},"map":{"version":3,"names":["sap","ui","define","ClassSupport","ResourceModel","_TextArea","library","_dec","_class","_exports","ValueState","defineUI5Class","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","TextAreaEx","_TextArea2","apply","this","arguments","_proto","fireLiveChange","parameters","call","_validateTextLength","value","setValue","maxLength","getMaxLength","undefined","length","valueStateText","getText","setValueState","Error","setValueStateText","None"],"sources":["TextAreaEx-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,4CAAO,CAAC,mCAAoC,8BAA+B,iBAAkB,uBAAwB,SAAUC,EAAcC,EAAeC,EAAWC,GAC5K,aAEA,IAAIC,EAAMC,EACV,IAAIC,EAAW,CAAC,EAChB,IAAIC,EAAaJ,EAAQI,WACzB,IAAIC,EAAiBR,EAAaQ,eAClC,SAASC,EAAeC,EAAUC,GAAcD,EAASE,UAAYC,OAAOC,OAAOH,EAAWC,WAAYF,EAASE,UAAUG,YAAcL,EAAUM,EAAgBN,EAAUC,EAAa,CAC5L,SAASK,EAAgBC,EAAGC,GAAKF,EAAkBH,OAAOM,eAAiBN,OAAOM,eAAeC,OAAS,SAASJ,EAAgBC,EAAGC,GAAKD,EAAEI,UAAYH,EAAG,OAAOD,CAAG,EAAG,OAAOD,EAAgBC,EAAGC,EAAI,CACvM,IAAII,GAOJlB,EAAOI,EAAe,kCAAmCJ,EAAKC,EAAsB,SAAUkB,GAC5Fd,EAAea,EAAYC,GAC3B,SAASD,IACP,OAAOC,EAAWC,MAAMC,KAAMC,YAAcD,IAC9C,CACAnB,EAAWgB,EACX,IAAIK,EAASL,EAAWV,UAQxBe,EAAOC,eAAiB,SAASA,EAAeC,GAC9CN,EAAWX,UAAUgB,eAAeE,KAAKL,KAAMI,GAC/CJ,KAAKM,oBAAoBF,IAAe,MAAQA,SAAoB,OAAS,EAAIA,EAAWG,OAC5F,OAAOP,IACT,EASAE,EAAOM,SAAW,SAASA,EAASD,GAClCT,EAAWX,UAAUqB,SAASH,KAAKL,KAAMO,GACzCP,KAAKM,oBAAoBC,GACzB,OAAOP,IACT,EAQAE,EAAOI,oBAAsB,SAASA,EAAoBC,GACxD,MAAME,EAAYT,KAAKU,eACvB,IAAKD,GAAaF,IAAUI,UAAW,CACrC,MACF,CACA,GAAIJ,EAAMK,OAASH,EAAW,CAC5B,MAAMI,EAAiBrC,EAAcsC,QAAQ,kCAC7Cd,KAAKe,cAAcjC,EAAWkC,OAC9BhB,KAAKiB,kBAAkBJ,EACzB,KAAO,CACLb,KAAKe,cAAcjC,EAAWoC,KAChC,CACF,EACA,OAAOrB,CACT,CArDoF,CAqDlFpB,KAAeG,GACjBC,EAAWgB,EACX,OAAOhB,CACT,EAAG","sourceRoot":"field"}},{"offset":{"line":8754,"column":0},"map":{"version":3,"names":["feBundle","Core","getLibraryResourceBundle","EDITSTATE","ALL","id","display","getText","UNCHANGED","OWN_DRAFT","LOCKED","UNSAVED_CHANGES","ALL_HIDING_DRAFTS","SAVED_ONLY","MY_DRAFTS","getEditStatesContext","macroProps","availableEditStates","getProperty","JSONModel","bindContext","getBoundContext","getCurrentUserID","sap","ushell","Container","getUser","getId","getFilterForEditState","sEditState","Filter","filters","path","operator","FilterOperator","EQ","value1","and","NE","currentUserID","Any","variable","condition","FilterOperatorUtil","addOperator","Operator","name","valueTypes","ValueType","Self","tokenParse","format","vValue","values","getModelFilter","oCondition","parse","parm","validateInput","checkValidated","validated","ConditionValidated","Validated"],"sourceRoot":"filter","sources":["DraftEditState.ts"],"sourcesContent":["import Core from \"sap/ui/core/Core\";\nimport FilterOperatorUtil from \"sap/ui/mdc/condition/FilterOperatorUtil\";\nimport Operator from \"sap/ui/mdc/condition/Operator\";\nimport ConditionValidated from \"sap/ui/mdc/enum/ConditionValidated\";\nimport Filter from \"sap/ui/model/Filter\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\n\nconst feBundle = Core.getLibraryResourceBundle(\"sap.fe.macros\");\n/**\n * Enum for edit state of a document in an draft enabled service collection.\n * Allows to simplify filtering on a set of documents as described by the\n * individual state\n *\n * @readonly\n * @enum {string}\n * @private\n * @ui5-restricted\n */\nconst EDITSTATE = {\n\t/**\n\t * Active documents that don't have a corresponding draft and all own draft documents\n\t *\n\t * @private\n\t * @ui5-restricted\n\t */\n\tALL: {\n\t\tid: \"ALL\",\n\t\tdisplay: feBundle.getText(\"C_DRAFT_EDIT_STATE_DRAFT_ALL_FILTER\")\n\t},\n\t/**\n\t * Active documents that don't have a draft document\n\t *\n\t * @private\n\t * @ui5-restricted\n\t */\n\tUNCHANGED: {\n\t\tid: \"UNCHANGED\",\n\t\tdisplay: feBundle.getText(\"C_DRAFT_EDIT_STATE_DRAFT_UNCHANGED_FILTER\")\n\t},\n\t/**\n\t * Own draft documents\n\t *\n\t * @private\n\t * @ui5-restricted\n\t */\n\tOWN_DRAFT: {\n\t\tid: \"OWN_DRAFT\",\n\t\tdisplay: feBundle.getText(\"C_DRAFT_EDIT_STATE_DRAFT_OWN_DRAFT_FILTER\")\n\t},\n\t/**\n\t * Active documents that are locked by other users\n\t *\n\t * @private\n\t * @ui5-restricted\n\t */\n\tLOCKED: {\n\t\tid: \"LOCKED\",\n\t\tdisplay: feBundle.getText(\"C_DRAFT_EDIT_STATE_DRAFT_LOCKED_FILTER\")\n\t},\n\t/**\n\t * Active documents that have draft documents by other users\n\t *\n\t * @private\n\t * @ui5-restricted\n\t */\n\tUNSAVED_CHANGES: {\n\t\tid: \"UNSAVED_CHANGES\",\n\t\tdisplay: feBundle.getText(\"C_DRAFT_EDIT_STATE_DRAFT_UNSAVED_CHANGES_FILTER\")\n\t},\n\t/**\n\t * Active documents only\n\t *\n\t * @private\n\t * @ui5-restricted\n\t */\n\tALL_HIDING_DRAFTS: {\n\t\tid: \"ALL_HIDING_DRAFTS\",\n\t\tdisplay: feBundle.getText(\"C_DRAFT_EDIT_STATE_DRAFT_ALL_HIDING_DRAFTS_FILTER\")\n\t},\n\t/**\n\t * Active documents only (with collaborative draft)\n\t *\n\t * @private\n\t * @ui5-restricted\n\t */\n\tSAVED_ONLY: {\n\t\tid: \"SAVED_ONLY\",\n\t\tdisplay: feBundle.getText(\"C_DRAFT_EDIT_STATE_DRAFT_SAVED_ONLY_FILTER\")\n\t},\n\t/**\n\t * My drafts, i.e. the drafts I have created, have been invited to or have made a change in (with collaborative draft)\n\t *\n\t * @private\n\t * @ui5-restricted\n\t */\n\tMY_DRAFTS: {\n\t\tid: \"MY_DRAFTS\",\n\t\tdisplay: feBundle.getText(\"C_DRAFT_EDIT_STATE_DRAFT_MY_DRAFTS_FILTER\")\n\t},\n\n\tgetEditStatesContext: function (macroProps: Context) {\n\t\tlet availableEditStates: any[];\n\t\tif (macroProps.getProperty(\"isDraftCollaborative\")) {\n\t\t\tavailableEditStates = [EDITSTATE.ALL, EDITSTATE.MY_DRAFTS, EDITSTATE.SAVED_ONLY];\n\t\t} else {\n\t\t\tavailableEditStates = [\n\t\t\t\tEDITSTATE.ALL,\n\t\t\t\tEDITSTATE.ALL_HIDING_DRAFTS,\n\t\t\t\tEDITSTATE.UNCHANGED,\n\t\t\t\tEDITSTATE.OWN_DRAFT,\n\t\t\t\tEDITSTATE.LOCKED,\n\t\t\t\tEDITSTATE.UNSAVED_CHANGES\n\t\t\t];\n\t\t}\n\n\t\treturn new JSONModel(availableEditStates).bindContext(\"/\").getBoundContext()!;\n\t},\n\tgetCurrentUserID: function (): string | undefined {\n\t\treturn sap.ushell?.Container?.getUser()?.getId();\n\t},\n\tgetFilterForEditState: function (sEditState: any) {\n\t\tswitch (sEditState) {\n\t\t\tcase EDITSTATE.UNCHANGED.id:\n\t\t\t\treturn new Filter({\n\t\t\t\t\tfilters: [\n\t\t\t\t\t\tnew Filter({ path: \"IsActiveEntity\", operator: FilterOperator.EQ, value1: true }),\n\t\t\t\t\t\tnew Filter({ path: \"HasDraftEntity\", operator: FilterOperator.EQ, value1: false })\n\t\t\t\t\t],\n\t\t\t\t\tand: true\n\t\t\t\t});\n\t\t\tcase EDITSTATE.OWN_DRAFT.id:\n\t\t\t\treturn new Filter({ path: \"IsActiveEntity\", operator: FilterOperator.EQ, value1: false });\n\t\t\tcase EDITSTATE.LOCKED.id:\n\t\t\t\treturn new Filter({\n\t\t\t\t\tfilters: [\n\t\t\t\t\t\tnew Filter({ path: \"IsActiveEntity\", operator: FilterOperator.EQ, value1: true }),\n\t\t\t\t\t\tnew Filter({\n\t\t\t\t\t\t\tpath: \"SiblingEntity/IsActiveEntity\",\n\t\t\t\t\t\t\toperator: FilterOperator.EQ,\n\t\t\t\t\t\t\tvalue1: null\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tnew Filter({\n\t\t\t\t\t\t\tpath: \"DraftAdministrativeData/InProcessByUser\",\n\t\t\t\t\t\t\toperator: FilterOperator.NE,\n\t\t\t\t\t\t\tvalue1: \"\"\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tnew Filter({\n\t\t\t\t\t\t\tpath: \"DraftAdministrativeData/InProcessByUser\",\n\t\t\t\t\t\t\toperator: FilterOperator.NE,\n\t\t\t\t\t\t\tvalue1: null\n\t\t\t\t\t\t})\n\t\t\t\t\t],\n\t\t\t\t\tand: true\n\t\t\t\t});\n\t\t\tcase EDITSTATE.UNSAVED_CHANGES.id:\n\t\t\t\treturn new Filter({\n\t\t\t\t\tfilters: [\n\t\t\t\t\t\tnew Filter({ path: \"IsActiveEntity\", operator: FilterOperator.EQ, value1: true }),\n\t\t\t\t\t\tnew Filter({\n\t\t\t\t\t\t\tpath: \"SiblingEntity/IsActiveEntity\",\n\t\t\t\t\t\t\toperator: FilterOperator.EQ,\n\t\t\t\t\t\t\tvalue1: null\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tnew Filter({\n\t\t\t\t\t\t\tpath: \"DraftAdministrativeData/InProcessByUser\",\n\t\t\t\t\t\t\toperator: FilterOperator.EQ,\n\t\t\t\t\t\t\tvalue1: \"\"\n\t\t\t\t\t\t})\n\t\t\t\t\t],\n\t\t\t\t\tand: true\n\t\t\t\t});\n\t\t\tcase EDITSTATE.ALL_HIDING_DRAFTS.id:\n\t\t\tcase EDITSTATE.SAVED_ONLY.id:\n\t\t\t\treturn new Filter({ path: \"IsActiveEntity\", operator: FilterOperator.EQ, value1: true });\n\t\t\tcase EDITSTATE.MY_DRAFTS.id:\n\t\t\t\tconst currentUserID = this.getCurrentUserID();\n\t\t\t\treturn currentUserID\n\t\t\t\t\t? new Filter({\n\t\t\t\t\t\t\tfilters: [\n\t\t\t\t\t\t\t\tnew Filter({ path: \"IsActiveEntity\", operator: FilterOperator.EQ, value1: false }),\n\t\t\t\t\t\t\t\tnew Filter({\n\t\t\t\t\t\t\t\t\tpath: \"DraftAdministrativeData/DraftAdministrativeUser\",\n\t\t\t\t\t\t\t\t\toperator: FilterOperator.Any,\n\t\t\t\t\t\t\t\t\tvariable: \"user\",\n\t\t\t\t\t\t\t\t\tcondition: new Filter({\n\t\t\t\t\t\t\t\t\t\tpath: \"user/UserID\",\n\t\t\t\t\t\t\t\t\t\toperator: FilterOperator.EQ,\n\t\t\t\t\t\t\t\t\t\tvalue1: this.getCurrentUserID()\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tand: true\n\t\t\t\t\t  })\n\t\t\t\t\t: new Filter({ path: \"IsActiveEntity\", operator: FilterOperator.EQ, value1: false }); // Couldn't find current user (e.g. no shell) --> show all drafts\n\t\t\tdefault:\n\t\t\t\t// ALL\n\t\t\t\treturn new Filter({\n\t\t\t\t\tfilters: [\n\t\t\t\t\t\tnew Filter({ path: \"IsActiveEntity\", operator: FilterOperator.EQ, value1: false }),\n\t\t\t\t\t\tnew Filter({\n\t\t\t\t\t\t\tpath: \"SiblingEntity/IsActiveEntity\",\n\t\t\t\t\t\t\toperator: FilterOperator.EQ,\n\t\t\t\t\t\t\tvalue1: null\n\t\t\t\t\t\t})\n\t\t\t\t\t],\n\t\t\t\t\tand: false\n\t\t\t\t});\n\t\t}\n\t}\n};\n\nFilterOperatorUtil.addOperator(\n\tnew Operator({\n\t\tname: \"DRAFT_EDIT_STATE\",\n\t\tvalueTypes: [(Operator as any).ValueType.Self, (Operator as any).ValueType.Self],\n\t\ttokenParse: \"^(.*)$\",\n\t\tformat: function (vValue: any) {\n\t\t\treturn vValue && vValue.values[1];\n\t\t},\n\t\tgetModelFilter: function (oCondition: any /*sFieldPath: any*/) {\n\t\t\treturn EDITSTATE.getFilterForEditState(oCondition.values[0]);\n\t\t},\n\t\tparse: function (parm: any) {\n\t\t\treturn parm;\n\t\t},\n\t\tvalidateInput: true,\n\t\tcheckValidated: function (oCondition: any) {\n\t\t\t// This ensures that the listfieldhelp is also called for old variants saved with Validated parameter as undefined.\n\t\t\toCondition.validated = ConditionValidated.Validated;\n\t\t}\n\t} as any)\n);\n\nexport default EDITSTATE;\n"],"mappings":"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"}},{"offset":{"line":8994,"column":0},"map":{"version":3,"names":["sap","ui","define","Core","FilterOperatorUtil","Operator","ConditionValidated","Filter","FilterOperator","JSONModel","feBundle","getLibraryResourceBundle","EDITSTATE","ALL","id","display","getText","UNCHANGED","OWN_DRAFT","LOCKED","UNSAVED_CHANGES","ALL_HIDING_DRAFTS","SAVED_ONLY","MY_DRAFTS","getEditStatesContext","macroProps","availableEditStates","getProperty","bindContext","getBoundContext","getCurrentUserID","_sap$ushell","_sap$ushell$Container","_sap$ushell$Container2","ushell","Container","getUser","getId","getFilterForEditState","sEditState","filters","path","operator","EQ","value1","and","NE","currentUserID","this","Any","variable","condition","addOperator","name","valueTypes","ValueType","Self","tokenParse","format","vValue","values","getModelFilter","oCondition","parse","parm","validateInput","checkValidated","validated","Validated"],"sources":["DraftEditState-dbg.js"],"mappings":"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","sourceRoot":"filter"}},{"offset":{"line":8999,"column":0},"map":{"version":3,"names":["FilterFieldHelper","isRequiredInFilter","path","oDetails","oModel","context","getModel","sPropertyPath","getPath","sPropertyLocationPath","CommonHelper","getLocationForPropertyPath","sProperty","oFR","bIsRequired","getObject","CommonUtils","getFilterRestrictionsByPath","RequiredProperties","indexOf","maxConditions","oFilterRestrictions","oProperty","$Type","FilterAllowedExpressions","sAllowedExpression","getSpecificAllowedExpression","getConditionsBinding","dataModelObjectPath","relativePropertyPath","getContextRelativeTargetObjectPath","compileExpression","pathInModel","constraints","oInterface","sValue","AnnotationHelper","format","aMatches","match","sConstraints","substr","replace","undefined","formatOptions","annotationInterface","hasOwnProperty","$Nullable","arguments","parseKeepsEmptyString","fiscalType","getFiscalType","getProperty","getDataType","property","type","typeMapping","EDM_TYPE_MAPPING","getPlaceholder","FiscalDate","getPattern"],"sourceRoot":"filter","sources":["FilterFieldHelper.ts"],"sourcesContent":["import type { Property } from \"@sap-ux/vocabularies-types\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport { compileExpression, EDM_TYPE_MAPPING, getFiscalType, pathInModel } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { DataModelObjectPath, getContextRelativeTargetObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { getProperty } from \"sap/fe/core/templating/PropertyFormatters\";\nimport type { ComputedAnnotationInterface, MetaModelContext } from \"sap/fe/core/templating/UIFormatters\";\nimport FiscalDate from \"sap/fe/core/type/FiscalDate\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport AnnotationHelper from \"sap/ui/model/odata/v4/AnnotationHelper\";\n\nconst FilterFieldHelper = {\n\t//FilterField\n\tisRequiredInFilter: function (path: any, oDetails: any) {\n\t\tconst oModel = oDetails.context.getModel(),\n\t\t\tsPropertyPath = oDetails.context.getPath(),\n\t\t\tsPropertyLocationPath = CommonHelper.getLocationForPropertyPath(oModel, sPropertyPath);\n\n\t\tlet sProperty: string,\n\t\t\toFR,\n\t\t\tbIsRequired = oModel.getObject(sPropertyLocationPath + \"/@com.sap.vocabularies.Common.v1.ResultContext\");\n\n\t\tif (!bIsRequired) {\n\t\t\tif (typeof path === \"string\") {\n\t\t\t\tsProperty = path;\n\t\t\t} else {\n\t\t\t\tsProperty = oModel.getObject(`${sPropertyPath}@sapui.name`);\n\t\t\t}\n\t\t\toFR = CommonUtils.getFilterRestrictionsByPath(sPropertyLocationPath, oModel);\n\t\t\tbIsRequired = oFR && oFR.RequiredProperties && oFR.RequiredProperties.indexOf(sProperty) > -1;\n\t\t}\n\t\treturn bIsRequired;\n\t},\n\tmaxConditions: function (path: any, oDetails: any) {\n\t\tlet sProperty,\n\t\t\tmaxConditions = -1;\n\t\tconst oModel = oDetails.context.getModel(),\n\t\t\tsPropertyPath = oDetails.context.getPath();\n\n\t\tconst sPropertyLocationPath = CommonHelper.getLocationForPropertyPath(oModel, sPropertyPath);\n\t\tif (oModel.getObject(`${sPropertyLocationPath}/@com.sap.vocabularies.Common.v1.ResultContext`) === true) {\n\t\t\treturn 1;\n\t\t}\n\n\t\tif (typeof path === \"string\") {\n\t\t\tsProperty = path;\n\t\t} else {\n\t\t\tsProperty = oModel.getObject(`${sPropertyPath}@sapui.name`);\n\t\t}\n\t\tconst oFilterRestrictions = CommonUtils.getFilterRestrictionsByPath(sPropertyLocationPath, oModel);\n\t\tlet oProperty = oModel.getObject(`${sPropertyLocationPath}/${sProperty}`);\n\t\tif (!oProperty) {\n\t\t\toProperty = oModel.getObject(sPropertyPath);\n\t\t}\n\t\tif (oProperty.$Type === \"Edm.Boolean\") {\n\t\t\tmaxConditions = 1;\n\t\t} else if (\n\t\t\toFilterRestrictions &&\n\t\t\toFilterRestrictions.FilterAllowedExpressions &&\n\t\t\toFilterRestrictions.FilterAllowedExpressions[sProperty]\n\t\t) {\n\t\t\tconst sAllowedExpression = CommonUtils.getSpecificAllowedExpression(oFilterRestrictions.FilterAllowedExpressions[sProperty]);\n\t\t\tif (sAllowedExpression === \"SingleValue\" || sAllowedExpression === \"SingleRange\") {\n\t\t\t\tmaxConditions = 1;\n\t\t\t}\n\t\t}\n\t\treturn maxConditions;\n\t},\n\n\t/**\n\t * To Create binding for mdc:filterfield conditions.\n\t *\n\t * @param dataModelObjectPath Data Model Object path to filter field property\n\t * @returns Expression binding for conditions for the field\n\t */\n\tgetConditionsBinding: function (dataModelObjectPath: DataModelObjectPath) {\n\t\tconst relativePropertyPath = getContextRelativeTargetObjectPath(dataModelObjectPath, false, true);\n\t\treturn compileExpression(pathInModel(`/conditions/${relativePropertyPath}`, \"$filters\"));\n\t},\n\n\tconstraints: function (oProperty: MetaModelContext, oInterface: ComputedAnnotationInterface) {\n\t\tconst sValue = AnnotationHelper.format(oProperty, oInterface) as string,\n\t\t\taMatches = sValue && sValue.match(/constraints:.*?({.*?})/);\n\t\tlet sConstraints = aMatches && aMatches[1];\n\t\t// Workaround. Add \"V4: true\" to DateTimeOffset constraints. AnnotationHelper is not aware of this flag.\n\t\tif (sValue.indexOf(\"sap.ui.model.odata.type.DateTimeOffset\") > -1) {\n\t\t\tif (sConstraints) {\n\t\t\t\tsConstraints = `${sConstraints.substr(0, aMatches?.[1].indexOf(\"}\"))}, V4: true}`;\n\t\t\t} else {\n\t\t\t\tsConstraints = \"{V4: true}\";\n\t\t\t}\n\t\t}\n\t\t// Remove {nullable:false} from the constraints as it prevents from having an empty filter field\n\t\t// in the case of a single-value filter\n\t\tif (sConstraints && sConstraints.indexOf(\"'nullable':false\") >= 0) {\n\t\t\tsConstraints = sConstraints.replace(/,[ ]*'nullable':false/, \"\").replace(/'nullable':false[, ]*/, \"\");\n\t\t\tif (sConstraints === \"{}\") {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}\n\t\treturn sConstraints || undefined;\n\t},\n\tformatOptions: function (context: MetaModelContext, annotationInterface: ComputedAnnotationInterface) {\n\t\t// as the Annotation helper always returns \"parseKeepsEmptyString: true\" we need to prevent this in case a property (of type string) is nullable\n\t\t// Filling oInterface.arguments with an array where the first parameter is null, and the second contains the \"expected\"\n\t\t// parseKeepsEmptyString value follows a proposal from the model colleagues to \"overrule\" the behavior of the AnnotationHelper\n\t\tif (context.$Type === \"Edm.String\") {\n\t\t\tif (!context.hasOwnProperty(\"$Nullable\") || context.$Nullable === true) {\n\t\t\t\tannotationInterface.arguments = [null, { parseKeepsEmptyString: false }];\n\t\t\t}\n\t\t\tconst fiscalType = getFiscalType(getProperty(context, annotationInterface));\n\t\t\tif (fiscalType) {\n\t\t\t\tif (!annotationInterface.arguments) {\n\t\t\t\t\tannotationInterface.arguments = [null, {}];\n\t\t\t\t}\n\t\t\t\tannotationInterface.arguments[1].fiscalType = fiscalType;\n\t\t\t}\n\t\t}\n\t\tconst sValue = AnnotationHelper.format(context, annotationInterface) as string,\n\t\t\taMatches = sValue && sValue.match(/formatOptions:.*?({.*?})/);\n\t\treturn (aMatches && aMatches[1]) || undefined;\n\t},\n\tgetDataType: function (property: Property) {\n\t\tif (property.type === \"Edm.String\") {\n\t\t\tconst fiscalType = getFiscalType(property);\n\t\t\tif (fiscalType) {\n\t\t\t\treturn \"sap.fe.core.type.FiscalDate\";\n\t\t\t}\n\t\t}\n\t\tconst typeMapping = EDM_TYPE_MAPPING[property.type];\n\t\treturn typeMapping ? typeMapping.type : property.type;\n\t},\n\tgetPlaceholder: function (property: Property): string | undefined {\n\t\tif (property.type === \"Edm.String\") {\n\t\t\tconst fiscalType = getFiscalType(property);\n\t\t\tif (fiscalType) {\n\t\t\t\treturn new FiscalDate({ fiscalType }, {}).getPattern();\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n};\n\nexport default FilterFieldHelper;\n"],"mappings":"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"}},{"offset":{"line":9139,"column":0},"map":{"version":3,"names":["sap","ui","define","CommonUtils","BindingToolkit","DataModelPathHelper","PropertyFormatters","FiscalDate","CommonHelper","AnnotationHelper","getProperty","getContextRelativeTargetObjectPath","pathInModel","getFiscalType","EDM_TYPE_MAPPING","compileExpression","FilterFieldHelper","isRequiredInFilter","path","oDetails","oModel","context","getModel","sPropertyPath","getPath","sPropertyLocationPath","getLocationForPropertyPath","sProperty","oFR","bIsRequired","getObject","getFilterRestrictionsByPath","RequiredProperties","indexOf","maxConditions","oFilterRestrictions","oProperty","$Type","FilterAllowedExpressions","sAllowedExpression","getSpecificAllowedExpression","getConditionsBinding","dataModelObjectPath","relativePropertyPath","constraints","oInterface","sValue","format","aMatches","match","sConstraints","substr","replace","undefined","formatOptions","annotationInterface","hasOwnProperty","$Nullable","arguments","parseKeepsEmptyString","fiscalType","getDataType","property","type","typeMapping","getPlaceholder","getPattern"],"sources":["FilterFieldHelper-dbg.js"],"mappings":"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","sourceRoot":"filter"}},{"offset":{"line":9144,"column":0},"map":{"version":3,"names":["getDisplayProperty","propertyObjectPath","propertyConverted","hasValueHelp","getDisplayMode","getFilterFieldDisplayFormat","propertyInterface","oTextAnnotation","annotations","Common","Text","bHasValueHelp","entityTextArrangement","targetEntityType","UI","TextArrangement","_getDisplayModeFromValueHelp","Interface","context","metaModel","getModel","requestValueListInfo","getPath","then","valueListInfo","firstKey","Object","keys","firstValueListInfo","valueListParameter","Parameters","find","element","LocalDataProperty","$PropertyPath","targetObject","name","valueListProperty","ValueListProperty","textAnnotation","getObject","CollectionPath"],"sourceRoot":"filter","sources":["FilterFieldTemplating.ts"],"sourcesContent":["import { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { hasValueHelp } from \"sap/fe/core/templating/PropertyHelper\";\nimport { getDisplayMode } from \"sap/fe/core/templating/UIFormatters\";\n\nimport type { Property } from \"@sap-ux/vocabularies-types\";\nimport type { ComputedAnnotationInterface } from \"sap/fe/core/templating/UIFormatters\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\n\nexport const getDisplayProperty = function (propertyObjectPath: DataModelObjectPath, propertyConverted: Property): string {\n\treturn hasValueHelp(propertyConverted) ? getDisplayMode(propertyObjectPath) : \"Value\";\n};\n\nexport const getFilterFieldDisplayFormat = async function (\n\tpropertyObjectPath: DataModelObjectPath,\n\tpropertyConverted: Property,\n\tpropertyInterface: ComputedAnnotationInterface\n): Promise<string> {\n\tconst oTextAnnotation = propertyConverted?.annotations?.Common?.Text;\n\tif (oTextAnnotation) {\n\t\t// The text annotation should be on the property defined\n\t\treturn getDisplayProperty(propertyObjectPath, propertyConverted);\n\t}\n\tconst bHasValueHelp = hasValueHelp(propertyConverted);\n\tif (bHasValueHelp) {\n\t\t// Exceptional case for missing text annotation on the property (retrieve text from value list)\n\t\t// Consider TextArrangement at EntityType otherwise set default display format 'DescriptionValue'\n\t\tconst entityTextArrangement = propertyObjectPath?.targetEntityType?.annotations?.UI?.TextArrangement;\n\t\treturn !!entityTextArrangement\n\t\t\t? getDisplayMode(propertyObjectPath)\n\t\t\t: _getDisplayModeFromValueHelp(propertyInterface, propertyObjectPath);\n\t}\n\treturn \"Value\";\n};\n\n/**\n * Method to determine the display mode from the value help.\n *\n * @param Interface The current templating context\n * @param propertyObjectPath The global path to reach the entitySet\n * @returns A promise with the string 'DescriptionValue' or 'Value', depending on whether a text annotation exists for the property in the value help\n * Hint: A text arrangement is consciously ignored. If the text is retrieved from the value help, the text arrangement of the value help property isnt considered. Instead, the default text arrangement #TextFirst\n * is used.\n */\nexport async function _getDisplayModeFromValueHelp(\n\tInterface: ComputedAnnotationInterface,\n\tpropertyObjectPath: DataModelObjectPath\n): Promise<string> {\n\tconst context = Interface.context as unknown as Context;\n\tconst metaModel = Interface.context.getModel() as unknown as ODataMetaModel;\n\n\treturn await metaModel.requestValueListInfo(context.getPath(), true, context).then(function (valueListInfo: any) {\n\t\tconst firstKey = Object.keys(valueListInfo)[0];\n\t\tconst firstValueListInfo = valueListInfo[firstKey];\n\t\tconst valueListParameter = firstValueListInfo.Parameters?.find((element: any) => {\n\t\t\treturn element.LocalDataProperty?.$PropertyPath === propertyObjectPath?.targetObject?.name;\n\t\t});\n\t\tconst valueListProperty = valueListParameter?.ValueListProperty;\n\n\t\tconst textAnnotation = metaModel.getObject(\n\t\t\t\"/\" + firstValueListInfo.CollectionPath + \"/\" + valueListProperty + \"@com.sap.vocabularies.Common.v1.Text\"\n\t\t);\n\t\treturn textAnnotation ? \"DescriptionValue\" : \"Value\";\n\t});\n}\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;EASO,MAAMA,kBAAkB,GAAG,UAAUC,kBAAuC,EAAEC,iBAA2B,EAAU;IACzH,OAAOC,YAAY,CAACD,iBAAiB,CAAC,GAAGE,cAAc,CAACH,kBAAkB,CAAC,GAAG,OAAO;EACtF,CAAC;EAAC;EAEK,MAAMI,2BAA2B,GAAG,gBAC1CJ,kBAAuC,EACvCC,iBAA2B,EAC3BI,iBAA8C,EAC5B;IAAA;IAClB,MAAMC,eAAe,GAAGL,iBAAiB,aAAjBA,iBAAiB,gDAAjBA,iBAAiB,CAAEM,WAAW,oFAA9B,sBAAgCC,MAAM,2DAAtC,uBAAwCC,IAAI;IACpE,IAAIH,eAAe,EAAE;MACpB;MACA,OAAOP,kBAAkB,CAACC,kBAAkB,EAAEC,iBAAiB,CAAC;IACjE;IACA,MAAMS,aAAa,GAAGR,YAAY,CAACD,iBAAiB,CAAC;IACrD,IAAIS,aAAa,EAAE;MAAA;MAClB;MACA;MACA,MAAMC,qBAAqB,GAAGX,kBAAkB,aAAlBA,kBAAkB,gDAAlBA,kBAAkB,CAAEY,gBAAgB,oFAApC,sBAAsCL,WAAW,qFAAjD,uBAAmDM,EAAE,2DAArD,uBAAuDC,eAAe;MACpG,OAAO,CAAC,CAACH,qBAAqB,GAC3BR,cAAc,CAACH,kBAAkB,CAAC,GAClCe,4BAA4B,CAACV,iBAAiB,EAAEL,kBAAkB,CAAC;IACvE;IACA,OAAO,OAAO;EACf,CAAC;;EAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EARA;EASO,eAAee,4BAA4B,CACjDC,SAAsC,EACtChB,kBAAuC,EACrB;IAClB,MAAMiB,OAAO,GAAGD,SAAS,CAACC,OAA6B;IACvD,MAAMC,SAAS,GAAGF,SAAS,CAACC,OAAO,CAACE,QAAQ,EAA+B;IAE3E,OAAO,MAAMD,SAAS,CAACE,oBAAoB,CAACH,OAAO,CAACI,OAAO,EAAE,EAAE,IAAI,EAAEJ,OAAO,CAAC,CAACK,IAAI,CAAC,UAAUC,aAAkB,EAAE;MAAA;MAChH,MAAMC,QAAQ,GAAGC,MAAM,CAACC,IAAI,CAACH,aAAa,CAAC,CAAC,CAAC,CAAC;MAC9C,MAAMI,kBAAkB,GAAGJ,aAAa,CAACC,QAAQ,CAAC;MAClD,MAAMI,kBAAkB,4BAAGD,kBAAkB,CAACE,UAAU,0DAA7B,sBAA+BC,IAAI,CAAEC,OAAY,IAAK;QAAA;QAChF,OAAO,0BAAAA,OAAO,CAACC,iBAAiB,0DAAzB,sBAA2BC,aAAa,OAAKjC,kBAAkB,aAAlBA,kBAAkB,iDAAlBA,kBAAkB,CAAEkC,YAAY,2DAAhC,uBAAkCC,IAAI;MAC3F,CAAC,CAAC;MACF,MAAMC,iBAAiB,GAAGR,kBAAkB,aAAlBA,kBAAkB,uBAAlBA,kBAAkB,CAAES,iBAAiB;MAE/D,MAAMC,cAAc,GAAGpB,SAAS,CAACqB,SAAS,CACzC,GAAG,GAAGZ,kBAAkB,CAACa,cAAc,GAAG,GAAG,GAAGJ,iBAAiB,GAAG,sCAAsC,CAC1G;MACD,OAAOE,cAAc,GAAG,kBAAkB,GAAG,OAAO;IACrD,CAAC,CAAC;EACH;EAAC;EAAA;AAAA"}},{"offset":{"line":9205,"column":0},"map":{"version":3,"names":["sap","ui","define","PropertyHelper","UIFormatters","_exports","getDisplayMode","hasValueHelp","getDisplayProperty","propertyObjectPath","propertyConverted","getFilterFieldDisplayFormat","async","propertyInterface","_propertyConverted$an","_propertyConverted$an2","oTextAnnotation","annotations","Common","Text","bHasValueHelp","_propertyObjectPath$t","_propertyObjectPath$t2","_propertyObjectPath$t3","entityTextArrangement","targetEntityType","UI","TextArrangement","_getDisplayModeFromValueHelp","Interface","context","metaModel","getModel","requestValueListInfo","getPath","then","valueListInfo","_firstValueListInfo$P","firstKey","Object","keys","firstValueListInfo","valueListParameter","Parameters","find","element","_element$LocalDataPro","_propertyObjectPath$t4","LocalDataProperty","$PropertyPath","targetObject","name","valueListProperty","ValueListProperty","textAnnotation","getObject","CollectionPath"],"sources":["FilterFieldTemplating-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,wDAAO,CAAC,wCAAyC,uCAAwC,SAAUC,EAAgBC,GACxH,aAEA,IAAIC,EAAW,CAAC,EAChB,IAAIC,EAAiBF,EAAaE,eAClC,IAAIC,EAAeJ,EAAeI,aAClC,MAAMC,EAAqB,SAAUC,EAAoBC,GACvD,OAAOH,EAAaG,GAAqBJ,EAAeG,GAAsB,OAChF,EACAJ,EAASG,mBAAqBA,EAC9B,MAAMG,EAA8BC,eAAgBH,EAAoBC,EAAmBG,GACzF,IAAIC,EAAuBC,EAC3B,MAAMC,EAAkBN,IAAsB,MAAQA,SAA2B,OAAS,GAAKI,EAAwBJ,EAAkBO,eAAiB,MAAQH,SAA+B,OAAS,GAAKC,EAAyBD,EAAsBI,UAAY,MAAQH,SAAgC,OAAS,EAAIA,EAAuBI,KACtV,GAAIH,EAAiB,CAEnB,OAAOR,EAAmBC,EAAoBC,EAChD,CACA,MAAMU,EAAgBb,EAAaG,GACnC,GAAIU,EAAe,CACjB,IAAIC,EAAuBC,EAAwBC,EAGnD,MAAMC,EAAwBf,IAAuB,MAAQA,SAA4B,OAAS,GAAKY,EAAwBZ,EAAmBgB,oBAAsB,MAAQJ,SAA+B,OAAS,GAAKC,EAAyBD,EAAsBJ,eAAiB,MAAQK,SAAgC,OAAS,GAAKC,EAAyBD,EAAuBI,MAAQ,MAAQH,SAAgC,OAAS,EAAIA,EAAuBI,gBACvd,QAASH,EAAwBlB,EAAeG,GAAsBmB,EAA6Bf,EAAmBJ,EACxH,CACA,MAAO,OACT,EAWAJ,EAASM,4BAA8BA,EACvCC,eAAegB,EAA6BC,EAAWpB,GACrD,MAAMqB,EAAUD,EAAUC,QAC1B,MAAMC,EAAYF,EAAUC,QAAQE,WACpC,aAAaD,EAAUE,qBAAqBH,EAAQI,UAAW,KAAMJ,GAASK,KAAK,SAAUC,GAC3F,IAAIC,EACJ,MAAMC,EAAWC,OAAOC,KAAKJ,GAAe,GAC5C,MAAMK,EAAqBL,EAAcE,GACzC,MAAMI,GAAsBL,EAAwBI,EAAmBE,cAAgB,MAAQN,SAA+B,OAAS,EAAIA,EAAsBO,KAAKC,IACpK,IAAIC,EAAuBC,EAC3B,QAASD,EAAwBD,EAAQG,qBAAuB,MAAQF,SAA+B,OAAS,EAAIA,EAAsBG,kBAAoBxC,IAAuB,MAAQA,SAA4B,OAAS,GAAKsC,EAAyBtC,EAAmByC,gBAAkB,MAAQH,SAAgC,OAAS,EAAIA,EAAuBI,KAAK,GAExX,MAAMC,EAAoBV,IAAuB,MAAQA,SAA4B,OAAS,EAAIA,EAAmBW,kBACrH,MAAMC,EAAiBvB,EAAUwB,UAAU,IAAMd,EAAmBe,eAAiB,IAAMJ,EAAoB,wCAC/G,OAAOE,EAAiB,mBAAqB,OAC/C,EACF,CACAjD,EAASuB,6BAA+BA,EACxC,OAAOvB,CACT,EAAG","sourceRoot":"filter"}},{"offset":{"line":9210,"column":0},"map":{"version":3,"names":["oFilterUtils","getFilter","vIFilter","aFilters","getFilterInfo","filters","length","Filter","undefined","getFilterField","propertyPath","converterContext","entityType","FilterBarConverter","buildProperyInfo","propertyInfoField","oPropertyInfo","aTypeConfig","propertyConvertyContext","getConverterContextFor","annotationPath","propertyTargetObject","getDataModelObjectPath","targetObject","oTypeConfig","fetchTypeConfig","fetchPropertyInfo","key","assignDataTypeToPropertyInfo","createConverterContext","oFilterControl","sEntityTypePath","metaModel","appComponent","sFilterEntityTypePath","DelegateUtil","getCustomData","contextPath","oView","isA","CommonUtils","getTargetView","oMetaModel","getModel","getMetaModel","oAppComponent","getAppComponent","oVisualizationObjectPath","MetaModelConverter","getInvolvedDataModelObjects","createBindingContext","manifestSettings","getViewData","ConverterContext","createConverterContextForMacro","startingEntitySet","name","getDiagnostics","merge","contextLocation","getConvertedFilterFields","includeHidden","oModifier","lineItemTerm","_getFilterMetaModel","lrTables","_getFieldsForTable","oConverterContext","_getSelectionFields","getBindingPathForParameters","oIFilter","mConditions","aFilterPropertiesMetadata","aParameters","aParams","setTypeConfigToProperties","i","sFieldPath","oConditionInternal","oProperty","FilterUtil","getPropertyByKey","typeConfig","TypeUtil","getTypeConfig","dataType","formatOptions","constraints","mInternalParameterCondition","ConditionConverter","toType","getTypeUtil","sEdmType","ODATA_TYPE_MAPPING","className","push","encodeURIComponent","ODataUtils","formatLiteral","values","data","sEntitySetPath","substring","sParameterEntitySet","slice","lastIndexOf","sTargetNavigation","toString","getEditStateIsHideDraft","bIsHideDraft","$editState","oCondition","find","condition","operator","includes","mProperties","mFilterConditions","aIgnoreProperties","ignoredProperties","oTargetControl","targetControl","sTargetEntityPath","sSearch","sBindingPath","aPropertiesMetadata","propertiesMetadata","Core","byId","_getSearchField","_getFilterConditions","getPropertyInfoSet","_getFilterPropertiesMetadata","Object","keys","forEach","sKey","JSON","parse","aTargetPropertiesMetadata","getControlDelegate","fetchPropertiesForEntity","mEntityProperties","oEntityProperty","hasProperty","_aIgnoreProperties","_getIgnoredProperties","concat","oFilter","search","bindingPath","aProperties","oIFilterProperty","typeInstance","getConstraints","Function","path","getNotApplicableFilters","oFilterBar","oControl","sTargetEntityTypePath","oFilterBarEntityPath","oFilterBarEntitySetAnnotations","getObject","aNotApplicable","getConditions","bIsFilterBarEntityType","bIsChart","bIsAnalyticalTable","getParent","getTableDefinition","enableAnalytics","bEnableSearch","CommonHelper","parseCustomData","enableSearch","enableAnalyticsSearch","aTargetProperties","mTargetProperties","reduce","mProp","oProp","mTableAggregates","aggregates","mAggregatedProperties","sAggregateName","oAggregate","relativePath","chartEntityTypeAnnotations","oEntitySetAnnotations","mChartCustomAggregates","MetaModelUtil","getAllCustomAggregates","sProperty","aConditionProperty","typeCheck","Array","isArray","replace","getSearch","_getValueListInfo","filterBar","propertyName","valueListInfos","requestValueListInfo","catch","_getConditionValidated","valueListInfo","conditionPath","value","ConditionValidated","NotValidated","filter","FilterOperator","EQ","value1","listBinding","$model","bindList","CollectionPath","$select","valueExists","requestContexts","Validated","clearFilterValues","state","StateUtil","retrieveExternalState","editStatePath","editStateDefaultValue","EDITSTATE","ALL","id","currentEditStateCondition","deepClone","currentEditStateIsDefault","filtered","applyExternalState","fireAfterClear","_clearFilterValue","oState","setFilterValues","sConditionPath","args","sOperator","vValues","indexOf","Log","warning","SemanticDateOperators","getSemanticDateOperations","supportedValueTypes","Error","BT","Condition","createCondition","Promise","all","map","conditionValidatedStatus","conditionToModelPath","_getEntitySetPath","ModelHelper","getEntitySetPath","tableControls","getController","_getControls","oTable","aSelectionFields","getSelectionFields","selectionFields","getControlType","oPageContext","aFilterBarSelectionFieldsAnnotation","getEntityTypeAnnotation","annotation","mapSelectionFields","oSelectionField","oFilterBarSelectionFieldAnnotation","sPath","oFilterField","fieldNames","oField","_getSelectionFieldsFromPropertyInfos","propertyInfoFields","getPropertyInfo","selField","group","groupLabel","settings","visualFilter","label","sIFilterPropertyName","mEntityPropertiesCurrent","getFilters"],"sourceRoot":"filter","sources":["FilterUtils.ts"],"sourcesContent":["import { EntityType } from \"@sap-ux/vocabularies-types\";\nimport Log from \"sap/base/Log\";\nimport deepClone from \"sap/base/util/deepClone\";\nimport merge from \"sap/base/util/merge\";\nimport AppComponent from \"sap/fe/core/AppComponent\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport * as FilterBarConverter from \"sap/fe/core/converters/controls/ListReport/FilterBar\";\nimport ConverterContext from \"sap/fe/core/converters/ConverterContext\";\nimport { BaseManifestSettings } from \"sap/fe/core/converters/ManifestSettings\";\nimport * as MetaModelConverter from \"sap/fe/core/converters/MetaModelConverter\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport SemanticDateOperators from \"sap/fe/core/helpers/SemanticDateOperators\";\nimport { ODATA_TYPE_MAPPING } from \"sap/fe/core/templating/DisplayModeFormatter\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport DelegateUtil from \"sap/fe/macros/DelegateUtil\";\nimport EDITSTATE from \"sap/fe/macros/filter/DraftEditState\";\nimport MetaModelUtil from \"sap/fe/macros/ODataMetaModelUtil\";\nimport { ExternalStateType } from \"sap/fe/macros/valuehelp/ValueHelpDelegate\";\nimport Core from \"sap/ui/core/Core\";\nimport Condition from \"sap/ui/mdc/condition/Condition\";\nimport ConditionConverter from \"sap/ui/mdc/condition/ConditionConverter\";\nimport ConditionValidated from \"sap/ui/mdc/enum/ConditionValidated\";\nimport FilterBar from \"sap/ui/mdc/FilterBar\";\nimport TypeUtil from \"sap/ui/mdc/odata/v4/TypeUtil\";\nimport StateUtil from \"sap/ui/mdc/p13n/StateUtil\";\nimport FilterUtil from \"sap/ui/mdc/util/FilterUtil\";\nimport Filter from \"sap/ui/model/Filter\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport MetaModel from \"sap/ui/model/MetaModel\";\nimport ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport ODataUtils from \"sap/ui/model/odata/v4/ODataUtils\";\n\nconst oFilterUtils = {\n\tgetFilter: function (vIFilter: any) {\n\t\tconst aFilters = oFilterUtils.getFilterInfo(vIFilter).filters;\n\t\treturn aFilters.length ? new Filter(oFilterUtils.getFilterInfo(vIFilter).filters, false) : undefined;\n\t},\n\tgetFilterField: function (propertyPath: string, converterContext: ConverterContext, entityType: EntityType) {\n\t\treturn FilterBarConverter.getFilterField(propertyPath, converterContext, entityType);\n\t},\n\tbuildProperyInfo: function (propertyInfoField: any, converterContext: ConverterContext) {\n\t\tlet oPropertyInfo;\n\t\tconst aTypeConfig: any = {};\n\t\tconst propertyConvertyContext = converterContext.getConverterContextFor(propertyInfoField.annotationPath);\n\t\tconst propertyTargetObject = propertyConvertyContext.getDataModelObjectPath().targetObject;\n\t\tconst oTypeConfig = FilterBarConverter.fetchTypeConfig(propertyTargetObject);\n\t\toPropertyInfo = FilterBarConverter.fetchPropertyInfo(converterContext, propertyInfoField, oTypeConfig);\n\t\taTypeConfig[propertyInfoField.key] = oTypeConfig;\n\t\toPropertyInfo = FilterBarConverter.assignDataTypeToPropertyInfo(oPropertyInfo, converterContext, [], aTypeConfig);\n\t\treturn oPropertyInfo;\n\t},\n\tcreateConverterContext: function (oFilterControl: any, sEntityTypePath: string, metaModel?: MetaModel, appComponent?: AppComponent) {\n\t\tconst sFilterEntityTypePath = DelegateUtil.getCustomData(oFilterControl, \"entityType\"),\n\t\t\tcontextPath = sEntityTypePath || sFilterEntityTypePath;\n\n\t\tconst oView = oFilterControl.isA ? CommonUtils.getTargetView(oFilterControl) : null;\n\t\tconst oMetaModel = metaModel || oFilterControl.getModel().getMetaModel();\n\t\tconst oAppComponent = appComponent || (oView && CommonUtils.getAppComponent(oView));\n\t\tconst oVisualizationObjectPath = MetaModelConverter.getInvolvedDataModelObjects(oMetaModel.createBindingContext(contextPath));\n\t\tlet manifestSettings: BaseManifestSettings | undefined;\n\t\tif (oFilterControl.isA && !oFilterControl.isA(\"sap.ui.mdc.filterbar.vh.FilterBar\")) {\n\t\t\tmanifestSettings = ((oView && oView.getViewData()) || {}) as BaseManifestSettings;\n\t\t}\n\t\treturn ConverterContext.createConverterContextForMacro(\n\t\t\toVisualizationObjectPath.startingEntitySet.name,\n\t\t\toMetaModel,\n\t\t\toAppComponent?.getDiagnostics() as any,\n\t\t\tmerge,\n\t\t\toVisualizationObjectPath.contextLocation,\n\t\t\tmanifestSettings\n\t\t);\n\t},\n\tgetConvertedFilterFields: function (\n\t\toFilterControl: any,\n\t\tsEntityTypePath?: any,\n\t\tincludeHidden?: boolean,\n\t\tmetaModel?: MetaModel,\n\t\tappComponent?: AppComponent,\n\t\toModifier?: any,\n\t\tlineItemTerm?: string\n\t) {\n\t\tconst oMetaModel = this._getFilterMetaModel(oFilterControl, metaModel);\n\t\tconst sFilterEntityTypePath = DelegateUtil.getCustomData(oFilterControl, \"entityType\"),\n\t\t\tcontextPath = sEntityTypePath || sFilterEntityTypePath;\n\n\t\tconst lrTables: any[] = this._getFieldsForTable(oFilterControl, sEntityTypePath);\n\n\t\tconst oConverterContext = this.createConverterContext(oFilterControl, sEntityTypePath, metaModel, appComponent);\n\n\t\t//aSelectionFields = FilterBarConverter.getSelectionFields(oConverterContext);\n\t\treturn this._getSelectionFields(\n\t\t\toFilterControl,\n\t\t\tsEntityTypePath,\n\t\t\tsFilterEntityTypePath,\n\t\t\tcontextPath,\n\t\t\tlrTables,\n\t\t\toMetaModel,\n\t\t\toConverterContext,\n\t\t\tincludeHidden,\n\t\t\toModifier,\n\t\t\tlineItemTerm\n\t\t);\n\t},\n\n\tgetBindingPathForParameters: function (oIFilter: any, mConditions: any, aFilterPropertiesMetadata: any, aParameters: any) {\n\t\tconst aParams: any[] = [];\n\t\taFilterPropertiesMetadata = oFilterUtils.setTypeConfigToProperties(aFilterPropertiesMetadata);\n\t\t// Collecting all parameter values from conditions\n\t\tfor (let i = 0; i < aParameters.length; i++) {\n\t\t\tconst sFieldPath = aParameters[i];\n\t\t\tif (mConditions[sFieldPath] && mConditions[sFieldPath].length > 0) {\n\t\t\t\t// We would be using only the first condition for parameter value.\n\t\t\t\tconst oConditionInternal = merge({}, mConditions[sFieldPath][0]) as any;\n\t\t\t\tconst oProperty = FilterUtil.getPropertyByKey(aFilterPropertiesMetadata, sFieldPath) as any;\n\t\t\t\tconst oTypeConfig =\n\t\t\t\t\toProperty.typeConfig || TypeUtil.getTypeConfig(oProperty.dataType, oProperty.formatOptions, oProperty.constraints);\n\t\t\t\tconst mInternalParameterCondition = ConditionConverter.toType(oConditionInternal, oTypeConfig, oIFilter.getTypeUtil());\n\t\t\t\tconst sEdmType = ODATA_TYPE_MAPPING[oTypeConfig.className];\n\t\t\t\taParams.push(\n\t\t\t\t\t`${sFieldPath}=${encodeURIComponent(ODataUtils.formatLiteral(mInternalParameterCondition.values[0], sEdmType))}`\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// Binding path from EntityType\n\t\tconst sEntityTypePath = oIFilter.data(\"entityType\");\n\t\tconst sEntitySetPath = sEntityTypePath.substring(0, sEntityTypePath.length - 1);\n\t\tconst sParameterEntitySet = sEntitySetPath.slice(0, sEntitySetPath.lastIndexOf(\"/\"));\n\t\tconst sTargetNavigation = sEntitySetPath.substring(sEntitySetPath.lastIndexOf(\"/\") + 1);\n\t\t// create parameter context\n\t\treturn `${sParameterEntitySet}(${aParams.toString()})/${sTargetNavigation}`;\n\t},\n\n\tgetEditStateIsHideDraft: function (mConditions: any) {\n\t\tlet bIsHideDraft = false;\n\t\tif (mConditions && mConditions.$editState) {\n\t\t\tconst oCondition = mConditions.$editState.find(function (condition: any) {\n\t\t\t\treturn condition.operator === \"DRAFT_EDIT_STATE\";\n\t\t\t});\n\t\t\tif (oCondition && (oCondition.values.includes(\"ALL_HIDING_DRAFTS\") || oCondition.values.includes(\"SAVED_ONLY\"))) {\n\t\t\t\tbIsHideDraft = true;\n\t\t\t}\n\t\t}\n\t\treturn bIsHideDraft;\n\t},\n\t/**\n\t * Gets all filters that originate from the MDC FilterBar.\n\t *\n\t * @param vIFilter String or object instance related to\n\t *  - MDC_FilterBar/Table/Chart\n\t * @param mProperties Properties on filters that are to be retrieved. Available parameters:\n\t * \t - ignoredProperties: Array of property names which should be not considered for filtering\n\t *\t - propertiesMetadata: Array with all the property metadata. If not provided, properties will be retrieved from vIFilter.\n\t *\t - targetControl: MDC_table or chart. If provided, property names which are not relevant for the target control entitySet are not considered.\n\t * @param mFilterConditions Map with externalized filter conditions.\n\t * @returns FilterBar filters and basic search\n\t * @private\n\t * @ui5-restricted\n\t */\n\tgetFilterInfo: function (vIFilter: string | object, mProperties?: any, mFilterConditions?: any) {\n\t\tlet aIgnoreProperties = (mProperties && mProperties.ignoredProperties) || [];\n\t\tconst oTargetControl = mProperties && mProperties.targetControl,\n\t\t\tsTargetEntityPath = oTargetControl ? oTargetControl.data(\"entityType\") : undefined;\n\t\tlet oIFilter: any = vIFilter,\n\t\t\tsSearch,\n\t\t\taFilters: any[] = [],\n\t\t\tsBindingPath,\n\t\t\taPropertiesMetadata = mProperties && mProperties.propertiesMetadata;\n\t\tif (typeof vIFilter === \"string\") {\n\t\t\toIFilter = Core.byId(vIFilter) as any;\n\t\t}\n\t\tif (oIFilter) {\n\t\t\tsSearch = this._getSearchField(oIFilter, aIgnoreProperties);\n\t\t\tconst mConditions = this._getFilterConditions(mProperties, mFilterConditions, oIFilter);\n\t\t\tlet aFilterPropertiesMetadata = oIFilter.getPropertyInfoSet ? oIFilter.getPropertyInfoSet() : null;\n\t\t\taFilterPropertiesMetadata = this._getFilterPropertiesMetadata(aFilterPropertiesMetadata, oIFilter);\n\t\t\tif (mProperties && mProperties.targetControl && mProperties.targetControl.isA(\"sap.ui.mdc.Chart\")) {\n\t\t\t\tObject.keys(mConditions).forEach(function (sKey: string) {\n\t\t\t\t\tif (sKey === \"$editState\") {\n\t\t\t\t\t\tdelete mConditions[\"$editState\"];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tlet aParameters = oIFilter.data(\"parameters\") || [];\n\t\t\taParameters = typeof aParameters === \"string\" ? JSON.parse(aParameters) : aParameters;\n\t\t\tif (aParameters && aParameters.length > 0) {\n\t\t\t\t// Binding path changes in case of parameters.\n\t\t\t\tsBindingPath = oFilterUtils.getBindingPathForParameters(oIFilter, mConditions, aFilterPropertiesMetadata, aParameters);\n\t\t\t}\n\t\t\tif (mConditions) {\n\t\t\t\t//Exclude Interface Filter properties that are not relevant for the Target control entitySet\n\t\t\t\tif (sTargetEntityPath && oIFilter.data(\"entityType\") !== sTargetEntityPath) {\n\t\t\t\t\tconst oMetaModel = oIFilter.getModel().getMetaModel();\n\t\t\t\t\tconst aTargetPropertiesMetadata = oIFilter\n\t\t\t\t\t\t.getControlDelegate()\n\t\t\t\t\t\t.fetchPropertiesForEntity(sTargetEntityPath, oMetaModel, oIFilter);\n\t\t\t\t\taPropertiesMetadata = aTargetPropertiesMetadata;\n\n\t\t\t\t\tconst mEntityProperties: any = {};\n\t\t\t\t\tfor (const i in aTargetPropertiesMetadata) {\n\t\t\t\t\t\tconst oEntityProperty = aTargetPropertiesMetadata[i];\n\t\t\t\t\t\tmEntityProperties[oEntityProperty.name] = {\n\t\t\t\t\t\t\thasProperty: true,\n\t\t\t\t\t\t\tdataType: oEntityProperty.dataType\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tconst _aIgnoreProperties: any = this._getIgnoredProperties(aFilterPropertiesMetadata, mEntityProperties);\n\t\t\t\t\tif (_aIgnoreProperties.length > 0) {\n\t\t\t\t\t\taIgnoreProperties = aIgnoreProperties.concat(_aIgnoreProperties);\n\t\t\t\t\t}\n\t\t\t\t} else if (!aPropertiesMetadata) {\n\t\t\t\t\taPropertiesMetadata = aFilterPropertiesMetadata;\n\t\t\t\t}\n\t\t\t\t// var aParamKeys = [];\n\t\t\t\t// aParameters.forEach(function (oParam) {\n\t\t\t\t// \taParamKeys.push(oParam.key);\n\t\t\t\t// });\n\t\t\t\tconst oFilter = (\n\t\t\t\t\tFilterUtil.getFilterInfo(\n\t\t\t\t\t\toIFilter,\n\t\t\t\t\t\tmConditions,\n\t\t\t\t\t\toFilterUtils.setTypeConfigToProperties(aPropertiesMetadata),\n\t\t\t\t\t\taIgnoreProperties.concat(aParameters)\n\t\t\t\t\t) as any\n\t\t\t\t).filters;\n\t\t\t\taFilters = oFilter ? [oFilter] : [];\n\t\t\t}\n\t\t}\n\t\treturn { filters: aFilters, search: sSearch || undefined, bindingPath: sBindingPath };\n\t},\n\tsetTypeConfigToProperties: function (aProperties: any) {\n\t\tif (aProperties && aProperties.length) {\n\t\t\taProperties.forEach(function (oIFilterProperty: any) {\n\t\t\t\tif (\n\t\t\t\t\toIFilterProperty.typeConfig &&\n\t\t\t\t\toIFilterProperty.typeConfig.typeInstance &&\n\t\t\t\t\toIFilterProperty.typeConfig.typeInstance.getConstraints instanceof Function\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (oIFilterProperty.path === \"$editState\") {\n\t\t\t\t\toIFilterProperty.typeConfig = TypeUtil.getTypeConfig(\"sap.ui.model.odata.type.String\", {}, {});\n\t\t\t\t} else if (oIFilterProperty.path === \"$search\") {\n\t\t\t\t\toIFilterProperty.typeConfig = TypeUtil.getTypeConfig(\"sap.ui.model.odata.type.String\", {}, {});\n\t\t\t\t} else if (oIFilterProperty.dataType || (oIFilterProperty.typeConfig && oIFilterProperty.typeConfig.className)) {\n\t\t\t\t\toIFilterProperty.typeConfig = TypeUtil.getTypeConfig(\n\t\t\t\t\t\toIFilterProperty.dataType || oIFilterProperty.typeConfig.className,\n\t\t\t\t\t\toIFilterProperty.formatOptions,\n\t\t\t\t\t\toIFilterProperty.constraints\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn aProperties;\n\t},\n\tgetNotApplicableFilters: function (oFilterBar: any, oControl: any) {\n\t\tconst sTargetEntityTypePath = oControl.data(\"entityType\"),\n\t\t\toFilterBarEntityPath = oFilterBar.data(\"entityType\"),\n\t\t\toFilterBarEntitySetAnnotations = oFilterBar.getModel().getMetaModel().getObject(oFilterBarEntityPath),\n\t\t\taNotApplicable = [],\n\t\t\tmConditions = oFilterBar.getConditions(),\n\t\t\toMetaModel = oFilterBar.getModel().getMetaModel(),\n\t\t\tbIsFilterBarEntityType = sTargetEntityTypePath === oFilterBar.data(\"entityType\"),\n\t\t\tbIsChart = oControl.isA(\"sap.ui.mdc.Chart\"),\n\t\t\tbIsAnalyticalTable = !bIsChart && oControl.getParent().getTableDefinition().enableAnalytics,\n\t\t\tbEnableSearch = bIsChart\n\t\t\t\t? CommonHelper.parseCustomData(DelegateUtil.getCustomData(oControl, \"applySupported\")).enableSearch\n\t\t\t\t: !bIsAnalyticalTable || oControl.getParent().getTableDefinition().enableAnalyticsSearch;\n\n\t\tif (mConditions && (!bIsFilterBarEntityType || bIsAnalyticalTable || bIsChart)) {\n\t\t\t// We don't need to calculate the difference on property Level if entity sets are identical\n\t\t\tconst aTargetProperties = bIsFilterBarEntityType\n\t\t\t\t\t? []\n\t\t\t\t\t: oFilterBar.getControlDelegate().fetchPropertiesForEntity(sTargetEntityTypePath, oMetaModel, oFilterBar),\n\t\t\t\tmTargetProperties = aTargetProperties.reduce(function (mProp: any, oProp: any) {\n\t\t\t\t\tmProp[oProp.name] = oProp;\n\t\t\t\t\treturn mProp;\n\t\t\t\t}, {}),\n\t\t\t\tmTableAggregates = (!bIsChart && oControl.getParent().getTableDefinition().aggregates) || {},\n\t\t\t\tmAggregatedProperties: any = {};\n\n\t\t\tObject.keys(mTableAggregates).forEach(function (sAggregateName: string) {\n\t\t\t\tconst oAggregate = mTableAggregates[sAggregateName];\n\t\t\t\tmAggregatedProperties[oAggregate.relativePath] = oAggregate;\n\t\t\t});\n\t\t\tconst chartEntityTypeAnnotations = oControl\n\t\t\t\t.getModel()\n\t\t\t\t.getMetaModel()\n\t\t\t\t.getObject(oControl.data(\"targetCollectionPath\") + \"/\");\n\t\t\tif (oControl.isA(\"sap.ui.mdc.Chart\")) {\n\t\t\t\tconst oEntitySetAnnotations = oControl\n\t\t\t\t\t\t.getModel()\n\t\t\t\t\t\t.getMetaModel()\n\t\t\t\t\t\t.getObject(`${oControl.data(\"targetCollectionPath\")}@`),\n\t\t\t\t\tmChartCustomAggregates = MetaModelUtil.getAllCustomAggregates(oEntitySetAnnotations);\n\t\t\t\tObject.keys(mChartCustomAggregates).forEach(function (sAggregateName: string) {\n\t\t\t\t\tif (!mAggregatedProperties[sAggregateName]) {\n\t\t\t\t\t\tconst oAggregate = mChartCustomAggregates[sAggregateName];\n\t\t\t\t\t\tmAggregatedProperties[sAggregateName] = oAggregate;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfor (const sProperty in mConditions) {\n\t\t\t\t// Need to check the length of mConditions[sProperty] since previous filtered properties are kept into mConditions with empty array as definition\n\t\t\t\tconst aConditionProperty = mConditions[sProperty];\n\t\t\t\tlet typeCheck = true;\n\t\t\t\tif (chartEntityTypeAnnotations[sProperty] && oFilterBarEntitySetAnnotations[sProperty]) {\n\t\t\t\t\ttypeCheck = chartEntityTypeAnnotations[sProperty][\"$Type\"] === oFilterBarEntitySetAnnotations[sProperty][\"$Type\"];\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tArray.isArray(aConditionProperty) &&\n\t\t\t\t\taConditionProperty.length > 0 &&\n\t\t\t\t\t(((!mTargetProperties[sProperty] || (mTargetProperties[sProperty] && !typeCheck)) &&\n\t\t\t\t\t\t(!bIsFilterBarEntityType || (sProperty === \"$editState\" && bIsChart))) ||\n\t\t\t\t\t\tmAggregatedProperties[sProperty])\n\t\t\t\t) {\n\t\t\t\t\taNotApplicable.push(sProperty.replace(/\\+|\\*/g, \"\"));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!bEnableSearch && oFilterBar.getSearch()) {\n\t\t\taNotApplicable.push(\"$search\");\n\t\t}\n\t\treturn aNotApplicable;\n\t},\n\n\t/**\n\t * Gets the value list information of a property as defined for a given filter bar.\n\t *\n\t * @param filterBar The filter bar to get the value list information for\n\t * @param propertyName The property to get the value list information for\n\t * @returns The value list information\n\t */\n\tasync _getValueListInfo(filterBar: FilterBar, propertyName: string): Promise<any> {\n\t\tconst metaModel = filterBar.getModel()?.getMetaModel() as ODataMetaModel;\n\n\t\tif (!metaModel) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst entityType = filterBar.data(\"entityType\") ?? \"\";\n\t\tconst valueListInfos = await metaModel.requestValueListInfo(entityType + propertyName, true, undefined).catch(() => null);\n\t\treturn valueListInfos?.[\"\"];\n\t},\n\n\t/**\n\t * Gets the {@link ConditionValidated} state for a single value. This decides whether the value is treated as a selected value\n\t * in a value help, meaning that its description is loaded and displayed if existing, or whether it is displayed as a\n\t * condition (e.g. \"=1\").\n\t *\n\t * Values for properties without value list info are always treated as {@link ConditionValidated.NotValidated}.\n\t *\n\t * @param valueListInfo The value list info from the {@link MetaModel}\n\t * @param conditionPath Path to the property to set the value as condition for\n\t * @param value The single value to get the state for\n\t */\n\t_getConditionValidated: async function (\n\t\tvalueListInfo: any,\n\t\tconditionPath: string,\n\t\tvalue: string | number | boolean | null | undefined\n\t): Promise<ConditionValidated> {\n\t\tif (!valueListInfo) {\n\t\t\treturn ConditionValidated.NotValidated;\n\t\t}\n\n\t\tconst filter = new Filter({\n\t\t\tpath: conditionPath,\n\t\t\toperator: FilterOperator.EQ,\n\t\t\tvalue1: value\n\t\t});\n\t\tconst listBinding = valueListInfo.$model.bindList(`/${valueListInfo.CollectionPath}`, undefined, undefined, filter, {\n\t\t\t$select: conditionPath\n\t\t});\n\n\t\tconst valueExists = (await listBinding.requestContexts()).length > 0;\n\t\tif (valueExists) {\n\t\t\treturn ConditionValidated.Validated;\n\t\t} else {\n\t\t\treturn ConditionValidated.NotValidated;\n\t\t}\n\t},\n\t/**\n\t * Clears all input values of visible filter fields in the filter bar.\n\t *\n\t * @param oFilterBar The filter bar that contains the filter field\n\t */\n\tclearFilterValues: async function (oFilterBar: any) {\n\t\t// Do nothing when the filter bar is hidden\n\t\tif (!oFilterBar) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst state: ExternalStateType = await StateUtil.retrieveExternalState(oFilterBar);\n\t\tconst editStatePath = \"$editState\";\n\t\tconst editStateDefaultValue = EDITSTATE.ALL.id;\n\t\tconst currentEditStateCondition = deepClone(state.filter[editStatePath]?.[0]);\n\t\tconst currentEditStateIsDefault = currentEditStateCondition?.values[0] === editStateDefaultValue;\n\n\t\t// Clear all conditions\n\t\tfor (const conditionPath of Object.keys(state.filter)) {\n\t\t\tif (conditionPath === editStatePath && currentEditStateIsDefault) {\n\t\t\t\t// Do not clear edit state condition if it is already \"ALL\"\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tfor (const condition of state.filter[conditionPath]) {\n\t\t\t\tcondition.filtered = false;\n\t\t\t}\n\t\t}\n\t\tawait StateUtil.applyExternalState(oFilterBar, { filter: state.filter });\n\n\t\t// Set edit state to 'ALL' if it wasn't before\n\t\tif (currentEditStateCondition && !currentEditStateIsDefault) {\n\t\t\tcurrentEditStateCondition.values = [editStateDefaultValue];\n\t\t\tawait StateUtil.applyExternalState(oFilterBar, { filter: { [editStatePath]: [currentEditStateCondition] } });\n\t\t}\n\n\t\t// Allow app developers to update filters after clearing\n\t\toFilterBar.getParent().fireAfterClear();\n\t},\n\n\t/**\n\t * Clear the filter value for a specific property in the filter bar.\n\t * This is a prerequisite before new values can be set cleanly.\n\t *\n\t * @param filterBar The filter bar that contains the filter field\n\t * @param conditionPath The path to the property as a condition path\n\t */\n\tasync _clearFilterValue(filterBar: FilterBar, conditionPath: string) {\n\t\tconst oState = await StateUtil.retrieveExternalState(filterBar);\n\t\tif (oState.filter[conditionPath]) {\n\t\t\toState.filter[conditionPath].forEach((oCondition: any) => {\n\t\t\t\toCondition.filtered = false;\n\t\t\t});\n\t\t\tawait StateUtil.applyExternalState(filterBar, { filter: { [conditionPath]: oState.filter[conditionPath] } });\n\t\t}\n\t},\n\n\t/**\n\t * Set the filter values for the given property in the filter bar.\n\t * The filter values can be either a single value or an array of values.\n\t * Each filter value must be represented as a primitive value.\n\t *\n\t * @param oFilterBar The filter bar that contains the filter field\n\t * @param sConditionPath The path to the property as a condition path\n\t * @param args List of optional parameters\n\t *  [sOperator] The operator to be used - if not set, the default operator (EQ) will be used\n\t *  [vValues] The values to be applied - if sOperator is missing, vValues is used as 3rd parameter\n\t */\n\tsetFilterValues: async function (oFilterBar: any, sConditionPath: string, ...args: any) {\n\t\tlet sOperator: string | undefined = args?.[0];\n\t\tlet vValues: undefined | string | number | boolean | string[] | number[] | boolean[] = args?.[1];\n\n\t\t// Do nothing when the filter bar is hidden\n\t\tif (!oFilterBar) {\n\t\t\treturn;\n\t\t}\n\n\t\t// common filter Operators need a value. Do nothing if this value is undefined\n\t\t// BCP: 2270135274\n\t\tif (\n\t\t\targs.length === 2 &&\n\t\t\t(vValues === undefined || vValues === null || vValues === \"\") &&\n\t\t\tsOperator &&\n\t\t\tObject.keys(FilterOperator).indexOf(sOperator) !== -1\n\t\t) {\n\t\t\tLog.warning(`An empty filter value cannot be applied with the ${sOperator} operator`);\n\t\t\treturn;\n\t\t}\n\n\t\t// The 4th parameter is optional; if sOperator is missing, vValues is used as 3rd parameter\n\t\t// This does not apply for semantic dates, as these do not require vValues (exception: \"LASTDAYS\", 3)\n\t\tif (vValues === undefined && !SemanticDateOperators.getSemanticDateOperations().includes(sOperator || \"\")) {\n\t\t\tvValues = sOperator ?? [];\n\t\t\tsOperator = undefined;\n\t\t}\n\n\t\t// If sOperator is not set, use EQ as default\n\t\tif (!sOperator) {\n\t\t\tsOperator = FilterOperator.EQ;\n\t\t}\n\n\t\t// Supported array types:\n\t\t//  - Single Values:\t\"2\" | [\"2\"]\n\t\t//  - Multiple Values:\t[\"2\", \"3\"]\n\t\t//  - Ranges:\t\t\t[\"2\",\"3\"]\n\t\t// Unsupported array types:\n\t\t//  - Multiple Ranges:\t[[\"2\",\"3\"]] | [[\"2\",\"3\"],[\"4\",\"5\"]]\n\t\tconst supportedValueTypes = [\"string\", \"number\", \"boolean\"];\n\t\tif (\n\t\t\tvValues !== undefined &&\n\t\t\t((!Array.isArray(vValues) && !supportedValueTypes.includes(typeof vValues)) ||\n\t\t\t\t(Array.isArray(vValues) && vValues.length > 0 && !supportedValueTypes.includes(typeof vValues[0])))\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t\"FilterUtils.js#_setFilterValues: Filter value not supported; only primitive values or an array thereof can be used.\"\n\t\t\t);\n\t\t}\n\t\tlet values: (string | number | boolean | null)[] | undefined;\n\t\tif (vValues !== undefined) {\n\t\t\tvalues = Array.isArray(vValues) ? vValues : [vValues];\n\t\t}\n\n\t\t// Get the value list info of the property to later check whether the values exist\n\t\tconst valueListInfo = await this._getValueListInfo(oFilterBar, sConditionPath);\n\n\t\tconst filter: { [key: string]: any } = {};\n\t\tif (sConditionPath) {\n\t\t\tif (values && values.length) {\n\t\t\t\tif (sOperator === FilterOperator.BT) {\n\t\t\t\t\t// The operator BT requires one condition with both thresholds\n\t\t\t\t\tfilter[sConditionPath] = [Condition.createCondition(sOperator, values, null, null, ConditionValidated.NotValidated)];\n\t\t\t\t} else {\n\t\t\t\t\t// Regular single and multi value conditions, if there are no values, we do not want any conditions\n\t\t\t\t\tfilter[sConditionPath] = await Promise.all(\n\t\t\t\t\t\tvalues.map(async (value) => {\n\t\t\t\t\t\t\t// For the EQ case, tell MDC to validate the value (e.g. display the description), if it exists in the associated entity, otherwise never validate\n\t\t\t\t\t\t\tconst conditionValidatedStatus =\n\t\t\t\t\t\t\t\tsOperator === FilterOperator.EQ\n\t\t\t\t\t\t\t\t\t? await this._getConditionValidated(valueListInfo, sConditionPath, value)\n\t\t\t\t\t\t\t\t\t: ConditionValidated.NotValidated;\n\n\t\t\t\t\t\t\treturn Condition.createCondition(sOperator!, [value], null, null, conditionValidatedStatus);\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else if (SemanticDateOperators.getSemanticDateOperations().includes(sOperator || \"\")) {\n\t\t\t\t// vValues is undefined, so the operator is a semantic date that does not need values (see above)\n\t\t\t\tfilter[sConditionPath] = [Condition.createCondition(sOperator, [], null, null, ConditionValidated.NotValidated)];\n\t\t\t}\n\t\t}\n\n\t\t// Always clear the current value as we do not want to add filter values but replace them\n\t\tawait this._clearFilterValue(oFilterBar, sConditionPath);\n\n\t\tif (filter[sConditionPath]) {\n\t\t\t// This is not called in the reset case, i.e. setFilterValue(\"Property\")\n\t\t\tawait StateUtil.applyExternalState(oFilterBar, { filter });\n\t\t}\n\t},\n\tconditionToModelPath: function (sConditionPath: string) {\n\t\t// make the path usable as model property, therefore slashes become backslashes\n\t\treturn sConditionPath.replace(/\\//g, \"\\\\\");\n\t},\n\t_getFilterMetaModel: function (oFilterControl: any, metaModel?: MetaModel) {\n\t\treturn metaModel || oFilterControl.getModel().getMetaModel();\n\t},\n\t_getEntitySetPath: function (sEntityTypePath: any) {\n\t\treturn sEntityTypePath && ModelHelper.getEntitySetPath(sEntityTypePath);\n\t},\n\n\t_getFieldsForTable: function (oFilterControl: any, sEntityTypePath?: any) {\n\t\tconst lrTables: any[] = [];\n\t\t/**\n\t\t * Gets fields from\n\t\t * \t- direct entity properties,\n\t\t * \t- navigateProperties key in the manifest if these properties are known by the entity\n\t\t *  - annotation \"SelectionFields\"\n\t\t */\n\t\tif (sEntityTypePath) {\n\t\t\tconst oView = CommonUtils.getTargetView(oFilterControl);\n\t\t\tconst tableControls =\n\t\t\t\toView &&\n\t\t\t\toView.getController() &&\n\t\t\t\t(oView.getController() as any)._getControls &&\n\t\t\t\t(oView.getController() as any)._getControls(\"table\"); //[0].getParent().getTableDefinition();\n\t\t\tif (tableControls) {\n\t\t\t\ttableControls.forEach(function (oTable: any) {\n\t\t\t\t\tlrTables.push(oTable.getParent().getTableDefinition());\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn lrTables;\n\t\t}\n\t\treturn [];\n\t},\n\t_getSelectionFields: function (\n\t\toFilterControl: any,\n\t\tsEntityTypePath: string,\n\t\tsFilterEntityTypePath: string,\n\t\tcontextPath: string,\n\t\tlrTables: any[],\n\t\toMetaModel: any,\n\t\toConverterContext: any,\n\t\tincludeHidden?: boolean,\n\t\toModifier?: any,\n\t\tlineItemTerm?: string\n\t) {\n\t\tlet aSelectionFields = FilterBarConverter.getSelectionFields(\n\t\t\toConverterContext,\n\t\t\tlrTables,\n\t\t\tundefined,\n\t\t\tincludeHidden,\n\t\t\tlineItemTerm\n\t\t).selectionFields;\n\t\tif (\n\t\t\t(oModifier\n\t\t\t\t? oModifier.getControlType(oFilterControl) === \"sap.ui.mdc.FilterBar\"\n\t\t\t\t: oFilterControl.isA(\"sap.ui.mdc.FilterBar\")) &&\n\t\t\tsEntityTypePath !== sFilterEntityTypePath\n\t\t) {\n\t\t\t/**\n\t\t\t * We are on multi entity sets scenario so we add annotation \"SelectionFields\"\n\t\t\t * from FilterBar entity if these properties are known by the entity\n\t\t\t */\n\t\t\tconst oVisualizationObjectPath = MetaModelConverter.getInvolvedDataModelObjects(oMetaModel.createBindingContext(contextPath));\n\t\t\tconst oPageContext = oConverterContext.getConverterContextFor(sFilterEntityTypePath);\n\t\t\tconst aFilterBarSelectionFieldsAnnotation: any =\n\t\t\t\toPageContext.getEntityTypeAnnotation(\"@com.sap.vocabularies.UI.v1.SelectionFields\").annotation || [];\n\t\t\tconst mapSelectionFields: any = {};\n\t\t\taSelectionFields.forEach(function (oSelectionField: any) {\n\t\t\t\tmapSelectionFields[oSelectionField.conditionPath] = true;\n\t\t\t});\n\n\t\t\taFilterBarSelectionFieldsAnnotation.forEach(function (oFilterBarSelectionFieldAnnotation: any) {\n\t\t\t\tconst sPath = oFilterBarSelectionFieldAnnotation.value;\n\t\t\t\tif (!mapSelectionFields[sPath]) {\n\t\t\t\t\tconst oFilterField = FilterBarConverter.getFilterField(\n\t\t\t\t\t\tsPath,\n\t\t\t\t\t\toConverterContext,\n\t\t\t\t\t\toVisualizationObjectPath.startingEntitySet.entityType\n\t\t\t\t\t);\n\t\t\t\t\tif (oFilterField) {\n\t\t\t\t\t\taSelectionFields.push(oFilterField);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tif (aSelectionFields) {\n\t\t\tconst fieldNames: any[] = [];\n\t\t\taSelectionFields.forEach(function (oField: any) {\n\t\t\t\tfieldNames.push(oField.key);\n\t\t\t});\n\t\t\taSelectionFields = this._getSelectionFieldsFromPropertyInfos(oFilterControl, fieldNames, aSelectionFields);\n\t\t}\n\t\treturn aSelectionFields;\n\t},\n\t_getSelectionFieldsFromPropertyInfos: function (oFilterControl: any, fieldNames: any, aSelectionFields: any) {\n\t\tconst propertyInfoFields = (oFilterControl.getPropertyInfo && oFilterControl.getPropertyInfo()) || [];\n\t\tpropertyInfoFields.forEach(function (oProp: any) {\n\t\t\tif (oProp.name === \"$search\" || oProp.name === \"$editState\") {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst selField = aSelectionFields[fieldNames.indexOf(oProp.key)];\n\t\t\tif (fieldNames.indexOf(oProp.key) !== -1 && selField.annotationPath) {\n\t\t\t\toProp.group = selField.group;\n\t\t\t\toProp.groupLabel = selField.groupLabel;\n\t\t\t\toProp.settings = selField.settings;\n\t\t\t\toProp.visualFilter = selField.visualFilter;\n\t\t\t\toProp.label = selField.label;\n\t\t\t\taSelectionFields[fieldNames.indexOf(oProp.key)] = oProp;\n\t\t\t}\n\n\t\t\tif (fieldNames.indexOf(oProp.key) === -1 && !oProp.annotationPath) {\n\t\t\t\taSelectionFields.push(oProp);\n\t\t\t}\n\t\t});\n\t\treturn aSelectionFields;\n\t},\n\t_getSearchField: function (oIFilter: any, aIgnoreProperties: any) {\n\t\treturn oIFilter.getSearch && aIgnoreProperties.indexOf(\"search\") === -1 ? oIFilter.getSearch() : null;\n\t},\n\t_getFilterConditions: function (mProperties: any, mFilterConditions: any, oIFilter: any) {\n\t\tconst mConditions = mFilterConditions || oIFilter.getConditions();\n\t\tif (mProperties && mProperties.targetControl && mProperties.targetControl.isA(\"sap.ui.mdc.Chart\")) {\n\t\t\tObject.keys(mConditions).forEach(function (sKey: string) {\n\t\t\t\tif (sKey === \"$editState\") {\n\t\t\t\t\tdelete mConditions[\"$editState\"];\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn mConditions;\n\t},\n\t_getFilterPropertiesMetadata: function (aFilterPropertiesMetadata: any, oIFilter: any) {\n\t\tif (!(aFilterPropertiesMetadata && aFilterPropertiesMetadata.length)) {\n\t\t\tif (oIFilter.getPropertyInfo) {\n\t\t\t\taFilterPropertiesMetadata = oIFilter.getPropertyInfo();\n\t\t\t} else {\n\t\t\t\taFilterPropertiesMetadata = null;\n\t\t\t}\n\t\t}\n\t\treturn aFilterPropertiesMetadata;\n\t},\n\t_getIgnoredProperties: function (aFilterPropertiesMetadata: any, mEntityProperties: any) {\n\t\tconst aIgnoreProperties: any = [];\n\t\taFilterPropertiesMetadata.forEach(function (oIFilterProperty: any) {\n\t\t\tconst sIFilterPropertyName = oIFilterProperty.name;\n\t\t\tconst mEntityPropertiesCurrent = mEntityProperties[sIFilterPropertyName];\n\t\t\tif (\n\t\t\t\tmEntityPropertiesCurrent &&\n\t\t\t\t(!mEntityPropertiesCurrent[\"hasProperty\"] ||\n\t\t\t\t\t(mEntityPropertiesCurrent[\"hasProperty\"] && oIFilterProperty.dataType !== mEntityPropertiesCurrent.dataType))\n\t\t\t) {\n\t\t\t\taIgnoreProperties.push(sIFilterPropertyName);\n\t\t\t}\n\t\t});\n\t\treturn aIgnoreProperties;\n\t},\n\tgetFilters: function (filterBar: FilterBar) {\n\t\tconst { filters, search } = this.getFilterInfo(filterBar);\n\n\t\treturn { filters, search };\n\t}\n};\n\nexport default oFilterUtils;\n"],"mappings":"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"}},{"offset":{"line":9776,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","deepClone","merge","CommonUtils","FilterBarConverter","ConverterContext","MetaModelConverter","ModelHelper","SemanticDateOperators","DisplayModeFormatter","CommonHelper","DelegateUtil","EDITSTATE","MetaModelUtil","Core","Condition","ConditionConverter","ConditionValidated","TypeUtil","StateUtil","FilterUtil","Filter","FilterOperator","ODataUtils","ODATA_TYPE_MAPPING","oFilterUtils","getFilter","vIFilter","aFilters","getFilterInfo","filters","length","undefined","getFilterField","propertyPath","converterContext","entityType","buildProperyInfo","propertyInfoField","oPropertyInfo","aTypeConfig","propertyConvertyContext","getConverterContextFor","annotationPath","propertyTargetObject","getDataModelObjectPath","targetObject","oTypeConfig","fetchTypeConfig","fetchPropertyInfo","key","assignDataTypeToPropertyInfo","createConverterContext","oFilterControl","sEntityTypePath","metaModel","appComponent","sFilterEntityTypePath","getCustomData","contextPath","oView","isA","getTargetView","oMetaModel","getModel","getMetaModel","oAppComponent","getAppComponent","oVisualizationObjectPath","getInvolvedDataModelObjects","createBindingContext","manifestSettings","getViewData","createConverterContextForMacro","startingEntitySet","name","getDiagnostics","contextLocation","getConvertedFilterFields","includeHidden","oModifier","lineItemTerm","this","_getFilterMetaModel","lrTables","_getFieldsForTable","oConverterContext","_getSelectionFields","getBindingPathForParameters","oIFilter","mConditions","aFilterPropertiesMetadata","aParameters","aParams","setTypeConfigToProperties","i","sFieldPath","oConditionInternal","oProperty","getPropertyByKey","typeConfig","getTypeConfig","dataType","formatOptions","constraints","mInternalParameterCondition","toType","getTypeUtil","sEdmType","className","push","encodeURIComponent","formatLiteral","values","data","sEntitySetPath","substring","sParameterEntitySet","slice","lastIndexOf","sTargetNavigation","toString","getEditStateIsHideDraft","bIsHideDraft","$editState","oCondition","find","condition","operator","includes","mProperties","mFilterConditions","aIgnoreProperties","ignoredProperties","oTargetControl","targetControl","sTargetEntityPath","sSearch","sBindingPath","aPropertiesMetadata","propertiesMetadata","byId","_getSearchField","_getFilterConditions","getPropertyInfoSet","_getFilterPropertiesMetadata","Object","keys","forEach","sKey","JSON","parse","aTargetPropertiesMetadata","getControlDelegate","fetchPropertiesForEntity","mEntityProperties","oEntityProperty","hasProperty","_aIgnoreProperties","_getIgnoredProperties","concat","oFilter","search","bindingPath","aProperties","oIFilterProperty","typeInstance","getConstraints","Function","path","getNotApplicableFilters","oFilterBar","oControl","sTargetEntityTypePath","oFilterBarEntityPath","oFilterBarEntitySetAnnotations","getObject","aNotApplicable","getConditions","bIsFilterBarEntityType","bIsChart","bIsAnalyticalTable","getParent","getTableDefinition","enableAnalytics","bEnableSearch","parseCustomData","enableSearch","enableAnalyticsSearch","aTargetProperties","mTargetProperties","reduce","mProp","oProp","mTableAggregates","aggregates","mAggregatedProperties","sAggregateName","oAggregate","relativePath","chartEntityTypeAnnotations","oEntitySetAnnotations","mChartCustomAggregates","getAllCustomAggregates","sProperty","aConditionProperty","typeCheck","Array","isArray","replace","getSearch","async","filterBar","propertyName","_filterBar$getModel","valueListInfos","requestValueListInfo","catch","_getConditionValidated","valueListInfo","conditionPath","value","NotValidated","filter","EQ","value1","listBinding","$model","bindList","CollectionPath","$select","valueExists","requestContexts","Validated","clearFilterValues","_state$filter$editSta","state","retrieveExternalState","editStatePath","editStateDefaultValue","ALL","id","currentEditStateCondition","currentEditStateIsDefault","filtered","applyExternalState","fireAfterClear","oState","setFilterValues","sConditionPath","_len","arguments","args","_key","sOperator","vValues","indexOf","warning","getSemanticDateOperations","supportedValueTypes","Error","_getValueListInfo","BT","createCondition","Promise","all","map","conditionValidatedStatus","_clearFilterValue","conditionToModelPath","_getEntitySetPath","getEntitySetPath","tableControls","getController","_getControls","oTable","aSelectionFields","getSelectionFields","selectionFields","getControlType","oPageContext","aFilterBarSelectionFieldsAnnotation","getEntityTypeAnnotation","annotation","mapSelectionFields","oSelectionField","oFilterBarSelectionFieldAnnotation","sPath","oFilterField","fieldNames","oField","_getSelectionFieldsFromPropertyInfos","propertyInfoFields","getPropertyInfo","selField","group","groupLabel","settings","visualFilter","label","sIFilterPropertyName","mEntityPropertiesCurrent","getFilters"],"sources":["FilterUtils-dbg.js"],"mappings":"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","sourceRoot":"filter"}},{"offset":{"line":9781,"column":0},"map":{"version":3,"names":["MultiValue","defineUI5Class","formatConditionValues","values","formatValue","internalValue","externalValueType","result","split","Array","isArray","map","value","getElementTypeName","filter","undefined","parseValue","externalValue","operator","format","Value"],"sourceRoot":"filter/type","sources":["MultiValue.ts"],"sourcesContent":["import { defineUI5Class } from \"sap/fe/core/helpers/ClassSupport\";\nimport Value from \"sap/fe/macros/filter/type/Value\";\nimport type { ConditionObject } from \"sap/ui/mdc/condition/Condition\";\n\n/**\n * Handle format/parse of multi value filters.\n */\n@defineUI5Class(\"sap.fe.macros.filter.type.MultiValue\")\nexport default class MultiValue extends Value {\n\t/**\n\t * Returns the unchanged values.\n\t *\n\t * @param values Input condition value\n\t * @returns First value of array or input\n\t * @protected\n\t */\n\tformatConditionValues(values: string[] | string): string[] | string {\n\t\treturn values;\n\t}\n\n\t/**\n\t * Returns the string value parsed to the external value type.\n\t *\n\t * @param internalValue The internal string value to be formatted\n\t * @param externalValueType The external value type, e.g. int, float[], string, etc.\n\t * @returns The formatted value\n\t * @protected\n\t */\n\tformatValue(internalValue: any | undefined, externalValueType: string | undefined): any {\n\t\tlet result = internalValue;\n\n\t\tif (typeof result === \"string\") {\n\t\t\tresult = result.split(\",\");\n\t\t}\n\n\t\tif (Array.isArray(result)) {\n\t\t\tresult = result\n\t\t\t\t.map((value: string) => super.formatValue(value, this.getElementTypeName(externalValueType)))\n\t\t\t\t.filter((value: string) => value !== undefined);\n\t\t}\n\n\t\treturn result || [];\n\t}\n\n\t/**\n\t * Returns the value parsed to the internal string value.\n\t *\n\t * @param externalValue The value to be parsed\n\t * @param externalValueType The external value type, e.g. int, float[], string, etc.\n\t * @returns The parsed value\n\t * @protected\n\t */\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\tparseValue(externalValue: any | undefined, externalValueType: string | undefined): any {\n\t\tif (!externalValue) {\n\t\t\texternalValue = [];\n\t\t}\n\t\treturn externalValue.map((value: any) => {\n\t\t\tif (value === undefined) {\n\t\t\t\tvalue = [];\n\t\t\t} else if (!Array.isArray(value)) {\n\t\t\t\tvalue = [value];\n\t\t\t}\n\t\t\treturn this.operator.format({ values: value } as ConditionObject);\n\t\t});\n\t}\n}\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;MAQqBA,UAAU;EAJ/B;AACA;AACA;EAFA,OAGCC,cAAc,CAAC,sCAAsC,CAAC;IAAA;IAAA;MAAA;IAAA;IAAA;IAAA;IAEtD;AACD;AACA;AACA;AACA;AACA;AACA;IANC,OAOAC,qBAAqB,GAArB,+BAAsBC,MAAyB,EAAqB;MACnE,OAAOA,MAAM;IACd;;IAEA;AACD;AACA;AACA;AACA;AACA;AACA;AACA,OAPC;IAAA,OAQAC,WAAW,GAAX,qBAAYC,aAA8B,EAAEC,iBAAqC,EAAO;MACvF,IAAIC,MAAM,GAAGF,aAAa;MAE1B,IAAI,OAAOE,MAAM,KAAK,QAAQ,EAAE;QAC/BA,MAAM,GAAGA,MAAM,CAACC,KAAK,CAAC,GAAG,CAAC;MAC3B;MAEA,IAAIC,KAAK,CAACC,OAAO,CAACH,MAAM,CAAC,EAAE;QAC1BA,MAAM,GAAGA,MAAM,CACbI,GAAG,CAAEC,KAAa,qBAAWR,WAAW,YAACQ,KAAK,EAAE,IAAI,CAACC,kBAAkB,CAACP,iBAAiB,CAAC,CAAC,CAAC,CAC5FQ,MAAM,CAAEF,KAAa,IAAKA,KAAK,KAAKG,SAAS,CAAC;MACjD;MAEA,OAAOR,MAAM,IAAI,EAAE;IACpB;;IAEA;AACD;AACA;AACA;AACA;AACA;AACA;AACA;IACC;IAAA;IAAA,OACAS,UAAU,GAAV,oBAAWC,aAA8B,EAAEX,iBAAqC,EAAO;MACtF,IAAI,CAACW,aAAa,EAAE;QACnBA,aAAa,GAAG,EAAE;MACnB;MACA,OAAOA,aAAa,CAACN,GAAG,CAAEC,KAAU,IAAK;QACxC,IAAIA,KAAK,KAAKG,SAAS,EAAE;UACxBH,KAAK,GAAG,EAAE;QACX,CAAC,MAAM,IAAI,CAACH,KAAK,CAACC,OAAO,CAACE,KAAK,CAAC,EAAE;UACjCA,KAAK,GAAG,CAACA,KAAK,CAAC;QAChB;QACA,OAAO,IAAI,CAACM,QAAQ,CAACC,MAAM,CAAC;UAAEhB,MAAM,EAAES;QAAM,CAAC,CAAoB;MAClE,CAAC,CAAC;IACH,CAAC;IAAA;EAAA,EAzDsCQ,KAAK;EAAA;EAAA;AAAA"}},{"offset":{"line":9864,"column":0},"map":{"version":3,"names":["sap","ui","define","ClassSupport","Value","_dec","_class","_exports","defineUI5Class","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","MultiValue","_Value","apply","this","arguments","_proto","formatConditionValues","values","formatValue","internalValue","externalValueType","result","split","Array","isArray","map","value","call","getElementTypeName","filter","undefined","parseValue","externalValue","operator","format"],"sources":["MultiValue-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,kDAAO,CAAC,mCAAoC,mCAAoC,SAAUC,EAAcC,GAC7G,aAEA,IAAIC,EAAMC,EACV,IAAIC,EAAW,CAAC,EAChB,IAAIC,EAAiBL,EAAaK,eAClC,SAASC,EAAeC,EAAUC,GAAcD,EAASE,UAAYC,OAAOC,OAAOH,EAAWC,WAAYF,EAASE,UAAUG,YAAcL,EAAUM,EAAgBN,EAAUC,EAAa,CAC5L,SAASK,EAAgBC,EAAGC,GAAKF,EAAkBH,OAAOM,eAAiBN,OAAOM,eAAeC,OAAS,SAASJ,EAAgBC,EAAGC,GAAKD,EAAEI,UAAYH,EAAG,OAAOD,CAAG,EAAG,OAAOD,EAAgBC,EAAGC,EAAI,CACvM,IAAII,GAIJjB,EAAOG,EAAe,wCAAyCH,EAAKC,EAAsB,SAAUiB,GAClGd,EAAea,EAAYC,GAC3B,SAASD,IACP,OAAOC,EAAOC,MAAMC,KAAMC,YAAcD,IAC1C,CACAlB,EAAWe,EACX,IAAIK,EAASL,EAAWV,UAQxBe,EAAOC,sBAAwB,SAASA,EAAsBC,GAC5D,OAAOA,CACT,EAUAF,EAAOG,YAAc,SAASA,EAAYC,EAAeC,GACvD,IAAIC,EAASF,EACb,UAAWE,IAAW,SAAU,CAC9BA,EAASA,EAAOC,MAAM,IACxB,CACA,GAAIC,MAAMC,QAAQH,GAAS,CACzBA,EAASA,EAAOI,IAAIC,GAASf,EAAOX,UAAUkB,YAAYS,KAAKd,KAAMa,EAAOb,KAAKe,mBAAmBR,KAAqBS,OAAOH,GAASA,IAAUI,UACrJ,CACA,OAAOT,GAAU,EACnB,EAYAN,EAAOgB,WAAa,SAASA,EAAWC,EAAeZ,GACrD,IAAKY,EAAe,CAClBA,EAAgB,EAClB,CACA,OAAOA,EAAcP,IAAIC,IACvB,GAAIA,IAAUI,UAAW,CACvBJ,EAAQ,EACV,MAAO,IAAKH,MAAMC,QAAQE,GAAQ,CAChCA,EAAQ,CAACA,EACX,CACA,OAAOb,KAAKoB,SAASC,OAAO,CAC1BjB,OAAQS,GACR,EAEN,EACA,OAAOhB,CACT,CA/D0F,CA+DxFlB,KAAWE,GACbC,EAAWe,EACX,OAAOf,CACT,EAAG","sourceRoot":"filter/type"}},{"offset":{"line":9869,"column":0},"map":{"version":3,"names":["Range","defineUI5Class","getDefaultOperatorName","formatConditionValues","values","formatValue","internalValue","externalValueType","results","minValue","oFormatOptions","min","Number","MIN_SAFE_INTEGER","maxValue","max","MAX_SAFE_INTEGER","Value"],"sourceRoot":"filter/type","sources":["Range.ts"],"sourcesContent":["import { defineUI5Class } from \"sap/fe/core/helpers/ClassSupport\";\nimport Value from \"sap/fe/macros/filter/type/Value\";\nimport type SimpleType from \"sap/ui/model/SimpleType\";\n\n/**\n * Type used to extend SimpleType with hidden fields\n *\n * @typedef AugmentedSimpleType\n */\ntype AugmentedSimpleType = SimpleType & {\n\toFormatOptions?: any;\n};\n\n/**\n * Handle format/parse of range filter values.\n */\n// eslint-disable-next-line new-cap\n@defineUI5Class(\"sap.fe.macros.filter.type.Range\")\nexport default class Range extends Value {\n\t/**\n\t * Returns the default operator name for range filter values (\"BT\").\n\t *\n\t * @returns The default operator name\n\t * @protected\n\t */\n\tgetDefaultOperatorName(): string {\n\t\treturn \"BT\";\n\t}\n\n\t/**\n\t * Returns the unchanged values.\n\t *\n\t * @param values Input condition value\n\t * @returns Unchanged input condition value\n\t * @protected\n\t */\n\tformatConditionValues(values: string[] | string): string[] | string {\n\t\treturn values;\n\t}\n\n\t/**\n\t * Returns the string value parsed to the external value type.\n\t *\n\t * @param internalValue The internal string value to be formatted\n\t * @param externalValueType The external value type, e.g. int, float[], string, etc.\n\t * @returns The formatted value\n\t * @protected\n\t */\n\tformatValue(internalValue: any | undefined, externalValueType: string | undefined): any {\n\t\tlet results = super.formatValue(internalValue, externalValueType);\n\n\t\tif (!results) {\n\t\t\tconst minValue = (this as AugmentedSimpleType).oFormatOptions.min || Number.MIN_SAFE_INTEGER,\n\t\t\t\tmaxValue = (this as AugmentedSimpleType).oFormatOptions.max || Number.MAX_SAFE_INTEGER;\n\n\t\t\tresults = [minValue, maxValue];\n\t\t}\n\n\t\treturn results;\n\t}\n}\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;MAkBqBA,KAAK;EAL1B;AACA;AACA;EACA;EAAA,OACCC,cAAc,CAAC,iCAAiC,CAAC;IAAA;IAAA;MAAA;IAAA;IAAA;IAAA;IAEjD;AACD;AACA;AACA;AACA;AACA;IALC,OAMAC,sBAAsB,GAAtB,kCAAiC;MAChC,OAAO,IAAI;IACZ;;IAEA;AACD;AACA;AACA;AACA;AACA;AACA,OANC;IAAA,OAOAC,qBAAqB,GAArB,+BAAsBC,MAAyB,EAAqB;MACnE,OAAOA,MAAM;IACd;;IAEA;AACD;AACA;AACA;AACA;AACA;AACA;AACA,OAPC;IAAA,OAQAC,WAAW,GAAX,qBAAYC,aAA8B,EAAEC,iBAAqC,EAAO;MACvF,IAAIC,OAAO,oBAASH,WAAW,YAACC,aAAa,EAAEC,iBAAiB,CAAC;MAEjE,IAAI,CAACC,OAAO,EAAE;QACb,MAAMC,QAAQ,GAAI,IAAI,CAAyBC,cAAc,CAACC,GAAG,IAAIC,MAAM,CAACC,gBAAgB;UAC3FC,QAAQ,GAAI,IAAI,CAAyBJ,cAAc,CAACK,GAAG,IAAIH,MAAM,CAACI,gBAAgB;QAEvFR,OAAO,GAAG,CAACC,QAAQ,EAAEK,QAAQ,CAAC;MAC/B;MAEA,OAAON,OAAO;IACf,CAAC;IAAA;EAAA,EAzCiCS,KAAK;EAAA;EAAA;AAAA"}},{"offset":{"line":9936,"column":0},"map":{"version":3,"names":["sap","ui","define","ClassSupport","Value","_dec","_class","_exports","defineUI5Class","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","Range","_Value","apply","this","arguments","_proto","getDefaultOperatorName","formatConditionValues","values","formatValue","internalValue","externalValueType","results","call","minValue","oFormatOptions","min","Number","MIN_SAFE_INTEGER","maxValue","max","MAX_SAFE_INTEGER"],"sources":["Range-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,6CAAO,CAAC,mCAAoC,mCAAoC,SAAUC,EAAcC,GAC7G,aAEA,IAAIC,EAAMC,EACV,IAAIC,EAAW,CAAC,EAChB,IAAIC,EAAiBL,EAAaK,eAClC,SAASC,EAAeC,EAAUC,GAAcD,EAASE,UAAYC,OAAOC,OAAOH,EAAWC,WAAYF,EAASE,UAAUG,YAAcL,EAAUM,EAAgBN,EAAUC,EAAa,CAC5L,SAASK,EAAgBC,EAAGC,GAAKF,EAAkBH,OAAOM,eAAiBN,OAAOM,eAAeC,OAAS,SAASJ,EAAgBC,EAAGC,GAAKD,EAAEI,UAAYH,EAAG,OAAOD,CAAG,EAAG,OAAOD,EAAgBC,EAAGC,EAAI,CACvM,IAAII,GAKJjB,EAAOG,EAAe,mCAAoCH,EAAKC,EAAsB,SAAUiB,GAC7Fd,EAAea,EAAOC,GACtB,SAASD,IACP,OAAOC,EAAOC,MAAMC,KAAMC,YAAcD,IAC1C,CACAlB,EAAWe,EACX,IAAIK,EAASL,EAAMV,UAOnBe,EAAOC,uBAAyB,SAASA,IACvC,MAAO,IACT,EASAD,EAAOE,sBAAwB,SAASA,EAAsBC,GAC5D,OAAOA,CACT,EAUAH,EAAOI,YAAc,SAASA,EAAYC,EAAeC,GACvD,IAAIC,EAAUX,EAAOX,UAAUmB,YAAYI,KAAKV,KAAMO,EAAeC,GACrE,IAAKC,EAAS,CACZ,MAAME,EAAWX,KAAKY,eAAeC,KAAOC,OAAOC,iBACjDC,EAAWhB,KAAKY,eAAeK,KAAOH,OAAOI,iBAC/CT,EAAU,CAACE,EAAUK,EACvB,CACA,OAAOP,CACT,EACA,OAAOZ,CACT,CA9CqF,CA8CnFlB,KAAWE,GACbC,EAAWe,EACX,OAAOf,CACT,EAAG","sourceRoot":"filter/type"}},{"offset":{"line":9941,"column":0},"map":{"version":3,"names":["Value","defineUI5Class","formatOptions","constraints","operatorName","operator","getDefaultOperatorName","FilterOperatorUtil","getOperator","includes","_registerCustomOperator","handlerFileName","substring","lastIndexOf","replace","methodName","sap","ui","require","customOperatorHandler","Operator","filterOperator","tokenFormat","name","valueTypes","tokenParse","format","value","formatConditionValues","values","parse","text","type","displayFormat","defaultOperator","Error","prototype","apply","getModelFilter","condition","call","addOperator","_isMultiValueOperator","filter","valueType","OPERATOR_VALUE_TYPE_STATIC","length","hasCustomOperator","_stringToExternal","externalValueType","externalValue","externalType","_getTypeInstance","_isArrayType","Array","isArray","map","valueElement","parseValue","INTERNAL_VALUE_TYPE","targetType","endsWith","_externalToString","formatValue","typeName","getElementTypeName","StringType","IntegerType","FloatType","DateType","BooleanType","Log","error","getEQOperator","undefined","internalValue","isMultiValueOperator","internalType","FieldDisplay","validated","validateValue","SimpleType"],"sourceRoot":"filter/type","sources":["Value.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport { defineUI5Class } from \"sap/fe/core/helpers/ClassSupport\";\nimport type { ConditionObject } from \"sap/ui/mdc/condition/Condition\";\nimport FilterOperatorUtil from \"sap/ui/mdc/condition/FilterOperatorUtil\";\nimport Operator from \"sap/ui/mdc/condition/Operator\";\nimport FieldDisplay from \"sap/ui/mdc/enum/FieldDisplay\";\nimport type Filter from \"sap/ui/model/Filter\";\nimport SimpleType from \"sap/ui/model/SimpleType\";\nimport type Type from \"sap/ui/model/Type\";\nimport BooleanType from \"sap/ui/model/type/Boolean\";\nimport DateType from \"sap/ui/model/type/Date\";\nimport FloatType from \"sap/ui/model/type/Float\";\nimport IntegerType from \"sap/ui/model/type/Integer\";\nimport StringType from \"sap/ui/model/type/String\";\n\n/**\n * Type used to extend the MDC operator type with hidden fields\n *\n * @typedef AugmentedOperator\n */\ntype AugmentedOperator = Operator & {\n\tname: string;\n\tvalueTypes: string[];\n};\n\n/**\n * Handle format/parse single filter value.\n */\n@defineUI5Class(\"sap.fe.macros.filter.type.Value\")\nexport default class Value extends SimpleType {\n\tprivate static readonly INTERNAL_VALUE_TYPE = \"string\";\n\tprivate static readonly OPERATOR_VALUE_TYPE_STATIC = \"static\";\n\tprotected operator: AugmentedOperator;\n\n\t/**\n\t * Creates a new value type instance with the given parameters.\n\t *\n\t * @param formatOptions Format options for this value type\n\t * @param formatOptions.operator The name of a (possibly custom) operator to use\n\t * @param constraints Constraints for this value type\n\t * @protected\n\t */\n\tconstructor(formatOptions: { operator?: string }, constraints: object) {\n\t\tsuper(formatOptions, constraints);\n\t\tconst operatorName = formatOptions?.operator || this.getDefaultOperatorName();\n\t\tthis.operator = FilterOperatorUtil.getOperator(operatorName) as AugmentedOperator;\n\n\t\tif (!this.operator && operatorName.includes(\".\")) {\n\t\t\tthis._registerCustomOperator(operatorName);\n\t\t}\n\t}\n\n\t/**\n\t * Registers a custom binding operator.\n\t *\n\t * @param operatorName The binding operator name\n\t * @private\n\t */\n\tprivate _registerCustomOperator(operatorName: string): void {\n\t\tconst handlerFileName = operatorName.substring(0, operatorName.lastIndexOf(\".\")).replace(/\\./g, \"/\"),\n\t\t\tmethodName = operatorName.substring(operatorName.lastIndexOf(\".\") + 1);\n\n\t\tsap.ui.require([handlerFileName], (customOperatorHandler: { [key: string]: (value: string | string[]) => Filter }) => {\n\t\t\tif (!customOperatorHandler) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.operator = new Operator({\n\t\t\t\tfilterOperator: \"\",\n\t\t\t\ttokenFormat: \"\",\n\t\t\t\tname: operatorName,\n\t\t\t\tvalueTypes: [\"self\"],\n\t\t\t\ttokenParse: \"^(.*)$\",\n\t\t\t\tformat: (value: ConditionObject): string | string[] => {\n\t\t\t\t\treturn this.formatConditionValues(value.values as string[]);\n\t\t\t\t},\n\t\t\t\tparse: function (text: ConditionObject, type: Type, displayFormat: FieldDisplay, defaultOperator: boolean) {\n\t\t\t\t\tif (typeof text === \"object\") {\n\t\t\t\t\t\tif (text.operator !== operatorName) {\n\t\t\t\t\t\t\tthrow Error(\"not matching operator\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn text.values;\n\t\t\t\t\t}\n\t\t\t\t\treturn Operator.prototype.parse.apply(this, [text, type, displayFormat, defaultOperator]);\n\t\t\t\t},\n\t\t\t\tgetModelFilter: (condition: ConditionObject): Filter => {\n\t\t\t\t\treturn customOperatorHandler[methodName].call(customOperatorHandler, this.formatConditionValues(condition.values));\n\t\t\t\t}\n\t\t\t}) as AugmentedOperator;\n\t\t\tFilterOperatorUtil.addOperator(this.operator);\n\t\t});\n\t}\n\n\t/**\n\t * Returns whether the specified operator is a multi-value operator.\n\t *\n\t * @param operator The binding operator\n\t * @returns `true`, if multi-value operator (`false` otherwise)\n\t * @private\n\t */\n\tprivate _isMultiValueOperator(operator: AugmentedOperator): boolean {\n\t\treturn (\n\t\t\toperator.valueTypes.filter(function (valueType: string) {\n\t\t\t\treturn !!valueType && valueType !== Value.OPERATOR_VALUE_TYPE_STATIC;\n\t\t\t}).length > 1\n\t\t);\n\t}\n\n\t/**\n\t * Returns whether the specified operator is a custom operator.\n\t *\n\t * @returns `true`, if custom operator (`false` otherwise)\n\t * @private\n\t */\n\tprivate hasCustomOperator(): boolean {\n\t\treturn this.operator.name.includes(\".\");\n\t}\n\n\t/**\n\t * Parses the internal string value to the external value of type 'externalValueType'.\n\t *\n\t * @param value The internal string value to be parsed\n\t * @param externalValueType The external value type, e.g. int, float[], string, etc.\n\t * @returns The parsed value\n\t * @private\n\t */\n\tprivate _stringToExternal(value: string | string[], externalValueType: string | undefined): string[] {\n\t\tlet externalValue;\n\t\tconst externalType = this._getTypeInstance(externalValueType);\n\n\t\tif (externalValueType && Value._isArrayType(externalValueType)) {\n\t\t\tif (!Array.isArray(value)) {\n\t\t\t\tvalue = [value];\n\t\t\t}\n\t\t\texternalValue = value.map((valueElement: string) => {\n\t\t\t\treturn externalType ? externalType.parseValue(valueElement, Value.INTERNAL_VALUE_TYPE) : valueElement;\n\t\t\t});\n\t\t} else {\n\t\t\texternalValue = externalType ? externalType.parseValue(value as string, Value.INTERNAL_VALUE_TYPE) : value;\n\t\t}\n\n\t\treturn externalValue;\n\t}\n\n\t/**\n\t * Returns whether target type is an array.\n\t *\n\t * @param targetType The target type name\n\t * @returns `true`, if array type (`false` otherwise)\n\t * @private\n\t */\n\tprivate static _isArrayType(targetType: string): boolean {\n\t\tif (!targetType) {\n\t\t\treturn false;\n\t\t}\n\t\treturn targetType === \"array\" || targetType.endsWith(\"[]\");\n\t}\n\n\t/**\n\t * Returns the external value formatted as the internal string value.\n\t *\n\t * @param externalValue The value to be parsed\n\t * @param externalValueType The external value type, e.g. int, float[], string, etc.\n\t * @returns The formatted value\n\t * @private\n\t */\n\tprivate _externalToString(externalValue: string | string[], externalValueType: string | undefined): string {\n\t\tlet value;\n\t\tconst externalType = this._getTypeInstance(externalValueType);\n\n\t\tif (externalValueType && Value._isArrayType(externalValueType)) {\n\t\t\tif (!Array.isArray(externalValue)) {\n\t\t\t\texternalValue = [externalValue];\n\t\t\t}\n\t\t\tvalue = externalValue.map((valueElement: string) => {\n\t\t\t\treturn externalType ? externalType.formatValue(valueElement, Value.INTERNAL_VALUE_TYPE) : valueElement;\n\t\t\t});\n\t\t} else {\n\t\t\tvalue = externalType ? externalType.formatValue(externalValue as string, Value.INTERNAL_VALUE_TYPE) : externalValue;\n\t\t}\n\n\t\treturn value;\n\t}\n\n\t/**\n\t * Retrieves the default type instance for given type name.\n\t *\n\t * @param typeName The name of the type\n\t * @returns The type instance\n\t * @private\n\t */\n\tprivate _getTypeInstance(typeName: string | undefined): SimpleType {\n\t\ttypeName = this.getElementTypeName(typeName) || typeName;\n\n\t\tswitch (typeName) {\n\t\t\tcase \"string\":\n\t\t\t\treturn new StringType();\n\t\t\tcase \"number\":\n\t\t\tcase \"int\":\n\t\t\t\treturn new IntegerType();\n\t\t\tcase \"float\":\n\t\t\t\treturn new FloatType();\n\t\t\tcase \"date\":\n\t\t\t\treturn new DateType();\n\t\t\tcase \"boolean\":\n\t\t\t\treturn new BooleanType();\n\t\t\tdefault:\n\t\t\t\tLog.error(\"Unexpected filter type\");\n\t\t\t\tthrow new Error(\"Unexpected filter type\");\n\t\t}\n\t}\n\n\t/**\n\t * Returns the default operator name (\"EQ\").\n\t * Should be overridden on demand.\n\t *\n\t * @returns The default operator name\n\t * @protected\n\t */\n\tgetDefaultOperatorName(): string {\n\t\treturn (FilterOperatorUtil.getEQOperator() as AugmentedOperator).name;\n\t}\n\n\t/**\n\t * Returns first value of array or input.\n\t *\n\t * @param values Input condition value\n\t * @returns Unchanged input condition value\n\t * @protected\n\t */\n\tformatConditionValues(values: string[] | string): string[] | string {\n\t\treturn Array.isArray(values) && values.length ? values[0] : (values as string);\n\t}\n\n\t/**\n\t * Returns the element type name.\n\t *\n\t * @param typeName The actual type name\n\t * @returns The type of its elements\n\t * @protected\n\t */\n\tgetElementTypeName(typeName: string | undefined): string | undefined {\n\t\tif (typeName?.endsWith(\"[]\")) {\n\t\t\treturn typeName.substring(0, typeName.length - 2);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\t/**\n\t * Returns the string value parsed to the external value type 'this.operator'.\n\t *\n\t * @param internalValue The internal string value to be formatted\n\t * @param externalValueType The external value type, e.g. int, float[], string, etc.\n\t * @returns The formatted value\n\t * @protected\n\t */\n\tformatValue(internalValue: any | undefined, externalValueType: string | undefined): any {\n\t\tif (!internalValue) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst isMultiValueOperator = this._isMultiValueOperator(this.operator),\n\t\t\tinternalType = this._getTypeInstance(Value.INTERNAL_VALUE_TYPE);\n\n\t\t//  from internal model string with operator\n\t\tconst values = this.operator.parse(internalValue || \"\", internalType, FieldDisplay.Value, false);\n\t\tconst value = !isMultiValueOperator && Array.isArray(values) ? values[0] : values;\n\n\t\treturn this._stringToExternal(value, externalValueType); // The value bound to a custom filter\n\t}\n\n\t/**\n\t * Returns the value parsed to the internal string value.\n\t *\n\t * @param externalValue The value to be parsed\n\t * @param externalValueType The external value type, e.g. int, float[], string, etc.\n\t * @returns The parsed value\n\t * @protected\n\t */\n\tparseValue(externalValue: any | undefined, externalValueType: string | undefined): any {\n\t\tif (!externalValue) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst isMultiValueOperator = this._isMultiValueOperator(this.operator),\n\t\t\texternalType = this._getTypeInstance(externalValueType);\n\n\t\tconst value = this._externalToString(externalValue, externalValueType);\n\n\t\t// Format to internal model string with operator\n\t\tconst values = isMultiValueOperator ? value : [value];\n\n\t\tif (this.hasCustomOperator()) {\n\t\t\t// Return a complex object while parsing the bound value in sap.ui.model.PropertyBinding.js#_externalToRaw()\n\t\t\treturn {\n\t\t\t\toperator: this.operator.name,\n\t\t\t\tvalues: [this.operator.format({ values: values } as ConditionObject, externalType)],\n\t\t\t\tvalidated: undefined\n\t\t\t};\n\t\t}\n\t\t// Return a simple string value to be stored in the internal 'filterValues' model\n\t\treturn this.operator.format({ values: values } as ConditionObject, externalType);\n\t}\n\n\t/**\n\t * Validates whether the given value in model representation is valid.\n\t *\n\t * @param externalValue The value to be validated\n\t * @protected\n\t */\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\tvalidateValue(externalValue: unknown): void {\n\t\t/* Do Nothing */\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":10238,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","ClassSupport","FilterOperatorUtil","Operator","FieldDisplay","SimpleType","BooleanType","DateType","FloatType","IntegerType","StringType","_dec","_class","_class2","_exports","defineUI5Class","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","Value","_SimpleType","formatOptions","constraints","_this","call","this","operatorName","operator","getDefaultOperatorName","getOperator","includes","_registerCustomOperator","_proto","handlerFileName","substring","lastIndexOf","replace","methodName","require","customOperatorHandler","filterOperator","tokenFormat","name","valueTypes","tokenParse","format","value","formatConditionValues","values","parse","text","type","displayFormat","defaultOperator","Error","apply","getModelFilter","condition","addOperator","_isMultiValueOperator","filter","valueType","OPERATOR_VALUE_TYPE_STATIC","length","hasCustomOperator","_stringToExternal","externalValueType","externalValue","externalType","_getTypeInstance","_isArrayType","Array","isArray","map","valueElement","parseValue","INTERNAL_VALUE_TYPE","targetType","endsWith","_externalToString","formatValue","typeName","getElementTypeName","error","getEQOperator","undefined","internalValue","isMultiValueOperator","internalType","validated","validateValue"],"sources":["Value-dbg.js"],"mappings":"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","sourceRoot":"filter/type"}},{"offset":{"line":10243,"column":0},"map":{"version":3,"names":["FilterBarAPI","defineUI5Class","property","type","expectedAnnotations","expectedTypes","defaultValue","aggregation","multiple","event","xmlEventHandler","handleSearch","oEvent","oFilterBar","getSource","oEventParameters","getParameters","oConditions","getFilterConditions","eventParameters","_prepareEventParameters","fireInternalSearch","merge","conditions","fireSearch","handleFilterChanged","fireInternalFilterChanged","fireFilterChanged","filters","search","FilterUtils","getFilters","setFilterValues","sConditionPath","sOperator","vValues","arguments","length","content","getActiveFiltersText","getAssignedFiltersText","filtersText","MacroAPI"],"sourceRoot":"filterBar","sources":["FilterBarAPI.ts"],"sourcesContent":["import merge from \"sap/base/util/merge\";\nimport { aggregation, defineUI5Class, event, property, xmlEventHandler } from \"sap/fe/core/helpers/ClassSupport\";\nimport FilterUtils from \"sap/fe/macros/filter/FilterUtils\";\nimport type UI5Event from \"sap/ui/base/Event\";\nimport type FilterBar from \"sap/ui/mdc/FilterBar\";\nimport MacroAPI from \"../MacroAPI\";\n\n/**\n * Definition of a custom filter to be used inside the FilterBar.\n *\n * The template for the FilterField has to be provided as the default aggregation\n *\n * @alias sap.fe.macros.FilterField\n * @public\n * @experimental\n */\nexport type FilterField = {\n\t/**\n\t * The property name of the FilterField\n\t *\n\t * @public\n\t */\n\tkey: string;\n\t/**\n\t * The text that will be displayed for this FilterField\n\t *\n\t * @public\n\t */\n\tlabel: string;\n\t/**\n\t * Reference to the key of another filter already displayed in the table to properly place this one\n\t *\n\t * @public\n\t */\n\tanchor?: string;\n\t/**\n\t * Defines where this filter should be placed relative to the defined anchor\n\t *\n\t * Allowed values are `Before` and `After`\n\t *\n\t * @public\n\t */\n\tplacement?: string;\n\t/**\n\t * If set, possible errors that occur during the search will be displayed in a message box.\n\t *\n\t * @public\n\t */\n\tshowMessages?: boolean;\n\n\tslotName?: string;\n};\n\n/**\n * Building block for creating a FilterBar based on the metadata provided by OData V4.\n * <br>\n * Usually, a SelectionFields annotation is expected.\n *\n *\n * Usage example:\n * <pre>\n * &lt;macro:FilterBar id=\"MyFilterBar\" metaPath=\"@com.sap.vocabularies.UI.v1.SelectionFields\" /&gt;\n * </pre>\n *\n * @alias sap.fe.macros.FilterBar\n * @public\n */\n@defineUI5Class(\"sap.fe.macros.filterBar.FilterBarAPI\")\nclass FilterBarAPI extends MacroAPI {\n\t/**\n\t * The identifier of the FilterBar control.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\tid!: string;\n\n\t/**\n\t * Defines the relative path of the property in the metamodel, based on the current contextPath.\n\t *\n\t * @public\n\t */\n\t@property({\n\t\ttype: \"string\",\n\t\texpectedAnnotations: [\"com.sap.vocabularies.UI.v1.SelectionFields\"],\n\t\texpectedTypes: [\"EntitySet\", \"EntityType\"]\n\t})\n\tmetaPath!: string;\n\n\t/**\n\t * If true, the search is triggered automatically when a filter value is changed.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean\", defaultValue: false })\n\tliveMode?: boolean;\n\t/**\n\t * Parameter which sets the visibility of the FilterBar building block\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean\", defaultValue: true })\n\tvisible?: boolean;\n\n\t/**\n\t * Displays possible errors during the search in a message box\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean\", defaultValue: true })\n\tshowMessages?: boolean;\n\n\t/**\n\t * Handles the visibility of the 'Clear' button on the FilterBar.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean\", defaultValue: false })\n\tshowClearButton?: boolean;\n\n\t/**\n\t * Aggregate filter fields of the FilterBar building block\n\t *\n\t * @public\n\t */\n\t@aggregation({ type: \"sap.fe.macros.FilterField\", multiple: true })\n\tfilterFields?: FilterField[];\n\n\t/**\n\t * This event is fired when the 'Go' button is pressed or after a condition change.\n\t *\n\t * @public\n\t */\n\t@event()\n\tsearch!: Function;\n\n\t/**\n\t * This event is fired when the 'Go' button is pressed or after a condition change. This is only internally used by sap.fe (Fiori elements) and\n\t * exposes parameters from internal MDC-FilterBar search event\n\t *\n\t * @private\n\t */\n\t@event()\n\tinternalSearch!: Function;\n\n\t/**\n\t * This event is fired after either a filter value or the visibility of a filter item has been changed. The event contains conditions that will be used as filters.\n\t *\n\t * @public\n\t */\n\t@event()\n\tfilterChanged!: Function;\n\n\t/**\n\t * This event is fired when the 'Clear' button is pressed. This is only possible when the 'Clear' button is enabled.\n\t *\n\t * @public\n\t */\n\t@event()\n\tafterClear!: Function;\n\n\t/**\n\t * This event is fired after either a filter value or the visibility of a filter item has been changed. The event contains conditions that will be used as filters.\n\t * This is used internally only by sap.fe (Fiori Elements). This exposes parameters from the MDC-FilterBar filterChanged event that is used by sap.fe in some cases.\n\t *\n\t * @private\n\t */\n\t@event()\n\tinternalFilterChanged!: Function;\n\n\t/**\n\t * An event that is triggered when the FilterBar State changes.\n\t *\n\t * You can set this to store the state of the filter bar in the app state.\n\t *\n\t * @private\n\t */\n\t@event()\n\tstateChange!: Function;\n\n\t@xmlEventHandler()\n\thandleSearch(oEvent: UI5Event) {\n\t\tconst oFilterBar = oEvent.getSource() as FilterBar;\n\t\tconst oEventParameters = oEvent.getParameters();\n\t\tif (oFilterBar) {\n\t\t\tconst oConditions = oFilterBar.getFilterConditions();\n\t\t\tconst eventParameters: object = this._prepareEventParameters(oFilterBar);\n\t\t\t(this as any).fireInternalSearch(merge({ conditions: oConditions }, oEventParameters));\n\t\t\t(this as any).fireSearch(eventParameters);\n\t\t}\n\t}\n\n\t@xmlEventHandler()\n\thandleFilterChanged(oEvent: UI5Event) {\n\t\tconst oFilterBar = oEvent.getSource() as FilterBar;\n\t\tconst oEventParameters = oEvent.getParameters();\n\t\tif (oFilterBar) {\n\t\t\tconst oConditions = oFilterBar.getFilterConditions();\n\t\t\tconst eventParameters: object = this._prepareEventParameters(oFilterBar);\n\t\t\t(this as any).fireInternalFilterChanged(merge({ conditions: oConditions }, oEventParameters));\n\t\t\t(this as any).fireFilterChanged(eventParameters);\n\t\t}\n\t}\n\n\t_prepareEventParameters(oFilterBar: FilterBar) {\n\t\tconst { filters, search } = FilterUtils.getFilters(oFilterBar);\n\n\t\treturn { filters, search };\n\t}\n\n\t/**\n\t * Set the filter values for the given property in the filter bar.\n\t * The filter values can be either a single value or an array of values.\n\t * Each filter value must be represented as a primitive value.\n\t *\n\t * @param sConditionPath The path to the property as a condition path\n\t * @param [sOperator] The operator to be used (optional) - if not set, the default operator (EQ) will be used\n\t * @param vValues The values to be applied\n\t * @returns A promise for asynchronous handling\n\t * @public\n\t */\n\tsetFilterValues(\n\t\tsConditionPath: string,\n\t\tsOperator: string | undefined,\n\t\tvValues?: undefined | string | number | boolean | string[] | number[] | boolean[]\n\t) {\n\t\tif (arguments.length === 2) {\n\t\t\tvValues = sOperator;\n\t\t\treturn FilterUtils.setFilterValues(this.content, sConditionPath, vValues);\n\t\t}\n\t\treturn FilterUtils.setFilterValues(this.content, sConditionPath, sOperator, vValues);\n\t}\n\n\t/**\n\t * Get the Active Filters Text Summary for the filter bar.\n\t *\n\t * @returns Active filters summary as text\n\t * @public\n\t */\n\tgetActiveFiltersText() {\n\t\tconst oFilterBar = this.content as FilterBar;\n\t\treturn oFilterBar?.getAssignedFiltersText()?.filtersText || \"\";\n\t}\n\n\t/**\n\t * Provides all the filters that are currently active\n\t * along with the search expression.\n\t *\n\t * @returns {{filters: sap.ui.model.Filter[]|undefined, search: string|undefined}} An array of active filters and the search expression.\n\t * @public\n\t */\n\tgetFilters() {\n\t\treturn FilterUtils.getFilters(this.content as FilterBar);\n\t}\n}\n\nexport default FilterBarAPI;\n"],"mappings":"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"}},{"offset":{"line":10466,"column":0},"map":{"version":3,"names":["sap","ui","define","merge","ClassSupport","FilterUtils","MacroAPI","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","xmlEventHandler","property","event","defineUI5Class","aggregation","_initializerDefineProperty","target","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","FilterBarAPI","type","expectedAnnotations","expectedTypes","defaultValue","multiple","_MacroAPI","_this","_len","arguments","length","args","Array","_key","this","_proto","handleSearch","oEvent","oFilterBar","getSource","oEventParameters","getParameters","oConditions","getFilterConditions","eventParameters","_prepareEventParameters","fireInternalSearch","conditions","fireSearch","handleFilterChanged","fireInternalFilterChanged","fireFilterChanged","filters","search","getFilters","setFilterValues","sConditionPath","sOperator","vValues","content","getActiveFiltersText","_oFilterBar$getAssign","getAssignedFiltersText","filtersText","getOwnPropertyDescriptor"],"sources":["FilterBarAPI-dbg.js"],"mappings":"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","sourceRoot":"filterBar"}},{"offset":{"line":10471,"column":0},"map":{"version":3,"names":["setCustomFilterFieldProperties","childFilterField","aggregationObject","slotName","key","replace","label","getAttribute","required","FilterBarBuildingBlock","defineBuildingBlock","name","namespace","publicNamespace","blockAttribute","type","isPublic","defaultValue","blockEvent","blockAggregation","hasVirtualNode","processAggregations","oProps","configuration","mSettings","checkIfCollaborationDraftSupported","oMetaModel","ModelHelper","isCollaborationDraftSupported","isDraftCollaborative","getEntityTypePath","metaPathParts","endsWith","getSearch","hideBasicSearch","xml","generate","id","processSelectionFields","draftEditState","showDraftEditState","_valueHelps","_filterFields","push","Array","isArray","selectionFields","getObject","forEach","selectionField","selectionFieldIdx","availability","setFilterFieldsAndValueHelps","length","template","undefined","pushFilterFieldsAndValueHelps","CommonHelper","getNavigationPath","annotationPath","_getContextPathForFilterField","_internalContextPath","useSemanticDateRange","stringifyCustomData","settings","visualFilter","oContext","contextPath","oMetaPathContext","metaPath","Log","error","sMetaPath","getPath","entityTypePath","split","sEntitySetPath","getEntitySetPath","getModel","createBindingContext","sObjectPath","oExtraParams","filterFields","oVisualizationObjectPath","getInvolvedDataModelObjects","oConverterContext","getConverterContext","propertyInfo","getSelectionFields","sPropertyInfo","oSelectionFields","TemplateModel","oEntityType","getEntityType","oSelectionVariant","getSelectionVariant","oEntitySetContext","getContext","oFilterConditions","getFilterConditions","selectionVariant","filterConditions","_processPropertyInfos","targetDataModelObject","targetObject","annotations","Common","DraftRoot","DraftNode","_applyIdToContent","_apiId","_contentId","getContentId","oSearchRestrictionAnnotation","CommonUtils","getSearchRestrictions","Boolean","Searchable","sMacroId","aParameterFields","sFetchedProperties","aFetchedProperties","JSON","parse","propInfo","isParameter","path","ResourceModel","getText","stringify","_parameters","filterBarContextPath","annoPath","substring","lastIndexOf","getTemplate","internalContextPath","filterDelegate","filterBarDelegate","search","filterChanged","afterClear","internalSearch","internalFilterChanged","stateChange","liveMode","variantBackreference","showAdaptFiltersButton","showClearButton","p13nMode","suspendSelection","showMessages","toggleControlId","initialLayout","visible","BuildingBlockBase"],"sourceRoot":"filterBar","sources":["FilterBarBuildingBlock.ts"],"sourcesContent":["/**\n *\n * @classdesc\n * Building block for creating a FilterBar based on the metadata provided by OData V4.\n *\n *\n * Usage example:\n * <pre>\n * &lt;macro:FilterBar\n *   id=\"SomeID\"\n *   showAdaptFiltersButton=\"true\"\n *   p13nMode=[\"Item\",\"Value\"]\n *   listBindingNames = \"sap.fe.tableBinding\"\n *   liveMode=\"true\"\n *   search=\".handlers.onSearch\"\n *   filterChanged=\".handlers.onFiltersChanged\"\n * /&gt;\n * </pre>\n *\n * Building block for creating a FilterBar based on the metadata provided by OData V4.\n * @class sap.fe.macros.FilterBar\n * @hideconstructor\n * @public\n * @since 1.94.0\n */\n\nimport {\n\tblockAggregation,\n\tblockAttribute,\n\tblockEvent,\n\tBuildingBlockBase,\n\tdefineBuildingBlock\n} from \"sap/fe/core/buildingBlocks/BuildingBlock\";\n\nimport { SelectionFields } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockRuntime\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport { getSelectionVariant } from \"sap/fe/core/converters/controls/Common/DataVisualization\";\nimport { getSelectionFields } from \"sap/fe/core/converters/controls/ListReport/FilterBar\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type { PropertiesOf } from \"sap/fe/core/helpers/ClassSupport\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport TemplateModel from \"sap/fe/core/TemplateModel\";\nimport { FilterConditions, getFilterConditions } from \"sap/fe/core/templating/FilterHelper\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport { FilterBarP13nMode } from \"sap/ui/mdc/library\";\nimport Context from \"sap/ui/model/Context\";\nimport ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport { V4Context } from \"types/extension_types\";\nimport { PropertyInfo } from \"../DelegateUtil\";\nimport ResourceModel from \"../ResourceModel\";\nimport { FilterField } from \"./FilterBarAPI\";\n\nconst setCustomFilterFieldProperties = function (childFilterField: Element, aggregationObject: any): FilterField {\n\taggregationObject.slotName = aggregationObject.key;\n\taggregationObject.key = aggregationObject.key.replace(\"InlineXML_\", \"\");\n\taggregationObject.label = childFilterField.getAttribute(\"label\");\n\taggregationObject.required = childFilterField.getAttribute(\"required\") === \"true\";\n\treturn aggregationObject;\n};\n\n@defineBuildingBlock({\n\tname: \"FilterBar\",\n\tnamespace: \"sap.fe.macros.internal\",\n\tpublicNamespace: \"sap.fe.macros\"\n})\nexport default class FilterBarBuildingBlock extends BuildingBlockBase {\n\t/**\n\t * ID of the FilterBar\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tisPublic: true\n\t})\n\tid!: string;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\tisPublic: true\n\t})\n\tvisible!: string;\n\n\t/**\n\t * selectionFields to be displayed\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\"\n\t})\n\tselectionFields!: SelectionFields;\n\n\t@blockAttribute({ type: \"string\" })\n\tfilterBarDelegate?: string;\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\tisPublic: true\n\t})\n\tmetaPath!: V4Context;\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\tisPublic: true\n\t})\n\tcontextPath!: Context;\n\n\t/**\n\t * Displays possible errors during the search in a message box\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\tdefaultValue: false,\n\t\tisPublic: true\n\t})\n\tshowMessages!: boolean;\n\n\t/**\n\t * ID of the assigned variant management\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tvariantBackreference!: string | undefined;\n\n\t/**\n\t * Don't show the basic search field\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\thideBasicSearch!: boolean;\n\n\t/**\n\t * Enables the fallback to show all fields of the EntityType as filter fields if com.sap.vocabularies.UI.v1.SelectionFields are not present\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\tdefaultValue: false\n\t})\n\tenableFallback!: boolean;\n\n\t/**\n\t * Handles visibility of the 'Adapt Filters' button on the FilterBar\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\tdefaultValue: true\n\t})\n\tshowAdaptFiltersButton!: boolean;\n\n\t/**\n\t * Specifies the personalization options for the filter bar.\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.mdc.FilterBarP13nMode[]\",\n\t\tdefaultValue: \"Item,Value\"\n\t})\n\tp13nMode!: FilterBarP13nMode;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpropertyInfo!: string;\n\n\t/**\n\t * Specifies the Sematic Date Range option for the filter bar.\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\tdefaultValue: true\n\t})\n\tuseSemanticDateRange!: boolean;\n\n\t/**\n\t * If set the search will be automatically triggered, when a filter value was changed.\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\tdefaultValue: false,\n\t\tisPublic: true\n\t})\n\tliveMode!: boolean;\n\n\t/**\n\t * Filter conditions to be applied to the filter bar\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\trequired: false\n\t})\n\tfilterConditions!: Record<string, FilterConditions[]>;\n\n\t/**\n\t * If set to <code>true</code>, all search requests are ignored. Once it has been set to <code>false</code>,\n\t * a search is triggered immediately if one or more search requests have been triggered in the meantime\n\t * but were ignored based on the setting.\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\tdefaultValue: false\n\t})\n\tsuspendSelection!: boolean;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\tdefaultValue: false\n\t})\n\tshowDraftEditState!: boolean;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\tdefaultValue: false\n\t})\n\tisDraftCollaborative!: boolean;\n\n\t/**\n\t * Id of control that will allow for switching between normal and visual filter\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\ttoggleControlId!: string;\n\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tdefaultValue: \"compact\"\n\t})\n\tinitialLayout!: string;\n\n\t/**\n\t * Handles the visibility of the 'Clear' button on the FilterBar.\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\tdefaultValue: false,\n\t\tisPublic: true\n\t})\n\tshowClearButton!: boolean;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\tdefaultValue: false\n\t})\n\t_applyIdToContent!: boolean;\n\n\t/**\n\t * Temporary workaround only\n\t * path to contextPath to be used by child filterfields\n\t */\n\t_internalContextPath!: V4Context;\n\n\t_parameters: string | undefined;\n\n\t/**\n\t * Event handler to react to the search event of the FilterBar\n\t */\n\t@blockEvent()\n\tsearch!: string;\n\n\t/**\n\t * Event handler to react to the filterChange event of the FilterBar\n\t */\n\t@blockEvent()\n\tfilterChanged!: string;\n\n\t/**\n\t * Event handler to react to the stateChange event of the FilterBar.\n\t */\n\t@blockEvent()\n\tstateChange!: string;\n\n\t/**\n\t * Event handler to react to the filterChanged event of the FilterBar. Exposes parameters from the MDC filter bar\n\t */\n\t@blockEvent()\n\tinternalFilterChanged!: string;\n\n\t/**\n\t * Event handler to react to the search event of the FilterBar. Exposes parameteres from the MDC filter bar\n\t */\n\t@blockEvent()\n\tinternalSearch!: string;\n\n\t/**\n\t * Event handler to react to the afterClear event of the FilterBar\n\t */\n\t@blockEvent()\n\tafterClear!: string;\n\n\t@blockAggregation({\n\t\ttype: \"sap.fe.macros.FilterField\",\n\t\tisPublic: true,\n\t\thasVirtualNode: true,\n\t\tprocessAggregations: setCustomFilterFieldProperties\n\t})\n\tfilterFields!: FilterField;\n\n\t_apiId: string | undefined;\n\t_contentId: string | undefined;\n\t_valueHelps: Array<string> | \"\" | undefined;\n\t_filterFields: Array<string> | \"\" | undefined;\n\n\tconstructor(oProps: PropertiesOf<FilterBarBuildingBlock>, configuration: any, mSettings: any) {\n\t\tsuper(oProps, configuration, mSettings);\n\t\tconst oContext = oProps.contextPath;\n\t\tconst oMetaPathContext = oProps.metaPath;\n\t\tif (!oMetaPathContext) {\n\t\t\tLog.error(\"Context Path not available for FilterBar Macro.\");\n\t\t\treturn;\n\t\t}\n\t\tconst sMetaPath = oMetaPathContext?.getPath();\n\t\tlet entityTypePath = \"\";\n\t\tconst metaPathParts = sMetaPath?.split(\"/@com.sap.vocabularies.UI.v1.SelectionFields\") || []; // [0]: entityTypePath, [1]: SF Qualifier.\n\t\tif (metaPathParts.length > 0) {\n\t\t\tentityTypePath = this.getEntityTypePath(metaPathParts);\n\t\t}\n\t\tconst sEntitySetPath = ModelHelper.getEntitySetPath(entityTypePath);\n\t\tconst oMetaModel = oContext?.getModel();\n\t\tthis._internalContextPath = oMetaModel?.createBindingContext(entityTypePath) as V4Context;\n\t\tconst sObjectPath = \"@com.sap.vocabularies.UI.v1.SelectionFields\";\n\t\tconst annotationPath: string = \"@com.sap.vocabularies.UI.v1.SelectionFields\" + ((metaPathParts.length && metaPathParts[1]) || \"\");\n\t\tconst oExtraParams: any = {};\n\t\toExtraParams[sObjectPath] = {\n\t\t\tfilterFields: oProps.filterFields\n\t\t};\n\t\tconst oVisualizationObjectPath = getInvolvedDataModelObjects(this._internalContextPath);\n\t\tconst oConverterContext = this.getConverterContext(oVisualizationObjectPath, undefined, mSettings, oExtraParams);\n\t\tif (!oProps.propertyInfo) {\n\t\t\tthis.propertyInfo = getSelectionFields(oConverterContext, [], annotationPath).sPropertyInfo;\n\t\t}\n\n\t\t//Filter Fields and values to the field are filled based on the selectionFields and this would be empty in case of macro outside the FE template\n\t\tif (!oProps.selectionFields) {\n\t\t\tconst oSelectionFields = getSelectionFields(oConverterContext, [], annotationPath).selectionFields;\n\t\t\tthis.selectionFields = new TemplateModel(oSelectionFields, oMetaModel as ODataMetaModel).createBindingContext(\"/\");\n\t\t\tconst oEntityType = oConverterContext.getEntityType(),\n\t\t\t\toSelectionVariant = getSelectionVariant(oEntityType, oConverterContext),\n\t\t\t\toEntitySetContext = (oMetaModel as ODataMetaModel).getContext(sEntitySetPath),\n\t\t\t\toFilterConditions = getFilterConditions(oEntitySetContext, { selectionVariant: oSelectionVariant });\n\t\t\tthis.filterConditions = oFilterConditions;\n\t\t}\n\t\tthis._processPropertyInfos(this.propertyInfo);\n\n\t\tconst targetDataModelObject = getInvolvedDataModelObjects(oContext as Context).targetObject;\n\t\tif (targetDataModelObject.annotations?.Common?.DraftRoot || targetDataModelObject.annotations?.Common?.DraftNode) {\n\t\t\tthis.showDraftEditState = true;\n\t\t\tthis.checkIfCollaborationDraftSupported(oMetaModel as ODataMetaModel);\n\t\t}\n\n\t\tif (oProps._applyIdToContent) {\n\t\t\tthis._apiId = oProps.id + \"::FilterBar\";\n\t\t\tthis._contentId = oProps.id;\n\t\t} else {\n\t\t\tthis._apiId = oProps.id;\n\t\t\tthis._contentId = this.getContentId(oProps.id + \"\");\n\t\t}\n\n\t\tif (oProps.hideBasicSearch !== true) {\n\t\t\tconst oSearchRestrictionAnnotation = CommonUtils.getSearchRestrictions(sEntitySetPath, oMetaModel as ODataMetaModel);\n\t\t\tthis.hideBasicSearch = Boolean(oSearchRestrictionAnnotation && !oSearchRestrictionAnnotation.Searchable);\n\t\t}\n\t\tthis.processSelectionFields();\n\t}\n\n\tgetContentId(sMacroId: string) {\n\t\treturn `${sMacroId}-content`;\n\t}\n\n\t_processPropertyInfos(propertyInfo: string) {\n\t\tconst aParameterFields: string[] = [];\n\t\tif (propertyInfo) {\n\t\t\tconst sFetchedProperties = propertyInfo.replace(/\\\\{/g, \"{\").replace(/\\\\}/g, \"}\");\n\t\t\tconst aFetchedProperties = JSON.parse(sFetchedProperties);\n\t\t\taFetchedProperties.forEach(function (propInfo: PropertyInfo) {\n\t\t\t\tif (propInfo.isParameter) {\n\t\t\t\t\taParameterFields.push(propInfo.name);\n\t\t\t\t}\n\t\t\t\tif (propInfo.path === \"$editState\") {\n\t\t\t\t\tpropInfo.label = ResourceModel.getText(\"FILTERBAR_EDITING_STATUS\");\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.propertyInfo = JSON.stringify(aFetchedProperties).replace(/\\{/g, \"\\\\{\").replace(/\\}/g, \"\\\\}\");\n\t\t}\n\t\tthis._parameters = JSON.stringify(aParameterFields);\n\t}\n\n\tcheckIfCollaborationDraftSupported = (oMetaModel: ODataMetaModel | undefined) => {\n\t\tif (ModelHelper.isCollaborationDraftSupported(oMetaModel)) {\n\t\t\tthis.isDraftCollaborative = true;\n\t\t}\n\t};\n\n\tgetEntityTypePath = (metaPathParts: string[]) => {\n\t\treturn metaPathParts[0].endsWith(\"/\") ? metaPathParts[0] : metaPathParts[0] + \"/\";\n\t};\n\n\tgetSearch = () => {\n\t\tif (!this.hideBasicSearch) {\n\t\t\treturn xml`<control:basicSearchField>\n\t\t\t<mdc:FilterField\n\t\t\t\tid=\"${generate([this.id, \"BasicSearchField\"])}\"\n\t\t\t\tplaceholder=\"{sap.fe.i18n>M_FILTERBAR_SEARCH}\"\n\t\t\t\tconditions=\"{$filters>/conditions/$search}\"\n\t\t\t\tdataType=\"sap.ui.model.odata.type.String\"\n\t\t\t\tmaxConditions=\"1\"\n\t\t\t/>\n\t\t</control:basicSearchField>`;\n\t\t}\n\t\treturn xml``;\n\t};\n\n\tprocessSelectionFields = () => {\n\t\tlet draftEditState = xml``;\n\t\tif (this.showDraftEditState) {\n\t\t\tdraftEditState = `<core:Fragment fragmentName=\"sap.fe.macros.filter.DraftEditState\" type=\"XML\" />`;\n\t\t}\n\t\tthis._valueHelps = [];\n\t\tthis._filterFields = [];\n\t\tthis._filterFields?.push(draftEditState);\n\t\tif (!Array.isArray(this.selectionFields)) {\n\t\t\tthis.selectionFields = (this.selectionFields as V4Context).getObject();\n\t\t}\n\t\tthis.selectionFields?.forEach((selectionField: any, selectionFieldIdx) => {\n\t\t\tif (selectionField.availability === \"Default\") {\n\t\t\t\tthis.setFilterFieldsAndValueHelps(selectionField, selectionFieldIdx);\n\t\t\t}\n\t\t});\n\t\tthis._filterFields = this._filterFields?.length > 0 ? this._filterFields : \"\";\n\t\tthis._valueHelps = this._valueHelps?.length > 0 ? this._valueHelps : \"\";\n\t};\n\n\tsetFilterFieldsAndValueHelps = (selectionField: any, selectionFieldIdx: number) => {\n\t\tif (selectionField.template === undefined && selectionField.type !== \"Slot\") {\n\t\t\tthis.pushFilterFieldsAndValueHelps(selectionField);\n\t\t} else if (Array.isArray(this._filterFields)) {\n\t\t\tthis._filterFields?.push(\n\t\t\t\txml`<template:with path=\"selectionFields>${selectionFieldIdx}\" var=\"item\">\n\t\t\t\t\t<core:Fragment fragmentName=\"sap.fe.macros.filter.CustomFilter\" type=\"XML\" />\n\t\t\t\t</template:with>`\n\t\t\t);\n\t\t}\n\t};\n\n\t_getContextPathForFilterField(selectionField: any, filterBarContextPath: V4Context): string | V4Context {\n\t\tlet contextPath: string | V4Context = filterBarContextPath;\n\t\tif (selectionField.isParameter) {\n\t\t\t// Example:\n\t\t\t// FilterBarContextPath: /Customer/Set\n\t\t\t// ParameterPropertyPath: /Customer/P_CC\n\t\t\t// ContextPathForFilterField: /Customer\n\t\t\tconst annoPath = selectionField.annotationPath;\n\t\t\tcontextPath = annoPath.substring(0, annoPath.lastIndexOf(\"/\") + 1);\n\t\t}\n\t\treturn contextPath;\n\t}\n\n\tpushFilterFieldsAndValueHelps = (selectionField: any) => {\n\t\tif (Array.isArray(this._filterFields)) {\n\t\t\tthis._filterFields?.push(\n\t\t\t\txml`<internalMacro:FilterField\n\t\t\tidPrefix=\"${generate([this.id, \"FilterField\", CommonHelper.getNavigationPath(selectionField.annotationPath)])}\"\n\t\t\tvhIdPrefix=\"${generate([this.id, \"FilterFieldValueHelp\"])}\"\n\t\t\tproperty=\"${selectionField.annotationPath}\"\n\t\t\tcontextPath=\"${this._getContextPathForFilterField(selectionField, this._internalContextPath)}\"\n\t\t\tuseSemanticDateRange=\"${this.useSemanticDateRange}\"\n\t\t\tsettings=\"${CommonHelper.stringifyCustomData(selectionField.settings)}\"\n\t\t\tvisualFilter=\"${selectionField.visualFilter}\"\n\t\t\t/>`\n\t\t\t);\n\t\t}\n\t\tif (Array.isArray(this._valueHelps)) {\n\t\t\tthis._valueHelps?.push(\n\t\t\t\txml`<macro:ValueHelp\n\t\t\tidPrefix=\"${generate([this.id, \"FilterFieldValueHelp\"])}\"\n\t\t\tconditionModel=\"$filters\"\n\t\t\tproperty=\"${selectionField.annotationPath}\"\n\t\t\tcontextPath=\"${this._getContextPathForFilterField(selectionField, this._internalContextPath)}\"\n\t\t\tfilterFieldValueHelp=\"true\"\n\t\t\tuseSemanticDateRange=\"${this.useSemanticDateRange}\"\n\t\t/>`\n\t\t\t);\n\t\t}\n\t};\n\n\tgetTemplate() {\n\t\tconst internalContextPath = this._internalContextPath?.getPath();\n\t\tlet filterDelegate = \"\";\n\t\tif (this.filterBarDelegate) {\n\t\t\tfilterDelegate = this.filterBarDelegate;\n\t\t} else {\n\t\t\tfilterDelegate = \"{name:'sap/fe/macros/filterBar/FilterBarDelegate', payload: {entityTypePath: '\" + internalContextPath + \"'}}\";\n\t\t}\n\t\treturn xml`<macroFilterBar:FilterBarAPI\n        xmlns:template=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1\"\n        xmlns:core=\"sap.ui.core\"\n        xmlns:mdc=\"sap.ui.mdc\"\n        xmlns:control=\"sap.fe.core.controls\"\n        xmlns:macroFilterBar=\"sap.fe.macros.filterBar\"\n        xmlns:macro=\"sap.fe.macros\"\n        xmlns:internalMacro=\"sap.fe.macros.internal\"\n        xmlns:customData=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\"\n\t\tid=\"${this._apiId}\"\n\t\tsearch=\"${this.search}\"\n\t\tfilterChanged=\"${this.filterChanged}\"\n\t\tafterClear=\"${this.afterClear}\"\n\t\tinternalSearch=\"${this.internalSearch}\"\n\t\tinternalFilterChanged=\"${this.internalFilterChanged}\"\n\t\tstateChange=\"${this.stateChange}\"\n\t>\n\t\t<control:FilterBar\n\t\t\tcore:require=\"{API: 'sap/fe/macros/filterBar/FilterBarAPI'}\"\n\t\t\tid=\"${this._contentId}\"\n\t\t\tliveMode=\"${this.liveMode}\"\n\t\t\tdelegate=\"${filterDelegate}\"\n\t\t\tvariantBackreference=\"${this.variantBackreference}\"\n\t\t\tshowAdaptFiltersButton=\"${this.showAdaptFiltersButton}\"\n\t\t\tshowClearButton=\"${this.showClearButton}\"\n\t\t\tp13nMode=\"${this.p13nMode}\"\n\t\t\tsearch=\"API.handleSearch($event)\"\n\t\t\tfiltersChanged=\"API.handleFilterChanged($event)\"\n\t\t\tfilterConditions=\"${this.filterConditions}\"\n\t\t\tsuspendSelection=\"${this.suspendSelection}\"\n\t\t\tshowMessages=\"${this.showMessages}\"\n\t\t\ttoggleControl=\"${this.toggleControlId}\"\n\t\t\tinitialLayout=\"${this.initialLayout}\"\n\t\t\tpropertyInfo=\"${this.propertyInfo}\"\n\t\t\tcustomData:localId=\"${this.id}\"\n\t\t\tvisible=\"${this.visible}\"\n\t\t\tcustomData:hideBasicSearch=\"${this.hideBasicSearch}\"\n\t\t\tcustomData:showDraftEditState=\"${this.showDraftEditState}\"\n\t\t\tcustomData:useSemanticDateRange=\"${this.useSemanticDateRange}\"\n\t\t\tcustomData:entityType=\"${internalContextPath}\"\n\t\t\tcustomData:parameters=\"${this._parameters}\"\n\t\t>\n\t\t\t<control:dependents>\n\t\t\t\t${this._valueHelps}\n\t\t\t</control:dependents>\n\t\t\t${this.getSearch()}\n\t\t\t<control:filterItems>\n\t\t\t\t${this._filterFields}\n\t\t\t</control:filterItems>\n\t\t</control:FilterBar>\n\t</macroFilterBar:FilterBarAPI>`;\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":11083,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlock","Log","BuildingBlockRuntime","CommonUtils","DataVisualization","FilterBar","MetaModelConverter","ModelHelper","StableIdHelper","TemplateModel","FilterHelper","CommonHelper","ResourceModel","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_dec18","_dec19","_dec20","_dec21","_dec22","_dec23","_dec24","_dec25","_dec26","_dec27","_dec28","_dec29","_dec30","_dec31","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_descriptor15","_descriptor16","_descriptor17","_descriptor18","_descriptor19","_descriptor20","_descriptor21","_descriptor22","_descriptor23","_descriptor24","_descriptor25","_descriptor26","_descriptor27","_descriptor28","_descriptor29","_descriptor30","_exports","getFilterConditions","generate","getInvolvedDataModelObjects","getSelectionFields","getSelectionVariant","xml","defineBuildingBlock","BuildingBlockBase","blockEvent","blockAttribute","blockAggregation","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","setCustomFilterFieldProperties","childFilterField","aggregationObject","slotName","replace","label","getAttribute","required","FilterBarBuildingBlock","name","namespace","publicNamespace","type","isPublic","defaultValue","hasVirtualNode","processAggregations","_BuildingBlockBase","oProps","configuration","mSettings","_targetDataModelObjec","_targetDataModelObjec2","_targetDataModelObjec3","_targetDataModelObjec4","_this","this","checkIfCollaborationDraftSupported","oMetaModel","isCollaborationDraftSupported","isDraftCollaborative","getEntityTypePath","metaPathParts","endsWith","getSearch","hideBasicSearch","id","processSelectionFields","_this$_filterFields","_this$selectionFields","_this$_filterFields2","_this$_valueHelps","draftEditState","showDraftEditState","_valueHelps","_filterFields","push","Array","isArray","selectionFields","getObject","selectionField","selectionFieldIdx","availability","setFilterFieldsAndValueHelps","length","template","pushFilterFieldsAndValueHelps","_this$_filterFields3","_this$_filterFields4","getNavigationPath","annotationPath","_getContextPathForFilterField","_internalContextPath","useSemanticDateRange","stringifyCustomData","settings","visualFilter","_this$_valueHelps2","oContext","contextPath","oMetaPathContext","metaPath","error","sMetaPath","getPath","entityTypePath","_metaPathParts","split","sEntitySetPath","getEntitySetPath","_oMetaModel","getModel","createBindingContext","sObjectPath","oExtraParams","filterFields","oVisualizationObjectPath","oConverterContext","getConverterContext","propertyInfo","sPropertyInfo","oSelectionFields","oEntityType","getEntityType","oSelectionVariant","oEntitySetContext","getContext","oFilterConditions","selectionVariant","filterConditions","_processPropertyInfos","targetDataModelObject","targetObject","annotations","Common","DraftRoot","DraftNode","_applyIdToContent","_apiId","_contentId","getContentId","oSearchRestrictionAnnotation","getSearchRestrictions","Boolean","Searchable","_proto","sMacroId","aParameterFields","sFetchedProperties","aFetchedProperties","JSON","parse","propInfo","isParameter","path","getText","stringify","_parameters","filterBarContextPath","annoPath","substring","lastIndexOf","getTemplate","_this$_internalContex","internalContextPath","filterDelegate","filterBarDelegate","search","filterChanged","afterClear","internalSearch","internalFilterChanged","stateChange","liveMode","variantBackreference","showAdaptFiltersButton","showClearButton","p13nMode","suspendSelection","showMessages","toggleControlId","initialLayout","visible"],"sources":["FilterBarBuildingBlock-dbg.js"],"mappings":"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","sourceRoot":"filterBar"}},{"offset":{"line":11163,"column":0},"map":{"version":3,"names":["ODataFilterBarDelegate","Object","assign","FilterBarDelegate","EDIT_STATE_PROPERTY_NAME","SEARCH_PROPERTY_NAME","VALUE_HELP_TYPE","FETCHED_PROPERTIES_DATA_KEY","CONDITION_PATH_TO_PROPERTY_PATH_REGEX","_templateEditState","sIdPrefix","metaModel","oModifier","oThis","JSONModel","id","isDraftCollaborative","ModelHelper","isCollaborationDraftSupported","oPreprocessorSettings","bindingContexts","this","createBindingContext","models","ResourceModel","getModel","DelegateUtil","templateControlFragment","undefined","finally","destroy","_templateCustomFilter","oFilterBar","oSelectionFieldInfo","oMetaModel","sEntityTypePath","getCustomData","oItemModel","TemplateModel","contextPath","item","oView","CommonUtils","getTargetView","oController","getController","oOptions","controller","view","_getPropertyPath","sConditionPath","replace","_findSelectionField","aSelectionFields","sFlexName","find","oSelectionField","conditionPath","replaceAll","availability","_generateIdPrefix","sFilterBarId","sControlType","sNavigationPrefix","generate","_templateValueHelp","oSettings","oParameters","idPrefix","sVhIdPrefix","conditionModel","navigationPrefix","filterFieldValueHelp","useSemanticDateRange","bUseSemanticDateRange","mergeObjects","Promise","resolve","isXML","then","aVHElements","sAggregationName","length","forEach","elt","insertAggregation","oControl","catch","oError","Log","error","_addXMLCustomFilterField","sPropertyPath","aDependents","getAggregation","i","oFilterField","isA","sDataProperty","getFieldPath","sFilterFieldId","getId","indexOf","_templateFilterField","pageModel","vhIdPrefix","propertyPath","sPropertyName","settings","visualFilter","oVisualFilter","converterContext","_addPropertyInfo","oParentControl","mPropertyBag","sPropertyInfoName","sPropertyInfoKey","modifier","delegate","getProperty","aPropertyInfo","hasPropertyInfo","some","prop","key","name","entityTypePath","payload","FilterUtils","createConverterContext","appComponent","entityType","getEntityType","filterField","getFilterField","buildProperyInfo","push","setProperty","errorMsg","warning","addItem","_addP13nItem","model","getMetaModel","targets","_addFlexItem","removeItem","oFilterFieldProperty","doRemoveItem","data","addCondition","removeCondition","clearFilters","oFilterControl","clearFilterValues","fetchModel","oModel","fetchPropertiesForEntity","oEntityType","getObject","includeHidden","oConverterContext","sEntitySetPath","getEntitySetPath","mFilterFields","getConvertedFilterFields","aFetchedProperties","oFilterFieldInfo","annotationPath","sTargetPropertyPrefix","CommonHelper","getLocationForPropertyPath","sProperty","isPropertyFilterable","aParameterFields","processedFields","processSelectionFields","processedFieldsKeys","oProps","filter","oProp","includes","oFR","getFilterRestrictionsByPath","mAllowedExpressions","FilterAllowedExpressions","keys","sFilterFieldKey","oSelField","group","groupLabel","path","tooltip","removeFromAppState","hasValueHelp","sAnnotationPath","oProperty","oPropertyAnnotations","oPropertyContext","bRemoveFromAppState","oFilterDefaultValueAnnotation","oFilterDefaultValue","getModelType","$Type","context","defaultFilterConditions","fieldPath","operator","values","filterExpression","getSpecificAllowedExpression","visible","propInfo","label","getText","typeConfig","TypeUtil","getTypeConfig","dataType","formatOptions","constraints","getLocalizedText","isParameter","setCustomData","getLineItemQualifierFromTable","annotationPaths","getMetaPath","split","Visualizations","visualization","$AnnotationPath","metaPaths","sFlexPropertyName","oAppComponent","getParent","bIsXML","template","type","sNavigationPath","getNavigationPath","sUseSemanticDateRange","sBindingPath","substr","lastIndexOf","sRetrievedEntityTypePath","sRetrievedUseSemanticDateRange","sInFilterBarId","property","filterOutNavPropBinding","join","sValueHelpType","doesValueHelpExist","bValueHelpExists","_getPageModel","_getCachedProperties","window","Element","_setCachedProperties","_getCachedOrFetchPropertiesForEntity","localGroupLabel","oGroup","sort","a","b","localeCompare","fetchProperties","getTypeUtil"],"sourceRoot":"filterBar","sources":["FilterBarDelegate.ts"],"sourcesContent":["import { UIAnnotationTerms } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport mergeObjects from \"sap/base/util/merge\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport { processSelectionFields } from \"sap/fe/core/converters/controls/ListReport/FilterBar\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport PageController from \"sap/fe/core/PageController\";\nimport TemplateModel from \"sap/fe/core/TemplateModel\";\nimport { hasValueHelp } from \"sap/fe/core/templating/PropertyFormatters\";\nimport { getModelType } from \"sap/fe/core/type/EDM\";\nimport TypeUtil from \"sap/fe/core/type/TypeUtil\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport DelegateUtil from \"sap/fe/macros/DelegateUtil\";\nimport FilterUtils from \"sap/fe/macros/filter/FilterUtils\";\nimport ResourceModel from \"sap/fe/macros/ResourceModel\";\nimport FilterBar from \"sap/ui/mdc/FilterBar\";\nimport FilterBarDelegate from \"sap/ui/mdc/FilterBarDelegate\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\n\nconst ODataFilterBarDelegate = Object.assign({}, FilterBarDelegate) as any;\nconst EDIT_STATE_PROPERTY_NAME = \"$editState\",\n\tSEARCH_PROPERTY_NAME = \"$search\",\n\tVALUE_HELP_TYPE = \"FilterFieldValueHelp\",\n\tFETCHED_PROPERTIES_DATA_KEY = \"sap_fe_FilterBarDelegate_propertyInfoMap\",\n\tCONDITION_PATH_TO_PROPERTY_PATH_REGEX = /[+*]/g;\n\nfunction _templateEditState(sIdPrefix: any, metaModel: ODataMetaModel, oModifier: any) {\n\tconst oThis = new JSONModel({\n\t\t\tid: sIdPrefix,\n\t\t\tisDraftCollaborative: ModelHelper.isCollaborationDraftSupported(metaModel)\n\t\t}),\n\t\toPreprocessorSettings = {\n\t\t\tbindingContexts: {\n\t\t\t\tthis: oThis.createBindingContext(\"/\")\n\t\t\t},\n\t\t\tmodels: {\n\t\t\t\t\"this.i18n\": ResourceModel.getModel(),\n\t\t\t\tthis: oThis\n\t\t\t}\n\t\t};\n\n\treturn DelegateUtil.templateControlFragment(\"sap.fe.macros.filter.DraftEditState\", oPreprocessorSettings, undefined, oModifier).finally(\n\t\tfunction () {\n\t\t\toThis.destroy();\n\t\t}\n\t);\n}\n\nODataFilterBarDelegate._templateCustomFilter = async function (\n\toFilterBar: any,\n\tsIdPrefix: any,\n\toSelectionFieldInfo: any,\n\toMetaModel: any,\n\toModifier: any\n) {\n\tconst sEntityTypePath = await DelegateUtil.getCustomData(oFilterBar, \"entityType\", oModifier);\n\tconst oThis = new JSONModel({\n\t\t\tid: sIdPrefix\n\t\t}),\n\t\toItemModel = new TemplateModel(oSelectionFieldInfo, oMetaModel),\n\t\toPreprocessorSettings = {\n\t\t\tbindingContexts: {\n\t\t\t\tcontextPath: oMetaModel.createBindingContext(sEntityTypePath),\n\t\t\t\tthis: oThis.createBindingContext(\"/\"),\n\t\t\t\titem: oItemModel.createBindingContext(\"/\")\n\t\t\t},\n\t\t\tmodels: {\n\t\t\t\tcontextPath: oMetaModel,\n\t\t\t\tthis: oThis,\n\t\t\t\titem: oItemModel\n\t\t\t}\n\t\t},\n\t\toView = CommonUtils.getTargetView(oFilterBar),\n\t\toController = oView ? oView.getController() : undefined,\n\t\toOptions = {\n\t\t\tcontroller: oController ? oController : undefined,\n\t\t\tview: oView\n\t\t};\n\n\treturn DelegateUtil.templateControlFragment(\"sap.fe.macros.filter.CustomFilter\", oPreprocessorSettings, oOptions, oModifier).finally(\n\t\tfunction () {\n\t\t\toThis.destroy();\n\t\t\toItemModel.destroy();\n\t\t}\n\t);\n};\nfunction _getPropertyPath(sConditionPath: any) {\n\treturn sConditionPath.replace(CONDITION_PATH_TO_PROPERTY_PATH_REGEX, \"\");\n}\nODataFilterBarDelegate._findSelectionField = function (aSelectionFields: any, sFlexName: any) {\n\treturn aSelectionFields.find(function (oSelectionField: any) {\n\t\treturn (\n\t\t\t(oSelectionField.conditionPath === sFlexName || oSelectionField.conditionPath.replaceAll(/\\*/g, \"\") === sFlexName) &&\n\t\t\toSelectionField.availability !== \"Hidden\"\n\t\t);\n\t});\n};\nfunction _generateIdPrefix(sFilterBarId: any, sControlType: any, sNavigationPrefix?: any) {\n\treturn sNavigationPrefix ? generate([sFilterBarId, sControlType, sNavigationPrefix]) : generate([sFilterBarId, sControlType]);\n}\nfunction _templateValueHelp(oSettings: any, oParameters: any) {\n\tconst oThis = new JSONModel({\n\t\tidPrefix: oParameters.sVhIdPrefix,\n\t\tconditionModel: \"$filters\",\n\t\tnavigationPrefix: oParameters.sNavigationPrefix ? `/${oParameters.sNavigationPrefix}` : \"\",\n\t\tfilterFieldValueHelp: true,\n\t\tuseSemanticDateRange: oParameters.bUseSemanticDateRange\n\t});\n\tconst oPreprocessorSettings = mergeObjects({}, oSettings, {\n\t\tbindingContexts: {\n\t\t\tthis: oThis.createBindingContext(\"/\")\n\t\t},\n\t\tmodels: {\n\t\t\tthis: oThis\n\t\t}\n\t});\n\n\treturn Promise.resolve(\n\t\tDelegateUtil.templateControlFragment(\"sap.fe.macros.internal.valuehelp.ValueHelp\", oPreprocessorSettings, {\n\t\t\tisXML: oSettings.isXML\n\t\t})\n\t)\n\t\t.then(function (aVHElements: any) {\n\t\t\tif (aVHElements) {\n\t\t\t\tconst sAggregationName = \"dependents\";\n\t\t\t\t//Some filter fields have the PersistenceProvider aggregation besides the FVH :\n\t\t\t\tif (aVHElements.length) {\n\t\t\t\t\taVHElements.forEach(function (elt: any) {\n\t\t\t\t\t\tif (oParameters.oModifier) {\n\t\t\t\t\t\t\toParameters.oModifier.insertAggregation(oParameters.oControl, sAggregationName, elt, 0);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\toParameters.oControl.insertAggregation(sAggregationName, elt, 0, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else if (oParameters.oModifier) {\n\t\t\t\t\toParameters.oModifier.insertAggregation(oParameters.oControl, sAggregationName, aVHElements, 0);\n\t\t\t\t} else {\n\t\t\t\t\toParameters.oControl.insertAggregation(sAggregationName, aVHElements, 0, false);\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\t.catch(function (oError: any) {\n\t\t\tLog.error(\"Error while evaluating DelegateUtil.isValueHelpRequired\", oError);\n\t\t})\n\t\t.finally(function () {\n\t\t\toThis.destroy();\n\t\t});\n}\nasync function _addXMLCustomFilterField(oFilterBar: any, oModifier: any, sPropertyPath: any) {\n\ttry {\n\t\tconst aDependents = await Promise.resolve(oModifier.getAggregation(oFilterBar, \"dependents\"));\n\t\tlet i;\n\t\tif (aDependents && aDependents.length > 1) {\n\t\t\tfor (i = 0; i <= aDependents.length; i++) {\n\t\t\t\tconst oFilterField = aDependents[i];\n\t\t\t\tif (oFilterField && oFilterField.isA(\"sap.ui.mdc.FilterField\")) {\n\t\t\t\t\tconst sDataProperty = oFilterField.getFieldPath(),\n\t\t\t\t\t\tsFilterFieldId = oFilterField.getId();\n\t\t\t\t\tif (sPropertyPath === sDataProperty && sFilterFieldId.indexOf(\"CustomFilterField\")) {\n\t\t\t\t\t\treturn Promise.resolve(oFilterField);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} catch (oError: any) {\n\t\tLog.error(\"Filter Cannot be added\", oError);\n\t}\n}\nfunction _templateFilterField(oSettings: any, oParameters: any, pageModel?: JSONModel) {\n\tconst oThis = new JSONModel({\n\t\tidPrefix: oParameters.sIdPrefix,\n\t\tvhIdPrefix: oParameters.sVhIdPrefix,\n\t\tpropertyPath: oParameters.sPropertyName,\n\t\tnavigationPrefix: oParameters.sNavigationPrefix ? `/${oParameters.sNavigationPrefix}` : \"\",\n\t\tuseSemanticDateRange: oParameters.bUseSemanticDateRange,\n\t\tsettings: oParameters.oSettings,\n\t\tvisualFilter: oParameters.visualFilter\n\t});\n\tconst oMetaModel = oParameters.oMetaModel;\n\tconst oVisualFilter = new TemplateModel(oParameters.visualFilter, oMetaModel);\n\tconst oPreprocessorSettings = mergeObjects({}, oSettings, {\n\t\tbindingContexts: {\n\t\t\tthis: oThis.createBindingContext(\"/\"),\n\t\t\tvisualFilter: oVisualFilter.createBindingContext(\"/\")\n\t\t},\n\t\tmodels: {\n\t\t\tthis: oThis,\n\t\t\tvisualFilter: oVisualFilter,\n\t\t\tmetaModel: oMetaModel,\n\t\t\tconverterContext: pageModel\n\t\t}\n\t});\n\n\treturn DelegateUtil.templateControlFragment(\"sap.fe.macros.internal.filterField.FilterFieldTemplate\", oPreprocessorSettings, {\n\t\tisXML: oSettings.isXML\n\t}).finally(function () {\n\t\toThis.destroy();\n\t});\n}\n\nasync function _addPropertyInfo(oParentControl: FilterBar, mPropertyBag: any, oMetaModel: any, sPropertyInfoName: string) {\n\ttry {\n\t\tsPropertyInfoName = sPropertyInfoName.replace(\"*\", \"\");\n\t\tconst sPropertyInfoKey = generate([sPropertyInfoName]); //Making sure that navigation property names are generated properly e.g. _Item::Material\n\t\tif (mPropertyBag && !mPropertyBag.modifier) {\n\t\t\tthrow \"FilterBar Delegate method called without modifier.\";\n\t\t}\n\n\t\tconst delegate = await mPropertyBag.modifier.getProperty(oParentControl, \"delegate\");\n\t\tconst aPropertyInfo = await mPropertyBag.modifier.getProperty(oParentControl, \"propertyInfo\");\n\t\t//We do not get propertyInfo in case of table filters\n\t\tif (aPropertyInfo) {\n\t\t\tconst hasPropertyInfo = aPropertyInfo.some(function (prop: any) {\n\t\t\t\treturn prop.key === sPropertyInfoKey || prop.name === sPropertyInfoKey;\n\t\t\t});\n\t\t\tif (!hasPropertyInfo) {\n\t\t\t\tconst entityTypePath = delegate.payload.entityTypePath;\n\t\t\t\tconst converterContext = FilterUtils.createConverterContext(\n\t\t\t\t\toParentControl,\n\t\t\t\t\tentityTypePath,\n\t\t\t\t\toMetaModel,\n\t\t\t\t\tmPropertyBag.appComponent\n\t\t\t\t);\n\t\t\t\tconst entityType = converterContext.getEntityType();\n\t\t\t\tlet filterField = FilterUtils.getFilterField(sPropertyInfoName, converterContext, entityType);\n\t\t\t\tfilterField = FilterUtils.buildProperyInfo(filterField, converterContext);\n\t\t\t\taPropertyInfo.push(filterField);\n\t\t\t\tmPropertyBag.modifier.setProperty(oParentControl, \"propertyInfo\", aPropertyInfo);\n\t\t\t}\n\t\t}\n\t} catch (errorMsg) {\n\t\tLog.warning(`${oParentControl.getId()} : ${errorMsg}`);\n\t}\n}\n\n/**\n * Method responsible for creating filter field in standalone mode / in the personalization settings of the filter bar.\n *\n * @param sPropertyInfoName Name of the property being added as the filter field\n * @param oParentControl Parent control instance to which the filter field is added\n * @param mPropertyBag Instance of the property bag from Flex API\n * @returns Once resolved, a filter field definition is returned\n */\nODataFilterBarDelegate.addItem = async function (sPropertyInfoName: string, oParentControl: FilterBar, mPropertyBag: any) {\n\tif (!mPropertyBag) {\n\t\t// Invoked during runtime.\n\t\treturn ODataFilterBarDelegate._addP13nItem(sPropertyInfoName, oParentControl);\n\t}\n\tconst modifier = mPropertyBag.modifier;\n\tconst model = mPropertyBag && mPropertyBag.appComponent && mPropertyBag.appComponent.getModel();\n\tconst oMetaModel = model && model.getMetaModel();\n\tif (!oMetaModel) {\n\t\treturn Promise.resolve(null);\n\t}\n\tconst isXML = modifier && modifier.targets === \"xmlTree\";\n\tif (isXML) {\n\t\tawait _addPropertyInfo(oParentControl, mPropertyBag, oMetaModel, sPropertyInfoName);\n\t}\n\treturn ODataFilterBarDelegate._addFlexItem(sPropertyInfoName, oParentControl, oMetaModel, modifier, mPropertyBag.appComponent);\n};\n\n/**\n * Method responsible for removing filter field in standalone / personalization filter bar.\n *\n * @param oFilterFieldProperty Object of the filter field property being removed as filter field\n * @param oParentControl Parent control instance from which the filter field is removed\n * @param mPropertyBag Instance of property bag from Flex API\n * @returns The resolved promise\n */\nODataFilterBarDelegate.removeItem = async function (oFilterFieldProperty: any, oParentControl: any, mPropertyBag: any) {\n\tlet doRemoveItem = true;\n\tconst modifier = mPropertyBag.modifier;\n\tconst isXML = modifier && modifier.targets === \"xmlTree\";\n\tif (isXML && !oParentControl.data(\"sap_fe_FilterBarDelegate_propertyInfoMap\")) {\n\t\tconst model = mPropertyBag && mPropertyBag.appComponent && mPropertyBag.appComponent.getModel();\n\t\tconst oMetaModel = model && model.getMetaModel();\n\t\tif (!oMetaModel) {\n\t\t\treturn Promise.resolve(null);\n\t\t}\n\t\tif (typeof oFilterFieldProperty !== \"string\" && oFilterFieldProperty.getFieldPath()) {\n\t\t\tawait _addPropertyInfo(oParentControl, mPropertyBag, oMetaModel, oFilterFieldProperty.getFieldPath());\n\t\t} else {\n\t\t\tawait _addPropertyInfo(oParentControl, mPropertyBag, oMetaModel, oFilterFieldProperty);\n\t\t}\n\t}\n\tif (typeof oFilterFieldProperty !== \"string\" && oFilterFieldProperty.isA && oFilterFieldProperty.isA(\"sap.ui.mdc.FilterField\")) {\n\t\tif (oFilterFieldProperty.data(\"isSlot\") === \"true\" && mPropertyBag) {\n\t\t\t// Inserting into the modifier creates a change from flex also filter is been removed hence promise is resolved to false\n\t\t\tmodifier.insertAggregation(oParentControl, \"dependents\", oFilterFieldProperty);\n\t\t\tdoRemoveItem = false;\n\t\t}\n\t}\n\treturn Promise.resolve(doRemoveItem);\n};\n\n/**\n * Method responsible for creating filter field condition in standalone / personalization filter bar.\n *\n * @param sPropertyInfoName Name of the property being added as filter field\n * @param oParentControl Parent control instance to which the filter field is added\n * @param mPropertyBag Instance of property bag from Flex API\n * @returns The resolved promise\n */\nODataFilterBarDelegate.addCondition = async function (sPropertyInfoName: string, oParentControl: FilterBar, mPropertyBag: any) {\n\tconst modifier = mPropertyBag.modifier;\n\tconst isXML = modifier && modifier.targets === \"xmlTree\";\n\tif (isXML) {\n\t\tconst model = mPropertyBag && mPropertyBag.appComponent && mPropertyBag.appComponent.getModel();\n\t\tconst oMetaModel = model && model.getMetaModel();\n\t\tif (!oMetaModel) {\n\t\t\treturn Promise.resolve(null);\n\t\t}\n\t\tawait _addPropertyInfo(oParentControl, mPropertyBag, oMetaModel, sPropertyInfoName);\n\t}\n\treturn Promise.resolve();\n};\n\n/**\n * Method responsible for removing filter field in standalone / personalization filter bar.\n *\n * @param sPropertyInfoName Name of the property being removed as filter field\n * @param oParentControl Parent control instance from which the filter field is removed\n * @param mPropertyBag Instance of property bag from Flex API\n * @returns The resolved promise\n */\nODataFilterBarDelegate.removeCondition = async function (sPropertyInfoName: string, oParentControl: any, mPropertyBag: any) {\n\tif (!oParentControl.data(\"sap_fe_FilterBarDelegate_propertyInfoMap\")) {\n\t\tconst modifier = mPropertyBag.modifier;\n\t\tconst isXML = modifier && modifier.targets === \"xmlTree\";\n\t\tif (isXML) {\n\t\t\tconst model = mPropertyBag && mPropertyBag.appComponent && mPropertyBag.appComponent.getModel();\n\t\t\tconst oMetaModel = model && model.getMetaModel();\n\t\t\tif (!oMetaModel) {\n\t\t\t\treturn Promise.resolve(null);\n\t\t\t}\n\t\t\tawait _addPropertyInfo(oParentControl, mPropertyBag, oMetaModel, sPropertyInfoName);\n\t\t}\n\t}\n\treturn Promise.resolve();\n};\n/**\n * Clears all input values of visible filter fields in the filter bar.\n *\n * @param oFilterControl Instance of the FilterBar control\n * @returns The resolved promise\n */\nODataFilterBarDelegate.clearFilters = async function (oFilterControl: unknown) {\n\treturn FilterUtils.clearFilterValues(oFilterControl);\n};\n/**\n * Creates the filter field in the table adaptation of the FilterBar.\n *\n * @param sPropertyInfoName The property name of the entity type for which the filter field needs to be created\n * @param oParentControl Instance of the parent control\n * @returns Once resolved, a filter field definition is returned\n */\nODataFilterBarDelegate._addP13nItem = function (sPropertyInfoName: string, oParentControl: object) {\n\treturn DelegateUtil.fetchModel(oParentControl)\n\t\t.then(function (oModel: any) {\n\t\t\treturn ODataFilterBarDelegate._addFlexItem(sPropertyInfoName, oParentControl, oModel.getMetaModel(), undefined);\n\t\t})\n\t\t.catch(function (oError: any) {\n\t\t\tLog.error(\"Model could not be resolved\", oError);\n\t\t\treturn null;\n\t\t});\n};\nODataFilterBarDelegate.fetchPropertiesForEntity = function (sEntityTypePath: any, oMetaModel: any, oFilterControl: any) {\n\tconst oEntityType = oMetaModel.getObject(sEntityTypePath);\n\tconst includeHidden = oFilterControl.isA(\"sap.ui.mdc.filterbar.vh.FilterBar\") ? true : undefined;\n\tif (!oFilterControl || !oEntityType) {\n\t\treturn [];\n\t}\n\tconst oConverterContext = FilterUtils.createConverterContext(oFilterControl, sEntityTypePath);\n\tconst sEntitySetPath = ModelHelper.getEntitySetPath(sEntityTypePath);\n\n\tconst mFilterFields = FilterUtils.getConvertedFilterFields(oFilterControl, sEntityTypePath, includeHidden);\n\tlet aFetchedProperties: any[] = [];\n\tmFilterFields.forEach(function (oFilterFieldInfo: any) {\n\t\tif (oFilterFieldInfo.annotationPath) {\n\t\t\tconst sTargetPropertyPrefix = CommonHelper.getLocationForPropertyPath(oMetaModel, oFilterFieldInfo.annotationPath);\n\t\t\tconst sProperty = oFilterFieldInfo.annotationPath.replace(`${sTargetPropertyPrefix}/`, \"\");\n\n\t\t\tif (CommonUtils.isPropertyFilterable(oMetaModel, sTargetPropertyPrefix, _getPropertyPath(sProperty), true)) {\n\t\t\t\taFetchedProperties.push(oFilterFieldInfo);\n\t\t\t}\n\t\t} else {\n\t\t\t//Custom Filters\n\t\t\taFetchedProperties.push(oFilterFieldInfo);\n\t\t}\n\t});\n\n\tconst aParameterFields: any[] = [];\n\tconst processedFields = processSelectionFields(aFetchedProperties, oConverterContext);\n\tconst processedFieldsKeys: any[] = [];\n\tprocessedFields.forEach(function (oProps: any) {\n\t\tif (oProps.key) {\n\t\t\tprocessedFieldsKeys.push(oProps.key);\n\t\t}\n\t});\n\n\taFetchedProperties = aFetchedProperties.filter(function (oProp: any) {\n\t\treturn processedFieldsKeys.includes(oProp.key);\n\t});\n\n\tconst oFR = CommonUtils.getFilterRestrictionsByPath(sEntitySetPath, oMetaModel),\n\t\tmAllowedExpressions = oFR.FilterAllowedExpressions;\n\tObject.keys(processedFields).forEach(function (sFilterFieldKey: string) {\n\t\tlet oProp = processedFields[sFilterFieldKey];\n\t\tconst oSelField = aFetchedProperties[sFilterFieldKey as any];\n\t\tif (!oSelField || !oSelField.conditionPath) {\n\t\t\treturn;\n\t\t}\n\t\tconst sPropertyPath = _getPropertyPath(oSelField.conditionPath);\n\t\t//fetchBasic\n\t\toProp = Object.assign(oProp, {\n\t\t\tgroup: oSelField.group,\n\t\t\tgroupLabel: oSelField.groupLabel,\n\t\t\tpath: oSelField.conditionPath,\n\t\t\ttooltip: null,\n\t\t\tremoveFromAppState: false,\n\t\t\thasValueHelp: false\n\t\t});\n\n\t\t//fetchPropInfo\n\t\tif (oSelField.annotationPath) {\n\t\t\tconst sAnnotationPath = oSelField.annotationPath;\n\t\t\tconst oProperty = oMetaModel.getObject(sAnnotationPath),\n\t\t\t\toPropertyAnnotations = oMetaModel.getObject(`${sAnnotationPath}@`),\n\t\t\t\toPropertyContext = oMetaModel.createBindingContext(sAnnotationPath);\n\n\t\t\tconst bRemoveFromAppState =\n\t\t\t\toPropertyAnnotations[\"@com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive\"] ||\n\t\t\t\toPropertyAnnotations[\"@com.sap.vocabularies.UI.v1.ExcludeFromNavigationContext\"] ||\n\t\t\t\toPropertyAnnotations[\"@com.sap.vocabularies.Analytics.v1.Measure\"];\n\n\t\t\tconst sTargetPropertyPrefix = CommonHelper.getLocationForPropertyPath(oMetaModel, oSelField.annotationPath);\n\t\t\tconst sProperty = sAnnotationPath.replace(`${sTargetPropertyPrefix}/`, \"\");\n\t\t\tlet oFilterDefaultValueAnnotation;\n\t\t\tlet oFilterDefaultValue;\n\t\t\tif (CommonUtils.isPropertyFilterable(oMetaModel, sTargetPropertyPrefix, _getPropertyPath(sProperty), true)) {\n\t\t\t\toFilterDefaultValueAnnotation = oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.FilterDefaultValue\"];\n\t\t\t\tif (oFilterDefaultValueAnnotation) {\n\t\t\t\t\toFilterDefaultValue = oFilterDefaultValueAnnotation[`$${getModelType(oProperty.$Type)}`];\n\t\t\t\t}\n\n\t\t\t\toProp = Object.assign(oProp, {\n\t\t\t\t\ttooltip: oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.QuickInfo\"] || undefined,\n\t\t\t\t\tremoveFromAppState: bRemoveFromAppState,\n\t\t\t\t\thasValueHelp: hasValueHelp(oPropertyContext.getObject(), { context: oPropertyContext }),\n\t\t\t\t\tdefaultFilterConditions: oFilterDefaultValue\n\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfieldPath: oSelField.conditionPath,\n\t\t\t\t\t\t\t\t\toperator: \"EQ\",\n\t\t\t\t\t\t\t\t\tvalues: [oFilterDefaultValue]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t  ]\n\t\t\t\t\t\t: undefined\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t//base\n\n\t\tif (oProp) {\n\t\t\tif (mAllowedExpressions[sPropertyPath] && mAllowedExpressions[sPropertyPath].length > 0) {\n\t\t\t\toProp.filterExpression = CommonUtils.getSpecificAllowedExpression(mAllowedExpressions[sPropertyPath]);\n\t\t\t} else {\n\t\t\t\toProp.filterExpression = \"auto\";\n\t\t\t}\n\n\t\t\toProp = Object.assign(oProp, {\n\t\t\t\tvisible: oSelField.availability === \"Default\"\n\t\t\t});\n\t\t}\n\n\t\tprocessedFields[sFilterFieldKey] = oProp;\n\t});\n\tprocessedFields.forEach(function (propInfo: any) {\n\t\tif (propInfo.path === \"$editState\") {\n\t\t\tpropInfo.label = ResourceModel.getText(\"FILTERBAR_EDITING_STATUS\");\n\t\t}\n\t\tpropInfo.typeConfig = TypeUtil.getTypeConfig(propInfo.dataType, propInfo.formatOptions, propInfo.constraints);\n\t\tpropInfo.label = DelegateUtil.getLocalizedText(propInfo.label, oFilterControl) || \"\";\n\t\tif (propInfo.isParameter) {\n\t\t\taParameterFields.push(propInfo.name);\n\t\t}\n\t});\n\n\taFetchedProperties = processedFields;\n\tDelegateUtil.setCustomData(oFilterControl, \"parameters\", aParameterFields);\n\n\treturn aFetchedProperties;\n};\n\nfunction getLineItemQualifierFromTable(oControl: any, oMetaModel: any) {\n\tif (oControl.isA(\"sap.fe.macros.table.TableAPI\")) {\n\t\tconst annotationPaths = oControl.getMetaPath().split(\"#\")[0].split(\"/\");\n\t\tswitch (annotationPaths[annotationPaths.length - 1]) {\n\t\t\tcase `@${UIAnnotationTerms.SelectionPresentationVariant}`:\n\t\t\tcase `@${UIAnnotationTerms.PresentationVariant}`:\n\t\t\t\treturn oMetaModel\n\t\t\t\t\t.getObject(oControl.getMetaPath())\n\t\t\t\t\t.Visualizations?.find((visualization: any) => visualization.$AnnotationPath.includes(`@${UIAnnotationTerms.LineItem}`))\n\t\t\t\t\t.$AnnotationPath;\n\t\t\tcase `@${UIAnnotationTerms.LineItem}`:\n\t\t\t\tconst metaPaths = oControl.getMetaPath().split(\"/\");\n\t\t\t\treturn metaPaths[metaPaths.length - 1];\n\t\t}\n\t}\n\treturn undefined;\n}\n\nODataFilterBarDelegate._addFlexItem = function (\n\tsFlexPropertyName: any,\n\toParentControl: any,\n\toMetaModel: any,\n\toModifier: any,\n\toAppComponent: any\n) {\n\tconst sFilterBarId = oModifier ? oModifier.getId(oParentControl) : oParentControl.getId(),\n\t\tsIdPrefix = oModifier ? \"\" : \"Adaptation\",\n\t\taSelectionFields = FilterUtils.getConvertedFilterFields(\n\t\t\toParentControl,\n\t\t\tnull,\n\t\t\tundefined,\n\t\t\toMetaModel,\n\t\t\toAppComponent,\n\t\t\toModifier,\n\t\t\toModifier ? undefined : getLineItemQualifierFromTable(oParentControl.getParent(), oMetaModel)\n\t\t),\n\t\toSelectionField = ODataFilterBarDelegate._findSelectionField(aSelectionFields, sFlexPropertyName),\n\t\tsPropertyPath = _getPropertyPath(sFlexPropertyName),\n\t\tbIsXML = !!oModifier && oModifier.targets === \"xmlTree\";\n\tif (sFlexPropertyName === EDIT_STATE_PROPERTY_NAME) {\n\t\treturn _templateEditState(sFilterBarId, oMetaModel, oModifier);\n\t} else if (sFlexPropertyName === SEARCH_PROPERTY_NAME) {\n\t\treturn Promise.resolve(null);\n\t} else if (oSelectionField && oSelectionField.template) {\n\t\treturn ODataFilterBarDelegate._templateCustomFilter(\n\t\t\toParentControl,\n\t\t\t_generateIdPrefix(sFilterBarId, `${sIdPrefix}FilterField`),\n\t\t\toSelectionField,\n\t\t\toMetaModel,\n\t\t\toModifier\n\t\t);\n\t}\n\n\tif (oSelectionField.type === \"Slot\" && oModifier) {\n\t\treturn _addXMLCustomFilterField(oParentControl, oModifier, sPropertyPath);\n\t}\n\n\tconst sNavigationPath = CommonHelper.getNavigationPath(sPropertyPath);\n\tconst sAnnotationPath = oSelectionField.annotationPath;\n\tlet sEntityTypePath: string;\n\tlet sUseSemanticDateRange;\n\tlet oSettings: any;\n\tlet sBindingPath;\n\tlet oParameters: any;\n\n\treturn Promise.resolve()\n\t\t.then(function () {\n\t\t\tif (oSelectionField.isParameter) {\n\t\t\t\treturn sAnnotationPath.substr(0, sAnnotationPath.lastIndexOf(\"/\") + 1);\n\t\t\t}\n\t\t\treturn DelegateUtil.getCustomData(oParentControl, \"entityType\", oModifier);\n\t\t})\n\t\t.then(function (sRetrievedEntityTypePath: any) {\n\t\t\tsEntityTypePath = sRetrievedEntityTypePath;\n\t\t\treturn DelegateUtil.getCustomData(oParentControl, \"useSemanticDateRange\", oModifier);\n\t\t})\n\t\t.then(function (sRetrievedUseSemanticDateRange: any) {\n\t\t\tsUseSemanticDateRange = sRetrievedUseSemanticDateRange;\n\t\t\tconst oPropertyContext = oMetaModel.createBindingContext(sEntityTypePath + sPropertyPath);\n\t\t\tconst sInFilterBarId = oModifier ? oModifier.getId(oParentControl) : oParentControl.getId();\n\t\t\toSettings = {\n\t\t\t\tbindingContexts: {\n\t\t\t\t\tcontextPath: oMetaModel.createBindingContext(sEntityTypePath),\n\t\t\t\t\tproperty: oPropertyContext\n\t\t\t\t},\n\t\t\t\tmodels: {\n\t\t\t\t\tcontextPath: oMetaModel,\n\t\t\t\t\tproperty: oMetaModel\n\t\t\t\t},\n\t\t\t\tisXML: bIsXML\n\t\t\t};\n\t\t\tsBindingPath = `/${ModelHelper.getEntitySetPath(sEntityTypePath)\n\t\t\t\t.split(\"/\")\n\t\t\t\t.filter(ModelHelper.filterOutNavPropBinding)\n\t\t\t\t.join(\"/\")}`;\n\t\t\toParameters = {\n\t\t\t\tsPropertyName: sPropertyPath,\n\t\t\t\tsBindingPath: sBindingPath,\n\t\t\t\tsValueHelpType: sIdPrefix + VALUE_HELP_TYPE,\n\t\t\t\toControl: oParentControl,\n\t\t\t\toMetaModel: oMetaModel,\n\t\t\t\toModifier: oModifier,\n\t\t\t\tsIdPrefix: _generateIdPrefix(sInFilterBarId, `${sIdPrefix}FilterField`, sNavigationPath),\n\t\t\t\tsVhIdPrefix: _generateIdPrefix(sInFilterBarId, sIdPrefix + VALUE_HELP_TYPE),\n\t\t\t\tsNavigationPrefix: sNavigationPath,\n\t\t\t\tbUseSemanticDateRange: sUseSemanticDateRange,\n\t\t\t\toSettings: oSelectionField ? oSelectionField.settings : {},\n\t\t\t\tvisualFilter: oSelectionField ? oSelectionField.visualFilter : undefined\n\t\t\t};\n\n\t\t\treturn DelegateUtil.doesValueHelpExist(oParameters);\n\t\t})\n\t\t.then(function (bValueHelpExists: any) {\n\t\t\tif (!bValueHelpExists) {\n\t\t\t\treturn _templateValueHelp(oSettings, oParameters);\n\t\t\t}\n\t\t\treturn Promise.resolve();\n\t\t})\n\t\t.then(function () {\n\t\t\tlet pageModel;\n\t\t\tif (oParameters.visualFilter) {\n\t\t\t\t//Need to set the convertercontext as pageModel in settings for BuildingBlock 2.0\n\t\t\t\tpageModel = (CommonUtils.getTargetView(oParentControl).getController() as PageController)._getPageModel();\n\t\t\t}\n\t\t\treturn _templateFilterField(oSettings, oParameters, pageModel);\n\t\t});\n};\nfunction _getCachedProperties(oFilterBar: any) {\n\t// properties are not cached during templating\n\tif (oFilterBar instanceof window.Element) {\n\t\treturn null;\n\t}\n\treturn DelegateUtil.getCustomData(oFilterBar, FETCHED_PROPERTIES_DATA_KEY);\n}\nfunction _setCachedProperties(oFilterBar: any, aFetchedProperties: any) {\n\t// do not cache during templating, else it becomes part of the cached view\n\tif (oFilterBar instanceof window.Element) {\n\t\treturn;\n\t}\n\tDelegateUtil.setCustomData(oFilterBar, FETCHED_PROPERTIES_DATA_KEY, aFetchedProperties);\n}\nfunction _getCachedOrFetchPropertiesForEntity(sEntityTypePath: any, oMetaModel: any, oFilterBar: any) {\n\tlet aFetchedProperties = _getCachedProperties(oFilterBar);\n\tlet localGroupLabel;\n\n\tif (!aFetchedProperties) {\n\t\taFetchedProperties = ODataFilterBarDelegate.fetchPropertiesForEntity(sEntityTypePath, oMetaModel, oFilterBar);\n\t\taFetchedProperties.forEach(function (oGroup: any) {\n\t\t\tlocalGroupLabel = null;\n\t\t\tif (oGroup.groupLabel) {\n\t\t\t\tlocalGroupLabel = DelegateUtil.getLocalizedText(oGroup.groupLabel, oFilterBar);\n\t\t\t\toGroup.groupLabel = localGroupLabel === null ? oGroup.groupLabel : localGroupLabel;\n\t\t\t}\n\t\t});\n\t\taFetchedProperties.sort(function (a: any, b: any) {\n\t\t\tif (a.groupLabel === undefined || a.groupLabel === null) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tif (b.groupLabel === undefined || b.groupLabel === null) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\treturn a.groupLabel.localeCompare(b.groupLabel);\n\t\t});\n\t\t_setCachedProperties(oFilterBar, aFetchedProperties);\n\t}\n\treturn aFetchedProperties;\n}\nODataFilterBarDelegate.fetchProperties = function (oFilterBar: any) {\n\tconst sEntityTypePath = DelegateUtil.getCustomData(oFilterBar, \"entityType\");\n\treturn DelegateUtil.fetchModel(oFilterBar).then(function (oModel: any) {\n\t\tif (!oModel) {\n\t\t\treturn [];\n\t\t}\n\t\treturn _getCachedOrFetchPropertiesForEntity(sEntityTypePath, oModel.getMetaModel(), oFilterBar);\n\t\t// var aCleanedProperties = aProperties.concat();\n\t\t// var aAllowedAttributes = [\"name\", \"label\", \"visible\", \"path\", \"typeConfig\", \"maxConditions\", \"group\", \"groupLabel\"];\n\t\t// aCleanedProperties.forEach(function(oProperty) {\n\t\t// \tObject.keys(oProperty).forEach(function(sPropName) {\n\t\t// \t\tif (aAllowedAttributes.indexOf(sPropName) === -1) {\n\t\t// \t\t\tdelete oProperty[sPropName];\n\t\t// \t\t}\n\t\t// \t});\n\t\t// });\n\t\t// return aCleanedProperties;\n\t});\n};\nODataFilterBarDelegate.getTypeUtil = function () {\n\treturn TypeUtil;\n};\n\nexport default ODataFilterBarDelegate;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;EAqBA,MAAMA,sBAAsB,GAAGC,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEC,iBAAiB,CAAQ;EAC1E,MAAMC,wBAAwB,GAAG,YAAY;IAC5CC,oBAAoB,GAAG,SAAS;IAChCC,eAAe,GAAG,sBAAsB;IACxCC,2BAA2B,GAAG,0CAA0C;IACxEC,qCAAqC,GAAG,OAAO;EAEhD,SAASC,kBAAkB,CAACC,SAAc,EAAEC,SAAyB,EAAEC,SAAc,EAAE;IACtF,MAAMC,KAAK,GAAG,IAAIC,SAAS,CAAC;QAC1BC,EAAE,EAAEL,SAAS;QACbM,oBAAoB,EAAEC,WAAW,CAACC,6BAA6B,CAACP,SAAS;MAC1E,CAAC,CAAC;MACFQ,qBAAqB,GAAG;QACvBC,eAAe,EAAE;UAChBC,IAAI,EAAER,KAAK,CAACS,oBAAoB,CAAC,GAAG;QACrC,CAAC;QACDC,MAAM,EAAE;UACP,WAAW,EAAEC,aAAa,CAACC,QAAQ,EAAE;UACrCJ,IAAI,EAAER;QACP;MACD,CAAC;IAEF,OAAOa,YAAY,CAACC,uBAAuB,CAAC,qCAAqC,EAAER,qBAAqB,EAAES,SAAS,EAAEhB,SAAS,CAAC,CAACiB,OAAO,CACtI,YAAY;MACXhB,KAAK,CAACiB,OAAO,EAAE;IAChB,CAAC,CACD;EACF;EAEA9B,sBAAsB,CAAC+B,qBAAqB,GAAG,gBAC9CC,UAAe,EACftB,SAAc,EACduB,mBAAwB,EACxBC,UAAe,EACftB,SAAc,EACb;IACD,MAAMuB,eAAe,GAAG,MAAMT,YAAY,CAACU,aAAa,CAACJ,UAAU,EAAE,YAAY,EAAEpB,SAAS,CAAC;IAC7F,MAAMC,KAAK,GAAG,IAAIC,SAAS,CAAC;QAC1BC,EAAE,EAAEL;MACL,CAAC,CAAC;MACF2B,UAAU,GAAG,IAAIC,aAAa,CAACL,mBAAmB,EAAEC,UAAU,CAAC;MAC/Df,qBAAqB,GAAG;QACvBC,eAAe,EAAE;UAChBmB,WAAW,EAAEL,UAAU,CAACZ,oBAAoB,CAACa,eAAe,CAAC;UAC7Dd,IAAI,EAAER,KAAK,CAACS,oBAAoB,CAAC,GAAG,CAAC;UACrCkB,IAAI,EAAEH,UAAU,CAACf,oBAAoB,CAAC,GAAG;QAC1C,CAAC;QACDC,MAAM,EAAE;UACPgB,WAAW,EAAEL,UAAU;UACvBb,IAAI,EAAER,KAAK;UACX2B,IAAI,EAAEH;QACP;MACD,CAAC;MACDI,KAAK,GAAGC,WAAW,CAACC,aAAa,CAACX,UAAU,CAAC;MAC7CY,WAAW,GAAGH,KAAK,GAAGA,KAAK,CAACI,aAAa,EAAE,GAAGjB,SAAS;MACvDkB,QAAQ,GAAG;QACVC,UAAU,EAAEH,WAAW,GAAGA,WAAW,GAAGhB,SAAS;QACjDoB,IAAI,EAAEP;MACP,CAAC;IAEF,OAAOf,YAAY,CAACC,uBAAuB,CAAC,mCAAmC,EAAER,qBAAqB,EAAE2B,QAAQ,EAAElC,SAAS,CAAC,CAACiB,OAAO,CACnI,YAAY;MACXhB,KAAK,CAACiB,OAAO,EAAE;MACfO,UAAU,CAACP,OAAO,EAAE;IACrB,CAAC,CACD;EACF,CAAC;EACD,SAASmB,gBAAgB,CAACC,cAAmB,EAAE;IAC9C,OAAOA,cAAc,CAACC,OAAO,CAAC3C,qCAAqC,EAAE,EAAE,CAAC;EACzE;EACAR,sBAAsB,CAACoD,mBAAmB,GAAG,UAAUC,gBAAqB,EAAEC,SAAc,EAAE;IAC7F,OAAOD,gBAAgB,CAACE,IAAI,CAAC,UAAUC,eAAoB,EAAE;MAC5D,OACC,CAACA,eAAe,CAACC,aAAa,KAAKH,SAAS,IAAIE,eAAe,CAACC,aAAa,CAACC,UAAU,CAAC,KAAK,EAAE,EAAE,CAAC,KAAKJ,SAAS,KACjHE,eAAe,CAACG,YAAY,KAAK,QAAQ;IAE3C,CAAC,CAAC;EACH,CAAC;EACD,SAASC,iBAAiB,CAACC,YAAiB,EAAEC,YAAiB,EAAEC,iBAAuB,EAAE;IACzF,OAAOA,iBAAiB,GAAGC,QAAQ,CAAC,CAACH,YAAY,EAAEC,YAAY,EAAEC,iBAAiB,CAAC,CAAC,GAAGC,QAAQ,CAAC,CAACH,YAAY,EAAEC,YAAY,CAAC,CAAC;EAC9H;EACA,SAASG,kBAAkB,CAACC,SAAc,EAAEC,WAAgB,EAAE;IAC7D,MAAMtD,KAAK,GAAG,IAAIC,SAAS,CAAC;MAC3BsD,QAAQ,EAAED,WAAW,CAACE,WAAW;MACjCC,cAAc,EAAE,UAAU;MAC1BC,gBAAgB,EAAEJ,WAAW,CAACJ,iBAAiB,GAAI,IAAGI,WAAW,CAACJ,iBAAkB,EAAC,GAAG,EAAE;MAC1FS,oBAAoB,EAAE,IAAI;MAC1BC,oBAAoB,EAAEN,WAAW,CAACO;IACnC,CAAC,CAAC;IACF,MAAMvD,qBAAqB,GAAGwD,YAAY,CAAC,CAAC,CAAC,EAAET,SAAS,EAAE;MACzD9C,eAAe,EAAE;QAChBC,IAAI,EAAER,KAAK,CAACS,oBAAoB,CAAC,GAAG;MACrC,CAAC;MACDC,MAAM,EAAE;QACPF,IAAI,EAAER;MACP;IACD,CAAC,CAAC;IAEF,OAAO+D,OAAO,CAACC,OAAO,CACrBnD,YAAY,CAACC,uBAAuB,CAAC,4CAA4C,EAAER,qBAAqB,EAAE;MACzG2D,KAAK,EAAEZ,SAAS,CAACY;IAClB,CAAC,CAAC,CACF,CACCC,IAAI,CAAC,UAAUC,WAAgB,EAAE;MACjC,IAAIA,WAAW,EAAE;QAChB,MAAMC,gBAAgB,GAAG,YAAY;QACrC;QACA,IAAID,WAAW,CAACE,MAAM,EAAE;UACvBF,WAAW,CAACG,OAAO,CAAC,UAAUC,GAAQ,EAAE;YACvC,IAAIjB,WAAW,CAACvD,SAAS,EAAE;cAC1BuD,WAAW,CAACvD,SAAS,CAACyE,iBAAiB,CAAClB,WAAW,CAACmB,QAAQ,EAAEL,gBAAgB,EAAEG,GAAG,EAAE,CAAC,CAAC;YACxF,CAAC,MAAM;cACNjB,WAAW,CAACmB,QAAQ,CAACD,iBAAiB,CAACJ,gBAAgB,EAAEG,GAAG,EAAE,CAAC,EAAE,KAAK,CAAC;YACxE;UACD,CAAC,CAAC;QACH,CAAC,MAAM,IAAIjB,WAAW,CAACvD,SAAS,EAAE;UACjCuD,WAAW,CAACvD,SAAS,CAACyE,iBAAiB,CAAClB,WAAW,CAACmB,QAAQ,EAAEL,gBAAgB,EAAED,WAAW,EAAE,CAAC,CAAC;QAChG,CAAC,MAAM;UACNb,WAAW,CAACmB,QAAQ,CAACD,iBAAiB,CAACJ,gBAAgB,EAAED,WAAW,EAAE,CAAC,EAAE,KAAK,CAAC;QAChF;MACD;IACD,CAAC,CAAC,CACDO,KAAK,CAAC,UAAUC,MAAW,EAAE;MAC7BC,GAAG,CAACC,KAAK,CAAC,yDAAyD,EAAEF,MAAM,CAAC;IAC7E,CAAC,CAAC,CACD3D,OAAO,CAAC,YAAY;MACpBhB,KAAK,CAACiB,OAAO,EAAE;IAChB,CAAC,CAAC;EACJ;EACA,eAAe6D,wBAAwB,CAAC3D,UAAe,EAAEpB,SAAc,EAAEgF,aAAkB,EAAE;IAC5F,IAAI;MACH,MAAMC,WAAW,GAAG,MAAMjB,OAAO,CAACC,OAAO,CAACjE,SAAS,CAACkF,cAAc,CAAC9D,UAAU,EAAE,YAAY,CAAC,CAAC;MAC7F,IAAI+D,CAAC;MACL,IAAIF,WAAW,IAAIA,WAAW,CAACX,MAAM,GAAG,CAAC,EAAE;QAC1C,KAAKa,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAIF,WAAW,CAACX,MAAM,EAAEa,CAAC,EAAE,EAAE;UACzC,MAAMC,YAAY,GAAGH,WAAW,CAACE,CAAC,CAAC;UACnC,IAAIC,YAAY,IAAIA,YAAY,CAACC,GAAG,CAAC,wBAAwB,CAAC,EAAE;YAC/D,MAAMC,aAAa,GAAGF,YAAY,CAACG,YAAY,EAAE;cAChDC,cAAc,GAAGJ,YAAY,CAACK,KAAK,EAAE;YACtC,IAAIT,aAAa,KAAKM,aAAa,IAAIE,cAAc,CAACE,OAAO,CAAC,mBAAmB,CAAC,EAAE;cACnF,OAAO1B,OAAO,CAACC,OAAO,CAACmB,YAAY,CAAC;YACrC;UACD;QACD;MACD;IACD,CAAC,CAAC,OAAOR,MAAW,EAAE;MACrBC,GAAG,CAACC,KAAK,CAAC,wBAAwB,EAAEF,MAAM,CAAC;IAC5C;EACD;EACA,SAASe,oBAAoB,CAACrC,SAAc,EAAEC,WAAgB,EAAEqC,SAAqB,EAAE;IACtF,MAAM3F,KAAK,GAAG,IAAIC,SAAS,CAAC;MAC3BsD,QAAQ,EAAED,WAAW,CAACzD,SAAS;MAC/B+F,UAAU,EAAEtC,WAAW,CAACE,WAAW;MACnCqC,YAAY,EAAEvC,WAAW,CAACwC,aAAa;MACvCpC,gBAAgB,EAAEJ,WAAW,CAACJ,iBAAiB,GAAI,IAAGI,WAAW,CAACJ,iBAAkB,EAAC,GAAG,EAAE;MAC1FU,oBAAoB,EAAEN,WAAW,CAACO,qBAAqB;MACvDkC,QAAQ,EAAEzC,WAAW,CAACD,SAAS;MAC/B2C,YAAY,EAAE1C,WAAW,CAAC0C;IAC3B,CAAC,CAAC;IACF,MAAM3E,UAAU,GAAGiC,WAAW,CAACjC,UAAU;IACzC,MAAM4E,aAAa,GAAG,IAAIxE,aAAa,CAAC6B,WAAW,CAAC0C,YAAY,EAAE3E,UAAU,CAAC;IAC7E,MAAMf,qBAAqB,GAAGwD,YAAY,CAAC,CAAC,CAAC,EAAET,SAAS,EAAE;MACzD9C,eAAe,EAAE;QAChBC,IAAI,EAAER,KAAK,CAACS,oBAAoB,CAAC,GAAG,CAAC;QACrCuF,YAAY,EAAEC,aAAa,CAACxF,oBAAoB,CAAC,GAAG;MACrD,CAAC;MACDC,MAAM,EAAE;QACPF,IAAI,EAAER,KAAK;QACXgG,YAAY,EAAEC,aAAa;QAC3BnG,SAAS,EAAEuB,UAAU;QACrB6E,gBAAgB,EAAEP;MACnB;IACD,CAAC,CAAC;IAEF,OAAO9E,YAAY,CAACC,uBAAuB,CAAC,wDAAwD,EAAER,qBAAqB,EAAE;MAC5H2D,KAAK,EAAEZ,SAAS,CAACY;IAClB,CAAC,CAAC,CAACjD,OAAO,CAAC,YAAY;MACtBhB,KAAK,CAACiB,OAAO,EAAE;IAChB,CAAC,CAAC;EACH;EAEA,eAAekF,gBAAgB,CAACC,cAAyB,EAAEC,YAAiB,EAAEhF,UAAe,EAAEiF,iBAAyB,EAAE;IACzH,IAAI;MACHA,iBAAiB,GAAGA,iBAAiB,CAAChE,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC;MACtD,MAAMiE,gBAAgB,GAAGpD,QAAQ,CAAC,CAACmD,iBAAiB,CAAC,CAAC,CAAC,CAAC;MACxD,IAAID,YAAY,IAAI,CAACA,YAAY,CAACG,QAAQ,EAAE;QAC3C,MAAM,oDAAoD;MAC3D;MAEA,MAAMC,QAAQ,GAAG,MAAMJ,YAAY,CAACG,QAAQ,CAACE,WAAW,CAACN,cAAc,EAAE,UAAU,CAAC;MACpF,MAAMO,aAAa,GAAG,MAAMN,YAAY,CAACG,QAAQ,CAACE,WAAW,CAACN,cAAc,EAAE,cAAc,CAAC;MAC7F;MACA,IAAIO,aAAa,EAAE;QAClB,MAAMC,eAAe,GAAGD,aAAa,CAACE,IAAI,CAAC,UAAUC,IAAS,EAAE;UAC/D,OAAOA,IAAI,CAACC,GAAG,KAAKR,gBAAgB,IAAIO,IAAI,CAACE,IAAI,KAAKT,gBAAgB;QACvE,CAAC,CAAC;QACF,IAAI,CAACK,eAAe,EAAE;UACrB,MAAMK,cAAc,GAAGR,QAAQ,CAACS,OAAO,CAACD,cAAc;UACtD,MAAMf,gBAAgB,GAAGiB,WAAW,CAACC,sBAAsB,CAC1DhB,cAAc,EACda,cAAc,EACd5F,UAAU,EACVgF,YAAY,CAACgB,YAAY,CACzB;UACD,MAAMC,UAAU,GAAGpB,gBAAgB,CAACqB,aAAa,EAAE;UACnD,IAAIC,WAAW,GAAGL,WAAW,CAACM,cAAc,CAACnB,iBAAiB,EAAEJ,gBAAgB,EAAEoB,UAAU,CAAC;UAC7FE,WAAW,GAAGL,WAAW,CAACO,gBAAgB,CAACF,WAAW,EAAEtB,gBAAgB,CAAC;UACzES,aAAa,CAACgB,IAAI,CAACH,WAAW,CAAC;UAC/BnB,YAAY,CAACG,QAAQ,CAACoB,WAAW,CAACxB,cAAc,EAAE,cAAc,EAAEO,aAAa,CAAC;QACjF;MACD;IACD,CAAC,CAAC,OAAOkB,QAAQ,EAAE;MAClBjD,GAAG,CAACkD,OAAO,CAAE,GAAE1B,cAAc,CAACZ,KAAK,EAAG,MAAKqC,QAAS,EAAC,CAAC;IACvD;EACD;;EAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA1I,sBAAsB,CAAC4I,OAAO,GAAG,gBAAgBzB,iBAAyB,EAAEF,cAAyB,EAAEC,YAAiB,EAAE;IACzH,IAAI,CAACA,YAAY,EAAE;MAClB;MACA,OAAOlH,sBAAsB,CAAC6I,YAAY,CAAC1B,iBAAiB,EAAEF,cAAc,CAAC;IAC9E;IACA,MAAMI,QAAQ,GAAGH,YAAY,CAACG,QAAQ;IACtC,MAAMyB,KAAK,GAAG5B,YAAY,IAAIA,YAAY,CAACgB,YAAY,IAAIhB,YAAY,CAACgB,YAAY,CAACzG,QAAQ,EAAE;IAC/F,MAAMS,UAAU,GAAG4G,KAAK,IAAIA,KAAK,CAACC,YAAY,EAAE;IAChD,IAAI,CAAC7G,UAAU,EAAE;MAChB,OAAO0C,OAAO,CAACC,OAAO,CAAC,IAAI,CAAC;IAC7B;IACA,MAAMC,KAAK,GAAGuC,QAAQ,IAAIA,QAAQ,CAAC2B,OAAO,KAAK,SAAS;IACxD,IAAIlE,KAAK,EAAE;MACV,MAAMkC,gBAAgB,CAACC,cAAc,EAAEC,YAAY,EAAEhF,UAAU,EAAEiF,iBAAiB,CAAC;IACpF;IACA,OAAOnH,sBAAsB,CAACiJ,YAAY,CAAC9B,iBAAiB,EAAEF,cAAc,EAAE/E,UAAU,EAAEmF,QAAQ,EAAEH,YAAY,CAACgB,YAAY,CAAC;EAC/H,CAAC;;EAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACAlI,sBAAsB,CAACkJ,UAAU,GAAG,gBAAgBC,oBAAyB,EAAElC,cAAmB,EAAEC,YAAiB,EAAE;IACtH,IAAIkC,YAAY,GAAG,IAAI;IACvB,MAAM/B,QAAQ,GAAGH,YAAY,CAACG,QAAQ;IACtC,MAAMvC,KAAK,GAAGuC,QAAQ,IAAIA,QAAQ,CAAC2B,OAAO,KAAK,SAAS;IACxD,IAAIlE,KAAK,IAAI,CAACmC,cAAc,CAACoC,IAAI,CAAC,0CAA0C,CAAC,EAAE;MAC9E,MAAMP,KAAK,GAAG5B,YAAY,IAAIA,YAAY,CAACgB,YAAY,IAAIhB,YAAY,CAACgB,YAAY,CAACzG,QAAQ,EAAE;MAC/F,MAAMS,UAAU,GAAG4G,KAAK,IAAIA,KAAK,CAACC,YAAY,EAAE;MAChD,IAAI,CAAC7G,UAAU,EAAE;QAChB,OAAO0C,OAAO,CAACC,OAAO,CAAC,IAAI,CAAC;MAC7B;MACA,IAAI,OAAOsE,oBAAoB,KAAK,QAAQ,IAAIA,oBAAoB,CAAChD,YAAY,EAAE,EAAE;QACpF,MAAMa,gBAAgB,CAACC,cAAc,EAAEC,YAAY,EAAEhF,UAAU,EAAEiH,oBAAoB,CAAChD,YAAY,EAAE,CAAC;MACtG,CAAC,MAAM;QACN,MAAMa,gBAAgB,CAACC,cAAc,EAAEC,YAAY,EAAEhF,UAAU,EAAEiH,oBAAoB,CAAC;MACvF;IACD;IACA,IAAI,OAAOA,oBAAoB,KAAK,QAAQ,IAAIA,oBAAoB,CAAClD,GAAG,IAAIkD,oBAAoB,CAAClD,GAAG,CAAC,wBAAwB,CAAC,EAAE;MAC/H,IAAIkD,oBAAoB,CAACE,IAAI,CAAC,QAAQ,CAAC,KAAK,MAAM,IAAInC,YAAY,EAAE;QACnE;QACAG,QAAQ,CAAChC,iBAAiB,CAAC4B,cAAc,EAAE,YAAY,EAAEkC,oBAAoB,CAAC;QAC9EC,YAAY,GAAG,KAAK;MACrB;IACD;IACA,OAAOxE,OAAO,CAACC,OAAO,CAACuE,YAAY,CAAC;EACrC,CAAC;;EAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACApJ,sBAAsB,CAACsJ,YAAY,GAAG,gBAAgBnC,iBAAyB,EAAEF,cAAyB,EAAEC,YAAiB,EAAE;IAC9H,MAAMG,QAAQ,GAAGH,YAAY,CAACG,QAAQ;IACtC,MAAMvC,KAAK,GAAGuC,QAAQ,IAAIA,QAAQ,CAAC2B,OAAO,KAAK,SAAS;IACxD,IAAIlE,KAAK,EAAE;MACV,MAAMgE,KAAK,GAAG5B,YAAY,IAAIA,YAAY,CAACgB,YAAY,IAAIhB,YAAY,CAACgB,YAAY,CAACzG,QAAQ,EAAE;MAC/F,MAAMS,UAAU,GAAG4G,KAAK,IAAIA,KAAK,CAACC,YAAY,EAAE;MAChD,IAAI,CAAC7G,UAAU,EAAE;QAChB,OAAO0C,OAAO,CAACC,OAAO,CAAC,IAAI,CAAC;MAC7B;MACA,MAAMmC,gBAAgB,CAACC,cAAc,EAAEC,YAAY,EAAEhF,UAAU,EAAEiF,iBAAiB,CAAC;IACpF;IACA,OAAOvC,OAAO,CAACC,OAAO,EAAE;EACzB,CAAC;;EAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA7E,sBAAsB,CAACuJ,eAAe,GAAG,gBAAgBpC,iBAAyB,EAAEF,cAAmB,EAAEC,YAAiB,EAAE;IAC3H,IAAI,CAACD,cAAc,CAACoC,IAAI,CAAC,0CAA0C,CAAC,EAAE;MACrE,MAAMhC,QAAQ,GAAGH,YAAY,CAACG,QAAQ;MACtC,MAAMvC,KAAK,GAAGuC,QAAQ,IAAIA,QAAQ,CAAC2B,OAAO,KAAK,SAAS;MACxD,IAAIlE,KAAK,EAAE;QACV,MAAMgE,KAAK,GAAG5B,YAAY,IAAIA,YAAY,CAACgB,YAAY,IAAIhB,YAAY,CAACgB,YAAY,CAACzG,QAAQ,EAAE;QAC/F,MAAMS,UAAU,GAAG4G,KAAK,IAAIA,KAAK,CAACC,YAAY,EAAE;QAChD,IAAI,CAAC7G,UAAU,EAAE;UAChB,OAAO0C,OAAO,CAACC,OAAO,CAAC,IAAI,CAAC;QAC7B;QACA,MAAMmC,gBAAgB,CAACC,cAAc,EAAEC,YAAY,EAAEhF,UAAU,EAAEiF,iBAAiB,CAAC;MACpF;IACD;IACA,OAAOvC,OAAO,CAACC,OAAO,EAAE;EACzB,CAAC;EACD;AACA;AACA;AACA;AACA;AACA;EACA7E,sBAAsB,CAACwJ,YAAY,GAAG,gBAAgBC,cAAuB,EAAE;IAC9E,OAAOzB,WAAW,CAAC0B,iBAAiB,CAACD,cAAc,CAAC;EACrD,CAAC;EACD;AACA;AACA;AACA;AACA;AACA;AACA;EACAzJ,sBAAsB,CAAC6I,YAAY,GAAG,UAAU1B,iBAAyB,EAAEF,cAAsB,EAAE;IAClG,OAAOvF,YAAY,CAACiI,UAAU,CAAC1C,cAAc,CAAC,CAC5ClC,IAAI,CAAC,UAAU6E,MAAW,EAAE;MAC5B,OAAO5J,sBAAsB,CAACiJ,YAAY,CAAC9B,iBAAiB,EAAEF,cAAc,EAAE2C,MAAM,CAACb,YAAY,EAAE,EAAEnH,SAAS,CAAC;IAChH,CAAC,CAAC,CACD2D,KAAK,CAAC,UAAUC,MAAW,EAAE;MAC7BC,GAAG,CAACC,KAAK,CAAC,6BAA6B,EAAEF,MAAM,CAAC;MAChD,OAAO,IAAI;IACZ,CAAC,CAAC;EACJ,CAAC;EACDxF,sBAAsB,CAAC6J,wBAAwB,GAAG,UAAU1H,eAAoB,EAAED,UAAe,EAAEuH,cAAmB,EAAE;IACvH,MAAMK,WAAW,GAAG5H,UAAU,CAAC6H,SAAS,CAAC5H,eAAe,CAAC;IACzD,MAAM6H,aAAa,GAAGP,cAAc,CAACxD,GAAG,CAAC,mCAAmC,CAAC,GAAG,IAAI,GAAGrE,SAAS;IAChG,IAAI,CAAC6H,cAAc,IAAI,CAACK,WAAW,EAAE;MACpC,OAAO,EAAE;IACV;IACA,MAAMG,iBAAiB,GAAGjC,WAAW,CAACC,sBAAsB,CAACwB,cAAc,EAAEtH,eAAe,CAAC;IAC7F,MAAM+H,cAAc,GAAGjJ,WAAW,CAACkJ,gBAAgB,CAAChI,eAAe,CAAC;IAEpE,MAAMiI,aAAa,GAAGpC,WAAW,CAACqC,wBAAwB,CAACZ,cAAc,EAAEtH,eAAe,EAAE6H,aAAa,CAAC;IAC1G,IAAIM,kBAAyB,GAAG,EAAE;IAClCF,aAAa,CAACjF,OAAO,CAAC,UAAUoF,gBAAqB,EAAE;MACtD,IAAIA,gBAAgB,CAACC,cAAc,EAAE;QACpC,MAAMC,qBAAqB,GAAGC,YAAY,CAACC,0BAA0B,CAACzI,UAAU,EAAEqI,gBAAgB,CAACC,cAAc,CAAC;QAClH,MAAMI,SAAS,GAAGL,gBAAgB,CAACC,cAAc,CAACrH,OAAO,CAAE,GAAEsH,qBAAsB,GAAE,EAAE,EAAE,CAAC;QAE1F,IAAI/H,WAAW,CAACmI,oBAAoB,CAAC3I,UAAU,EAAEuI,qBAAqB,EAAExH,gBAAgB,CAAC2H,SAAS,CAAC,EAAE,IAAI,CAAC,EAAE;UAC3GN,kBAAkB,CAAC9B,IAAI,CAAC+B,gBAAgB,CAAC;QAC1C;MACD,CAAC,MAAM;QACN;QACAD,kBAAkB,CAAC9B,IAAI,CAAC+B,gBAAgB,CAAC;MAC1C;IACD,CAAC,CAAC;IAEF,MAAMO,gBAAuB,GAAG,EAAE;IAClC,MAAMC,eAAe,GAAGC,sBAAsB,CAACV,kBAAkB,EAAEL,iBAAiB,CAAC;IACrF,MAAMgB,mBAA0B,GAAG,EAAE;IACrCF,eAAe,CAAC5F,OAAO,CAAC,UAAU+F,MAAW,EAAE;MAC9C,IAAIA,MAAM,CAACtD,GAAG,EAAE;QACfqD,mBAAmB,CAACzC,IAAI,CAAC0C,MAAM,CAACtD,GAAG,CAAC;MACrC;IACD,CAAC,CAAC;IAEF0C,kBAAkB,GAAGA,kBAAkB,CAACa,MAAM,CAAC,UAAUC,KAAU,EAAE;MACpE,OAAOH,mBAAmB,CAACI,QAAQ,CAACD,KAAK,CAACxD,GAAG,CAAC;IAC/C,CAAC,CAAC;IAEF,MAAM0D,GAAG,GAAG5I,WAAW,CAAC6I,2BAA2B,CAACrB,cAAc,EAAEhI,UAAU,CAAC;MAC9EsJ,mBAAmB,GAAGF,GAAG,CAACG,wBAAwB;IACnDxL,MAAM,CAACyL,IAAI,CAACX,eAAe,CAAC,CAAC5F,OAAO,CAAC,UAAUwG,eAAuB,EAAE;MACvE,IAAIP,KAAK,GAAGL,eAAe,CAACY,eAAe,CAAC;MAC5C,MAAMC,SAAS,GAAGtB,kBAAkB,CAACqB,eAAe,CAAQ;MAC5D,IAAI,CAACC,SAAS,IAAI,CAACA,SAAS,CAACnI,aAAa,EAAE;QAC3C;MACD;MACA,MAAMmC,aAAa,GAAG3C,gBAAgB,CAAC2I,SAAS,CAACnI,aAAa,CAAC;MAC/D;MACA2H,KAAK,GAAGnL,MAAM,CAACC,MAAM,CAACkL,KAAK,EAAE;QAC5BS,KAAK,EAAED,SAAS,CAACC,KAAK;QACtBC,UAAU,EAAEF,SAAS,CAACE,UAAU;QAChCC,IAAI,EAAEH,SAAS,CAACnI,aAAa;QAC7BuI,OAAO,EAAE,IAAI;QACbC,kBAAkB,EAAE,KAAK;QACzBC,YAAY,EAAE;MACf,CAAC,CAAC;;MAEF;MACA,IAAIN,SAAS,CAACpB,cAAc,EAAE;QAC7B,MAAM2B,eAAe,GAAGP,SAAS,CAACpB,cAAc;QAChD,MAAM4B,SAAS,GAAGlK,UAAU,CAAC6H,SAAS,CAACoC,eAAe,CAAC;UACtDE,oBAAoB,GAAGnK,UAAU,CAAC6H,SAAS,CAAE,GAAEoC,eAAgB,GAAE,CAAC;UAClEG,gBAAgB,GAAGpK,UAAU,CAACZ,oBAAoB,CAAC6K,eAAe,CAAC;QAEpE,MAAMI,mBAAmB,GACxBF,oBAAoB,CAAC,8DAA8D,CAAC,IACpFA,oBAAoB,CAAC,0DAA0D,CAAC,IAChFA,oBAAoB,CAAC,4CAA4C,CAAC;QAEnE,MAAM5B,qBAAqB,GAAGC,YAAY,CAACC,0BAA0B,CAACzI,UAAU,EAAE0J,SAAS,CAACpB,cAAc,CAAC;QAC3G,MAAMI,SAAS,GAAGuB,eAAe,CAAChJ,OAAO,CAAE,GAAEsH,qBAAsB,GAAE,EAAE,EAAE,CAAC;QAC1E,IAAI+B,6BAA6B;QACjC,IAAIC,mBAAmB;QACvB,IAAI/J,WAAW,CAACmI,oBAAoB,CAAC3I,UAAU,EAAEuI,qBAAqB,EAAExH,gBAAgB,CAAC2H,SAAS,CAAC,EAAE,IAAI,CAAC,EAAE;UAC3G4B,6BAA6B,GAAGH,oBAAoB,CAAC,oDAAoD,CAAC;UAC1G,IAAIG,6BAA6B,EAAE;YAClCC,mBAAmB,GAAGD,6BAA6B,CAAE,IAAGE,YAAY,CAACN,SAAS,CAACO,KAAK,CAAE,EAAC,CAAC;UACzF;UAEAvB,KAAK,GAAGnL,MAAM,CAACC,MAAM,CAACkL,KAAK,EAAE;YAC5BY,OAAO,EAAEK,oBAAoB,CAAC,2CAA2C,CAAC,IAAIzK,SAAS;YACvFqK,kBAAkB,EAAEM,mBAAmB;YACvCL,YAAY,EAAEA,YAAY,CAACI,gBAAgB,CAACvC,SAAS,EAAE,EAAE;cAAE6C,OAAO,EAAEN;YAAiB,CAAC,CAAC;YACvFO,uBAAuB,EAAEJ,mBAAmB,GACzC,CACA;cACCK,SAAS,EAAElB,SAAS,CAACnI,aAAa;cAClCsJ,QAAQ,EAAE,IAAI;cACdC,MAAM,EAAE,CAACP,mBAAmB;YAC7B,CAAC,CACA,GACD7K;UACJ,CAAC,CAAC;QACH;MACD;;MAEA;;MAEA,IAAIwJ,KAAK,EAAE;QACV,IAAII,mBAAmB,CAAC5F,aAAa,CAAC,IAAI4F,mBAAmB,CAAC5F,aAAa,CAAC,CAACV,MAAM,GAAG,CAAC,EAAE;UACxFkG,KAAK,CAAC6B,gBAAgB,GAAGvK,WAAW,CAACwK,4BAA4B,CAAC1B,mBAAmB,CAAC5F,aAAa,CAAC,CAAC;QACtG,CAAC,MAAM;UACNwF,KAAK,CAAC6B,gBAAgB,GAAG,MAAM;QAChC;QAEA7B,KAAK,GAAGnL,MAAM,CAACC,MAAM,CAACkL,KAAK,EAAE;UAC5B+B,OAAO,EAAEvB,SAAS,CAACjI,YAAY,KAAK;QACrC,CAAC,CAAC;MACH;MAEAoH,eAAe,CAACY,eAAe,CAAC,GAAGP,KAAK;IACzC,CAAC,CAAC;IACFL,eAAe,CAAC5F,OAAO,CAAC,UAAUiI,QAAa,EAAE;MAChD,IAAIA,QAAQ,CAACrB,IAAI,KAAK,YAAY,EAAE;QACnCqB,QAAQ,CAACC,KAAK,GAAG7L,aAAa,CAAC8L,OAAO,CAAC,0BAA0B,CAAC;MACnE;MACAF,QAAQ,CAACG,UAAU,GAAGC,QAAQ,CAACC,aAAa,CAACL,QAAQ,CAACM,QAAQ,EAAEN,QAAQ,CAACO,aAAa,EAAEP,QAAQ,CAACQ,WAAW,CAAC;MAC7GR,QAAQ,CAACC,KAAK,GAAG3L,YAAY,CAACmM,gBAAgB,CAACT,QAAQ,CAACC,KAAK,EAAE5D,cAAc,CAAC,IAAI,EAAE;MACpF,IAAI2D,QAAQ,CAACU,WAAW,EAAE;QACzBhD,gBAAgB,CAACtC,IAAI,CAAC4E,QAAQ,CAACvF,IAAI,CAAC;MACrC;IACD,CAAC,CAAC;IAEFyC,kBAAkB,GAAGS,eAAe;IACpCrJ,YAAY,CAACqM,aAAa,CAACtE,cAAc,EAAE,YAAY,EAAEqB,gBAAgB,CAAC;IAE1E,OAAOR,kBAAkB;EAC1B,CAAC;EAED,SAAS0D,6BAA6B,CAAC1I,QAAa,EAAEpD,UAAe,EAAE;IAAA;IACtE,IAAIoD,QAAQ,CAACW,GAAG,CAAC,8BAA8B,CAAC,EAAE;MACjD,MAAMgI,eAAe,GAAG3I,QAAQ,CAAC4I,WAAW,EAAE,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAACA,KAAK,CAAC,GAAG,CAAC;MACvE,QAAQF,eAAe,CAACA,eAAe,CAAC/I,MAAM,GAAG,CAAC,CAAC;QAClD,KAAM,IAAC,yDAAiD,EAAC;QACzD,KAAM,IAAC,gDAAwC,EAAC;UAC/C,gCAAOhD,UAAU,CACf6H,SAAS,CAACzE,QAAQ,CAAC4I,WAAW,EAAE,CAAC,CACjCE,cAAc,0DAFT,sBAEW7K,IAAI,CAAE8K,aAAkB,IAAKA,aAAa,CAACC,eAAe,CAACjD,QAAQ,CAAE,IAAC,qCAA6B,EAAC,CAAC,CAAC,CACtHiD,eAAe;QAClB,KAAM,IAAC,qCAA6B,EAAC;UACpC,MAAMC,SAAS,GAAGjJ,QAAQ,CAAC4I,WAAW,EAAE,CAACC,KAAK,CAAC,GAAG,CAAC;UACnD,OAAOI,SAAS,CAACA,SAAS,CAACrJ,MAAM,GAAG,CAAC,CAAC;MAAC;IAE1C;IACA,OAAOtD,SAAS;EACjB;EAEA5B,sBAAsB,CAACiJ,YAAY,GAAG,UACrCuF,iBAAsB,EACtBvH,cAAmB,EACnB/E,UAAe,EACftB,SAAc,EACd6N,aAAkB,EACjB;IACD,MAAM5K,YAAY,GAAGjD,SAAS,GAAGA,SAAS,CAACyF,KAAK,CAACY,cAAc,CAAC,GAAGA,cAAc,CAACZ,KAAK,EAAE;MACxF3F,SAAS,GAAGE,SAAS,GAAG,EAAE,GAAG,YAAY;MACzCyC,gBAAgB,GAAG2E,WAAW,CAACqC,wBAAwB,CACtDpD,cAAc,EACd,IAAI,EACJrF,SAAS,EACTM,UAAU,EACVuM,aAAa,EACb7N,SAAS,EACTA,SAAS,GAAGgB,SAAS,GAAGoM,6BAA6B,CAAC/G,cAAc,CAACyH,SAAS,EAAE,EAAExM,UAAU,CAAC,CAC7F;MACDsB,eAAe,GAAGxD,sBAAsB,CAACoD,mBAAmB,CAACC,gBAAgB,EAAEmL,iBAAiB,CAAC;MACjG5I,aAAa,GAAG3C,gBAAgB,CAACuL,iBAAiB,CAAC;MACnDG,MAAM,GAAG,CAAC,CAAC/N,SAAS,IAAIA,SAAS,CAACoI,OAAO,KAAK,SAAS;IACxD,IAAIwF,iBAAiB,KAAKpO,wBAAwB,EAAE;MACnD,OAAOK,kBAAkB,CAACoD,YAAY,EAAE3B,UAAU,EAAEtB,SAAS,CAAC;IAC/D,CAAC,MAAM,IAAI4N,iBAAiB,KAAKnO,oBAAoB,EAAE;MACtD,OAAOuE,OAAO,CAACC,OAAO,CAAC,IAAI,CAAC;IAC7B,CAAC,MAAM,IAAIrB,eAAe,IAAIA,eAAe,CAACoL,QAAQ,EAAE;MACvD,OAAO5O,sBAAsB,CAAC+B,qBAAqB,CAClDkF,cAAc,EACdrD,iBAAiB,CAACC,YAAY,EAAG,GAAEnD,SAAU,aAAY,CAAC,EAC1D8C,eAAe,EACftB,UAAU,EACVtB,SAAS,CACT;IACF;IAEA,IAAI4C,eAAe,CAACqL,IAAI,KAAK,MAAM,IAAIjO,SAAS,EAAE;MACjD,OAAO+E,wBAAwB,CAACsB,cAAc,EAAErG,SAAS,EAAEgF,aAAa,CAAC;IAC1E;IAEA,MAAMkJ,eAAe,GAAGpE,YAAY,CAACqE,iBAAiB,CAACnJ,aAAa,CAAC;IACrE,MAAMuG,eAAe,GAAG3I,eAAe,CAACgH,cAAc;IACtD,IAAIrI,eAAuB;IAC3B,IAAI6M,qBAAqB;IACzB,IAAI9K,SAAc;IAClB,IAAI+K,YAAY;IAChB,IAAI9K,WAAgB;IAEpB,OAAOS,OAAO,CAACC,OAAO,EAAE,CACtBE,IAAI,CAAC,YAAY;MACjB,IAAIvB,eAAe,CAACsK,WAAW,EAAE;QAChC,OAAO3B,eAAe,CAAC+C,MAAM,CAAC,CAAC,EAAE/C,eAAe,CAACgD,WAAW,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;MACvE;MACA,OAAOzN,YAAY,CAACU,aAAa,CAAC6E,cAAc,EAAE,YAAY,EAAErG,SAAS,CAAC;IAC3E,CAAC,CAAC,CACDmE,IAAI,CAAC,UAAUqK,wBAA6B,EAAE;MAC9CjN,eAAe,GAAGiN,wBAAwB;MAC1C,OAAO1N,YAAY,CAACU,aAAa,CAAC6E,cAAc,EAAE,sBAAsB,EAAErG,SAAS,CAAC;IACrF,CAAC,CAAC,CACDmE,IAAI,CAAC,UAAUsK,8BAAmC,EAAE;MACpDL,qBAAqB,GAAGK,8BAA8B;MACtD,MAAM/C,gBAAgB,GAAGpK,UAAU,CAACZ,oBAAoB,CAACa,eAAe,GAAGyD,aAAa,CAAC;MACzF,MAAM0J,cAAc,GAAG1O,SAAS,GAAGA,SAAS,CAACyF,KAAK,CAACY,cAAc,CAAC,GAAGA,cAAc,CAACZ,KAAK,EAAE;MAC3FnC,SAAS,GAAG;QACX9C,eAAe,EAAE;UAChBmB,WAAW,EAAEL,UAAU,CAACZ,oBAAoB,CAACa,eAAe,CAAC;UAC7DoN,QAAQ,EAAEjD;QACX,CAAC;QACD/K,MAAM,EAAE;UACPgB,WAAW,EAAEL,UAAU;UACvBqN,QAAQ,EAAErN;QACX,CAAC;QACD4C,KAAK,EAAE6J;MACR,CAAC;MACDM,YAAY,GAAI,IAAGhO,WAAW,CAACkJ,gBAAgB,CAAChI,eAAe,CAAC,CAC9DgM,KAAK,CAAC,GAAG,CAAC,CACVhD,MAAM,CAAClK,WAAW,CAACuO,uBAAuB,CAAC,CAC3CC,IAAI,CAAC,GAAG,CAAE,EAAC;MACbtL,WAAW,GAAG;QACbwC,aAAa,EAAEf,aAAa;QAC5BqJ,YAAY,EAAEA,YAAY;QAC1BS,cAAc,EAAEhP,SAAS,GAAGJ,eAAe;QAC3CgF,QAAQ,EAAE2B,cAAc;QACxB/E,UAAU,EAAEA,UAAU;QACtBtB,SAAS,EAAEA,SAAS;QACpBF,SAAS,EAAEkD,iBAAiB,CAAC0L,cAAc,EAAG,GAAE5O,SAAU,aAAY,EAAEoO,eAAe,CAAC;QACxFzK,WAAW,EAAET,iBAAiB,CAAC0L,cAAc,EAAE5O,SAAS,GAAGJ,eAAe,CAAC;QAC3EyD,iBAAiB,EAAE+K,eAAe;QAClCpK,qBAAqB,EAAEsK,qBAAqB;QAC5C9K,SAAS,EAAEV,eAAe,GAAGA,eAAe,CAACoD,QAAQ,GAAG,CAAC,CAAC;QAC1DC,YAAY,EAAErD,eAAe,GAAGA,eAAe,CAACqD,YAAY,GAAGjF;MAChE,CAAC;MAED,OAAOF,YAAY,CAACiO,kBAAkB,CAACxL,WAAW,CAAC;IACpD,CAAC,CAAC,CACDY,IAAI,CAAC,UAAU6K,gBAAqB,EAAE;MACtC,IAAI,CAACA,gBAAgB,EAAE;QACtB,OAAO3L,kBAAkB,CAACC,SAAS,EAAEC,WAAW,CAAC;MAClD;MACA,OAAOS,OAAO,CAACC,OAAO,EAAE;IACzB,CAAC,CAAC,CACDE,IAAI,CAAC,YAAY;MACjB,IAAIyB,SAAS;MACb,IAAIrC,WAAW,CAAC0C,YAAY,EAAE;QAC7B;QACAL,SAAS,GAAI9D,WAAW,CAACC,aAAa,CAACsE,cAAc,CAAC,CAACpE,aAAa,EAAE,CAAoBgN,aAAa,EAAE;MAC1G;MACA,OAAOtJ,oBAAoB,CAACrC,SAAS,EAAEC,WAAW,EAAEqC,SAAS,CAAC;IAC/D,CAAC,CAAC;EACJ,CAAC;EACD,SAASsJ,oBAAoB,CAAC9N,UAAe,EAAE;IAC9C;IACA,IAAIA,UAAU,YAAY+N,MAAM,CAACC,OAAO,EAAE;MACzC,OAAO,IAAI;IACZ;IACA,OAAOtO,YAAY,CAACU,aAAa,CAACJ,UAAU,EAAEzB,2BAA2B,CAAC;EAC3E;EACA,SAAS0P,oBAAoB,CAACjO,UAAe,EAAEsI,kBAAuB,EAAE;IACvE;IACA,IAAItI,UAAU,YAAY+N,MAAM,CAACC,OAAO,EAAE;MACzC;IACD;IACAtO,YAAY,CAACqM,aAAa,CAAC/L,UAAU,EAAEzB,2BAA2B,EAAE+J,kBAAkB,CAAC;EACxF;EACA,SAAS4F,oCAAoC,CAAC/N,eAAoB,EAAED,UAAe,EAAEF,UAAe,EAAE;IACrG,IAAIsI,kBAAkB,GAAGwF,oBAAoB,CAAC9N,UAAU,CAAC;IACzD,IAAImO,eAAe;IAEnB,IAAI,CAAC7F,kBAAkB,EAAE;MACxBA,kBAAkB,GAAGtK,sBAAsB,CAAC6J,wBAAwB,CAAC1H,eAAe,EAAED,UAAU,EAAEF,UAAU,CAAC;MAC7GsI,kBAAkB,CAACnF,OAAO,CAAC,UAAUiL,MAAW,EAAE;QACjDD,eAAe,GAAG,IAAI;QACtB,IAAIC,MAAM,CAACtE,UAAU,EAAE;UACtBqE,eAAe,GAAGzO,YAAY,CAACmM,gBAAgB,CAACuC,MAAM,CAACtE,UAAU,EAAE9J,UAAU,CAAC;UAC9EoO,MAAM,CAACtE,UAAU,GAAGqE,eAAe,KAAK,IAAI,GAAGC,MAAM,CAACtE,UAAU,GAAGqE,eAAe;QACnF;MACD,CAAC,CAAC;MACF7F,kBAAkB,CAAC+F,IAAI,CAAC,UAAUC,CAAM,EAAEC,CAAM,EAAE;QACjD,IAAID,CAAC,CAACxE,UAAU,KAAKlK,SAAS,IAAI0O,CAAC,CAACxE,UAAU,KAAK,IAAI,EAAE;UACxD,OAAO,CAAC,CAAC;QACV;QACA,IAAIyE,CAAC,CAACzE,UAAU,KAAKlK,SAAS,IAAI2O,CAAC,CAACzE,UAAU,KAAK,IAAI,EAAE;UACxD,OAAO,CAAC;QACT;QACA,OAAOwE,CAAC,CAACxE,UAAU,CAAC0E,aAAa,CAACD,CAAC,CAACzE,UAAU,CAAC;MAChD,CAAC,CAAC;MACFmE,oBAAoB,CAACjO,UAAU,EAAEsI,kBAAkB,CAAC;IACrD;IACA,OAAOA,kBAAkB;EAC1B;EACAtK,sBAAsB,CAACyQ,eAAe,GAAG,UAAUzO,UAAe,EAAE;IACnE,MAAMG,eAAe,GAAGT,YAAY,CAACU,aAAa,CAACJ,UAAU,EAAE,YAAY,CAAC;IAC5E,OAAON,YAAY,CAACiI,UAAU,CAAC3H,UAAU,CAAC,CAAC+C,IAAI,CAAC,UAAU6E,MAAW,EAAE;MACtE,IAAI,CAACA,MAAM,EAAE;QACZ,OAAO,EAAE;MACV;MACA,OAAOsG,oCAAoC,CAAC/N,eAAe,EAAEyH,MAAM,CAACb,YAAY,EAAE,EAAE/G,UAAU,CAAC;MAC/F;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACD,CAAC,CAAC;EACH,CAAC;;EACDhC,sBAAsB,CAAC0Q,WAAW,GAAG,YAAY;IAChD,OAAOlD,QAAQ;EAChB,CAAC;EAAC,OAEaxN,sBAAsB;AAAA"}},{"offset":{"line":11755,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","mergeObjects","CommonUtils","FilterBar","ModelHelper","StableIdHelper","TemplateModel","PropertyFormatters","EDM","TypeUtil","CommonHelper","DelegateUtil","FilterUtils","ResourceModel","FilterBarDelegate","JSONModel","getModelType","hasValueHelp","generate","processSelectionFields","ODataFilterBarDelegate","Object","assign","EDIT_STATE_PROPERTY_NAME","SEARCH_PROPERTY_NAME","VALUE_HELP_TYPE","FETCHED_PROPERTIES_DATA_KEY","CONDITION_PATH_TO_PROPERTY_PATH_REGEX","_templateEditState","sIdPrefix","metaModel","oModifier","oThis","id","isDraftCollaborative","isCollaborationDraftSupported","oPreprocessorSettings","bindingContexts","this","createBindingContext","models","getModel","templateControlFragment","undefined","finally","destroy","_templateCustomFilter","async","oFilterBar","oSelectionFieldInfo","oMetaModel","sEntityTypePath","getCustomData","oItemModel","contextPath","item","oView","getTargetView","oController","getController","oOptions","controller","view","_getPropertyPath","sConditionPath","replace","_findSelectionField","aSelectionFields","sFlexName","find","oSelectionField","conditionPath","replaceAll","availability","_generateIdPrefix","sFilterBarId","sControlType","sNavigationPrefix","_templateValueHelp","oSettings","oParameters","idPrefix","sVhIdPrefix","conditionModel","navigationPrefix","filterFieldValueHelp","useSemanticDateRange","bUseSemanticDateRange","Promise","resolve","isXML","then","aVHElements","sAggregationName","length","forEach","elt","insertAggregation","oControl","catch","oError","error","_addXMLCustomFilterField","sPropertyPath","aDependents","getAggregation","i","oFilterField","isA","sDataProperty","getFieldPath","sFilterFieldId","getId","indexOf","_templateFilterField","pageModel","vhIdPrefix","propertyPath","sPropertyName","settings","visualFilter","oVisualFilter","converterContext","_addPropertyInfo","oParentControl","mPropertyBag","sPropertyInfoName","sPropertyInfoKey","modifier","delegate","getProperty","aPropertyInfo","hasPropertyInfo","some","prop","key","name","entityTypePath","payload","createConverterContext","appComponent","entityType","getEntityType","filterField","getFilterField","buildProperyInfo","push","setProperty","errorMsg","warning","addItem","_addP13nItem","model","getMetaModel","targets","_addFlexItem","removeItem","oFilterFieldProperty","doRemoveItem","data","addCondition","removeCondition","clearFilters","oFilterControl","clearFilterValues","fetchModel","oModel","fetchPropertiesForEntity","oEntityType","getObject","includeHidden","oConverterContext","sEntitySetPath","getEntitySetPath","mFilterFields","getConvertedFilterFields","aFetchedProperties","oFilterFieldInfo","annotationPath","sTargetPropertyPrefix","getLocationForPropertyPath","sProperty","isPropertyFilterable","aParameterFields","processedFields","processedFieldsKeys","oProps","filter","oProp","includes","oFR","getFilterRestrictionsByPath","mAllowedExpressions","FilterAllowedExpressions","keys","sFilterFieldKey","oSelField","group","groupLabel","path","tooltip","removeFromAppState","sAnnotationPath","oProperty","oPropertyAnnotations","oPropertyContext","bRemoveFromAppState","oFilterDefaultValueAnnotation","oFilterDefaultValue","$Type","context","defaultFilterConditions","fieldPath","operator","values","filterExpression","getSpecificAllowedExpression","visible","propInfo","label","getText","typeConfig","getTypeConfig","dataType","formatOptions","constraints","getLocalizedText","isParameter","setCustomData","getLineItemQualifierFromTable","_oMetaModel$getObject","annotationPaths","getMetaPath","split","Visualizations","visualization","$AnnotationPath","metaPaths","sFlexPropertyName","oAppComponent","getParent","bIsXML","template","type","sNavigationPath","getNavigationPath","sUseSemanticDateRange","sBindingPath","substr","lastIndexOf","sRetrievedEntityTypePath","sRetrievedUseSemanticDateRange","sInFilterBarId","property","filterOutNavPropBinding","join","sValueHelpType","doesValueHelpExist","bValueHelpExists","_getPageModel","_getCachedProperties","window","Element","_setCachedProperties","_getCachedOrFetchPropertiesForEntity","localGroupLabel","oGroup","sort","a","b","localeCompare","fetchProperties","getTypeUtil"],"sources":["FilterBarDelegate-dbg.js"],"mappings":"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","sourceRoot":"filterBar"}},{"offset":{"line":11760,"column":0},"map":{"version":3,"names":["FormAPI","defineUI5Class","property","type","expectedAnnotations","expectedTypes","MacroAPI"],"sourceRoot":"form","sources":["FormAPI.ts"],"sourcesContent":["import { defineUI5Class, property } from \"sap/fe/core/helpers/ClassSupport\";\nimport MacroAPI from \"../MacroAPI\";\n\n/**\n * Building block for creating a Form based on the metadata provided by OData V4.\n * <br>\n * It is designed to work based on a FieldGroup annotation but can also work if you provide a ReferenceFacet or a CollectionFacet\n *\n *\n * Usage example:\n * <pre>\n * &lt;macro:Form id=\"MyForm\" metaPath=\"@com.sap.vocabularies.UI.v1.FieldGroup#GeneralInformation\" /&gt;\n * </pre>\n *\n * @alias sap.fe.macros.Form\n * @public\n */\n@defineUI5Class(\"sap.fe.macros.form.FormAPI\")\nclass FormAPI extends MacroAPI {\n\t/**\n\t * The identifier of the form control.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\tid!: string;\n\n\t/**\n\t * Defines the relative path of the property in the metamodel, based on the current contextPath.\n\t *\n\t * @public\n\t */\n\t@property({\n\t\ttype: \"string\",\n\t\texpectedAnnotations: [\n\t\t\t\"@com.sap.vocabularies.UI.v1.FieldGroup\",\n\t\t\t\"@com.sap.vocabularies.UI.v1.CollectionFacet\",\n\t\t\t\"@com.sap.vocabularies.UI.v1.ReferenceFacet\"\n\t\t],\n\t\texpectedTypes: [\"EntitySet\", \"EntityType\", \"Singleton\", \"NavigationProperty\"]\n\t})\n\tmetaPath!: string;\n\n\t/**\n\t * The title of the form control.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\ttitle!: string;\n}\n\nexport default FormAPI;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;EAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAbA,IAeMA,OAAO,WADZC,cAAc,CAAC,4BAA4B,CAAC,UAO3CC,QAAQ,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC,UAQ5BD,QAAQ,CAAC;IACTC,IAAI,EAAE,QAAQ;IACdC,mBAAmB,EAAE,CACpB,wCAAwC,EACxC,6CAA6C,EAC7C,4CAA4C,CAC5C;IACDC,aAAa,EAAE,CAAC,WAAW,EAAE,YAAY,EAAE,WAAW,EAAE,oBAAoB;EAC7E,CAAC,CAAC,UAQDH,QAAQ,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC;IAAA;IAAA;MAAA;MAAA;QAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;IAAA;IAAA;EAAA,EA9BRG,QAAQ;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;EAAA,OAkCfN,OAAO;AAAA"}},{"offset":{"line":11830,"column":0},"map":{"version":3,"names":["sap","ui","define","ClassSupport","MacroAPI","_dec","_dec2","_dec3","_dec4","_class","_class2","_descriptor","_descriptor2","_descriptor3","property","defineUI5Class","_initializerDefineProperty","target","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","FormAPI","type","expectedAnnotations","expectedTypes","_MacroAPI","_this","_len","arguments","length","args","Array","_key","this"],"sources":["FormAPI-dbg.js"],"mappings":"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","sourceRoot":"form"}},{"offset":{"line":11835,"column":0},"map":{"version":3,"names":["FormBuildingBlock","defineBuildingBlock","name","namespace","publicNamespace","blockAttribute","type","isPublic","required","$kind","defaultValue","blockEvent","blockAggregation","slot","isDefault","oProps","configuration","mSettings","metaPath","contextPath","formContainers","undefined","oContextObjectPath","getInvolvedDataModelObjects","mExtraSettings","oFacetDefinition","targetObject","hasFieldGroup","$Type","Label","Target","$target","fullyQualifiedName","path","term","value","getContextRelativeTargetObjectPath","annotations","fields","formElements","oConverterContext","getConverterContext","oFormDefinition","createFormDefinition","isVisible","annotationPath","getPath","useFormContainerLabels","facetType","getObject","_apiId","createId","_contentId","id","displayMode","_editable","compileExpression","ifElse","equal","resolveBindingString","UI","IsEditable","getDataFieldCollection","formContainer","facetContext","facet","navigationPath","idPart","AnnotationHelper","getNavigationPath","contextPathPath","facetPath","startsWith","substring","length","titleLevel","FormHelper","getFormContainerTitleLevel","title","label","context","getFormContainerID","xml","attr","entitySet","onChange","actions","getFormContainers","indexOf","map","formContainerIdx","getModel","createBindingContext","isReferenceFacetPartOfPreview","partOfPreview","$AnnotationPath","getLayoutInformation","layout","adjustLabelSpan","breakpointL","breakpointM","breakpointXL","columnsL","columnsM","columnsXL","emptySpanL","emptySpanM","emptySpanS","emptySpanXL","labelSpanL","labelSpanM","labelSpanS","labelSpanXL","singleContainerFullSize","labelCellsLarge","emptyCellsLarge","getTemplate","onChangeStr","replace","metaPathPath","addConditionally","BuildingBlockBase"],"sourceRoot":"form","sources":["FormBuildingBlock.ts"],"sourcesContent":["import { CommunicationAnnotationTypes } from \"@sap-ux/vocabularies-types/vocabularies/Communication\";\nimport type { FacetTypes } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport { UIAnnotationTypes } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport {\n\tblockAggregation,\n\tblockAttribute,\n\tblockEvent,\n\tBuildingBlockBase,\n\tdefineBuildingBlock\n} from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockRuntime\";\nimport type { FormContainer } from \"sap/fe/core/converters/controls/Common/Form\";\nimport { createFormDefinition } from \"sap/fe/core/converters/controls/Common/Form\";\nimport { UI } from \"sap/fe/core/converters/helpers/BindingHelper\";\nimport { getFormContainerID } from \"sap/fe/core/converters/helpers/ID\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type { CompiledBindingToolkitExpression } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { compileExpression, equal, ifElse, resolveBindingString } from \"sap/fe/core/helpers/BindingToolkit\";\nimport type { PropertiesOf } from \"sap/fe/core/helpers/ClassSupport\";\nimport { getContextRelativeTargetObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport FormHelper from \"sap/fe/macros/form/FormHelper\";\nimport type { TitleLevel } from \"sap/ui/core/library\";\nimport type { $ColumnLayoutSettings } from \"sap/ui/layout/form/ColumnLayout\";\nimport type { $ResponsiveGridLayoutSettings } from \"sap/ui/layout/form/ResponsiveGridLayout\";\nimport type Context from \"sap/ui/model/Context\";\nimport AnnotationHelper from \"sap/ui/model/odata/v4/AnnotationHelper\";\nimport type { V4Context } from \"types/extension_types\";\n\ntype ColumnLayout = $ColumnLayoutSettings & {\n\ttype: \"ColumnLayout\";\n};\ntype ResponsiveGridLayout = $ResponsiveGridLayoutSettings & {\n\ttype: \"ResponsiveGridLayout\";\n};\ntype FormLayoutInformation = ColumnLayout | ResponsiveGridLayout;\n\n/**\n * Building block for creating a Form based on the metadata provided by OData V4.\n * <br>\n * It is designed to work based on a FieldGroup annotation but can also work if you provide a ReferenceFacet or a CollectionFacet\n *\n *\n * Usage example:\n * <pre>\n * &lt;macro:Form id=\"MyForm\" metaPath=\"@com.sap.vocabularies.UI.v1.FieldGroup#GeneralInformation\" /&gt;\n * </pre>\n *\n * @alias sap.fe.macros.Form\n */\n@defineBuildingBlock({\n\tname: \"Form\",\n\tnamespace: \"sap.fe.macros.internal\",\n\tpublicNamespace: \"sap.fe.macros\"\n})\nexport default class FormBuildingBlock extends BuildingBlockBase {\n\t@blockAttribute({ type: \"string\", isPublic: true, required: true })\n\tid!: string;\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true,\n\t\tisPublic: true,\n\t\t$kind: [\"EntitySet\", \"NavigationProperty\", \"EntityType\"]\n\t})\n\tcontextPath!: V4Context;\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\tisPublic: true,\n\t\trequired: true\n\t})\n\tmetaPath!: V4Context;\n\n\t/**\n\t * The manifest defined form containers to be shown in the action area of the table\n\t */\n\t@blockAttribute({ type: \"sap.ui.model.Context\" })\n\tformContainers?: FormContainer[];\n\n\t/**\n\t * Control the rendering of the form container labels\n\t */\n\t@blockAttribute({ type: \"boolean\" })\n\tuseFormContainerLabels!: boolean;\n\n\t/**\n\t * Toggle Preview: Part of Preview / Preview via 'Show More' Button\n\t */\n\t@blockAttribute({ type: \"boolean\", defaultValue: true })\n\tpartOfPreview!: boolean;\n\n\t// Other public properties or overrides\n\t@blockAttribute({ type: \"string\", isPublic: true })\n\ttitle?: string;\n\n\t/**\n\t * Defines the \"aria-level\" of the form title, titles of internally used form containers are nested subsequently\n\t */\n\t@blockAttribute({ type: \"sap.ui.core.TitleLevel\", isPublic: true, defaultValue: \"Auto\" })\n\ttitleLevel?: TitleLevel;\n\n\t@blockAttribute({ type: \"string\" })\n\tdisplayMode!: CompiledBindingToolkitExpression;\n\n\t/**\n\t * \tIf set to false, the Form is not rendered.\n\t */\n\t@blockAttribute({ type: \"string\", defaultValue: \"true\" })\n\tisVisible!: string;\n\t// Independent from the form title, can be a bit confusing in standalone usage at is not showing anything by default\n\n\t// Just proxied down to the Field may need to see if needed or not\n\t@blockEvent()\n\tonChange: string = \"\";\n\n\t@blockAggregation({ type: \"sap.fe.macros.form.FormElement\", isPublic: true, slot: \"formElements\", isDefault: true })\n\tformElements: any;\n\n\t/**\n\t * Defines the layout to be used within the form.\n\t * It defaults to the ColumnLayout, but you can also use a ResponsiveGridLayout.\n\t * All the properties of the ResponsiveGridLayout can be added to the configuration.\n\t */\n\t@blockAttribute({ type: \"object\", isPublic: true })\n\tlayout: FormLayoutInformation = { type: \"ColumnLayout\", columnsM: 2, columnsXL: 6, columnsL: 3, labelCellsLarge: 12 };\n\n\t// Useful for our dynamic thing but also depends on the metadata -> make sure this is taken into account\n\t_editable: CompiledBindingToolkitExpression;\n\n\t_apiId: string;\n\t_contentId: string;\n\tfacetType: string;\n\tconstructor(oProps: PropertiesOf<FormBuildingBlock>, configuration: any, mSettings: any) {\n\t\tsuper(oProps, configuration, mSettings);\n\t\tif (this.metaPath && this.contextPath && (this.formContainers === undefined || this.formContainers === null)) {\n\t\t\tconst oContextObjectPath = getInvolvedDataModelObjects(this.metaPath, this.contextPath);\n\t\t\tconst mExtraSettings: Record<string, any> = {};\n\t\t\tlet oFacetDefinition = oContextObjectPath.targetObject;\n\t\t\tlet hasFieldGroup = false;\n\t\t\tif (oFacetDefinition && oFacetDefinition.$Type === UIAnnotationTypes.FieldGroupType) {\n\t\t\t\t// Wrap the facet in a fake Facet annotation\n\t\t\t\thasFieldGroup = true;\n\t\t\t\toFacetDefinition = {\n\t\t\t\t\t$Type: \"com.sap.vocabularies.UI.v1.ReferenceFacet\",\n\t\t\t\t\tLabel: oFacetDefinition.Label,\n\t\t\t\t\tTarget: {\n\t\t\t\t\t\t$target: oFacetDefinition,\n\t\t\t\t\t\tfullyQualifiedName: oFacetDefinition.fullyQualifiedName,\n\t\t\t\t\t\tpath: \"\",\n\t\t\t\t\t\tterm: \"\",\n\t\t\t\t\t\ttype: \"AnnotationPath\",\n\t\t\t\t\t\tvalue: getContextRelativeTargetObjectPath(oContextObjectPath)\n\t\t\t\t\t},\n\t\t\t\t\tannotations: {},\n\t\t\t\t\tfullyQualifiedName: oFacetDefinition.fullyQualifiedName\n\t\t\t\t};\n\t\t\t\tmExtraSettings[oFacetDefinition.Target.value] = { fields: this.formElements };\n\t\t\t}\n\n\t\t\tconst oConverterContext = this.getConverterContext(\n\t\t\t\toContextObjectPath,\n\t\t\t\t/*this.contextPath*/ undefined,\n\t\t\t\tmSettings,\n\t\t\t\tmExtraSettings\n\t\t\t);\n\t\t\tconst oFormDefinition = createFormDefinition(oFacetDefinition, this.isVisible, oConverterContext);\n\t\t\tif (hasFieldGroup) {\n\t\t\t\toFormDefinition.formContainers[0].annotationPath = this.metaPath.getPath();\n\t\t\t}\n\t\t\tthis.formContainers = oFormDefinition.formContainers;\n\t\t\tthis.useFormContainerLabels = oFormDefinition.useFormContainerLabels;\n\t\t\tthis.facetType = oFacetDefinition && oFacetDefinition.$Type;\n\t\t} else {\n\t\t\tthis.facetType = this.metaPath.getObject()?.$Type;\n\t\t}\n\n\t\tif (!this.isPublic) {\n\t\t\tthis._apiId = this.createId(\"Form\")!;\n\t\t\tthis._contentId = this.id;\n\t\t} else {\n\t\t\tthis._apiId = this.id;\n\t\t\tthis._contentId = `${this.id}-content`;\n\t\t}\n\t\t// if displayMode === true -> _editable = false\n\t\t// if displayMode === false -> _editable = true\n\t\t//  => if displayMode === {myBindingValue} -> _editable = {myBindingValue} === true ? true : false\n\t\t// if DisplayMode === undefined -> _editable = {ui>/isEditable}\n\t\tif (this.displayMode !== undefined) {\n\t\t\tthis._editable = compileExpression(ifElse(equal(resolveBindingString(this.displayMode, \"boolean\"), false), true, false));\n\t\t} else {\n\t\t\tthis._editable = compileExpression(UI.IsEditable);\n\t\t}\n\t}\n\n\tgetDataFieldCollection(formContainer: FormContainer, facetContext: Context) {\n\t\tconst facet = getInvolvedDataModelObjects(facetContext).targetObject as FacetTypes;\n\t\tlet navigationPath;\n\t\tlet idPart;\n\t\tif (facet.$Type === UIAnnotationTypes.ReferenceFacet) {\n\t\t\tnavigationPath = AnnotationHelper.getNavigationPath(facet.Target.value);\n\t\t\tidPart = facet;\n\t\t} else {\n\t\t\tconst contextPathPath = this.contextPath.getPath();\n\t\t\tlet facetPath = facetContext.getPath();\n\t\t\tif (facetPath.startsWith(contextPathPath)) {\n\t\t\t\tfacetPath = facetPath.substring(contextPathPath.length);\n\t\t\t}\n\t\t\tnavigationPath = AnnotationHelper.getNavigationPath(facetPath);\n\t\t\tidPart = facetPath;\n\t\t}\n\t\tconst titleLevel = FormHelper.getFormContainerTitleLevel(this.title, this.titleLevel);\n\t\tconst title = this.useFormContainerLabels && facet ? (AnnotationHelper.label(facet, { context: facetContext }) as string) : \"\";\n\t\tconst id = this.id ? getFormContainerID(idPart) : undefined;\n\n\t\treturn xml`\n\t\t\t\t\t<macro:FormContainer\n\t\t\t\t\txmlns:macro=\"sap.fe.macros\"\n\t\t\t\t\t${this.attr(\"id\", id)}\n\t\t\t\t\ttitle=\"${title}\"\n\t\t\t\t\ttitleLevel=\"${titleLevel}\"\n\t\t\t\t\tcontextPath=\"${navigationPath ? formContainer.entitySet : this.contextPath}\"\n\t\t\t\t\tmetaPath=\"${facetContext}\"\n\t\t\t\t\tdataFieldCollection=\"${formContainer.formElements}\"\n\t\t\t\t\tnavigationPath=\"${navigationPath}\"\n\t\t\t\t\tvisible=\"${formContainer.isVisible}\"\n\t\t\t\t\tdisplayMode=\"${this.displayMode}\"\n\t\t\t\t\tonChange=\"${this.onChange}\"\n\t\t\t\t\tactions=\"${formContainer.actions}\"\n\t\t\t\t>\n\t\t\t\t<macro:formElements>\n\t\t\t\t\t<slot name=\"formElements\" />\n\t\t\t\t</macro:formElements>\n\t\t\t</macro:FormContainer>`;\n\t}\n\n\tgetFormContainers() {\n\t\tif (this.formContainers!.length === 0) {\n\t\t\treturn \"\";\n\t\t}\n\t\tif (this.facetType.indexOf(\"com.sap.vocabularies.UI.v1.CollectionFacet\") >= 0) {\n\t\t\treturn this.formContainers!.map((formContainer, formContainerIdx) => {\n\t\t\t\tif (formContainer.isVisible) {\n\t\t\t\t\tconst facetContext = this.contextPath.getModel().createBindingContext(formContainer.annotationPath, this.contextPath);\n\t\t\t\t\tconst facet = facetContext.getObject();\n\t\t\t\t\tif (\n\t\t\t\t\t\tfacet.$Type === UIAnnotationTypes.ReferenceFacet &&\n\t\t\t\t\t\tFormHelper.isReferenceFacetPartOfPreview(facet, this.partOfPreview)\n\t\t\t\t\t) {\n\t\t\t\t\t\tif (facet.Target.$AnnotationPath.$Type === CommunicationAnnotationTypes.AddressType) {\n\t\t\t\t\t\t\treturn xml`<template:with path=\"formContainers>${formContainerIdx}\" var=\"formContainer\">\n\t\t\t\t\t\t\t\t\t\t\t<template:with path=\"formContainers>${formContainerIdx}/annotationPath\" var=\"facet\">\n\t\t\t\t\t\t\t\t\t\t\t\t<core:Fragment fragmentName=\"sap.fe.macros.form.AddressSection\" type=\"XML\" />\n\t\t\t\t\t\t\t\t\t\t\t</template:with>\n\t\t\t\t\t\t\t\t\t\t</template:with>`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn this.getDataFieldCollection(formContainer, facetContext);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn \"\";\n\t\t\t});\n\t\t} else if (this.facetType === \"com.sap.vocabularies.UI.v1.ReferenceFacet\") {\n\t\t\treturn this.formContainers!.map((formContainer) => {\n\t\t\t\tif (formContainer.isVisible) {\n\t\t\t\t\tconst facetContext = this.contextPath.getModel().createBindingContext(formContainer.annotationPath, this.contextPath);\n\t\t\t\t\treturn this.getDataFieldCollection(formContainer, facetContext);\n\t\t\t\t} else {\n\t\t\t\t\treturn \"\";\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn xml``;\n\t}\n\n\t/**\n\t * Create the proper layout information based on the `layout` property defined externally.\n\t *\n\t * @returns The layout information for the xml.\n\t */\n\tgetLayoutInformation() {\n\t\tswitch (this.layout.type) {\n\t\t\tcase \"ResponsiveGridLayout\":\n\t\t\t\treturn xml`<f:ResponsiveGridLayout adjustLabelSpan=\"${this.layout.adjustLabelSpan}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreakpointL=\"${this.layout.breakpointL}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreakpointM=\"${this.layout.breakpointM}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreakpointXL=\"${this.layout.breakpointXL}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumnsL=\"${this.layout.columnsL}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumnsM=\"${this.layout.columnsM}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumnsXL=\"${this.layout.columnsXL}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\temptySpanL=\"${this.layout.emptySpanL}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\temptySpanM=\"${this.layout.emptySpanM}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\temptySpanS=\"${this.layout.emptySpanS}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\temptySpanXL=\"${this.layout.emptySpanXL}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabelSpanL=\"${this.layout.labelSpanL}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabelSpanM=\"${this.layout.labelSpanM}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabelSpanS=\"${this.layout.labelSpanS}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabelSpanXL=\"${this.layout.labelSpanXL}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsingleContainerFullSize=\"${this.layout.singleContainerFullSize}\" />`;\n\t\t\tcase \"ColumnLayout\":\n\t\t\tdefault:\n\t\t\t\treturn xml`<f:ColumnLayout\n\t\t\t\t\t\t\t\tcolumnsM=\"${this.layout.columnsM}\"\n\t\t\t\t\t\t\t\tcolumnsL=\"${this.layout.columnsL}\"\n\t\t\t\t\t\t\t\tcolumnsXL=\"${this.layout.columnsXL}\"\n\t\t\t\t\t\t\t\tlabelCellsLarge=\"${this.layout.labelCellsLarge}\"\n\t\t\t\t\t\t\t\temptyCellsLarge=\"${this.layout.emptyCellsLarge}\" />`;\n\t\t}\n\t}\n\n\tgetTemplate() {\n\t\tconst onChangeStr = (this.onChange && this.onChange.replace(\"{\", \"\\\\{\").replace(\"}\", \"\\\\}\")) || \"\";\n\t\tconst metaPathPath = this.metaPath.getPath();\n\t\tconst contextPathPath = this.contextPath.getPath();\n\t\tif (!this.isVisible) {\n\t\t\treturn xml``;\n\t\t} else {\n\t\t\treturn xml`<macro:FormAPI xmlns:macro=\"sap.fe.macros.form\"\n\t\t\t\t\txmlns:macrodata=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\"\n\t\t\t\t\txmlns:f=\"sap.ui.layout.form\"\n\t\t\t\t\txmlns:fl=\"sap.ui.fl\"\n\t\t\t\t\tid=\"${this._apiId}\"\n\t\t\t\t\tmetaPath=\"${metaPathPath}\"\n\t\t\t\t\tcontextPath=\"${contextPathPath}\">\n\t\t\t\t<f:Form\n\t\t\t\t\tfl:delegate='{\n\t\t\t\t\t\t\"name\": \"sap/fe/macros/form/FormDelegate\",\n\t\t\t\t\t\t\"delegateType\": \"complete\"\n\t\t\t\t\t}'\n\t\t\t\t\tid=\"${this._contentId}\"\n\t\t\t\t\teditable=\"${this._editable}\"\n\t\t\t\t\tmacrodata:entitySet=\"{contextPath>@sapui.name}\"\n\t\t\t\t\tvisible=\"${this.isVisible}\"\n\t\t\t\t\tclass=\"sapUxAPObjectPageSubSectionAlignContent\"\n\t\t\t\t\tmacrodata:navigationPath=\"${contextPathPath}\"\n\t\t\t\t\tmacrodata:onChange=\"${onChangeStr}\"\n\t\t\t\t>\n\t\t\t\t\t${this.addConditionally(\n\t\t\t\t\t\tthis.title !== undefined,\n\t\t\t\t\t\txml`<f:title>\n\t\t\t\t\t\t\t<core:Title level=\"${this.titleLevel}\" text=\"${this.title}\" />\n\t\t\t\t\t\t</f:title>`\n\t\t\t\t\t)}\n\t\t\t\t\t<f:layout>\n\t\t\t\t\t${this.getLayoutInformation()}\n\n\t\t\t\t\t</f:layout>\n\t\t\t\t\t<f:formContainers>\n\t\t\t\t\t\t${this.getFormContainers()}\n\t\t\t\t\t</f:formContainers>\n\t\t\t\t</f:Form>\n\t\t\t</macro:FormAPI>`;\n\t\t}\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":12262,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlock","BuildingBlockRuntime","Form","BindingHelper","ID","MetaModelConverter","BindingToolkit","DataModelPathHelper","FormHelper","AnnotationHelper","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_exports","getContextRelativeTargetObjectPath","resolveBindingString","ifElse","equal","compileExpression","getInvolvedDataModelObjects","getFormContainerID","UI","createFormDefinition","xml","defineBuildingBlock","BuildingBlockBase","blockEvent","blockAttribute","blockAggregation","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","FormBuildingBlock","name","namespace","publicNamespace","type","isPublic","required","$kind","defaultValue","slot","isDefault","_BuildingBlockBase","oProps","configuration","mSettings","_this","this","metaPath","contextPath","formContainers","oContextObjectPath","mExtraSettings","oFacetDefinition","targetObject","hasFieldGroup","$Type","Label","Target","$target","fullyQualifiedName","path","term","annotations","fields","formElements","oConverterContext","getConverterContext","oFormDefinition","isVisible","annotationPath","getPath","useFormContainerLabels","facetType","_this$metaPath$getObj","getObject","_apiId","createId","_contentId","id","displayMode","_editable","IsEditable","_proto","getDataFieldCollection","formContainer","facetContext","facet","navigationPath","idPart","getNavigationPath","contextPathPath","facetPath","startsWith","substring","length","titleLevel","getFormContainerTitleLevel","title","label","attr","entitySet","onChange","actions","getFormContainers","indexOf","map","formContainerIdx","getModel","createBindingContext","isReferenceFacetPartOfPreview","partOfPreview","$AnnotationPath","getLayoutInformation","layout","adjustLabelSpan","breakpointL","breakpointM","breakpointXL","columnsL","columnsM","columnsXL","emptySpanL","emptySpanM","emptySpanS","emptySpanXL","labelSpanL","labelSpanM","labelSpanS","labelSpanXL","singleContainerFullSize","labelCellsLarge","emptyCellsLarge","getTemplate","onChangeStr","replace","metaPathPath","addConditionally"],"sources":["FormBuildingBlock-dbg.js"],"mappings":"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","sourceRoot":"form"}},{"offset":{"line":12340,"column":0},"map":{"version":3,"names":["FormContainerAPI","defineUI5Class","property","type","xmlEventHandler","props","setParentBindingContext","formContainerId","toggleDetails","showDetails","MacroAPI","isDependentBound"],"sourceRoot":"form","sources":["FormContainerAPI.ts"],"sourcesContent":["import { defineUI5Class, property, xmlEventHandler } from \"sap/fe/core/helpers/ClassSupport\";\nimport MacroAPI from \"../MacroAPI\";\n\n/**\n * @alias sap.fe.macros.form.FormContainerAPI\n * @private\n */\n@defineUI5Class(\"sap.fe.macros.form.FormContainerAPI\")\nclass FormContainerAPI extends MacroAPI {\n\t/**\n\t * The identifier of the form container control.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\tformContainerId!: string;\n\n\t@property({ type: \"boolean\" })\n\tshowDetails = false;\n\n\tstatic isDependentBound: boolean = true;\n\n\tconstructor(props?: any) {\n\t\tsuper(props, true);\n\t\tthis.setParentBindingContext(\"internal\", `controls/${this.formContainerId}`);\n\t}\n\n\t@xmlEventHandler()\n\ttoggleDetails() {\n\t\tthis.showDetails = !this.showDetails;\n\t}\n}\n\nexport default FormContainerAPI;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;EAGA;AACA;AACA;AACA;EAHA,IAKMA,gBAAgB,WADrBC,cAAc,CAAC,qCAAqC,CAAC,UAOpDC,QAAQ,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC,UAG5BD,QAAQ,CAAC;IAAEC,IAAI,EAAE;EAAU,CAAC,CAAC,UAU7BC,eAAe,EAAE;IAAA;IAlBlB;AACD;AACA;AACA;AACA;;IASC,0BAAYC,KAAW,EAAE;MAAA;MACxB,6BAAMA,KAAK,EAAE,IAAI,CAAC;MAAC;MAAA;MACnB,MAAKC,uBAAuB,CAAC,UAAU,EAAG,YAAW,MAAKC,eAAgB,EAAC,CAAC;MAAC;IAC9E;IAAC;IAAA,OAGDC,aAAa,GADb,yBACgB;MACf,IAAI,CAACC,WAAW,GAAG,CAAC,IAAI,CAACA,WAAW;IACrC,CAAC;IAAA;EAAA,EAtB6BC,QAAQ,WAY/BC,gBAAgB,GAAY,IAAI;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;MAAA,OAFzB,KAAK;IAAA;EAAA;EAAA,OAeLX,gBAAgB;AAAA"}},{"offset":{"line":12401,"column":0},"map":{"version":3,"names":["sap","ui","define","ClassSupport","MacroAPI","_dec","_dec2","_dec3","_dec4","_class","_class2","_descriptor","_descriptor2","_class3","xmlEventHandler","property","defineUI5Class","_initializerDefineProperty","target","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","FormContainerAPI","type","_MacroAPI","props","_this","this","setParentBindingContext","formContainerId","_proto","toggleDetails","showDetails","isDependentBound","getOwnPropertyDescriptor"],"sources":["FormContainerAPI-dbg.js"],"mappings":"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","sourceRoot":"form"}},{"offset":{"line":12406,"column":0},"map":{"version":3,"names":["FormContainerBuildingBlock","defineBuildingBlock","name","namespace","fragment","blockAttribute","type","required","isPublic","$kind","defaultValue","blockAggregation","blockEvent","oProps","externalConfiguration","mSettings","entitySet","contextPath","formElements","Object","keys","length","oContextObjectPath","getInvolvedDataModelObjects","metaPath","mExtraSettings","oFacetDefinition","targetObject","$Type","Label","Target","$target","fullyQualifiedName","path","term","value","getContextRelativeTargetObjectPath","annotations","fields","oConverterContext","getConverterContext","undefined","oFormDefinition","createFormDefinition","dataFieldCollection","formContainers","BuildingBlockBase"],"sourceRoot":"form","sources":["FormContainerBuildingBlock.ts"],"sourcesContent":["import {\n\tblockAggregation,\n\tblockAttribute,\n\tblockEvent,\n\tBuildingBlockBase,\n\tdefineBuildingBlock\n} from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport { createFormDefinition } from \"sap/fe/core/converters/controls/Common/Form\";\nimport type { ConfigurableObject } from \"sap/fe/core/converters/helpers/ConfigurableObject\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type { PropertiesOf } from \"sap/fe/core/helpers/ClassSupport\";\nimport { getContextRelativeTargetObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\n\n/**\n * @classdesc\n * Building block for creating a FormContainer based on the provided OData V4 metadata.\n *\n *\n * Usage example:\n * <pre>\n * &lt;macro:FormContainer\n *   id=\"SomeId\"\n *   entitySet=\"{entitySet>}\"\n *   dataFieldCollection =\"{dataFieldCollection>}\"\n *   title=\"someTitle\"\n *   navigationPath=\"{ToSupplier}\"\n *   visible=true\n *   onChange=\".handlers.onFieldValueChange\"\n * /&gt;\n * </pre>\n * @class sap.fe.macros.FormContainer\n * @hideconstructor\n * @private\n * @experimental\n */\n@defineBuildingBlock({ name: \"FormContainer\", namespace: \"sap.fe.macros\", fragment: \"sap.fe.macros.form.FormContainer\" })\nexport default class FormContainerBuildingBlock extends BuildingBlockBase {\n\t@blockAttribute({ type: \"string\" })\n\tid!: string;\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true,\n\t\tisPublic: true,\n\t\t$kind: [\"EntitySet\", \"NavigationProperty\", \"EntityType\", \"Singleton\"]\n\t})\n\tcontextPath!: Context;\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\"\n\t})\n\tentitySet!: Context;\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\tisPublic: true,\n\t\trequired: true\n\t})\n\tmetaPath!: Context;\n\n\t/**\n\t * Metadata path to the dataFieldCollection\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\"\n\t})\n\tdataFieldCollection?: any;\n\n\t/**\n\t * Control whether the form is in displayMode or not\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tdisplayMode: boolean = false;\n\t/**\n\t * Title of the form container\n\t */\n\t@blockAttribute({ type: \"string\" })\n\ttitle?: string;\n\t/**\n\t * Defines the \"aria-level\" of the form title, titles of internally used form containers are nested subsequently\n\t */\n\t@blockAttribute({ type: \"sap.ui.core.TitleLevel\", isPublic: true, defaultValue: \"Auto\" })\n\ttitleLevel?: string;\n\n\t/**\n\t * Binding the form container using a navigation path\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tnavigationPath?: string;\n\t/**\n\t * Binding the visibility of the form container using an expression binding or Boolean\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tvisible?: string;\n\t/**\n\t * Flex designtime settings to be applied\n\t */\n\t@blockAttribute({ type: \"string\", defaultValue: \"sap/fe/macros/form/FormContainer.designtime\" })\n\tdesigntimeSettings!: string;\n\t@blockAttribute({ type: \"sap.ui.model.Context\" })\n\tactions!: any[];\n\n\t@blockAggregation({ type: \"sap.fe.macros.form.FormElement\" })\n\tformElements: Record<string, ConfigurableObject> = {};\n\n\t// Just proxied down to the Field may need to see if needed or not\n\t@blockEvent()\n\tonChange!: Function;\n\n\tdefinition: any;\n\tconstructor(oProps: PropertiesOf<FormContainerBuildingBlock>, externalConfiguration: any, mSettings: any) {\n\t\tsuper(oProps);\n\t\tthis.entitySet = oProps.contextPath!;\n\t\tif (this.formElements && Object.keys(this.formElements).length > 0) {\n\t\t\tconst oContextObjectPath = getInvolvedDataModelObjects(this.metaPath, this.contextPath);\n\t\t\tconst mExtraSettings: Record<string, any> = {};\n\t\t\tlet oFacetDefinition = oContextObjectPath.targetObject;\n\t\t\t// Wrap the facet in a fake Facet annotation\n\t\t\toFacetDefinition = {\n\t\t\t\t$Type: \"com.sap.vocabularies.UI.v1.ReferenceFacet\",\n\t\t\t\tLabel: oFacetDefinition.Label,\n\t\t\t\tTarget: {\n\t\t\t\t\t$target: oFacetDefinition,\n\t\t\t\t\tfullyQualifiedName: oFacetDefinition.fullyQualifiedName,\n\t\t\t\t\tpath: \"\",\n\t\t\t\t\tterm: \"\",\n\t\t\t\t\ttype: \"AnnotationPath\",\n\t\t\t\t\tvalue: getContextRelativeTargetObjectPath(oContextObjectPath)\n\t\t\t\t},\n\t\t\t\tannotations: {},\n\t\t\t\tfullyQualifiedName: oFacetDefinition.fullyQualifiedName\n\t\t\t};\n\t\t\tmExtraSettings[oFacetDefinition.Target.value] = { fields: this.formElements };\n\t\t\tconst oConverterContext = this.getConverterContext(\n\t\t\t\toContextObjectPath,\n\t\t\t\t/*this.contextPath*/ undefined,\n\t\t\t\tmSettings,\n\t\t\t\tmExtraSettings\n\t\t\t);\n\t\t\tconst oFormDefinition = createFormDefinition(oFacetDefinition, \"true\", oConverterContext);\n\n\t\t\tthis.dataFieldCollection = oFormDefinition.formContainers[0].formElements;\n\t\t}\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":12648,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlock","Form","MetaModelConverter","DataModelPathHelper","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_exports","getContextRelativeTargetObjectPath","getInvolvedDataModelObjects","createFormDefinition","defineBuildingBlock","BuildingBlockBase","blockEvent","blockAttribute","blockAggregation","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","FormContainerBuildingBlock","name","namespace","fragment","type","required","isPublic","$kind","defaultValue","_BuildingBlockBase","oProps","externalConfiguration","mSettings","_this","this","entitySet","contextPath","formElements","length","oContextObjectPath","metaPath","mExtraSettings","oFacetDefinition","targetObject","$Type","Label","Target","$target","fullyQualifiedName","path","term","annotations","fields","oConverterContext","getConverterContext","oFormDefinition","dataFieldCollection","formContainers"],"sources":["FormContainerBuildingBlock-dbg.js"],"mappings":"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","sourceRoot":"form"}},{"offset":{"line":12653,"column":0},"map":{"version":3,"names":["Delegate","createLayout","mPropertyBag","oModifier","modifier","oMetaModel","appComponent","getMetaModel","oForm","element","sEntitySet","DelegateUtil","getCustomData","sPath","startsWith","oFormContainer","parentSelector","bySelector","view","undefined","sNavigationPath","sBindingPath","oMetaModelContext","getMetaContext","oPropertyContext","createBindingContext","bindingPath","sFormId","sId","id","oParameters","sPropertyName","sValueHelpType","oControl","fnTemplateValueHelp","sFragmentName","oThis","JSONModel","idPrefix","fieldSelector","oPreprocessorSettings","bindingContexts","entitySet","contextPath","property","this","models","metaModel","templateControlFragment","fnTemplateFormElement","oView","navigationPath","sOnChangeCustomData","sDisplayModeCustomData","_flexId","onChange","Common","removeEscapeCharacters","displayMode","dataField","bValueHelpRequired","isValueHelpRequired","bValueHelpExists","doesValueHelpExist","oValueHelp","oField","control","valueHelp","getPropertyInfo","_isComplexType","mProperty","$Type","toLowerCase","indexOf","_startsWithNavigationProperty","sPropertyPath","aNavigationProperties","some","sNavProp","_enrichProperty","mElement","mPropertyAnnotations","sEntityType","oElement","sAggregationName","mProp","name","entityType","mDataFieldDefaultAnnotation","sLabel","Label","label","mHiddenAnnotation","hideFromReveal","$Path","getBindingContext","getProperty","mFieldControlAnnotation","$EnumMember","sFieldControlPath","Path","bListBinding","getBinding","ListBinding","iFieldControlValue","unsupported","_convertMetadataToDelegateFormat","mODataEntityType","aProperties","sElementName","$kind","push","mPropAnnotations","getObject","_getBindingPath","mPayload","path","vBinding","data","getPath","_getODataPropertiesOfModel","oModel","getModel","modelName","isA","sBindingContextPath","oMetaModelContextObject","Promise","resolve","then","aggregationName","payload"],"sourceRoot":"form","sources":["FormDelegate.ts"],"sourcesContent":["import type AppComponent from \"sap/fe/core/AppComponent\";\nimport Common from \"sap/fe/macros/CommonHelper\";\nimport DelegateUtil from \"sap/fe/macros/DelegateUtil\";\nimport type Control from \"sap/ui/core/Control\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport ListBinding from \"sap/ui/model/ListBinding\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\ntype DelegateProperty = {\n\tname: string;\n\tbindingPath: string;\n\tentityType: string;\n\tlabel?: string;\n\thideFromReveal?: any;\n\tunsupported?: boolean;\n};\n\nconst Delegate = {\n\t/**\n\t * @param mPropertyBag Object with parameters as properties\n\t * @param mPropertyBag.modifier Modifier to harmonize access, creation and manipulation to controls in XML Views and JS Controls\n\t * @param [mPropertyBag.appComponent] Needed to calculate the correct ID in case you provide a selector\n\t * @param [mPropertyBag.view] XML node of the view, required for XML case to create nodes and to find elements\n\t * @param [mPropertyBag.fieldSelector] Selector to calculate the ID for the control that is created\n\t * @param mPropertyBag.bindingPath Runtime binding path the control should be bound to\n\t * @param mPropertyBag.payload Payload parameter attached to the delegate, undefined if no payload was assigned\n\t * @param mPropertyBag.controlType Control type of the element the delegate is attached to\n\t * @param mPropertyBag.aggregationName Name of the aggregation the delegate should provide additional elements\n\t * @param mPropertyBag.element\n\t * @param mPropertyBag.parentSelector\n\t * @returns Map containing the controls to add\n\t */\n\tcreateLayout: async function (mPropertyBag: {\n\t\tmodifier: any;\n\t\tappComponent?: AppComponent;\n\t\tview?: Element | undefined;\n\t\tfieldSelector?: { id?: string; isLocalId?: boolean } | undefined;\n\t\tbindingPath: string;\n\t\tpayload: object;\n\t\tcontrolType: string;\n\t\taggregationName: string;\n\t\telement?: any;\n\t\tparentSelector?: any;\n\t}) {\n\t\tconst oModifier = mPropertyBag.modifier,\n\t\t\toMetaModel = mPropertyBag.appComponent?.getMetaModel(),\n\t\t\toForm = mPropertyBag.element;\n\n\t\tlet sEntitySet = await DelegateUtil.getCustomData(oForm, \"entitySet\", oModifier);\n\t\tif (!sEntitySet) {\n\t\t\tsEntitySet = await DelegateUtil.getCustomData(oForm, \"navigationPath\", oModifier);\n\t\t}\n\t\tconst sPath = sEntitySet.startsWith(\"/\") ? `${sEntitySet}` : `/${sEntitySet}`;\n\t\tconst oFormContainer = mPropertyBag.parentSelector\n\t\t\t? mPropertyBag.modifier.bySelector(mPropertyBag.parentSelector, mPropertyBag.appComponent, mPropertyBag.view)\n\t\t\t: undefined;\n\t\tconst sNavigationPath = await DelegateUtil.getCustomData(oFormContainer, \"navigationPath\", oModifier);\n\t\tconst sBindingPath = sNavigationPath ? `${sPath}/${sNavigationPath}` : sPath;\n\t\tconst oMetaModelContext = oMetaModel?.getMetaContext(sBindingPath);\n\t\tconst oPropertyContext = oMetaModel?.createBindingContext(`${sBindingPath}/${mPropertyBag.bindingPath}`);\n\t\tconst sFormId = mPropertyBag.element.sId || mPropertyBag.element.id;\n\n\t\tconst oParameters = {\n\t\t\tsPropertyName: mPropertyBag.bindingPath,\n\t\t\tsBindingPath: sBindingPath,\n\t\t\tsValueHelpType: \"FormVH\",\n\t\t\toControl: oForm,\n\t\t\toMetaModel: oMetaModel,\n\t\t\toModifier: oModifier\n\t\t};\n\n\t\tfunction fnTemplateValueHelp(sFragmentName: any) {\n\t\t\tconst oThis = new JSONModel({\n\t\t\t\t\tid: sFormId,\n\t\t\t\t\tidPrefix: mPropertyBag.fieldSelector?.id\n\t\t\t\t}),\n\t\t\t\toPreprocessorSettings = {\n\t\t\t\t\tbindingContexts: {\n\t\t\t\t\t\tentitySet: oMetaModelContext,\n\t\t\t\t\t\tcontextPath: oMetaModelContext,\n\t\t\t\t\t\tproperty: oPropertyContext,\n\t\t\t\t\t\tthis: oThis.createBindingContext(\"/\")\n\t\t\t\t\t},\n\t\t\t\t\tmodels: {\n\t\t\t\t\t\tthis: oThis,\n\t\t\t\t\t\tentitySet: oMetaModel,\n\t\t\t\t\t\tcontextPath: oMetaModel,\n\t\t\t\t\t\tmetaModel: oMetaModel,\n\t\t\t\t\t\tproperty: oMetaModel\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\treturn DelegateUtil.templateControlFragment(sFragmentName, oPreprocessorSettings, {}, oModifier);\n\t\t}\n\n\t\tasync function fnTemplateFormElement(sFragmentName: any, oView: any, navigationPath: string) {\n\t\t\tconst sOnChangeCustomData: string = await DelegateUtil.getCustomData(oForm, \"onChange\", oModifier);\n\t\t\tconst sDisplayModeCustomData = await DelegateUtil.getCustomData(oForm, \"displayMode\", oModifier);\n\t\t\tconst oThis = new JSONModel({\n\t\t\t\t// properties and events of Field macro\n\t\t\t\t_flexId: mPropertyBag.fieldSelector?.id,\n\t\t\t\tonChange: Common.removeEscapeCharacters(sOnChangeCustomData),\n\t\t\t\tdisplayMode: Common.removeEscapeCharacters(sDisplayModeCustomData),\n\t\t\t\tnavigationPath: navigationPath\n\t\t\t});\n\t\t\tconst oPreprocessorSettings = {\n\t\t\t\tbindingContexts: {\n\t\t\t\t\tentitySet: oMetaModelContext,\n\t\t\t\t\tdataField: oPropertyContext,\n\t\t\t\t\tthis: oThis.createBindingContext(\"/\")\n\t\t\t\t},\n\t\t\t\tmodels: {\n\t\t\t\t\tthis: oThis,\n\t\t\t\t\tentitySet: oMetaModel,\n\t\t\t\t\tmetaModel: oMetaModel,\n\t\t\t\t\tdataField: oMetaModel\n\t\t\t\t}\n\t\t\t};\n\n\t\t\treturn DelegateUtil.templateControlFragment(sFragmentName, oPreprocessorSettings, { view: oView }, oModifier);\n\t\t}\n\n\t\tconst bValueHelpRequired = await DelegateUtil.isValueHelpRequired(oParameters);\n\t\tconst bValueHelpExists = await DelegateUtil.doesValueHelpExist(oParameters);\n\t\tlet oValueHelp;\n\t\tif (bValueHelpRequired && !bValueHelpExists) {\n\t\t\toValueHelp = await fnTemplateValueHelp(\"sap.fe.macros.form.ValueHelpWrapper\");\n\t\t}\n\t\tconst oField = await fnTemplateFormElement(\"sap.fe.macros.form.FormElementFlexibility\", mPropertyBag.view, sNavigationPath);\n\t\treturn {\n\t\t\tcontrol: oField,\n\t\t\tvalueHelp: oValueHelp\n\t\t};\n\t},\n\t// getPropertyInfo is a patched version of ODataV4ReadDelegates to dela with navigationPath\n\tgetPropertyInfo: function (mPropertyBag: any) {\n\t\tfunction _isComplexType(mProperty: any) {\n\t\t\tif (mProperty && mProperty.$Type) {\n\t\t\t\tif (mProperty.$Type.toLowerCase().indexOf(\"edm\") !== 0) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\t//Check if a given property path starts with a navigation property.\n\t\tfunction _startsWithNavigationProperty(sPropertyPath: string, aNavigationProperties: string[]) {\n\t\t\treturn aNavigationProperties.some(function (sNavProp) {\n\t\t\t\treturn sPropertyPath.startsWith(sNavProp);\n\t\t\t});\n\t\t}\n\n\t\tfunction _enrichProperty(\n\t\t\tsPropertyPath: string,\n\t\t\tmElement: any,\n\t\t\tmPropertyAnnotations: any,\n\t\t\tsEntityType: string,\n\t\t\toElement: Control,\n\t\t\tsAggregationName: string,\n\t\t\taNavigationProperties: string[]\n\t\t): DelegateProperty {\n\t\t\tconst mProp: DelegateProperty = {\n\t\t\t\tname: sPropertyPath,\n\t\t\t\tbindingPath: sPropertyPath,\n\t\t\t\tentityType: sEntityType\n\t\t\t};\n\t\t\t// get label information, either via DataFieldDefault annotation (if exists) or Label annotation\n\t\t\tconst mDataFieldDefaultAnnotation = mPropertyAnnotations[\"@com.sap.vocabularies.UI.v1.DataFieldDefault\"];\n\t\t\tconst sLabel =\n\t\t\t\t(mDataFieldDefaultAnnotation && mDataFieldDefaultAnnotation.Label) ||\n\t\t\t\tmPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Label\"];\n\t\t\tmProp.label = sLabel || \"[LABEL_MISSING: \" + sPropertyPath + \"]\";\n\t\t\t// evaluate Hidden annotation\n\t\t\tconst mHiddenAnnotation = mPropertyAnnotations[\"@com.sap.vocabularies.UI.v1.Hidden\"];\n\t\t\tmProp.hideFromReveal = mHiddenAnnotation;\n\t\t\tif (mHiddenAnnotation && mHiddenAnnotation.$Path) {\n\t\t\t\tmProp.hideFromReveal = oElement.getBindingContext()?.getProperty(mHiddenAnnotation.$Path);\n\t\t\t}\n\t\t\t// evaluate FieldControl annotation\n\t\t\tlet mFieldControlAnnotation;\n\t\t\tif (!mProp.hideFromReveal) {\n\t\t\t\tmFieldControlAnnotation = mPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.FieldControl\"];\n\t\t\t\tif (mFieldControlAnnotation) {\n\t\t\t\t\tmProp.hideFromReveal = mFieldControlAnnotation.$EnumMember === \"com.sap.vocabularies.Common.v1.FieldControlType/Hidden\";\n\t\t\t\t}\n\t\t\t}\n\t\t\t// @runtime hidden by field control value = 0\n\t\t\tmFieldControlAnnotation = mPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.FieldControl\"];\n\t\t\tconst sFieldControlPath = mFieldControlAnnotation && mFieldControlAnnotation.Path;\n\t\t\tif (sFieldControlPath && !mProp.hideFromReveal) {\n\t\t\t\t// if the binding is a list binding, skip the check for field control\n\t\t\t\tconst bListBinding = oElement.getBinding(sAggregationName) instanceof ListBinding;\n\t\t\t\tif (!bListBinding) {\n\t\t\t\t\tconst iFieldControlValue = oElement.getBindingContext()?.getProperty(sFieldControlPath);\n\t\t\t\t\tmProp.hideFromReveal = iFieldControlValue === 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// no support for DataFieldFor/WithAction and DataFieldFor/WithIntentBasedNavigation within DataFieldDefault annotation\n\t\t\tif (\n\t\t\t\tmDataFieldDefaultAnnotation &&\n\t\t\t\t(mDataFieldDefaultAnnotation.$Type === \"com.sap.vocabularies.UI.v1.DataFieldForAction\" ||\n\t\t\t\t\tmDataFieldDefaultAnnotation.$Type === \"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation\" ||\n\t\t\t\t\tmDataFieldDefaultAnnotation.$Type === \"com.sap.vocabularies.UI.v1.DataFieldWithAction\" ||\n\t\t\t\t\tmDataFieldDefaultAnnotation.$Type === \"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation\")\n\t\t\t) {\n\t\t\t\tmProp.unsupported = true;\n\t\t\t}\n\t\t\t// no support for navigation properties and complex properties\n\t\t\tif (_startsWithNavigationProperty(sPropertyPath, aNavigationProperties) || _isComplexType(mElement)) {\n\t\t\t\tmProp.unsupported = true;\n\t\t\t}\n\t\t\treturn mProp;\n\t\t}\n\n\t\t// Convert metadata format to delegate format.\n\t\tfunction _convertMetadataToDelegateFormat(\n\t\t\tmODataEntityType: any,\n\t\t\tsEntityType: string,\n\t\t\toMetaModel: ODataMetaModel,\n\t\t\toElement: Control,\n\t\t\tsAggregationName: string\n\t\t): DelegateProperty[] {\n\t\t\tconst aProperties = [];\n\t\t\tlet sElementName = \"\";\n\t\t\tconst aNavigationProperties = [];\n\t\t\tlet mElement;\n\t\t\tfor (sElementName in mODataEntityType) {\n\t\t\t\tmElement = mODataEntityType[sElementName];\n\t\t\t\tif (mElement.$kind === \"NavigationProperty\") {\n\t\t\t\t\taNavigationProperties.push(sElementName);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (sElementName in mODataEntityType) {\n\t\t\t\tmElement = mODataEntityType[sElementName];\n\t\t\t\tif (mElement.$kind === \"Property\") {\n\t\t\t\t\tconst mPropAnnotations = oMetaModel.getObject(\"/\" + sEntityType + \"/\" + sElementName + \"@\");\n\t\t\t\t\tconst mProp = _enrichProperty(\n\t\t\t\t\t\tsElementName,\n\t\t\t\t\t\tmElement,\n\t\t\t\t\t\tmPropAnnotations,\n\t\t\t\t\t\tsEntityType,\n\t\t\t\t\t\toElement,\n\t\t\t\t\t\tsAggregationName,\n\t\t\t\t\t\taNavigationProperties\n\t\t\t\t\t);\n\t\t\t\t\taProperties.push(mProp);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn aProperties;\n\t\t}\n\n\t\t//Get binding path either from payload (if available) or the element's binding context.\n\t\tfunction _getBindingPath(oElement: Control, mPayload: any) {\n\t\t\tif (mPayload.path) {\n\t\t\t\treturn mPayload.path;\n\t\t\t}\n\t\t\tconst vBinding = oElement.getBindingContext();\n\t\t\tif (vBinding) {\n\t\t\t\tif (oElement.data(\"navigationPath\")) {\n\t\t\t\t\treturn vBinding.getPath() + \"/\" + oElement.data(\"navigationPath\");\n\t\t\t\t}\n\t\t\t\treturn vBinding.getPath();\n\t\t\t}\n\t\t}\n\n\t\t//Get all properties of the element's model.\n\t\tfunction _getODataPropertiesOfModel(oElement: Control, sAggregationName: string, mPayload: any) {\n\t\t\tconst oModel = oElement.getModel(mPayload.modelName);\n\t\t\tif (oModel) {\n\t\t\t\tif (oModel.isA(\"sap.ui.model.odata.v4.ODataModel\")) {\n\t\t\t\t\tconst oMetaModel = oModel.getMetaModel() as ODataMetaModel;\n\t\t\t\t\tconst sBindingContextPath = _getBindingPath(oElement, mPayload);\n\t\t\t\t\tif (sBindingContextPath) {\n\t\t\t\t\t\tconst oMetaModelContext = oMetaModel.getMetaContext(sBindingContextPath);\n\t\t\t\t\t\tconst oMetaModelContextObject = oMetaModelContext.getObject();\n\t\t\t\t\t\tconst mODataEntityType = oMetaModelContext.getObject(oMetaModelContextObject.$Type);\n\t\t\t\t\t\treturn _convertMetadataToDelegateFormat(\n\t\t\t\t\t\t\tmODataEntityType,\n\t\t\t\t\t\t\toMetaModelContextObject.$Type,\n\t\t\t\t\t\t\toMetaModel,\n\t\t\t\t\t\t\toElement,\n\t\t\t\t\t\t\tsAggregationName\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn Promise.resolve([]);\n\t\t}\n\n\t\treturn Promise.resolve().then(function () {\n\t\t\treturn _getODataPropertiesOfModel(mPropertyBag.element, mPropertyBag.aggregationName, mPropertyBag.payload);\n\t\t});\n\t}\n};\n\nexport default Delegate;\n"],"mappings":"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"}},{"offset":{"line":12888,"column":0},"map":{"version":3,"names":["sap","ui","define","Common","DelegateUtil","JSONModel","ListBinding","Delegate","createLayout","async","mPropertyBag","_mPropertyBag$appComp","oModifier","modifier","oMetaModel","appComponent","getMetaModel","oForm","element","sEntitySet","getCustomData","sPath","startsWith","oFormContainer","parentSelector","bySelector","view","undefined","sNavigationPath","sBindingPath","oMetaModelContext","getMetaContext","oPropertyContext","createBindingContext","bindingPath","sFormId","sId","id","oParameters","sPropertyName","sValueHelpType","oControl","fnTemplateValueHelp","sFragmentName","_mPropertyBag$fieldSe","oThis","idPrefix","fieldSelector","oPreprocessorSettings","bindingContexts","entitySet","contextPath","property","this","models","metaModel","templateControlFragment","fnTemplateFormElement","oView","navigationPath","_mPropertyBag$fieldSe2","sOnChangeCustomData","sDisplayModeCustomData","_flexId","onChange","removeEscapeCharacters","displayMode","dataField","bValueHelpRequired","isValueHelpRequired","bValueHelpExists","doesValueHelpExist","oValueHelp","oField","control","valueHelp","getPropertyInfo","_isComplexType","mProperty","$Type","toLowerCase","indexOf","_startsWithNavigationProperty","sPropertyPath","aNavigationProperties","some","sNavProp","_enrichProperty","mElement","mPropertyAnnotations","sEntityType","oElement","sAggregationName","mProp","name","entityType","mDataFieldDefaultAnnotation","sLabel","Label","label","mHiddenAnnotation","hideFromReveal","$Path","_oElement$getBindingC","getBindingContext","getProperty","mFieldControlAnnotation","$EnumMember","sFieldControlPath","Path","bListBinding","getBinding","_oElement$getBindingC2","iFieldControlValue","unsupported","_convertMetadataToDelegateFormat","mODataEntityType","aProperties","sElementName","$kind","push","mPropAnnotations","getObject","_getBindingPath","mPayload","path","vBinding","data","getPath","_getODataPropertiesOfModel","oModel","getModel","modelName","isA","sBindingContextPath","oMetaModelContextObject","Promise","resolve","then","aggregationName","payload"],"sources":["FormDelegate-dbg.js"],"mappings":"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","sourceRoot":"form"}},{"offset":{"line":12893,"column":0},"map":{"version":3,"names":["FormElementBlock","defineBuildingBlock","name","namespace","blockAttribute","type","required","blockAggregation","slot","isDefault","oProps","configuration","mSettings","oContextObjectPath","getInvolvedDataModelObjects","metaPath","contextPath","label","undefined","targetObject","annotations","Common","Label","toString","getFields","fields","xml","createId","getTemplate","id","key","visible","BuildingBlockBase"],"sourceRoot":"form","sources":["FormElementBlock.ts"],"sourcesContent":["import type { ServiceObject } from \"@sap-ux/vocabularies-types\";\nimport { blockAggregation, blockAttribute, BuildingBlockBase, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockRuntime\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type { PropertiesOf } from \"sap/fe/core/helpers/ClassSupport\";\nimport type Control from \"sap/ui/core/Control\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\n\n/**\n * Building block used to create a form element based on the metadata provided by OData V4.\n *\n * @public\n * @since 1.90.0\n */\n\n@defineBuildingBlock({\n\tname: \"FormElement\",\n\tnamespace: \"sap.fe.macros\"\n})\nexport default class FormElementBlock extends BuildingBlockBase {\n\t/**\n\t * The identifier of the FormElement building block.\n\t *\n\t * @public\n\t */\n\t@blockAttribute({ type: \"string\", required: true })\n\tid!: string;\n\n\t/**\n\t * Defines the path of the context used in the current page or block.\n\t * This setting is defined by the framework.\n\t *\n\t * @public\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true\n\t})\n\tcontextPath!: Context;\n\n\t/**\n\t * Defines the relative path of the property in the metamodel, based on the current contextPath.\n\t *\n\t * @public\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true\n\t})\n\tmetaPath!: Context;\n\n\t/**\n\t * Label shown for the field. If not set, the label from the annotations will be shown.\n\t *\n\t * @public\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tlabel!: string;\n\n\t/**\n\t * If set to false, the FormElement is not rendered.\n\t *\n\t * @public\n\t */\n\t@blockAttribute({ type: \"boolean\" })\n\tvisible?: boolean;\n\n\t@blockAttribute({ type: \"string\" })\n\tkey?: string;\n\n\t/**\n\t * Optional aggregation of controls that should be displayed inside the FormElement.\n\t * If not set, a default Field building block will be rendered\n\t *\n\t * @public\n\t */\n\t@blockAggregation({ type: \"sap.ui.core.Control\", slot: \"fields\", isDefault: true })\n\tfields?: Control[];\n\n\tconstructor(oProps: PropertiesOf<FormElementBlock>, configuration: any, mSettings: any) {\n\t\tsuper(oProps, configuration, mSettings);\n\t\tconst oContextObjectPath = getInvolvedDataModelObjects(this.metaPath, this.contextPath);\n\t\tif (this.label === undefined) {\n\t\t\tthis.label = (oContextObjectPath.targetObject as ServiceObject).annotations.Common?.Label?.toString() ?? \"\";\n\t\t}\n\t}\n\n\tgetFields() {\n\t\tif (this.fields) {\n\t\t\treturn xml`<slot name=\"fields\" />`;\n\t\t} else {\n\t\t\treturn xml`<macros:Field\n\t\t\t\t\t\tmetaPath=\"${this.metaPath}\"\n\t\t\t\t\t\tcontextPath=\"${this.contextPath}\"\n\t\t\t\t\t\tid=\"${this.createId(\"FormElementField\")}\" />`;\n\t\t}\n\t}\n\n\tgetTemplate() {\n\t\treturn xml`<f:FormElement xmlns:f=\"sap.ui.layout.form\" id=\"${this.id}\"\n\t\t\tkey=\"${this.key}\"\n\t\t\tlabel=\"${this.label}\"\n\t\t\tvisible=\"${this.visible}\">\n\t\t\t<f:fields>\n\t\t\t\t${this.getFields()}\n\t\t\t</f:fields>\n\t\t</f:FormElement>`;\n\t}\n}\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;MAmBqBA,gBAAgB;EAXrC;AACA;AACA;AACA;AACA;AACA;EALA,OAOCC,mBAAmB,CAAC;IACpBC,IAAI,EAAE,aAAa;IACnBC,SAAS,EAAE;EACZ,CAAC,CAAC,UAOAC,cAAc,CAAC;IAAEC,IAAI,EAAE,QAAQ;IAAEC,QAAQ,EAAE;EAAK,CAAC,CAAC,UASlDF,cAAc,CAAC;IACfC,IAAI,EAAE,sBAAsB;IAC5BC,QAAQ,EAAE;EACX,CAAC,CAAC,UAQDF,cAAc,CAAC;IACfC,IAAI,EAAE,sBAAsB;IAC5BC,QAAQ,EAAE;EACX,CAAC,CAAC,UAQDF,cAAc,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC,UAQlCD,cAAc,CAAC;IAAEC,IAAI,EAAE;EAAU,CAAC,CAAC,UAGnCD,cAAc,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC,UASlCE,gBAAgB,CAAC;IAAEF,IAAI,EAAE,qBAAqB;IAAEG,IAAI,EAAE,QAAQ;IAAEC,SAAS,EAAE;EAAK,CAAC,CAAC;IAAA;IAxDnF;AACD;AACA;AACA;AACA;;IAIC;AACD;AACA;AACA;AACA;AACA;;IAOC;AACD;AACA;AACA;AACA;;IAOC;AACD;AACA;AACA;AACA;;IAIC;AACD;AACA;AACA;AACA;;IAOC;AACD;AACA;AACA;AACA;AACA;;IAIC,0BAAYC,MAAsC,EAAEC,aAAkB,EAAEC,SAAc,EAAE;MAAA;MACvF,sCAAMF,MAAM,EAAEC,aAAa,EAAEC,SAAS,CAAC;MAAC;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MACxC,MAAMC,kBAAkB,GAAGC,2BAA2B,CAAC,MAAKC,QAAQ,EAAE,MAAKC,WAAW,CAAC;MACvF,IAAI,MAAKC,KAAK,KAAKC,SAAS,EAAE;QAAA;QAC7B,MAAKD,KAAK,GAAG,wBAACJ,kBAAkB,CAACM,YAAY,CAAmBC,WAAW,CAACC,MAAM,iFAArE,oBAAuEC,KAAK,0DAA5E,sBAA8EC,QAAQ,EAAE,KAAI,EAAE;MAC5G;MAAC;IACF;IAAC;IAAA;IAAA,OAEDC,SAAS,GAAT,qBAAY;MACX,IAAI,IAAI,CAACC,MAAM,EAAE;QAChB,OAAOC,GAAI,wBAAuB;MACnC,CAAC,MAAM;QACN,OAAOA,GAAI;AACd,kBAAkB,IAAI,CAACX,QAAS;AAChC,qBAAqB,IAAI,CAACC,WAAY;AACtC,YAAY,IAAI,CAACW,QAAQ,CAAC,kBAAkB,CAAE,MAAK;MACjD;IACD,CAAC;IAAA,OAEDC,WAAW,GAAX,uBAAc;MACb,OAAOF,GAAI,mDAAkD,IAAI,CAACG,EAAG;AACvE,UAAU,IAAI,CAACC,GAAI;AACnB,YAAY,IAAI,CAACb,KAAM;AACvB,cAAc,IAAI,CAACc,OAAQ;AAC3B;AACA,MAAM,IAAI,CAACP,SAAS,EAAG;AACvB;AACA,mBAAmB;IAClB,CAAC;IAAA;EAAA,EAxF4CQ,iBAAiB;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;EAAA;EAAA;AAAA"}},{"offset":{"line":13062,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlock","BuildingBlockRuntime","MetaModelConverter","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_exports","getInvolvedDataModelObjects","xml","defineBuildingBlock","BuildingBlockBase","blockAttribute","blockAggregation","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","FormElementBlock","name","namespace","type","required","slot","isDefault","_BuildingBlockBase","oProps","configuration","mSettings","_this","this","oContextObjectPath","metaPath","contextPath","label","_annotations$Common","_annotations$Common$L","targetObject","annotations","Common","Label","toString","_proto","getFields","fields","createId","getTemplate","id","visible"],"sources":["FormElementBlock-dbg.js"],"mappings":"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","sourceRoot":"form"}},{"offset":{"line":13077,"column":0},"map":{"version":3,"names":["FormHelper","isReferenceFacetPartOfPreview","oReferenceFacet","sPartOfPreview","toString","$Type","annotatedTerm","create$Select","aSemanticKeys","sSelectedFields","forEach","oSemanticKey","$PropertyPath","generateBindingExpression","sNavigationPath","oBinding","path","parameters","$select","JSON","stringify","getFormContainerTitleLevel","title","titleLevel","TitleLevel","H1","H2","H3","H4","H5","H6","Auto"],"sourceRoot":"form","sources":["FormHelper.ts"],"sourcesContent":["import { TitleLevel } from \"sap/ui/core/library\";\n\n/**\n * Helper class used by MDC controls for OData(V4) specific handling\n *\n * @private\n * @experimental This module is only for internal/experimental use!\n */\nconst FormHelper = {\n\t/*\n\t * Method that checks, if a reference facet needs to be assigned to either \"blocks\" or \"moreBlocks\" (tagged by subsection property \"partOfPreview!)\n\t * @function isReferenceFacetPartOfPreview\n\t * @memberof sap.fe.macros.form.FormHelper.js\n\t * @param {Object} - oReferenceFacet : Reference facet that needs to be assigned\n\t * @param {String} - sPartOfPreview : Subsection property \"partOfPreview\" that needs to aligned with the reference facet's annotation \"PartOfPreview!\n\t * @return : {boolean} True, if the ReferenceFacet has the same annotation as the subsection's property \"partOfPreview\"\n\t */\n\tisReferenceFacetPartOfPreview: function (oReferenceFacet: any, sPartOfPreview: any) {\n\t\tsPartOfPreview = sPartOfPreview.toString();\n\t\tif (oReferenceFacet.$Type === \"com.sap.vocabularies.UI.v1.ReferenceFacet\") {\n\t\t\tconst annotatedTerm = oReferenceFacet[\"@com.sap.vocabularies.UI.v1.PartOfPreview\"];\n\t\t\treturn (sPartOfPreview === \"true\" && annotatedTerm !== false) || (sPartOfPreview === \"false\" && annotatedTerm === false);\n\t\t}\n\t\treturn false;\n\t},\n\n\t/**\n\t * Creates and returns a select query with the selected fields from the parameters passed.\n\t *\n\t * @param aSemanticKeys SemanticKeys included in the entity set\n\t * @returns The fields to be included in the select query\n\t */\n\tcreate$Select: function (aSemanticKeys: any[]) {\n\t\tlet sSelectedFields = \"\";\n\t\taSemanticKeys.forEach(function (oSemanticKey: any) {\n\t\t\tsSelectedFields += sSelectedFields ? `,${oSemanticKey.$PropertyPath}` : oSemanticKey.$PropertyPath;\n\t\t});\n\t\treturn sSelectedFields;\n\t},\n\n\t/**\n\t * Generates the binding expression for the form.\n\t *\n\t * @param sNavigationPath The navigation path defined for the entity\n\t * @param aSemanticKeys SemanticKeys included in the entity set\n\t * @returns The Binding expression including path and $select query as parameter depending on the function parameters\n\t */\n\tgenerateBindingExpression: function (sNavigationPath: string, aSemanticKeys: any[]) {\n\t\tif (!sNavigationPath && !aSemanticKeys) {\n\t\t\treturn \"\";\n\t\t}\n\t\tconst oBinding: any = {\n\t\t\tpath: sNavigationPath || \"\"\n\t\t};\n\t\tif (aSemanticKeys) {\n\t\t\toBinding.parameters = { $select: FormHelper.create$Select(aSemanticKeys) };\n\t\t}\n\t\treturn JSON.stringify(oBinding);\n\t},\n\n\t/**\n\t * Calculates the title level for the containers in this form.\n\t *\n\t * If there is no form title, the form containers get the same header level as the form, otherwise the levels are incremented to reflect the deeper nesting.\n\t *\n\t * @param [title] The title of the form\n\t * @param [titleLevel] The title level of the form\n\t * @returns The title level of the form containers\n\t */\n\tgetFormContainerTitleLevel: function (title?: string, titleLevel?: TitleLevel): TitleLevel | undefined {\n\t\tif (!title) {\n\t\t\treturn titleLevel;\n\t\t}\n\t\tswitch (titleLevel) {\n\t\t\tcase TitleLevel.H1:\n\t\t\t\treturn TitleLevel.H2;\n\t\t\tcase TitleLevel.H2:\n\t\t\t\treturn TitleLevel.H3;\n\t\t\tcase TitleLevel.H3:\n\t\t\t\treturn TitleLevel.H4;\n\t\t\tcase TitleLevel.H4:\n\t\t\t\treturn TitleLevel.H5;\n\t\t\tcase TitleLevel.H5:\n\t\t\tcase TitleLevel.H6:\n\t\t\t\treturn TitleLevel.H6;\n\t\t\tdefault:\n\t\t\t\treturn TitleLevel.Auto;\n\t\t}\n\t}\n};\n\nexport default FormHelper;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;EAEA;AACA;AACA;AACA;AACA;AACA;EACA,MAAMA,UAAU,GAAG;IAClB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;IACCC,6BAA6B,EAAE,UAAUC,eAAoB,EAAEC,cAAmB,EAAE;MACnFA,cAAc,GAAGA,cAAc,CAACC,QAAQ,EAAE;MAC1C,IAAIF,eAAe,CAACG,KAAK,KAAK,2CAA2C,EAAE;QAC1E,MAAMC,aAAa,GAAGJ,eAAe,CAAC,2CAA2C,CAAC;QAClF,OAAQC,cAAc,KAAK,MAAM,IAAIG,aAAa,KAAK,KAAK,IAAMH,cAAc,KAAK,OAAO,IAAIG,aAAa,KAAK,KAAM;MACzH;MACA,OAAO,KAAK;IACb,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;IACCC,aAAa,EAAE,UAAUC,aAAoB,EAAE;MAC9C,IAAIC,eAAe,GAAG,EAAE;MACxBD,aAAa,CAACE,OAAO,CAAC,UAAUC,YAAiB,EAAE;QAClDF,eAAe,IAAIA,eAAe,GAAI,IAAGE,YAAY,CAACC,aAAc,EAAC,GAAGD,YAAY,CAACC,aAAa;MACnG,CAAC,CAAC;MACF,OAAOH,eAAe;IACvB,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;AACA;IACCI,yBAAyB,EAAE,UAAUC,eAAuB,EAAEN,aAAoB,EAAE;MACnF,IAAI,CAACM,eAAe,IAAI,CAACN,aAAa,EAAE;QACvC,OAAO,EAAE;MACV;MACA,MAAMO,QAAa,GAAG;QACrBC,IAAI,EAAEF,eAAe,IAAI;MAC1B,CAAC;MACD,IAAIN,aAAa,EAAE;QAClBO,QAAQ,CAACE,UAAU,GAAG;UAAEC,OAAO,EAAElB,UAAU,CAACO,aAAa,CAACC,aAAa;QAAE,CAAC;MAC3E;MACA,OAAOW,IAAI,CAACC,SAAS,CAACL,QAAQ,CAAC;IAChC,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACCM,0BAA0B,EAAE,UAAUC,KAAc,EAAEC,UAAuB,EAA0B;MACtG,IAAI,CAACD,KAAK,EAAE;QACX,OAAOC,UAAU;MAClB;MACA,QAAQA,UAAU;QACjB,KAAKC,UAAU,CAACC,EAAE;UACjB,OAAOD,UAAU,CAACE,EAAE;QACrB,KAAKF,UAAU,CAACE,EAAE;UACjB,OAAOF,UAAU,CAACG,EAAE;QACrB,KAAKH,UAAU,CAACG,EAAE;UACjB,OAAOH,UAAU,CAACI,EAAE;QACrB,KAAKJ,UAAU,CAACI,EAAE;UACjB,OAAOJ,UAAU,CAACK,EAAE;QACrB,KAAKL,UAAU,CAACK,EAAE;QAClB,KAAKL,UAAU,CAACM,EAAE;UACjB,OAAON,UAAU,CAACM,EAAE;QACrB;UACC,OAAON,UAAU,CAACO,IAAI;MAAC;IAE1B;EACD,CAAC;EAAC,OAEa/B,UAAU;AAAA"}},{"offset":{"line":13174,"column":0},"map":{"version":3,"names":["sap","ui","define","library","TitleLevel","FormHelper","isReferenceFacetPartOfPreview","oReferenceFacet","sPartOfPreview","toString","$Type","annotatedTerm","create$Select","aSemanticKeys","sSelectedFields","forEach","oSemanticKey","$PropertyPath","generateBindingExpression","sNavigationPath","oBinding","path","parameters","$select","JSON","stringify","getFormContainerTitleLevel","title","titleLevel","H1","H2","H3","H4","H5","H6","Auto"],"sources":["FormHelper-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,2CAAO,CAAC,uBAAwB,SAAUC,GAC/C,aAEA,IAAIC,EAAaD,EAAQC,WAOzB,MAAMC,EAAa,CASjBC,8BAA+B,SAAUC,EAAiBC,GACxDA,EAAiBA,EAAeC,WAChC,GAAIF,EAAgBG,QAAU,4CAA6C,CACzE,MAAMC,EAAgBJ,EAAgB,6CACtC,OAAOC,IAAmB,QAAUG,IAAkB,OAASH,IAAmB,SAAWG,IAAkB,KACjH,CACA,OAAO,KACT,EAOAC,cAAe,SAAUC,GACvB,IAAIC,EAAkB,GACtBD,EAAcE,QAAQ,SAAUC,GAC9BF,GAAmBA,EAAkB,IAAIE,EAAaC,gBAAkBD,EAAaC,aACvF,GACA,OAAOH,CACT,EAQAI,0BAA2B,SAAUC,EAAiBN,GACpD,IAAKM,IAAoBN,EAAe,CACtC,MAAO,EACT,CACA,MAAMO,EAAW,CACfC,KAAMF,GAAmB,IAE3B,GAAIN,EAAe,CACjBO,EAASE,WAAa,CACpBC,QAASlB,EAAWO,cAAcC,GAEtC,CACA,OAAOW,KAAKC,UAAUL,EACxB,EAUAM,2BAA4B,SAAUC,EAAOC,GAC3C,IAAKD,EAAO,CACV,OAAOC,CACT,CACA,OAAQA,GACN,KAAKxB,EAAWyB,GACd,OAAOzB,EAAW0B,GACpB,KAAK1B,EAAW0B,GACd,OAAO1B,EAAW2B,GACpB,KAAK3B,EAAW2B,GACd,OAAO3B,EAAW4B,GACpB,KAAK5B,EAAW4B,GACd,OAAO5B,EAAW6B,GACpB,KAAK7B,EAAW6B,GAChB,KAAK7B,EAAW8B,GACd,OAAO9B,EAAW8B,GACpB,QACE,OAAO9B,EAAW+B,KAExB,GAEF,OAAO9B,CACT,EAAG","sourceRoot":"form"}},{"offset":{"line":13179,"column":0},"map":{"version":3,"names":["CustomFragment","defineBuildingBlock","name","namespace","blockAttribute","type","required","getTemplate","fragmentInstanceName","fragmentName","replace","xml","id","BuildingBlockBase"],"sourceRoot":"fpm","sources":["CustomFragment.block.ts"],"sourcesContent":["import { blockAttribute, BuildingBlockBase, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockRuntime\";\nimport { V4Context } from \"../../../../../../../types/extension_types\";\n\n/**\n * Content of a custom fragment\n *\n * @private\n * @experimental\n */\n@defineBuildingBlock({\n\tname: \"CustomFragment\",\n\tnamespace: \"sap.fe.macros.fpm\"\n})\nexport default class CustomFragment extends BuildingBlockBase {\n\t/**\n\t * ID of the custom fragment\n\t */\n\t@blockAttribute({ type: \"string\", required: true })\n\tpublic id!: string;\n\n\t/**\n\t * Context Path\n\t */\n\t@blockAttribute({ type: \"sap.ui.model.Context\", required: false })\n\tpublic contextPath!: V4Context;\n\n\t/**\n\t *  Name of the custom fragment\n\t */\n\t@blockAttribute({ type: \"string\", required: true })\n\tpublic fragmentName!: string;\n\n\t/**\n\t * The building block template function.\n\t *\n\t * @returns An XML-based string\n\t */\n\tgetTemplate() {\n\t\tconst fragmentInstanceName = this.fragmentName + \"-JS\".replace(/\\//g, \".\");\n\n\t\treturn xml`<core:Fragment\n\t\t\txmlns:compo=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.xmlcomposite/1\"\n\t\t\tfragmentName=\"${fragmentInstanceName}\"\n\t\t\tid=\"${this.id}\"\n\t\t\ttype=\"CUSTOM\"\n\t\t>\n\t\t\t<compo:fragmentContent>\n\t\t\t\t<core:FragmentDefinition>\n\t\t\t\t\t<core:Fragment fragmentName=\"${this.fragmentName}\" type=\"XML\" />\n\t\t\t\t</core:FragmentDefinition>\n\t\t\t</compo:fragmentContent>\n\t\t</core:Fragment>`;\n\t}\n}\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;MAcqBA,cAAc;EAVnC;AACA;AACA;AACA;AACA;AACA;EALA,OAMCC,mBAAmB,CAAC;IACpBC,IAAI,EAAE,gBAAgB;IACtBC,SAAS,EAAE;EACZ,CAAC,CAAC,UAKAC,cAAc,CAAC;IAAEC,IAAI,EAAE,QAAQ;IAAEC,QAAQ,EAAE;EAAK,CAAC,CAAC,UAMlDF,cAAc,CAAC;IAAEC,IAAI,EAAE,sBAAsB;IAAEC,QAAQ,EAAE;EAAM,CAAC,CAAC,UAMjEF,cAAc,CAAC;IAAEC,IAAI,EAAE,QAAQ;IAAEC,QAAQ,EAAE;EAAK,CAAC,CAAC;IAAA;IAAA;MAAA;MAAA;QAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;IAAA;IAAA;IAAA;IAGnD;AACD;AACA;AACA;AACA;IAJC,OAKAC,WAAW,GAAX,uBAAc;MACb,MAAMC,oBAAoB,GAAG,IAAI,CAACC,YAAY,GAAG,KAAK,CAACC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC;MAE1E,OAAOC,GAAI;AACb;AACA,mBAAmBH,oBAAqB;AACxC,SAAS,IAAI,CAACI,EAAG;AACjB;AACA;AACA;AACA;AACA,oCAAoC,IAAI,CAACH,YAAa;AACtD;AACA;AACA,mBAAmB;IAClB,CAAC;IAAA;EAAA,EAvC0CI,iBAAiB;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;EAAA;EAAA;AAAA"}},{"offset":{"line":13272,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlock","BuildingBlockRuntime","_dec","_dec2","_dec3","_dec4","_class","_class2","_descriptor","_descriptor2","_descriptor3","_exports","xml","defineBuildingBlock","BuildingBlockBase","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","CustomFragment","name","namespace","type","required","_BuildingBlockBase","_this","_len","arguments","length","args","Array","_key","this","_proto","getTemplate","fragmentInstanceName","fragmentName","replace","id"],"sources":["CustomFragment.block-dbg.js"],"mappings":"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","sourceRoot":"fpm"}},{"offset":{"line":13288,"column":0},"map":{"version":3,"names":["ActionCommand","defineBuildingBlock","name","namespace","blockAttribute","type","required","blockEvent","getTemplate","execute","enabled","action","onExecuteAction","isActionEnabled","undefined","onExecuteIBN","isIBNEnabled","onExecuteManifest","xml","visible","command","BuildingBlockBase"],"sourceRoot":"internal","sources":["ActionCommand.block.ts"],"sourcesContent":["import { blockAttribute, blockEvent, BuildingBlockBase, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockRuntime\";\nimport type { ConverterAction } from \"sap/fe/core/converters/controls/Common/Action\";\n/**\n * Content of an action command\n *\n * @private\n * @experimental\n */\n@defineBuildingBlock({\n\tname: \"ActionCommand\",\n\tnamespace: \"sap.fe.macros.internal\"\n})\nexport default class ActionCommand extends BuildingBlockBase {\n\t@blockAttribute({ type: \"string\", required: true })\n\tpublic id!: string;\n\n\t@blockAttribute({ type: \"sap.ui.model.Context\", required: true })\n\tpublic action!: ConverterAction;\n\n\t@blockAttribute({ type: \"boolean\" })\n\tpublic isActionEnabled?: boolean;\n\n\t@blockAttribute({ type: \"boolean\" })\n\tpublic isIBNEnabled?: boolean;\n\n\t@blockAttribute({ type: \"boolean\" })\n\tpublic visible?: boolean;\n\n\t@blockEvent()\n\tonExecuteAction = \"\";\n\n\t@blockEvent()\n\tonExecuteIBN = \"\";\n\n\t@blockEvent()\n\tonExecuteManifest = \"\";\n\n\t/**\n\t * The building block template function.\n\t *\n\t * @returns An XML-based string\n\t */\n\tgetTemplate() {\n\t\tlet execute;\n\t\tlet enabled;\n\t\tswitch (this.action.type) {\n\t\t\tcase \"ForAction\":\n\t\t\t\texecute = this.onExecuteAction;\n\t\t\t\tenabled = this.isActionEnabled !== undefined ? this.isActionEnabled : this.action.enabled;\n\t\t\t\tbreak;\n\t\t\tcase \"ForNavigation\":\n\t\t\t\texecute = this.onExecuteIBN;\n\t\t\t\tenabled = this.isIBNEnabled !== undefined ? this.isIBNEnabled : this.action.enabled;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\texecute = this.onExecuteManifest;\n\t\t\t\tenabled = this.action.enabled;\n\t\t\t\tbreak;\n\t\t}\n\t\treturn xml`\n\t\t<control:CommandExecution\n\t\t\txmlns:control=\"sap.fe.core.controls\"\n\t\t\tcore:require=\"{FPM: 'sap/fe/core/helpers/FPMHelper'}\"\n\t\t\texecute=\"${execute}\"\n\t\t\tenabled=\"${enabled}\"\n\t\t\tvisible=\"${this.visible !== undefined ? this.visible : this.action.visible}\"\n\t\t\tcommand=\"${this.action.command}\"\n\t\t/>`;\n\t}\n}\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;MAaqBA,aAAa;EAVlC;AACA;AACA;AACA;AACA;AACA;EALA,OAMCC,mBAAmB,CAAC;IACpBC,IAAI,EAAE,eAAe;IACrBC,SAAS,EAAE;EACZ,CAAC,CAAC,UAEAC,cAAc,CAAC;IAAEC,IAAI,EAAE,QAAQ;IAAEC,QAAQ,EAAE;EAAK,CAAC,CAAC,UAGlDF,cAAc,CAAC;IAAEC,IAAI,EAAE,sBAAsB;IAAEC,QAAQ,EAAE;EAAK,CAAC,CAAC,UAGhEF,cAAc,CAAC;IAAEC,IAAI,EAAE;EAAU,CAAC,CAAC,UAGnCD,cAAc,CAAC;IAAEC,IAAI,EAAE;EAAU,CAAC,CAAC,UAGnCD,cAAc,CAAC;IAAEC,IAAI,EAAE;EAAU,CAAC,CAAC,UAGnCE,UAAU,EAAE,UAGZA,UAAU,EAAE,UAGZA,UAAU,EAAE;IAAA;IAAA;MAAA;MAAA;QAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;IAAA;IAAA;IAAA;IAGb;AACD;AACA;AACA;AACA;IAJC,OAKAC,WAAW,GAAX,uBAAc;MACb,IAAIC,OAAO;MACX,IAAIC,OAAO;MACX,QAAQ,IAAI,CAACC,MAAM,CAACN,IAAI;QACvB,KAAK,WAAW;UACfI,OAAO,GAAG,IAAI,CAACG,eAAe;UAC9BF,OAAO,GAAG,IAAI,CAACG,eAAe,KAAKC,SAAS,GAAG,IAAI,CAACD,eAAe,GAAG,IAAI,CAACF,MAAM,CAACD,OAAO;UACzF;QACD,KAAK,eAAe;UACnBD,OAAO,GAAG,IAAI,CAACM,YAAY;UAC3BL,OAAO,GAAG,IAAI,CAACM,YAAY,KAAKF,SAAS,GAAG,IAAI,CAACE,YAAY,GAAG,IAAI,CAACL,MAAM,CAACD,OAAO;UACnF;QACD;UACCD,OAAO,GAAG,IAAI,CAACQ,iBAAiB;UAChCP,OAAO,GAAG,IAAI,CAACC,MAAM,CAACD,OAAO;UAC7B;MAAM;MAER,OAAOQ,GAAI;AACb;AACA;AACA;AACA,cAAcT,OAAQ;AACtB,cAAcC,OAAQ;AACtB,cAAc,IAAI,CAACS,OAAO,KAAKL,SAAS,GAAG,IAAI,CAACK,OAAO,GAAG,IAAI,CAACR,MAAM,CAACQ,OAAQ;AAC9E,cAAc,IAAI,CAACR,MAAM,CAACS,OAAQ;AAClC,KAAK;IACJ,CAAC;IAAA;EAAA,EAxDyCC,iBAAiB;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;MAAA,OAiBzC,EAAE;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;MAAA,OAGL,EAAE;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;MAAA,OAGG,EAAE;IAAA;EAAA;EAAA;EAAA;AAAA"}},{"offset":{"line":13433,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlock","BuildingBlockRuntime","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_exports","xml","defineBuildingBlock","BuildingBlockBase","blockEvent","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","ActionCommand","name","namespace","type","required","_BuildingBlockBase","_this","_len","arguments","length","args","Array","_key","this","_proto","getTemplate","execute","enabled","action","onExecuteAction","isActionEnabled","onExecuteIBN","isIBNEnabled","onExecuteManifest","visible","command"],"sources":["ActionCommand.block-dbg.js"],"mappings":"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","sourceRoot":"internal"}},{"offset":{"line":13446,"column":0},"map":{"version":3,"names":["DataPoint","defineBuildingBlock","name","namespace","blockAttribute","type","required","computed","validate","formatOptionsInput","dataPointStyle","includes","Error","displayMode","iconSize","measureDisplayMode","$kind","getTemplatingObjects","context","internalDataModelPath","getInvolvedDataModelObjects","metaPath","contextPath","internalValueDataModelPath","visible","getVisibleExpression","targetObject","Value","path","enhanceDataModelPath","internalDataPointConverted","convertMetaModelContext","dataModelPath","valueDataModelPath","dataPointConverted","getDataPointVisualization","properties","Visualization","visualization","valueProperty","isUsedInNavigationWithQuickViewFacets","annotations","Common","SemanticObject","isProperty","hasUnit","hasCurrency","semanticObjects","getSemanticObjects","hasQuickViewFacets","hasSemanticObjectOnNavigation","getRatingIndicatorTemplate","dataPointTarget","targetValue","getTargetValueBinding","dataPointValue","propertyType","$target","numberOfFractionalDigits","ValueFormat","NumberOfFractionalDigits","value","getValueFormatted","text","getHeaderRatingIndicatorText","headerLabel","targetLabel","targetLabelExpression","compileExpression","formatResult","pathInModel","getExpressionFromAnnotation","getRelativePaths","TargetValue","formatOptions","showLabels","xml","attr","SampleSize","Description","idPrefix","generate","undefined","getTooltipValue","getProgressIndicatorTemplate","criticalityColorExpression","buildExpressionForCriticalityColor","displayValue","buildExpressionForProgressIndicatorDisplayValue","percentValue","buildExpressionForProgressIndicatorPercentValue","firstLabel","secondLabel","secondLabelExpression","Label","notEqual","getObjectNumberCommonTemplate","emptyIndicatorMode","showEmptyIndicator","objectStatusNumber","buildFieldBindingExpression","unit","UIFormatters","getBindingForUnitOrCurrency","getObjectNumberTemplate","isAnalytics","hasValidAnalyticalCurrencyOrUnit","getObjectStatusDependentsTemplate","hasSemanticObject","semanticObject","getObjectStatusTemplate","semanticObjectExpressionToResolve","getSemanticObjectExpressionToResolve","push","key","substring","length","navigationProperties","forEach","navProperty","FieldHelper","getStateDependingOnSemanticObjectTargets","semanticObjectTargets","hasSemanticObjectTargets","active","objectStatusText","iconExpression","buildExpressionForCriticalityIcon","ariaLabelledBy","hasSemanticObjectsWithPath","getObject","computeSemanticLinkModelContextChange","QuickInfo","valueOf","getTemplate","BuildingBlockBase"],"sourceRoot":"internal","sources":["DataPoint.ts"],"sourcesContent":["import type { Property } from \"@sap-ux/vocabularies-types\";\nimport type { SemanticObject } from \"@sap-ux/vocabularies-types/vocabularies/Common\";\nimport type { DataPointType } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport { blockAttribute, BuildingBlockBase, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockRuntime\";\nimport { convertMetaModelContext, getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport { compileExpression, formatResult, getExpressionFromAnnotation, notEqual, pathInModel } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport { buildExpressionForCriticalityColor, buildExpressionForCriticalityIcon } from \"sap/fe/core/templating/CriticalityFormatters\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { enhanceDataModelPath, getRelativePaths } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { hasCurrency, hasUnit, isProperty } from \"sap/fe/core/templating/PropertyHelper\";\nimport type { DisplayMode } from \"sap/fe/core/templating/UIFormatters\";\nimport * as UIFormatters from \"sap/fe/core/templating/UIFormatters\";\nimport FieldHelper from \"sap/fe/macros/field/FieldHelper\";\nimport type { SemanticObjectCustomData } from \"sap/fe/macros/field/FieldTemplating\";\nimport {\n\tgetSemanticObjectExpressionToResolve,\n\tgetSemanticObjects,\n\tgetVisibleExpression,\n\tisUsedInNavigationWithQuickViewFacets\n} from \"sap/fe/macros/field/FieldTemplating\";\nimport {\n\tbuildExpressionForProgressIndicatorDisplayValue,\n\tbuildExpressionForProgressIndicatorPercentValue,\n\tbuildFieldBindingExpression,\n\tgetHeaderRatingIndicatorText,\n\tgetValueFormatted\n} from \"sap/fe/macros/internal/helpers/DataPointTemplating\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type { V4Context } from \"types/extension_types\";\n\ntype DataPointFormatOptions = Partial<{\n\tdataPointStyle: \"\" | \"large\";\n\tdisplayMode: DisplayMode;\n\t/**\n\t * Define the size of the icons (For RatingIndicator only)\n\t */\n\ticonSize: \"1rem\" | \"1.375rem\" | \"2rem\";\n\tisAnalytics: boolean;\n\tmeasureDisplayMode: string;\n\t/**\n\t * If set to 'true', SAP Fiori elements shows an empty indicator in display mode for the ObjectNumber\n\t */\n\tshowEmptyIndicator: boolean;\n\t/**\n\t * When true, displays the labels for the Rating and Progress indicators\n\t */\n\tshowLabels: boolean;\n}>;\nexport type DataPointProperties = {\n\tmetaPath: V4Context;\n\teditMode?: string;\n\tcontextPath: V4Context;\n\tformatOptions: DataPointFormatOptions;\n\tidPrefix?: string;\n\t// computed properties\n\tcriticalityColorExpression?: string;\n\tdisplayValue?: string;\n\temptyIndicatorMode?: \"On\";\n\thasQuickViewFacets?: boolean;\n\thasSemanticObjectOnNavigation?: boolean;\n\tobjectStatusNumber?: string;\n\tpercentValue?: string;\n\tsemanticObject?: string | SemanticObject;\n\tsemanticObjects?: string;\n\ttargetLabel?: string;\n\tunit?: string;\n\tvisible?: string;\n\tvisualization?: string;\n\tobjectStatusText?: string;\n\ticonExpression?: string;\n};\n\n@defineBuildingBlock({\n\tname: \"DataPoint\",\n\tnamespace: \"sap.fe.macros.internal\"\n})\n\n/**\n * Public external field representation\n */\nexport default class DataPoint extends BuildingBlockBase {\n\t/**\n\t * Prefix added to the generated ID of the field\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic idPrefix!: string;\n\n\t/**\n\t * Metadata path to the dataPoint.\n\t * This property is usually a metadataContext pointing to a DataPoint having\n\t * $Type = \"com.sap.vocabularies.UI.v1.DataPointType\"\n\t */\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true\n\t})\n\tpublic metaPath!: V4Context;\n\n\t/**\n\t * Property added to associate the label with the DataPoint\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic ariaLabelledBy!: string;\n\n\t/**\n\t * Property to set the visualization type\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tprivate visualization!: string;\n\n\t/**\n\t * Property to set the visibility\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tprivate visible!: string;\n\n\t/**\n\t * Property to set property for the quick view facets\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tprivate hasQuickViewFacets!: boolean;\n\n\t/**\n\t * Context pointing to an array of the property's semantic objects\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: false,\n\t\tcomputed: true\n\t})\n\tpublic semanticObjects!: Context;\n\n\t@blockAttribute({\n\t\ttype: \"object\",\n\t\tvalidate: function (formatOptionsInput: DataPointFormatOptions) {\n\t\t\tif (formatOptionsInput?.dataPointStyle && ![\"\", \"large\"].includes(formatOptionsInput?.dataPointStyle)) {\n\t\t\t\tthrow new Error(`Allowed value ${formatOptionsInput.dataPointStyle} for dataPointStyle does not match`);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tformatOptionsInput?.displayMode &&\n\t\t\t\t![\"Value\", \"Description\", \"ValueDescription\", \"DescriptionValue\"].includes(formatOptionsInput?.displayMode)\n\t\t\t) {\n\t\t\t\tthrow new Error(`Allowed value ${formatOptionsInput.displayMode} for displayMode does not match`);\n\t\t\t}\n\n\t\t\tif (formatOptionsInput?.iconSize && ![\"1rem\", \"1.375rem\", \"2rem\"].includes(formatOptionsInput?.iconSize)) {\n\t\t\t\tthrow new Error(`Allowed value ${formatOptionsInput.iconSize} for iconSize does not match`);\n\t\t\t}\n\n\t\t\tif (formatOptionsInput?.measureDisplayMode && ![\"Hidden\", \"ReadOnly\"].includes(formatOptionsInput?.measureDisplayMode)) {\n\t\t\t\tthrow new Error(`Allowed value ${formatOptionsInput.measureDisplayMode} for measureDisplayMode does not match`);\n\t\t\t}\n\n\t\t\treturn formatOptionsInput;\n\t\t}\n\t})\n\tpublic formatOptions!: DataPointFormatOptions;\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true,\n\t\t$kind: [\"EntitySet\", \"NavigationProperty\", \"EntityType\", \"Singleton\"]\n\t})\n\tpublic contextPath!: V4Context;\n\n\tprivate semanticObject?: string | SemanticObject;\n\tprivate hasSemanticObjectOnNavigation?: boolean;\n\n\t/**\n\t * Retrieves the templating objects to further process the DataPoint.\n\t *\n\t * @param context DataPointProperties or a DataPoint\n\t * @returns The models containing infos like the DataModelPath, ValueDataModelPath and DataPointConverted\n\t */\n\tprivate static getTemplatingObjects(context: DataPointProperties | DataPoint): {\n\t\tdataModelPath: DataModelObjectPath;\n\t\tvalueDataModelPath: DataModelObjectPath | undefined;\n\t\tdataPointConverted: DataPointType;\n\t} {\n\t\tconst internalDataModelPath = getInvolvedDataModelObjects(context.metaPath, context.contextPath);\n\t\tlet internalValueDataModelPath;\n\t\t(context as DataPointProperties).visible = getVisibleExpression(internalDataModelPath);\n\t\tif (internalDataModelPath?.targetObject?.Value?.path) {\n\t\t\tinternalValueDataModelPath = enhanceDataModelPath(internalDataModelPath, internalDataModelPath.targetObject.Value.path);\n\t\t}\n\t\tconst internalDataPointConverted = convertMetaModelContext(context.metaPath);\n\n\t\treturn {\n\t\t\tdataModelPath: internalDataModelPath,\n\t\t\tvalueDataModelPath: internalValueDataModelPath,\n\t\t\tdataPointConverted: internalDataPointConverted\n\t\t};\n\t}\n\n\t/**\n\t * Function that calculates the visualization type for this DataPoint.\n\t *\n\t * @param properties The datapoint properties\n\t * @returns The DataPointProperties with the optimized coding for the visualization type\n\t */\n\tprivate static getDataPointVisualization(properties: DataPointProperties): DataPointProperties {\n\t\tconst { dataModelPath, valueDataModelPath, dataPointConverted } = DataPoint.getTemplatingObjects(properties);\n\t\tif (dataPointConverted?.Visualization === \"UI.VisualizationType/Rating\") {\n\t\t\tproperties.visualization = \"Rating\";\n\t\t\treturn properties;\n\t\t}\n\t\tif (dataPointConverted?.Visualization === \"UI.VisualizationType/Progress\") {\n\t\t\tproperties.visualization = \"Progress\";\n\t\t\treturn properties;\n\t\t}\n\t\tconst valueProperty = valueDataModelPath && valueDataModelPath.targetObject;\n\t\t//check whether the visualization type should be an object number in case one of the if conditions met\n\t\tif (!(isUsedInNavigationWithQuickViewFacets(dataModelPath, valueProperty) || valueProperty?.annotations?.Common?.SemanticObject)) {\n\t\t\tif (isProperty(valueProperty) && (hasUnit(valueProperty) || hasCurrency(valueProperty))) {\n\t\t\t\t// we only show an objectNumber if there is no quickview and a unit or a currency\n\t\t\t\tproperties.visualization = \"ObjectNumber\";\n\t\t\t\treturn properties;\n\t\t\t}\n\t\t}\n\n\t\t//default case to handle this as objectStatus type\n\t\tproperties.visualization = \"ObjectStatus\";\n\t\treturn properties;\n\t}\n\n\t/**\n\t * Constructor method of the building block.\n\t *\n\t * @param properties The datapoint properties\n\t */\n\tconstructor(properties: DataPointProperties) {\n\t\t//setup initial default property settings\n\t\tproperties.semanticObjects = getSemanticObjects([]);\n\t\tproperties.hasQuickViewFacets = false;\n\t\tproperties.hasSemanticObjectOnNavigation = false;\n\n\t\tsuper(DataPoint.getDataPointVisualization(properties));\n\t}\n\n\t/**\n\t * The building block template for the rating indicator part.\n\t *\n\t * @returns An XML-based string with the definition of the rating indicator template\n\t */\n\tgetRatingIndicatorTemplate() {\n\t\tconst { dataModelPath, valueDataModelPath, dataPointConverted } = DataPoint.getTemplatingObjects(this);\n\t\tconst dataPointTarget = dataModelPath.targetObject;\n\t\tconst targetValue = this.getTargetValueBinding();\n\n\t\tconst dataPointValue = dataPointTarget?.Value || \"\";\n\t\tconst propertyType = dataPointValue?.$target?.type;\n\n\t\tlet numberOfFractionalDigits;\n\t\tif (propertyType === \"Edm.Decimal\" && dataPointTarget.ValueFormat) {\n\t\t\tif (dataPointTarget.ValueFormat.NumberOfFractionalDigits) {\n\t\t\t\tnumberOfFractionalDigits = dataPointTarget.ValueFormat.NumberOfFractionalDigits;\n\t\t\t}\n\t\t}\n\n\t\tconst value = getValueFormatted(valueDataModelPath as DataModelObjectPath, dataPointValue, propertyType, numberOfFractionalDigits);\n\n\t\tconst text = getHeaderRatingIndicatorText(this.metaPath, dataPointTarget);\n\n\t\tlet headerLabel = \"\";\n\t\tlet targetLabel = \"\";\n\n\t\tconst targetLabelExpression = compileExpression(\n\t\t\tformatResult(\n\t\t\t\t[\n\t\t\t\t\tpathInModel(\"T_HEADER_RATING_INDICATOR_FOOTER\", \"sap.fe.i18n\"),\n\t\t\t\t\tgetExpressionFromAnnotation(dataPointConverted.Value, getRelativePaths(dataModelPath)),\n\t\t\t\t\tdataPointConverted.TargetValue\n\t\t\t\t\t\t? getExpressionFromAnnotation(dataPointConverted.TargetValue, getRelativePaths(dataModelPath))\n\t\t\t\t\t\t: \"5\"\n\t\t\t\t],\n\t\t\t\t\"MESSAGE\"\n\t\t\t)\n\t\t);\n\n\t\tif (this.formatOptions.showLabels ?? false) {\n\t\t\theaderLabel = xml`<Label xmlns=\"sap.m\"\n\t\t\t\t\t${this.attr(\"text\", text)}\n\t\t\t\t\t${this.attr(\"visible\", dataPointTarget.SampleSize || dataPointTarget.Description ? true : false)}\n\t\t\t\t/>`;\n\n\t\t\ttargetLabel = xml`<Label\n\t\t\txmlns=\"sap.m\"\n\t\t\tcore:require=\"{MESSAGE: 'sap/base/strings/formatMessage' }\"\n\t\t\t${this.attr(\"text\", targetLabelExpression)}\n\t\t\tvisible=\"true\" />`;\n\t\t}\n\n\t\treturn xml`\n\t\t${headerLabel}\n\t\t<RatingIndicator\n\t\txmlns=\"sap.m\"\n\n\t\t${this.attr(\"id\", this.idPrefix ? generate([this.idPrefix, \"RatingIndicator-Field-display\"]) : undefined)}\n\t\t${this.attr(\"maxValue\", targetValue)}\n\t\t${this.attr(\"value\", value)}\n\t\t${this.attr(\"tooltip\", this.getTooltipValue())}\n\t\t${this.attr(\"iconSize\", this.formatOptions.iconSize)}\n\t\t${this.attr(\"class\", this.formatOptions.showLabels ?? false ? \"sapUiTinyMarginTopBottom\" : undefined)}\n\t\teditable=\"false\"\n\t/>\n\t${targetLabel}`;\n\t}\n\n\t/**\n\t * The building block template for the progress indicator part.\n\t *\n\t * @returns An XML-based string with the definition of the progress indicator template\n\t */\n\tgetProgressIndicatorTemplate() {\n\t\tconst { dataModelPath, valueDataModelPath, dataPointConverted } = DataPoint.getTemplatingObjects(this);\n\t\tconst criticalityColorExpression = buildExpressionForCriticalityColor(dataPointConverted, dataModelPath);\n\t\tconst displayValue = buildExpressionForProgressIndicatorDisplayValue(dataModelPath);\n\t\tconst percentValue = buildExpressionForProgressIndicatorPercentValue(dataModelPath);\n\n\t\tconst dataPointTarget = dataModelPath.targetObject;\n\t\tlet firstLabel = \"\";\n\t\tlet secondLabel = \"\";\n\n\t\tif (this?.formatOptions?.showLabels ?? false) {\n\t\t\tfirstLabel = xml`<Label\n\t\t\t\txmlns=\"sap.m\"\n\t\t\t\t${this.attr(\"text\", dataPointTarget?.Description)}\n\t\t\t\t${this.attr(\"visible\", !!dataPointTarget?.Description)}\n\t\t\t/>`;\n\n\t\t\t// const secondLabelText = (valueDataModelPath?.targetObject as Property)?.annotations?.Common?.Label;\n\t\t\tconst secondLabelExpression = getExpressionFromAnnotation(\n\t\t\t\t(valueDataModelPath?.targetObject as Property)?.annotations?.Common?.Label\n\t\t\t);\n\t\t\tsecondLabel = xml`<Label\n\t\t\t\txmlns=\"sap.m\"\n\t\t\t\t${this.attr(\"text\", compileExpression(secondLabelExpression))}\n\t\t\t\t${this.attr(\"visible\", !!compileExpression(notEqual(undefined, secondLabelExpression)))}\n\t\t\t/>`;\n\t\t}\n\n\t\treturn xml`\n\t\t${firstLabel}\n\t\t\t<ProgressIndicator\n\t\t\t\txmlns=\"sap.m\"\n\t\t\t\t${this.attr(\"id\", this.idPrefix ? generate([this.idPrefix, \"ProgressIndicator-Field-display\"]) : undefined)}\n\t\t\t\t${this.attr(\"displayValue\", displayValue)}\n\t\t\t\t${this.attr(\"percentValue\", percentValue)}\n\t\t\t\t${this.attr(\"state\", criticalityColorExpression)}\n\t\t\t\t${this.attr(\"tooltip\", this.getTooltipValue())}\n\t\t\t/>\n\t\t\t${secondLabel}`;\n\t}\n\n\t/**\n\t * The building block template for the object number common part.\n\t *\n\t * @returns An XML-based string with the definition of the object number common template\n\t */\n\tgetObjectNumberCommonTemplate() {\n\t\tconst { dataModelPath, valueDataModelPath, dataPointConverted } = DataPoint.getTemplatingObjects(this);\n\t\tconst criticalityColorExpression = buildExpressionForCriticalityColor(dataPointConverted, dataModelPath);\n\t\tconst emptyIndicatorMode = this.formatOptions.showEmptyIndicator ?? false ? \"On\" : undefined;\n\t\tconst objectStatusNumber = buildFieldBindingExpression(dataModelPath, this.formatOptions, true);\n\t\tconst unit =\n\t\t\tthis.formatOptions.measureDisplayMode === \"Hidden\"\n\t\t\t\t? undefined\n\t\t\t\t: compileExpression(UIFormatters.getBindingForUnitOrCurrency(valueDataModelPath as DataModelObjectPath));\n\n\t\treturn xml`<ObjectNumber\n\t\t\txmlns=\"sap.m\"\n\t\t\t${this.attr(\"id\", this.idPrefix ? generate([this.idPrefix, \"ObjectNumber-Field-display\"]) : undefined)}\n\t\t\tcore:require=\"{FieldRuntime: 'sap/fe/macros/field/FieldRuntime'}\"\n\t\t\t${this.attr(\"state\", criticalityColorExpression)}\n\t\t\t${this.attr(\"number\", objectStatusNumber)}\n\t\t\t${this.attr(\"unit\", unit)}\n\t\t\t${this.attr(\"visible\", this.visible)}\n\t\t\temphasized=\"false\"\n\t\t\t${this.attr(\"class\", this.formatOptions.dataPointStyle === \"large\" ? \"sapMObjectNumberLarge\" : undefined)}\n\t\t\t${this.attr(\"tooltip\", this.getTooltipValue())}\n\t\t\t${this.attr(\"emptyIndicatorMode\", emptyIndicatorMode)}\n\t\t/>`;\n\t}\n\n\t/**\n\t * The building block template for the object number.\n\t *\n\t * @returns An XML-based string with the definition of the object number template\n\t */\n\tgetObjectNumberTemplate() {\n\t\tconst { valueDataModelPath } = DataPoint.getTemplatingObjects(this);\n\t\tif (this?.formatOptions?.isAnalytics ?? false) {\n\t\t\treturn xml`\n\t\t\t\t<control:ConditionalWrapper\n\t\t\t\t\txmlns:control=\"sap.fe.core.controls\"\n\t\t\t\t\t${this.attr(\"condition\", UIFormatters.hasValidAnalyticalCurrencyOrUnit(valueDataModelPath as DataModelObjectPath))}\n\t\t\t\t>\n\t\t\t\t\t<control:contentTrue>\n\t\t\t\t\t\t${this.getObjectNumberCommonTemplate()}\n\t\t\t\t\t</control:contentTrue>\n\t\t\t\t\t<control:contentFalse>\n\t\t\t\t\t\t<ObjectNumber\n\t\t\t\t\t\t\txmlns=\"sap.m\"\n\t\t\t\t\t\t\t${this.attr(\"id\", this.idPrefix ? generate([this.idPrefix, \"ObjectNumber-Field-display-differentUnit\"]) : undefined)}\n\t\t\t\t\t\t\tnumber=\"*\"\n\t\t\t\t\t\t\tunit=\"\"\n\t\t\t\t\t\t\t${this.attr(\"visible\", this.visible)}\n\t\t\t\t\t\t\temphasized=\"false\"\n\t\t\t\t\t\t\t${this.attr(\"class\", this.formatOptions.dataPointStyle === \"large\" ? \"sapMObjectNumberLarge\" : undefined)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</control:contentFalse>\n\t\t\t\t</control:ConditionalWrapper>`;\n\t\t} else {\n\t\t\treturn xml`${this.getObjectNumberCommonTemplate()}`;\n\t\t}\n\t}\n\n\t/**\n\t * Returns the dependent or an empty string.\n\t *\n\t * @returns Dependent either with the QuickView or an empty string.\n\t */\n\tprivate getObjectStatusDependentsTemplate() {\n\t\tconst { valueDataModelPath } = DataPoint.getTemplatingObjects(this);\n\t\tconst hasSemanticObject = valueDataModelPath?.targetObject?.annotations?.Common?.SemanticObject;\n\t\tif (this.hasQuickViewFacets || hasSemanticObject) {\n\t\t\treturn `<dependents><macro:QuickView\n\t\t\t\t\t\txmlns:macro=\"sap.fe.macros\"\n\t\t\t\t\t\tdataField=\"{metaPath>}\"\n\t\t\t\t\t\tsemanticObject=\"${this.semanticObject}\"\n\t\t\t\t\t\tcontextPath=\"{contextPath>}\"\n\t\t\t\t\t/></dependents>`;\n\t\t}\n\t\treturn \"\";\n\t}\n\n\t/**\n\t * The building block template for the object status.\n\t *\n\t * @returns An XML-based string with the definition of the object status template\n\t */\n\tgetObjectStatusTemplate() {\n\t\tconst { dataModelPath, valueDataModelPath, dataPointConverted } = DataPoint.getTemplatingObjects(this);\n\t\tconst valueProperty = valueDataModelPath && valueDataModelPath.targetObject;\n\t\tthis.hasQuickViewFacets = valueProperty ? isUsedInNavigationWithQuickViewFacets(dataModelPath, valueProperty) : false;\n\t\tthis.semanticObject = \"\";\n\t\tlet annotations,\n\t\t\tsemanticObjectExpressionToResolve: SemanticObjectCustomData[] = [];\n\t\tif (typeof dataPointConverted.Value === \"object\") {\n\t\t\tannotations = dataPointConverted.Value.$target?.annotations?.Common;\n\t\t\tsemanticObjectExpressionToResolve = getSemanticObjectExpressionToResolve(annotations);\n\t\t}\n\t\tif (!!this.semanticObject && this.semanticObject[0] === \"{\") {\n\t\t\tsemanticObjectExpressionToResolve.push({\n\t\t\t\tkey: this.semanticObject.substring(1, this.semanticObject.length - 2),\n\t\t\t\tvalue: this.semanticObject\n\t\t\t});\n\t\t}\n\t\tthis.semanticObjects = getSemanticObjects(semanticObjectExpressionToResolve); // this is used via semanticObjects>\n\t\t// This sets up the semantic links found in the navigation property, if there is no semantic links define before.\n\t\tif (!this.semanticObject && (valueDataModelPath as DataModelObjectPath)?.navigationProperties?.length > 0) {\n\t\t\t(valueDataModelPath as DataModelObjectPath).navigationProperties.forEach((navProperty) => {\n\t\t\t\tif (navProperty?.annotations?.Common?.SemanticObject) {\n\t\t\t\t\tthis.semanticObject = navProperty.annotations.Common.SemanticObject;\n\t\t\t\t\tthis.hasSemanticObjectOnNavigation = true;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tlet criticalityColorExpression = buildExpressionForCriticalityColor(dataPointConverted, dataModelPath);\n\t\tif (criticalityColorExpression === \"None\" && valueDataModelPath) {\n\t\t\tcriticalityColorExpression = this.hasQuickViewFacets\n\t\t\t\t? \"Information\"\n\t\t\t\t: FieldHelper.getStateDependingOnSemanticObjectTargets(valueDataModelPath);\n\t\t}\n\n\t\tconst semanticObjectTargets = FieldHelper.hasSemanticObjectTargets(valueDataModelPath as DataModelObjectPath);\n\t\tconst active = this.hasQuickViewFacets || semanticObjectTargets;\n\n\t\t// if the semanticObjects already calculated the criticality we don't calculate it again\n\t\tcriticalityColorExpression = criticalityColorExpression\n\t\t\t? criticalityColorExpression\n\t\t\t: buildExpressionForCriticalityColor(dataPointConverted, dataModelPath);\n\t\tconst emptyIndicatorMode = this.formatOptions.showEmptyIndicator ?? false ? \"On\" : undefined;\n\t\tconst objectStatusText = buildFieldBindingExpression(dataModelPath, this.formatOptions, false);\n\t\tconst iconExpression = buildExpressionForCriticalityIcon(dataPointConverted, dataModelPath);\n\n\t\treturn xml`<ObjectStatus\n\t\t\t\t\t\txmlns=\"sap.m\"\n\t\t\t\t\t\t${this.attr(\"id\", this.idPrefix ? generate([this.idPrefix, \"ObjectStatus-Field-display\"]) : undefined)}\n\t\t\t\t\t\tcore:require=\"{ FieldRuntime: 'sap/fe/macros/field/FieldRuntime' }\"\n\t\t\t\t\t\t${this.attr(\"class\", this.formatOptions.dataPointStyle === \"large\" ? \"sapMObjectStatusLarge\" : undefined)}\n\t\t\t\t\t\t${this.attr(\"icon\", iconExpression)}\n\t\t\t\t\t\t${this.attr(\"tooltip\", this.getTooltipValue())}\n\t\t\t\t\t\t${this.attr(\"state\", criticalityColorExpression)}\n\t\t\t\t\t\t${this.attr(\"text\", objectStatusText)}\n\t\t\t\t\t\t${this.attr(\"emptyIndicatorMode\", emptyIndicatorMode)}\n\t\t\t\t\t\t${this.attr(\"active\", active)}\n\t\t\t\t\t\tpress=\"FieldRuntime.pressLink\"\n\t\t\t\t\t\t${this.attr(\"ariaLabelledBy\", this.ariaLabelledBy !== null ? this.ariaLabelledBy : undefined)}\n\t\t\t\t\t\t${this.attr(\n\t\t\t\t\t\t\t\"modelContextChange\",\n\t\t\t\t\t\t\tFieldHelper.hasSemanticObjectsWithPath(this.semanticObjects.getObject())\n\t\t\t\t\t\t\t\t? FieldHelper.computeSemanticLinkModelContextChange(this.semanticObjects.getObject(), valueDataModelPath)\n\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t)}\n\t\t\t\t>${this.getObjectStatusDependentsTemplate()}\n\t\t\t\t</ObjectStatus>`;\n\t}\n\n\t/**\n\t * The helper method to get a possible tooltip text.\n\t *\n\t * @returns BindingToolkitExpression\n\t */\n\tprivate getTooltipValue() {\n\t\tconst { dataModelPath, dataPointConverted } = DataPoint.getTemplatingObjects(this);\n\t\treturn getExpressionFromAnnotation(dataPointConverted?.annotations?.Common?.QuickInfo?.valueOf(), getRelativePaths(dataModelPath));\n\t}\n\n\t/**\n\t * The helper method to get a possible target value binding.\n\t *\n\t * @returns BindingToolkitExpression\n\t */\n\tprivate getTargetValueBinding() {\n\t\tconst { dataModelPath, dataPointConverted } = DataPoint.getTemplatingObjects(this);\n\t\treturn getExpressionFromAnnotation(dataPointConverted.TargetValue, getRelativePaths(dataModelPath));\n\t}\n\n\t/**\n\t * The building block template function.\n\t *\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetTemplate() {\n\t\tswitch (this.visualization) {\n\t\t\tcase \"Rating\": {\n\t\t\t\treturn this.getRatingIndicatorTemplate();\n\t\t\t}\n\t\t\tcase \"Progress\": {\n\t\t\t\treturn this.getProgressIndicatorTemplate();\n\t\t\t}\n\t\t\tcase \"ObjectNumber\": {\n\t\t\t\treturn this.getObjectNumberTemplate();\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\treturn this.getObjectStatusTemplate();\n\t\t\t}\n\t\t}\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":13999,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlock","BuildingBlockRuntime","MetaModelConverter","BindingToolkit","StableIdHelper","CriticalityFormatters","DataModelPathHelper","PropertyHelper","UIFormatters","FieldHelper","FieldTemplating","DataPointTemplating","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_exports","getValueFormatted","getHeaderRatingIndicatorText","buildFieldBindingExpression","buildExpressionForProgressIndicatorPercentValue","buildExpressionForProgressIndicatorDisplayValue","isUsedInNavigationWithQuickViewFacets","getVisibleExpression","getSemanticObjects","getSemanticObjectExpressionToResolve","isProperty","hasUnit","hasCurrency","getRelativePaths","enhanceDataModelPath","buildExpressionForCriticalityIcon","buildExpressionForCriticalityColor","generate","pathInModel","notEqual","getExpressionFromAnnotation","formatResult","compileExpression","getInvolvedDataModelObjects","convertMetaModelContext","xml","defineBuildingBlock","BuildingBlockBase","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","DataPoint","name","namespace","type","required","computed","validate","formatOptionsInput","dataPointStyle","includes","displayMode","iconSize","measureDisplayMode","$kind","_BuildingBlockBase","getTemplatingObjects","_internalDataModelPat","_internalDataModelPat2","internalDataModelPath","metaPath","contextPath","internalValueDataModelPath","visible","targetObject","Value","path","internalDataPointConverted","dataModelPath","valueDataModelPath","dataPointConverted","getDataPointVisualization","properties","_valueProperty$annota","_valueProperty$annota2","Visualization","visualization","valueProperty","annotations","Common","SemanticObject","_this","semanticObjects","hasQuickViewFacets","hasSemanticObjectOnNavigation","this","_proto","getRatingIndicatorTemplate","_dataPointValue$$targ","dataPointTarget","targetValue","getTargetValueBinding","dataPointValue","propertyType","$target","numberOfFractionalDigits","ValueFormat","NumberOfFractionalDigits","text","headerLabel","targetLabel","targetLabelExpression","TargetValue","formatOptions","showLabels","attr","SampleSize","Description","idPrefix","getTooltipValue","getProgressIndicatorTemplate","_this$formatOptions","criticalityColorExpression","displayValue","percentValue","firstLabel","secondLabel","_valueDataModelPath$t","_valueDataModelPath$t2","_valueDataModelPath$t3","secondLabelExpression","Label","getObjectNumberCommonTemplate","emptyIndicatorMode","showEmptyIndicator","objectStatusNumber","unit","getBindingForUnitOrCurrency","getObjectNumberTemplate","_this$formatOptions2","isAnalytics","hasValidAnalyticalCurrencyOrUnit","getObjectStatusDependentsTemplate","_valueDataModelPath$t4","_valueDataModelPath$t5","_valueDataModelPath$t6","hasSemanticObject","semanticObject","getObjectStatusTemplate","_navigationProperties","semanticObjectExpressionToResolve","_dataPointConverted$V","_dataPointConverted$V2","push","substring","length","navigationProperties","navProperty","_navProperty$annotati","_navProperty$annotati2","getStateDependingOnSemanticObjectTargets","semanticObjectTargets","hasSemanticObjectTargets","active","objectStatusText","iconExpression","ariaLabelledBy","hasSemanticObjectsWithPath","getObject","computeSemanticLinkModelContextChange","_dataPointConverted$a","_dataPointConverted$a2","_dataPointConverted$a3","QuickInfo","valueOf","getTemplate"],"sources":["DataPoint-dbg.js"],"mappings":"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","sourceRoot":"internal"}},{"offset":{"line":14088,"column":0},"map":{"version":3,"names":["FilterField","defineBuildingBlock","name","namespace","blockAttribute","type","required","isPublic","defaultValue","oProps","configuration","mSettings","propertyConverted","MetaModelConverter","convertMetaModelContext","property","dataModelPath","getInvolvedDataModelObjects","contextPath","propertyName","fixedValues","annotations","Common","ValueListWithFixedValues","controlId","idPrefix","generate","sourcePath","getTargetObjectPath","dataType","FilterFieldHelper","getDataType","labelTerm","Label","labelExpression","getExpressionFromAnnotation","label","compileExpression","conditionsBinding","getConditionsBinding","placeholder","getPlaceholder","vfEnabled","visualFilter","indexOf","vfId","undefined","propertyContext","model","getModel","vhPropertyPath","FieldHelper","valueHelpPropertyForFilterField","filterable","CommonHelper","isPropertyFilterable","propertyObject","getObject","propertyInterface","context","display","getFilterFieldDisplayFormat","isFilterable","maxConditions","dataTypeConstraints","constraints","dataTypeFormatOptions","formatOptions","isRequiredInFilter","operators","useSemanticDateRange","settings","getPath","vhProperty","createBindingContext","vhPropertyObject","vhPropertyInterface","relativeVhPropertyPath","getRelativePropertyPath","relativePropertyPath","fieldHelpProperty","getFieldHelpPropertyForFilterField","$Type","vhIdPrefix","getVisualFilterContent","visualFilterObject","vfXML","xml","isA","SAP_UI_MODEL_CONTEXT","presentationAnnotation","outParameter","inParameters","valuelistProperty","selectionVariantAnnotation","multipleSelectionAllowed","requiredProperties","showOverlayInitially","renderLineChart","stringifyCustomData","getTemplate","xmlRet","err","Log","error","BuildingBlockBase"],"sourceRoot":"internal","sources":["FilterField.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport { blockAttribute, BuildingBlockBase, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport { SAP_UI_MODEL_CONTEXT, xml } from \"sap/fe/core/buildingBlocks/BuildingBlockRuntime\";\nimport * as MetaModelConverter from \"sap/fe/core/converters/MetaModelConverter\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport { getRelativePropertyPath } from \"sap/fe/core/templating/PropertyFormatters\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport FieldHelper from \"sap/fe/macros/field/FieldHelper\";\nimport FilterFieldHelper from \"sap/fe/macros/filter/FilterFieldHelper\";\nimport { getFilterFieldDisplayFormat } from \"sap/fe/macros/filter/FilterFieldTemplating\";\n\nimport type { Property } from \"@sap-ux/vocabularies-types\";\nimport type { VisualFilters } from \"sap/fe/core/converters/controls/ListReport/VisualFilters\";\nimport { compileExpression, getExpressionFromAnnotation } from \"sap/fe/core/helpers/BindingToolkit\";\nimport type { PropertiesOf } from \"sap/fe/core/helpers/ClassSupport\";\nimport { getTargetObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport type { ComputedAnnotationInterface, MetaModelContext } from \"sap/fe/core/templating/UIFormatters\";\nimport type Context from \"sap/ui/model/Context\";\nimport type MetaModel from \"sap/ui/model/MetaModel\";\n\n/**\n * Building block for creating a Filter Field based on the metadata provided by OData V4.\n * <br>\n * It is designed to work based on a property context(property) pointing to an entity type property\n * needed to be used as filterfield and entityType context(contextPath) to consider the relativity of\n * the propertyPath of the property wrt entityType.\n *\n * Usage example:\n * <pre>\n * &lt;macro:FilterField id=\"MyFilterField\" property=\"CompanyName\" /&gt;\n * </pre>\n *\n * @private\n */\n@defineBuildingBlock({\n\tname: \"FilterField\",\n\tnamespace: \"sap.fe.macros.internal\"\n})\nexport default class FilterField extends BuildingBlockBase {\n\t/**\n\t * Defines the metadata path to the property.\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true,\n\t\tisPublic: true\n\t})\n\tproperty!: Context;\n\n\t/**\n\t * Metadata path to the entitySet or navigationProperty\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true,\n\t\tisPublic: true\n\t})\n\tcontextPath!: Context;\n\n\t/**\n\t * Visual filter settings for filter field.\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\tisPublic: true\n\t})\n\tvisualFilter?: VisualFilters;\n\n\t/**\n\t * A prefix that is added to the generated ID of the filter field.\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tdefaultValue: \"FilterField\",\n\t\tisPublic: true\n\t})\n\tidPrefix!: string;\n\n\t/**\n\t * A prefix that is added to the generated ID of the value help used for the filter field.\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tdefaultValue: \"FilterFieldValueHelp\",\n\t\tisPublic: true\n\t})\n\tvhIdPrefix!: string;\n\n\t/**\n\t * Specifies the Sematic Date Range option for the filter field.\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\tdefaultValue: true,\n\t\tisPublic: true\n\t})\n\tuseSemanticDateRange!: boolean;\n\n\t/**\n\t * Settings from the manifest settings.\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tdefaultValue: \"\",\n\t\tisPublic: true\n\t})\n\tsettings?: string;\n\n\t/***********************************************\n\t *            INTERNAL ATTRIBUTES              *\n\t **********************************************/\n\n\t/**\n\t * Control Id for MDC filter field used inside.\n\t */\n\tcontrolId!: string;\n\n\t/**\n\t * Source annotation path of the property.\n\t */\n\tsourcePath!: string;\n\n\t/**\n\t * Label for filterfield.\n\t */\n\tlabel!: string;\n\n\t/**\n\t * Data Type of the filter field.\n\t */\n\tdataType!: string;\n\n\t/**\n\t * Maximum conditions that can be added to the filter field.\n\t */\n\tmaxConditions!: number;\n\n\t/**\n\t * Field Help id as association for the filter field.\n\t */\n\tfieldHelpProperty?: string;\n\n\t/**\n\t * Binding path for conditions added to filter field.\n\t */\n\tconditionsBinding!: string;\n\n\t/**\n\t * Datatype constraints of the filter field.\n\t */\n\tdataTypeConstraints?: string;\n\n\t/**\n\t * Datatype format options of the filter field.\n\t */\n\tdataTypeFormatOptions?: string;\n\n\t/**\n\t * To specify filter field is mandatory for filtering.\n\t */\n\trequired!: string;\n\n\t/**\n\t * Valid operators for the filter field.\n\t */\n\toperators?: string;\n\n\t/**\n\t * Visual Filter id to be used.\n\t */\n\tvfId?: string;\n\n\t/**\n\t * Visual Filter is expected.\n\t */\n\tvfEnabled!: boolean;\n\n\t/**\n\t * Property used is filterable\n\t */\n\tisFilterable!: boolean;\n\n\t/**\n\t * Property for placeholder\n\t */\n\tplaceholder?: string;\n\n\t/**\n\t * Property to hold promise for display\n\t */\n\tdisplay?: Promise<string | undefined>;\n\n\tconstructor(oProps: PropertiesOf<FilterField>, configuration: any, mSettings: any) {\n\t\tsuper(oProps, configuration, mSettings);\n\n\t\tconst propertyConverted = MetaModelConverter.convertMetaModelContext(this.property) as Property;\n\t\tconst dataModelPath = MetaModelConverter.getInvolvedDataModelObjects(this.property, this.contextPath);\n\n\t\t// Property settings\n\t\tconst propertyName = propertyConverted.name,\n\t\t\tfixedValues = !!propertyConverted.annotations?.Common?.ValueListWithFixedValues;\n\n\t\tthis.controlId = this.idPrefix && generate([this.idPrefix, propertyName]);\n\t\tthis.sourcePath = getTargetObjectPath(dataModelPath);\n\t\tthis.dataType = FilterFieldHelper.getDataType(propertyConverted);\n\t\tconst labelTerm = propertyConverted?.annotations?.Common?.Label || propertyName;\n\t\tconst labelExpression = getExpressionFromAnnotation(labelTerm);\n\t\tthis.label = compileExpression(labelExpression) || propertyName;\n\t\tthis.conditionsBinding = FilterFieldHelper.getConditionsBinding(dataModelPath) || \"\";\n\t\tthis.placeholder = FilterFieldHelper.getPlaceholder(propertyConverted);\n\t\t// Visual Filter settings\n\t\tthis.vfEnabled = !!this.visualFilter && !(this.idPrefix && this.idPrefix.indexOf(\"Adaptation\") > -1);\n\t\tthis.vfId = this.vfEnabled ? generate([this.idPrefix, propertyName, \"VisualFilter\"]) : undefined;\n\n\t\t//-----------------------------------------------------------------------------------------------------//\n\t\t// TODO: need to change operations from MetaModel to Converters.\n\t\t// This mainly included changing changing getFilterRestrictions operations from metaModel to converters\n\t\tconst propertyContext = this.property,\n\t\t\tmodel: MetaModel = propertyContext.getModel(),\n\t\t\tvhPropertyPath: string = FieldHelper.valueHelpPropertyForFilterField(propertyContext),\n\t\t\tfilterable = CommonHelper.isPropertyFilterable(propertyContext),\n\t\t\tpropertyObject = propertyContext.getObject(),\n\t\t\tpropertyInterface = { context: propertyContext } as ComputedAnnotationInterface;\n\n\t\tthis.display = getFilterFieldDisplayFormat(dataModelPath, propertyConverted, propertyInterface);\n\t\tthis.isFilterable = !(filterable === false || filterable === \"false\");\n\t\tthis.maxConditions = FilterFieldHelper.maxConditions(propertyObject, propertyInterface);\n\t\tthis.dataTypeConstraints = FilterFieldHelper.constraints(propertyObject, propertyInterface);\n\t\tthis.dataTypeFormatOptions = FilterFieldHelper.formatOptions(propertyObject, propertyInterface);\n\t\tthis.required = FilterFieldHelper.isRequiredInFilter(propertyObject, propertyInterface);\n\t\tthis.operators = FieldHelper.operators(\n\t\t\tpropertyContext,\n\t\t\tpropertyObject,\n\t\t\tthis.useSemanticDateRange,\n\t\t\tthis.settings || \"\",\n\t\t\tthis.contextPath.getPath()\n\t\t);\n\n\t\t// Value Help settings\n\t\t// TODO: This needs to be updated when VH macro is converted to 2.0\n\t\tconst vhProperty = model.createBindingContext(vhPropertyPath) as Context;\n\t\tconst vhPropertyObject = vhProperty.getObject() as MetaModelContext,\n\t\t\tvhPropertyInterface = { context: vhProperty },\n\t\t\trelativeVhPropertyPath = getRelativePropertyPath(vhPropertyObject, vhPropertyInterface),\n\t\t\trelativePropertyPath = getRelativePropertyPath(propertyObject, propertyInterface);\n\t\tthis.fieldHelpProperty = FieldHelper.getFieldHelpPropertyForFilterField(\n\t\t\tpropertyContext,\n\t\t\tpropertyObject,\n\t\t\tpropertyObject.$Type,\n\t\t\tthis.vhIdPrefix,\n\t\t\trelativePropertyPath,\n\t\t\trelativeVhPropertyPath,\n\t\t\tfixedValues,\n\t\t\tthis.useSemanticDateRange\n\t\t);\n\n\t\t//-----------------------------------------------------------------------------------------------------//\n\t}\n\n\tgetVisualFilterContent() {\n\t\tlet visualFilterObject = this.visualFilter,\n\t\t\tvfXML = xml``;\n\t\tif (!this.vfEnabled || !visualFilterObject) {\n\t\t\treturn vfXML;\n\t\t}\n\t\tif ((visualFilterObject as Context)?.isA?.(SAP_UI_MODEL_CONTEXT)) {\n\t\t\tvisualFilterObject = (visualFilterObject as Context).getObject() as VisualFilters;\n\t\t}\n\n\t\tconst {\n\t\t\tcontextPath,\n\t\t\tpresentationAnnotation,\n\t\t\toutParameter,\n\t\t\tinParameters,\n\t\t\tvaluelistProperty,\n\t\t\tselectionVariantAnnotation,\n\t\t\tmultipleSelectionAllowed,\n\t\t\trequired,\n\t\t\trequiredProperties = [],\n\t\t\tshowOverlayInitially,\n\t\t\trenderLineChart\n\t\t} = visualFilterObject;\n\t\tvfXML = xml`\n\t\t\t\t<macro:VisualFilter\n\t\t\t\t\tid=\"${this.vfId}\"\n\t\t\t\t\tcontextPath=\"${contextPath}\"\n\t\t\t\t\tmetaPath=\"${presentationAnnotation}\"\n\t\t\t\t\toutParameter=\"${outParameter}\"\n\t\t\t\t\tinParameters=\"${inParameters}\"\n\t\t\t\t\tvaluelistProperty=\"${valuelistProperty}\"\n\t\t\t\t\tselectionVariantAnnotation=\"${selectionVariantAnnotation}\"\n\t\t\t\t\tmultipleSelectionAllowed=\"${multipleSelectionAllowed}\"\n\t\t\t\t\trequired=\"${required}\"\n\t\t\t\t\trequiredProperties=\"${CommonHelper.stringifyCustomData(requiredProperties)}\"\n\t\t\t\t\tshowOverlayInitially=\"${showOverlayInitially}\"\n\t\t\t\t\trenderLineChart=\"${renderLineChart}\"\n\t\t\t\t\tfilterBarEntityType=\"${contextPath}\"\n\t\t\t\t/>\n\t\t\t`;\n\n\t\treturn vfXML;\n\t}\n\n\tasync getTemplate() {\n\t\tlet xmlRet = ``;\n\t\tif (this.isFilterable) {\n\t\t\tlet display;\n\t\t\ttry {\n\t\t\t\tdisplay = await this.display;\n\t\t\t} catch (err: unknown) {\n\t\t\t\tLog.error(`FE : FilterField BuildingBlock : Error fetching display property for ${this.sourcePath} : ${err}`);\n\t\t\t}\n\n\t\t\txmlRet = xml`\n\t\t\t\t<mdc:FilterField\n\t\t\t\t\txmlns:mdc=\"sap.ui.mdc\"\n\t\t\t\t\txmlns:macro=\"sap.fe.macros\"\n\t\t\t\t\txmlns:unittest=\"http://schemas.sap.com/sapui5/preprocessorextension/sap.fe.unittesting/1\"\n\t\t\t\t\txmlns:customData=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\"\n\t\t\t\t\tunittest:id=\"UnitTest::FilterField\"\n\t\t\t\t\tcustomData:sourcePath=\"${this.sourcePath}\"\n\t\t\t\t\tid=\"${this.controlId}\"\n\t\t\t\t\tdelegate=\"{name: 'sap/fe/macros/field/FieldBaseDelegate', payload:{isFilterField:true}}\"\n\t\t\t\t\tlabel=\"${this.label}\"\n\t\t\t\t\tdataType=\"${this.dataType}\"\n\t\t\t\t\tdisplay=\"${display}\"\n\t\t\t\t\tmaxConditions=\"${this.maxConditions}\"\n\t\t\t\t\tfieldHelp=\"${this.fieldHelpProperty}\"\n\t\t\t\t\tconditions=\"${this.conditionsBinding}\"\n\t\t\t\t\tdataTypeConstraints=\"${this.dataTypeConstraints}\"\n\t\t\t\t\tdataTypeFormatOptions=\"${this.dataTypeFormatOptions}\"\n\t\t\t\t\trequired=\"${this.required}\"\n\t\t\t\t\toperators=\"${this.operators}\"\n\t\t\t\t\tplaceholder=\"${this.placeholder}\"\n\n\t\t\t\t>\n\t\t\t\t\t${this.vfEnabled ? this.getVisualFilterContent() : xml``}\n\t\t\t\t</mdc:FilterField>\n\t\t\t`;\n\t\t}\n\n\t\treturn xmlRet;\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":14373,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","BuildingBlock","BuildingBlockRuntime","MetaModelConverter","StableIdHelper","PropertyFormatters","CommonHelper","FieldHelper","FilterFieldHelper","FilterFieldTemplating","BindingToolkit","DataModelPathHelper","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_exports","getTargetObjectPath","getExpressionFromAnnotation","compileExpression","getFilterFieldDisplayFormat","getRelativePropertyPath","generate","xml","SAP_UI_MODEL_CONTEXT","defineBuildingBlock","BuildingBlockBase","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","FilterField","name","namespace","type","required","isPublic","defaultValue","_BuildingBlockBase","oProps","configuration","mSettings","_propertyConverted$an","_propertyConverted$an2","_propertyConverted$an3","_propertyConverted$an4","_this","this","propertyConverted","convertMetaModelContext","dataModelPath","getInvolvedDataModelObjects","contextPath","propertyName","fixedValues","annotations","Common","ValueListWithFixedValues","controlId","idPrefix","sourcePath","dataType","getDataType","labelTerm","Label","labelExpression","label","conditionsBinding","getConditionsBinding","placeholder","getPlaceholder","vfEnabled","visualFilter","indexOf","vfId","propertyContext","model","getModel","vhPropertyPath","valueHelpPropertyForFilterField","filterable","isPropertyFilterable","propertyObject","getObject","propertyInterface","display","isFilterable","maxConditions","dataTypeConstraints","constraints","dataTypeFormatOptions","formatOptions","isRequiredInFilter","operators","useSemanticDateRange","settings","getPath","vhProperty","createBindingContext","vhPropertyObject","vhPropertyInterface","relativeVhPropertyPath","relativePropertyPath","fieldHelpProperty","getFieldHelpPropertyForFilterField","$Type","vhIdPrefix","_proto","getVisualFilterContent","_visualFilterObject","_visualFilterObject$i","visualFilterObject","vfXML","isA","presentationAnnotation","outParameter","inParameters","valuelistProperty","selectionVariantAnnotation","multipleSelectionAllowed","requiredProperties","showOverlayInitially","renderLineChart","stringifyCustomData","getTemplate","async","xmlRet","err","error"],"sources":["FilterField-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,gDAAO,CAAC,eAAgB,2CAA4C,kDAAmD,4CAA6C,qCAAsC,4CAA6C,6BAA8B,kCAAmC,yCAA0C,6CAA8C,qCAAsC,8CAA+C,SAAUC,EAAKC,EAAeC,EAAsBC,EAAoBC,EAAgBC,EAAoBC,EAAcC,EAAaC,EAAmBC,EAAuBC,EAAgBC,GAC3qB,aAEA,IAAIC,EAAMC,EAAOC,EAAOC,EAAOC,EAAOC,EAAOC,EAAOC,EAAOC,EAAQC,EAASC,EAAaC,EAAcC,EAAcC,EAAcC,EAAcC,EAAcC,EAC/J,IAAIC,EAAW,CAAC,EAChB,IAAIC,EAAsBnB,EAAoBmB,oBAC9C,IAAIC,EAA8BrB,EAAeqB,4BACjD,IAAIC,EAAoBtB,EAAesB,kBACvC,IAAIC,EAA8BxB,EAAsBwB,4BACxD,IAAIC,EAA0B7B,EAAmB6B,wBACjD,IAAIC,EAAW/B,EAAe+B,SAC9B,IAAIC,EAAMlC,EAAqBkC,IAC/B,IAAIC,EAAuBnC,EAAqBmC,qBAChD,IAAIC,EAAsBrC,EAAcqC,oBACxC,IAAIC,EAAoBtC,EAAcsC,kBACtC,IAAIC,EAAiBvC,EAAcuC,eACnC,SAASC,EAA2BC,EAAQC,EAAUC,EAAYC,GAAW,IAAKD,EAAY,OAAQE,OAAOC,eAAeL,EAAQC,EAAU,CAAEK,WAAYJ,EAAWI,WAAYC,aAAcL,EAAWK,aAAcC,SAAUN,EAAWM,SAAUC,MAAOP,EAAWQ,YAAcR,EAAWQ,YAAYC,KAAKR,QAAgB,GAAM,CAC3U,SAASS,EAAuBC,GAAQ,GAAIA,SAAc,EAAG,CAAE,MAAM,IAAIC,eAAe,4DAA8D,CAAE,OAAOD,CAAM,CACrK,SAASE,EAAeC,EAAUC,GAAcD,EAASE,UAAYd,OAAOe,OAAOF,EAAWC,WAAYF,EAASE,UAAUE,YAAcJ,EAAUK,EAAgBL,EAAUC,EAAa,CAC5L,SAASI,EAAgBC,EAAGC,GAAKF,EAAkBjB,OAAOoB,eAAiBpB,OAAOoB,eAAeC,OAAS,SAASJ,EAAgBC,EAAGC,GAAKD,EAAEI,UAAYH,EAAG,OAAOD,CAAG,EAAG,OAAOD,EAAgBC,EAAGC,EAAI,CACvM,SAASI,EAA0B3B,EAAQC,EAAU2B,EAAY1B,EAAYC,GAAW,IAAI0B,EAAO,CAAC,EAAGzB,OAAO0B,KAAK5B,GAAY6B,QAAQ,SAAUC,GAAOH,EAAKG,GAAO9B,EAAW8B,EAAM,GAAIH,EAAKvB,aAAeuB,EAAKvB,WAAYuB,EAAKtB,eAAiBsB,EAAKtB,aAAc,GAAI,UAAWsB,GAAQA,EAAKnB,YAAa,CAAEmB,EAAKrB,SAAW,IAAM,CAAEqB,EAAOD,EAAWK,QAAQC,UAAUC,OAAO,SAAUN,EAAMO,GAAa,OAAOA,EAAUpC,EAAQC,EAAU4B,IAASA,CAAM,EAAGA,GAAO,GAAI1B,GAAW0B,EAAKnB,mBAAqB,EAAG,CAAEmB,EAAKpB,MAAQoB,EAAKnB,YAAcmB,EAAKnB,YAAYC,KAAKR,QAAgB,EAAG0B,EAAKnB,YAAc2B,SAAW,CAAE,GAAIR,EAAKnB,mBAAqB,EAAG,CAAEN,OAAOC,eAAeL,EAAQC,EAAU4B,GAAOA,EAAO,IAAM,CAAE,OAAOA,CAAM,CACntB,SAASS,EAA0BpC,EAAYC,GAAW,MAAM,IAAIoC,MAAM,wDAA0D,gFAAkF,CACtN,IAAIC,GAeJtE,EAAO0B,EAAoB,CACzB6C,KAAM,cACNC,UAAW,2BACTvE,EAAQ2B,EAAe,CACzB6C,KAAM,uBACNC,SAAU,KACVC,SAAU,OACRzE,EAAQ0B,EAAe,CACzB6C,KAAM,uBACNC,SAAU,KACVC,SAAU,OACRxE,EAAQyB,EAAe,CACzB6C,KAAM,uBACNE,SAAU,OACRvE,EAAQwB,EAAe,CACzB6C,KAAM,SACNG,aAAc,cACdD,SAAU,OACRtE,EAAQuB,EAAe,CACzB6C,KAAM,SACNG,aAAc,uBACdD,SAAU,OACRrE,EAAQsB,EAAe,CACzB6C,KAAM,UACNG,aAAc,KACdD,SAAU,OACRpE,EAAQqB,EAAe,CACzB6C,KAAM,SACNG,aAAc,GACdD,SAAU,OACR3E,EAAKQ,GAAUC,EAAuB,SAAUoE,GAClDhC,EAAeyB,EAAaO,GA6B5B,SAASP,EAAYQ,EAAQC,EAAeC,GAC1C,IAAIC,EAAuBC,EAAwBC,EAAwBC,EAC3E,IAAIC,EACJA,EAAQR,EAAmBpC,KAAK6C,KAAMR,EAAQC,EAAeC,IAAcM,KAC3EzD,EAA2BwD,EAAO,WAAY3E,EAAagC,EAAuB2C,IAClFxD,EAA2BwD,EAAO,cAAe1E,EAAc+B,EAAuB2C,IACtFxD,EAA2BwD,EAAO,eAAgBzE,EAAc8B,EAAuB2C,IACvFxD,EAA2BwD,EAAO,WAAYxE,EAAc6B,EAAuB2C,IACnFxD,EAA2BwD,EAAO,aAAcvE,EAAc4B,EAAuB2C,IACrFxD,EAA2BwD,EAAO,uBAAwBtE,EAAc2B,EAAuB2C,IAC/FxD,EAA2BwD,EAAO,WAAYrE,EAAc0B,EAAuB2C,IACnF,MAAME,EAAoBhG,EAAmBiG,wBAAwBH,EAAMtD,UAC3E,MAAM0D,EAAgBlG,EAAmBmG,4BAA4BL,EAAMtD,SAAUsD,EAAMM,aAG3F,MAAMC,EAAeL,EAAkBhB,KACrCsB,MAAkBZ,EAAwBM,EAAkBO,eAAiB,MAAQb,SAA+B,IAAMC,EAAyBD,EAAsBc,UAAY,MAAQb,SAAgC,GAAKA,EAAuBc,0BAC3PX,EAAMY,UAAYZ,EAAMa,UAAY3E,EAAS,CAAC8D,EAAMa,SAAUN,IAC9DP,EAAMc,WAAajF,EAAoBuE,GACvCJ,EAAMe,SAAWxG,EAAkByG,YAAYd,GAC/C,MAAMe,GAAaf,IAAsB,MAAQA,SAA2B,OAAS,GAAKJ,EAAyBI,EAAkBO,eAAiB,MAAQX,SAAgC,OAAS,GAAKC,EAAyBD,EAAuBY,UAAY,MAAQX,SAAgC,OAAS,EAAIA,EAAuBmB,QAAUX,EAC9V,MAAMY,EAAkBrF,EAA4BmF,GACpDjB,EAAMoB,MAAQrF,EAAkBoF,IAAoBZ,EACpDP,EAAMqB,kBAAoB9G,EAAkB+G,qBAAqBlB,IAAkB,GACnFJ,EAAMuB,YAAchH,EAAkBiH,eAAetB,GAErDF,EAAMyB,YAAczB,EAAM0B,gBAAkB1B,EAAMa,UAAYb,EAAMa,SAASc,QAAQ,eAAiB,GACtG3B,EAAM4B,KAAO5B,EAAMyB,UAAYvF,EAAS,CAAC8D,EAAMa,SAAUN,EAAc,iBAAmBzB,UAK1F,MAAM+C,EAAkB7B,EAAMtD,SAC5BoF,EAAQD,EAAgBE,WACxBC,EAAiB1H,EAAY2H,gCAAgCJ,GAC7DK,EAAa7H,EAAa8H,qBAAqBN,GAC/CO,EAAiBP,EAAgBQ,YACjCC,EAAoB,CAClB1F,QAASiF,GAEb7B,EAAMuC,QAAUvG,EAA4BoE,EAAeF,EAAmBoC,GAC9EtC,EAAMwC,eAAiBN,IAAe,OAASA,IAAe,SAC9DlC,EAAMyC,cAAgBlI,EAAkBkI,cAAcL,EAAgBE,GACtEtC,EAAM0C,oBAAsBnI,EAAkBoI,YAAYP,EAAgBE,GAC1EtC,EAAM4C,sBAAwBrI,EAAkBsI,cAAcT,EAAgBE,GAC9EtC,EAAMX,SAAW9E,EAAkBuI,mBAAmBV,EAAgBE,GACtEtC,EAAM+C,UAAYzI,EAAYyI,UAAUlB,EAAiBO,EAAgBpC,EAAMgD,qBAAsBhD,EAAMiD,UAAY,GAAIjD,EAAMM,YAAY4C,WAI7I,MAAMC,EAAarB,EAAMsB,qBAAqBpB,GAC9C,MAAMqB,EAAmBF,EAAWd,YAClCiB,EAAsB,CACpB1G,QAASuG,GAEXI,EAAyBtH,EAAwBoH,EAAkBC,GACnEE,EAAuBvH,EAAwBmG,EAAgBE,GACjEtC,EAAMyD,kBAAoBnJ,EAAYoJ,mCAAmC7B,EAAiBO,EAAgBA,EAAeuB,MAAO3D,EAAM4D,WAAYJ,EAAsBD,EAAwB/C,EAAaR,EAAMgD,sBAGnN,OAAOhD,CACT,CACApE,EAAWqD,EACX,IAAI4E,EAAS5E,EAAYtB,UACzBkG,EAAOC,uBAAyB,SAASA,IACvC,IAAIC,EAAqBC,EACzB,IAAIC,EAAqBhE,KAAKyB,aAC5BwC,EAAQ/H,CAAG,GACb,IAAK8D,KAAKwB,YAAcwC,EAAoB,CAC1C,OAAOC,CACT,CACA,IAAKH,EAAsBE,KAAwB,MAAQF,SAA6B,IAAMC,EAAwBD,EAAoBI,OAAS,MAAQH,SAA+B,GAAKA,EAAsB5G,KAAK2G,EAAqB3H,GAAuB,CACpQ6H,EAAqBA,EAAmB5B,WAC1C,CACA,MAAM/B,YACJA,EAAW8D,uBACXA,EAAsBC,aACtBA,EAAYC,aACZA,EAAYC,kBACZA,EAAiBC,2BACjBA,EAA0BC,yBAC1BA,EAAwBpF,SACxBA,EAAQqF,mBACRA,EAAqB,GAAEC,qBACvBA,EAAoBC,gBACpBA,GACEX,EACJC,EAAQ/H,CAAG;;WAEN8D,KAAK2B;oBACItB;iBACH8D;qBACIC;qBACAC;0BACKC;mCACSC;iCACFC;iBAChBpF;2BACUhF,EAAawK,oBAAoBH;6BAC/BC;wBACLC;4BACItE;;KAGtB,OAAO4D,CACT,EACAL,EAAOiB,YAAcC,eAAeD,IAClC,IAAIE,EAAS,GACb,GAAI/E,KAAKuC,aAAc,CACrB,IAAID,EACJ,IACEA,QAAgBtC,KAAKsC,OAGvB,CAFE,MAAO0C,GACPlL,EAAImL,MAAM,wEAAwEjF,KAAKa,gBAAgBmE,IACzG,CACAD,EAAS7I,CAAG;;;;;;;8BAOU8D,KAAKa;WACxBb,KAAKW;;cAEFX,KAAKmB;iBACFnB,KAAKc;gBACNwB;sBACMtC,KAAKwC;kBACTxC,KAAKwD;mBACJxD,KAAKoB;4BACIpB,KAAKyC;8BACHzC,KAAK2C;iBAClB3C,KAAKZ;kBACJY,KAAK8C;oBACH9C,KAAKsB;;;OAGlBtB,KAAKwB,UAAYxB,KAAK6D,yBAA2B3H,CAAG;;IAGrD,CACA,OAAO6I,CACT,EACA,OAAO/F,CACT,CA/K0C,CA+KxC3C,GAAqBjB,EAAc+C,EAA0BhD,EAAQuC,UAAW,WAAY,CAAC/C,GAAQ,CACrGoC,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACX7B,EAAe8C,EAA0BhD,EAAQuC,UAAW,cAAe,CAAC9C,GAAQ,CACtFmC,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACX5B,EAAe6C,EAA0BhD,EAAQuC,UAAW,eAAgB,CAAC7C,GAAQ,CACvFkC,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACX3B,EAAe4C,EAA0BhD,EAAQuC,UAAW,WAAY,CAAC5C,GAAQ,CACnFiC,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACX1B,EAAe2C,EAA0BhD,EAAQuC,UAAW,aAAc,CAAC3C,GAAQ,CACrFgC,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXzB,EAAe0C,EAA0BhD,EAAQuC,UAAW,uBAAwB,CAAC1C,GAAQ,CAC/F+B,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXxB,EAAeyC,EAA0BhD,EAAQuC,UAAW,WAAY,CAACzC,GAAQ,CACnF8B,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACV/B,KAAaD,GAClBS,EAAWqD,EACX,OAAOrD,CACT,EAAG","sourceRoot":"internal"}},{"offset":{"line":14419,"column":0},"map":{"version":3,"names":["Field","defineBuildingBlock","name","namespace","designtime","blockAttribute","type","defaultValue","computed","required","$kind","$Type","validate","formatOptionsInput","textAlignMode","includes","Error","displayMode","fieldMode","measureDisplayMode","textExpandBehaviorDisplay","semanticKeyStyle","blockEvent","getOverrides","mControlConfiguration","sID","oProps","oControlConfig","Object","keys","forEach","sConfigKey","getObjectIdentifierTitle","fieldFormatOptions","oPropertyDataModelObjectPath","propertyBindingExpression","pathInModel","getContextRelativeTargetObjectPath","targetDisplayMode","oPropertyDefinition","targetObject","$target","formatWithTypeInformation","commonText","annotations","Common","Text","undefined","relativeLocation","getRelativePaths","parametersForFormatter","push","targetEntitySet","DraftRoot","DraftNode","Entity","HasDraft","IsActive","constant","getExpressionFromAnnotation","UI","TextArrangement","SemanticObject","compileExpression","formatResult","valueFormatters","formatOPTitle","getObjectIdentifierText","formatToKeepWhitespace","setUpDataPointType","oDataField","term","setUpVisibleProperties","oFieldProps","visible","FieldTemplating","getVisibleExpression","formatOptions","displayVisible","getContentId","sMacroId","setUpSemanticObjects","oDataModelPath","aSemObjExprToResolve","getSemanticObjectExpressionToResolve","semanticObject","key","substr","length","value","semanticObjects","getSemanticObjects","navigationProperties","navProperty","hasSemanticObjectOnNavigation","setUpEditableProperties","oMetaModel","oPropertyForFieldControl","Value","editMode","editModeAsObject","bMeasureReadOnly","UIFormatters","getEditMode","editableExpression","getEditableExpressionAsObject","aRequiredPropertiesFromInsertRestrictions","CommonUtils","getRequiredPropertiesFromInsertRestrictions","entitySet","getPath","replaceAll","aRequiredPropertiesFromUpdateRestrictions","getRequiredPropertiesFromUpdateRestrictions","oRequiredProperties","requiredPropertiesFromInsertRestrictions","requiredPropertiesFromUpdateRestrictions","ModelHelper","isCollaborationDraftSupported","collaborationEnabled","collaborationExpression","getCollaborationExpression","CollaborationFormatters","hasCollaborationActivity","collaborationHasActivityExpression","collaborationInitialsExpression","getCollaborationActivityInitials","collaborationColorExpression","getCollaborationActivityColor","and","not","ifElse","enabledExpression","getEnabledExpression","requiredExpression","getRequiredExpression","setUpFormatOptions","oControlConfiguration","mSettings","oOverrideProps","dataField","getDisplayMode","textLinesEdit","textMaxLines","models","viewData","getProperty","retrieveTextFromValueList","isRetrieveTextFromValueListEnabled","hasEntityTextArrangement","targetEntityType","_flexId","noWrapperId","idPrefix","generate","setUpDisplayStyle","oProperty","displayStyle","fileSrc","IsImageURL","avatarVisible","avatarSrc","hasQuickViewFacets","isUsedInNavigationWithQuickViewFacets","Target","setUpNavigationAvailable","text","getTextWithWhiteSpace","isSemanticKey","hasSituationsIndicator","SituationsIndicator","getSituationsNavigationProperty","setUpObjectIdentifierTitleAndText","Criticality","Measures","ISOCurrency","String","isCurrencyAligned","valueAsStringBindingExpression","getValueBinding","unitBindingExpression","getBindingForUnitOrCurrency","Communication","IsEmailAddress","IsPhoneNumber","MultiLineText","hasSemanticObjectInNavigationOrProperty","_oPropertyCommonAnnotations","_oPropertyNavigationPropertyAnnotations","indexOf","iconUrl","IconUrl","linkUrl","Url","setUpEditStyle","setEditStyleProperties","_oProps","identifierTitle","identifierText","getTextBinding","_type","navigationAvailable","NavigationAvailable","ignoreNavigationAvailable","props","controlConfiguration","settings","oDataFieldConverted","MetaModelConverter","convertMetaModelContext","getInvolvedDataModelObjects","_apiId","_vhFlexId","vhIdPrefix","valueDataModelPath","getDataModelObjectPathForValue","dataSourcePath","getTargetObjectPath","metaModel","entityType","createBindingContext","fullyQualifiedName","aDisplayStylesWithoutPropText","getObject","oDataPoint","TemplateModel","getModel","emptyIndicatorMode","showEmptyIndicator","getTemplate","EditMode","Display","xml","id","onChange","BuildingBlockBase"],"sourceRoot":"internal","sources":["InternalField.ts"],"sourcesContent":["import type { EntitySet, Property } from \"@sap-ux/vocabularies-types\";\nimport type { SemanticObject } from \"@sap-ux/vocabularies-types/vocabularies/Common\";\nimport type { DataPointType } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport { UIAnnotationTypes } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport { blockAttribute, blockEvent, BuildingBlockBase, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockRuntime\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport { Entity } from \"sap/fe/core/converters/helpers/BindingHelper\";\nimport * as MetaModelConverter from \"sap/fe/core/converters/MetaModelConverter\";\nimport * as CollaborationFormatters from \"sap/fe/core/formatters/CollaborationFormatter\";\nimport valueFormatters from \"sap/fe/core/formatters/ValueFormatter\";\nimport type { BindingToolkitExpression, CompiledBindingToolkitExpression } from \"sap/fe/core/helpers/BindingToolkit\";\nimport {\n\tand,\n\tcompileExpression,\n\tconstant,\n\tformatResult,\n\tformatWithTypeInformation,\n\tgetExpressionFromAnnotation,\n\tifElse,\n\tnot,\n\tpathInModel\n} from \"sap/fe/core/helpers/BindingToolkit\";\nimport type { PropertiesOf, StrictPropertiesOf } from \"sap/fe/core/helpers/ClassSupport\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport TemplateModel from \"sap/fe/core/TemplateModel\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { getContextRelativeTargetObjectPath, getRelativePaths, getTargetObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { isSemanticKey } from \"sap/fe/core/templating/PropertyHelper\";\nimport type { DisplayMode } from \"sap/fe/core/templating/UIFormatters\";\nimport * as UIFormatters from \"sap/fe/core/templating/UIFormatters\";\nimport type { SemanticObjectCustomData } from \"sap/fe/macros/field/FieldTemplating\";\nimport * as FieldTemplating from \"sap/fe/macros/field/FieldTemplating\";\nimport SituationsIndicator from \"sap/fe/macros/situations/SituationsIndicator.fragment\";\nimport EditMode from \"sap/ui/mdc/enum/EditMode\";\nimport type Context from \"sap/ui/model/Context\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\n\ntype DisplayStyle =\n\t| \"Text\"\n\t| \"Avatar\"\n\t| \"File\"\n\t| \"DataPoint\"\n\t| \"Contact\"\n\t| \"Button\"\n\t| \"Link\"\n\t| \"ObjectStatus\"\n\t| \"AmountWithCurrency\"\n\t| \"SemanticKeyWithDraftIndicator\"\n\t| \"ObjectIdentifier\"\n\t| \"LabelSemanticKey\"\n\t| \"LinkWithQuickView\"\n\t| \"LinkWrapper\"\n\t| \"ExpandableText\";\n\ntype EditStyle =\n\t| \"InputWithValueHelp\"\n\t| \"TextArea\"\n\t| \"File\"\n\t| \"DatePicker\"\n\t| \"TimePicker\"\n\t| \"DateTimePicker\"\n\t| \"CheckBox\"\n\t| \"InputWithUnit\"\n\t| \"Input\"\n\t| \"RatingIndicator\";\n\ntype FieldFormatOptions = Partial<{\n\t/** expression for ObjectStatus visible property */\n\tcontainsErrorVisibility: string;\n\tdisplayMode: DisplayMode;\n\tfieldMode: string;\n\thasDraftIndicator: boolean;\n\tisAnalytics: boolean;\n\t/** If true then navigationavailable property will not be used for enablement of IBN button */\n\tignoreNavigationAvailable: boolean;\n\tisCurrencyAligned: boolean;\n\tmeasureDisplayMode: string;\n\t/** Enables the fallback feature for usage the text annotation from the value lists */\n\tretrieveTextFromValueList: boolean;\n\tsemantickeys: string[];\n\t/** Preferred control to visualize semantic key properties */\n\tsemanticKeyStyle: string;\n\t/** If set to 'true', SAP Fiori elements shows an empty indicator in display mode for the text and links */\n\tshowEmptyIndicator: boolean;\n\t/** If true then sets the given icon instead of text in Action/IBN Button */\n\tshowIconUrl: boolean;\n\t/** Describe how the alignment works between Table mode (Date and Numeric End alignment) and Form mode (numeric aligned End in edit and Begin in display) */\n\ttextAlignMode: string;\n\t/** Maximum number of lines for multiline texts in edit mode */\n\ttextLinesEdit: string;\n\t/** Maximum number of lines that multiline texts in edit mode can grow to */\n\ttextMaxLines: string;\n\tcompactSemanticKey: string;\n\tfieldGroupDraftIndicatorPropertyPath: string;\n\tfieldGroupName: string;\n\ttextMaxLength: number;\n\t/** Maximum number of characters from the beginning of the text field that are shown initially. */\n\ttextMaxCharactersDisplay: number;\n\t/** Defines how the full text will be displayed - InPlace or Popover */\n\ttextExpandBehaviorDisplay: string;\n\tdateFormatOptions?: UIFormatters.dateFormatOptions; // showTime here is used for text formatting only\n}>;\n\nexport type FieldProperties = StrictPropertiesOf<Field>;\n\n/**\n * Building block for creating a Field based on the metadata provided by OData V4.\n * <br>\n * Usually, a DataField annotation is expected\n *\n * Usage example:\n * <pre>\n * <internalMacro:Field\n *   idPrefix=\"SomePrefix\"\n *   contextPath=\"{entitySet>}\"\n *   metaPath=\"{dataField>}\"\n * />\n * </pre>\n *\n * @hideconstructor\n * @private\n * @experimental\n * @since 1.94.0\n */\n@defineBuildingBlock({\n\tname: \"Field\",\n\tnamespace: \"sap.fe.macros.internal\",\n\tdesigntime: \"sap/fe/macros/internal/Field.designtime\"\n})\nexport default class Field extends BuildingBlockBase {\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic dataSourcePath?: string;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic emptyIndicatorMode?: string;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic _flexId?: string;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic idPrefix?: string;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic _apiId?: string;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic noWrapperId?: string;\n\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tdefaultValue: \"FieldValueHelp\"\n\t})\n\tpublic vhIdPrefix!: string;\n\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tcomputed: true\n\t})\n\tpublic _vhFlexId!: string;\n\n\t/**\n\t * Metadata path to the entity set\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true,\n\t\t$kind: [\"EntitySet\", \"NavigationProperty\", \"EntityType\", \"Singleton\"]\n\t})\n\tpublic entitySet!: Context;\n\n\t/**\n\t * Metadata path to the entity set\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: false,\n\t\tcomputed: true,\n\t\t$kind: [\"EntityType\"]\n\t})\n\tpublic entityType!: Context;\n\n\t/**\n\t * Flag indicating whether action will navigate after execution\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\tdefaultValue: true\n\t})\n\tpublic navigateAfterAction!: boolean;\n\n\t/**\n\t * Metadata path to the dataField.\n\t * This property is usually a metadataContext pointing to a DataField having\n\t * $Type of DataField, DataFieldWithUrl, DataFieldForAnnotation, DataFieldForAction, DataFieldForIntentBasedNavigation, DataFieldWithNavigationPath, or DataPointType.\n\t * But it can also be a Property with $kind=\"Property\"\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true,\n\t\t$kind: [\"Property\"],\n\t\t$Type: [\n\t\t\t\"com.sap.vocabularies.UI.v1.DataField\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldWithUrl\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldForAnnotation\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldForAction\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldWithAction\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataPointType\"\n\t\t]\n\t})\n\tpublic dataField!: Context;\n\n\t/**\n\t * Context pointing to an array of the property's semantic objects\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: false,\n\t\tcomputed: true\n\t})\n\tpublic semanticObjects!: Context;\n\n\t/**\n\t * Edit Mode of the field.\n\t *\n\t * If the editMode is undefined then we compute it based on the metadata\n\t * Otherwise we use the value provided here.\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.mdc.enum.EditMode\"\n\t})\n\tpublic editMode?: EditMode | CompiledBindingToolkitExpression;\n\n\t/**\n\t * Wrap field\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tpublic wrap?: boolean;\n\n\t/**\n\t * CSS class for margin\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic class?: string;\n\n\t/**\n\t * Property added to associate the label with the Field\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic ariaLabelledBy?: string;\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.core.TextAlign\"\n\t})\n\tpublic textAlign?: string;\n\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tcomputed: true\n\t})\n\tpublic editableExpression!: string | CompiledBindingToolkitExpression;\n\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tcomputed: true\n\t})\n\tpublic enabledExpression!: string | CompiledBindingToolkitExpression;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\tcomputed: true\n\t})\n\tpublic collaborationEnabled!: boolean;\n\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tcomputed: true\n\t})\n\tpublic collaborationHasActivityExpression!: string | CompiledBindingToolkitExpression;\n\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tcomputed: true\n\t})\n\tpublic collaborationInitialsExpression!: string | CompiledBindingToolkitExpression;\n\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tcomputed: true\n\t})\n\tpublic collaborationColorExpression!: string | CompiledBindingToolkitExpression;\n\n\t/**\n\t * Option to add a semantic object to a field\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\trequired: false\n\t})\n\tpublic semanticObject?: string | SemanticObject;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\trequired: false\n\t})\n\tpublic hasSemanticObjectOnNavigation?: boolean;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic requiredExpression?: string;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tpublic visible?: boolean | CompiledBindingToolkitExpression;\n\n\t@blockAttribute({\n\t\ttype: \"object\",\n\t\tvalidate: function (formatOptionsInput: FieldFormatOptions) {\n\t\t\tif (formatOptionsInput.textAlignMode && ![\"Table\", \"Form\"].includes(formatOptionsInput.textAlignMode)) {\n\t\t\t\tthrow new Error(`Allowed value ${formatOptionsInput.textAlignMode} for textAlignMode does not match`);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tformatOptionsInput.displayMode &&\n\t\t\t\t![\"Value\", \"Description\", \"ValueDescription\", \"DescriptionValue\"].includes(formatOptionsInput.displayMode)\n\t\t\t) {\n\t\t\t\tthrow new Error(`Allowed value ${formatOptionsInput.displayMode} for displayMode does not match`);\n\t\t\t}\n\n\t\t\tif (formatOptionsInput.fieldMode && ![\"nowrapper\", \"\"].includes(formatOptionsInput.fieldMode)) {\n\t\t\t\tthrow new Error(`Allowed value ${formatOptionsInput.fieldMode} for fieldMode does not match`);\n\t\t\t}\n\n\t\t\tif (formatOptionsInput.measureDisplayMode && ![\"Hidden\", \"ReadOnly\"].includes(formatOptionsInput.measureDisplayMode)) {\n\t\t\t\tthrow new Error(`Allowed value ${formatOptionsInput.measureDisplayMode} for measureDisplayMode does not match`);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tformatOptionsInput.textExpandBehaviorDisplay &&\n\t\t\t\t![\"InPlace\", \"Popover\"].includes(formatOptionsInput.textExpandBehaviorDisplay)\n\t\t\t) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`Allowed value ${formatOptionsInput.textExpandBehaviorDisplay} for textExpandBehaviorDisplay does not match`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (formatOptionsInput.semanticKeyStyle && ![\"ObjectIdentifier\", \"Label\", \"\"].includes(formatOptionsInput.semanticKeyStyle)) {\n\t\t\t\tthrow new Error(`Allowed value ${formatOptionsInput.semanticKeyStyle} for semanticKeyStyle does not match`);\n\t\t\t}\n\n\t\t\t/*\n\t\t\tHistorical default values are currently disabled\n\t\t\tif (!formatOptionsInput.semanticKeyStyle) {\n\t\t\t\tformatOptionsInput.semanticKeyStyle = \"\";\n\t\t\t}\n\t\t\t*/\n\n\t\t\treturn formatOptionsInput;\n\t\t}\n\t})\n\tpublic formatOptions: FieldFormatOptions = {};\n\n\t/**\n\t * Event handler for change event\n\t */\n\t@blockEvent()\n\tonChange: string = \"\";\n\n\t// Computed properties\n\tdescriptionBindingExpression?: string;\n\n\tdisplayVisible?: string | boolean;\n\n\teditModeAsObject?: any;\n\n\teditStyle?: EditStyle | null;\n\n\thasQuickViewFacets?: boolean;\n\n\tnavigationAvailable?: boolean | string;\n\n\tshowTimezone?: boolean;\n\n\ttext?: string | BindingToolkitExpression<string> | CompiledBindingToolkitExpression;\n\n\tidentifierTitle?: string | BindingToolkitExpression<string> | CompiledBindingToolkitExpression;\n\n\tidentifierText?: string | BindingToolkitExpression<string> | CompiledBindingToolkitExpression;\n\n\ttextBindingExpression?: CompiledBindingToolkitExpression;\n\n\tunitBindingExpression?: string;\n\n\tunitEditable?: string;\n\n\tvalueBindingExpression?: CompiledBindingToolkitExpression;\n\n\tvalueAsStringBindingExpression?: CompiledBindingToolkitExpression;\n\n\tlinkUrl?: string | CompiledBindingToolkitExpression;\n\n\ticonUrl?: string | CompiledBindingToolkitExpression;\n\n\tdisplayStyle?: DisplayStyle | null;\n\n\thasSituationsIndicator?: boolean;\n\n\tavatarVisible?: CompiledBindingToolkitExpression;\n\n\tavatarSrc?: CompiledBindingToolkitExpression;\n\tfileSrc?: CompiledBindingToolkitExpression;\n\n\tstatic getOverrides(mControlConfiguration: any, sID: string) {\n\t\tconst oProps: { [index: string]: any } = {};\n\t\tif (mControlConfiguration) {\n\t\t\tconst oControlConfig = mControlConfiguration[sID];\n\t\t\tif (oControlConfig) {\n\t\t\t\tObject.keys(oControlConfig).forEach(function (sConfigKey) {\n\t\t\t\t\toProps[sConfigKey] = oControlConfig[sConfigKey];\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn oProps;\n\t}\n\n\tstatic getObjectIdentifierTitle(\n\t\tfieldFormatOptions: FieldFormatOptions,\n\t\toPropertyDataModelObjectPath: DataModelObjectPath\n\t): BindingToolkitExpression<string> | CompiledBindingToolkitExpression {\n\t\tlet propertyBindingExpression: BindingToolkitExpression<any> = pathInModel(\n\t\t\tgetContextRelativeTargetObjectPath(oPropertyDataModelObjectPath)\n\t\t);\n\t\tlet targetDisplayMode = fieldFormatOptions?.displayMode;\n\t\tconst oPropertyDefinition =\n\t\t\toPropertyDataModelObjectPath.targetObject.type === \"PropertyPath\"\n\t\t\t\t? (oPropertyDataModelObjectPath.targetObject.$target as Property)\n\t\t\t\t: (oPropertyDataModelObjectPath.targetObject as Property);\n\t\tpropertyBindingExpression = formatWithTypeInformation(oPropertyDefinition, propertyBindingExpression);\n\n\t\tconst commonText = oPropertyDefinition.annotations?.Common?.Text;\n\t\tif (commonText === undefined) {\n\t\t\t// there is no property for description\n\t\t\ttargetDisplayMode = \"Value\";\n\t\t}\n\t\tconst relativeLocation = getRelativePaths(oPropertyDataModelObjectPath);\n\n\t\tconst parametersForFormatter = [];\n\n\t\tparametersForFormatter.push(pathInModel(\"T_NEW_OBJECT\", \"sap.fe.i18n\"));\n\t\tparametersForFormatter.push(pathInModel(\"T_ANNOTATION_HELPER_DEFAULT_OBJECT_PAGE_HEADER_TITLE_NO_HEADER_INFO\", \"sap.fe.i18n\"));\n\n\t\tif (\n\t\t\t!!(oPropertyDataModelObjectPath.targetEntitySet as EntitySet)?.annotations?.Common?.DraftRoot ||\n\t\t\t!!(oPropertyDataModelObjectPath.targetEntitySet as EntitySet)?.annotations?.Common?.DraftNode\n\t\t) {\n\t\t\tparametersForFormatter.push(Entity.HasDraft);\n\t\t\tparametersForFormatter.push(Entity.IsActive);\n\t\t} else {\n\t\t\tparametersForFormatter.push(constant(null));\n\t\t\tparametersForFormatter.push(constant(null));\n\t\t}\n\n\t\tswitch (targetDisplayMode) {\n\t\t\tcase \"Value\":\n\t\t\t\tparametersForFormatter.push(propertyBindingExpression);\n\t\t\t\tparametersForFormatter.push(constant(null));\n\t\t\t\tbreak;\n\t\t\tcase \"Description\":\n\t\t\t\tparametersForFormatter.push(getExpressionFromAnnotation(commonText, relativeLocation) as BindingToolkitExpression<string>);\n\t\t\t\tparametersForFormatter.push(constant(null));\n\t\t\t\tbreak;\n\t\t\tcase \"ValueDescription\":\n\t\t\t\tparametersForFormatter.push(propertyBindingExpression);\n\t\t\t\tparametersForFormatter.push(getExpressionFromAnnotation(commonText, relativeLocation) as BindingToolkitExpression<string>);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tif (commonText?.annotations?.UI?.TextArrangement) {\n\t\t\t\t\tparametersForFormatter.push(\n\t\t\t\t\t\tgetExpressionFromAnnotation(commonText, relativeLocation) as BindingToolkitExpression<string>\n\t\t\t\t\t);\n\t\t\t\t\tparametersForFormatter.push(propertyBindingExpression);\n\t\t\t\t} else {\n\t\t\t\t\t// if DescriptionValue is set by default and not by TextArrangement\n\t\t\t\t\t// we show description in ObjectIdentifier Title and value in ObjectIdentifier Text\n\t\t\t\t\tparametersForFormatter.push(\n\t\t\t\t\t\tgetExpressionFromAnnotation(commonText, relativeLocation) as BindingToolkitExpression<string>\n\t\t\t\t\t);\n\t\t\t\t\t// if DescriptionValue is set by default and property has a semantic object\n\t\t\t\t\t// we show description and value in ObjectIdentifier Title\n\t\t\t\t\tif (oPropertyDataModelObjectPath.targetObject?.annotations?.Common?.SemanticObject) {\n\t\t\t\t\t\tparametersForFormatter.push(propertyBindingExpression);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparametersForFormatter.push(constant(null));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\treturn compileExpression(formatResult(parametersForFormatter as any, valueFormatters.formatOPTitle));\n\t}\n\n\tstatic getObjectIdentifierText(\n\t\tfieldFormatOptions: FieldFormatOptions,\n\t\toPropertyDataModelObjectPath: DataModelObjectPath\n\t): BindingToolkitExpression<string> | CompiledBindingToolkitExpression {\n\t\tlet propertyBindingExpression: BindingToolkitExpression<any> = pathInModel(\n\t\t\tgetContextRelativeTargetObjectPath(oPropertyDataModelObjectPath)\n\t\t);\n\t\tconst targetDisplayMode = fieldFormatOptions?.displayMode;\n\t\tconst oPropertyDefinition =\n\t\t\toPropertyDataModelObjectPath.targetObject.type === \"PropertyPath\"\n\t\t\t\t? (oPropertyDataModelObjectPath.targetObject.$target as Property)\n\t\t\t\t: (oPropertyDataModelObjectPath.targetObject as Property);\n\n\t\tconst commonText = oPropertyDefinition.annotations?.Common?.Text;\n\t\tif (commonText === undefined || commonText?.annotations?.UI?.TextArrangement) {\n\t\t\treturn undefined;\n\t\t}\n\t\tpropertyBindingExpression = formatWithTypeInformation(oPropertyDefinition, propertyBindingExpression);\n\n\t\tswitch (targetDisplayMode) {\n\t\t\tcase \"ValueDescription\":\n\t\t\t\tconst relativeLocation = getRelativePaths(oPropertyDataModelObjectPath);\n\t\t\t\treturn compileExpression(getExpressionFromAnnotation(commonText, relativeLocation) as BindingToolkitExpression<string>);\n\t\t\tcase \"DescriptionValue\":\n\t\t\t\treturn compileExpression(formatResult([propertyBindingExpression], valueFormatters.formatToKeepWhitespace));\n\t\t\tdefault:\n\t\t\t\treturn undefined;\n\t\t}\n\t}\n\n\tstatic setUpDataPointType(oDataField: any) {\n\t\t// data point annotations need not have $Type defined, so add it if missing\n\t\tif (oDataField?.term === \"com.sap.vocabularies.UI.v1.DataPoint\") {\n\t\t\toDataField.$Type = oDataField.$Type || UIAnnotationTypes.DataPointType;\n\t\t}\n\t}\n\n\tstatic setUpVisibleProperties(oFieldProps: FieldProperties, oPropertyDataModelObjectPath: DataModelObjectPath) {\n\t\t// we do this before enhancing the dataModelPath so that it still points at the DataField\n\t\toFieldProps.visible = FieldTemplating.getVisibleExpression(oPropertyDataModelObjectPath, oFieldProps.formatOptions);\n\t\toFieldProps.displayVisible = oFieldProps.formatOptions.fieldMode === \"nowrapper\" ? oFieldProps.visible : undefined;\n\t}\n\n\tstatic getContentId(sMacroId: string) {\n\t\treturn `${sMacroId}-content`;\n\t}\n\n\tstatic setUpSemanticObjects(oProps: FieldProperties, oDataModelPath: DataModelObjectPath): void {\n\t\tlet aSemObjExprToResolve: SemanticObjectCustomData[] = [];\n\t\taSemObjExprToResolve = FieldTemplating.getSemanticObjectExpressionToResolve(oDataModelPath?.targetObject?.annotations?.Common);\n\n\t\t/**\n\t\t * If the field building block has a binding expression in the custom semantic objects,\n\t\t * it is then used by the QuickView Form BB.\n\t\t * This is needed to resolve the link at runtime. The QuickViewDelegate.js then gets the resolved\n\t\t * binding expression from the custom data.\n\t\t * All other semanticObjects are processed in the QuickView building block.\n\t\t */\n\t\tif (!!oProps.semanticObject && typeof oProps.semanticObject === \"string\" && oProps.semanticObject[0] === \"{\") {\n\t\t\taSemObjExprToResolve.push({\n\t\t\t\tkey: oProps.semanticObject.substr(1, oProps.semanticObject.length - 2),\n\t\t\t\tvalue: oProps.semanticObject\n\t\t\t});\n\t\t}\n\t\toProps.semanticObjects = FieldTemplating.getSemanticObjects(aSemObjExprToResolve);\n\t\t// This sets up the semantic links found in the navigation property, if there is no semantic links define before.\n\t\tif (!oProps.semanticObject && oDataModelPath.navigationProperties.length > 0) {\n\t\t\toDataModelPath.navigationProperties.forEach(function (navProperty) {\n\t\t\t\tif (navProperty?.annotations?.Common?.SemanticObject) {\n\t\t\t\t\toProps.semanticObject = navProperty.annotations.Common.SemanticObject;\n\t\t\t\t\toProps.hasSemanticObjectOnNavigation = true;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic setUpEditableProperties(oProps: FieldProperties, oDataField: any, oDataModelPath: DataModelObjectPath, oMetaModel: any): void {\n\t\tconst oPropertyForFieldControl = oDataModelPath?.targetObject?.Value\n\t\t\t? oDataModelPath.targetObject.Value\n\t\t\t: oDataModelPath?.targetObject;\n\t\tif (oProps.editMode !== undefined && oProps.editMode !== null) {\n\t\t\t// Even if it provided as a string it's a valid part of a binding expression that can be later combined into something else.\n\t\t\toProps.editModeAsObject = oProps.editMode;\n\t\t} else {\n\t\t\tconst bMeasureReadOnly = oProps.formatOptions.measureDisplayMode\n\t\t\t\t? oProps.formatOptions.measureDisplayMode === \"ReadOnly\"\n\t\t\t\t: false;\n\n\t\t\toProps.editModeAsObject = UIFormatters.getEditMode(\n\t\t\t\toPropertyForFieldControl,\n\t\t\t\toDataModelPath,\n\t\t\t\tbMeasureReadOnly,\n\t\t\t\ttrue,\n\t\t\t\toDataField\n\t\t\t);\n\t\t\toProps.editMode = compileExpression(oProps.editModeAsObject);\n\t\t}\n\t\tconst editableExpression = UIFormatters.getEditableExpressionAsObject(oPropertyForFieldControl, oDataField, oDataModelPath);\n\t\tconst aRequiredPropertiesFromInsertRestrictions = CommonUtils.getRequiredPropertiesFromInsertRestrictions(\n\t\t\toProps.entitySet?.getPath().replaceAll(\"/$NavigationPropertyBinding/\", \"/\"),\n\t\t\toMetaModel\n\t\t);\n\t\tconst aRequiredPropertiesFromUpdateRestrictions = CommonUtils.getRequiredPropertiesFromUpdateRestrictions(\n\t\t\toProps.entitySet?.getPath().replaceAll(\"/$NavigationPropertyBinding/\", \"/\"),\n\t\t\toMetaModel\n\t\t);\n\t\tconst oRequiredProperties = {\n\t\t\trequiredPropertiesFromInsertRestrictions: aRequiredPropertiesFromInsertRestrictions,\n\t\t\trequiredPropertiesFromUpdateRestrictions: aRequiredPropertiesFromUpdateRestrictions\n\t\t};\n\t\tif (ModelHelper.isCollaborationDraftSupported(oMetaModel)) {\n\t\t\toProps.collaborationEnabled = true;\n\t\t\t// Expressions needed for Collaboration Visualization\n\t\t\tconst collaborationExpression = UIFormatters.getCollaborationExpression(\n\t\t\t\toDataModelPath,\n\t\t\t\tCollaborationFormatters.hasCollaborationActivity\n\t\t\t);\n\t\t\toProps.collaborationHasActivityExpression = compileExpression(collaborationExpression);\n\t\t\toProps.collaborationInitialsExpression = compileExpression(\n\t\t\t\tUIFormatters.getCollaborationExpression(oDataModelPath, CollaborationFormatters.getCollaborationActivityInitials)\n\t\t\t);\n\t\t\toProps.collaborationColorExpression = compileExpression(\n\t\t\t\tUIFormatters.getCollaborationExpression(oDataModelPath, CollaborationFormatters.getCollaborationActivityColor)\n\t\t\t);\n\t\t\toProps.editableExpression = compileExpression(and(editableExpression, not(collaborationExpression)));\n\n\t\t\toProps.editMode = compileExpression(ifElse(collaborationExpression, constant(\"ReadOnly\"), oProps.editModeAsObject));\n\t\t} else {\n\t\t\toProps.editableExpression = compileExpression(editableExpression);\n\t\t}\n\t\toProps.enabledExpression = UIFormatters.getEnabledExpression(\n\t\t\toPropertyForFieldControl,\n\t\t\toDataField,\n\t\t\tfalse,\n\t\t\toDataModelPath\n\t\t) as CompiledBindingToolkitExpression;\n\t\toProps.requiredExpression = UIFormatters.getRequiredExpression(\n\t\t\toPropertyForFieldControl,\n\t\t\toDataField,\n\t\t\tfalse,\n\t\t\tfalse,\n\t\t\toRequiredProperties,\n\t\t\toDataModelPath\n\t\t) as CompiledBindingToolkitExpression;\n\t}\n\n\tstatic setUpFormatOptions(oProps: FieldProperties, oDataModelPath: DataModelObjectPath, oControlConfiguration: any, mSettings: any) {\n\t\tconst oOverrideProps = Field.getOverrides(oControlConfiguration, oProps.dataField.getPath());\n\n\t\tif (!oProps.formatOptions.displayMode) {\n\t\t\toProps.formatOptions.displayMode = UIFormatters.getDisplayMode(oDataModelPath);\n\t\t}\n\t\toProps.formatOptions.textLinesEdit =\n\t\t\toOverrideProps.textLinesEdit ||\n\t\t\t(oOverrideProps.formatOptions && oOverrideProps.formatOptions.textLinesEdit) ||\n\t\t\toProps.formatOptions.textLinesEdit ||\n\t\t\t4;\n\t\toProps.formatOptions.textMaxLines =\n\t\t\toOverrideProps.textMaxLines ||\n\t\t\t(oOverrideProps.formatOptions && oOverrideProps.formatOptions.textMaxLines) ||\n\t\t\toProps.formatOptions.textMaxLines;\n\n\t\t// Retrieve text from value list as fallback feature for missing text annotation on the property\n\t\tif (mSettings.models.viewData?.getProperty(\"/retrieveTextFromValueList\")) {\n\t\t\toProps.formatOptions.retrieveTextFromValueList = FieldTemplating.isRetrieveTextFromValueListEnabled(\n\t\t\t\toDataModelPath.targetObject,\n\t\t\t\toProps.formatOptions\n\t\t\t);\n\t\t\tif (oProps.formatOptions.retrieveTextFromValueList) {\n\t\t\t\t// Consider TextArrangement at EntityType otherwise set default display format 'DescriptionValue'\n\t\t\t\tconst hasEntityTextArrangement = !!oDataModelPath?.targetEntityType?.annotations?.UI?.TextArrangement;\n\t\t\t\toProps.formatOptions.displayMode = hasEntityTextArrangement ? oProps.formatOptions.displayMode : \"DescriptionValue\";\n\t\t\t}\n\t\t}\n\t\tif (oProps.formatOptions.fieldMode === \"nowrapper\" && oProps.editMode === \"Display\") {\n\t\t\tif (oProps._flexId) {\n\t\t\t\toProps.noWrapperId = oProps._flexId;\n\t\t\t} else {\n\t\t\t\toProps.noWrapperId = oProps.idPrefix ? generate([oProps.idPrefix, \"Field-content\"]) : undefined;\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic setUpDisplayStyle(oProps: FieldProperties, oDataField: any, oDataModelPath: DataModelObjectPath): void {\n\t\tconst oProperty: Property = oDataModelPath.targetObject as Property;\n\t\tif (!oDataModelPath.targetObject) {\n\t\t\toProps.displayStyle = \"Text\";\n\t\t\treturn;\n\t\t}\n\t\tif (oProperty.type === \"Edm.Stream\") {\n\t\t\toProps.fileSrc = compileExpression(getExpressionFromAnnotation(oDataField.Value));\n\t\t\toProps.displayStyle = \"File\";\n\t\t\treturn;\n\t\t}\n\t\tif (oProperty.annotations?.UI?.IsImageURL) {\n\t\t\toProps.avatarVisible = FieldTemplating.getVisibleExpression(oDataModelPath);\n\t\t\toProps.avatarSrc = compileExpression(getExpressionFromAnnotation(oDataField.Value));\n\t\t\toProps.displayStyle = \"Avatar\";\n\t\t\treturn;\n\t\t}\n\t\tconst hasQuickViewFacets = oProperty ? FieldTemplating.isUsedInNavigationWithQuickViewFacets(oDataModelPath, oProperty) : false;\n\n\t\tswitch (oDataField.$Type) {\n\t\t\tcase UIAnnotationTypes.DataPointType:\n\t\t\t\toProps.displayStyle = \"DataPoint\";\n\t\t\t\treturn;\n\t\t\tcase UIAnnotationTypes.DataFieldForAnnotation:\n\t\t\t\tif (oDataField.Target?.$target?.$Type === UIAnnotationTypes.DataPointType) {\n\t\t\t\t\toProps.displayStyle = \"DataPoint\";\n\t\t\t\t\treturn;\n\t\t\t\t} else if (oDataField.Target?.$target?.$Type === \"com.sap.vocabularies.Communication.v1.ContactType\") {\n\t\t\t\t\toProps.displayStyle = \"Contact\";\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase UIAnnotationTypes.DataFieldForAction:\n\t\t\t\toProps.displayStyle = \"Button\";\n\t\t\t\treturn;\n\t\t\tcase UIAnnotationTypes.DataFieldForIntentBasedNavigation:\n\t\t\t\tField.setUpNavigationAvailable(oProps, oDataField);\n\t\t\t\toProps.displayStyle = \"Button\";\n\t\t\t\treturn;\n\t\t\tcase UIAnnotationTypes.DataFieldWithIntentBasedNavigation:\n\t\t\t\toProps.text = Field.getTextWithWhiteSpace(oProps.formatOptions, oDataModelPath);\n\t\t\t// falls through\n\t\t\tcase UIAnnotationTypes.DataFieldWithNavigationPath:\n\t\t\tcase UIAnnotationTypes.DataFieldWithAction:\n\t\t\t\toProps.displayStyle = \"Link\";\n\t\t\t\treturn;\n\t\t}\n\t\tif (isSemanticKey(oProperty, oDataModelPath) && oProps.formatOptions.semanticKeyStyle) {\n\t\t\toProps.hasQuickViewFacets = hasQuickViewFacets;\n\t\t\toProps.hasSituationsIndicator =\n\t\t\t\tSituationsIndicator.getSituationsNavigationProperty(oDataModelPath.targetEntityType) !== undefined;\n\t\t\tField.setUpObjectIdentifierTitleAndText(oProps, oDataModelPath);\n\t\t\tif ((oDataModelPath.targetEntitySet as EntitySet)?.annotations?.Common?.DraftRoot) {\n\t\t\t\toProps.displayStyle = \"SemanticKeyWithDraftIndicator\";\n\t\t\t\treturn;\n\t\t\t}\n\t\t\toProps.displayStyle = oProps.formatOptions.semanticKeyStyle === \"ObjectIdentifier\" ? \"ObjectIdentifier\" : \"LabelSemanticKey\";\n\t\t\treturn;\n\t\t}\n\t\tif (oDataField.Criticality) {\n\t\t\toProps.hasQuickViewFacets = hasQuickViewFacets;\n\t\t\toProps.displayStyle = \"ObjectStatus\";\n\t\t\treturn;\n\t\t}\n\t\tif (oProperty.annotations?.Measures?.ISOCurrency && String(oProps.formatOptions.isCurrencyAligned) === \"true\") {\n\t\t\tif (oProps.formatOptions.measureDisplayMode === \"Hidden\") {\n\t\t\t\toProps.displayStyle = \"Text\";\n\t\t\t\treturn;\n\t\t\t}\n\t\t\toProps.valueAsStringBindingExpression = FieldTemplating.getValueBinding(\n\t\t\t\toDataModelPath,\n\t\t\t\toProps.formatOptions,\n\t\t\t\ttrue,\n\t\t\t\ttrue,\n\t\t\t\tundefined,\n\t\t\t\ttrue\n\t\t\t);\n\t\t\toProps.unitBindingExpression = compileExpression(UIFormatters.getBindingForUnitOrCurrency(oDataModelPath));\n\t\t\toProps.displayStyle = \"AmountWithCurrency\";\n\t\t\treturn;\n\t\t}\n\t\tif (oProperty.annotations?.Communication?.IsEmailAddress || oProperty.annotations?.Communication?.IsPhoneNumber) {\n\t\t\toProps.text = Field.getTextWithWhiteSpace(oProps.formatOptions, oDataModelPath);\n\t\t\toProps.displayStyle = \"Link\";\n\t\t\treturn;\n\t\t}\n\t\tif (oProperty.annotations?.UI?.MultiLineText) {\n\t\t\toProps.displayStyle = \"ExpandableText\";\n\t\t\treturn;\n\t\t}\n\n\t\tif (hasQuickViewFacets) {\n\t\t\toProps.text = Field.getTextWithWhiteSpace(oProps.formatOptions, oDataModelPath);\n\t\t\toProps.hasQuickViewFacets = true;\n\t\t\toProps.displayStyle = \"LinkWithQuickView\";\n\t\t\treturn;\n\t\t}\n\n\t\tif (\n\t\t\toProps.semanticObject &&\n\t\t\t!(oProperty?.annotations?.Communication?.IsEmailAddress || oProperty?.annotations?.Communication?.IsPhoneNumber)\n\t\t) {\n\t\t\toProps.hasQuickViewFacets = hasQuickViewFacets;\n\t\t\toProps.text = Field.getTextWithWhiteSpace(oProps.formatOptions, oDataModelPath);\n\t\t\toProps.displayStyle = \"LinkWithQuickView\";\n\t\t\treturn;\n\t\t}\n\t\tif (FieldTemplating.hasSemanticObjectInNavigationOrProperty(oDataModelPath)) {\n\t\t\toProps.hasQuickViewFacets = hasQuickViewFacets;\n\t\t\toProps.displayStyle = \"LinkWrapper\";\n\t\t\treturn;\n\t\t}\n\t\tconst _oPropertyCommonAnnotations = oProperty.annotations?.Common;\n\t\tconst _oPropertyNavigationPropertyAnnotations = oDataModelPath?.navigationProperties[0]?.annotations?.Common;\n\t\tfor (const key in _oPropertyCommonAnnotations) {\n\t\t\tif (key.indexOf(\"SemanticObject\") === 0) {\n\t\t\t\toProps.hasQuickViewFacets = hasQuickViewFacets;\n\t\t\t\toProps.displayStyle = \"LinkWrapper\";\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tfor (const key in _oPropertyNavigationPropertyAnnotations) {\n\t\t\tif (key.indexOf(\"SemanticObject\") === 0) {\n\t\t\t\toProps.hasQuickViewFacets = hasQuickViewFacets;\n\t\t\t\toProps.displayStyle = \"LinkWrapper\";\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (oDataField.$Type === UIAnnotationTypes.DataFieldWithUrl) {\n\t\t\toProps.text = Field.getTextWithWhiteSpace(oProps.formatOptions, oDataModelPath);\n\t\t\toProps.displayStyle = \"Link\";\n\t\t\toProps.iconUrl = oDataField.IconUrl ? compileExpression(getExpressionFromAnnotation(oDataField.IconUrl)) : undefined;\n\t\t\toProps.linkUrl = compileExpression(getExpressionFromAnnotation(oDataField.Url));\n\t\t\treturn;\n\t\t}\n\t\toProps.displayStyle = \"Text\";\n\t}\n\n\tstatic setUpEditStyle(oProps: FieldProperties, oDataField: any, oDataModelPath: DataModelObjectPath): void {\n\t\tFieldTemplating.setEditStyleProperties(oProps, oDataField, oDataModelPath);\n\t}\n\n\tstatic setUpObjectIdentifierTitleAndText(_oProps: FieldProperties, oPropertyDataModelObjectPath: DataModelObjectPath) {\n\t\tif (_oProps.formatOptions?.semanticKeyStyle === \"ObjectIdentifier\") {\n\t\t\t_oProps.identifierTitle = Field.getObjectIdentifierTitle(_oProps.formatOptions, oPropertyDataModelObjectPath);\n\t\t\tif (!oPropertyDataModelObjectPath.targetObject?.annotations?.Common?.SemanticObject) {\n\t\t\t\t_oProps.identifierText = Field.getObjectIdentifierText(_oProps.formatOptions, oPropertyDataModelObjectPath);\n\t\t\t} else {\n\t\t\t\t_oProps.identifierText = undefined;\n\t\t\t}\n\t\t} else {\n\t\t\t_oProps.identifierTitle = undefined;\n\t\t\t_oProps.identifierText = undefined;\n\t\t}\n\t}\n\n\tstatic getTextWithWhiteSpace(formatOptions: FieldFormatOptions, oDataModelPath: DataModelObjectPath) {\n\t\tconst text = FieldTemplating.getTextBinding(oDataModelPath, formatOptions, true);\n\t\treturn (text as any)._type === \"PathInModel\" || typeof text === \"string\"\n\t\t\t? compileExpression(formatResult([text], \"WSR\"))\n\t\t\t: compileExpression(text);\n\t}\n\n\tstatic setUpNavigationAvailable(oProps: FieldProperties, oDataField: any): void {\n\t\toProps.navigationAvailable = true;\n\t\tif (\n\t\t\toDataField?.$Type === UIAnnotationTypes.DataFieldForIntentBasedNavigation &&\n\t\t\toDataField.NavigationAvailable !== undefined &&\n\t\t\tString(oProps.formatOptions.ignoreNavigationAvailable) !== \"true\"\n\t\t) {\n\t\t\toProps.navigationAvailable = compileExpression(getExpressionFromAnnotation(oDataField.NavigationAvailable));\n\t\t}\n\t}\n\n\tconstructor(props: PropertiesOf<Field>, controlConfiguration: any, settings: any) {\n\t\tsuper(props);\n\n\t\tconst oDataFieldConverted = MetaModelConverter.convertMetaModelContext(this.dataField);\n\t\tlet oDataModelPath = MetaModelConverter.getInvolvedDataModelObjects(this.dataField, this.entitySet);\n\t\tField.setUpDataPointType(oDataFieldConverted);\n\t\tField.setUpVisibleProperties(this, oDataModelPath);\n\n\t\tif (this._flexId) {\n\t\t\tthis._apiId = this._flexId;\n\t\t\tthis._flexId = Field.getContentId(this._flexId);\n\t\t\tthis._vhFlexId = `${this._flexId}_${this.vhIdPrefix}`;\n\t\t}\n\t\tconst valueDataModelPath = FieldTemplating.getDataModelObjectPathForValue(oDataModelPath);\n\t\toDataModelPath = valueDataModelPath || oDataModelPath;\n\t\tField.setUpSemanticObjects(this, oDataModelPath);\n\t\tthis.dataSourcePath = getTargetObjectPath(oDataModelPath);\n\t\tconst oMetaModel = settings.models.metaModel || settings.models.entitySet;\n\t\tthis.entityType = oMetaModel.createBindingContext(`/${oDataModelPath.targetEntityType.fullyQualifiedName}`);\n\n\t\tField.setUpEditableProperties(this, oDataFieldConverted, oDataModelPath, oMetaModel);\n\t\tField.setUpFormatOptions(this, oDataModelPath, controlConfiguration, settings);\n\t\tField.setUpDisplayStyle(this, oDataFieldConverted, oDataModelPath);\n\t\tField.setUpEditStyle(this, oDataFieldConverted, oDataModelPath);\n\n\t\t// ---------------------------------------- compute bindings----------------------------------------------------\n\t\tconst aDisplayStylesWithoutPropText = [\"Avatar\", \"AmountWithCurrency\"];\n\t\tif (this.displayStyle && aDisplayStylesWithoutPropText.indexOf(this.displayStyle) === -1 && oDataModelPath.targetObject) {\n\t\t\tthis.text = this.text ?? FieldTemplating.getTextBinding(oDataModelPath, this.formatOptions);\n\t\t\tField.setUpObjectIdentifierTitleAndText(this, oDataModelPath);\n\t\t} else {\n\t\t\tthis.text = \"\";\n\t\t}\n\n\t\t//TODO this is fixed twice\n\t\t// data point annotations need not have $Type defined, so add it if missing\n\t\tif ((this.dataField.getObject(\"@sapui.name\") as unknown as string)?.indexOf(\"com.sap.vocabularies.UI.v1.DataPoint\") > -1) {\n\t\t\tconst oDataPoint = this.dataField.getObject() as DataPointType;\n\t\t\toDataPoint.$Type = oDataPoint.$Type || UIAnnotationTypes.DataPointType;\n\t\t\tthis.dataField = new TemplateModel(oDataPoint, this.dataField.getModel() as ODataMetaModel).createBindingContext(\"/\");\n\t\t}\n\n\t\tthis.emptyIndicatorMode = this.formatOptions.showEmptyIndicator ? \"On\" : undefined;\n\t}\n\n\t/**\n\t * The building block template function.\n\t *\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetTemplate() {\n\t\tif (this.formatOptions.fieldMode === \"nowrapper\" && this.editMode === EditMode.Display) {\n\t\t\treturn xml`<core:Fragment fragmentName=\"sap.fe.macros.internal.field.FieldContent\" type=\"XML\" />`;\n\t\t} else {\n\t\t\tlet id;\n\t\t\tif (this._apiId) {\n\t\t\t\tid = this._apiId;\n\t\t\t} else if (this.idPrefix) {\n\t\t\t\tid = generate([this.idPrefix, \"Field\"]);\n\t\t\t} else {\n\t\t\t\tid = undefined;\n\t\t\t}\n\n\t\t\tif (this.onChange !== null && this.onChange !== \"null\") {\n\t\t\t\treturn xml`\n\t\t\t\t\t<macroField:FieldAPI\n\t\t\t\t\t\txmlns:macroField=\"sap.fe.macros.field\"\n\t\t\t\t\t\tchange=\"${this.onChange}\"\n\t\t\t\t\t\tid=\"${id}\"\n\t\t\t\t\t\trequired=\"${this.requiredExpression}\"\n\t\t\t\t\t\teditable=\"${this.editableExpression}\"\n\t\t\t\t\t\tcollaborationEnabled=\"${this.collaborationEnabled}\"\n\t\t\t\t\t\tvisible=\"${this.visible}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<core:Fragment fragmentName=\"sap.fe.macros.internal.field.FieldContent\" type=\"XML\" />\n\t\t\t\t\t</macroField:FieldAPI>\n\t\t\t\t`;\n\t\t\t} else {\n\t\t\t\treturn xml`<macroField:FieldAPI\n\t\t\t\t\t\txmlns:macroField=\"sap.fe.macros.field\"\n\t\t\t\t\t\tid=\"${id}\"\n\t\t\t\t\t\trequired=\"${this.requiredExpression}\"\n\t\t\t\t\t\teditable=\"${this.editableExpression}\"\n\t\t\t\t\t\tcollaborationEnabled=\"${this.collaborationEnabled}\"\n\t\t\t\t\t\tvisible=\"${this.visible}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<core:Fragment fragmentName=\"sap.fe.macros.internal.field.FieldContent\" type=\"XML\" />\n\t\t\t\t\t</macroField:FieldAPI>\n\t\t\t\t\t`;\n\t\t\t}\n\t\t}\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":15253,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlock","BuildingBlockRuntime","CommonUtils","BindingHelper","MetaModelConverter","CollaborationFormatters","valueFormatters","BindingToolkit","ModelHelper","StableIdHelper","TemplateModel","DataModelPathHelper","PropertyHelper","UIFormatters","FieldTemplating","SituationsIndicator","EditMode","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_dec18","_dec19","_dec20","_dec21","_dec22","_dec23","_dec24","_dec25","_dec26","_dec27","_dec28","_dec29","_dec30","_dec31","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_descriptor15","_descriptor16","_descriptor17","_descriptor18","_descriptor19","_descriptor20","_descriptor21","_descriptor22","_descriptor23","_descriptor24","_descriptor25","_descriptor26","_descriptor27","_descriptor28","_descriptor29","_descriptor30","_exports","isSemanticKey","getTargetObjectPath","getRelativePaths","getContextRelativeTargetObjectPath","generate","pathInModel","not","ifElse","getExpressionFromAnnotation","formatWithTypeInformation","formatResult","constant","compileExpression","and","Entity","xml","defineBuildingBlock","BuildingBlockBase","blockEvent","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","Field","name","namespace","designtime","type","defaultValue","computed","required","$kind","$Type","validate","formatOptionsInput","textAlignMode","includes","displayMode","fieldMode","measureDisplayMode","textExpandBehaviorDisplay","semanticKeyStyle","_BuildingBlockBase","getOverrides","mControlConfiguration","sID","oProps","oControlConfig","sConfigKey","getObjectIdentifierTitle","fieldFormatOptions","oPropertyDataModelObjectPath","_oPropertyDefinition$","_oPropertyDefinition$2","_oPropertyDataModelOb","_oPropertyDataModelOb2","_oPropertyDataModelOb3","_oPropertyDataModelOb4","_oPropertyDataModelOb5","_oPropertyDataModelOb6","_commonText$annotatio","_commonText$annotatio2","propertyBindingExpression","targetDisplayMode","oPropertyDefinition","targetObject","$target","commonText","annotations","Common","Text","relativeLocation","parametersForFormatter","push","targetEntitySet","DraftRoot","DraftNode","HasDraft","IsActive","UI","TextArrangement","_oPropertyDataModelOb7","_oPropertyDataModelOb8","_oPropertyDataModelOb9","SemanticObject","formatOPTitle","getObjectIdentifierText","_oPropertyDefinition$3","_oPropertyDefinition$4","_commonText$annotatio3","_commonText$annotatio4","formatToKeepWhitespace","setUpDataPointType","oDataField","term","setUpVisibleProperties","oFieldProps","visible","getVisibleExpression","formatOptions","displayVisible","getContentId","sMacroId","setUpSemanticObjects","oDataModelPath","_oDataModelPath$targe","_oDataModelPath$targe2","aSemObjExprToResolve","getSemanticObjectExpressionToResolve","semanticObject","substr","length","semanticObjects","getSemanticObjects","navigationProperties","navProperty","_navProperty$annotati","_navProperty$annotati2","hasSemanticObjectOnNavigation","setUpEditableProperties","oMetaModel","_oDataModelPath$targe3","_oProps$entitySet","_oProps$entitySet2","oPropertyForFieldControl","Value","editMode","editModeAsObject","bMeasureReadOnly","getEditMode","editableExpression","getEditableExpressionAsObject","aRequiredPropertiesFromInsertRestrictions","getRequiredPropertiesFromInsertRestrictions","entitySet","getPath","replaceAll","aRequiredPropertiesFromUpdateRestrictions","getRequiredPropertiesFromUpdateRestrictions","oRequiredProperties","requiredPropertiesFromInsertRestrictions","requiredPropertiesFromUpdateRestrictions","isCollaborationDraftSupported","collaborationEnabled","collaborationExpression","getCollaborationExpression","hasCollaborationActivity","collaborationHasActivityExpression","collaborationInitialsExpression","getCollaborationActivityInitials","collaborationColorExpression","getCollaborationActivityColor","enabledExpression","getEnabledExpression","requiredExpression","getRequiredExpression","setUpFormatOptions","oControlConfiguration","mSettings","_mSettings$models$vie","oOverrideProps","dataField","getDisplayMode","textLinesEdit","textMaxLines","models","viewData","getProperty","retrieveTextFromValueList","isRetrieveTextFromValueListEnabled","_oDataModelPath$targe4","_oDataModelPath$targe5","_oDataModelPath$targe6","hasEntityTextArrangement","targetEntityType","_flexId","noWrapperId","idPrefix","setUpDisplayStyle","_oProperty$annotation","_oProperty$annotation2","_oDataField$Target","_oDataField$Target$$t","_oDataField$Target2","_oDataField$Target2$$","_oProperty$annotation3","_oProperty$annotation4","_oProperty$annotation5","_oProperty$annotation6","_oProperty$annotation7","_oProperty$annotation8","_oProperty$annotation9","_oProperty$annotation10","_oProperty$annotation11","_oProperty$annotation12","_oProperty$annotation13","_oProperty$annotation14","_oProperty$annotation15","_oDataModelPath$navig","_oDataModelPath$navig2","oProperty","displayStyle","fileSrc","IsImageURL","avatarVisible","avatarSrc","hasQuickViewFacets","isUsedInNavigationWithQuickViewFacets","Target","setUpNavigationAvailable","text","getTextWithWhiteSpace","_oDataModelPath$targe7","_oDataModelPath$targe8","_oDataModelPath$targe9","hasSituationsIndicator","getSituationsNavigationProperty","setUpObjectIdentifierTitleAndText","Criticality","Measures","ISOCurrency","String","isCurrencyAligned","valueAsStringBindingExpression","getValueBinding","unitBindingExpression","getBindingForUnitOrCurrency","Communication","IsEmailAddress","IsPhoneNumber","MultiLineText","hasSemanticObjectInNavigationOrProperty","_oPropertyCommonAnnotations","_oPropertyNavigationPropertyAnnotations","indexOf","iconUrl","IconUrl","linkUrl","Url","setUpEditStyle","setEditStyleProperties","_oProps","_oProps$formatOptions","_oPropertyDataModelOb10","_oPropertyDataModelOb11","_oPropertyDataModelOb12","identifierTitle","identifierText","getTextBinding","_type","navigationAvailable","NavigationAvailable","ignoreNavigationAvailable","props","controlConfiguration","settings","_this$dataField$getOb","_this","this","oDataFieldConverted","convertMetaModelContext","getInvolvedDataModelObjects","_apiId","_vhFlexId","vhIdPrefix","valueDataModelPath","getDataModelObjectPathForValue","dataSourcePath","metaModel","entityType","createBindingContext","fullyQualifiedName","aDisplayStylesWithoutPropText","getObject","oDataPoint","getModel","emptyIndicatorMode","showEmptyIndicator","_proto","getTemplate","Display","id","onChange"],"sources":["InternalField-dbg.js"],"mappings":"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","sourceRoot":"internal"}},{"offset":{"line":15280,"column":0},"map":{"version":3,"names":["getRelatedFieldFromValueHelp","oValueHelp","oView","CommonUtils","getTargetView","findElements","oElem","getFieldHelp","getDomRef","getId","onValueHelpOpenDialog","oEvent","getSource","oField","collaborationHelper","bCollaborationEnabled","CollaborationActivitySync","isConnected","getBinding","sFullPath","isA","getBindingContext","getPath","getBindings","send","Activity","LiveChange","onValueHelpCloseDialog","isCompositeBinding","oValueBeforeUpdate","getValue","Promise","resolve","setTimeout","value","getConditions","values","Undo"],"sourceRoot":"internal","sources":["collaborationHelper.ts"],"sourcesContent":["import CommonUtils from \"sap/fe/core/CommonUtils\";\nimport CollaborationActivitySync from \"sap/fe/core/controllerextensions/collaboration/ActivitySync\";\nimport { Activity } from \"sap/fe/core/controllerextensions/collaboration/CollaborationCommon\";\nimport Event from \"sap/ui/base/Event\";\nimport Control from \"sap/ui/core/Control\";\nimport Field from \"sap/ui/mdc/Field\";\nimport ValueHelp from \"sap/ui/mdc/ValueHelp\";\n\nfunction getRelatedFieldFromValueHelp(oValueHelp: any): Field {\n\tconst oView = CommonUtils.getTargetView(oValueHelp);\n\treturn oView.findElements(true, function (oElem: Control) {\n\t\treturn !!((oElem as Field).getFieldHelp && oElem.getDomRef() && (oElem as Field).getFieldHelp() === oValueHelp.getId());\n\t})[0] as Field;\n}\n\nfunction onValueHelpOpenDialog(oEvent: any) {\n\tconst oValueHelp = oEvent.getSource();\n\tconst oField = collaborationHelper.getRelatedFieldFromValueHelp(oValueHelp);\n\tconst bCollaborationEnabled = CollaborationActivitySync.isConnected(oField);\n\tif (bCollaborationEnabled && oField.getBinding(\"value\")) {\n\t\tconst sFullPath = oField.getBinding(\"value\")?.isA(\"sap.ui.model.CompositeBinding\")\n\t\t\t? // for the compositeBinding, we just send a message containing the path of the first element\n\t\t\t  // it is enough to lock the entire field\n\t\t\t  `${oField.getBindingContext()?.getPath()}/${(oField.getBinding(\"value\") as any)?.getBindings()[0].getPath()}`\n\t\t\t: `${oField.getBindingContext()?.getPath()}/${oField.getBinding(\"value\")?.getPath()}`;\n\t\tCollaborationActivitySync.send(oField, Activity.LiveChange, sFullPath);\n\t}\n}\n\nfunction onValueHelpCloseDialog(oEvent: Event): Promise<void> {\n\tconst oValueHelp = oEvent.getSource() as ValueHelp;\n\tconst oField = collaborationHelper.getRelatedFieldFromValueHelp(oValueHelp);\n\tconst bCollaborationEnabled = CollaborationActivitySync.isConnected(oField);\n\tconst isCompositeBinding = oField.getBinding(\"value\")?.isA(\"sap.ui.model.CompositeBinding\");\n\tconst oValueBeforeUpdate = isCompositeBinding ? oField.getValue()[1] : oField.getValue();\n\n\treturn new Promise((resolve) => {\n\t\tsetTimeout(function () {\n\t\t\tconst value = isCompositeBinding\n\t\t\t\t? (oValueHelp.getConditions()[0] as any).values[0]\n\t\t\t\t: (oField.getBinding(\"value\") as any)?.getValue();\n\t\t\tif (bCollaborationEnabled && oValueBeforeUpdate === value) {\n\t\t\t\tconst sFullPath = isCompositeBinding\n\t\t\t\t\t? `${oField.getBindingContext()?.getPath()}/${(oField.getBinding(\"value\") as any).getBindings()[0].getPath()}`\n\t\t\t\t\t: `${oField.getBindingContext()?.getPath()}/${oField.getBinding(\"value\")?.getPath()}`;\n\n\t\t\t\tCollaborationActivitySync.send(oField, Activity.Undo, sFullPath);\n\t\t\t}\n\t\t\tresolve();\n\t\t}, 0);\n\t});\n}\n\nconst collaborationHelper = {\n\tgetRelatedFieldFromValueHelp,\n\tonValueHelpOpenDialog,\n\tonValueHelpCloseDialog\n};\n\nexport default collaborationHelper;\n"],"mappings":"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"}},{"offset":{"line":15334,"column":0},"map":{"version":3,"names":["sap","ui","define","CommonUtils","CollaborationActivitySync","CollaborationCommon","Activity","getRelatedFieldFromValueHelp","oValueHelp","oView","getTargetView","findElements","oElem","getFieldHelp","getDomRef","getId","onValueHelpOpenDialog","oEvent","getSource","oField","collaborationHelper","bCollaborationEnabled","isConnected","getBinding","_oField$getBinding","_oField$getBindingCon","_oField$getBinding2","_oField$getBindingCon2","_oField$getBinding3","sFullPath","isA","getBindingContext","getPath","getBindings","send","LiveChange","onValueHelpCloseDialog","_oField$getBinding4","isCompositeBinding","oValueBeforeUpdate","getValue","Promise","resolve","setTimeout","_oField$getBinding5","value","getConditions","values","_oField$getBindingCon3","_oField$getBindingCon4","_oField$getBinding6","Undo"],"sources":["collaborationHelper-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,wDAAO,CAAC,0BAA2B,8DAA+D,sEAAuE,SAAUC,EAAaC,EAA2BC,GAChO,aAEA,IAAIC,EAAWD,EAAoBC,SACnC,SAASC,EAA6BC,GACpC,MAAMC,EAAQN,EAAYO,cAAcF,GACxC,OAAOC,EAAME,aAAa,KAAM,SAAUC,GACxC,SAAUA,EAAMC,cAAgBD,EAAME,aAAeF,EAAMC,iBAAmBL,EAAWO,QAC3F,GAAG,EACL,CACA,SAASC,EAAsBC,GAC7B,MAAMT,EAAaS,EAAOC,YAC1B,MAAMC,EAASC,EAAoBb,6BAA6BC,GAChE,MAAMa,EAAwBjB,EAA0BkB,YAAYH,GACpE,GAAIE,GAAyBF,EAAOI,WAAW,SAAU,CACvD,IAAIC,EAAoBC,EAAuBC,EAAqBC,EAAwBC,EAC5F,MAAMC,GAAaL,EAAqBL,EAAOI,WAAW,YAAc,MAAQC,SAA4B,GAAKA,EAAmBM,IAAI,iCAGxI,IAAIL,EAAwBN,EAAOY,uBAAyB,MAAQN,SAA+B,OAAS,EAAIA,EAAsBO,cAAcN,EAAsBP,EAAOI,WAAW,YAAc,MAAQG,SAA6B,OAAS,EAAIA,EAAoBO,cAAc,GAAGD,YAAc,IAAIL,EAAyBR,EAAOY,uBAAyB,MAAQJ,SAAgC,OAAS,EAAIA,EAAuBK,cAAcJ,EAAsBT,EAAOI,WAAW,YAAc,MAAQK,SAA6B,OAAS,EAAIA,EAAoBI,YAClkB5B,EAA0B8B,KAAKf,EAAQb,EAAS6B,WAAYN,EAC9D,CACF,CACA,SAASO,EAAuBnB,GAC9B,IAAIoB,EACJ,MAAM7B,EAAaS,EAAOC,YAC1B,MAAMC,EAASC,EAAoBb,6BAA6BC,GAChE,MAAMa,EAAwBjB,EAA0BkB,YAAYH,GACpE,MAAMmB,GAAsBD,EAAsBlB,EAAOI,WAAW,YAAc,MAAQc,SAA6B,OAAS,EAAIA,EAAoBP,IAAI,iCAC5J,MAAMS,EAAqBD,EAAqBnB,EAAOqB,WAAW,GAAKrB,EAAOqB,WAC9E,OAAO,IAAIC,QAAQC,IACjBC,WAAW,WACT,IAAIC,EACJ,MAAMC,EAAQP,EAAqB9B,EAAWsC,gBAAgB,GAAGC,OAAO,IAAMH,EAAsBzB,EAAOI,WAAW,YAAc,MAAQqB,SAA6B,OAAS,EAAIA,EAAoBJ,WAC1M,GAAInB,GAAyBkB,IAAuBM,EAAO,CACzD,IAAIG,EAAwBC,EAAwBC,EACpD,MAAMrB,EAAYS,EAAqB,IAAIU,EAAyB7B,EAAOY,uBAAyB,MAAQiB,SAAgC,OAAS,EAAIA,EAAuBhB,aAAab,EAAOI,WAAW,SAASU,cAAc,GAAGD,YAAc,IAAIiB,EAAyB9B,EAAOY,uBAAyB,MAAQkB,SAAgC,OAAS,EAAIA,EAAuBjB,cAAckB,EAAsB/B,EAAOI,WAAW,YAAc,MAAQ2B,SAA6B,OAAS,EAAIA,EAAoBlB,YAC1gB5B,EAA0B8B,KAAKf,EAAQb,EAAS6C,KAAMtB,EACxD,CACAa,GACF,EAAG,EAAE,EAET,CACA,MAAMtB,EAAsB,CAC1Bb,+BACAS,wBACAoB,0BAEF,OAAOhB,CACT,EAAG","sourceRoot":"internal"}},{"offset":{"line":15339,"column":0},"map":{"version":3,"names":["connectedFieldsTemplateRegex","connectedFieldsTemplateSubRegex","getLabelForConnectedFields","oConnectedFieldsPath","compileBindingExpression","oConnectedFields","targetObject","aTemplateMatches","Template","toString","match","aPartsToConcat","reduce","aSubPartsToConcat","oMatch","aSubMatch","length","targetValue","Data","oDataFieldPath","enhanceDataModelPath","fullyQualifiedName","replace","targetEntityType","Value","push","getTextBindingExpression","constant","compileExpression","concat"],"sourceRoot":"internal/form","sources":["FormTemplating.ts"],"sourcesContent":["import type { ConnectedFieldsTypeTypes } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport type { BindingToolkitExpression } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { compileExpression, concat, constant } from \"sap/fe/core/helpers/BindingToolkit\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { enhanceDataModelPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { getTextBindingExpression } from \"sap/fe/macros/field/FieldTemplating\";\n\nconst connectedFieldsTemplateRegex = /(?:({[^}]+})[^{]*)/g;\nconst connectedFieldsTemplateSubRegex = /{([^}]+)}(.*)/;\nexport const getLabelForConnectedFields = function (oConnectedFieldsPath: DataModelObjectPath, compileBindingExpression: boolean = true) {\n\tconst oConnectedFields: ConnectedFieldsTypeTypes = oConnectedFieldsPath.targetObject;\n\t// First we separate each group of `{TemplatePart} xxx`\n\tconst aTemplateMatches = oConnectedFields.Template.toString().match(connectedFieldsTemplateRegex);\n\tif (aTemplateMatches) {\n\t\tconst aPartsToConcat = aTemplateMatches.reduce((aSubPartsToConcat: BindingToolkitExpression<string>[], oMatch) => {\n\t\t\t// Then for each sub-group, we retrieve the name of the data object and the remaining text, if it exists\n\t\t\tconst aSubMatch = oMatch.match(connectedFieldsTemplateSubRegex);\n\t\t\tif (aSubMatch && aSubMatch.length > 1) {\n\t\t\t\tconst targetValue = aSubMatch[1];\n\t\t\t\tif ((oConnectedFields.Data as any)[targetValue]) {\n\t\t\t\t\tconst oDataFieldPath = enhanceDataModelPath(\n\t\t\t\t\t\toConnectedFieldsPath,\n\t\t\t\t\t\t// TODO Better type for the Edm.Dictionary\n\t\t\t\t\t\t(oConnectedFields.Data as any)[targetValue].fullyQualifiedName.replace(\n\t\t\t\t\t\t\toConnectedFieldsPath.targetEntityType.fullyQualifiedName,\n\t\t\t\t\t\t\t\"\"\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t\toDataFieldPath.targetObject = oDataFieldPath.targetObject.Value;\n\t\t\t\t\taSubPartsToConcat.push(getTextBindingExpression(oDataFieldPath, {}));\n\t\t\t\t\tif (aSubMatch.length > 2) {\n\t\t\t\t\t\taSubPartsToConcat.push(constant(aSubMatch[2]));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn aSubPartsToConcat;\n\t\t}, []);\n\t\treturn compileBindingExpression ? compileExpression(concat(...aPartsToConcat)) : concat(...aPartsToConcat);\n\t}\n\n\treturn \"\";\n};\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;EAOA,MAAMA,4BAA4B,GAAG,qBAAqB;EAC1D,MAAMC,+BAA+B,GAAG,eAAe;EAChD,MAAMC,0BAA0B,GAAG,UAAUC,oBAAyC,EAA4C;IAAA,IAA1CC,wBAAiC,uEAAG,IAAI;IACtI,MAAMC,gBAA0C,GAAGF,oBAAoB,CAACG,YAAY;IACpF;IACA,MAAMC,gBAAgB,GAAGF,gBAAgB,CAACG,QAAQ,CAACC,QAAQ,EAAE,CAACC,KAAK,CAACV,4BAA4B,CAAC;IACjG,IAAIO,gBAAgB,EAAE;MACrB,MAAMI,cAAc,GAAGJ,gBAAgB,CAACK,MAAM,CAAC,CAACC,iBAAqD,EAAEC,MAAM,KAAK;QACjH;QACA,MAAMC,SAAS,GAAGD,MAAM,CAACJ,KAAK,CAACT,+BAA+B,CAAC;QAC/D,IAAIc,SAAS,IAAIA,SAAS,CAACC,MAAM,GAAG,CAAC,EAAE;UACtC,MAAMC,WAAW,GAAGF,SAAS,CAAC,CAAC,CAAC;UAChC,IAAKV,gBAAgB,CAACa,IAAI,CAASD,WAAW,CAAC,EAAE;YAChD,MAAME,cAAc,GAAGC,oBAAoB,CAC1CjB,oBAAoB;YACpB;YACCE,gBAAgB,CAACa,IAAI,CAASD,WAAW,CAAC,CAACI,kBAAkB,CAACC,OAAO,CACrEnB,oBAAoB,CAACoB,gBAAgB,CAACF,kBAAkB,EACxD,EAAE,CACF,CACD;YACDF,cAAc,CAACb,YAAY,GAAGa,cAAc,CAACb,YAAY,CAACkB,KAAK;YAC/DX,iBAAiB,CAACY,IAAI,CAACC,wBAAwB,CAACP,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC;YACpE,IAAIJ,SAAS,CAACC,MAAM,GAAG,CAAC,EAAE;cACzBH,iBAAiB,CAACY,IAAI,CAACE,QAAQ,CAACZ,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/C;UACD;QACD;QACA,OAAOF,iBAAiB;MACzB,CAAC,EAAE,EAAE,CAAC;MACN,OAAOT,wBAAwB,GAAGwB,iBAAiB,CAACC,MAAM,CAAC,GAAGlB,cAAc,CAAC,CAAC,GAAGkB,MAAM,CAAC,GAAGlB,cAAc,CAAC;IAC3G;IAEA,OAAO,EAAE;EACV,CAAC;EAAC;EAAA;AAAA"}},{"offset":{"line":15385,"column":0},"map":{"version":3,"names":["sap","ui","define","BindingToolkit","DataModelPathHelper","FieldTemplating","_exports","getTextBindingExpression","enhanceDataModelPath","constant","concat","compileExpression","connectedFieldsTemplateRegex","connectedFieldsTemplateSubRegex","getLabelForConnectedFields","oConnectedFieldsPath","compileBindingExpression","arguments","length","undefined","oConnectedFields","targetObject","aTemplateMatches","Template","toString","match","aPartsToConcat","reduce","aSubPartsToConcat","oMatch","aSubMatch","targetValue","Data","oDataFieldPath","fullyQualifiedName","replace","targetEntityType","Value","push"],"sources":["FormTemplating-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,wDAAO,CAAC,qCAAsC,6CAA8C,uCAAwC,SAAUC,EAAgBC,EAAqBC,GACxL,aAEA,IAAIC,EAAW,CAAC,EAChB,IAAIC,EAA2BF,EAAgBE,yBAC/C,IAAIC,EAAuBJ,EAAoBI,qBAC/C,IAAIC,EAAWN,EAAeM,SAC9B,IAAIC,EAASP,EAAeO,OAC5B,IAAIC,EAAoBR,EAAeQ,kBACvC,MAAMC,EAA+B,sBACrC,MAAMC,EAAkC,gBACxC,MAAMC,EAA6B,SAAUC,GAC3C,IAAIC,EAA2BC,UAAUC,OAAS,GAAKD,UAAU,KAAOE,UAAYF,UAAU,GAAK,KACnG,MAAMG,EAAmBL,EAAqBM,aAE9C,MAAMC,EAAmBF,EAAiBG,SAASC,WAAWC,MAAMb,GACpE,GAAIU,EAAkB,CACpB,MAAMI,EAAiBJ,EAAiBK,OAAO,CAACC,EAAmBC,KAEjE,MAAMC,EAAYD,EAAOJ,MAAMZ,GAC/B,GAAIiB,GAAaA,EAAUZ,OAAS,EAAG,CACrC,MAAMa,EAAcD,EAAU,GAC9B,GAAIV,EAAiBY,KAAKD,GAAc,CACtC,MAAME,EAAiBzB,EAAqBO,EAE5CK,EAAiBY,KAAKD,GAAaG,mBAAmBC,QAAQpB,EAAqBqB,iBAAiBF,mBAAoB,KACxHD,EAAeZ,aAAeY,EAAeZ,aAAagB,MAC1DT,EAAkBU,KAAK/B,EAAyB0B,EAAgB,CAAC,IACjE,GAAIH,EAAUZ,OAAS,EAAG,CACxBU,EAAkBU,KAAK7B,EAASqB,EAAU,IAC5C,CACF,CACF,CACA,OAAOF,CAAiB,EACvB,IACH,OAAOZ,EAA2BL,EAAkBD,KAAUgB,IAAmBhB,KAAUgB,EAC7F,CACA,MAAO,EACT,EACApB,EAASQ,2BAA6BA,EACtC,OAAOR,CACT,EAAG","sourceRoot":"internal/form"}},{"offset":{"line":15390,"column":0},"map":{"version":3,"names":["ActionHelper","getMultiSelectDisabledActions","aCollection","oContext","aMultiSelectDisabledActions","sActionPath","sActionName","sAnnotationPath","oParameterAnnotations","oAction","aActionMetadata","filter","oItem","$Type","forEach","oActionMetadata","Action","CommonHelper","getActionPath","context","getObject","$Parameter","$IsBound","n","$Name","$Path","push","getPressEventDataFieldForActionButton","sId","oParams","sOperationAvailableMap","sInvocationGrouping","InvocationGrouping","$EnumMember","addSingleQuotes","Label","generateFunction","objectToString","getNumberOfContextsExpression","vActionEnabled","sNumberOfSelectedContexts","getOperationAvailableMap","sControl","oOperationAvailableMap","oRecord","actionName","indexOf","Determining","_getOperationAvailableMapOfTable","_getOperationAvailableMapOfChart","oDataFieldForAction","oConverterContext","actionTarget","ActionTarget","annotations","Core","OperationAvailable","parameters","length","bindingParameterFullName","fullyQualifiedName","targetExpression","getExpressionFromAnnotation","undefined","path","bindingContextPathVisitor","isPathInModelExpression","_addToMap","oResult","sProperty","substr","sBindingParameter","sKey","oValue","oMap"],"sourceRoot":"internal/helpers","sources":["ActionHelper.ts"],"sourcesContent":["import { UIAnnotationTypes, type DataFieldForAction } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport type ConverterContext from \"sap/fe/core/converters/ConverterContext\";\nimport { bindingContextPathVisitor } from \"sap/fe/core/converters/helpers/BindingHelper\";\nimport { getExpressionFromAnnotation, isPathInModelExpression } from \"sap/fe/core/helpers/BindingToolkit\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\n\nconst ActionHelper = {\n\t/**\n\t * Returns an array of actions that are not enabled with a multiple selection.\n\t *\n\t * @function\n\t * @name getMultiSelectDisabledActions\n\t * @param aCollection Array of records\n\t * @param oContext The context object of the control\n\t * @returns An array of action paths\n\t * @ui5-restricted\n\t */\n\tgetMultiSelectDisabledActions(aCollection: any, oContext: any) {\n\t\tconst aMultiSelectDisabledActions: any[] = [];\n\t\tlet sActionPath, sActionName, sAnnotationPath, oParameterAnnotations, oAction;\n\t\tif (aCollection) {\n\t\t\tconst aActionMetadata = aCollection.filter(function (oItem: any) {\n\t\t\t\treturn oItem.$Type === \"com.sap.vocabularies.UI.v1.DataFieldForAction\";\n\t\t\t});\n\t\t\taActionMetadata.forEach(function (oActionMetadata: any) {\n\t\t\t\tsActionName = oActionMetadata.Action;\n\t\t\t\tsActionPath = CommonHelper.getActionPath(oContext.context, true, sActionName, false);\n\t\t\t\toAction = oContext.context.getObject(`${sActionPath}/@$ui5.overload/0`);\n\t\t\t\tif (oAction && oAction.$Parameter && oAction.$IsBound) {\n\t\t\t\t\tfor (const n in oAction.$Parameter) {\n\t\t\t\t\t\tsAnnotationPath = `${sActionPath}/${oAction.$Parameter[n].$Name}@`;\n\t\t\t\t\t\toParameterAnnotations = oContext.context.getObject(sAnnotationPath);\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\toParameterAnnotations &&\n\t\t\t\t\t\t\t((oParameterAnnotations[\"@com.sap.vocabularies.UI.v1.Hidden\"] &&\n\t\t\t\t\t\t\t\toParameterAnnotations[\"@com.sap.vocabularies.UI.v1.Hidden\"].$Path) ||\n\t\t\t\t\t\t\t\t(oParameterAnnotations[\"@com.sap.vocabularies.Common.v1.FieldControl\"] &&\n\t\t\t\t\t\t\t\t\toParameterAnnotations[\"@com.sap.vocabularies.Common.v1.FieldControl\"].$Path))\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\taMultiSelectDisabledActions.push(sActionName);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn aMultiSelectDisabledActions;\n\t},\n\n\t/**\n\t * Method to get the expression for the 'press' event for the DataFieldForActionButton.\n\t *\n\t * @function\n\t * @name getPressEventDataFieldForActionButton\n\t * @param sId Control ID\n\t * @param oAction Action object\n\t * @param oParams Parameters\n\t * @param sOperationAvailableMap OperationAvailableMap as stringified JSON object\n\t * @returns The binding expression\n\t */\n\tgetPressEventDataFieldForActionButton(sId: string, oAction: any, oParams: any, sOperationAvailableMap: string) {\n\t\tconst sInvocationGrouping =\n\t\t\toAction.InvocationGrouping &&\n\t\t\toAction.InvocationGrouping.$EnumMember === \"com.sap.vocabularies.UI.v1.OperationGroupingType/ChangeSet\"\n\t\t\t\t? \"ChangeSet\"\n\t\t\t\t: \"Isolated\";\n\t\toParams = oParams || {};\n\t\toParams[\"invocationGrouping\"] = CommonHelper.addSingleQuotes(sInvocationGrouping);\n\t\toParams[\"controlId\"] = CommonHelper.addSingleQuotes(sId);\n\t\toParams[\"operationAvailableMap\"] = CommonHelper.addSingleQuotes(sOperationAvailableMap);\n\t\toParams[\"model\"] = \"${$source>/}.getModel()\";\n\t\toParams[\"label\"] = oAction.Label && CommonHelper.addSingleQuotes(oAction.Label, true);\n\n\t\treturn CommonHelper.generateFunction(\n\t\t\t\".editFlow.invokeAction\",\n\t\t\tCommonHelper.addSingleQuotes(oAction.Action),\n\t\t\tCommonHelper.objectToString(oParams)\n\t\t);\n\t},\n\t/**\n\t * Return Number of contexts expression.\n\t *\n\t * @function\n\t * @name getNumberOfContextsExpression\n\t * @param vActionEnabled Status of action (single or multiselect)\n\t * @returns Number of contexts expression\n\t */\n\tgetNumberOfContextsExpression(vActionEnabled: String) {\n\t\tlet sNumberOfSelectedContexts;\n\t\tif (vActionEnabled === \"single\") {\n\t\t\tsNumberOfSelectedContexts = \"${internal>numberOfSelectedContexts} === 1\";\n\t\t} else {\n\t\t\tsNumberOfSelectedContexts = \"${internal>numberOfSelectedContexts} > 0\";\n\t\t}\n\t\treturn sNumberOfSelectedContexts;\n\t},\n\t/**\n\t * Return UI Control (LineItem/Chart) Operation Available Map.\n\t *\n\t * @function\n\t * @name getOperationAvailableMap\n\t * @param aCollection Array of records\n\t * @param sControl Control name (lineItem / chart)\n\t * @param oContext Converter context\n\t * @returns The record containing all action names and their corresponding Core.OperationAvailable property paths\n\t */\n\tgetOperationAvailableMap(aCollection: any, sControl: string, oContext: any): Record<string, any> {\n\t\tlet oOperationAvailableMap: Record<string, any> = {};\n\t\tif (aCollection) {\n\t\t\taCollection.forEach((oRecord: any) => {\n\t\t\t\tif (oRecord.$Type === UIAnnotationTypes.DataFieldForAction) {\n\t\t\t\t\tif (oRecord.$Type === UIAnnotationTypes.DataFieldForAction) {\n\t\t\t\t\t\tconst actionName = oRecord.Action as string;\n\t\t\t\t\t\tif (actionName?.indexOf(\"/\") < 0 && !oRecord.Determining) {\n\t\t\t\t\t\t\tif (sControl === \"table\") {\n\t\t\t\t\t\t\t\toOperationAvailableMap = this._getOperationAvailableMapOfTable(\n\t\t\t\t\t\t\t\t\toRecord,\n\t\t\t\t\t\t\t\t\tactionName,\n\t\t\t\t\t\t\t\t\toOperationAvailableMap,\n\t\t\t\t\t\t\t\t\toContext\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} else if (sControl === \"chart\") {\n\t\t\t\t\t\t\t\toOperationAvailableMap = this._getOperationAvailableMapOfChart(\n\t\t\t\t\t\t\t\t\tactionName,\n\t\t\t\t\t\t\t\t\toOperationAvailableMap,\n\t\t\t\t\t\t\t\t\toContext\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn oOperationAvailableMap;\n\t},\n\n\t/**\n\t * Return LineItem Action Operation Available Map.\n\t *\n\t * @function\n\t * @name _getOperationAvailableMapOfTable\n\t * @private\n\t * @param oDataFieldForAction Data field for action object\n\t * @param sActionName Action name\n\t * @param oOperationAvailableMap Operation available map object\n\t * @param oConverterContext Converter context object\n\t * @returns The record containing all action name of line item and the corresponding Core.OperationAvailable property path\n\t */\n\t_getOperationAvailableMapOfTable(\n\t\toDataFieldForAction: DataFieldForAction,\n\t\tsActionName: string,\n\t\toOperationAvailableMap: Record<string, any>,\n\t\toConverterContext: ConverterContext\n\t) {\n\t\tconst actionTarget = oDataFieldForAction.ActionTarget;\n\t\tif (actionTarget?.annotations?.Core?.OperationAvailable === null) {\n\t\t\t// We disabled action advertisement but kept it in the code for the time being\n\t\t\t//oOperationAvailableMap = this._addToMap(sActionName, null, oOperationAvailableMap);\n\t\t} else if (actionTarget?.parameters?.length) {\n\t\t\tconst bindingParameterFullName = actionTarget.parameters[0].fullyQualifiedName,\n\t\t\t\ttargetExpression = getExpressionFromAnnotation(\n\t\t\t\t\tactionTarget?.annotations?.Core?.OperationAvailable,\n\t\t\t\t\t[],\n\t\t\t\t\tundefined,\n\t\t\t\t\t(path: string) => bindingContextPathVisitor(path, oConverterContext, bindingParameterFullName)\n\t\t\t\t);\n\t\t\tif (isPathInModelExpression(targetExpression)) {\n\t\t\t\toOperationAvailableMap = this._addToMap(sActionName, targetExpression.path, oOperationAvailableMap);\n\t\t\t} else if (actionTarget?.annotations?.Core?.OperationAvailable !== undefined) {\n\t\t\t\toOperationAvailableMap = this._addToMap(sActionName, targetExpression, oOperationAvailableMap);\n\t\t\t}\n\t\t}\n\t\treturn oOperationAvailableMap;\n\t},\n\n\t/**\n\t * Return LineItem Action Operation Available Map.\n\t *\n\t * @function\n\t * @name _getOperationAvailableMapOfChart\n\t * @private\n\t * @param sActionName Action name\n\t * @param oOperationAvailableMap Operation available map object\n\t * @param oContext Context object\n\t * @returns The record containing all action name of chart and the corresponding Core.OperationAvailable property path\n\t */\n\t_getOperationAvailableMapOfChart(sActionName: string, oOperationAvailableMap: Record<string, any>, oContext: any) {\n\t\tlet oResult = CommonHelper.getActionPath(oContext.context, false, sActionName, true);\n\t\tif (oResult === null) {\n\t\t\toOperationAvailableMap = this._addToMap(sActionName, null, oOperationAvailableMap);\n\t\t} else {\n\t\t\toResult = CommonHelper.getActionPath(oContext.context, false, sActionName);\n\t\t\tif (oResult.sProperty) {\n\t\t\t\toOperationAvailableMap = this._addToMap(\n\t\t\t\t\tsActionName,\n\t\t\t\t\toResult.sProperty.substr(oResult.sBindingParameter.length + 1),\n\t\t\t\t\toOperationAvailableMap\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn oOperationAvailableMap;\n\t},\n\n\t/**\n\t * Return Map.\n\t *\n\t * @function\n\t * @name _addToMap\n\t * @private\n\t * @param sKey Key\n\t * @param oValue Value\n\t * @param oMap Map object\n\t * @returns Map object\n\t */\n\t_addToMap(sKey: string, oValue: any, oMap: Record<string, any>) {\n\t\tif (sKey && oMap) {\n\t\t\toMap[sKey] = oValue;\n\t\t}\n\t\treturn oMap;\n\t}\n};\n\nexport default ActionHelper;\n"],"mappings":"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"}},{"offset":{"line":15577,"column":0},"map":{"version":3,"names":["sap","ui","define","BindingHelper","BindingToolkit","CommonHelper","isPathInModelExpression","getExpressionFromAnnotation","bindingContextPathVisitor","ActionHelper","getMultiSelectDisabledActions","aCollection","oContext","aMultiSelectDisabledActions","sActionPath","sActionName","sAnnotationPath","oParameterAnnotations","oAction","aActionMetadata","filter","oItem","$Type","forEach","oActionMetadata","Action","getActionPath","context","getObject","$Parameter","$IsBound","n","$Name","$Path","push","getPressEventDataFieldForActionButton","sId","oParams","sOperationAvailableMap","sInvocationGrouping","InvocationGrouping","$EnumMember","addSingleQuotes","Label","generateFunction","objectToString","getNumberOfContextsExpression","vActionEnabled","sNumberOfSelectedContexts","getOperationAvailableMap","sControl","oOperationAvailableMap","oRecord","actionName","indexOf","Determining","this","_getOperationAvailableMapOfTable","_getOperationAvailableMapOfChart","oDataFieldForAction","oConverterContext","_actionTarget$annotat","_actionTarget$annotat2","_actionTarget$paramet","actionTarget","ActionTarget","annotations","Core","OperationAvailable","parameters","length","_actionTarget$annotat3","_actionTarget$annotat4","_actionTarget$annotat5","_actionTarget$annotat6","bindingParameterFullName","fullyQualifiedName","targetExpression","undefined","path","_addToMap","oResult","sProperty","substr","sBindingParameter","sKey","oValue","oMap"],"sources":["ActionHelper-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,yDAAO,CAAC,+CAAgD,qCAAsC,8BAA+B,SAAUC,EAAeC,EAAgBC,GAC3K,aAEA,IAAIC,EAA0BF,EAAeE,wBAC7C,IAAIC,EAA8BH,EAAeG,4BACjD,IAAIC,EAA4BL,EAAcK,0BAC9C,MAAMC,EAAe,CAWnBC,8BAA8BC,EAAaC,GACzC,MAAMC,EAA8B,GACpC,IAAIC,EAAaC,EAAaC,EAAiBC,EAAuBC,EACtE,GAAIP,EAAa,CACf,MAAMQ,EAAkBR,EAAYS,OAAO,SAAUC,GACnD,OAAOA,EAAMC,QAAU,+CACzB,GACAH,EAAgBI,QAAQ,SAAUC,GAChCT,EAAcS,EAAgBC,OAC9BX,EAAcT,EAAaqB,cAAcd,EAASe,QAAS,KAAMZ,EAAa,OAC9EG,EAAUN,EAASe,QAAQC,UAAU,GAAGd,sBACxC,GAAII,GAAWA,EAAQW,YAAcX,EAAQY,SAAU,CACrD,IAAK,MAAMC,KAAKb,EAAQW,WAAY,CAClCb,EAAkB,GAAGF,KAAeI,EAAQW,WAAWE,GAAGC,SAC1Df,EAAwBL,EAASe,QAAQC,UAAUZ,GACnD,GAAIC,IAA0BA,EAAsB,uCAAyCA,EAAsB,sCAAsCgB,OAAShB,EAAsB,iDAAmDA,EAAsB,gDAAgDgB,OAAQ,CACvTpB,EAA4BqB,KAAKnB,GACjC,KACF,CACF,CACF,CACF,EACF,CACA,OAAOF,CACT,EAYAsB,sCAAsCC,EAAKlB,EAASmB,EAASC,GAC3D,MAAMC,EAAsBrB,EAAQsB,oBAAsBtB,EAAQsB,mBAAmBC,cAAgB,6DAA+D,YAAc,WAClLJ,EAAUA,GAAW,CAAC,EACtBA,EAAQ,sBAAwBhC,EAAaqC,gBAAgBH,GAC7DF,EAAQ,aAAehC,EAAaqC,gBAAgBN,GACpDC,EAAQ,yBAA2BhC,EAAaqC,gBAAgBJ,GAChED,EAAQ,SAAW,0BACnBA,EAAQ,SAAWnB,EAAQyB,OAAStC,EAAaqC,gBAAgBxB,EAAQyB,MAAO,MAChF,OAAOtC,EAAauC,iBAAiB,yBAA0BvC,EAAaqC,gBAAgBxB,EAAQO,QAASpB,EAAawC,eAAeR,GAC3I,EASAS,8BAA8BC,GAC5B,IAAIC,EACJ,GAAID,IAAmB,SAAU,CAC/BC,EAA4B,4CAC9B,KAAO,CACLA,EAA4B,0CAC9B,CACA,OAAOA,CACT,EAWAC,yBAAyBtC,EAAauC,EAAUtC,GAC9C,IAAIuC,EAAyB,CAAC,EAC9B,GAAIxC,EAAa,CACfA,EAAYY,QAAQ6B,IAClB,GAAIA,EAAQ9B,QAAU,gDAAiD,CACrE,GAAI8B,EAAQ9B,QAAU,gDAAiD,CACrE,MAAM+B,EAAaD,EAAQ3B,OAC3B,IAAK4B,IAAe,MAAQA,SAAoB,OAAS,EAAIA,EAAWC,QAAQ,MAAQ,IAAMF,EAAQG,YAAa,CACjH,GAAIL,IAAa,QAAS,CACxBC,EAAyBK,KAAKC,iCAAiCL,EAASC,EAAYF,EAAwBvC,EAC9G,MAAO,GAAIsC,IAAa,QAAS,CAC/BC,EAAyBK,KAAKE,iCAAiCL,EAAYF,EAAwBvC,EACrG,CACF,CACF,CACF,GAEJ,CACA,OAAOuC,CACT,EAaAM,iCAAiCE,EAAqB5C,EAAaoC,EAAwBS,GACzF,IAAIC,EAAuBC,EAAwBC,EACnD,MAAMC,EAAeL,EAAoBM,aACzC,IAAKD,IAAiB,MAAQA,SAAsB,OAAS,GAAKH,EAAwBG,EAAaE,eAAiB,MAAQL,SAA+B,OAAS,GAAKC,EAAyBD,EAAsBM,QAAU,MAAQL,SAAgC,OAAS,EAAIA,EAAuBM,sBAAwB,KAAM,CAGhV,MAAO,GAAIJ,IAAiB,MAAQA,SAAsB,IAAMD,EAAwBC,EAAaK,cAAgB,MAAQN,SAA+B,GAAKA,EAAsBO,OAAQ,CAC7L,IAAIC,EAAwBC,EAAwBC,EAAwBC,EAC5E,MAAMC,EAA2BX,EAAaK,WAAW,GAAGO,mBAC1DC,EAAmBtE,EAA4ByD,IAAiB,MAAQA,SAAsB,OAAS,GAAKO,EAAyBP,EAAaE,eAAiB,MAAQK,SAAgC,OAAS,GAAKC,EAAyBD,EAAuBJ,QAAU,MAAQK,SAAgC,OAAS,EAAIA,EAAuBJ,mBAAoB,GAAIU,UAAWC,GAAQvE,EAA0BuE,EAAMnB,EAAmBe,IAC/b,GAAIrE,EAAwBuE,GAAmB,CAC7C1B,EAAyBK,KAAKwB,UAAUjE,EAAa8D,EAAiBE,KAAM5B,EAC9E,MAAO,IAAKa,IAAiB,MAAQA,SAAsB,OAAS,GAAKS,EAAyBT,EAAaE,eAAiB,MAAQO,SAAgC,OAAS,GAAKC,EAAyBD,EAAuBN,QAAU,MAAQO,SAAgC,OAAS,EAAIA,EAAuBN,sBAAwBU,UAAW,CAC7V3B,EAAyBK,KAAKwB,UAAUjE,EAAa8D,EAAkB1B,EACzE,CACF,CACA,OAAOA,CACT,EAYAO,iCAAiC3C,EAAaoC,EAAwBvC,GACpE,IAAIqE,EAAU5E,EAAaqB,cAAcd,EAASe,QAAS,MAAOZ,EAAa,MAC/E,GAAIkE,IAAY,KAAM,CACpB9B,EAAyBK,KAAKwB,UAAUjE,EAAa,KAAMoC,EAC7D,KAAO,CACL8B,EAAU5E,EAAaqB,cAAcd,EAASe,QAAS,MAAOZ,GAC9D,GAAIkE,EAAQC,UAAW,CACrB/B,EAAyBK,KAAKwB,UAAUjE,EAAakE,EAAQC,UAAUC,OAAOF,EAAQG,kBAAkBd,OAAS,GAAInB,EACvH,CACF,CACA,OAAOA,CACT,EAYA6B,UAAUK,EAAMC,EAAQC,GACtB,GAAIF,GAAQE,EAAM,CAChBA,EAAKF,GAAQC,CACf,CACA,OAAOC,CACT,GAEF,OAAO9E,CACT,EAAG","sourceRoot":"internal/helpers"}},{"offset":{"line":15582,"column":0},"map":{"version":3,"names":["getDataPointTargetExpression","oDataModelPath","TargetValue","getExpressionFromAnnotation","unresolvableExpression","oResourceModel","sap","ui","getCore","getLibraryResourceBundle","buildExpressionForProgressIndicatorDisplayValue","oPropertyDataModelObjectPath","fieldValue","targetObject","Value","relativeLocation","getRelativePaths","fieldValueExpression","TargetExpression","isProperty","$target","unit","annotations","Measures","Unit","ISOCurrency","getText","compileExpression","hasStaticPercentUnit","formatWithTypeInformation","unitBindingExpression","formatResult","valueFormatters","formatProgressIndicatorText","undefined","buildUnitBindingExpression","dataPoint","buildRatingIndicatorSubtitleExpression","oContext","mSampleSize","formatRatingIndicatorSubTitle","AnnotationHelper","value","context","iSampleSizeValue","sSubTitleLabel","String","getHeaderRatingIndicatorText","oDataPoint","result","SampleSize","Description","sModelValue","requiresIContext","buildExpressionForDescription","Common","Text","oTextExpression","isPathInModelExpression","parameters","$$noPatch","getDecimalFormat","outExpression","sNumberOfFractionalDigits","constraints","Object","assign","precision","scale","formatOptions","preserveDecimals","getValueFormatted","oPropertyDataModelPath","sPropertyType","path","indexOf","oPropertyDefinition","type","EDM_TYPE_MAPPING","buildFieldBindingExpression","dataPointFormatOptions","bHideMeasure","oDataPointValue","ValueFormat","NumberOfFractionalDigits","enhanceDataModelPath","oDescription","oFormattedValue","sDisplayMode","displayMode","getDisplayMode","oBindingExpression","formatWithBrackets","Timezone","getBindingWithTimezone","_computeBindingWithUnitOrCurrency","measureDisplayMode","propertyDataModelObjectPath","formattedValue","hideMeasure","getBindingWithUnitOrCurrency","showMeasure","buildExpressionForProgressIndicatorPercentValue","computePercentage"],"sourceRoot":"internal/helpers","sources":["DataPointTemplating.ts"],"sourcesContent":["import type { Property } from \"@sap-ux/vocabularies-types\";\nimport valueFormatters from \"sap/fe/core/formatters/ValueFormatter\";\nimport type { BindingToolkitExpression, CompiledBindingToolkitExpression, PathInModelExpression } from \"sap/fe/core/helpers/BindingToolkit\";\nimport {\n\tcompileExpression,\n\tEDM_TYPE_MAPPING,\n\tformatResult,\n\tformatWithTypeInformation,\n\tgetExpressionFromAnnotation,\n\tisPathInModelExpression,\n\tunresolvableExpression\n} from \"sap/fe/core/helpers/BindingToolkit\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { enhanceDataModelPath, getRelativePaths } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { hasStaticPercentUnit, isProperty } from \"sap/fe/core/templating/PropertyHelper\";\nimport { getBindingWithTimezone, getBindingWithUnitOrCurrency, getDisplayMode } from \"sap/fe/core/templating/UIFormatters\";\nimport AnnotationHelper from \"sap/ui/model/odata/v4/AnnotationHelper\";\n\nexport type DataPointFormatOptions = Partial<{\n\tmeasureDisplayMode: string;\n\tdisplayMode: string;\n}>;\n\nconst getDataPointTargetExpression = (oDataModelPath: any): BindingToolkitExpression<string> => {\n\treturn oDataModelPath?.TargetValue ? getExpressionFromAnnotation(oDataModelPath.TargetValue) : unresolvableExpression;\n};\n\nconst oResourceModel = sap.ui.getCore().getLibraryResourceBundle(\"sap.fe.macros\");\n\nexport const buildExpressionForProgressIndicatorDisplayValue = (\n\toPropertyDataModelObjectPath: DataModelObjectPath\n): CompiledBindingToolkitExpression => {\n\tconst fieldValue = oPropertyDataModelObjectPath?.targetObject?.Value || \"\";\n\tconst relativeLocation = getRelativePaths(oPropertyDataModelObjectPath);\n\tlet fieldValueExpression = getExpressionFromAnnotation(fieldValue, relativeLocation) as any;\n\tconst TargetExpression = getDataPointTargetExpression(oPropertyDataModelObjectPath.targetObject) as any;\n\n\tif (fieldValueExpression && TargetExpression) {\n\t\tlet targetObject = oPropertyDataModelObjectPath.targetObject.Value;\n\t\tif (!isProperty(targetObject)) {\n\t\t\ttargetObject = oPropertyDataModelObjectPath.targetObject.Value.$target;\n\t\t}\n\t\tconst unit = targetObject.annotations?.Measures?.Unit || targetObject.annotations?.Measures?.ISOCurrency;\n\n\t\tif (!unit) {\n\t\t\treturn oResourceModel.getText(\"T_COMMON_PROGRESS_INDICATOR_DISPLAY_VALUE_NO_UOM\", [\n\t\t\t\tcompileExpression(fieldValueExpression) as string,\n\t\t\t\tcompileExpression(TargetExpression) as string\n\t\t\t]);\n\t\t}\n\t\t// If the unit isn't a path, we check for a % sign as it is a special case.\n\t\tif (hasStaticPercentUnit(fieldValue?.$target)) {\n\t\t\treturn `${compileExpression(fieldValueExpression) as string} %`;\n\t\t}\n\n\t\tfieldValueExpression = formatWithTypeInformation(targetObject, fieldValueExpression);\n\t\tconst unitBindingExpression = unit.$target\n\t\t\t? formatWithTypeInformation(unit.$target, getExpressionFromAnnotation(unit, relativeLocation))\n\t\t\t: getExpressionFromAnnotation(unit, relativeLocation);\n\n\t\treturn compileExpression(\n\t\t\tformatResult([fieldValueExpression, TargetExpression, unitBindingExpression], valueFormatters.formatProgressIndicatorText)\n\t\t);\n\t}\n\treturn undefined;\n};\n\nexport const buildUnitBindingExpression = (dataPoint: DataModelObjectPath): CompiledBindingToolkitExpression => {\n\tconst relativeLocation = getRelativePaths(dataPoint);\n\n\tconst targetObject = dataPoint?.targetObject?.Value?.$target;\n\tif (!isProperty(targetObject)) {\n\t\treturn \"\";\n\t}\n\tconst unit = targetObject.annotations?.Measures?.Unit || targetObject.annotations?.Measures?.ISOCurrency;\n\treturn unit ? compileExpression(getExpressionFromAnnotation(unit, relativeLocation)) : \"\";\n};\n\nconst buildRatingIndicatorSubtitleExpression = (oContext: any, mSampleSize: any): string | undefined => {\n\tif (mSampleSize) {\n\t\treturn formatRatingIndicatorSubTitle(AnnotationHelper.value(mSampleSize, { context: oContext }) as any);\n\t}\n};\n// returns the text for the Rating Indicator Subtitle (e.g. '7 reviews')\nconst formatRatingIndicatorSubTitle = (iSampleSizeValue: number): string | undefined => {\n\tif (iSampleSizeValue) {\n\t\tconst sSubTitleLabel =\n\t\t\tiSampleSizeValue > 1\n\t\t\t\t? oResourceModel.getText(\"T_ANNOTATION_HELPER_RATING_INDICATOR_SUBTITLE_LABEL_PLURAL\")\n\t\t\t\t: oResourceModel.getText(\"T_ANNOTATION_HELPER_RATING_INDICATOR_SUBTITLE_LABEL\");\n\t\treturn oResourceModel.getText(\"T_ANNOTATION_HELPER_RATING_INDICATOR_SUBTITLE\", [String(iSampleSizeValue), sSubTitleLabel]);\n\t}\n};\n\n/**\n * This function is used to get the header text of rating indicator.\n *\n * @param oContext Context of interface\n * @param oDataPoint Data point object\n * @returns {string | undefined} Expression binding for rating indicator text\n */\nexport const getHeaderRatingIndicatorText = (oContext: any, oDataPoint: any): string | undefined => {\n\tlet result: string | undefined;\n\tif (oDataPoint && oDataPoint.SampleSize) {\n\t\tresult = buildRatingIndicatorSubtitleExpression(oContext, oDataPoint.SampleSize);\n\t} else if (oDataPoint && oDataPoint.Description) {\n\t\tconst sModelValue = AnnotationHelper.value(oDataPoint.Description, { context: oContext });\n\t\tresult = \"${path:\" + sModelValue + \"}\";\n\t}\n\treturn result;\n};\ngetHeaderRatingIndicatorText.requiresIContext = true;\n\nconst buildExpressionForDescription = (fieldValue: DataModelObjectPath): BindingToolkitExpression<any> | undefined => {\n\tconst relativeLocation = getRelativePaths(fieldValue);\n\tif (fieldValue?.targetObject?.annotations?.Common?.Text) {\n\t\tconst oTextExpression = getExpressionFromAnnotation(fieldValue?.targetObject.annotations?.Common?.Text, relativeLocation);\n\t\tif (isPathInModelExpression(oTextExpression)) {\n\t\t\toTextExpression.parameters = { $$noPatch: true };\n\t\t}\n\t\treturn oTextExpression;\n\t}\n\treturn undefined;\n};\n\nconst getDecimalFormat = (\n\toutExpression: PathInModelExpression<any>,\n\tfieldValue: any,\n\tsNumberOfFractionalDigits: string\n): BindingToolkitExpression<any> => {\n\tif (!outExpression.constraints) {\n\t\toutExpression.constraints = {};\n\t}\n\toutExpression.constraints = Object.assign(outExpression.constraints, {\n\t\tprecision: fieldValue.$target.precision,\n\t\tscale: sNumberOfFractionalDigits ? sNumberOfFractionalDigits : fieldValue.$target.scale\n\t});\n\t// sNumberOfFractionalDigits is only defined in getValueFormatted when NumberOfFractionalDigits is defined.\n\t// In that case, we need to instance the preserveDecimals parameter because of a change MDC side\n\tif (sNumberOfFractionalDigits) {\n\t\tif (!outExpression.formatOptions) {\n\t\t\toutExpression.formatOptions = {};\n\t\t}\n\t\toutExpression.formatOptions = Object.assign(outExpression.formatOptions, {\n\t\t\tpreserveDecimals: false\n\t\t});\n\t}\n\treturn outExpression;\n};\n\nexport const getValueFormatted = (\n\toPropertyDataModelPath: DataModelObjectPath,\n\tfieldValue: any,\n\tsPropertyType: string,\n\tsNumberOfFractionalDigits: string\n): BindingToolkitExpression<string> => {\n\tlet outExpression: BindingToolkitExpression<any>;\n\tconst relativeLocation = fieldValue?.path?.indexOf(\"/\") === -1 ? getRelativePaths(oPropertyDataModelPath) : [];\n\toutExpression = getExpressionFromAnnotation(fieldValue, relativeLocation);\n\tconst oPropertyDefinition = oPropertyDataModelPath.targetObject as Property;\n\tif (sPropertyType && isPathInModelExpression(outExpression)) {\n\t\tformatWithTypeInformation(oPropertyDefinition, outExpression);\n\t\toutExpression.type = EDM_TYPE_MAPPING[sPropertyType]?.type;\n\t\tswitch (sPropertyType) {\n\t\t\tcase \"Edm.Decimal\":\n\t\t\t\t// for the listReport, the decimal fields are formatted by returning a string\n\t\t\t\t// for the facets of the OP, the decimal fields are formatted by returning a promise, so we manage all the cases\n\t\t\t\toutExpression = getDecimalFormat(outExpression, fieldValue, sNumberOfFractionalDigits);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t}\n\t}\n\n\treturn outExpression;\n};\n\nexport const buildFieldBindingExpression = (\n\toDataModelPath: DataModelObjectPath,\n\tdataPointFormatOptions: DataPointFormatOptions,\n\tbHideMeasure: boolean\n): CompiledBindingToolkitExpression => {\n\tconst oDataPoint = oDataModelPath.targetObject;\n\tconst oDataPointValue = oDataPoint?.Value || \"\";\n\tconst sPropertyType = oDataPointValue?.$target?.type;\n\tlet sNumberOfFractionalDigits;\n\n\tif (sPropertyType === \"Edm.Decimal\" && oDataPoint.ValueFormat) {\n\t\tif (oDataPoint.ValueFormat.NumberOfFractionalDigits) {\n\t\t\tsNumberOfFractionalDigits = oDataPoint.ValueFormat.NumberOfFractionalDigits;\n\t\t}\n\t}\n\tconst oPropertyDataModelObjectPath = enhanceDataModelPath(oDataModelPath, oDataPointValue.path);\n\tconst oDescription = oPropertyDataModelObjectPath ? buildExpressionForDescription(oPropertyDataModelObjectPath) : undefined;\n\tconst oFormattedValue = getValueFormatted(oPropertyDataModelObjectPath, oDataPointValue, sPropertyType, sNumberOfFractionalDigits);\n\tconst sDisplayMode = oDescription ? dataPointFormatOptions.displayMode || getDisplayMode(oPropertyDataModelObjectPath) : \"Value\";\n\tlet oBindingExpression: any;\n\tswitch (sDisplayMode) {\n\t\tcase \"Description\":\n\t\t\toBindingExpression = oDescription;\n\t\t\tbreak;\n\t\tcase \"ValueDescription\":\n\t\t\toBindingExpression = formatResult([oFormattedValue, oDescription], valueFormatters.formatWithBrackets);\n\t\t\tbreak;\n\t\tcase \"DescriptionValue\":\n\t\t\toBindingExpression = formatResult([oDescription, oFormattedValue], valueFormatters.formatWithBrackets);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tif (oPropertyDataModelObjectPath.targetObject?.annotations?.Common?.Timezone) {\n\t\t\t\toBindingExpression = getBindingWithTimezone(oPropertyDataModelObjectPath, oFormattedValue);\n\t\t\t} else {\n\t\t\t\toBindingExpression = _computeBindingWithUnitOrCurrency(\n\t\t\t\t\toPropertyDataModelObjectPath,\n\t\t\t\t\toFormattedValue,\n\t\t\t\t\tbHideMeasure || dataPointFormatOptions?.measureDisplayMode === \"Hidden\"\n\t\t\t\t);\n\t\t\t}\n\t}\n\treturn compileExpression(oBindingExpression);\n};\n\nexport const _computeBindingWithUnitOrCurrency = (\n\tpropertyDataModelObjectPath: DataModelObjectPath,\n\tformattedValue: BindingToolkitExpression<string>,\n\thideMeasure: boolean\n): BindingToolkitExpression<string> => {\n\tif (\n\t\tpropertyDataModelObjectPath.targetObject?.annotations?.Measures?.Unit ||\n\t\tpropertyDataModelObjectPath.targetObject?.annotations?.Measures?.ISOCurrency\n\t) {\n\t\tif (hideMeasure && hasStaticPercentUnit(propertyDataModelObjectPath.targetObject)) {\n\t\t\treturn formattedValue;\n\t\t}\n\t\treturn getBindingWithUnitOrCurrency(\n\t\t\tpropertyDataModelObjectPath,\n\t\t\tformattedValue,\n\t\t\tundefined,\n\t\t\thideMeasure ? { showMeasure: false } : undefined\n\t\t);\n\t}\n\treturn formattedValue;\n};\n\n/**\n * Method to calculate the percentage value of Progress Indicator. Basic formula is Value/Target * 100.\n *\n * @param oPropertyDataModelObjectPath\n * @returns The expression binding used to calculate the percentage value, which is shown in the progress indicator based on the formula given above.\n */\nexport const buildExpressionForProgressIndicatorPercentValue = (oPropertyDataModelObjectPath: DataModelObjectPath): string | undefined => {\n\tconst fieldValue = oPropertyDataModelObjectPath?.targetObject?.Value || \"\";\n\tconst relativeLocation = getRelativePaths(oPropertyDataModelObjectPath);\n\tconst fieldValueExpression = getExpressionFromAnnotation(fieldValue, relativeLocation);\n\tconst TargetExpression = getDataPointTargetExpression(oPropertyDataModelObjectPath.targetObject);\n\n\tconst oPropertyDefinition = fieldValue.$target as Property;\n\tconst unit = oPropertyDefinition.annotations?.Measures?.Unit || oPropertyDefinition.annotations?.Measures?.ISOCurrency;\n\tif (unit) {\n\t\tconst unitBindingExpression = (unit as any).$target\n\t\t\t? formatWithTypeInformation(\n\t\t\t\t\t(unit as any).$target,\n\t\t\t\t\tgetExpressionFromAnnotation(unit, relativeLocation) as BindingToolkitExpression<string>\n\t\t\t  )\n\t\t\t: (getExpressionFromAnnotation(unit, relativeLocation) as BindingToolkitExpression<string>);\n\n\t\treturn compileExpression(\n\t\t\tformatResult([fieldValueExpression, TargetExpression, unitBindingExpression], valueFormatters.computePercentage)\n\t\t);\n\t}\n\n\treturn compileExpression(formatResult([fieldValueExpression, TargetExpression, \"\"], valueFormatters.computePercentage));\n};\n"],"mappings":"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"}},{"offset":{"line":15812,"column":0},"map":{"version":3,"names":["sap","ui","define","valueFormatters","BindingToolkit","DataModelPathHelper","PropertyHelper","UIFormatters","AnnotationHelper","_exports","getDisplayMode","getBindingWithUnitOrCurrency","getBindingWithTimezone","isProperty","hasStaticPercentUnit","getRelativePaths","enhanceDataModelPath","unresolvableExpression","isPathInModelExpression","getExpressionFromAnnotation","formatWithTypeInformation","formatResult","EDM_TYPE_MAPPING","compileExpression","getDataPointTargetExpression","oDataModelPath","TargetValue","oResourceModel","getCore","getLibraryResourceBundle","buildExpressionForProgressIndicatorDisplayValue","oPropertyDataModelObjectPath","_oPropertyDataModelOb","fieldValue","targetObject","Value","relativeLocation","fieldValueExpression","TargetExpression","_targetObject$annotat","_targetObject$annotat2","_targetObject$annotat3","_targetObject$annotat4","$target","unit","annotations","Measures","Unit","ISOCurrency","getText","unitBindingExpression","formatProgressIndicatorText","undefined","buildUnitBindingExpression","dataPoint","_dataPoint$targetObje","_dataPoint$targetObje2","_targetObject$annotat5","_targetObject$annotat6","_targetObject$annotat7","_targetObject$annotat8","buildRatingIndicatorSubtitleExpression","oContext","mSampleSize","formatRatingIndicatorSubTitle","value","context","iSampleSizeValue","sSubTitleLabel","String","getHeaderRatingIndicatorText","oDataPoint","result","SampleSize","Description","sModelValue","requiresIContext","buildExpressionForDescription","_fieldValue$targetObj","_fieldValue$targetObj2","_fieldValue$targetObj3","Common","Text","_fieldValue$targetObj4","_fieldValue$targetObj5","oTextExpression","parameters","$$noPatch","getDecimalFormat","outExpression","sNumberOfFractionalDigits","constraints","Object","assign","precision","scale","formatOptions","preserveDecimals","getValueFormatted","oPropertyDataModelPath","sPropertyType","_fieldValue$path","path","indexOf","oPropertyDefinition","_EDM_TYPE_MAPPING$sPr","type","buildFieldBindingExpression","dataPointFormatOptions","bHideMeasure","_oDataPointValue$$tar","_oPropertyDataModelOb2","_oPropertyDataModelOb3","_oPropertyDataModelOb4","oDataPointValue","ValueFormat","NumberOfFractionalDigits","oDescription","oFormattedValue","sDisplayMode","displayMode","oBindingExpression","formatWithBrackets","Timezone","_computeBindingWithUnitOrCurrency","measureDisplayMode","propertyDataModelObjectPath","formattedValue","hideMeasure","_propertyDataModelObj","_propertyDataModelObj2","_propertyDataModelObj3","_propertyDataModelObj4","_propertyDataModelObj5","_propertyDataModelObj6","showMeasure","buildExpressionForProgressIndicatorPercentValue","_oPropertyDataModelOb5","_oPropertyDefinition$","_oPropertyDefinition$2","_oPropertyDefinition$3","_oPropertyDefinition$4","computePercentage"],"sources":["DataPointTemplating-dbg.js"],"mappings":"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","sourceRoot":"internal/helpers"}},{"offset":{"line":15817,"column":0},"map":{"version":3,"names":["DefaultActionHandler","getDefaultActionHandler","oCtx","oAction","oDataFieldForDefaultAction","defaultActionContextOrEntitySet","mode","defaultAction","type","Table","pressEventDataFieldForActionButton","collection","getObject","tableDefinition","isNavigable","enableAutoScroll","defaultValuesExtensionFunction","undefined","CommonHelper","getPressHandlerForDataFieldForIBN","command","noWrap","press","buildActionWrapper","id","ioEx","getUseDefaultActionOnly","getButtonMode","MenuButtonMode","Split","Regular"],"sourceRoot":"internal/helpers","sources":["DefaultActionHandler.ts"],"sourcesContent":["import CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport Table from \"sap/fe/macros/table/TableHelper\";\nimport { MenuButtonMode } from \"sap/m/library\";\n\nconst DefaultActionHandler = {\n\t/**\n\t * The default action group handler that is invoked when adding the menu button handling appropriately.\n\t *\n\t * @param oCtx The current context in which the handler is called\n\t * @param oAction The current action context\n\t * @param oDataFieldForDefaultAction The current dataField for the default action\n\t * @param defaultActionContextOrEntitySet The current context for the default action\n\t * @param mode The optional parameter for the handler mode; default setting is Table\n\t * @returns The appropriate expression string\n\t */\n\tgetDefaultActionHandler: function (\n\t\toCtx: any,\n\t\toAction: any,\n\t\toDataFieldForDefaultAction: any,\n\t\tdefaultActionContextOrEntitySet: any,\n\t\tmode = \"Table\"\n\t) {\n\t\tif (oAction.defaultAction) {\n\t\t\ttry {\n\t\t\t\tswitch (oAction.defaultAction.type) {\n\t\t\t\t\tcase \"ForAction\": {\n\t\t\t\t\t\tif (mode === \"Table\") {\n\t\t\t\t\t\t\treturn Table.pressEventDataFieldForActionButton(\n\t\t\t\t\t\t\t\toCtx,\n\t\t\t\t\t\t\t\toDataFieldForDefaultAction,\n\t\t\t\t\t\t\t\toCtx.collection.getObject(\"@sapui.name\"),\n\t\t\t\t\t\t\t\toCtx.tableDefinition.getObject(\"operationAvailableMap\"),\n\t\t\t\t\t\t\t\tdefaultActionContextOrEntitySet,\n\t\t\t\t\t\t\t\toAction.isNavigable,\n\t\t\t\t\t\t\t\toAction.enableAutoScroll,\n\t\t\t\t\t\t\t\toAction.defaultValuesExtensionFunction\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\t\t\t\t\tcase \"ForNavigation\": {\n\t\t\t\t\t\tif (mode === \"Table\") {\n\t\t\t\t\t\t\treturn CommonHelper.getPressHandlerForDataFieldForIBN(\n\t\t\t\t\t\t\t\toDataFieldForDefaultAction,\n\t\t\t\t\t\t\t\t\"${internal>selectedContexts}\",\n\t\t\t\t\t\t\t\t!oCtx.tableDefinition.getObject(\"enableAnalytics\")\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\t\t\t\t\tdefault: {\n\t\t\t\t\t\tif (oAction.defaultAction.command) {\n\t\t\t\t\t\t\treturn \"cmd:\" + oAction.defaultAction.command;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (oAction.defaultAction.noWrap) {\n\t\t\t\t\t\t\treturn oAction.defaultAction.press;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tswitch (mode) {\n\t\t\t\t\t\t\t\tcase \"Table\": {\n\t\t\t\t\t\t\t\t\treturn CommonHelper.buildActionWrapper(oAction.defaultAction, oCtx);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcase \"Form\": {\n\t\t\t\t\t\t\t\t\treturn CommonHelper.buildActionWrapper(oAction.defaultAction, { id: \"forTheForm\" });\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (ioEx) {\n\t\t\t\treturn \"binding for the default action is not working as expected\";\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t},\n\n\t/**\n\t * The function determines during templating whether to use the defaultActionOnly\n\t * setting for the sap.m.MenuButton control in case a defaultAction is provided.\n\t *\n\t * @param oAction The current action context\n\t * @returns A Boolean value\n\t */\n\tgetUseDefaultActionOnly: function (oAction: any) {\n\t\tif (oAction.defaultAction) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\n\t/**\n\t * The function determines during templating whether to use the 'Split'\n\t * or 'Regular' MenuButtonMode for the sap.m.MenuButton control\n\t * in case a defaultAction is available.\n\t *\n\t * @param oAction The current action context\n\t * @returns The MenuButtonMode\n\t */\n\tgetButtonMode: function (oAction: any) {\n\t\tif (oAction.defaultAction) {\n\t\t\treturn MenuButtonMode.Split;\n\t\t} else {\n\t\t\treturn MenuButtonMode.Regular;\n\t\t}\n\t}\n};\n\nexport default DefaultActionHandler;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;EAIA,MAAMA,oBAAoB,GAAG;IAC5B;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACCC,uBAAuB,EAAE,UACxBC,IAAS,EACTC,OAAY,EACZC,0BAA+B,EAC/BC,+BAAoC,EAEnC;MAAA,IADDC,IAAI,uEAAG,OAAO;MAEd,IAAIH,OAAO,CAACI,aAAa,EAAE;QAC1B,IAAI;UACH,QAAQJ,OAAO,CAACI,aAAa,CAACC,IAAI;YACjC,KAAK,WAAW;cAAE;gBACjB,IAAIF,IAAI,KAAK,OAAO,EAAE;kBACrB,OAAOG,KAAK,CAACC,kCAAkC,CAC9CR,IAAI,EACJE,0BAA0B,EAC1BF,IAAI,CAACS,UAAU,CAACC,SAAS,CAAC,aAAa,CAAC,EACxCV,IAAI,CAACW,eAAe,CAACD,SAAS,CAAC,uBAAuB,CAAC,EACvDP,+BAA+B,EAC/BF,OAAO,CAACW,WAAW,EACnBX,OAAO,CAACY,gBAAgB,EACxBZ,OAAO,CAACa,8BAA8B,CACtC;gBACF;gBACA,OAAOC,SAAS;cACjB;YACA,KAAK,eAAe;cAAE;gBACrB,IAAIX,IAAI,KAAK,OAAO,EAAE;kBACrB,OAAOY,YAAY,CAACC,iCAAiC,CACpDf,0BAA0B,EAC1B,8BAA8B,EAC9B,CAACF,IAAI,CAACW,eAAe,CAACD,SAAS,CAAC,iBAAiB,CAAC,CAClD;gBACF;gBACA,OAAOK,SAAS;cACjB;YACA;cAAS;gBACR,IAAId,OAAO,CAACI,aAAa,CAACa,OAAO,EAAE;kBAClC,OAAO,MAAM,GAAGjB,OAAO,CAACI,aAAa,CAACa,OAAO;gBAC9C;gBACA,IAAIjB,OAAO,CAACI,aAAa,CAACc,MAAM,EAAE;kBACjC,OAAOlB,OAAO,CAACI,aAAa,CAACe,KAAK;gBACnC,CAAC,MAAM;kBACN,QAAQhB,IAAI;oBACX,KAAK,OAAO;sBAAE;wBACb,OAAOY,YAAY,CAACK,kBAAkB,CAACpB,OAAO,CAACI,aAAa,EAAEL,IAAI,CAAC;sBACpE;oBACA,KAAK,MAAM;sBAAE;wBACZ,OAAOgB,YAAY,CAACK,kBAAkB,CAACpB,OAAO,CAACI,aAAa,EAAE;0BAAEiB,EAAE,EAAE;wBAAa,CAAC,CAAC;sBACpF;kBAAC;gBAEH;cACD;UAAC;QAEH,CAAC,CAAC,OAAOC,IAAI,EAAE;UACd,OAAO,2DAA2D;QACnE;MACD;MACA,OAAOR,SAAS;IACjB,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;AACA;IACCS,uBAAuB,EAAE,UAAUvB,OAAY,EAAE;MAChD,IAAIA,OAAO,CAACI,aAAa,EAAE;QAC1B,OAAO,IAAI;MACZ,CAAC,MAAM;QACN,OAAO,KAAK;MACb;IACD,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;IACCoB,aAAa,EAAE,UAAUxB,OAAY,EAAE;MACtC,IAAIA,OAAO,CAACI,aAAa,EAAE;QAC1B,OAAOqB,cAAc,CAACC,KAAK;MAC5B,CAAC,MAAM;QACN,OAAOD,cAAc,CAACE,OAAO;MAC9B;IACD;EACD,CAAC;EAAC,OAEa9B,oBAAoB;AAAA"}},{"offset":{"line":15916,"column":0},"map":{"version":3,"names":["sap","ui","define","CommonHelper","Table","library","MenuButtonMode","DefaultActionHandler","getDefaultActionHandler","oCtx","oAction","oDataFieldForDefaultAction","defaultActionContextOrEntitySet","mode","arguments","length","undefined","defaultAction","type","pressEventDataFieldForActionButton","collection","getObject","tableDefinition","isNavigable","enableAutoScroll","defaultValuesExtensionFunction","getPressHandlerForDataFieldForIBN","command","noWrap","press","buildActionWrapper","id","ioEx","getUseDefaultActionOnly","getButtonMode","Split","Regular"],"sources":["DefaultActionHandler-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,iEAAO,CAAC,6BAA8B,kCAAmC,iBAAkB,SAAUC,EAAcC,EAAOC,GAC/H,aAEA,IAAIC,EAAiBD,EAAQC,eAC7B,MAAMC,EAAuB,CAW3BC,wBAAyB,SAAUC,EAAMC,EAASC,EAA4BC,GAC5E,IAAIC,EAAOC,UAAUC,OAAS,GAAKD,UAAU,KAAOE,UAAYF,UAAU,GAAK,QAC/E,GAAIJ,EAAQO,cAAe,CACzB,IACE,OAAQP,EAAQO,cAAcC,MAC5B,IAAK,YACH,CACE,GAAIL,IAAS,QAAS,CACpB,OAAOT,EAAMe,mCAAmCV,EAAME,EAA4BF,EAAKW,WAAWC,UAAU,eAAgBZ,EAAKa,gBAAgBD,UAAU,yBAA0BT,EAAiCF,EAAQa,YAAab,EAAQc,iBAAkBd,EAAQe,+BAC/Q,CACA,OAAOT,SACT,CACF,IAAK,gBACH,CACE,GAAIH,IAAS,QAAS,CACpB,OAAOV,EAAauB,kCAAkCf,EAA4B,gCAAiCF,EAAKa,gBAAgBD,UAAU,mBACpJ,CACA,OAAOL,SACT,CACF,QACE,CACE,GAAIN,EAAQO,cAAcU,QAAS,CACjC,MAAO,OAASjB,EAAQO,cAAcU,OACxC,CACA,GAAIjB,EAAQO,cAAcW,OAAQ,CAChC,OAAOlB,EAAQO,cAAcY,KAC/B,KAAO,CACL,OAAQhB,GACN,IAAK,QACH,CACE,OAAOV,EAAa2B,mBAAmBpB,EAAQO,cAAeR,EAChE,CACF,IAAK,OACH,CACE,OAAON,EAAa2B,mBAAmBpB,EAAQO,cAAe,CAC5Dc,GAAI,cAER,EAEN,CACF,EAIN,CAFE,MAAOC,GACP,MAAO,2DACT,CACF,CACA,OAAOhB,SACT,EAQAiB,wBAAyB,SAAUvB,GACjC,GAAIA,EAAQO,cAAe,CACzB,OAAO,IACT,KAAO,CACL,OAAO,KACT,CACF,EASAiB,cAAe,SAAUxB,GACvB,GAAIA,EAAQO,cAAe,CACzB,OAAOX,EAAe6B,KACxB,KAAO,CACL,OAAO7B,EAAe8B,OACxB,CACF,GAEF,OAAO7B,CACT,EAAG","sourceRoot":"internal/helpers"}},{"offset":{"line":15921,"column":0},"map":{"version":3,"names":["buildExpressionForHeaderVisible","oProps","headerBindingExpression","resolveBindingString","header","tabTileBindingExpression","tabTitle","headerVisibleBindingExpression","constant","headerVisible","compileExpression","and","not","equal"],"sourceRoot":"internal/helpers","sources":["TableTemplating.ts"],"sourcesContent":["import type { CompiledBindingToolkitExpression } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { and, compileExpression, constant, equal, not, resolveBindingString } from \"sap/fe/core/helpers/BindingToolkit\";\n\n/**\n * Method to compute the headerVisible property.\n *\n * @param oProps Object containing the table properties\n * @returns Expression binding for headerVisible\n */\nexport const buildExpressionForHeaderVisible = (oProps: any): CompiledBindingToolkitExpression => {\n\tconst headerBindingExpression = resolveBindingString(oProps?.header);\n\tconst tabTileBindingExpression = resolveBindingString(oProps?.tabTitle);\n\tconst headerVisibleBindingExpression = constant(oProps.headerVisible);\n\treturn compileExpression(and(headerVisibleBindingExpression, not(equal(headerBindingExpression, tabTileBindingExpression))));\n};\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;EAGA;AACA;AACA;AACA;AACA;AACA;EACO,MAAMA,+BAA+B,GAAIC,MAAW,IAAuC;IACjG,MAAMC,uBAAuB,GAAGC,oBAAoB,CAACF,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEG,MAAM,CAAC;IACpE,MAAMC,wBAAwB,GAAGF,oBAAoB,CAACF,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEK,QAAQ,CAAC;IACvE,MAAMC,8BAA8B,GAAGC,QAAQ,CAACP,MAAM,CAACQ,aAAa,CAAC;IACrE,OAAOC,iBAAiB,CAACC,GAAG,CAACJ,8BAA8B,EAAEK,GAAG,CAACC,KAAK,CAACX,uBAAuB,EAAEG,wBAAwB,CAAC,CAAC,CAAC,CAAC;EAC7H,CAAC;EAAC;EAAA;AAAA"}},{"offset":{"line":15950,"column":0},"map":{"version":3,"names":["sap","ui","define","BindingToolkit","_exports","resolveBindingString","not","equal","constant","compileExpression","and","buildExpressionForHeaderVisible","oProps","headerBindingExpression","header","tabTileBindingExpression","tabTitle","headerVisibleBindingExpression","headerVisible"],"sources":["TableTemplating-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,4DAAO,CAAC,sCAAuC,SAAUC,GAC9D,aAEA,IAAIC,EAAW,CAAC,EAChB,IAAIC,EAAuBF,EAAeE,qBAC1C,IAAIC,EAAMH,EAAeG,IACzB,IAAIC,EAAQJ,EAAeI,MAC3B,IAAIC,EAAWL,EAAeK,SAC9B,IAAIC,EAAoBN,EAAeM,kBACvC,IAAIC,EAAMP,EAAeO,IAOzB,MAAMC,EAAkCC,IACtC,MAAMC,EAA0BR,EAAqBO,IAAW,MAAQA,SAAgB,OAAS,EAAIA,EAAOE,QAC5G,MAAMC,EAA2BV,EAAqBO,IAAW,MAAQA,SAAgB,OAAS,EAAIA,EAAOI,UAC7G,MAAMC,EAAiCT,EAASI,EAAOM,eACvD,OAAOT,EAAkBC,EAAIO,EAAgCX,EAAIC,EAAMM,EAAyBE,KAA4B,EAE9HX,EAASO,gCAAkCA,EAC3C,OAAOP,CACT,EAAG","sourceRoot":"internal/helpers"}},{"offset":{"line":15955,"column":0},"map":{"version":3,"names":["ODataTableDelegate","Object","assign","TableDelegate","fetchProperties","table","model","_getModel","createPropertyInfos","Promise","resolve","attachModelContextChange","resolver","onModelContextChange","then","oSubModel","_createPropertyInfos","properties","MacrosDelegateUtil","setCachedProperties","getBindingContext","setProperty","createInternalBindingContext","dialog","isA","getParent","internalModel","getModel","newInternalBindingContextPath","getPath","getId","newInternalBindingContext","bindContext","getBoundContext","setBindingContext","event","data","getSource","detachModelContextChange","_collectRelatedProperties","dataModelPropertyPath","dataModelAdditionalPropertyPath","_getAdditionalProperty","relatedProperties","targetObject","additionalProperty","additionalPropertyPath","getTargetObjectPath","property","propertyPath","textAnnotation","annotations","Common","Text","textArrangement","UI","TextArrangement","toString","displayMode","getDisplayMode","oTable","oModel","oMetadataInfo","getDelegate","payload","aProperties","sEntitySetPath","collectionName","oMetaModel","getMetaModel","requestObject","mEntitySetAnnotations","oSortRestrictionsInfo","ODataMetaModelUtil","getSortRestrictionsInfo","oFilterRestrictions","oFilterRestrictionsInfo","getFilterRestrictionsInfo","customDataForColumns","getCustomData","propertiesToBeCreated","dataModelEntityPath","getInvolvedDataModelObjects","getContext","customData","forEach","columnDef","oPropertyInfo","name","path","label","sortable","_isSortableProperty","filterable","_isFilterableProperty","maxConditions","_getPropertyMaxConditions","typeConfig","isTypeFilterable","$Type","getTypeUtil","getTypeConfig","undefined","enhanceDataModelPath","targetPropertyPath","oTypeConfig","type","propertyTypeConfig","fetchTypeConfig","TypeUtil","formatOptions","constraints","relatedPropertiesInfo","relatedPropertyPaths","keys","length","propertyInfos","find","push","relatedColumns","_createRelatedProperties","concat","updateBindingInfo","oMDCTable","oBindingInfo","apply","collectionPath","oFilter","Core","byId","getFilter","bFilterEnabled","isFilteringEnabled","mConditions","oInnerFilterInfo","oOuterFilterInfo","aFilters","tableProperties","getCachedProperties","getConditions","FilterUtil","getFilterInfo","filters","aParameterNames","DelegateUtil","getParameterNames","_updatePropertyInfo","sParameterPath","getParametersInfo","parameters","$search","CommonUtils","normalizeSearchTerm","getSearch","_applyDefaultSorting","$select","reduce","sQuery","oProperty","indexOf","$count","ModelHelper","isDraftSupported","Filter","FilterOperator","EQ","oPayload","sorter","defaultSortPropertyName","Sorter","aTableProperties","aConditionKey","conditionKey","findIndex","tableProperty","oColumnDef","getObject","updateBinding","oBinding","bNeedManualRefresh","oInternalBindingContext","sManualUpdatePropertyKey","bPendingManualUpdate","getProperty","oRowBinding","getRowBinding","oldFilters","getFilters","deepEqual","getQueryOptionsFromParameters","requestRefresh","getGroupId","finally","catch","oError","Log","error","fireEvent","existingColumns","relatedPropertyNameMap","relatedColumn","column","newName","valueHelpTableColumn","getLabel","map","columnName","sortRestrictionsInfo","propertyInfo","valueHelpColumn","isMultiValueFilterExpression","getAssociatedTextPropertyPath","getAssociatedCurrencyPropertyPath","getAssociatedUnitPropertyPath","getAssociatedTimezonePropertyPath","dataModelAdditionalProperty"],"sourceRoot":"internal/valuehelp","sources":["TableDelegate.ts"],"sourcesContent":["import { Property } from \"@sap-ux/vocabularies-types\";\nimport Log from \"sap/base/Log\";\nimport deepEqual from \"sap/base/util/deepEqual\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport { fetchTypeConfig } from \"sap/fe/core/converters/controls/ListReport/FilterBar\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport { DataModelObjectPath, enhanceDataModelPath, getTargetObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { getDisplayMode } from \"sap/fe/core/templating/DisplayModeFormatter\";\nimport {\n\tgetAssociatedCurrencyPropertyPath,\n\tgetAssociatedTextPropertyPath,\n\tgetAssociatedTimezonePropertyPath,\n\tgetAssociatedUnitPropertyPath,\n\tgetLabel\n} from \"sap/fe/core/templating/PropertyHelper\";\nimport { DefaultTypeForEdmType, isTypeFilterable } from \"sap/fe/core/type/EDM\";\nimport TypeUtil from \"sap/fe/core/type/TypeUtil\";\nimport MacrosDelegateUtil from \"sap/fe/macros/DelegateUtil\";\nimport ODataMetaModelUtil, { type SortRestrictionsInfoType } from \"sap/fe/macros/ODataMetaModelUtil\";\nimport type Event from \"sap/ui/base/Event\";\nimport type ManagedObject from \"sap/ui/base/ManagedObject\";\nimport Core from \"sap/ui/core/Core\";\nimport TableDelegate from \"sap/ui/mdc/odata/v4/TableDelegate\";\nimport DelegateUtil from \"sap/ui/mdc/odata/v4/util/DelegateUtil\";\nimport type Table from \"sap/ui/mdc/Table\";\nimport FilterUtil from \"sap/ui/mdc/util/FilterUtil\";\nimport MDCTable from \"sap/ui/mdc/valuehelp/content/MDCTable\";\nimport Filter from \"sap/ui/model/Filter\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport Sorter from \"sap/ui/model/Sorter\";\nimport { V4Context } from \"types/extension_types\";\n\nexport type ValueHelpTableColumn = {\n\tname: string;\n\tpropertyInfos?: string[];\n\tsortable?: boolean;\n\tpath?: string;\n\tlabel?: string;\n\tfilterable?: boolean;\n\ttypeConfig?: Object;\n\tmaxConditions?: number;\n};\ntype ComplexPropertyMap = Record<string, Property>;\n\n/**\n * Test delegate for OData V4.\n */\nconst ODataTableDelegate = Object.assign({}, TableDelegate);\n\nODataTableDelegate.fetchProperties = function (table: Table) {\n\tconst model = this._getModel(table);\n\tlet createPropertyInfos;\n\tif (!model) {\n\t\tcreatePropertyInfos = new Promise((resolve) => {\n\t\t\ttable.attachModelContextChange(\n\t\t\t\t{\n\t\t\t\t\tresolver: resolve\n\t\t\t\t},\n\t\t\t\tonModelContextChange as any,\n\t\t\t\tthis\n\t\t\t);\n\t\t}).then((oSubModel) => {\n\t\t\treturn this._createPropertyInfos(table, oSubModel);\n\t\t});\n\t} else {\n\t\tcreatePropertyInfos = this._createPropertyInfos(table, model);\n\t}\n\n\treturn createPropertyInfos.then(function (properties: any) {\n\t\tMacrosDelegateUtil.setCachedProperties(table, properties);\n\t\t(table.getBindingContext(\"internal\") as V4Context).setProperty(\"tablePropertiesAvailable\", true);\n\t\treturn properties;\n\t});\n};\n\nODataTableDelegate.createInternalBindingContext = function (table: Table) {\n\tlet dialog: ManagedObject | null = table;\n\twhile (dialog && !dialog.isA(\"sap.ui.mdc.valuehelp.Dialog\")) {\n\t\tdialog = (dialog as ManagedObject).getParent();\n\t}\n\tif (dialog) {\n\t\tconst internalModel = table.getModel(\"internal\");\n\t\tconst newInternalBindingContextPath = dialog.getBindingContext(\"internal\")!.getPath() + `::VHDialog::${dialog.getId()}::table`;\n\t\tconst newInternalBindingContext = internalModel.bindContext(newInternalBindingContextPath).getBoundContext();\n\t\ttable.setBindingContext(newInternalBindingContext!, \"internal\");\n\t}\n};\n\nfunction onModelContextChange(this: typeof ODataTableDelegate, event: Event, data: any) {\n\tconst table = event.getSource() as Table;\n\tODataTableDelegate.createInternalBindingContext(table);\n\tconst model = this._getModel(table);\n\n\tif (model) {\n\t\ttable.detachModelContextChange(onModelContextChange as any);\n\t\tdata.resolver(model);\n\t}\n}\n/**\n * Collect related properties from a property's annotations.\n *\n * @param dataModelPropertyPath The model object path of the property.\n * @returns The related properties that were identified.\n */\nfunction _collectRelatedProperties(dataModelPropertyPath: DataModelObjectPath) {\n\tconst dataModelAdditionalPropertyPath = _getAdditionalProperty(dataModelPropertyPath);\n\tconst relatedProperties: ComplexPropertyMap = {};\n\tif (dataModelAdditionalPropertyPath?.targetObject) {\n\t\tconst additionalProperty = dataModelAdditionalPropertyPath.targetObject;\n\t\tconst additionalPropertyPath = getTargetObjectPath(dataModelAdditionalPropertyPath, true);\n\n\t\tconst property = dataModelPropertyPath.targetObject as Property;\n\t\tconst propertyPath = getTargetObjectPath(dataModelPropertyPath, true);\n\n\t\tconst textAnnotation = property.annotations?.Common?.Text,\n\t\t\ttextArrangement = textAnnotation?.annotations?.UI?.TextArrangement?.toString(),\n\t\t\tdisplayMode = textAnnotation && textArrangement && getDisplayMode(property);\n\n\t\tif (displayMode === \"Description\") {\n\t\t\trelatedProperties[additionalPropertyPath] = additionalProperty;\n\t\t} else if ((displayMode && displayMode !== \"Value\") || !textAnnotation) {\n\t\t\trelatedProperties[propertyPath] = property;\n\t\t\trelatedProperties[additionalPropertyPath] = additionalProperty;\n\t\t}\n\t}\n\treturn relatedProperties;\n}\n\nODataTableDelegate._createPropertyInfos = function (oTable: any, oModel: any) {\n\tconst oMetadataInfo = oTable.getDelegate().payload;\n\tconst aProperties: ValueHelpTableColumn[] = [];\n\tconst sEntitySetPath = `/${oMetadataInfo.collectionName}`;\n\tconst oMetaModel = oModel.getMetaModel();\n\n\treturn oMetaModel.requestObject(`${sEntitySetPath}@`).then(function (mEntitySetAnnotations: any) {\n\t\tconst oSortRestrictionsInfo = ODataMetaModelUtil.getSortRestrictionsInfo(mEntitySetAnnotations);\n\t\tconst oFilterRestrictions = mEntitySetAnnotations[\"@Org.OData.Capabilities.V1.FilterRestrictions\"];\n\t\tconst oFilterRestrictionsInfo = ODataMetaModelUtil.getFilterRestrictionsInfo(oFilterRestrictions);\n\n\t\tconst customDataForColumns = MacrosDelegateUtil.getCustomData(oTable, \"columns\");\n\t\tconst propertiesToBeCreated: Record<string, Property> = {};\n\t\tconst dataModelEntityPath = getInvolvedDataModelObjects(oTable.getModel().getMetaModel().getContext(sEntitySetPath));\n\t\tcustomDataForColumns.customData.forEach(function (columnDef: any) {\n\t\t\tconst oPropertyInfo: ValueHelpTableColumn = {\n\t\t\t\tname: columnDef.path,\n\t\t\t\tlabel: columnDef.label,\n\t\t\t\tsortable: _isSortableProperty(oSortRestrictionsInfo, columnDef),\n\t\t\t\tfilterable: _isFilterableProperty(oFilterRestrictionsInfo, columnDef),\n\t\t\t\tmaxConditions: _getPropertyMaxConditions(oFilterRestrictionsInfo, columnDef),\n\t\t\t\ttypeConfig: isTypeFilterable(columnDef.$Type) ? oTable.getTypeUtil().getTypeConfig(columnDef.$Type) : undefined\n\t\t\t};\n\n\t\t\tconst dataModelPropertyPath = enhanceDataModelPath(dataModelEntityPath, columnDef.path);\n\t\t\tconst property = dataModelPropertyPath.targetObject as Property;\n\t\t\tif (property) {\n\t\t\t\tconst targetPropertyPath = getTargetObjectPath(dataModelPropertyPath, true);\n\t\t\t\tlet oTypeConfig;\n\t\t\t\tif (isTypeFilterable(property.type as keyof typeof DefaultTypeForEdmType)) {\n\t\t\t\t\tconst propertyTypeConfig = fetchTypeConfig(property);\n\t\t\t\t\toTypeConfig =\n\t\t\t\t\t\tTypeUtil.getTypeConfig(propertyTypeConfig.type, propertyTypeConfig.formatOptions, propertyTypeConfig.constraints) ??\n\t\t\t\t\t\toTable.getTypeUtil().getTypeConfig(columnDef.$Type);\n\t\t\t\t}\n\t\t\t\t//Check if there is an additional property linked to the property as a Unit, Currency, Timezone or textArrangement\n\t\t\t\tconst relatedPropertiesInfo = _collectRelatedProperties(dataModelPropertyPath);\n\t\t\t\tconst relatedPropertyPaths: string[] = Object.keys(relatedPropertiesInfo);\n\n\t\t\t\tif (relatedPropertyPaths.length) {\n\t\t\t\t\toPropertyInfo.propertyInfos = relatedPropertyPaths;\n\t\t\t\t\t//Complex properties must be hidden for sorting and filtering\n\t\t\t\t\toPropertyInfo.sortable = false;\n\t\t\t\t\toPropertyInfo.filterable = false;\n\t\t\t\t\t// Collect information of related columns to be created.\n\t\t\t\t\trelatedPropertyPaths.forEach((path) => {\n\t\t\t\t\t\tpropertiesToBeCreated[path] = relatedPropertiesInfo[path];\n\t\t\t\t\t});\n\t\t\t\t\t// Also add property for the inOut Parameters on the ValueHelp when textArrangement is set to #TextOnly\n\t\t\t\t\t// It will not be linked to the complex Property (BCP 2270141154)\n\t\t\t\t\tif (!relatedPropertyPaths.find((path) => relatedPropertiesInfo[path] === property)) {\n\t\t\t\t\t\tpropertiesToBeCreated[targetPropertyPath] = property;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\toPropertyInfo.path = columnDef.path;\n\t\t\t\t}\n\t\t\t\toPropertyInfo.typeConfig = oPropertyInfo.typeConfig ? oTypeConfig : undefined;\n\t\t\t} else {\n\t\t\t\toPropertyInfo.path = columnDef.path;\n\t\t\t}\n\t\t\taProperties.push(oPropertyInfo);\n\t\t});\n\t\tconst relatedColumns = _createRelatedProperties(propertiesToBeCreated, aProperties, oSortRestrictionsInfo, oFilterRestrictionsInfo);\n\t\treturn aProperties.concat(relatedColumns);\n\t});\n};\n\n/**\n * Updates the binding info with the relevant path and model from the metadata.\n *\n * @param oMDCTable The MDCTable instance\n * @param oBindingInfo The bindingInfo of the table\n */\nODataTableDelegate.updateBindingInfo = function (oMDCTable: any, oBindingInfo: any) {\n\tTableDelegate.updateBindingInfo.apply(this, [oMDCTable, oBindingInfo]);\n\tif (!oMDCTable) {\n\t\treturn;\n\t}\n\n\tconst oMetadataInfo = oMDCTable.getDelegate().payload;\n\n\tif (oMetadataInfo && oBindingInfo) {\n\t\toBindingInfo.path = oBindingInfo.path || oMetadataInfo.collectionPath || `/${oMetadataInfo.collectionName}`;\n\t\toBindingInfo.model = oBindingInfo.model || oMetadataInfo.model;\n\t}\n\n\tif (!oBindingInfo) {\n\t\toBindingInfo = {};\n\t}\n\n\tconst oFilter = Core.byId(oMDCTable.getFilter()) as any,\n\t\tbFilterEnabled = oMDCTable.isFilteringEnabled();\n\tlet mConditions: any;\n\tlet oInnerFilterInfo, oOuterFilterInfo: any;\n\tconst aFilters = [];\n\tconst tableProperties = MacrosDelegateUtil.getCachedProperties(oMDCTable);\n\n\t//TODO: consider a mechanism ('FilterMergeUtil' or enhance 'FilterUtil') to allow the connection between different filters)\n\tif (bFilterEnabled) {\n\t\tmConditions = oMDCTable.getConditions();\n\t\toInnerFilterInfo = FilterUtil.getFilterInfo(oMDCTable, mConditions, tableProperties!, []) as any;\n\t\tif (oInnerFilterInfo.filters) {\n\t\t\taFilters.push(oInnerFilterInfo.filters);\n\t\t}\n\t}\n\n\tif (oFilter) {\n\t\tmConditions = oFilter.getConditions();\n\t\tif (mConditions) {\n\t\t\tconst aParameterNames = DelegateUtil.getParameterNames(oFilter);\n\t\t\t// The table properties needs to updated with the filter field if no Selectionfierlds are annotated and not part as value help parameter\n\t\t\tODataTableDelegate._updatePropertyInfo(tableProperties, oMDCTable, mConditions, oMetadataInfo);\n\t\t\toOuterFilterInfo = FilterUtil.getFilterInfo(oFilter, mConditions, tableProperties!, aParameterNames);\n\n\t\t\tif (oOuterFilterInfo.filters) {\n\t\t\t\taFilters.push(oOuterFilterInfo.filters);\n\t\t\t}\n\n\t\t\tconst sParameterPath = DelegateUtil.getParametersInfo(oFilter, mConditions);\n\t\t\tif (sParameterPath) {\n\t\t\t\toBindingInfo.path = sParameterPath;\n\t\t\t}\n\t\t}\n\n\t\t// get the basic search\n\t\toBindingInfo.parameters.$search = CommonUtils.normalizeSearchTerm(oFilter.getSearch()) || undefined;\n\t}\n\n\tthis._applyDefaultSorting(oBindingInfo, oMDCTable.getDelegate().payload);\n\t// add select to oBindingInfo (BCP 2170163012)\n\toBindingInfo.parameters.$select = tableProperties?.reduce(function (sQuery: string, oProperty: any) {\n\t\t// Navigation properties (represented by X/Y) should not be added to $select.\n\t\t// ToDo : They should be added as $expand=X($select=Y) instead\n\t\tif (oProperty.path && oProperty.path.indexOf(\"/\") === -1) {\n\t\t\tsQuery = sQuery ? `${sQuery},${oProperty.path}` : oProperty.path;\n\t\t}\n\t\treturn sQuery;\n\t}, \"\");\n\n\t// Add $count\n\toBindingInfo.parameters.$count = true;\n\n\t//If the entity is DraftEnabled add a DraftFilter\n\tif (ModelHelper.isDraftSupported(oMDCTable.getModel().getMetaModel(), oBindingInfo.path)) {\n\t\taFilters.push(new Filter(\"IsActiveEntity\", FilterOperator.EQ, true));\n\t}\n\n\toBindingInfo.filters = new Filter(aFilters, true);\n};\n\nODataTableDelegate.getTypeUtil = function (/*oPayload*/) {\n\treturn TypeUtil;\n};\n\nODataTableDelegate._getModel = function (oTable: Table) {\n\tconst oMetadataInfo = (oTable.getDelegate() as any).payload;\n\treturn oTable.getModel(oMetadataInfo.model);\n};\n\n/**\n * Applies a default sort order if needed. This is only the case if the request is not a $search request\n * (means the parameter $search of the bindingInfo is undefined) and if not already a sort order is set,\n * e.g. via presentation variant or manual by the user.\n *\n * @param oBindingInfo The bindingInfo of the table\n * @param oPayload The payload of the TableDelegate\n */\nODataTableDelegate._applyDefaultSorting = function (oBindingInfo: any, oPayload: any) {\n\tif (oBindingInfo.parameters && oBindingInfo.parameters.$search == undefined && oBindingInfo.sorter && oBindingInfo.sorter.length == 0) {\n\t\tconst defaultSortPropertyName = oPayload ? oPayload.defaultSortPropertyName : undefined;\n\t\tif (defaultSortPropertyName) {\n\t\t\toBindingInfo.sorter.push(new Sorter(defaultSortPropertyName, false));\n\t\t}\n\t}\n};\n\n/**\n * Updates the table properties with filter field infos.\n *\n * @param aTableProperties Array with table properties\n * @param oMDCTable The MDCTable instance\n * @param mConditions The conditions of the table\n * @param oMetadataInfo The metadata info of the filter field\n */\nODataTableDelegate._updatePropertyInfo = function (\n\taTableProperties: any[],\n\toMDCTable: MDCTable,\n\tmConditions: Record<string, any>,\n\toMetadataInfo: any\n) {\n\tconst aConditionKey = Object.keys(mConditions),\n\t\toMetaModel = oMDCTable.getModel().getMetaModel()!;\n\taConditionKey.forEach(function (conditionKey: any) {\n\t\tif (\n\t\t\taTableProperties.findIndex(function (tableProperty: any) {\n\t\t\t\treturn tableProperty.path === conditionKey;\n\t\t\t}) === -1\n\t\t) {\n\t\t\tconst oColumnDef = {\n\t\t\t\tpath: conditionKey,\n\t\t\t\ttypeConfig: oMDCTable\n\t\t\t\t\t.getTypeUtil()\n\t\t\t\t\t.getTypeConfig(oMetaModel.getObject(`/${oMetadataInfo.collectionName}/${conditionKey}`).$Type)\n\t\t\t};\n\t\t\taTableProperties.push(oColumnDef);\n\t\t}\n\t});\n};\n\nODataTableDelegate.updateBinding = function (oTable: any, oBindingInfo: any, oBinding: any) {\n\tlet bNeedManualRefresh = false;\n\tconst oInternalBindingContext = oTable.getBindingContext(\"internal\");\n\tconst sManualUpdatePropertyKey = \"pendingManualBindingUpdate\";\n\tconst bPendingManualUpdate = oInternalBindingContext?.getProperty(sManualUpdatePropertyKey);\n\tlet oRowBinding = oTable.getRowBinding();\n\n\t//oBinding=null means that a rebinding needs to be forced via updateBinding in mdc TableDelegate\n\tTableDelegate.updateBinding.apply(ODataTableDelegate, [oTable, oBindingInfo, oBinding]);\n\t//get row binding after rebind from TableDelegate.updateBinding in case oBinding was null\n\tif (!oRowBinding) {\n\t\toRowBinding = oTable.getRowBinding();\n\t}\n\tif (oRowBinding) {\n\t\t/**\n\t\t * Manual refresh if filters are not changed by binding.refresh() since updating the bindingInfo\n\t\t * is not enough to trigger a batch request.\n\t\t * Removing columns creates one batch request that was not executed before\n\t\t */\n\t\tconst oldFilters = oRowBinding.getFilters(\"Application\");\n\t\tbNeedManualRefresh =\n\t\t\tdeepEqual(oBindingInfo.filters, oldFilters[0]) &&\n\t\t\toRowBinding.getQueryOptionsFromParameters().$search === oBindingInfo.parameters.$search &&\n\t\t\t!bPendingManualUpdate;\n\t}\n\n\tif (bNeedManualRefresh && oTable.getFilter()) {\n\t\toInternalBindingContext?.setProperty(sManualUpdatePropertyKey, true);\n\t\toRowBinding\n\t\t\t.requestRefresh(oRowBinding.getGroupId())\n\t\t\t.finally(function () {\n\t\t\t\toInternalBindingContext?.setProperty(sManualUpdatePropertyKey, false);\n\t\t\t})\n\t\t\t.catch(function (oError: any) {\n\t\t\t\tLog.error(\"Error while refreshing a filterBar VH table\", oError);\n\t\t\t});\n\t}\n\toTable.fireEvent(\"bindingUpdated\");\n\t//no need to check for semantic targets here since we are in a VH and don't want to allow further navigation\n};\n\n/**\n * Creates a simple property for each identified complex property.\n *\n * @param propertiesToBeCreated Identified properties.\n * @param existingColumns The list of columns created for properties defined on the Value List.\n * @param oSortRestrictionsInfo An object containing the sort restriction information\n * @param oFilterRestrictionsInfo An object containing the filter restriction information\n * @returns The array of properties created.\n */\nfunction _createRelatedProperties(\n\tpropertiesToBeCreated: Record<string, Property>,\n\texistingColumns: ValueHelpTableColumn[],\n\toSortRestrictionsInfo: any,\n\toFilterRestrictionsInfo: any\n): ValueHelpTableColumn[] {\n\tconst relatedPropertyNameMap: Record<string, string> = {},\n\t\trelatedColumns: ValueHelpTableColumn[] = [];\n\tObject.keys(propertiesToBeCreated).forEach((path) => {\n\t\tconst property = propertiesToBeCreated[path],\n\t\t\trelatedColumn = existingColumns.find((column) => column.path === path); // Complex properties doesn't get path so only simple column are found\n\t\tif (!relatedColumn) {\n\t\t\tconst newName = `Property::${path}`;\n\t\t\trelatedPropertyNameMap[path] = newName;\n\t\t\tconst valueHelpTableColumn: ValueHelpTableColumn = {\n\t\t\t\tname: newName,\n\t\t\t\tlabel: getLabel(property),\n\t\t\t\tpath: path,\n\t\t\t\tsortable: _isSortableProperty(oSortRestrictionsInfo, property),\n\t\t\t\tfilterable: _isFilterableProperty(oFilterRestrictionsInfo, property)\n\t\t\t};\n\t\t\tvalueHelpTableColumn.maxConditions = _getPropertyMaxConditions(oFilterRestrictionsInfo, valueHelpTableColumn);\n\t\t\tif (isTypeFilterable(property.type as keyof typeof DefaultTypeForEdmType)) {\n\t\t\t\tconst propertyTypeConfig = fetchTypeConfig(property);\n\t\t\t\tvalueHelpTableColumn.typeConfig = TypeUtil.getTypeConfig(\n\t\t\t\t\tpropertyTypeConfig.type,\n\t\t\t\t\tpropertyTypeConfig.formatOptions,\n\t\t\t\t\tpropertyTypeConfig.constraints\n\t\t\t\t);\n\t\t\t}\n\t\t\trelatedColumns.push(valueHelpTableColumn);\n\t\t}\n\t});\n\t// The property 'name' has been prefixed with 'Property::' for uniqueness.\n\t// Update the same in other propertyInfos[] references which point to this property.\n\texistingColumns.forEach((column) => {\n\t\tif (column.propertyInfos) {\n\t\t\tcolumn.propertyInfos = column.propertyInfos?.map((columnName) => relatedPropertyNameMap[columnName] ?? columnName);\n\t\t}\n\t});\n\treturn relatedColumns;\n}\n/**\n * Identifies if the given property is sortable based on the sort restriction information.\n *\n * @param sortRestrictionsInfo The sort restriction information from the restriction annotation.\n * @param property The target property.\n * @returns `true` if the given property is sortable.\n */\nfunction _isSortableProperty(sortRestrictionsInfo: SortRestrictionsInfoType, property: ValueHelpTableColumn): boolean | undefined {\n\treturn property.path && sortRestrictionsInfo.propertyInfo[property.path]\n\t\t? sortRestrictionsInfo.propertyInfo[property.path].sortable\n\t\t: property.sortable;\n}\n\n/**\n * Identifies if the given property is filterable based on the sort restriction information.\n *\n * @param oFilterRestrictionsInfo The filter restriction information from the restriction annotation.\n * @param property The target property.\n * @returns `true` if the given property is filterable.\n */\nfunction _isFilterableProperty(oFilterRestrictionsInfo: any, property: ValueHelpTableColumn): boolean | undefined {\n\treturn property.path && oFilterRestrictionsInfo[property.path]\n\t\t? oFilterRestrictionsInfo[property.path].filterable\n\t\t: property.filterable;\n}\n\n/**\n * Identifies the maxConditions for a given property.\n *\n * @param oFilterRestrictionsInfo The filter restriction information from the restriction annotation.\n * @param valueHelpColumn The target property.\n * @returns `-1` or `1` if the property is a MultiValueFilterExpression.\n */\nfunction _getPropertyMaxConditions(oFilterRestrictionsInfo: any, valueHelpColumn: ValueHelpTableColumn): number {\n\treturn valueHelpColumn.path &&\n\t\tODataMetaModelUtil.isMultiValueFilterExpression(oFilterRestrictionsInfo.propertyInfo[valueHelpColumn.path])\n\t\t? -1\n\t\t: 1;\n}\n\n/**\n * Identifies the additional property which references to the unit, timezone, textArrangement or currency.\n *\n * @param dataModelPropertyPath The model object path of the property.\n * @returns The additional property.\n */\n\nfunction _getAdditionalProperty(dataModelPropertyPath: DataModelObjectPath): DataModelObjectPath | undefined {\n\tconst oProperty = dataModelPropertyPath.targetObject;\n\tconst additionalPropertyPath =\n\t\tgetAssociatedTextPropertyPath(oProperty) ||\n\t\tgetAssociatedCurrencyPropertyPath(oProperty) ||\n\t\tgetAssociatedUnitPropertyPath(oProperty) ||\n\t\tgetAssociatedTimezonePropertyPath(oProperty);\n\tif (!additionalPropertyPath) {\n\t\treturn undefined;\n\t}\n\tconst dataModelAdditionalProperty = enhanceDataModelPath(dataModelPropertyPath, additionalPropertyPath);\n\n\t//Additional Property could refer to a navigation property, keep the name and path as navigation property\n\tconst additionalProperty = dataModelAdditionalProperty.targetObject;\n\tif (!additionalProperty) {\n\t\treturn undefined;\n\t}\n\treturn dataModelAdditionalProperty;\n}\n\nexport default ODataTableDelegate;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;EA6CA;AACA;AACA;EACA,MAAMA,kBAAkB,GAAGC,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEC,aAAa,CAAC;EAE3DH,kBAAkB,CAACI,eAAe,GAAG,UAAUC,KAAY,EAAE;IAC5D,MAAMC,KAAK,GAAG,IAAI,CAACC,SAAS,CAACF,KAAK,CAAC;IACnC,IAAIG,mBAAmB;IACvB,IAAI,CAACF,KAAK,EAAE;MACXE,mBAAmB,GAAG,IAAIC,OAAO,CAAEC,OAAO,IAAK;QAC9CL,KAAK,CAACM,wBAAwB,CAC7B;UACCC,QAAQ,EAAEF;QACX,CAAC,EACDG,oBAAoB,EACpB,IAAI,CACJ;MACF,CAAC,CAAC,CAACC,IAAI,CAAEC,SAAS,IAAK;QACtB,OAAO,IAAI,CAACC,oBAAoB,CAACX,KAAK,EAAEU,SAAS,CAAC;MACnD,CAAC,CAAC;IACH,CAAC,MAAM;MACNP,mBAAmB,GAAG,IAAI,CAACQ,oBAAoB,CAACX,KAAK,EAAEC,KAAK,CAAC;IAC9D;IAEA,OAAOE,mBAAmB,CAACM,IAAI,CAAC,UAAUG,UAAe,EAAE;MAC1DC,kBAAkB,CAACC,mBAAmB,CAACd,KAAK,EAAEY,UAAU,CAAC;MACxDZ,KAAK,CAACe,iBAAiB,CAAC,UAAU,CAAC,CAAeC,WAAW,CAAC,0BAA0B,EAAE,IAAI,CAAC;MAChG,OAAOJ,UAAU;IAClB,CAAC,CAAC;EACH,CAAC;EAEDjB,kBAAkB,CAACsB,4BAA4B,GAAG,UAAUjB,KAAY,EAAE;IACzE,IAAIkB,MAA4B,GAAGlB,KAAK;IACxC,OAAOkB,MAAM,IAAI,CAACA,MAAM,CAACC,GAAG,CAAC,6BAA6B,CAAC,EAAE;MAC5DD,MAAM,GAAIA,MAAM,CAAmBE,SAAS,EAAE;IAC/C;IACA,IAAIF,MAAM,EAAE;MACX,MAAMG,aAAa,GAAGrB,KAAK,CAACsB,QAAQ,CAAC,UAAU,CAAC;MAChD,MAAMC,6BAA6B,GAAGL,MAAM,CAACH,iBAAiB,CAAC,UAAU,CAAC,CAAES,OAAO,EAAE,GAAI,eAAcN,MAAM,CAACO,KAAK,EAAG,SAAQ;MAC9H,MAAMC,yBAAyB,GAAGL,aAAa,CAACM,WAAW,CAACJ,6BAA6B,CAAC,CAACK,eAAe,EAAE;MAC5G5B,KAAK,CAAC6B,iBAAiB,CAACH,yBAAyB,EAAG,UAAU,CAAC;IAChE;EACD,CAAC;EAED,SAASlB,oBAAoB,CAAkCsB,KAAY,EAAEC,IAAS,EAAE;IACvF,MAAM/B,KAAK,GAAG8B,KAAK,CAACE,SAAS,EAAW;IACxCrC,kBAAkB,CAACsB,4BAA4B,CAACjB,KAAK,CAAC;IACtD,MAAMC,KAAK,GAAG,IAAI,CAACC,SAAS,CAACF,KAAK,CAAC;IAEnC,IAAIC,KAAK,EAAE;MACVD,KAAK,CAACiC,wBAAwB,CAACzB,oBAAoB,CAAQ;MAC3DuB,IAAI,CAACxB,QAAQ,CAACN,KAAK,CAAC;IACrB;EACD;EACA;AACA;AACA;AACA;AACA;AACA;EACA,SAASiC,yBAAyB,CAACC,qBAA0C,EAAE;IAC9E,MAAMC,+BAA+B,GAAGC,sBAAsB,CAACF,qBAAqB,CAAC;IACrF,MAAMG,iBAAqC,GAAG,CAAC,CAAC;IAChD,IAAIF,+BAA+B,aAA/BA,+BAA+B,eAA/BA,+BAA+B,CAAEG,YAAY,EAAE;MAAA;MAClD,MAAMC,kBAAkB,GAAGJ,+BAA+B,CAACG,YAAY;MACvE,MAAME,sBAAsB,GAAGC,mBAAmB,CAACN,+BAA+B,EAAE,IAAI,CAAC;MAEzF,MAAMO,QAAQ,GAAGR,qBAAqB,CAACI,YAAwB;MAC/D,MAAMK,YAAY,GAAGF,mBAAmB,CAACP,qBAAqB,EAAE,IAAI,CAAC;MAErE,MAAMU,cAAc,4BAAGF,QAAQ,CAACG,WAAW,oFAApB,sBAAsBC,MAAM,2DAA5B,uBAA8BC,IAAI;QACxDC,eAAe,GAAGJ,cAAc,aAAdA,cAAc,gDAAdA,cAAc,CAAEC,WAAW,oFAA3B,sBAA6BI,EAAE,qFAA/B,uBAAiCC,eAAe,2DAAhD,uBAAkDC,QAAQ,EAAE;QAC9EC,WAAW,GAAGR,cAAc,IAAII,eAAe,IAAIK,cAAc,CAACX,QAAQ,CAAC;MAE5E,IAAIU,WAAW,KAAK,aAAa,EAAE;QAClCf,iBAAiB,CAACG,sBAAsB,CAAC,GAAGD,kBAAkB;MAC/D,CAAC,MAAM,IAAKa,WAAW,IAAIA,WAAW,KAAK,OAAO,IAAK,CAACR,cAAc,EAAE;QACvEP,iBAAiB,CAACM,YAAY,CAAC,GAAGD,QAAQ;QAC1CL,iBAAiB,CAACG,sBAAsB,CAAC,GAAGD,kBAAkB;MAC/D;IACD;IACA,OAAOF,iBAAiB;EACzB;EAEA3C,kBAAkB,CAACgB,oBAAoB,GAAG,UAAU4C,MAAW,EAAEC,MAAW,EAAE;IAC7E,MAAMC,aAAa,GAAGF,MAAM,CAACG,WAAW,EAAE,CAACC,OAAO;IAClD,MAAMC,WAAmC,GAAG,EAAE;IAC9C,MAAMC,cAAc,GAAI,IAAGJ,aAAa,CAACK,cAAe,EAAC;IACzD,MAAMC,UAAU,GAAGP,MAAM,CAACQ,YAAY,EAAE;IAExC,OAAOD,UAAU,CAACE,aAAa,CAAE,GAAEJ,cAAe,GAAE,CAAC,CAACpD,IAAI,CAAC,UAAUyD,qBAA0B,EAAE;MAChG,MAAMC,qBAAqB,GAAGC,kBAAkB,CAACC,uBAAuB,CAACH,qBAAqB,CAAC;MAC/F,MAAMI,mBAAmB,GAAGJ,qBAAqB,CAAC,+CAA+C,CAAC;MAClG,MAAMK,uBAAuB,GAAGH,kBAAkB,CAACI,yBAAyB,CAACF,mBAAmB,CAAC;MAEjG,MAAMG,oBAAoB,GAAG5D,kBAAkB,CAAC6D,aAAa,CAACnB,MAAM,EAAE,SAAS,CAAC;MAChF,MAAMoB,qBAA+C,GAAG,CAAC,CAAC;MAC1D,MAAMC,mBAAmB,GAAGC,2BAA2B,CAACtB,MAAM,CAACjC,QAAQ,EAAE,CAAC0C,YAAY,EAAE,CAACc,UAAU,CAACjB,cAAc,CAAC,CAAC;MACpHY,oBAAoB,CAACM,UAAU,CAACC,OAAO,CAAC,UAAUC,SAAc,EAAE;QACjE,MAAMC,aAAmC,GAAG;UAC3CC,IAAI,EAAEF,SAAS,CAACG,IAAI;UACpBC,KAAK,EAAEJ,SAAS,CAACI,KAAK;UACtBC,QAAQ,EAAEC,mBAAmB,CAACpB,qBAAqB,EAAEc,SAAS,CAAC;UAC/DO,UAAU,EAAEC,qBAAqB,CAAClB,uBAAuB,EAAEU,SAAS,CAAC;UACrES,aAAa,EAAEC,yBAAyB,CAACpB,uBAAuB,EAAEU,SAAS,CAAC;UAC5EW,UAAU,EAAEC,gBAAgB,CAACZ,SAAS,CAACa,KAAK,CAAC,GAAGvC,MAAM,CAACwC,WAAW,EAAE,CAACC,aAAa,CAACf,SAAS,CAACa,KAAK,CAAC,GAAGG;QACvG,CAAC;QAED,MAAM9D,qBAAqB,GAAG+D,oBAAoB,CAACtB,mBAAmB,EAAEK,SAAS,CAACG,IAAI,CAAC;QACvF,MAAMzC,QAAQ,GAAGR,qBAAqB,CAACI,YAAwB;QAC/D,IAAII,QAAQ,EAAE;UACb,MAAMwD,kBAAkB,GAAGzD,mBAAmB,CAACP,qBAAqB,EAAE,IAAI,CAAC;UAC3E,IAAIiE,WAAW;UACf,IAAIP,gBAAgB,CAAClD,QAAQ,CAAC0D,IAAI,CAAuC,EAAE;YAC1E,MAAMC,kBAAkB,GAAGC,eAAe,CAAC5D,QAAQ,CAAC;YACpDyD,WAAW,GACVI,QAAQ,CAACR,aAAa,CAACM,kBAAkB,CAACD,IAAI,EAAEC,kBAAkB,CAACG,aAAa,EAAEH,kBAAkB,CAACI,WAAW,CAAC,IACjHnD,MAAM,CAACwC,WAAW,EAAE,CAACC,aAAa,CAACf,SAAS,CAACa,KAAK,CAAC;UACrD;UACA;UACA,MAAMa,qBAAqB,GAAGzE,yBAAyB,CAACC,qBAAqB,CAAC;UAC9E,MAAMyE,oBAA8B,GAAGhH,MAAM,CAACiH,IAAI,CAACF,qBAAqB,CAAC;UAEzE,IAAIC,oBAAoB,CAACE,MAAM,EAAE;YAChC5B,aAAa,CAAC6B,aAAa,GAAGH,oBAAoB;YAClD;YACA1B,aAAa,CAACI,QAAQ,GAAG,KAAK;YAC9BJ,aAAa,CAACM,UAAU,GAAG,KAAK;YAChC;YACAoB,oBAAoB,CAAC5B,OAAO,CAAEI,IAAI,IAAK;cACtCT,qBAAqB,CAACS,IAAI,CAAC,GAAGuB,qBAAqB,CAACvB,IAAI,CAAC;YAC1D,CAAC,CAAC;YACF;YACA;YACA,IAAI,CAACwB,oBAAoB,CAACI,IAAI,CAAE5B,IAAI,IAAKuB,qBAAqB,CAACvB,IAAI,CAAC,KAAKzC,QAAQ,CAAC,EAAE;cACnFgC,qBAAqB,CAACwB,kBAAkB,CAAC,GAAGxD,QAAQ;YACrD;UACD,CAAC,MAAM;YACNuC,aAAa,CAACE,IAAI,GAAGH,SAAS,CAACG,IAAI;UACpC;UACAF,aAAa,CAACU,UAAU,GAAGV,aAAa,CAACU,UAAU,GAAGQ,WAAW,GAAGH,SAAS;QAC9E,CAAC,MAAM;UACNf,aAAa,CAACE,IAAI,GAAGH,SAAS,CAACG,IAAI;QACpC;QACAxB,WAAW,CAACqD,IAAI,CAAC/B,aAAa,CAAC;MAChC,CAAC,CAAC;MACF,MAAMgC,cAAc,GAAGC,wBAAwB,CAACxC,qBAAqB,EAAEf,WAAW,EAAEO,qBAAqB,EAAEI,uBAAuB,CAAC;MACnI,OAAOX,WAAW,CAACwD,MAAM,CAACF,cAAc,CAAC;IAC1C,CAAC,CAAC;EACH,CAAC;;EAED;AACA;AACA;AACA;AACA;AACA;EACAvH,kBAAkB,CAAC0H,iBAAiB,GAAG,UAAUC,SAAc,EAAEC,YAAiB,EAAE;IACnFzH,aAAa,CAACuH,iBAAiB,CAACG,KAAK,CAAC,IAAI,EAAE,CAACF,SAAS,EAAEC,YAAY,CAAC,CAAC;IACtE,IAAI,CAACD,SAAS,EAAE;MACf;IACD;IAEA,MAAM7D,aAAa,GAAG6D,SAAS,CAAC5D,WAAW,EAAE,CAACC,OAAO;IAErD,IAAIF,aAAa,IAAI8D,YAAY,EAAE;MAClCA,YAAY,CAACnC,IAAI,GAAGmC,YAAY,CAACnC,IAAI,IAAI3B,aAAa,CAACgE,cAAc,IAAK,IAAGhE,aAAa,CAACK,cAAe,EAAC;MAC3GyD,YAAY,CAACtH,KAAK,GAAGsH,YAAY,CAACtH,KAAK,IAAIwD,aAAa,CAACxD,KAAK;IAC/D;IAEA,IAAI,CAACsH,YAAY,EAAE;MAClBA,YAAY,GAAG,CAAC,CAAC;IAClB;IAEA,MAAMG,OAAO,GAAGC,IAAI,CAACC,IAAI,CAACN,SAAS,CAACO,SAAS,EAAE,CAAQ;MACtDC,cAAc,GAAGR,SAAS,CAACS,kBAAkB,EAAE;IAChD,IAAIC,WAAgB;IACpB,IAAIC,gBAAgB,EAAEC,gBAAqB;IAC3C,MAAMC,QAAQ,GAAG,EAAE;IACnB,MAAMC,eAAe,GAAGvH,kBAAkB,CAACwH,mBAAmB,CAACf,SAAS,CAAC;;IAEzE;IACA,IAAIQ,cAAc,EAAE;MACnBE,WAAW,GAAGV,SAAS,CAACgB,aAAa,EAAE;MACvCL,gBAAgB,GAAGM,UAAU,CAACC,aAAa,CAAClB,SAAS,EAAEU,WAAW,EAAEI,eAAe,EAAG,EAAE,CAAQ;MAChG,IAAIH,gBAAgB,CAACQ,OAAO,EAAE;QAC7BN,QAAQ,CAAClB,IAAI,CAACgB,gBAAgB,CAACQ,OAAO,CAAC;MACxC;IACD;IAEA,IAAIf,OAAO,EAAE;MACZM,WAAW,GAAGN,OAAO,CAACY,aAAa,EAAE;MACrC,IAAIN,WAAW,EAAE;QAChB,MAAMU,eAAe,GAAGC,YAAY,CAACC,iBAAiB,CAAClB,OAAO,CAAC;QAC/D;QACA/H,kBAAkB,CAACkJ,mBAAmB,CAACT,eAAe,EAAEd,SAAS,EAAEU,WAAW,EAAEvE,aAAa,CAAC;QAC9FyE,gBAAgB,GAAGK,UAAU,CAACC,aAAa,CAACd,OAAO,EAAEM,WAAW,EAAEI,eAAe,EAAGM,eAAe,CAAC;QAEpG,IAAIR,gBAAgB,CAACO,OAAO,EAAE;UAC7BN,QAAQ,CAAClB,IAAI,CAACiB,gBAAgB,CAACO,OAAO,CAAC;QACxC;QAEA,MAAMK,cAAc,GAAGH,YAAY,CAACI,iBAAiB,CAACrB,OAAO,EAAEM,WAAW,CAAC;QAC3E,IAAIc,cAAc,EAAE;UACnBvB,YAAY,CAACnC,IAAI,GAAG0D,cAAc;QACnC;MACD;;MAEA;MACAvB,YAAY,CAACyB,UAAU,CAACC,OAAO,GAAGC,WAAW,CAACC,mBAAmB,CAACzB,OAAO,CAAC0B,SAAS,EAAE,CAAC,IAAInD,SAAS;IACpG;IAEA,IAAI,CAACoD,oBAAoB,CAAC9B,YAAY,EAAED,SAAS,CAAC5D,WAAW,EAAE,CAACC,OAAO,CAAC;IACxE;IACA4D,YAAY,CAACyB,UAAU,CAACM,OAAO,GAAGlB,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAEmB,MAAM,CAAC,UAAUC,MAAc,EAAEC,SAAc,EAAE;MACnG;MACA;MACA,IAAIA,SAAS,CAACrE,IAAI,IAAIqE,SAAS,CAACrE,IAAI,CAACsE,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE;QACzDF,MAAM,GAAGA,MAAM,GAAI,GAAEA,MAAO,IAAGC,SAAS,CAACrE,IAAK,EAAC,GAAGqE,SAAS,CAACrE,IAAI;MACjE;MACA,OAAOoE,MAAM;IACd,CAAC,EAAE,EAAE,CAAC;;IAEN;IACAjC,YAAY,CAACyB,UAAU,CAACW,MAAM,GAAG,IAAI;;IAErC;IACA,IAAIC,WAAW,CAACC,gBAAgB,CAACvC,SAAS,CAAChG,QAAQ,EAAE,CAAC0C,YAAY,EAAE,EAAEuD,YAAY,CAACnC,IAAI,CAAC,EAAE;MACzF+C,QAAQ,CAAClB,IAAI,CAAC,IAAI6C,MAAM,CAAC,gBAAgB,EAAEC,cAAc,CAACC,EAAE,EAAE,IAAI,CAAC,CAAC;IACrE;IAEAzC,YAAY,CAACkB,OAAO,GAAG,IAAIqB,MAAM,CAAC3B,QAAQ,EAAE,IAAI,CAAC;EAClD,CAAC;EAEDxI,kBAAkB,CAACoG,WAAW,GAAG,SAAU;EAAA,GAAc;IACxD,OAAOS,QAAQ;EAChB,CAAC;EAED7G,kBAAkB,CAACO,SAAS,GAAG,UAAUqD,MAAa,EAAE;IACvD,MAAME,aAAa,GAAIF,MAAM,CAACG,WAAW,EAAE,CAASC,OAAO;IAC3D,OAAOJ,MAAM,CAACjC,QAAQ,CAACmC,aAAa,CAACxD,KAAK,CAAC;EAC5C,CAAC;;EAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACAN,kBAAkB,CAAC0J,oBAAoB,GAAG,UAAU9B,YAAiB,EAAE0C,QAAa,EAAE;IACrF,IAAI1C,YAAY,CAACyB,UAAU,IAAIzB,YAAY,CAACyB,UAAU,CAACC,OAAO,IAAIhD,SAAS,IAAIsB,YAAY,CAAC2C,MAAM,IAAI3C,YAAY,CAAC2C,MAAM,CAACpD,MAAM,IAAI,CAAC,EAAE;MACtI,MAAMqD,uBAAuB,GAAGF,QAAQ,GAAGA,QAAQ,CAACE,uBAAuB,GAAGlE,SAAS;MACvF,IAAIkE,uBAAuB,EAAE;QAC5B5C,YAAY,CAAC2C,MAAM,CAACjD,IAAI,CAAC,IAAImD,MAAM,CAACD,uBAAuB,EAAE,KAAK,CAAC,CAAC;MACrE;IACD;EACD,CAAC;;EAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACAxK,kBAAkB,CAACkJ,mBAAmB,GAAG,UACxCwB,gBAAuB,EACvB/C,SAAmB,EACnBU,WAAgC,EAChCvE,aAAkB,EACjB;IACD,MAAM6G,aAAa,GAAG1K,MAAM,CAACiH,IAAI,CAACmB,WAAW,CAAC;MAC7CjE,UAAU,GAAGuD,SAAS,CAAChG,QAAQ,EAAE,CAAC0C,YAAY,EAAG;IAClDsG,aAAa,CAACtF,OAAO,CAAC,UAAUuF,YAAiB,EAAE;MAClD,IACCF,gBAAgB,CAACG,SAAS,CAAC,UAAUC,aAAkB,EAAE;QACxD,OAAOA,aAAa,CAACrF,IAAI,KAAKmF,YAAY;MAC3C,CAAC,CAAC,KAAK,CAAC,CAAC,EACR;QACD,MAAMG,UAAU,GAAG;UAClBtF,IAAI,EAAEmF,YAAY;UAClB3E,UAAU,EAAE0B,SAAS,CACnBvB,WAAW,EAAE,CACbC,aAAa,CAACjC,UAAU,CAAC4G,SAAS,CAAE,IAAGlH,aAAa,CAACK,cAAe,IAAGyG,YAAa,EAAC,CAAC,CAACzE,KAAK;QAC/F,CAAC;QACDuE,gBAAgB,CAACpD,IAAI,CAACyD,UAAU,CAAC;MAClC;IACD,CAAC,CAAC;EACH,CAAC;EAED/K,kBAAkB,CAACiL,aAAa,GAAG,UAAUrH,MAAW,EAAEgE,YAAiB,EAAEsD,QAAa,EAAE;IAC3F,IAAIC,kBAAkB,GAAG,KAAK;IAC9B,MAAMC,uBAAuB,GAAGxH,MAAM,CAACxC,iBAAiB,CAAC,UAAU,CAAC;IACpE,MAAMiK,wBAAwB,GAAG,4BAA4B;IAC7D,MAAMC,oBAAoB,GAAGF,uBAAuB,aAAvBA,uBAAuB,uBAAvBA,uBAAuB,CAAEG,WAAW,CAACF,wBAAwB,CAAC;IAC3F,IAAIG,WAAW,GAAG5H,MAAM,CAAC6H,aAAa,EAAE;;IAExC;IACAtL,aAAa,CAAC8K,aAAa,CAACpD,KAAK,CAAC7H,kBAAkB,EAAE,CAAC4D,MAAM,EAAEgE,YAAY,EAAEsD,QAAQ,CAAC,CAAC;IACvF;IACA,IAAI,CAACM,WAAW,EAAE;MACjBA,WAAW,GAAG5H,MAAM,CAAC6H,aAAa,EAAE;IACrC;IACA,IAAID,WAAW,EAAE;MAChB;AACF;AACA;AACA;AACA;MACE,MAAME,UAAU,GAAGF,WAAW,CAACG,UAAU,CAAC,aAAa,CAAC;MACxDR,kBAAkB,GACjBS,SAAS,CAAChE,YAAY,CAACkB,OAAO,EAAE4C,UAAU,CAAC,CAAC,CAAC,CAAC,IAC9CF,WAAW,CAACK,6BAA6B,EAAE,CAACvC,OAAO,KAAK1B,YAAY,CAACyB,UAAU,CAACC,OAAO,IACvF,CAACgC,oBAAoB;IACvB;IAEA,IAAIH,kBAAkB,IAAIvH,MAAM,CAACsE,SAAS,EAAE,EAAE;MAC7CkD,uBAAuB,aAAvBA,uBAAuB,uBAAvBA,uBAAuB,CAAE/J,WAAW,CAACgK,wBAAwB,EAAE,IAAI,CAAC;MACpEG,WAAW,CACTM,cAAc,CAACN,WAAW,CAACO,UAAU,EAAE,CAAC,CACxCC,OAAO,CAAC,YAAY;QACpBZ,uBAAuB,aAAvBA,uBAAuB,uBAAvBA,uBAAuB,CAAE/J,WAAW,CAACgK,wBAAwB,EAAE,KAAK,CAAC;MACtE,CAAC,CAAC,CACDY,KAAK,CAAC,UAAUC,MAAW,EAAE;QAC7BC,GAAG,CAACC,KAAK,CAAC,6CAA6C,EAAEF,MAAM,CAAC;MACjE,CAAC,CAAC;IACJ;IACAtI,MAAM,CAACyI,SAAS,CAAC,gBAAgB,CAAC;IAClC;EACD,CAAC;;EAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA,SAAS7E,wBAAwB,CAChCxC,qBAA+C,EAC/CsH,eAAuC,EACvC9H,qBAA0B,EAC1BI,uBAA4B,EACH;IACzB,MAAM2H,sBAA8C,GAAG,CAAC,CAAC;MACxDhF,cAAsC,GAAG,EAAE;IAC5CtH,MAAM,CAACiH,IAAI,CAAClC,qBAAqB,CAAC,CAACK,OAAO,CAAEI,IAAI,IAAK;MACpD,MAAMzC,QAAQ,GAAGgC,qBAAqB,CAACS,IAAI,CAAC;QAC3C+G,aAAa,GAAGF,eAAe,CAACjF,IAAI,CAAEoF,MAAM,IAAKA,MAAM,CAAChH,IAAI,KAAKA,IAAI,CAAC,CAAC,CAAC;MACzE,IAAI,CAAC+G,aAAa,EAAE;QACnB,MAAME,OAAO,GAAI,aAAYjH,IAAK,EAAC;QACnC8G,sBAAsB,CAAC9G,IAAI,CAAC,GAAGiH,OAAO;QACtC,MAAMC,oBAA0C,GAAG;UAClDnH,IAAI,EAAEkH,OAAO;UACbhH,KAAK,EAAEkH,QAAQ,CAAC5J,QAAQ,CAAC;UACzByC,IAAI,EAAEA,IAAI;UACVE,QAAQ,EAAEC,mBAAmB,CAACpB,qBAAqB,EAAExB,QAAQ,CAAC;UAC9D6C,UAAU,EAAEC,qBAAqB,CAAClB,uBAAuB,EAAE5B,QAAQ;QACpE,CAAC;QACD2J,oBAAoB,CAAC5G,aAAa,GAAGC,yBAAyB,CAACpB,uBAAuB,EAAE+H,oBAAoB,CAAC;QAC7G,IAAIzG,gBAAgB,CAAClD,QAAQ,CAAC0D,IAAI,CAAuC,EAAE;UAC1E,MAAMC,kBAAkB,GAAGC,eAAe,CAAC5D,QAAQ,CAAC;UACpD2J,oBAAoB,CAAC1G,UAAU,GAAGY,QAAQ,CAACR,aAAa,CACvDM,kBAAkB,CAACD,IAAI,EACvBC,kBAAkB,CAACG,aAAa,EAChCH,kBAAkB,CAACI,WAAW,CAC9B;QACF;QACAQ,cAAc,CAACD,IAAI,CAACqF,oBAAoB,CAAC;MAC1C;IACD,CAAC,CAAC;IACF;IACA;IACAL,eAAe,CAACjH,OAAO,CAAEoH,MAAM,IAAK;MACnC,IAAIA,MAAM,CAACrF,aAAa,EAAE;QAAA;QACzBqF,MAAM,CAACrF,aAAa,4BAAGqF,MAAM,CAACrF,aAAa,0DAApB,sBAAsByF,GAAG,CAAEC,UAAU,IAAKP,sBAAsB,CAACO,UAAU,CAAC,IAAIA,UAAU,CAAC;MACnH;IACD,CAAC,CAAC;IACF,OAAOvF,cAAc;EACtB;EACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA,SAAS3B,mBAAmB,CAACmH,oBAA8C,EAAE/J,QAA8B,EAAuB;IACjI,OAAOA,QAAQ,CAACyC,IAAI,IAAIsH,oBAAoB,CAACC,YAAY,CAAChK,QAAQ,CAACyC,IAAI,CAAC,GACrEsH,oBAAoB,CAACC,YAAY,CAAChK,QAAQ,CAACyC,IAAI,CAAC,CAACE,QAAQ,GACzD3C,QAAQ,CAAC2C,QAAQ;EACrB;;EAEA;AACA;AACA;AACA;AACA;AACA;AACA;EACA,SAASG,qBAAqB,CAAClB,uBAA4B,EAAE5B,QAA8B,EAAuB;IACjH,OAAOA,QAAQ,CAACyC,IAAI,IAAIb,uBAAuB,CAAC5B,QAAQ,CAACyC,IAAI,CAAC,GAC3Db,uBAAuB,CAAC5B,QAAQ,CAACyC,IAAI,CAAC,CAACI,UAAU,GACjD7C,QAAQ,CAAC6C,UAAU;EACvB;;EAEA;AACA;AACA;AACA;AACA;AACA;AACA;EACA,SAASG,yBAAyB,CAACpB,uBAA4B,EAAEqI,eAAqC,EAAU;IAC/G,OAAOA,eAAe,CAACxH,IAAI,IAC1BhB,kBAAkB,CAACyI,4BAA4B,CAACtI,uBAAuB,CAACoI,YAAY,CAACC,eAAe,CAACxH,IAAI,CAAC,CAAC,GACzG,CAAC,CAAC,GACF,CAAC;EACL;;EAEA;AACA;AACA;AACA;AACA;AACA;;EAEA,SAAS/C,sBAAsB,CAACF,qBAA0C,EAAmC;IAC5G,MAAMsH,SAAS,GAAGtH,qBAAqB,CAACI,YAAY;IACpD,MAAME,sBAAsB,GAC3BqK,6BAA6B,CAACrD,SAAS,CAAC,IACxCsD,iCAAiC,CAACtD,SAAS,CAAC,IAC5CuD,6BAA6B,CAACvD,SAAS,CAAC,IACxCwD,iCAAiC,CAACxD,SAAS,CAAC;IAC7C,IAAI,CAAChH,sBAAsB,EAAE;MAC5B,OAAOwD,SAAS;IACjB;IACA,MAAMiH,2BAA2B,GAAGhH,oBAAoB,CAAC/D,qBAAqB,EAAEM,sBAAsB,CAAC;;IAEvG;IACA,MAAMD,kBAAkB,GAAG0K,2BAA2B,CAAC3K,YAAY;IACnE,IAAI,CAACC,kBAAkB,EAAE;MACxB,OAAOyD,SAAS;IACjB;IACA,OAAOiH,2BAA2B;EACnC;EAAC,OAEcvN,kBAAkB;AAAA"}},{"offset":{"line":16362,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","deepEqual","CommonUtils","FilterBar","MetaModelConverter","ModelHelper","DataModelPathHelper","DisplayModeFormatter","PropertyHelper","EDM","TypeUtil","MacrosDelegateUtil","ODataMetaModelUtil","Core","TableDelegate","DelegateUtil","FilterUtil","Filter","FilterOperator","Sorter","isTypeFilterable","getLabel","getAssociatedUnitPropertyPath","getAssociatedTimezonePropertyPath","getAssociatedTextPropertyPath","getAssociatedCurrencyPropertyPath","getDisplayMode","getTargetObjectPath","enhanceDataModelPath","getInvolvedDataModelObjects","fetchTypeConfig","ODataTableDelegate","Object","assign","fetchProperties","table","model","this","_getModel","createPropertyInfos","Promise","resolve","attachModelContextChange","resolver","onModelContextChange","then","oSubModel","_createPropertyInfos","properties","setCachedProperties","getBindingContext","setProperty","createInternalBindingContext","dialog","isA","getParent","internalModel","getModel","newInternalBindingContextPath","getPath","getId","newInternalBindingContext","bindContext","getBoundContext","setBindingContext","event","data","getSource","detachModelContextChange","_collectRelatedProperties","dataModelPropertyPath","dataModelAdditionalPropertyPath","_getAdditionalProperty","relatedProperties","targetObject","_property$annotations","_property$annotations2","_textAnnotation$annot","_textAnnotation$annot2","_textAnnotation$annot3","additionalProperty","additionalPropertyPath","property","propertyPath","textAnnotation","annotations","Common","Text","textArrangement","UI","TextArrangement","toString","displayMode","oTable","oModel","oMetadataInfo","getDelegate","payload","aProperties","sEntitySetPath","collectionName","oMetaModel","getMetaModel","requestObject","mEntitySetAnnotations","oSortRestrictionsInfo","getSortRestrictionsInfo","oFilterRestrictions","oFilterRestrictionsInfo","getFilterRestrictionsInfo","customDataForColumns","getCustomData","propertiesToBeCreated","dataModelEntityPath","getContext","customData","forEach","columnDef","oPropertyInfo","name","path","label","sortable","_isSortableProperty","filterable","_isFilterableProperty","maxConditions","_getPropertyMaxConditions","typeConfig","$Type","getTypeUtil","getTypeConfig","undefined","targetPropertyPath","oTypeConfig","type","propertyTypeConfig","formatOptions","constraints","relatedPropertiesInfo","relatedPropertyPaths","keys","length","propertyInfos","find","push","relatedColumns","_createRelatedProperties","concat","updateBindingInfo","oMDCTable","oBindingInfo","apply","collectionPath","oFilter","byId","getFilter","bFilterEnabled","isFilteringEnabled","mConditions","oInnerFilterInfo","oOuterFilterInfo","aFilters","tableProperties","getCachedProperties","getConditions","getFilterInfo","filters","aParameterNames","getParameterNames","_updatePropertyInfo","sParameterPath","getParametersInfo","parameters","$search","normalizeSearchTerm","getSearch","_applyDefaultSorting","$select","reduce","sQuery","oProperty","indexOf","$count","isDraftSupported","EQ","oPayload","sorter","defaultSortPropertyName","aTableProperties","aConditionKey","conditionKey","findIndex","tableProperty","oColumnDef","getObject","updateBinding","oBinding","bNeedManualRefresh","oInternalBindingContext","sManualUpdatePropertyKey","bPendingManualUpdate","getProperty","oRowBinding","getRowBinding","oldFilters","getFilters","getQueryOptionsFromParameters","requestRefresh","getGroupId","finally","catch","oError","error","fireEvent","existingColumns","relatedPropertyNameMap","relatedColumn","column","newName","valueHelpTableColumn","_column$propertyInfos","map","columnName","sortRestrictionsInfo","propertyInfo","valueHelpColumn","isMultiValueFilterExpression","dataModelAdditionalProperty"],"sources":["TableDelegate-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,4DAAO,CAAC,eAAgB,0BAA2B,0BAA2B,uDAAwD,4CAA6C,kCAAmC,6CAA8C,8CAA+C,wCAAyC,uBAAwB,4BAA6B,6BAA8B,mCAAoC,mBAAoB,oCAAqC,wCAAyC,6BAA8B,sBAAuB,8BAA+B,uBAAwB,SAAUC,EAAKC,EAAWC,EAAaC,EAAWC,EAAoBC,EAAaC,EAAqBC,EAAsBC,EAAgBC,EAAKC,EAAUC,EAAoBC,EAAoBC,EAAMC,EAAeC,EAAcC,EAAYC,EAAQC,EAAgBC,GACl7B,aAEA,IAAIC,EAAmBX,EAAIW,iBAC3B,IAAIC,EAAWb,EAAea,SAC9B,IAAIC,EAAgCd,EAAec,8BACnD,IAAIC,EAAoCf,EAAee,kCACvD,IAAIC,EAAgChB,EAAegB,8BACnD,IAAIC,EAAoCjB,EAAeiB,kCACvD,IAAIC,EAAiBnB,EAAqBmB,eAC1C,IAAIC,EAAsBrB,EAAoBqB,oBAC9C,IAAIC,EAAuBtB,EAAoBsB,qBAC/C,IAAIC,EAA8BzB,EAAmByB,4BACrD,IAAIC,EAAkB3B,EAAU2B,gBAIhC,MAAMC,EAAqBC,OAAOC,OAAO,CAAC,EAAGnB,GAC7CiB,EAAmBG,gBAAkB,SAAUC,GAC7C,MAAMC,EAAQC,KAAKC,UAAUH,GAC7B,IAAII,EACJ,IAAKH,EAAO,CACVG,EAAsB,IAAIC,QAAQC,IAChCN,EAAMO,yBAAyB,CAC7BC,SAAUF,GACTG,EAAsBP,KAAK,GAC7BQ,KAAKC,GACCT,KAAKU,qBAAqBZ,EAAOW,GAE5C,KAAO,CACLP,EAAsBF,KAAKU,qBAAqBZ,EAAOC,EACzD,CACA,OAAOG,EAAoBM,KAAK,SAAUG,GACxCrC,EAAmBsC,oBAAoBd,EAAOa,GAC9Cb,EAAMe,kBAAkB,YAAYC,YAAY,2BAA4B,MAC5E,OAAOH,CACT,EACF,EACAjB,EAAmBqB,6BAA+B,SAAUjB,GAC1D,IAAIkB,EAASlB,EACb,MAAOkB,IAAWA,EAAOC,IAAI,+BAAgC,CAC3DD,EAASA,EAAOE,WAClB,CACA,GAAIF,EAAQ,CACV,MAAMG,EAAgBrB,EAAMsB,SAAS,YACrC,MAAMC,EAAgCL,EAAOH,kBAAkB,YAAYS,UAAY,eAAeN,EAAOO,iBAC7G,MAAMC,EAA4BL,EAAcM,YAAYJ,GAA+BK,kBAC3F5B,EAAM6B,kBAAkBH,EAA2B,WACrD,CACF,EACA,SAASjB,EAAqBqB,EAAOC,GACnC,MAAM/B,EAAQ8B,EAAME,YACpBpC,EAAmBqB,6BAA6BjB,GAChD,MAAMC,EAAQC,KAAKC,UAAUH,GAC7B,GAAIC,EAAO,CACTD,EAAMiC,yBAAyBxB,GAC/BsB,EAAKvB,SAASP,EAChB,CACF,CAOA,SAASiC,EAA0BC,GACjC,MAAMC,EAAkCC,EAAuBF,GAC/D,MAAMG,EAAoB,CAAC,EAC3B,GAAIF,IAAoC,MAAQA,SAAyC,GAAKA,EAAgCG,aAAc,CAC1I,IAAIC,EAAuBC,EAAwBC,EAAuBC,EAAwBC,EAClG,MAAMC,EAAqBT,EAAgCG,aAC3D,MAAMO,EAAyBtD,EAAoB4C,EAAiC,MACpF,MAAMW,EAAWZ,EAAsBI,aACvC,MAAMS,EAAexD,EAAoB2C,EAAuB,MAChE,MAAMc,GAAkBT,EAAwBO,EAASG,eAAiB,MAAQV,SAA+B,OAAS,GAAKC,EAAyBD,EAAsBW,UAAY,MAAQV,SAAgC,OAAS,EAAIA,EAAuBW,KACpQC,EAAkBJ,IAAmB,MAAQA,SAAwB,OAAS,GAAKP,EAAwBO,EAAeC,eAAiB,MAAQR,SAA+B,OAAS,GAAKC,EAAyBD,EAAsBY,MAAQ,MAAQX,SAAgC,OAAS,GAAKC,EAAyBD,EAAuBY,mBAAqB,MAAQX,SAAgC,OAAS,EAAIA,EAAuBY,WAC9bC,EAAcR,GAAkBI,GAAmB9D,EAAewD,GACpE,GAAIU,IAAgB,cAAe,CACjCnB,EAAkBQ,GAA0BD,CAC9C,MAAO,GAAIY,GAAeA,IAAgB,UAAYR,EAAgB,CACpEX,EAAkBU,GAAgBD,EAClCT,EAAkBQ,GAA0BD,CAC9C,CACF,CACA,OAAOP,CACT,CACA1C,EAAmBgB,qBAAuB,SAAU8C,EAAQC,GAC1D,MAAMC,EAAgBF,EAAOG,cAAcC,QAC3C,MAAMC,EAAc,GACpB,MAAMC,EAAiB,IAAIJ,EAAcK,iBACzC,MAAMC,EAAaP,EAAOQ,eAC1B,OAAOD,EAAWE,cAAc,GAAGJ,MAAmBtD,KAAK,SAAU2D,GACnE,MAAMC,EAAwB7F,EAAmB8F,wBAAwBF,GACzE,MAAMG,EAAsBH,EAAsB,iDAClD,MAAMI,EAA0BhG,EAAmBiG,0BAA0BF,GAC7E,MAAMG,EAAuBnG,EAAmBoG,cAAclB,EAAQ,WACtE,MAAMmB,EAAwB,CAAC,EAC/B,MAAMC,EAAsBpF,EAA4BgE,EAAOpC,WAAW6C,eAAeY,WAAWf,IACpGW,EAAqBK,WAAWC,QAAQ,SAAUC,GAChD,MAAMC,EAAgB,CACpBC,KAAMF,EAAUG,KAChBC,MAAOJ,EAAUI,MACjBC,SAAUC,EAAoBlB,EAAuBY,GACrDO,WAAYC,EAAsBjB,EAAyBS,GAC3DS,cAAeC,EAA0BnB,EAAyBS,GAClEW,WAAY5G,EAAiBiG,EAAUY,OAASpC,EAAOqC,cAAcC,cAAcd,EAAUY,OAASG,WAExG,MAAM9D,EAAwB1C,EAAqBqF,EAAqBI,EAAUG,MAClF,MAAMtC,EAAWZ,EAAsBI,aACvC,GAAIQ,EAAU,CACZ,MAAMmD,EAAqB1G,EAAoB2C,EAAuB,MACtE,IAAIgE,EACJ,GAAIlH,EAAiB8D,EAASqD,MAAO,CACnC,MAAMC,EAAqB1G,EAAgBoD,GAC3CoD,EAAc5H,EAASyH,cAAcK,EAAmBD,KAAMC,EAAmBC,cAAeD,EAAmBE,cAAgB7C,EAAOqC,cAAcC,cAAcd,EAAUY,MAClL,CAEA,MAAMU,EAAwBtE,EAA0BC,GACxD,MAAMsE,EAAuB5G,OAAO6G,KAAKF,GACzC,GAAIC,EAAqBE,OAAQ,CAC/BxB,EAAcyB,cAAgBH,EAE9BtB,EAAcI,SAAW,MACzBJ,EAAcM,WAAa,MAE3BgB,EAAqBxB,QAAQI,IAC3BR,EAAsBQ,GAAQmB,EAAsBnB,EAAK,GAI3D,IAAKoB,EAAqBI,KAAKxB,GAAQmB,EAAsBnB,KAAUtC,GAAW,CAChF8B,EAAsBqB,GAAsBnD,CAC9C,CACF,KAAO,CACLoC,EAAcE,KAAOH,EAAUG,IACjC,CACAF,EAAcU,WAAaV,EAAcU,WAAaM,EAAcF,SACtE,KAAO,CACLd,EAAcE,KAAOH,EAAUG,IACjC,CACAtB,EAAY+C,KAAK3B,EACnB,GACA,MAAM4B,EAAiBC,EAAyBnC,EAAuBd,EAAaO,EAAuBG,GAC3G,OAAOV,EAAYkD,OAAOF,EAC5B,EACF,EAQAnH,EAAmBsH,kBAAoB,SAAUC,EAAWC,GAC1DzI,EAAcuI,kBAAkBG,MAAMnH,KAAM,CAACiH,EAAWC,IACxD,IAAKD,EAAW,CACd,MACF,CACA,MAAMvD,EAAgBuD,EAAUtD,cAAcC,QAC9C,GAAIF,GAAiBwD,EAAc,CACjCA,EAAa/B,KAAO+B,EAAa/B,MAAQzB,EAAc0D,gBAAkB,IAAI1D,EAAcK,iBAC3FmD,EAAanH,MAAQmH,EAAanH,OAAS2D,EAAc3D,KAC3D,CACA,IAAKmH,EAAc,CACjBA,EAAe,CAAC,CAClB,CACA,MAAMG,EAAU7I,EAAK8I,KAAKL,EAAUM,aAClCC,EAAiBP,EAAUQ,qBAC7B,IAAIC,EACJ,IAAIC,EAAkBC,EACtB,MAAMC,EAAW,GACjB,MAAMC,EAAkBxJ,EAAmByJ,oBAAoBd,GAG/D,GAAIO,EAAgB,CAClBE,EAAcT,EAAUe,gBACxBL,EAAmBhJ,EAAWsJ,cAAchB,EAAWS,EAAaI,EAAiB,IACrF,GAAIH,EAAiBO,QAAS,CAC5BL,EAASjB,KAAKe,EAAiBO,QACjC,CACF,CACA,GAAIb,EAAS,CACXK,EAAcL,EAAQW,gBACtB,GAAIN,EAAa,CACf,MAAMS,EAAkBzJ,EAAa0J,kBAAkBf,GAEvD3H,EAAmB2I,oBAAoBP,EAAiBb,EAAWS,EAAahE,GAChFkE,EAAmBjJ,EAAWsJ,cAAcZ,EAASK,EAAaI,EAAiBK,GACnF,GAAIP,EAAiBM,QAAS,CAC5BL,EAASjB,KAAKgB,EAAiBM,QACjC,CACA,MAAMI,EAAiB5J,EAAa6J,kBAAkBlB,EAASK,GAC/D,GAAIY,EAAgB,CAClBpB,EAAa/B,KAAOmD,CACtB,CACF,CAGApB,EAAasB,WAAWC,QAAU5K,EAAY6K,oBAAoBrB,EAAQsB,cAAgB5C,SAC5F,CACA/F,KAAK4I,qBAAqB1B,EAAcD,EAAUtD,cAAcC,SAEhEsD,EAAasB,WAAWK,QAAUf,IAAoB,MAAQA,SAAyB,OAAS,EAAIA,EAAgBgB,OAAO,SAAUC,EAAQC,GAG3I,GAAIA,EAAU7D,MAAQ6D,EAAU7D,KAAK8D,QAAQ,QAAU,EAAG,CACxDF,EAASA,EAAS,GAAGA,KAAUC,EAAU7D,OAAS6D,EAAU7D,IAC9D,CACA,OAAO4D,CACT,EAAG,IAGH7B,EAAasB,WAAWU,OAAS,KAGjC,GAAIlL,EAAYmL,iBAAiBlC,EAAU7F,WAAW6C,eAAgBiD,EAAa/B,MAAO,CACxF0C,EAASjB,KAAK,IAAIhI,EAAO,iBAAkBC,EAAeuK,GAAI,MAChE,CACAlC,EAAagB,QAAU,IAAItJ,EAAOiJ,EAAU,KAC9C,EACAnI,EAAmBmG,YAAc,WAE/B,OAAOxH,CACT,EACAqB,EAAmBO,UAAY,SAAUuD,GACvC,MAAME,EAAgBF,EAAOG,cAAcC,QAC3C,OAAOJ,EAAOpC,SAASsC,EAAc3D,MACvC,EAUAL,EAAmBkJ,qBAAuB,SAAU1B,EAAcmC,GAChE,GAAInC,EAAasB,YAActB,EAAasB,WAAWC,SAAW1C,WAAamB,EAAaoC,QAAUpC,EAAaoC,OAAO7C,QAAU,EAAG,CACrI,MAAM8C,EAA0BF,EAAWA,EAASE,wBAA0BxD,UAC9E,GAAIwD,EAAyB,CAC3BrC,EAAaoC,OAAO1C,KAAK,IAAI9H,EAAOyK,EAAyB,OAC/D,CACF,CACF,EAUA7J,EAAmB2I,oBAAsB,SAAUmB,EAAkBvC,EAAWS,EAAahE,GAC3F,MAAM+F,EAAgB9J,OAAO6G,KAAKkB,GAChC1D,EAAaiD,EAAU7F,WAAW6C,eACpCwF,EAAc1E,QAAQ,SAAU2E,GAC9B,GAAIF,EAAiBG,UAAU,SAAUC,GACvC,OAAOA,EAAczE,OAASuE,CAChC,MAAQ,EAAG,CACT,MAAMG,EAAa,CACjB1E,KAAMuE,EACN/D,WAAYsB,EAAUpB,cAAcC,cAAc9B,EAAW8F,UAAU,IAAIpG,EAAcK,kBAAkB2F,KAAgB9D,QAE7H4D,EAAiB5C,KAAKiD,EACxB,CACF,EACF,EACAnK,EAAmBqK,cAAgB,SAAUvG,EAAQ0D,EAAc8C,GACjE,IAAIC,EAAqB,MACzB,MAAMC,EAA0B1G,EAAO3C,kBAAkB,YACzD,MAAMsJ,EAA2B,6BACjC,MAAMC,EAAuBF,IAA4B,MAAQA,SAAiC,OAAS,EAAIA,EAAwBG,YAAYF,GACnJ,IAAIG,EAAc9G,EAAO+G,gBAGzB9L,EAAcsL,cAAc5C,MAAMzH,EAAoB,CAAC8D,EAAQ0D,EAAc8C,IAE7E,IAAKM,EAAa,CAChBA,EAAc9G,EAAO+G,eACvB,CACA,GAAID,EAAa,CAMf,MAAME,EAAaF,EAAYG,WAAW,eAC1CR,EAAqBrM,EAAUsJ,EAAagB,QAASsC,EAAW,KAAOF,EAAYI,gCAAgCjC,UAAYvB,EAAasB,WAAWC,UAAY2B,CACrK,CACA,GAAIH,GAAsBzG,EAAO+D,YAAa,CAC5C2C,IAA4B,MAAQA,SAAiC,OAAS,EAAIA,EAAwBpJ,YAAYqJ,EAA0B,MAChJG,EAAYK,eAAeL,EAAYM,cAAcC,QAAQ,WAC3DX,IAA4B,MAAQA,SAAiC,OAAS,EAAIA,EAAwBpJ,YAAYqJ,EAA0B,MAClJ,GAAGW,MAAM,SAAUC,GACjBpN,EAAIqN,MAAM,8CAA+CD,EAC3D,EACF,CACAvH,EAAOyH,UAAU,iBAEnB,EAWA,SAASnE,EAAyBnC,EAAuBuG,EAAiB9G,EAAuBG,GAC/F,MAAM4G,EAAyB,CAAC,EAC9BtE,EAAiB,GACnBlH,OAAO6G,KAAK7B,GAAuBI,QAAQI,IACzC,MAAMtC,EAAW8B,EAAsBQ,GACrCiG,EAAgBF,EAAgBvE,KAAK0E,GAAUA,EAAOlG,OAASA,GACjE,IAAKiG,EAAe,CAClB,MAAME,EAAU,aAAanG,IAC7BgG,EAAuBhG,GAAQmG,EAC/B,MAAMC,EAAuB,CAC3BrG,KAAMoG,EACNlG,MAAOpG,EAAS6D,GAChBsC,KAAMA,EACNE,SAAUC,EAAoBlB,EAAuBvB,GACrD0C,WAAYC,EAAsBjB,EAAyB1B,IAE7D0I,EAAqB9F,cAAgBC,EAA0BnB,EAAyBgH,GACxF,GAAIxM,EAAiB8D,EAASqD,MAAO,CACnC,MAAMC,EAAqB1G,EAAgBoD,GAC3C0I,EAAqB5F,WAAatH,EAASyH,cAAcK,EAAmBD,KAAMC,EAAmBC,cAAeD,EAAmBE,YACzI,CACAQ,EAAeD,KAAK2E,EACtB,IAIFL,EAAgBnG,QAAQsG,IACtB,GAAIA,EAAO3E,cAAe,CACxB,IAAI8E,EACJH,EAAO3E,eAAiB8E,EAAwBH,EAAO3E,iBAAmB,MAAQ8E,SAA+B,OAAS,EAAIA,EAAsBC,IAAIC,GAAcP,EAAuBO,IAAeA,EAC9M,IAEF,OAAO7E,CACT,CAQA,SAASvB,EAAoBqG,EAAsB9I,GACjD,OAAOA,EAASsC,MAAQwG,EAAqBC,aAAa/I,EAASsC,MAAQwG,EAAqBC,aAAa/I,EAASsC,MAAME,SAAWxC,EAASwC,QAClJ,CASA,SAASG,EAAsBjB,EAAyB1B,GACtD,OAAOA,EAASsC,MAAQZ,EAAwB1B,EAASsC,MAAQZ,EAAwB1B,EAASsC,MAAMI,WAAa1C,EAAS0C,UAChI,CASA,SAASG,EAA0BnB,EAAyBsH,GAC1D,OAAOA,EAAgB1G,MAAQ5G,EAAmBuN,6BAA6BvH,EAAwBqH,aAAaC,EAAgB1G,QAAU,EAAI,CACpJ,CASA,SAAShD,EAAuBF,GAC9B,MAAM+G,EAAY/G,EAAsBI,aACxC,MAAMO,EAAyBzD,EAA8B6J,IAAc5J,EAAkC4J,IAAc/J,EAA8B+J,IAAc9J,EAAkC8J,GACzM,IAAKpG,EAAwB,CAC3B,OAAOmD,SACT,CACA,MAAMgG,EAA8BxM,EAAqB0C,EAAuBW,GAGhF,MAAMD,EAAqBoJ,EAA4B1J,aACvD,IAAKM,EAAoB,CACvB,OAAOoD,SACT,CACA,OAAOgG,CACT,CACA,OAAOrM,CACT,EAAG","sourceRoot":"internal/valuehelp"}},{"offset":{"line":16367,"column":0},"map":{"version":3,"names":["getValueHelpTableDisplayMode","propertyPath","isValueHelpWithFixedValues","sDisplayMode","getDisplayMode","oTextAnnotation","targetObject","annotations","Common","Text","oTextArrangementAnnotation","UI","TextArrangement","toString","path","getDelegateConfiguration","conditionModelName","originalPropertyPath","requestGroupId","useMultiValueField","isUnitValueHelp","delegateConfiguration","name","payload","conditionModel","qualifiers","valueHelpQualifier","compileExpression","generateID","sFlexId","sIdPrefix","sOriginalPropertyName","sPropertyName","sProperty","generate","requiresValidation","property","hasValueHelpWithFixedValues","hasValueListForValidation","hasValueHelp","isUnit","isCurrency","isGuid","useCaseSensitiveFilterRequests","oDataModelPath","aEntityContainerFilterFunctions","filterFunctions","targetEntitySet","Capabilities","FilterFunctions","indexOf","isSemanticDateRange","targetProperty","targetRestrictions","checkFilterExpressionRestrictions","hasDateType","shouldShowConditionPanel","oContextPath","contextLocation","getColumnDataProperty","sValueListProperty","valueOf","getColumnHAlign","propertyType","isProperty","type","isSemanticKey","FieldHelper","getPropertyAlignment","textAlignMode"],"sourceRoot":"internal/valuehelp","sources":["ValueHelpTemplating.ts"],"sourcesContent":["import type { EntitySet, Property } from \"@sap-ux/vocabularies-types\";\nimport type { CompiledBindingToolkitExpression } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { compileExpression } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { checkFilterExpressionRestrictions } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport {\n\thasDateType,\n\thasValueHelp,\n\thasValueHelpWithFixedValues,\n\thasValueListForValidation,\n\tisCurrency,\n\tisGuid,\n\tisProperty,\n\tisSemanticKey,\n\tisUnit\n} from \"sap/fe/core/templating/PropertyHelper\";\nimport { getDisplayMode } from \"sap/fe/core/templating/UIFormatters\";\nimport FieldHelper from \"sap/fe/macros/field/FieldHelper\";\n\nimport type { ValueHelpPayload } from \"sap/fe/macros/internal/valuehelp/ValueListHelper\";\n\n/**\n * Retrieve the displayMode for the value help.\n * The main rule is that if a property is used in a VHTable then we don't want to display the text arrangement directly.\n *\n * @param propertyPath The current property\n * @param isValueHelpWithFixedValues The value help is a drop-down list\n * @returns The target displayMode\n */\nexport const getValueHelpTableDisplayMode = function (propertyPath: DataModelObjectPath, isValueHelpWithFixedValues: boolean): string {\n\tconst sDisplayMode = getDisplayMode(propertyPath);\n\tconst oTextAnnotation = propertyPath.targetObject.annotations?.Common?.Text;\n\tconst oTextArrangementAnnotation = typeof oTextAnnotation !== \"string\" && oTextAnnotation?.annotations?.UI?.TextArrangement?.toString();\n\tif (isValueHelpWithFixedValues) {\n\t\treturn oTextAnnotation && typeof oTextAnnotation !== \"string\" && oTextAnnotation.path ? sDisplayMode : \"Value\";\n\t} else {\n\t\t// Only explicit defined TextArrangements in a Value Help with Dialog are considered\n\t\treturn oTextArrangementAnnotation ? sDisplayMode : \"Value\";\n\t}\n};\n\n/**\n * Method to return delegate property of Value Help.\n *\n * @function\n * @name getDelegateConfiguration\n * @memberof sap.fe.macros.internal.valuehelp.ValueHelpTemplating.js\n * @param propertyPath The current property path\n * @param conditionModelName Condition model of the Value Help\n * @param originalPropertyPath The original property path\n * @param requestGroupId The requestGroupId to use for requests\n * @param useMultiValueField If true the value help is for a multi value Field\n * @returns The expression needed to configure the delegate\n */\nexport const getDelegateConfiguration = function (\n\tpropertyPath: string,\n\tconditionModelName: string,\n\toriginalPropertyPath: string,\n\trequestGroupId?: string,\n\tuseMultiValueField = false\n): CompiledBindingToolkitExpression {\n\tconst isUnitValueHelp = propertyPath !== originalPropertyPath;\n\tconst delegateConfiguration: { name: string; payload: ValueHelpPayload } = {\n\t\tname: \"sap/fe/macros/valuehelp/ValueHelpDelegate\",\n\t\tpayload: {\n\t\t\tpropertyPath,\n\t\t\tisUnitValueHelp,\n\t\t\tconditionModel: conditionModelName,\n\t\t\trequestGroupId,\n\t\t\tuseMultiValueField,\n\t\t\tqualifiers: {},\n\t\t\tvalueHelpQualifier: \"\"\n\t\t}\n\t};\n\treturn compileExpression(delegateConfiguration); // for some reason \"qualifiers: {}\" is ignored here\n};\n\n/**\n * Method to generate the ID for Value Help.\n *\n * @function\n * @name generateID\n * @memberof sap.fe.macros.internal.valuehelp.ValueHelpTemplating.js\n * @param sFlexId Flex ID of the current object\n * @param sIdPrefix Prefix for the ValueHelp ID\n * @param sOriginalPropertyName Name of the property\n * @param sPropertyName Name of the ValueHelp Property\n * @returns The Id generated for the ValueHelp\n */\nexport const generateID = function (\n\tsFlexId: string | undefined,\n\tsIdPrefix: string,\n\tsOriginalPropertyName: string,\n\tsPropertyName: string\n): string {\n\tif (sFlexId) {\n\t\treturn sFlexId;\n\t}\n\tlet sProperty = sPropertyName;\n\tif (sOriginalPropertyName !== sPropertyName) {\n\t\tsProperty = `${sOriginalPropertyName}::${sPropertyName}`;\n\t}\n\treturn generate([sIdPrefix, sProperty]);\n};\n\n/**\n * Method to check if a property needs to be validated or not when used in the valuehelp.\n *\n * @function\n * @name requiresValidation\n * @memberof sap.fe.macros.internal.valuehelp.ValueHelpTemplating.js\n * @param  property ValueHelp property type annotations\n * @returns `true` if the value help needs to be validated\n */\nexport const requiresValidation = function (property: Property): boolean {\n\treturn (\n\t\thasValueHelpWithFixedValues(property) ||\n\t\thasValueListForValidation(property) ||\n\t\t(hasValueHelp(property) && (isUnit(property) || isCurrency(property) || isGuid(property)))\n\t);\n};\n\n/**\n * Method to decide if case-sensitive filter requests are to be used or not.\n *\n *  If the back end has FilterFunctions Capabilies for the service or the entity, we check it includes support for tolower.\n *\n * @function\n * @name useCaseSensitiveFilterRequests\n * @memberof sap.fe.macros.internal.valuehelp.ValueHelpTemplating.js\n * @param oDataModelPath Current data model path\n * @param aEntityContainerFilterFunctions Filter functions of entity container\n * @returns `true` if the entity set or service supports case sensitive filter requests\n */\nexport const useCaseSensitiveFilterRequests = function (\n\toDataModelPath: DataModelObjectPath,\n\taEntityContainerFilterFunctions: string[]\n): boolean {\n\tconst filterFunctions =\n\t\t((oDataModelPath?.targetEntitySet as EntitySet)?.annotations?.Capabilities?.FilterFunctions as unknown as string[]) ||\n\t\taEntityContainerFilterFunctions;\n\treturn filterFunctions ? !(filterFunctions.indexOf(\"tolower\") > -1) : true;\n};\n\nexport const isSemanticDateRange = function (oDataModelPath: DataModelObjectPath) {\n\tconst targetProperty = oDataModelPath.targetObject as Property;\n\tconst targetRestrictions = checkFilterExpressionRestrictions(oDataModelPath, [\"SingleRange\"]);\n\treturn hasDateType(targetProperty) && compileExpression(targetRestrictions);\n};\n\nexport const shouldShowConditionPanel = function (oDataModelPath: DataModelObjectPath, oContextPath: DataModelObjectPath): boolean {\n\t// Force push the context path inside\n\toDataModelPath.contextLocation = oContextPath;\n\treturn compileExpression(checkFilterExpressionRestrictions(oDataModelPath, [\"SingleValue\", \"MultiValue\"])) === \"false\";\n};\n\nexport const getColumnDataProperty = function (sValueListProperty: string, propertyPath: DataModelObjectPath): string {\n\tif (\n\t\tpropertyPath?.targetObject?.annotations?.Common?.Text &&\n\t\tpropertyPath.targetObject.annotations.Common.Text?.annotations?.UI?.TextArrangement &&\n\t\tpropertyPath.targetObject.annotations.Common.Text.annotations.UI.TextArrangement.valueOf() === \"UI.TextArrangementType/TextOnly\"\n\t) {\n\t\treturn propertyPath.targetObject.annotations.Common.Text.path;\n\t}\n\treturn sValueListProperty;\n};\n\nexport const getColumnHAlign = function (propertyPath: DataModelObjectPath) {\n\tconst property = propertyPath.targetObject;\n\tconst propertyType = isProperty(property) ? property.type : \"\";\n\n\treturn !propertyType || isSemanticKey(property, propertyPath)\n\t\t? \"Begin\"\n\t\t: FieldHelper.getPropertyAlignment(propertyType, { textAlignMode: \"Table\" });\n};\n"],"mappings":"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"}},{"offset":{"line":16528,"column":0},"map":{"version":3,"names":["sap","ui","define","BindingToolkit","StableIdHelper","DataModelPathHelper","PropertyHelper","UIFormatters","FieldHelper","_exports","getDisplayMode","isUnit","isSemanticKey","isProperty","isGuid","isCurrency","hasValueListForValidation","hasValueHelpWithFixedValues","hasValueHelp","hasDateType","checkFilterExpressionRestrictions","generate","compileExpression","getValueHelpTableDisplayMode","propertyPath","isValueHelpWithFixedValues","_propertyPath$targetO","_propertyPath$targetO2","_oTextAnnotation$anno","_oTextAnnotation$anno2","_oTextAnnotation$anno3","sDisplayMode","oTextAnnotation","targetObject","annotations","Common","Text","oTextArrangementAnnotation","UI","TextArrangement","toString","path","getDelegateConfiguration","conditionModelName","originalPropertyPath","requestGroupId","useMultiValueField","arguments","length","undefined","isUnitValueHelp","delegateConfiguration","name","payload","conditionModel","qualifiers","valueHelpQualifier","generateID","sFlexId","sIdPrefix","sOriginalPropertyName","sPropertyName","sProperty","requiresValidation","property","useCaseSensitiveFilterRequests","oDataModelPath","aEntityContainerFilterFunctions","_oDataModelPath$targe","_oDataModelPath$targe2","_oDataModelPath$targe3","filterFunctions","targetEntitySet","Capabilities","FilterFunctions","indexOf","isSemanticDateRange","targetProperty","targetRestrictions","shouldShowConditionPanel","oContextPath","contextLocation","getColumnDataProperty","sValueListProperty","_propertyPath$targetO3","_propertyPath$targetO4","_propertyPath$targetO5","_propertyPath$targetO6","_propertyPath$targetO7","_propertyPath$targetO8","valueOf","getColumnHAlign","propertyType","type","getPropertyAlignment","textAlignMode"],"sources":["ValueHelpTemplating-dbg.js"],"mappings":"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","sourceRoot":"internal/valuehelp"}},{"offset":{"line":16533,"column":0},"map":{"version":3,"names":["columnNotAlreadyDefined","columnDefs","vhKey","some","column","path","AnnotationLabel","AnnotationText","AnnotationTextUITextArrangement","AnnotationValueListParameterIn","AnnotationValueListParameterConstant","AnnotationValueListParameterOut","AnnotationValueListParameterInOut","AnnotationValueListWithFixedValues","_getDefaultSortPropertyName","valueListInfo","sortFieldName","metaModel","$model","getMetaModel","entitySetAnnotations","getObject","CollectionPath","sortRestrictionsInfo","ODataMetaModelUtil","getSortRestrictionsInfo","foundElement","Parameters","find","element","$Type","ValueListProperty","propertyInfo","sortable","undefined","_redundantDescription","oVLParameter","aColumnInfo","oColumnInfo","columnInfo","textColumnName","keyColumnHidden","keyColumnDisplayFormat","_hasImportanceHigh","oValueListContext","oParameter","$EnumMember","_build$SelectString","control","oViewData","getModel","oData","getData","aColumns","columns","reduce","sQuery","oProperty","indexOf","_getValueHelpColumnDisplayFormat","oPropertyAnnotations","isValueHelpWithFixedValues","sDisplayMode","CommonUtils","computeDisplayMode","oTextAnnotation","oTextArrangementAnnotation","$Path","ValueListHelper","getValueListCollectionEntitySet","mValueList","createBindingContext","getTableDelegate","oValueList","sDefaultSortPropertyName","getSortConditionsFromPresentationVariant","isSuggestion","presentationVariantQualifier","PresentationVariantQualifier","presentationVariantPath","presentationVariant","SortOrder","sortConditions","sorters","forEach","condition","sorter","Property","$PropertyPath","Descending","descending","ascending","push","JSON","stringify","name","getPropertyPath","oParameters","UnboundAction","EntityTypePath","Action","substring","lastIndexOf","getValueListProperty","oPropertyContext","oValueListModel","getColumnVisibility","oSource","isDropDownList","valueHelpWithFixedValues","isVisible","columnInfos","isDialogTable","columnWithHiddenAnnotation","columnName","hasHiddenAnnotation","getColumnVisibilityInfo","sPropertyFullPath","bIsDropDownListe","oMetaModel","aColumnInfos","oColumnInfos","getTableItemsParameters","requestGroupId","itemParameters","selectString","selectStringPart","isSuspended","sortConditionsFromPresentationVariant","defaultSortPropertyName","join","hasImportance","getMinScreenWidth","getColumnWidth","propertyPath","property","targetObject","relatedProperty","additionalProperty","getAssociatedTextProperty","getAssociatedCurrencyProperty","getAssociatedUnitProperty","getAssociatedTimezoneProperty","textAnnotation","annotations","Common","Text","textArrangement","UI","TextArrangement","toString","label","Label","displayMode","getDisplayMode","size","instances","prop","propertyTypeConfig","getTypeConfig","PropertyODataConstructor","ObjectPath","get","type","formatOptions","constraints","sWidth","Util","calcColumnWidth","parseFloat","replace","Log","error","getOutParameterPaths","aParameters","sPath","endsWith","entityIsSearchable","propertyAnnotations","collectionAnnotations","searchSupported","SearchSupported","searchable","Searchable","_getConditionPath","entitySet","parts","split","conditionPath","partialPath","length","part","shift","$kind","$isCollection","_getColumnDefinitionFromSelectionFields","entityTypeAnnotations","selectionFields","selectionField","selectionFieldPath","columnDef","filterable","isPropertyFilterable","_mergeColumnDefinitionsFromProperties","valueListProperty","columnPath","columnPropertyType","textPropertyPath","filterInOutParameters","vhParameters","typeFilter","filter","parameter","parmeterType","getInParameters","getOutParameters","createVHUIModel","valueHelp","vhUIModel","JSONModel","setModel","setProperty","_getDialogTitle","valuehelpLabel","propertyLabel","getProperty","dataFieldLabel","getControl","destroyVHContent","getDialog","destroyContent","getTypeahead","putDefaultQualifierFirst","qualifiers","indexDefaultVH","unshift","splice","_getContextPrefix","bindingContext","propertyBindingParts","getPath","bindigContextParts","contextPrefixParts","i","_getVhParameter","conditionModel","contextPrefix","vhMetaModel","localDataPropertyPath","valuePath","getBindingContext","getParent","isA","_parameterIsA","firstNavigationProperty","oBoundEntity","getMetaContext","sPathOfTable","getRowBinding","source","helpPath","constantValue","Constant","initialValueFilterEmpty","Boolean","InitialValueIsSignificant","parameterTypes","includes","_enrichPath","propertyName","key","fieldPropertyPath","descriptionPath","_enrichKeys","vhKeys","_processParameters","annotationValueListType","valueHelpQualifier","entitySetPath","$Key","LocalDataProperty","vhParameter","keyValue","descriptionValue","_logError","status","message","Error","String","msg","getValueListInfo","payload","valueListInfos","propertyPathParts","valueListByQualifier","requestValueListInfo","valueHelpQualifiers","Object","keys","pop","useMultiValueField","err","ALLFRAGMENTS","logFragment","_logTemplatedFragments","fragmentName","fragmentDefinition","logInfo","fragment","getLevel","Level","DEBUG","setTimeout","_templateFragment","sourceModel","localValueListInfo","valueListModel","valueListServiceMetaModel","viewData","converterType","XMLPreprocessor","process","XMLTemplateProcessor","loadTemplate","bindingContexts","valueList","contextPath","models","Fragment","load","definition","_getContentId","valueHelpId","isTypeahead","contentType","_addInOutParametersToPayload","textArrangementAnnotation","_getWidthInRem","isUnitValueHelp","width","$","floatWidth","Rem","fromPx","isNaN","_getTableWidth","table","minWidth","getColumns","visibleColumns","getVisible","sumWidth","sum","getWidth","Math","max","_createValueHelpTypeahead","content","contentId","getId","id","groupId","bSuggestion","setKeyPath","setDescriptionPath","isValueListWithFixedValues","setFilterFields","info","getMetadata","getName","setTable","field","reduceWidthForUnitValueHelp","tableWidth","setWidth","setMode","getMaxConditions","_createValueHelpDialog","isDropDownListe","tablePromise","filterBarPromise","filterBar","Promise","all","setFilterBar","setFilter","initialized","setSelectionMode","mdcTable","_setShowP13nButton","_getContentById","contentList","item","_createPopoverContent","caseSensitive","useAsValueHelp","MTable","group","_createDialogContent","forceBind","MDCTable","_showConditionsContent","container","conditionsContent","setVisible","Conditions","addContent","_alignOrCreateContent","showConditionPanel","getContent","FetchValues","insertContent","_prepareValueHelpTypeAhead","firstTypeAheadContent","qualifierForTypeahead","data","subValueListInfo","getUseAsValueHelp","removeContent","_prepareValueHelpDialog","selectedContentId","contentListItem","selectedInfo","selectedContent","title","getTranslatedTextFromExpBindingString","setTitle","showValueList","getCaseSensitive","getTable"],"sourceRoot":"internal/valuehelp","sources":["ValueListHelper.ts"],"sourcesContent":["import type { Property } from \"@sap-ux/vocabularies-types\";\nimport { CommonAnnotationTypes } from \"@sap-ux/vocabularies-types/vocabularies/Common\";\nimport Log, { Level } from \"sap/base/Log\";\nimport ObjectPath from \"sap/base/util/ObjectPath\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type { CompiledBindingToolkitExpression } from \"sap/fe/core/helpers/BindingToolkit\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport {\n\tgetAssociatedCurrencyProperty,\n\tgetAssociatedTextProperty,\n\tgetAssociatedTimezoneProperty,\n\tgetAssociatedUnitProperty\n} from \"sap/fe/core/templating/PropertyHelper\";\nimport { getDisplayMode, getTypeConfig } from \"sap/fe/core/templating/UIFormatters\";\nimport ODataMetaModelUtil, { type AnnotationsForCollection } from \"sap/fe/macros/ODataMetaModelUtil\";\nimport type Table from \"sap/m/Table\";\nimport Util from \"sap/m/table/Util\";\nimport type Control from \"sap/ui/core/Control\";\nimport Fragment from \"sap/ui/core/Fragment\";\nimport XMLPreprocessor from \"sap/ui/core/util/XMLPreprocessor\";\nimport XMLTemplateProcessor from \"sap/ui/core/XMLTemplateProcessor\";\nimport Rem from \"sap/ui/dom/units/Rem\";\nimport type Field from \"sap/ui/mdc/Field\";\nimport type FieldBase from \"sap/ui/mdc/field/FieldBase\";\nimport type MdcFilterBar from \"sap/ui/mdc/filterbar/FilterBarBase\";\nimport type FilterField from \"sap/ui/mdc/FilterField\";\nimport type MultiValueField from \"sap/ui/mdc/MultiValueField\";\nimport type MdcInnerTable from \"sap/ui/mdc/Table\";\nimport type ValueHelp from \"sap/ui/mdc/ValueHelp\";\nimport type Container from \"sap/ui/mdc/valuehelp/base/Container\";\nimport type Content from \"sap/ui/mdc/valuehelp/base/Content\";\nimport Conditions from \"sap/ui/mdc/valuehelp/content/Conditions\";\nimport MDCTable, { type $MDCTableSettings } from \"sap/ui/mdc/valuehelp/content/MDCTable\";\nimport MTable, { type $MTableSettings } from \"sap/ui/mdc/valuehelp/content/MTable\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport ODataType from \"sap/ui/model/odata/type/ODataType\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport type ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\n\nexport type AnnotationValueListParameter = {\n\t$Type: string;\n\tValueListProperty: string;\n\tLocalDataProperty?: {\n\t\t$PropertyPath: string;\n\t};\n\tConstant?: string;\n\tInitialValueIsSignificant?: boolean;\n};\n\n// com.sap.vocabularies.Common.v1.ValueListType\nexport type AnnotationValueListType = {\n\t$Type: string; // CommonAnnotationTypes.ValueListType;\n\tLabel?: string;\n\tCollectionPath: string;\n\tCollectionRoot?: string;\n\tDistinctValuesSupported?: boolean;\n\tSearchSupported?: boolean;\n\tFetchValues?: number;\n\tPresentationVariantQualifier?: string;\n\tSelectionVariantQualifier?: string;\n\tParameters: AnnotationValueListParameter[];\n\t$model: ODataModel;\n};\n\nexport type AnnotationValueListTypeByQualifier = Record<string, AnnotationValueListType>;\n\nconst columnNotAlreadyDefined = (columnDefs: ColumnDef[], vhKey: string): boolean => !columnDefs.some((column) => column.path === vhKey);\n\nexport const AnnotationLabel = \"@com.sap.vocabularies.Common.v1.Label\",\n\tAnnotationText = \"@com.sap.vocabularies.Common.v1.Text\",\n\tAnnotationTextUITextArrangement = \"@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement\",\n\tAnnotationValueListParameterIn = \"com.sap.vocabularies.Common.v1.ValueListParameterIn\",\n\tAnnotationValueListParameterConstant = \"com.sap.vocabularies.Common.v1.ValueListParameterConstant\",\n\tAnnotationValueListParameterOut = \"com.sap.vocabularies.Common.v1.ValueListParameterOut\",\n\tAnnotationValueListParameterInOut = \"com.sap.vocabularies.Common.v1.ValueListParameterInOut\",\n\tAnnotationValueListWithFixedValues = \"@com.sap.vocabularies.Common.v1.ValueListWithFixedValues\";\n\ntype AnnotationsForProperty = {\n\t\"@com.sap.vocabularies.Common.v1.ValueList\"?: {\n\t\tSearchSupported?: boolean;\n\t};\n\t\"@com.sap.vocabularies.Common.v1.Label\"?: string; // AnnotationLabel\n\t\"@com.sap.vocabularies.Common.v1.Text\"?: {\n\t\t// AnnotationText\n\t\t$Path: string;\n\t};\n\t\"@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement\"?: {\n\t\t// AnnotationTextUITextArrangement\n\t\t$EnumMember?: string;\n\t};\n\t\"@com.sap.vocabularies.UI.v1.HiddenFilter\"?: boolean;\n\t\"@com.sap.vocabularies.Common.v1.ValueListWithFixedValues\"?: boolean; // AnnotationValueListWithFixedValues\n\t\"@com.sap.vocabularies.Common.v1.ValueListRelevantQualifiers\"?: string[];\n\t\"@com.sap.vocabularies.UI.v1.Hidden\"?: string;\n};\n\ntype AnnotationSelectionField = {\n\t$PropertyPath: string;\n};\n\ntype AnnotationsForEntityType = {\n\t\"@com.sap.vocabularies.UI.v1.SelectionFields\"?: AnnotationSelectionField[];\n};\n\ntype ColumnProperty = {\n\t$Type: string;\n\t$kind: string;\n\t$isCollection: boolean;\n};\n\nexport type InOutParameter = {\n\tparmeterType: string;\n\tsource: string;\n\thelpPath: string;\n\tinitialValueFilterEmpty: boolean;\n\tconstantValue?: string | boolean;\n};\n\ntype ValueHelpPayloadInfo = {\n\tvhKeys?: string[];\n\tvhParameters?: InOutParameter[];\n};\n\ntype ValueHelpQualifierMap = Record<string, ValueHelpPayloadInfo>;\n\nexport type ValueHelpPayload = {\n\tpropertyPath: string;\n\tqualifiers: ValueHelpQualifierMap;\n\tvalueHelpQualifier: string;\n\tconditionModel?: any;\n\tisActionParameterDialog?: boolean;\n\tisUnitValueHelp?: boolean;\n\trequestGroupId?: string;\n\tuseMultiValueField?: boolean;\n\tisValueListWithFixedValues?: boolean;\n};\n\ntype ColumnDef = {\n\tpath: string;\n\tlabel: string;\n\tsortable: boolean;\n\tfilterable: boolean | CompiledBindingToolkitExpression;\n\t$Type: string;\n};\n\nexport type ValueListInfo = {\n\tkeyValue: string;\n\tdescriptionValue: string;\n\tfieldPropertyPath: string;\n\tvhKeys: string[];\n\tvhParameters: InOutParameter[];\n\tvalueListInfo: AnnotationValueListType;\n\tcolumnDefs: ColumnDef[];\n\tvalueHelpQualifier: string;\n};\n\ntype DisplayFormat = \"Description\" | \"ValueDescription\" | \"Value\" | \"DescriptionValue\";\n\ntype Path = {\n\tfieldPropertyPath: string;\n\tdescriptionPath: string;\n\tkey: string;\n};\n\nfunction _getDefaultSortPropertyName(valueListInfo: AnnotationValueListType) {\n\tlet sortFieldName: string | undefined;\n\tconst metaModel = valueListInfo.$model.getMetaModel();\n\tconst entitySetAnnotations = (metaModel.getObject(`/${valueListInfo.CollectionPath}@`) || {}) as AnnotationsForCollection;\n\tconst sortRestrictionsInfo = ODataMetaModelUtil.getSortRestrictionsInfo(entitySetAnnotations);\n\tconst foundElement = valueListInfo.Parameters.find(function (element) {\n\t\treturn (\n\t\t\t(element.$Type === CommonAnnotationTypes.ValueListParameterInOut ||\n\t\t\t\telement.$Type === CommonAnnotationTypes.ValueListParameterOut ||\n\t\t\t\telement.$Type === CommonAnnotationTypes.ValueListParameterDisplayOnly) &&\n\t\t\t!(\n\t\t\t\tmetaModel.getObject(`/${valueListInfo.CollectionPath}/${element.ValueListProperty}@com.sap.vocabularies.UI.v1.Hidden`) ===\n\t\t\t\ttrue\n\t\t\t)\n\t\t);\n\t});\n\tif (foundElement) {\n\t\tif (\n\t\t\tmetaModel.getObject(\n\t\t\t\t`/${valueListInfo.CollectionPath}/${foundElement.ValueListProperty}@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement/$EnumMember`\n\t\t\t) === \"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly\"\n\t\t) {\n\t\t\tsortFieldName = metaModel.getObject(\n\t\t\t\t`/${valueListInfo.CollectionPath}/${foundElement.ValueListProperty}@com.sap.vocabularies.Common.v1.Text/$Path`\n\t\t\t);\n\t\t} else {\n\t\t\tsortFieldName = foundElement.ValueListProperty;\n\t\t}\n\t}\n\tif (sortFieldName && (!sortRestrictionsInfo.propertyInfo[sortFieldName] || sortRestrictionsInfo.propertyInfo[sortFieldName].sortable)) {\n\t\treturn sortFieldName;\n\t} else {\n\t\treturn undefined;\n\t}\n}\n\nfunction _redundantDescription(oVLParameter: any, aColumnInfo: any[]) {\n\tconst oColumnInfo = aColumnInfo.find(function (columnInfo: any) {\n\t\treturn oVLParameter.ValueListProperty === columnInfo.textColumnName;\n\t});\n\tif (\n\t\toVLParameter.ValueListProperty === oColumnInfo?.textColumnName &&\n\t\t!oColumnInfo.keyColumnHidden &&\n\t\toColumnInfo.keyColumnDisplayFormat !== \"Value\"\n\t) {\n\t\treturn true;\n\t}\n\treturn undefined;\n}\n\nfunction _hasImportanceHigh(oValueListContext: any) {\n\treturn oValueListContext.Parameters.some(function (oParameter: any) {\n\t\treturn (\n\t\t\toParameter[\"@com.sap.vocabularies.UI.v1.Importance\"] &&\n\t\t\toParameter[\"@com.sap.vocabularies.UI.v1.Importance\"].$EnumMember === \"com.sap.vocabularies.UI.v1.ImportanceType/High\"\n\t\t);\n\t});\n}\n\nfunction _build$SelectString(control: any) {\n\tconst oViewData = control.getModel(\"viewData\");\n\tif (oViewData) {\n\t\tconst oData = oViewData.getData();\n\t\tif (oData) {\n\t\t\tconst aColumns = oData.columns;\n\t\t\tif (aColumns) {\n\t\t\t\treturn aColumns.reduce(function (sQuery: any, oProperty: any) {\n\t\t\t\t\t// Navigation properties (represented by X/Y) should not be added to $select.\n\t\t\t\t\t// TODO : They should be added as $expand=X($select=Y) instead\n\t\t\t\t\tif (oProperty.path && oProperty.path.indexOf(\"/\") === -1) {\n\t\t\t\t\t\tsQuery = sQuery ? `${sQuery},${oProperty.path}` : oProperty.path;\n\t\t\t\t\t}\n\t\t\t\t\treturn sQuery;\n\t\t\t\t}, undefined);\n\t\t\t}\n\t\t}\n\t}\n\treturn undefined;\n}\n\nfunction _getValueHelpColumnDisplayFormat(oPropertyAnnotations: any, isValueHelpWithFixedValues: any) {\n\tconst sDisplayMode = CommonUtils.computeDisplayMode(oPropertyAnnotations, undefined);\n\tconst oTextAnnotation = oPropertyAnnotations && oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Text\"];\n\tconst oTextArrangementAnnotation =\n\t\toTextAnnotation && oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement\"];\n\tif (isValueHelpWithFixedValues) {\n\t\treturn oTextAnnotation && typeof oTextAnnotation !== \"string\" && oTextAnnotation.$Path ? sDisplayMode : \"Value\";\n\t} else {\n\t\t// Only explicit defined TextArrangements in a Value Help with Dialog are considered\n\t\treturn oTextArrangementAnnotation ? sDisplayMode : \"Value\";\n\t}\n}\n\nconst ValueListHelper = {\n\tgetValueListCollectionEntitySet: function (oValueListContext: any) {\n\t\tconst mValueList = oValueListContext.getObject();\n\t\treturn mValueList.$model.getMetaModel().createBindingContext(`/${mValueList.CollectionPath}`);\n\t},\n\n\tgetTableDelegate: function (oValueList: any) {\n\t\tlet sDefaultSortPropertyName = _getDefaultSortPropertyName(oValueList);\n\t\tif (sDefaultSortPropertyName) {\n\t\t\tsDefaultSortPropertyName = `'${sDefaultSortPropertyName}'`;\n\t\t}\n\t\treturn (\n\t\t\t\"{name: 'sap/fe/macros/internal/valuehelp/TableDelegate', payload: {collectionName: '\" +\n\t\t\toValueList.CollectionPath +\n\t\t\t\"'\" +\n\t\t\t(sDefaultSortPropertyName ? \", defaultSortPropertyName: \" + sDefaultSortPropertyName : \"\") +\n\t\t\t\"}}\"\n\t\t);\n\t},\n\n\tgetSortConditionsFromPresentationVariant: function (valueListInfo: AnnotationValueListType, isSuggestion: boolean) {\n\t\tconst presentationVariantQualifier =\n\t\t\t\tvalueListInfo.PresentationVariantQualifier === \"\" ? \"\" : `#${valueListInfo.PresentationVariantQualifier}`,\n\t\t\tpresentationVariantPath = `/${valueListInfo.CollectionPath}/@com.sap.vocabularies.UI.v1.PresentationVariant${presentationVariantQualifier}`;\n\t\tconst presentationVariant = valueListInfo.$model.getMetaModel().getObject(presentationVariantPath);\n\t\tif (presentationVariant && presentationVariant.SortOrder) {\n\t\t\tconst sortConditions: any = {\n\t\t\t\tsorters: []\n\t\t\t};\n\t\t\tif (isSuggestion) {\n\t\t\t\tpresentationVariant.SortOrder.forEach(function (condition: any) {\n\t\t\t\t\tconst sorter: any = {};\n\t\t\t\t\tsorter.path = condition.Property.$PropertyPath;\n\t\t\t\t\tif (condition.Descending) {\n\t\t\t\t\t\tsorter.descending = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsorter.ascending = true;\n\t\t\t\t\t}\n\t\t\t\t\tsortConditions.sorters.push(sorter);\n\t\t\t\t});\n\t\t\t\treturn `sorter: ${JSON.stringify(sortConditions.sorters)}`;\n\t\t\t} else {\n\t\t\t\tpresentationVariant.SortOrder.forEach(function (condition: any) {\n\t\t\t\t\tconst sorter: any = {};\n\t\t\t\t\tsorter.name = condition.Property.$PropertyPath;\n\t\t\t\t\tif (condition.Descending) {\n\t\t\t\t\t\tsorter.descending = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsorter.ascending = true;\n\t\t\t\t\t}\n\t\t\t\t\tsortConditions.sorters.push(sorter);\n\t\t\t\t});\n\t\t\t\treturn JSON.stringify(sortConditions);\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t},\n\n\tgetPropertyPath: function (oParameters: any) {\n\t\treturn !oParameters.UnboundAction\n\t\t\t? `${oParameters.EntityTypePath}/${oParameters.Action}/${oParameters.Property}`\n\t\t\t: `/${oParameters.Action.substring(oParameters.Action.lastIndexOf(\".\") + 1)}/${oParameters.Property}`;\n\t},\n\n\tgetValueListProperty: function (oPropertyContext: any) {\n\t\tconst oValueListModel = oPropertyContext.getModel();\n\t\tconst mValueList = oValueListModel.getObject(\"/\");\n\t\treturn mValueList.$model.getMetaModel().createBindingContext(`/${mValueList.CollectionPath}/${oPropertyContext.getObject()}`);\n\t},\n\n\t// This function is used for value help m-table and mdc-table\n\tgetColumnVisibility: function (oValueList: any, oVLParameter: any, oSource: any) {\n\t\tconst isDropDownList = oSource && !!oSource.valueHelpWithFixedValues,\n\t\t\toColumnInfo = oSource.columnInfo,\n\t\t\tisVisible = !_redundantDescription(oVLParameter, oColumnInfo.columnInfos),\n\t\t\tisDialogTable = oColumnInfo.isDialogTable;\n\n\t\tif (isDropDownList || (!isDropDownList && isDialogTable) || (!isDropDownList && !_hasImportanceHigh(oValueList))) {\n\t\t\tconst columnWithHiddenAnnotation = oColumnInfo.columnInfos.find(function (columnInfo: any) {\n\t\t\t\treturn oVLParameter.ValueListProperty === columnInfo.columnName && columnInfo.hasHiddenAnnotation === true;\n\t\t\t});\n\t\t\treturn !columnWithHiddenAnnotation ? isVisible : false;\n\t\t} else if (!isDropDownList && _hasImportanceHigh(oValueList)) {\n\t\t\treturn oVLParameter &&\n\t\t\t\toVLParameter[\"@com.sap.vocabularies.UI.v1.Importance\"] &&\n\t\t\t\toVLParameter[\"@com.sap.vocabularies.UI.v1.Importance\"].$EnumMember === \"com.sap.vocabularies.UI.v1.ImportanceType/High\"\n\t\t\t\t? true\n\t\t\t\t: false;\n\t\t}\n\t\treturn true;\n\t},\n\n\tgetColumnVisibilityInfo: function (oValueList: any, sPropertyFullPath: any, bIsDropDownListe: any, isDialogTable: any) {\n\t\tconst oMetaModel = oValueList.$model.getMetaModel();\n\t\tconst aColumnInfos: any[] = [];\n\t\tconst oColumnInfos = {\n\t\t\tisDialogTable: isDialogTable,\n\t\t\tcolumnInfos: aColumnInfos\n\t\t};\n\n\t\toValueList.Parameters.forEach(function (oParameter: any) {\n\t\t\tconst oPropertyAnnotations = oMetaModel.getObject(`/${oValueList.CollectionPath}/${oParameter.ValueListProperty}@`);\n\t\t\tconst oTextAnnotation = oPropertyAnnotations && oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Text\"];\n\t\t\tlet columnInfo: any = {};\n\t\t\tif (oTextAnnotation) {\n\t\t\t\tcolumnInfo = {\n\t\t\t\t\tkeyColumnHidden: oPropertyAnnotations[\"@com.sap.vocabularies.UI.v1.Hidden\"] ? true : false,\n\t\t\t\t\tkeyColumnDisplayFormat: oTextAnnotation && _getValueHelpColumnDisplayFormat(oPropertyAnnotations, bIsDropDownListe),\n\t\t\t\t\ttextColumnName: oTextAnnotation && oTextAnnotation.$Path,\n\t\t\t\t\tcolumnName: oParameter.ValueListProperty,\n\t\t\t\t\thasHiddenAnnotation: oPropertyAnnotations && oPropertyAnnotations[\"@com.sap.vocabularies.UI.v1.Hidden\"] ? true : false\n\t\t\t\t};\n\t\t\t} else if (oPropertyAnnotations && oPropertyAnnotations[\"@com.sap.vocabularies.UI.v1.Hidden\"]) {\n\t\t\t\tcolumnInfo = {\n\t\t\t\t\tcolumnName: oParameter.ValueListProperty,\n\t\t\t\t\thasHiddenAnnotation: oPropertyAnnotations && oPropertyAnnotations[\"@com.sap.vocabularies.UI.v1.Hidden\"] ? true : false\n\t\t\t\t};\n\t\t\t}\n\t\t\toColumnInfos.columnInfos.push(columnInfo);\n\t\t});\n\n\t\treturn oColumnInfos;\n\t},\n\n\tgetTableItemsParameters: function (\n\t\tvalueListInfo: AnnotationValueListType,\n\t\trequestGroupId: string,\n\t\tisSuggestion: boolean,\n\t\tisValueHelpWithFixedValues: boolean\n\t) {\n\t\tconst itemParameters = [`path: '/${valueListInfo.CollectionPath}'`];\n\n\t\t// add select to oBindingInfo (BCP 2180255956 / 2170163012)\n\t\tconst selectString = _build$SelectString(this);\n\n\t\tif (requestGroupId) {\n\t\t\tconst selectStringPart = selectString ? `, '${selectString}'` : \"\";\n\n\t\t\titemParameters.push(`parameters: {$$groupId: '${requestGroupId}'${selectStringPart}}`);\n\t\t} else if (selectString) {\n\t\t\titemParameters.push(`parameters: {$select: '${selectString}'}`);\n\t\t}\n\n\t\tconst isSuspended = valueListInfo.Parameters.some(function (oParameter) {\n\t\t\treturn isSuggestion || oParameter.$Type === CommonAnnotationTypes.ValueListParameterIn;\n\t\t});\n\t\titemParameters.push(`suspended: ${isSuspended}`);\n\n\t\tif (!isValueHelpWithFixedValues) {\n\t\t\titemParameters.push(\"length: 10\");\n\t\t}\n\n\t\tconst sortConditionsFromPresentationVariant = ValueListHelper.getSortConditionsFromPresentationVariant(valueListInfo, isSuggestion);\n\n\t\tif (sortConditionsFromPresentationVariant) {\n\t\t\titemParameters.push(sortConditionsFromPresentationVariant);\n\t\t} else if (isValueHelpWithFixedValues) {\n\t\t\tconst defaultSortPropertyName = _getDefaultSortPropertyName(valueListInfo);\n\n\t\t\tif (defaultSortPropertyName) {\n\t\t\t\titemParameters.push(`sorter: [{path: '${defaultSortPropertyName}', ascending: true}]`);\n\t\t\t}\n\t\t}\n\n\t\treturn \"{\" + itemParameters.join(\", \") + \"}\";\n\t},\n\n\t// Is needed for \"external\" representation in qunit\n\thasImportance: function (oValueListContext: any) {\n\t\treturn _hasImportanceHigh(oValueListContext.getObject()) ? \"Importance/High\" : \"None\";\n\t},\n\n\t// Is needed for \"external\" representation in qunit\n\tgetMinScreenWidth: function (oValueList: any) {\n\t\treturn _hasImportanceHigh(oValueList) ? \"{= ${_VHUI>/minScreenWidth}}\" : \"416px\";\n\t},\n\n\t/**\n\t * Retrieves the column width for a given property.\n\t *\n\t * @param propertyPath The propertyPath\n\t * @returns The width as a string.\n\t */\n\tgetColumnWidth: function (propertyPath: DataModelObjectPath) {\n\t\tconst property = propertyPath.targetObject;\n\t\tlet relatedProperty: Property[] = [property];\n\t\t// The additional property could refer to the text, currency, unit or timezone\n\t\tconst additionalProperty =\n\t\t\t\tgetAssociatedTextProperty(property) ||\n\t\t\t\tgetAssociatedCurrencyProperty(property) ||\n\t\t\t\tgetAssociatedUnitProperty(property) ||\n\t\t\t\tgetAssociatedTimezoneProperty(property),\n\t\t\ttextAnnotation = property.annotations?.Common?.Text,\n\t\t\ttextArrangement = textAnnotation?.annotations?.UI?.TextArrangement?.toString(),\n\t\t\tlabel = property.annotations?.Common?.Label?.toString(),\n\t\t\tdisplayMode = textArrangement && getDisplayMode(propertyPath);\n\t\tif (additionalProperty) {\n\t\t\tif (displayMode === \"Description\") {\n\t\t\t\trelatedProperty = [additionalProperty];\n\t\t\t} else if (!textAnnotation || (displayMode && displayMode !== \"Value\")) {\n\t\t\t\trelatedProperty.push(additionalProperty);\n\t\t\t}\n\t\t}\n\n\t\tlet size = 0;\n\t\tconst instances: ODataType[] = [];\n\n\t\trelatedProperty.forEach((prop: Property) => {\n\t\t\tconst propertyTypeConfig = getTypeConfig(prop, undefined);\n\t\t\tconst PropertyODataConstructor = ObjectPath.get(propertyTypeConfig.type);\n\t\t\tif (PropertyODataConstructor) {\n\t\t\t\tinstances.push(new PropertyODataConstructor(propertyTypeConfig.formatOptions, propertyTypeConfig.constraints));\n\t\t\t}\n\t\t});\n\t\tconst sWidth = Util.calcColumnWidth(instances, label);\n\t\tsize = sWidth ? parseFloat(sWidth.replace(\"rem\", \"\")) : 0;\n\n\t\tif (size === 0) {\n\t\t\tLog.error(`Cannot compute the column width for property: ${property.name}`);\n\t\t}\n\t\treturn size <= 20 ? size.toString() + \"rem\" : \"20rem\";\n\t},\n\n\tgetOutParameterPaths: function (aParameters: any) {\n\t\tlet sPath = \"\";\n\t\taParameters.forEach(function (oParameter: any) {\n\t\t\tif (oParameter.$Type.endsWith(\"Out\")) {\n\t\t\t\tsPath += `{${oParameter.ValueListProperty}}`;\n\t\t\t}\n\t\t});\n\t\treturn sPath;\n\t},\n\n\tentityIsSearchable: function (propertyAnnotations: AnnotationsForProperty, collectionAnnotations: AnnotationsForCollection): boolean {\n\t\tconst searchSupported = propertyAnnotations[\"@com.sap.vocabularies.Common.v1.ValueList\"]?.SearchSupported,\n\t\t\tsearchable = collectionAnnotations[\"@Org.OData.Capabilities.V1.SearchRestrictions\"]?.Searchable;\n\n\t\tif (\n\t\t\t(searchable === undefined && searchSupported === false) ||\n\t\t\t(searchable === true && searchSupported === false) ||\n\t\t\tsearchable === false\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t * Returns the condition path required for the condition model.\n\t * For e.g. <1:N-PropertyName>*\\/<1:1-PropertyName>/<PropertyName>.\n\t *\n\t * @param metaModel The metamodel instance\n\t * @param entitySet The entity set path\n\t * @param propertyPath The property path\n\t * @returns The formatted condition path\n\t * @private\n\t */\n\t_getConditionPath: function (metaModel: ODataMetaModel, entitySet: string, propertyPath: string): string {\n\t\t// (see also: sap/fe/core/converters/controls/ListReport/FilterBar.ts)\n\t\tconst parts = propertyPath.split(\"/\");\n\t\tlet conditionPath = \"\",\n\t\t\tpartialPath: string | undefined;\n\n\t\twhile (parts.length) {\n\t\t\tlet part = parts.shift() as string;\n\t\t\tpartialPath = partialPath ? `${partialPath}/${part}` : part;\n\t\t\tconst property = metaModel.getObject(`${entitySet}/${partialPath}`);\n\t\t\tif (property && property.$kind === \"NavigationProperty\" && property.$isCollection) {\n\t\t\t\tpart += \"*\";\n\t\t\t}\n\t\t\tconditionPath = conditionPath ? `${conditionPath}/${part}` : part;\n\t\t}\n\t\treturn conditionPath;\n\t},\n\n\t/**\n\t * Returns array of column definitions corresponding to properties defined as Selection Fields on the CollectionPath entity set in a ValueHelp.\n\t *\n\t * @param metaModel The metamodel instance\n\t * @param entitySet The entity set path\n\t * @returns Array of column definitions\n\t * @private\n\t */\n\t_getColumnDefinitionFromSelectionFields: function (metaModel: ODataMetaModel, entitySet: string): ColumnDef[] {\n\t\tconst columnDefs: ColumnDef[] = [],\n\t\t\t//selectionFields = metaModel.getObject(entitySet + \"/@com.sap.vocabularies.UI.v1.SelectionFields\") as SelectionField[] | undefined;\n\t\t\tentityTypeAnnotations = metaModel.getObject(`${entitySet}/@`) as AnnotationsForEntityType,\n\t\t\tselectionFields = entityTypeAnnotations[\"@com.sap.vocabularies.UI.v1.SelectionFields\"];\n\n\t\tif (selectionFields) {\n\t\t\tselectionFields.forEach(function (selectionField) {\n\t\t\t\tconst selectionFieldPath = `${entitySet}/${selectionField.$PropertyPath}`,\n\t\t\t\t\tconditionPath = ValueListHelper._getConditionPath(metaModel, entitySet, selectionField.$PropertyPath),\n\t\t\t\t\tpropertyAnnotations = metaModel.getObject(`${selectionFieldPath}@`) as AnnotationsForProperty,\n\t\t\t\t\tcolumnDef = {\n\t\t\t\t\t\tpath: conditionPath,\n\t\t\t\t\t\tlabel: propertyAnnotations[AnnotationLabel] || selectionFieldPath,\n\t\t\t\t\t\tsortable: true,\n\t\t\t\t\t\tfilterable: CommonUtils.isPropertyFilterable(metaModel, entitySet, selectionField.$PropertyPath, false),\n\t\t\t\t\t\t$Type: metaModel.getObject(selectionFieldPath).$Type\n\t\t\t\t\t};\n\t\t\t\tcolumnDefs.push(columnDef);\n\t\t\t});\n\t\t}\n\n\t\treturn columnDefs;\n\t},\n\n\t_mergeColumnDefinitionsFromProperties: function (\n\t\tcolumnDefs: ColumnDef[],\n\t\tvalueListInfo: AnnotationValueListType,\n\t\tvalueListProperty: string,\n\t\tproperty: ColumnProperty,\n\t\tpropertyAnnotations: AnnotationsForProperty\n\t): void {\n\t\tlet columnPath = valueListProperty,\n\t\t\tcolumnPropertyType = property.$Type;\n\t\tconst label = propertyAnnotations[AnnotationLabel] || columnPath,\n\t\t\ttextAnnotation = propertyAnnotations[AnnotationText];\n\n\t\tif (\n\t\t\ttextAnnotation &&\n\t\t\tpropertyAnnotations[AnnotationTextUITextArrangement]?.$EnumMember === \"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly\"\n\t\t) {\n\t\t\t// the column property is the one coming from the text annotation\n\t\t\tcolumnPath = textAnnotation.$Path;\n\t\t\tconst textPropertyPath = `/${valueListInfo.CollectionPath}/${columnPath}`;\n\t\t\tcolumnPropertyType = valueListInfo.$model.getMetaModel().getObject(textPropertyPath).$Type as string;\n\t\t}\n\n\t\tif (columnNotAlreadyDefined(columnDefs, columnPath)) {\n\t\t\tconst columnDef: ColumnDef = {\n\t\t\t\tpath: columnPath,\n\t\t\t\tlabel: label,\n\t\t\t\tsortable: true,\n\t\t\t\tfilterable: !propertyAnnotations[\"@com.sap.vocabularies.UI.v1.HiddenFilter\"],\n\t\t\t\t$Type: columnPropertyType\n\t\t\t};\n\t\t\tcolumnDefs.push(columnDef);\n\t\t}\n\t},\n\n\tfilterInOutParameters: function (vhParameters: InOutParameter[], typeFilter: string[]) {\n\t\treturn vhParameters.filter(function (parameter) {\n\t\t\treturn typeFilter.indexOf(parameter.parmeterType) > -1;\n\t\t});\n\t},\n\n\tgetInParameters: function (vhParameters: InOutParameter[]) {\n\t\treturn ValueListHelper.filterInOutParameters(vhParameters, [\n\t\t\tAnnotationValueListParameterIn,\n\t\t\tAnnotationValueListParameterConstant,\n\t\t\tAnnotationValueListParameterInOut\n\t\t]);\n\t},\n\n\tgetOutParameters: function (vhParameters: InOutParameter[]) {\n\t\treturn ValueListHelper.filterInOutParameters(vhParameters, [AnnotationValueListParameterOut, AnnotationValueListParameterInOut]);\n\t},\n\n\tcreateVHUIModel: function (valueHelp: ValueHelp, propertyPath: string, metaModel: ODataMetaModel): JSONModel {\n\t\t// setting the _VHUI model evaluated in the ValueListTable fragment\n\t\tconst vhUIModel = new JSONModel({}),\n\t\t\tpropertyAnnotations = metaModel.getObject(`${propertyPath}@`) as AnnotationsForProperty;\n\n\t\tvalueHelp.setModel(vhUIModel, \"_VHUI\");\n\t\t// Identifies the \"ContextDependent-Scenario\"\n\t\tvhUIModel.setProperty(\n\t\t\t\"/hasValueListRelevantQualifiers\",\n\t\t\t!!propertyAnnotations[\"@com.sap.vocabularies.Common.v1.ValueListRelevantQualifiers\"]\n\t\t);\n\t\t/* Property label for dialog title */\n\t\tvhUIModel.setProperty(\"/propertyLabel\", propertyAnnotations[AnnotationLabel]);\n\n\t\treturn vhUIModel;\n\t},\n\n\t/**\n\t * Returns the title of the value help dialog.\n\t * By default, the data field label is used, otherwise either the property label or the value list label is used as a fallback.\n\t * For context-dependent value helps, by default the value list label is used, otherwise either the property label or the data field label is used as a fallback.\n\t *\n\t * @param valueHelp The valueHelp instance\n\t * @param valuehelpLabel The label in the value help metadata\n\t * @returns The title for the valueHelp dialog\n\t * @private\n\t */\n\t_getDialogTitle: function (valueHelp: ValueHelp, valuehelpLabel: string | undefined): string {\n\t\tconst propertyLabel = valueHelp.getModel(\"_VHUI\").getProperty(\"/propertyLabel\");\n\t\tconst dataFieldLabel = valueHelp.getControl()?.getProperty(\"label\");\n\t\treturn valueHelp.getModel(\"_VHUI\").getProperty(\"/hasValueListRelevantQualifiers\")\n\t\t\t? valuehelpLabel || propertyLabel || dataFieldLabel\n\t\t\t: dataFieldLabel || propertyLabel || valuehelpLabel;\n\t},\n\n\tdestroyVHContent: function (valueHelp: ValueHelp): void {\n\t\tif (valueHelp.getDialog()) {\n\t\t\tvalueHelp.getDialog().destroyContent();\n\t\t}\n\t\tif (valueHelp.getTypeahead()) {\n\t\t\tvalueHelp.getTypeahead().destroyContent();\n\t\t}\n\t},\n\n\tputDefaultQualifierFirst: function (qualifiers: string[]) {\n\t\tconst indexDefaultVH = qualifiers.indexOf(\"\");\n\n\t\t// default ValueHelp without qualifier should be the first\n\t\tif (indexDefaultVH > 0) {\n\t\t\tqualifiers.unshift(qualifiers[indexDefaultVH]);\n\t\t\tqualifiers.splice(indexDefaultVH + 1, 1);\n\t\t}\n\t\treturn qualifiers;\n\t},\n\n\t_getContextPrefix: function (bindingContext: Context | undefined, propertyBindingParts: string[]) {\n\t\tif (bindingContext && bindingContext.getPath()) {\n\t\t\tconst bindigContextParts = bindingContext.getPath().split(\"/\");\n\t\t\tif (propertyBindingParts.length - bindigContextParts.length > 1) {\n\t\t\t\tconst contextPrefixParts = [];\n\t\t\t\tfor (let i = bindigContextParts.length; i < propertyBindingParts.length - 1; i++) {\n\t\t\t\t\tcontextPrefixParts.push(propertyBindingParts[i]);\n\t\t\t\t}\n\t\t\t\treturn `${contextPrefixParts.join(\"/\")}/`;\n\t\t\t}\n\t\t}\n\n\t\treturn \"\";\n\t},\n\n\t_getVhParameter: function (\n\t\tconditionModel: string,\n\t\tvalueHelp: ValueHelp,\n\t\tcontextPrefix: string,\n\t\tparameter: AnnotationValueListParameter,\n\t\tvhMetaModel: ODataMetaModel,\n\t\tlocalDataPropertyPath: string\n\t): InOutParameter {\n\t\tlet valuePath = \"\";\n\t\tconst bindingContext = valueHelp.getBindingContext();\n\t\tif (conditionModel && conditionModel.length > 0) {\n\t\t\tif (\n\t\t\t\tvalueHelp.getParent()?.isA(\"sap.ui.mdc.Table\") &&\n\t\t\t\tbindingContext &&\n\t\t\t\tValueListHelper._parameterIsA(parameter, [\n\t\t\t\t\tCommonAnnotationTypes.ValueListParameterIn,\n\t\t\t\t\tCommonAnnotationTypes.ValueListParameterInOut\n\t\t\t\t])\n\t\t\t) {\n\t\t\t\t// Special handling for value help used in filter dialog\n\t\t\t\tconst parts = localDataPropertyPath.split(\"/\");\n\t\t\t\tif (parts.length > 1) {\n\t\t\t\t\tconst firstNavigationProperty = parts[0];\n\t\t\t\t\tconst oBoundEntity = vhMetaModel.getMetaContext(bindingContext.getPath());\n\t\t\t\t\tconst sPathOfTable = (valueHelp.getParent() as any).getRowBinding().getPath(); //TODO\n\t\t\t\t\tif (oBoundEntity.getObject(`${sPathOfTable}/$Partner`) === firstNavigationProperty) {\n\t\t\t\t\t\t// Using the condition model doesn't make any sense in case an in-parameter uses a navigation property\n\t\t\t\t\t\t// referring to the partner. Therefore reducing the path and using the FVH context instead of the condition model\n\t\t\t\t\t\tvaluePath = localDataPropertyPath.replace(firstNavigationProperty + \"/\", \"\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!valuePath) {\n\t\t\t\tvaluePath = conditionModel + \">/conditions/\" + localDataPropertyPath;\n\t\t\t}\n\t\t} else {\n\t\t\tvaluePath = contextPrefix + localDataPropertyPath;\n\t\t}\n\n\t\treturn {\n\t\t\tparmeterType: parameter.$Type,\n\t\t\tsource: valuePath,\n\t\t\thelpPath: parameter.ValueListProperty,\n\t\t\tconstantValue: parameter.Constant,\n\t\t\tinitialValueFilterEmpty: Boolean(parameter.InitialValueIsSignificant)\n\t\t};\n\t},\n\n\t_parameterIsA(parameter: AnnotationValueListParameter, parameterTypes: CommonAnnotationTypes[]): boolean {\n\t\treturn parameterTypes.includes(parameter.$Type as CommonAnnotationTypes);\n\t},\n\n\t_enrichPath: function (\n\t\tpath: Path,\n\t\tpropertyPath: string,\n\t\tlocalDataPropertyPath: string,\n\t\tparameter: AnnotationValueListParameter,\n\t\tpropertyName: string | undefined,\n\t\tpropertyAnnotations: AnnotationsForProperty\n\t) {\n\t\tif (\n\t\t\t!path.key &&\n\t\t\tValueListHelper._parameterIsA(parameter, [\n\t\t\t\tCommonAnnotationTypes.ValueListParameterOut,\n\t\t\t\tCommonAnnotationTypes.ValueListParameterInOut\n\t\t\t]) &&\n\t\t\tlocalDataPropertyPath === propertyName\n\t\t) {\n\t\t\tpath.fieldPropertyPath = propertyPath;\n\t\t\tpath.key = parameter.ValueListProperty;\n\n\t\t\t//Only the text annotation of the key can specify the description\n\t\t\tpath.descriptionPath = propertyAnnotations[AnnotationText]?.$Path || \"\";\n\t\t}\n\t},\n\n\t_enrichKeys: function (vhKeys: string[], parameter: AnnotationValueListParameter) {\n\t\tif (\n\t\t\tValueListHelper._parameterIsA(parameter, [\n\t\t\t\tCommonAnnotationTypes.ValueListParameterOut,\n\t\t\t\tCommonAnnotationTypes.ValueListParameterInOut\n\t\t\t]) &&\n\t\t\t!vhKeys.includes(parameter.ValueListProperty)\n\t\t) {\n\t\t\tvhKeys.push(parameter.ValueListProperty);\n\t\t}\n\t},\n\n\t_processParameters: function (\n\t\tannotationValueListType: AnnotationValueListType,\n\t\tpropertyName: string | undefined,\n\t\tconditionModel: string,\n\t\tvalueHelp: ValueHelp,\n\t\tcontextPrefix: string,\n\t\tvhMetaModel: ODataMetaModel,\n\t\tvalueHelpQualifier: string\n\t): ValueListInfo {\n\t\tconst metaModel = annotationValueListType.$model.getMetaModel(),\n\t\t\tentitySetPath = `/${annotationValueListType.CollectionPath}`,\n\t\t\tcolumnDefs = ValueListHelper._getColumnDefinitionFromSelectionFields(metaModel, entitySetPath),\n\t\t\tvhParameters: InOutParameter[] = [],\n\t\t\tvhKeys: string[] = metaModel.getObject(entitySetPath + `/`)?.$Key ? [...metaModel.getObject(entitySetPath + `/`).$Key] : [];\n\n\t\tconst path: Path = {\n\t\t\tfieldPropertyPath: \"\",\n\t\t\tdescriptionPath: \"\",\n\t\t\tkey: \"\"\n\t\t};\n\n\t\tfor (const parameter of annotationValueListType.Parameters) {\n\t\t\t//All String fields are allowed for filter\n\t\t\tconst propertyPath = `/${annotationValueListType.CollectionPath}/${parameter.ValueListProperty}`,\n\t\t\t\tproperty = metaModel.getObject(propertyPath),\n\t\t\t\tpropertyAnnotations = (metaModel.getObject(`${propertyPath}@`) || {}) as AnnotationsForProperty,\n\t\t\t\tlocalDataPropertyPath = parameter.LocalDataProperty?.$PropertyPath || \"\";\n\n\t\t\t// If property is undefined, then the property coming for the entry isn't defined in\n\t\t\t// the metamodel, therefore we don't need to add it in the in/out parameters\n\t\t\tif (property) {\n\t\t\t\t// Search for the *out Parameter mapped to the local property\n\t\t\t\tValueListHelper._enrichPath(path, propertyPath, localDataPropertyPath, parameter, propertyName, propertyAnnotations);\n\n\t\t\t\tconst valueListProperty = parameter.ValueListProperty;\n\t\t\t\tValueListHelper._mergeColumnDefinitionsFromProperties(\n\t\t\t\t\tcolumnDefs,\n\t\t\t\t\tannotationValueListType,\n\t\t\t\t\tvalueListProperty,\n\t\t\t\t\tproperty,\n\t\t\t\t\tpropertyAnnotations\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t//In and InOut and Out\n\t\t\tif (\n\t\t\t\tValueListHelper._parameterIsA(parameter, [\n\t\t\t\t\tCommonAnnotationTypes.ValueListParameterIn,\n\t\t\t\t\tCommonAnnotationTypes.ValueListParameterOut,\n\t\t\t\t\tCommonAnnotationTypes.ValueListParameterInOut\n\t\t\t\t]) &&\n\t\t\t\tlocalDataPropertyPath !== propertyName\n\t\t\t) {\n\t\t\t\tconst vhParameter = ValueListHelper._getVhParameter(\n\t\t\t\t\tconditionModel,\n\t\t\t\t\tvalueHelp,\n\t\t\t\t\tcontextPrefix,\n\t\t\t\t\tparameter,\n\t\t\t\t\tvhMetaModel,\n\t\t\t\t\tlocalDataPropertyPath\n\t\t\t\t);\n\t\t\t\tvhParameters.push(vhParameter);\n\t\t\t}\n\n\t\t\t//Constant as InParamter for filtering\n\t\t\tif (parameter.$Type === AnnotationValueListParameterConstant) {\n\t\t\t\tvhParameters.push({\n\t\t\t\t\tparmeterType: parameter.$Type,\n\t\t\t\t\tsource: parameter.ValueListProperty,\n\t\t\t\t\thelpPath: parameter.ValueListProperty,\n\t\t\t\t\tconstantValue: parameter.Constant,\n\t\t\t\t\tinitialValueFilterEmpty: Boolean(parameter.InitialValueIsSignificant)\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Enrich keys with out-parameters\n\t\t\tValueListHelper._enrichKeys(vhKeys, parameter);\n\t\t}\n\n\t\t/* Ensure that vhKeys are part of the columnDefs, otherwise it is not considered in $select (BCP 2270141154) */\n\t\tfor (const vhKey of vhKeys) {\n\t\t\tif (columnNotAlreadyDefined(columnDefs, vhKey)) {\n\t\t\t\tconst columnDef: ColumnDef = {\n\t\t\t\t\tpath: vhKey,\n\t\t\t\t\t$Type: metaModel.getObject(`/${annotationValueListType.CollectionPath}/${path.key}`).$Type,\n\t\t\t\t\tlabel: \"\",\n\t\t\t\t\tsortable: false,\n\t\t\t\t\tfilterable: undefined\n\t\t\t\t};\n\t\t\t\tcolumnDefs.push(columnDef);\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tkeyValue: path.key,\n\t\t\tdescriptionValue: path.descriptionPath,\n\t\t\tfieldPropertyPath: path.fieldPropertyPath,\n\t\t\tvhKeys: vhKeys,\n\t\t\tvhParameters: vhParameters,\n\t\t\tvalueListInfo: annotationValueListType,\n\t\t\tcolumnDefs: columnDefs,\n\t\t\tvalueHelpQualifier\n\t\t};\n\t},\n\n\t_logError: function (propertyPath: string, error?: unknown) {\n\t\tconst status = error ? (error as XMLHttpRequest).status : undefined;\n\t\tconst message = error instanceof Error ? error.message : String(error);\n\t\tconst msg = status === 404 ? `Metadata not found (${status}) for value help of property ${propertyPath}` : message;\n\n\t\tLog.error(msg);\n\t},\n\n\tgetValueListInfo: async function (valueHelp: ValueHelp, propertyPath: string, payload: ValueHelpPayload): Promise<ValueListInfo[]> {\n\t\tconst bindingContext = valueHelp.getBindingContext() as Context | undefined,\n\t\t\tconditionModel = payload.conditionModel,\n\t\t\tvhMetaModel = valueHelp.getModel().getMetaModel() as ODataMetaModel,\n\t\t\tvalueListInfos: ValueListInfo[] = [],\n\t\t\tpropertyPathParts = propertyPath.split(\"/\");\n\t\ttry {\n\t\t\tconst valueListByQualifier = (await vhMetaModel.requestValueListInfo(\n\t\t\t\tpropertyPath,\n\t\t\t\ttrue,\n\t\t\t\tbindingContext\n\t\t\t)) as AnnotationValueListTypeByQualifier;\n\t\t\tconst valueHelpQualifiers = ValueListHelper.putDefaultQualifierFirst(Object.keys(valueListByQualifier)),\n\t\t\t\tpropertyName = propertyPathParts.pop();\n\n\t\t\tconst contextPrefix = payload.useMultiValueField ? ValueListHelper._getContextPrefix(bindingContext, propertyPathParts) : \"\";\n\n\t\t\tfor (const valueHelpQualifier of valueHelpQualifiers) {\n\t\t\t\t// Add column definitions for properties defined as Selection fields on the CollectionPath entity set.\n\t\t\t\tconst annotationValueListType = valueListByQualifier[valueHelpQualifier];\n\n\t\t\t\tconst valueListInfo: ValueListInfo = ValueListHelper._processParameters(\n\t\t\t\t\tannotationValueListType,\n\t\t\t\t\tpropertyName,\n\t\t\t\t\tconditionModel,\n\t\t\t\t\tvalueHelp,\n\t\t\t\t\tcontextPrefix,\n\t\t\t\t\tvhMetaModel,\n\t\t\t\t\tvalueHelpQualifier\n\t\t\t\t);\n\t\t\t\tvalueListInfos.push(valueListInfo);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tthis._logError(propertyPath, err);\n\n\t\t\tValueListHelper.destroyVHContent(valueHelp);\n\t\t}\n\t\treturn valueListInfos;\n\t},\n\n\tALLFRAGMENTS: undefined as any,\n\tlogFragment: undefined as any,\n\n\t_logTemplatedFragments: function (propertyPath: string, fragmentName: string, fragmentDefinition: any): void {\n\t\tconst logInfo = {\n\t\t\tpath: propertyPath,\n\t\t\tfragmentName: fragmentName,\n\t\t\tfragment: fragmentDefinition\n\t\t};\n\t\tif (Log.getLevel() === Level.DEBUG) {\n\t\t\t//In debug mode we log all generated fragments\n\t\t\tValueListHelper.ALLFRAGMENTS = ValueListHelper.ALLFRAGMENTS || [];\n\t\t\tValueListHelper.ALLFRAGMENTS.push(logInfo);\n\t\t}\n\t\tif (ValueListHelper.logFragment) {\n\t\t\t//One Tool Subscriber allowed\n\t\t\tsetTimeout(function () {\n\t\t\t\tValueListHelper.logFragment(logInfo);\n\t\t\t}, 0);\n\t\t}\n\t},\n\n\t_templateFragment: async function <T extends Table | MdcInnerTable | MdcFilterBar>(\n\t\tfragmentName: string,\n\t\tvalueListInfo: ValueListInfo,\n\t\tsourceModel: JSONModel,\n\t\tpropertyPath: string\n\t): Promise<T> {\n\t\tconst localValueListInfo = valueListInfo.valueListInfo,\n\t\t\tvalueListModel = new JSONModel(localValueListInfo),\n\t\t\tvalueListServiceMetaModel = localValueListInfo.$model.getMetaModel(),\n\t\t\tviewData = new JSONModel({\n\t\t\t\tconverterType: \"ListReport\",\n\t\t\t\tcolumns: valueListInfo.columnDefs || null\n\t\t\t});\n\n\t\tconst fragmentDefinition = await XMLPreprocessor.process(\n\t\t\tXMLTemplateProcessor.loadTemplate(fragmentName, \"fragment\"),\n\t\t\t{ name: fragmentName },\n\t\t\t{\n\t\t\t\tbindingContexts: {\n\t\t\t\t\tvalueList: valueListModel.createBindingContext(\"/\"),\n\t\t\t\t\tcontextPath: valueListServiceMetaModel.createBindingContext(`/${localValueListInfo.CollectionPath}/`),\n\t\t\t\t\tsource: sourceModel.createBindingContext(\"/\")\n\t\t\t\t},\n\t\t\t\tmodels: {\n\t\t\t\t\tvalueList: valueListModel,\n\t\t\t\t\tcontextPath: valueListServiceMetaModel,\n\t\t\t\t\tsource: sourceModel,\n\t\t\t\t\tmetaModel: valueListServiceMetaModel,\n\t\t\t\t\tviewData: viewData\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\tValueListHelper._logTemplatedFragments(propertyPath, fragmentName, fragmentDefinition);\n\t\treturn (await Fragment.load({ definition: fragmentDefinition })) as T;\n\t},\n\n\t_getContentId: function (valueHelpId: string, valueHelpQualifier: string, isTypeahead: boolean): string {\n\t\tconst contentType = isTypeahead ? \"Popover\" : \"Dialog\";\n\n\t\treturn `${valueHelpId}::${contentType}::qualifier::${valueHelpQualifier}`;\n\t},\n\n\t_addInOutParametersToPayload: function (payload: ValueHelpPayload, valueListInfo: ValueListInfo): void {\n\t\tconst valueHelpQualifier = valueListInfo.valueHelpQualifier;\n\n\t\tif (!payload.qualifiers) {\n\t\t\tpayload.qualifiers = {};\n\t\t}\n\n\t\tif (!payload.qualifiers[valueHelpQualifier]) {\n\t\t\tpayload.qualifiers[valueHelpQualifier] = {\n\t\t\t\tvhKeys: valueListInfo.vhKeys,\n\t\t\t\tvhParameters: valueListInfo.vhParameters\n\t\t\t};\n\t\t}\n\t},\n\n\t_getValueHelpColumnDisplayFormat: function (\n\t\tpropertyAnnotations: AnnotationsForProperty,\n\t\tisValueHelpWithFixedValues: boolean\n\t): DisplayFormat {\n\t\tconst displayMode = CommonUtils.computeDisplayMode(propertyAnnotations, undefined),\n\t\t\ttextAnnotation = propertyAnnotations && propertyAnnotations[AnnotationText],\n\t\t\ttextArrangementAnnotation = textAnnotation && propertyAnnotations[AnnotationTextUITextArrangement];\n\n\t\tif (isValueHelpWithFixedValues) {\n\t\t\treturn textAnnotation && typeof textAnnotation !== \"string\" && textAnnotation.$Path ? displayMode : \"Value\";\n\t\t} else {\n\t\t\t// Only explicit defined TextArrangements in a Value Help with Dialog are considered\n\t\t\treturn textArrangementAnnotation ? displayMode : \"Value\";\n\t\t}\n\t},\n\n\t_getWidthInRem: function (control: Control, isUnitValueHelp: boolean): number {\n\t\tlet width = control.$().width(); // JQuery\n\t\tif (isUnitValueHelp && width) {\n\t\t\twidth = 0.3 * width;\n\t\t}\n\t\tconst floatWidth = width ? parseFloat(String(Rem.fromPx(width))) : 0;\n\n\t\treturn isNaN(floatWidth) ? 0 : floatWidth;\n\t},\n\n\t_getTableWidth: function (table: Table, minWidth: number): string {\n\t\tlet width: string;\n\t\tconst columns = table.getColumns(),\n\t\t\tvisibleColumns =\n\t\t\t\t(columns &&\n\t\t\t\t\tcolumns.filter(function (column) {\n\t\t\t\t\t\treturn column && column.getVisible && column.getVisible();\n\t\t\t\t\t})) ||\n\t\t\t\t[],\n\t\t\tsumWidth = visibleColumns.reduce(function (sum, column) {\n\t\t\t\twidth = column.getWidth();\n\t\t\t\tif (width && width.endsWith(\"px\")) {\n\t\t\t\t\twidth = String(Rem.fromPx(width));\n\t\t\t\t}\n\t\t\t\tconst floatWidth = parseFloat(width);\n\n\t\t\t\treturn sum + (isNaN(floatWidth) ? 9 : floatWidth);\n\t\t\t}, visibleColumns.length);\n\t\treturn `${Math.max(sumWidth, minWidth)}em`;\n\t},\n\n\t_createValueHelpTypeahead: async function (\n\t\tpropertyPath: string,\n\t\tvalueHelp: ValueHelp,\n\t\tcontent: MTable,\n\t\tvalueListInfo: ValueListInfo,\n\t\tpayload: ValueHelpPayload\n\t) {\n\t\tconst contentId = content.getId(),\n\t\t\tpropertyAnnotations = valueHelp.getModel().getMetaModel()!.getObject(`${propertyPath}@`) as AnnotationsForProperty,\n\t\t\tvalueHelpWithFixedValues = propertyAnnotations[AnnotationValueListWithFixedValues] ?? false,\n\t\t\tisDialogTable = false,\n\t\t\tcolumnInfo = ValueListHelper.getColumnVisibilityInfo(\n\t\t\t\tvalueListInfo.valueListInfo,\n\t\t\t\tpropertyPath,\n\t\t\t\tvalueHelpWithFixedValues,\n\t\t\t\tisDialogTable\n\t\t\t),\n\t\t\tsourceModel = new JSONModel({\n\t\t\t\tid: contentId,\n\t\t\t\tgroupId: payload.requestGroupId || undefined,\n\t\t\t\tbSuggestion: true,\n\t\t\t\tpropertyPath: propertyPath,\n\t\t\t\tcolumnInfo: columnInfo,\n\t\t\t\tvalueHelpWithFixedValues: valueHelpWithFixedValues\n\t\t\t});\n\n\t\tcontent.setKeyPath(valueListInfo.keyValue);\n\t\tcontent.setDescriptionPath(valueListInfo.descriptionValue);\n\t\tpayload.isValueListWithFixedValues = valueHelpWithFixedValues;\n\n\t\tconst collectionAnnotations = (valueListInfo.valueListInfo.$model\n\t\t\t.getMetaModel()\n\t\t\t.getObject(`/${valueListInfo.valueListInfo.CollectionPath}@`) || {}) as AnnotationsForCollection;\n\n\t\tcontent.setFilterFields(ValueListHelper.entityIsSearchable(propertyAnnotations, collectionAnnotations) ? \"$search\" : \"\");\n\n\t\tconst table = await ValueListHelper._templateFragment<Table>(\n\t\t\t\"sap.fe.macros.internal.valuehelp.ValueListTable\",\n\t\t\tvalueListInfo,\n\t\t\tsourceModel,\n\t\t\tpropertyPath\n\t\t);\n\n\t\ttable.setModel(valueListInfo.valueListInfo.$model);\n\n\t\tLog.info(`Value List- suggest Table XML content created [${propertyPath}]`, table.getMetadata().getName(), \"MDC Templating\");\n\n\t\tcontent.setTable(table);\n\n\t\tconst field = valueHelp.getControl();\n\n\t\tif (\n\t\t\tfield !== undefined &&\n\t\t\t(field.isA<FilterField>(\"sap.ui.mdc.FilterField\") ||\n\t\t\t\tfield.isA<Field>(\"sap.ui.mdc.Field\") ||\n\t\t\t\tfield.isA<MultiValueField>(\"sap.ui.mdc.MultiValueField\"))\n\t\t) {\n\t\t\t//Can the filterfield be something else that we need the .isA() check?\n\t\t\tconst reduceWidthForUnitValueHelp = Boolean(payload.isUnitValueHelp);\n\t\t\tconst tableWidth = ValueListHelper._getTableWidth(table, ValueListHelper._getWidthInRem(field, reduceWidthForUnitValueHelp));\n\t\t\ttable.setWidth(tableWidth);\n\n\t\t\tif (valueHelpWithFixedValues) {\n\t\t\t\ttable.setMode((field as FieldBase).getMaxConditions() === 1 ? \"SingleSelectMaster\" : \"MultiSelect\");\n\t\t\t} else {\n\t\t\t\ttable.setMode(\"SingleSelectMaster\");\n\t\t\t}\n\t\t}\n\t},\n\n\t_createValueHelpDialog: async function (\n\t\tpropertyPath: string,\n\t\tvalueHelp: ValueHelp,\n\t\tcontent: MDCTable,\n\t\tvalueListInfo: ValueListInfo,\n\t\tpayload: ValueHelpPayload\n\t): Promise<void> {\n\t\tconst propertyAnnotations = valueHelp.getModel().getMetaModel()!.getObject(`${propertyPath}@`) as AnnotationsForProperty,\n\t\t\tisDropDownListe = false,\n\t\t\tisDialogTable = true,\n\t\t\tcolumnInfo = ValueListHelper.getColumnVisibilityInfo(valueListInfo.valueListInfo, propertyPath, isDropDownListe, isDialogTable),\n\t\t\tsourceModel = new JSONModel({\n\t\t\t\tid: content.getId(),\n\t\t\t\tgroupId: payload.requestGroupId || undefined,\n\t\t\t\tbSuggestion: false,\n\t\t\t\tcolumnInfo: columnInfo,\n\t\t\t\tvalueHelpWithFixedValues: isDropDownListe\n\t\t\t});\n\n\t\tcontent.setKeyPath(valueListInfo.keyValue);\n\t\tcontent.setDescriptionPath(valueListInfo.descriptionValue);\n\n\t\tconst collectionAnnotations = (valueListInfo.valueListInfo.$model\n\t\t\t.getMetaModel()\n\t\t\t.getObject(`/${valueListInfo.valueListInfo.CollectionPath}@`) || {}) as AnnotationsForCollection;\n\n\t\tcontent.setFilterFields(ValueListHelper.entityIsSearchable(propertyAnnotations, collectionAnnotations) ? \"$search\" : \"\");\n\n\t\tconst tablePromise = ValueListHelper._templateFragment<MdcInnerTable>(\n\t\t\t\"sap.fe.macros.internal.valuehelp.ValueListDialogTable\",\n\t\t\tvalueListInfo,\n\t\t\tsourceModel,\n\t\t\tpropertyPath\n\t\t);\n\n\t\tconst filterBarPromise = ValueListHelper._templateFragment<MdcFilterBar>(\n\t\t\t\"sap.fe.macros.internal.valuehelp.ValueListFilterBar\",\n\t\t\tvalueListInfo,\n\t\t\tsourceModel,\n\t\t\tpropertyPath\n\t\t);\n\n\t\tconst [table, filterBar] = await Promise.all([tablePromise, filterBarPromise]);\n\n\t\ttable.setModel(valueListInfo.valueListInfo.$model);\n\t\tfilterBar.setModel(valueListInfo.valueListInfo.$model);\n\n\t\tcontent.setFilterBar(filterBar);\n\t\tcontent.setTable(table);\n\n\t\ttable.setFilter(filterBar.getId());\n\t\ttable.initialized();\n\n\t\tconst field = valueHelp.getControl();\n\t\tif (field !== undefined) {\n\t\t\ttable.setSelectionMode((field as FieldBase).getMaxConditions() === 1 ? \"SingleMaster\" : \"Multi\");\n\t\t}\n\t\ttable.setWidth(\"100%\");\n\n\t\t//This is a temporary workarround - provided by MDC (see FIORITECHP1-24002)\n\t\tconst mdcTable = table as any;\n\t\tmdcTable._setShowP13nButton(false);\n\t},\n\n\t_getContentById: function <T extends MTable | MDCTable>(contentList: Content[], contentId: string) {\n\t\treturn contentList.find(function (item) {\n\t\t\treturn item.getId() === contentId;\n\t\t}) as T | undefined;\n\t},\n\n\t_createPopoverContent: function (contentId: string, caseSensitive: boolean, useAsValueHelp: boolean) {\n\t\treturn new MTable({\n\t\t\tid: contentId,\n\t\t\tgroup: \"group1\",\n\t\t\tcaseSensitive: caseSensitive,\n\t\t\tuseAsValueHelp: useAsValueHelp\n\t\t} as $MTableSettings);\n\t},\n\n\t_createDialogContent: function (contentId: string, caseSensitive: boolean, forceBind: boolean) {\n\t\treturn new MDCTable({\n\t\t\tid: contentId,\n\t\t\tgroup: \"group1\",\n\t\t\tcaseSensitive: caseSensitive,\n\t\t\tforceBind: forceBind\n\t\t} as $MDCTableSettings);\n\t},\n\n\t_showConditionsContent: function (contentList: Content[], container: Container) {\n\t\tlet conditionsContent =\n\t\t\tcontentList.length && contentList[contentList.length - 1].getMetadata().getName() === \"sap.ui.mdc.valuehelp.content.Conditions\"\n\t\t\t\t? contentList[contentList.length - 1]\n\t\t\t\t: undefined;\n\n\t\tif (conditionsContent) {\n\t\t\tconditionsContent.setVisible(true);\n\t\t} else {\n\t\t\tconditionsContent = new Conditions();\n\t\t\tcontainer.addContent(conditionsContent);\n\t\t}\n\t},\n\n\t_alignOrCreateContent: function (\n\t\tvalueListInfo: ValueListInfo,\n\t\tcontentId: string,\n\t\tcaseSensitive: boolean,\n\t\tshowConditionPanel: boolean,\n\t\tcontainer: Container\n\t) {\n\t\tconst contentList = container.getContent();\n\t\tlet content = ValueListHelper._getContentById<MDCTable>(contentList, contentId);\n\n\t\tif (!content) {\n\t\t\tconst forceBind = valueListInfo.valueListInfo.FetchValues === 2 ? false : true;\n\n\t\t\tcontent = ValueListHelper._createDialogContent(contentId, caseSensitive, forceBind);\n\n\t\t\tif (!showConditionPanel) {\n\t\t\t\tcontainer.addContent(content);\n\t\t\t} else {\n\t\t\t\tcontainer.insertContent(content, contentList.length - 1); // insert content before conditions content\n\t\t\t}\n\t\t} else {\n\t\t\tcontent.setVisible(true);\n\t\t}\n\n\t\treturn content;\n\t},\n\n\t_prepareValueHelpTypeAhead: function (\n\t\tvalueHelp: ValueHelp,\n\t\tcontainer: Container,\n\t\tvalueListInfos: ValueListInfo[],\n\t\tpayload: ValueHelpPayload,\n\t\tcaseSensitive: boolean,\n\t\tfirstTypeAheadContent: MTable\n\t) {\n\t\tconst contentList = container.getContent();\n\t\tlet qualifierForTypeahead = valueHelp.data(\"valuelistForValidation\") || \"\"; // can also be null\n\t\tif (qualifierForTypeahead === \" \") {\n\t\t\tqualifierForTypeahead = \"\";\n\t\t}\n\t\tconst valueListInfo = qualifierForTypeahead\n\t\t\t? valueListInfos.filter(function (subValueListInfo) {\n\t\t\t\t\treturn subValueListInfo.valueHelpQualifier === qualifierForTypeahead;\n\t\t\t  })[0]\n\t\t\t: valueListInfos[0];\n\n\t\tValueListHelper._addInOutParametersToPayload(payload, valueListInfo);\n\n\t\tconst contentId = ValueListHelper._getContentId(valueHelp.getId(), valueListInfo.valueHelpQualifier, true);\n\t\tlet content = ValueListHelper._getContentById<MTable>(contentList, contentId);\n\n\t\tif (!content) {\n\t\t\tconst useAsValueHelp = firstTypeAheadContent.getUseAsValueHelp();\n\t\t\tcontent = ValueListHelper._createPopoverContent(contentId, caseSensitive, useAsValueHelp);\n\n\t\t\tcontainer.insertContent(content, 0); // insert content as first content\n\t\t} else if (contentId !== contentList[0].getId()) {\n\t\t\t// content already available but not as first content?\n\t\t\tcontainer.removeContent(content);\n\t\t\tcontainer.insertContent(content, 0); // move content to first position\n\t\t}\n\n\t\treturn { valueListInfo, content };\n\t},\n\n\t_prepareValueHelpDialog: function (\n\t\tvalueHelp: ValueHelp,\n\t\tcontainer: Container,\n\t\tvalueListInfos: ValueListInfo[],\n\t\tpayload: ValueHelpPayload,\n\t\tselectedContentId: string,\n\t\tcaseSensitive: boolean\n\t) {\n\t\tconst showConditionPanel = valueHelp.data(\"showConditionPanel\") && valueHelp.data(\"showConditionPanel\") !== \"false\";\n\t\tconst contentList = container.getContent();\n\n\t\t// set all contents to invisible\n\t\tfor (const contentListItem of contentList) {\n\t\t\tcontentListItem.setVisible(false);\n\t\t}\n\n\t\tif (showConditionPanel) {\n\t\t\tthis._showConditionsContent(contentList, container);\n\t\t}\n\n\t\tlet selectedInfo: ValueListInfo | undefined, selectedContent: MDCTable | undefined;\n\n\t\t// Create or reuse contents for the current context\n\t\tfor (const valueListInfo of valueListInfos) {\n\t\t\tconst valueHelpQualifier = valueListInfo.valueHelpQualifier;\n\n\t\t\tValueListHelper._addInOutParametersToPayload(payload, valueListInfo);\n\n\t\t\tconst contentId = ValueListHelper._getContentId(valueHelp.getId(), valueHelpQualifier, false);\n\n\t\t\tconst content = this._alignOrCreateContent(valueListInfo, contentId, caseSensitive, showConditionPanel, container);\n\n\t\t\tif (valueListInfo.valueListInfo.Label) {\n\t\t\t\tconst title = CommonUtils.getTranslatedTextFromExpBindingString(valueListInfo.valueListInfo.Label, valueHelp.getControl());\n\t\t\t\tcontent.setTitle(title);\n\t\t\t}\n\n\t\t\tif (!selectedContent || (selectedContentId && selectedContentId === contentId)) {\n\t\t\t\tselectedContent = content;\n\t\t\t\tselectedInfo = valueListInfo;\n\t\t\t}\n\t\t}\n\n\t\tif (!selectedInfo || !selectedContent) {\n\t\t\tthrow new Error(\"selectedInfo or selectedContent undefined\");\n\t\t}\n\n\t\treturn { selectedInfo, selectedContent };\n\t},\n\n\tshowValueList: async function (payload: ValueHelpPayload, container: Container, selectedContentId: string): Promise<void> {\n\t\tconst valueHelp = container.getParent() as ValueHelp,\n\t\t\tisTypeahead = container.isTypeahead(),\n\t\t\tpropertyPath = payload.propertyPath,\n\t\t\tmetaModel = valueHelp.getModel().getMetaModel() as ODataMetaModel,\n\t\t\tvhUIModel = (valueHelp.getModel(\"_VHUI\") as JSONModel) || ValueListHelper.createVHUIModel(valueHelp, propertyPath, metaModel);\n\n\t\tif (!payload.qualifiers) {\n\t\t\tpayload.qualifiers = {};\n\t\t}\n\n\t\tvhUIModel.setProperty(\"/isSuggestion\", isTypeahead);\n\t\tvhUIModel.setProperty(\"/minScreenWidth\", !isTypeahead ? \"418px\" : undefined);\n\n\t\ttry {\n\t\t\tconst valueListInfos = await ValueListHelper.getValueListInfo(valueHelp, propertyPath, payload);\n\t\t\tconst firstTypeAheadContent = valueHelp.getTypeahead().getContent()[0] as MTable,\n\t\t\t\tcaseSensitive = firstTypeAheadContent.getCaseSensitive(); // take caseSensitive from first Typeahead content\n\n\t\t\tif (isTypeahead) {\n\t\t\t\tconst { valueListInfo, content } = ValueListHelper._prepareValueHelpTypeAhead(\n\t\t\t\t\tvalueHelp,\n\t\t\t\t\tcontainer,\n\t\t\t\t\tvalueListInfos,\n\t\t\t\t\tpayload,\n\t\t\t\t\tcaseSensitive,\n\t\t\t\t\tfirstTypeAheadContent\n\t\t\t\t);\n\n\t\t\t\tpayload.valueHelpQualifier = valueListInfo.valueHelpQualifier;\n\n\t\t\t\tif (content.getTable() === undefined || content.getTable() === null) {\n\t\t\t\t\tawait ValueListHelper._createValueHelpTypeahead(propertyPath, valueHelp, content, valueListInfo, payload);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst { selectedInfo, selectedContent } = ValueListHelper._prepareValueHelpDialog(\n\t\t\t\t\tvalueHelp,\n\t\t\t\t\tcontainer,\n\t\t\t\t\tvalueListInfos,\n\t\t\t\t\tpayload,\n\t\t\t\t\tselectedContentId,\n\t\t\t\t\tcaseSensitive\n\t\t\t\t);\n\n\t\t\t\tpayload.valueHelpQualifier = selectedInfo.valueHelpQualifier;\n\t\t\t\t/* For context depentent value helps the value list label is used for the dialog title */\n\t\t\t\tconst title = CommonUtils.getTranslatedTextFromExpBindingString(\n\t\t\t\t\tValueListHelper._getDialogTitle(valueHelp, selectedInfo.valueListInfo?.Label),\n\t\t\t\t\tvalueHelp.getControl()\n\t\t\t\t);\n\t\t\t\tcontainer.setTitle(title);\n\n\t\t\t\tif (selectedContent.getTable() === undefined || selectedContent.getTable() === null) {\n\t\t\t\t\tawait ValueListHelper._createValueHelpDialog(propertyPath, valueHelp, selectedContent, selectedInfo, payload);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tthis._logError(propertyPath, err);\n\n\t\t\tValueListHelper.destroyVHContent(valueHelp);\n\t\t}\n\t}\n};\n\nexport default ValueListHelper;\n"],"mappings":"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"}},{"offset":{"line":17455,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","ObjectPath","CommonUtils","PropertyHelper","UIFormatters","ODataMetaModelUtil","Util","Fragment","XMLPreprocessor","XMLTemplateProcessor","Rem","Conditions","MDCTable","MTable","JSONModel","_exports","getTypeConfig","getDisplayMode","getAssociatedUnitProperty","getAssociatedTimezoneProperty","getAssociatedTextProperty","getAssociatedCurrencyProperty","Level","columnNotAlreadyDefined","columnDefs","vhKey","some","column","path","AnnotationLabel","AnnotationText","AnnotationTextUITextArrangement","AnnotationValueListParameterIn","AnnotationValueListParameterConstant","AnnotationValueListParameterOut","AnnotationValueListParameterInOut","AnnotationValueListWithFixedValues","_getDefaultSortPropertyName","valueListInfo","sortFieldName","metaModel","$model","getMetaModel","entitySetAnnotations","getObject","CollectionPath","sortRestrictionsInfo","getSortRestrictionsInfo","foundElement","Parameters","find","element","$Type","ValueListProperty","propertyInfo","sortable","undefined","_redundantDescription","oVLParameter","aColumnInfo","oColumnInfo","columnInfo","textColumnName","keyColumnHidden","keyColumnDisplayFormat","_hasImportanceHigh","oValueListContext","oParameter","$EnumMember","_build$SelectString","control","oViewData","getModel","oData","getData","aColumns","columns","reduce","sQuery","oProperty","indexOf","_getValueHelpColumnDisplayFormat","oPropertyAnnotations","isValueHelpWithFixedValues","sDisplayMode","computeDisplayMode","oTextAnnotation","oTextArrangementAnnotation","$Path","ValueListHelper","getValueListCollectionEntitySet","mValueList","createBindingContext","getTableDelegate","oValueList","sDefaultSortPropertyName","getSortConditionsFromPresentationVariant","isSuggestion","presentationVariantQualifier","PresentationVariantQualifier","presentationVariantPath","presentationVariant","SortOrder","sortConditions","sorters","forEach","condition","sorter","Property","$PropertyPath","Descending","descending","ascending","push","JSON","stringify","name","getPropertyPath","oParameters","UnboundAction","EntityTypePath","Action","substring","lastIndexOf","getValueListProperty","oPropertyContext","oValueListModel","getColumnVisibility","oSource","isDropDownList","valueHelpWithFixedValues","isVisible","columnInfos","isDialogTable","columnWithHiddenAnnotation","columnName","hasHiddenAnnotation","getColumnVisibilityInfo","sPropertyFullPath","bIsDropDownListe","oMetaModel","aColumnInfos","oColumnInfos","getTableItemsParameters","requestGroupId","itemParameters","selectString","this","selectStringPart","isSuspended","sortConditionsFromPresentationVariant","defaultSortPropertyName","join","hasImportance","getMinScreenWidth","getColumnWidth","propertyPath","_property$annotations","_property$annotations2","_textAnnotation$annot","_textAnnotation$annot2","_textAnnotation$annot3","_property$annotations3","_property$annotations4","_property$annotations5","property","targetObject","relatedProperty","additionalProperty","textAnnotation","annotations","Common","Text","textArrangement","UI","TextArrangement","toString","label","Label","displayMode","size","instances","prop","propertyTypeConfig","PropertyODataConstructor","get","type","formatOptions","constraints","sWidth","calcColumnWidth","parseFloat","replace","error","getOutParameterPaths","aParameters","sPath","endsWith","entityIsSearchable","propertyAnnotations","collectionAnnotations","_propertyAnnotations$","_collectionAnnotation","searchSupported","SearchSupported","searchable","Searchable","_getConditionPath","entitySet","parts","split","conditionPath","partialPath","length","part","shift","$kind","$isCollection","_getColumnDefinitionFromSelectionFields","entityTypeAnnotations","selectionFields","selectionField","selectionFieldPath","columnDef","filterable","isPropertyFilterable","_mergeColumnDefinitionsFromProperties","valueListProperty","_propertyAnnotations$2","columnPath","columnPropertyType","textPropertyPath","filterInOutParameters","vhParameters","typeFilter","filter","parameter","parmeterType","getInParameters","getOutParameters","createVHUIModel","valueHelp","vhUIModel","setModel","setProperty","_getDialogTitle","valuehelpLabel","_valueHelp$getControl","propertyLabel","getProperty","dataFieldLabel","getControl","destroyVHContent","getDialog","destroyContent","getTypeahead","putDefaultQualifierFirst","qualifiers","indexDefaultVH","unshift","splice","_getContextPrefix","bindingContext","propertyBindingParts","getPath","bindigContextParts","contextPrefixParts","i","_getVhParameter","conditionModel","contextPrefix","vhMetaModel","localDataPropertyPath","valuePath","getBindingContext","_valueHelp$getParent","getParent","isA","_parameterIsA","firstNavigationProperty","oBoundEntity","getMetaContext","sPathOfTable","getRowBinding","source","helpPath","constantValue","Constant","initialValueFilterEmpty","Boolean","InitialValueIsSignificant","parameterTypes","includes","_enrichPath","propertyName","key","_propertyAnnotations$3","fieldPropertyPath","descriptionPath","_enrichKeys","vhKeys","_processParameters","annotationValueListType","valueHelpQualifier","_metaModel$getObject","entitySetPath","$Key","_parameter$LocalDataP","LocalDataProperty","vhParameter","keyValue","descriptionValue","_logError","status","message","Error","String","msg","getValueListInfo","async","payload","valueListInfos","propertyPathParts","valueListByQualifier","requestValueListInfo","valueHelpQualifiers","Object","keys","pop","useMultiValueField","err","ALLFRAGMENTS","logFragment","_logTemplatedFragments","fragmentName","fragmentDefinition","logInfo","fragment","getLevel","DEBUG","setTimeout","_templateFragment","sourceModel","localValueListInfo","valueListModel","valueListServiceMetaModel","viewData","converterType","process","loadTemplate","bindingContexts","valueList","contextPath","models","load","definition","_getContentId","valueHelpId","isTypeahead","contentType","_addInOutParametersToPayload","textArrangementAnnotation","_getWidthInRem","isUnitValueHelp","width","$","floatWidth","fromPx","isNaN","_getTableWidth","table","minWidth","getColumns","visibleColumns","getVisible","sumWidth","sum","getWidth","Math","max","_createValueHelpTypeahead","content","contentId","getId","id","groupId","bSuggestion","setKeyPath","setDescriptionPath","isValueListWithFixedValues","setFilterFields","info","getMetadata","getName","setTable","field","reduceWidthForUnitValueHelp","tableWidth","setWidth","setMode","getMaxConditions","_createValueHelpDialog","isDropDownListe","tablePromise","filterBarPromise","filterBar","Promise","all","setFilterBar","setFilter","initialized","setSelectionMode","mdcTable","_setShowP13nButton","_getContentById","contentList","item","_createPopoverContent","caseSensitive","useAsValueHelp","group","_createDialogContent","forceBind","_showConditionsContent","container","conditionsContent","setVisible","addContent","_alignOrCreateContent","showConditionPanel","getContent","FetchValues","insertContent","_prepareValueHelpTypeAhead","firstTypeAheadContent","qualifierForTypeahead","data","subValueListInfo","getUseAsValueHelp","removeContent","_prepareValueHelpDialog","selectedContentId","contentListItem","selectedInfo","selectedContent","title","getTranslatedTextFromExpBindingString","setTitle","showValueList","getCaseSensitive","getTable","_selectedInfo$valueLi"],"sources":["ValueListHelper-dbg.js"],"mappings":"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","sourceRoot":"internal/valuehelp"}},{"offset":{"line":17460,"column":0},"map":{"version":3,"names":["KPITag","defineBuildingBlock","name","namespace","blockAttribute","type","required","getKpiPropertyExpression","propertyName","pathInModel","id","kpiModelName","getBindingExpressions","kpiTitle","metaPath","getProperty","text","undefined","tooltip","titleExpression","resolveBindingString","formatResult","kpiFormatters","labelFormat","String","hasUnit","tooltipFormat","getTemplate","xml","BuildingBlockBase"],"sourceRoot":"kpiTag","sources":["KPITag.block.ts"],"sourcesContent":["import { blockAttribute, BuildingBlockBase, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockRuntime\";\nimport kpiFormatters from \"sap/fe/core/formatters/KPIFormatter\";\nimport { formatResult, pathInModel, resolveBindingString } from \"sap/fe/core/helpers/BindingToolkit\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\n\n/**\n * A building block used to display a KPI in the Analytical List Page\n *\n * @private\n * @experimental\n */\n@defineBuildingBlock({\n\tname: \"KPITag\",\n\tnamespace: \"sap.fe.macros\"\n})\nexport default class KPITag extends BuildingBlockBase {\n\t/**\n\t * The ID of the KPI\n\t */\n\t@blockAttribute({ type: \"string\", required: true })\n\tpublic id!: string;\n\n\t/**\n\t * Path to the DataPoint annotation of the KPI\n\t */\n\t@blockAttribute({ type: \"sap.ui.model.Context\", required: true })\n\tpublic metaPath!: Context;\n\n\t/**\n\t * The name of the runtime model to get KPI properties from\n\t */\n\t@blockAttribute({ type: \"string\", required: true })\n\tpublic kpiModelName!: string;\n\n\t/**\n\t * Shall be true if the KPI value has an associated currency or unit of measure\n\t */\n\t@blockAttribute({ type: \"boolean\", required: false })\n\tpublic hasUnit?: boolean;\n\n\t/**\n\t * Creates a binding expression for a specific property in the KPI model.\n\t *\n\t * @param propertyName The property to bind to in the KPI model\n\t * @returns A binding expression\n\t */\n\tgetKpiPropertyExpression(propertyName: string) {\n\t\treturn pathInModel(`/${this.id}/manifest/sap.card/data/json/${propertyName}`, this.kpiModelName);\n\t}\n\n\t/**\n\t * Creates binding expressions for the KPITag's text and tooltip.\n\t *\n\t * @returns Object containing the binding expressions for the text and the tooltip\n\t */\n\tgetBindingExpressions() {\n\t\tconst kpiTitle = this.metaPath.getProperty(\"Title\");\n\n\t\tif (!kpiTitle) {\n\t\t\treturn { text: undefined, tooltip: undefined };\n\t\t}\n\n\t\tconst titleExpression = resolveBindingString<string>(kpiTitle);\n\t\treturn {\n\t\t\ttext: formatResult([titleExpression], kpiFormatters.labelFormat),\n\t\t\ttooltip: formatResult(\n\t\t\t\t[\n\t\t\t\t\ttitleExpression,\n\t\t\t\t\tthis.getKpiPropertyExpression(\"mainValueUnscaled\"),\n\t\t\t\t\tthis.getKpiPropertyExpression(\"mainUnit\"),\n\t\t\t\t\tthis.getKpiPropertyExpression(\"mainCriticality\"),\n\t\t\t\t\tString(this.hasUnit)\n\t\t\t\t],\n\t\t\t\tkpiFormatters.tooltipFormat\n\t\t\t)\n\t\t};\n\t}\n\n\t/**\n\t * The building block template function.\n\t *\n\t * @returns An XML-based string\n\t */\n\tgetTemplate() {\n\t\tconst { text, tooltip } = this.getBindingExpressions();\n\n\t\treturn xml`<m:GenericTag\n\t\t\tid=\"kpiTag-${this.id}\"\n\t\t\ttext=\"${text}\"\n\t\t\tdesign=\"StatusIconHidden\"\n\t\t\tstatus=\"${this.getKpiPropertyExpression(\"mainCriticality\")}\"\n\t\t\tclass=\"sapUiTinyMarginBegin\"\n\t\t\ttooltip=\"${tooltip}\"\n\t\t\tpress=\".kpiManagement.onKPIPressed(\\${$source>},'${this.id}')\"\n\t\t>\n\t\t\t<m:ObjectNumber\n\t\t\t\tstate=\"${this.getKpiPropertyExpression(\"mainCriticality\")}\"\n\t\t\t\temphasized=\"false\"\n\t\t\t\tnumber=\"${this.getKpiPropertyExpression(\"mainValue\")}\"\n\t\t\t\tunit=\"${this.getKpiPropertyExpression(\"mainUnit\")}\"\n\n\t\t\t/>\n\t\t</m:GenericTag>`;\n\t}\n}\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;MAgBqBA,MAAM;EAV3B;AACA;AACA;AACA;AACA;AACA;EALA,OAMCC,mBAAmB,CAAC;IACpBC,IAAI,EAAE,QAAQ;IACdC,SAAS,EAAE;EACZ,CAAC,CAAC,UAKAC,cAAc,CAAC;IAAEC,IAAI,EAAE,QAAQ;IAAEC,QAAQ,EAAE;EAAK,CAAC,CAAC,UAMlDF,cAAc,CAAC;IAAEC,IAAI,EAAE,sBAAsB;IAAEC,QAAQ,EAAE;EAAK,CAAC,CAAC,UAMhEF,cAAc,CAAC;IAAEC,IAAI,EAAE,QAAQ;IAAEC,QAAQ,EAAE;EAAK,CAAC,CAAC,UAMlDF,cAAc,CAAC;IAAEC,IAAI,EAAE,SAAS;IAAEC,QAAQ,EAAE;EAAM,CAAC,CAAC;IAAA;IAAA;MAAA;MAAA;QAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;IAAA;IAAA;IAAA;IAGrD;AACD;AACA;AACA;AACA;AACA;IALC,OAMAC,wBAAwB,GAAxB,kCAAyBC,YAAoB,EAAE;MAC9C,OAAOC,WAAW,CAAE,IAAG,IAAI,CAACC,EAAG,gCAA+BF,YAAa,EAAC,EAAE,IAAI,CAACG,YAAY,CAAC;IACjG;;IAEA;AACD;AACA;AACA;AACA,OAJC;IAAA,OAKAC,qBAAqB,GAArB,iCAAwB;MACvB,MAAMC,QAAQ,GAAG,IAAI,CAACC,QAAQ,CAACC,WAAW,CAAC,OAAO,CAAC;MAEnD,IAAI,CAACF,QAAQ,EAAE;QACd,OAAO;UAAEG,IAAI,EAAEC,SAAS;UAAEC,OAAO,EAAED;QAAU,CAAC;MAC/C;MAEA,MAAME,eAAe,GAAGC,oBAAoB,CAASP,QAAQ,CAAC;MAC9D,OAAO;QACNG,IAAI,EAAEK,YAAY,CAAC,CAACF,eAAe,CAAC,EAAEG,aAAa,CAACC,WAAW,CAAC;QAChEL,OAAO,EAAEG,YAAY,CACpB,CACCF,eAAe,EACf,IAAI,CAACZ,wBAAwB,CAAC,mBAAmB,CAAC,EAClD,IAAI,CAACA,wBAAwB,CAAC,UAAU,CAAC,EACzC,IAAI,CAACA,wBAAwB,CAAC,iBAAiB,CAAC,EAChDiB,MAAM,CAAC,IAAI,CAACC,OAAO,CAAC,CACpB,EACDH,aAAa,CAACI,aAAa;MAE7B,CAAC;IACF;;IAEA;AACD;AACA;AACA;AACA,OAJC;IAAA,OAKAC,WAAW,GAAX,uBAAc;MACb,MAAM;QAAEX,IAAI;QAAEE;MAAQ,CAAC,GAAG,IAAI,CAACN,qBAAqB,EAAE;MAEtD,OAAOgB,GAAI;AACb,gBAAgB,IAAI,CAAClB,EAAG;AACxB,WAAWM,IAAK;AAChB;AACA,aAAa,IAAI,CAACT,wBAAwB,CAAC,iBAAiB,CAAE;AAC9D;AACA,cAAcW,OAAQ;AACtB,sDAAsD,IAAI,CAACR,EAAG;AAC9D;AACA;AACA,aAAa,IAAI,CAACH,wBAAwB,CAAC,iBAAiB,CAAE;AAC9D;AACA,cAAc,IAAI,CAACA,wBAAwB,CAAC,WAAW,CAAE;AACzD,YAAY,IAAI,CAACA,wBAAwB,CAAC,UAAU,CAAE;AACtD;AACA;AACA,kBAAkB;IACjB,CAAC;IAAA;EAAA,EAxFkCsB,iBAAiB;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;EAAA;EAAA;AAAA"}},{"offset":{"line":17603,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlock","BuildingBlockRuntime","kpiFormatters","BindingToolkit","_dec","_dec2","_dec3","_dec4","_dec5","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_exports","resolveBindingString","pathInModel","formatResult","xml","defineBuildingBlock","BuildingBlockBase","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","KPITag","name","namespace","type","required","_BuildingBlockBase","_this","_len","arguments","length","args","Array","_key","this","_proto","getKpiPropertyExpression","propertyName","id","kpiModelName","getBindingExpressions","kpiTitle","metaPath","getProperty","text","tooltip","titleExpression","labelFormat","String","hasUnit","tooltipFormat","getTemplate"],"sources":["KPITag.block-dbg.js"],"mappings":"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","sourceRoot":"kpiTag"}},{"offset":{"line":17624,"column":0},"map":{"version":3,"names":["macrosNamespace","thisLib","Core","initLibrary","name","dependencies","types","interfaces","controls","elements","version","noLibraryCSS","NavigationType","External","InPage","None","Fragment","registerType","load","getType","init","mSettings","containingView","oController","getController","getExtensionAPI","id","args","apply"],"sourceRoot":"","sources":["library.ts"],"sourcesContent":["import \"sap/fe/core/library\";\nimport \"sap/fe/macros/filter/type/MultiValue\";\nimport \"sap/fe/macros/filter/type/Range\";\nimport \"sap/fe/macros/macroLibrary\";\nimport Core from \"sap/ui/core/Core\";\nimport Fragment from \"sap/ui/core/Fragment\";\nimport \"sap/ui/core/library\";\nimport \"sap/ui/core/XMLTemplateProcessor\";\nimport \"sap/ui/mdc/field/ConditionsType\";\nimport \"sap/ui/mdc/library\";\nimport \"sap/ui/unified/library\";\n\n/**\n * Library containing the building blocks for SAP Fiori elements.\n *\n * @namespace\n * @name sap.fe.macros\n * @public\n */\nexport const macrosNamespace = \"sap.fe.macros\";\n\n// library dependencies\nconst thisLib = Core.initLibrary({\n\tname: \"sap.fe.macros\",\n\tdependencies: [\"sap.ui.core\", \"sap.ui.mdc\", \"sap.ui.unified\", \"sap.fe.core\"],\n\ttypes: [\"sap.fe.macros.NavigationType\"],\n\tinterfaces: [],\n\tcontrols: [],\n\telements: [],\n\t// eslint-disable-next-line no-template-curly-in-string\n\tversion: \"${version}\",\n\tnoLibraryCSS: true\n}) as any;\n\nthisLib.NavigationType = {\n\t/**\n\t * For External Navigation\n\t *\n\t * @public\n\t */\n\tExternal: \"External\",\n\n\t/**\n\t * For In-Page Navigation\n\t *\n\t * @public\n\t */\n\tInPage: \"InPage\",\n\n\t/**\n\t * For No Navigation\n\t *\n\t * @public\n\t */\n\tNone: \"None\"\n};\n\nFragment.registerType(\"CUSTOM\", {\n\tload: (Fragment as any).getType(\"XML\").load,\n\tinit: function (mSettings: any, ...args: any[]) {\n\t\tmSettings.containingView = {\n\t\t\toController: mSettings.containingView.getController() && mSettings.containingView.getController().getExtensionAPI(mSettings.id)\n\t\t};\n\t\treturn (Fragment as any).getType(\"XML\").init.apply(this, [mSettings, args]);\n\t}\n});\n\nexport default thisLib;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;EAYA;AACA;AACA;AACA;AACA;AACA;AACA;EACO,MAAMA,eAAe,GAAG,eAAe;;EAE9C;EAAA;EACA,MAAMC,OAAO,GAAGC,IAAI,CAACC,WAAW,CAAC;IAChCC,IAAI,EAAE,eAAe;IACrBC,YAAY,EAAE,CAAC,aAAa,EAAE,YAAY,EAAE,gBAAgB,EAAE,aAAa,CAAC;IAC5EC,KAAK,EAAE,CAAC,8BAA8B,CAAC;IACvCC,UAAU,EAAE,EAAE;IACdC,QAAQ,EAAE,EAAE;IACZC,QAAQ,EAAE,EAAE;IACZ;IACAC,OAAO,EAAE,YAAY;IACrBC,YAAY,EAAE;EACf,CAAC,CAAQ;EAETV,OAAO,CAACW,cAAc,GAAG;IACxB;AACD;AACA;AACA;AACA;IACCC,QAAQ,EAAE,UAAU;IAEpB;AACD;AACA;AACA;AACA;IACCC,MAAM,EAAE,QAAQ;IAEhB;AACD;AACA;AACA;AACA;IACCC,IAAI,EAAE;EACP,CAAC;EAEDC,QAAQ,CAACC,YAAY,CAAC,QAAQ,EAAE;IAC/BC,IAAI,EAAGF,QAAQ,CAASG,OAAO,CAAC,KAAK,CAAC,CAACD,IAAI;IAC3CE,IAAI,EAAE,UAAUC,SAAc,EAAkB;MAC/CA,SAAS,CAACC,cAAc,GAAG;QAC1BC,WAAW,EAAEF,SAAS,CAACC,cAAc,CAACE,aAAa,EAAE,IAAIH,SAAS,CAACC,cAAc,CAACE,aAAa,EAAE,CAACC,eAAe,CAACJ,SAAS,CAACK,EAAE;MAC/H,CAAC;MAAC,kCAHgCC,IAAI;QAAJA,IAAI;MAAA;MAItC,OAAQX,QAAQ,CAASG,OAAO,CAAC,KAAK,CAAC,CAACC,IAAI,CAACQ,KAAK,CAAC,IAAI,EAAE,CAACP,SAAS,EAAEM,IAAI,CAAC,CAAC;IAC5E;EACD,CAAC,CAAC;EAAC,OAEY1B,OAAO;AAAA"}},{"offset":{"line":17688,"column":0},"map":{"version":3,"names":["sap","ui","define","_library","_MultiValue","_Range","_macroLibrary","Core","Fragment","_library2","_XMLTemplateProcessor","_ConditionsType","_library3","_library4","_exports","macrosNamespace","thisLib","initLibrary","name","dependencies","types","interfaces","controls","elements","version","noLibraryCSS","NavigationType","External","InPage","None","registerType","load","getType","init","mSettings","containingView","oController","getController","getExtensionAPI","id","_len","arguments","length","args","Array","_key","apply","this"],"sources":["library-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,mCAAO,CAAC,sBAAuB,uCAAwC,kCAAmC,6BAA8B,mBAAoB,uBAAwB,sBAAuB,mCAAoC,kCAAmC,qBAAsB,0BAA2B,SAAUC,EAAUC,EAAaC,EAAQC,EAAeC,EAAMC,EAAUC,EAAWC,EAAuBC,EAAiBC,EAAWC,GAC9c,aAEA,IAAIC,EAAW,CAAC,EAQhB,MAAMC,EAAkB,gBAGxBD,EAASC,gBAAkBA,EAC3B,MAAMC,EAAUT,EAAKU,YAAY,CAC/BC,KAAM,gBACNC,aAAc,CAAC,cAAe,aAAc,iBAAkB,eAC9DC,MAAO,CAAC,gCACRC,WAAY,GACZC,SAAU,GACVC,SAAU,GAEVC,QAAS,aACTC,aAAc,OAEhBT,EAAQU,eAAiB,CAMvBC,SAAU,WAMVC,OAAQ,SAMRC,KAAM,QAERrB,EAASsB,aAAa,SAAU,CAC9BC,KAAMvB,EAASwB,QAAQ,OAAOD,KAC9BE,KAAM,SAAUC,GACdA,EAAUC,eAAiB,CACzBC,YAAaF,EAAUC,eAAeE,iBAAmBH,EAAUC,eAAeE,gBAAgBC,gBAAgBJ,EAAUK,KAE9H,IAAK,IAAIC,EAAOC,UAAUC,OAAQC,EAAO,IAAIC,MAAMJ,EAAO,EAAIA,EAAO,EAAI,GAAIK,EAAO,EAAGA,EAAOL,EAAMK,IAAQ,CAC1GF,EAAKE,EAAO,GAAKJ,UAAUI,EAC7B,CACA,OAAOrC,EAASwB,QAAQ,OAAOC,KAAKa,MAAMC,KAAM,CAACb,EAAWS,GAC9D,IAEF,OAAO3B,CACT,EAAG","sourceRoot":""}},{"offset":{"line":17693,"column":0},"map":{"version":3,"names":["sNamespace","aControls","Table","FormBuildingBlock","FormContainerBuildingBlock","PublicField","InternalField","FilterBarBuildingBlock","FilterField","ChartBuildingBlock","ValueHelp","ValueHelpFilterBar","MicroChart","Contact","QuickView","VisualFilterBuildingBlock","DraftIndicator","DataPoint","FormElement","FlexibleColumnLayoutActions","KPITag","MultiValueFieldBlock","Paginator","ActionCommand","SituationsIndicator","CustomFragment","map","vEntry","name","namespace","metadata","metadataContexts","properties","events","registerAll","Share","register","forEach","oEntry","registerBuildingBlock","deregisterAll","XMLPreprocessor","plugIn","deregister"],"sourceRoot":"","sources":["macroLibrary.ts"],"sourcesContent":["import { registerBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlockRuntime\";\nimport ChartBuildingBlock from \"sap/fe/macros/chart/ChartBuildingBlock\";\nimport FlexibleColumnLayoutActions from \"sap/fe/macros/fcl/FlexibleColumnLayoutActions\";\nimport FilterBarBuildingBlock from \"sap/fe/macros/filterBar/FilterBarBuildingBlock\";\nimport FormBuildingBlock from \"sap/fe/macros/form/FormBuildingBlock\";\nimport FormContainerBuildingBlock from \"sap/fe/macros/form/FormContainerBuildingBlock\";\nimport CustomFragment from \"sap/fe/macros/fpm/CustomFragment.block\";\nimport FilterField from \"sap/fe/macros/internal/FilterField\";\nimport SituationsIndicator from \"sap/fe/macros/situations/SituationsIndicator.fragment\";\nimport VisualFilterBuildingBlock from \"sap/fe/macros/visualfilters/VisualFilterBuildingBlock\";\nimport XMLPreprocessor from \"sap/ui/core/util/XMLPreprocessor\";\nimport Contact from \"./contact/Contact\";\nimport DraftIndicator from \"./draftIndicator/DraftIndicator.block\";\nimport PublicField from \"./field/PublicField\";\nimport FormElement from \"./form/FormElementBlock\";\nimport ActionCommand from \"./internal/ActionCommand.block\";\nimport DataPoint from \"./internal/DataPoint\";\nimport InternalField from \"./internal/InternalField\";\nimport KPITag from \"./kpiTag/KPITag.block\";\nimport MicroChart from \"./microchart/MicroChart.metadata\";\nimport MultiValueFieldBlock from \"./multiValueField/MultiValueField.block\";\nimport Paginator from \"./paginator/Paginator.metadata\";\nimport QuickView from \"./quickView/QuickView.metadata\";\nimport Share from \"./share/Share.block\";\nimport Table from \"./table/Table.metadata\";\nimport ValueHelp from \"./valuehelp/ValueHelp.metadata\";\nimport ValueHelpFilterBar from \"./valuehelp/ValueHelpFilterBar.metadata\";\n\nconst sNamespace = \"sap.fe.macros\",\n\taControls = [\n\t\tTable,\n\t\tFormBuildingBlock,\n\t\tFormContainerBuildingBlock,\n\t\tPublicField,\n\t\tInternalField,\n\t\tFilterBarBuildingBlock,\n\t\tFilterField,\n\t\tChartBuildingBlock,\n\t\tValueHelp,\n\t\tValueHelpFilterBar,\n\t\tMicroChart,\n\t\tContact,\n\t\tQuickView,\n\t\tVisualFilterBuildingBlock,\n\t\tDraftIndicator,\n\t\tDataPoint,\n\t\tFormElement,\n\t\tFlexibleColumnLayoutActions,\n\t\tKPITag,\n\t\tMultiValueFieldBlock,\n\t\tPaginator,\n\t\tActionCommand,\n\t\tSituationsIndicator,\n\t\tCustomFragment\n\t].map(function (vEntry) {\n\t\tif (typeof vEntry === \"string\") {\n\t\t\treturn {\n\t\t\t\tname: vEntry,\n\t\t\t\tnamespace: sNamespace,\n\t\t\t\tmetadata: {\n\t\t\t\t\tmetadataContexts: {},\n\t\t\t\t\tproperties: {},\n\t\t\t\t\tevents: {}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\treturn vEntry;\n\t});\n\nfunction registerAll() {\n\t// runtime building blocks have to be registered explicitly, as block.register() executes steps additional to registerBuildingBlock\n\tShare.register();\n\tDraftIndicator.register();\n\n\t// as a first version we expect that there's a fragment with exactly the namespace/name\n\taControls.forEach(function (oEntry) {\n\t\tregisterBuildingBlock(oEntry);\n\t});\n}\n\n//This is needed in for templating test utils\nfunction deregisterAll() {\n\taControls.forEach(function (oEntry) {\n\t\tXMLPreprocessor.plugIn(null, oEntry.namespace, oEntry.name);\n\t});\n}\n\n//Always register when loaded for compatibility\nregisterAll();\n\nexport default {\n\tregister: registerAll,\n\tderegister: deregisterAll\n};\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;EA4BA,MAAMA,UAAU,GAAG,eAAe;IACjCC,SAAS,GAAG,CACXC,KAAK,EACLC,iBAAiB,EACjBC,0BAA0B,EAC1BC,WAAW,EACXC,aAAa,EACbC,sBAAsB,EACtBC,WAAW,EACXC,kBAAkB,EAClBC,SAAS,EACTC,kBAAkB,EAClBC,UAAU,EACVC,OAAO,EACPC,SAAS,EACTC,yBAAyB,EACzBC,cAAc,EACdC,SAAS,EACTC,WAAW,EACXC,2BAA2B,EAC3BC,MAAM,EACNC,oBAAoB,EACpBC,SAAS,EACTC,aAAa,EACbC,mBAAmB,EACnBC,cAAc,CACd,CAACC,GAAG,CAAC,UAAUC,MAAM,EAAE;MACvB,IAAI,OAAOA,MAAM,KAAK,QAAQ,EAAE;QAC/B,OAAO;UACNC,IAAI,EAAED,MAAM;UACZE,SAAS,EAAE7B,UAAU;UACrB8B,QAAQ,EAAE;YACTC,gBAAgB,EAAE,CAAC,CAAC;YACpBC,UAAU,EAAE,CAAC,CAAC;YACdC,MAAM,EAAE,CAAC;UACV;QACD,CAAC;MACF;MACA,OAAON,MAAM;IACd,CAAC,CAAC;EAEH,SAASO,WAAW,GAAG;IACtB;IACAC,KAAK,CAACC,QAAQ,EAAE;IAChBpB,cAAc,CAACoB,QAAQ,EAAE;;IAEzB;IACAnC,SAAS,CAACoC,OAAO,CAAC,UAAUC,MAAM,EAAE;MACnCC,qBAAqB,CAACD,MAAM,CAAC;IAC9B,CAAC,CAAC;EACH;;EAEA;EACA,SAASE,aAAa,GAAG;IACxBvC,SAAS,CAACoC,OAAO,CAAC,UAAUC,MAAM,EAAE;MACnCG,eAAe,CAACC,MAAM,CAAC,IAAI,EAAEJ,MAAM,CAACT,SAAS,EAAES,MAAM,CAACV,IAAI,CAAC;IAC5D,CAAC,CAAC;EACH;;EAEA;EACAM,WAAW,EAAE;EAAC,OAEC;IACdE,QAAQ,EAAEF,WAAW;IACrBS,UAAU,EAAEH;EACb,CAAC;AAAA"}},{"offset":{"line":17741,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlockRuntime","ChartBuildingBlock","FlexibleColumnLayoutActions","FilterBarBuildingBlock","FormBuildingBlock","FormContainerBuildingBlock","CustomFragment","FilterField","SituationsIndicator","VisualFilterBuildingBlock","XMLPreprocessor","Contact","DraftIndicator","PublicField","FormElement","ActionCommand","DataPoint","InternalField","KPITag","MicroChart","MultiValueFieldBlock","Paginator","QuickView","Share","Table","ValueHelp","ValueHelpFilterBar","registerBuildingBlock","sNamespace","aControls","map","vEntry","name","namespace","metadata","metadataContexts","properties","events","registerAll","register","forEach","oEntry","deregisterAll","plugIn","deregister"],"sources":["macroLibrary-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,wCAAO,CAAC,kDAAmD,yCAA0C,gDAAiD,iDAAkD,uCAAwC,gDAAiD,yCAA0C,qCAAsC,wDAAyD,wDAAyD,mCAAoC,oBAAqB,wCAAyC,sBAAuB,0BAA2B,iCAAkC,uBAAwB,2BAA4B,wBAAyB,mCAAoC,0CAA2C,iCAAkC,iCAAkC,sBAAuB,yBAA0B,iCAAkC,2CAA4C,SAAUC,EAAsBC,EAAoBC,EAA6BC,EAAwBC,EAAmBC,EAA4BC,EAAgBC,EAAaC,EAAqBC,EAA2BC,EAAiBC,EAASC,EAAgBC,EAAaC,EAAaC,EAAeC,EAAWC,EAAeC,EAAQC,EAAYC,EAAsBC,EAAWC,EAAWC,EAAOC,EAAOC,EAAWC,GACx6C,aAEA,IAAIC,EAAwB3B,EAAqB2B,sBACjD,MAAMC,EAAa,gBACjBC,EAAY,CAACL,EAAOpB,EAAmBC,EAA4BQ,EAAaI,EAAed,EAAwBI,EAAaN,EAAoBwB,EAAWC,EAAoBP,EAAYR,EAASW,EAAWb,EAA2BG,EAAgBI,EAAWF,EAAaZ,EAA6BgB,EAAQE,EAAsBC,EAAWN,EAAeP,EAAqBF,GAAgBwB,IAAI,SAAUC,GACha,UAAWA,IAAW,SAAU,CAC9B,MAAO,CACLC,KAAMD,EACNE,UAAWL,EACXM,SAAU,CACRC,iBAAkB,CAAC,EACnBC,WAAY,CAAC,EACbC,OAAQ,CAAC,GAGf,CACA,OAAON,CACT,GACF,SAASO,IAEPf,EAAMgB,WACN3B,EAAe2B,WAGfV,EAAUW,QAAQ,SAAUC,GAC1Bd,EAAsBc,EACxB,EACF,CAGA,SAASC,IACPb,EAAUW,QAAQ,SAAUC,GAC1B/B,EAAgBiC,OAAO,KAAMF,EAAOR,UAAWQ,EAAOT,KACxD,EACF,CAGAM,IACA,MAAO,CACLC,SAAUD,EACVM,WAAYF,EAEhB,EAAG","sourceRoot":""}},{"offset":{"line":17746,"column":0},"map":{"version":3,"names":["MessageButton","defineUI5Class","aggregation","type","multiple","singularName","event","sGeneralGroupText","sViewId","sLastActionText","init","Button","prototype","apply","attachPress","handleMessagePopoverPress","oMessagePopover","MessagePopover","oItemBinding","getBinding","attachChange","_setMessageData","messageButtonId","getId","addCustomData","sap","ui","core","CustomData","key","value","attachModelContextChange","_applyFiltersAndSort","bind","attachActiveTitlePress","_activeTitlePress","oEvent","toggle","getSource","_applyGroupingAsync","oView","aWaitForData","oViewBindingContext","getBindingContext","_findTablesRelatedToMessages","view","oRes","aMessages","getContexts","map","oContext","getObject","oViewContext","oObjectPage","getContent","messageHandling","getVisibleSectionsFromObjectPageLayout","forEach","oSection","getSubSections","oSubSection","findElements","oElem","isA","i","length","oRowBinding","getRowBinding","sElemeBindingPath","getPath","target","indexOf","push","table","subsection","oTables","_oTable","oMDCTable","oSubsection","setBindingContext","isLengthFinal","Promise","resolve","attachEventOnce","waitForGroupingApplied","setTimeout","_applyGrouping","all","getModel","checkMessages","err","Log","error","oObjectPageLayout","_getObjectPageLayout","getItems","aSections","bEnableBinding","_checkControlIdInSections","_fnEnableBindings","_getTableRefErrorContext","oTable","oModel","getProperty","setProperty","sRefErrorContextPath","replace","getContext","_updateInternalModel","oTableRowContext","iRowIndex","sTableTargetColProperty","oMessageObject","bIsCreationRow","oTemp","rowIndex","targetColProperty","aValidMessageIds","getCore","getMessageManager","getMessageModel","getData","message","id","aObsoleteMessagelIds","Object","keys","filter","internalMessageId","obsoleteId","assign","_setGroupLabelForTransientMsg","sActionName","Core","getLibraryResourceBundle","getText","setGroupName","_computeMessageGroupAndSubTitle","section","subSection","aElements","bMultipleSubSections","detachChange","setSectionNameInGroup","oElement","oTargetTableInfo","l","oTargetedControl","bIsBackendMessage","RegExp","test","getTargets","oResourceBundle","getParent","fnCallbackSetGroupName","oMessageObj","actionName","obj","getTableColumnDataAndSetSubtile","subTitle","setSubtitle","setActiveTitle","_formatMessageDescription","sTableTargetColName","getIndex","bIsTargetedControlOrphan","bIsOrphanElement","_getMdcTable","tableHeader","getHeader","iTargetColumnIndex","_getTableColumnIndex","getColumns","getDataProperty","undefined","_getTableRow","_getTableRowIndex","oTableRowBindingContexts","getCurrentContexts","sMessageSubtitle","getMessageSubtitle","getValueState","sectionBasedGroupName","createSectionGroupName","_getViewId","byId","oMessageTargetProperty","split","pop","oUIModel","fireActiveTitlePress","item","aSubSections","j","k","aVisibleSections","viewId","bIsGeneralGroupName","aControls","getControlFromMessageRelatingToSubSection","persistent","getGroupName","_findTargetForMessage","messageObject","oMetaModel","getMetaModel","contextPath","getMetaPath","oContextPathMetadata","$kind","UriParameters","fromQuery","window","location","search","get","iSection","nonTableChartcontrolFound","iSubSection","oAllBlocks","getBlocks","block","_findMessageGroupAfterRebinding","attachDataReceived","sControlId","oControl","View","_setLongtextUrlDescription","sMessageDescriptionContent","oDiagnosisTitle","setAsyncDescriptionHandler","config","sOldDescription","sLongTextUrl","getLongtextUrl","jQuery","ajax","url","success","data","sDiagnosisText","getHtmlText","setDescription","promise","sError","reject","sTableFirstColProperty","getIdentifierColumn","sColumnInfo","oMsgObj","oColFromTableSettings","fetchColumnInfo","availability","getType","getValue","_navigationConfigured","label","oFieldsAffectedTitle","FormattedText","htmlText","sFieldAffectedText","sUIMessageDescription","description","clearTimeout","_setMessageDataTimeout","sIcon","oMessages","oMessageCount","Error","Warning","Success","Information","iMessageLength","sButtonType","ButtonType","Default","sMessageKey","sTooltipText","sMessageText","MessageType","Negative","Critical","Neutral","totalNumberOfMessages","setText","toString","setTooltip","setIcon","setType","setVisible","oPageReady","getController","pageReady","waitPageReady","fireMessageChange","navigateBack","oInternalModelContext","oItem","getParameter","oMessage","getTarget","sSectionTitle","_defaultFocus","mdcTable","focusInfo","preventScroll","targetInfo","focus","oTargetMdcTable","controlIds","control","oParentControl","reduce","acc","val","_navigateFromMessageToSectionTableInIconTabBarMode","oRefErrorContext","oRefError","_setFocusOnTargetField","targetMdcTable","aTargetMdcTableRow","_getMdcTableRows","iFirstVisibleRow","_getGridTable","getFirstVisibleRow","oTargetRow","oTargetCell","getTargetCell","setFocusToControl","errorProperty","_routing","navigateForwardToContext","scrollToIndex","iNewFirstVisibleRow","bScrollNeeded","oWaitControlIdAdded","attachEvent","focusOnTargetField","focusOnMessageTargetControl","oSelectedSection","getSelectedSection","_navigateFromMessageToSectionInIconTabBarMode","targetRow","getControlIds","controlId","isControlInTable","elem","aAllViewElements","aErroneousControls","some","getDomRef","aNotTableErroneousControls","ColumnListItem","getMetadata","getName","oTargetField","getContentEdit","_getMessageRank","aAllElements","sectionRank","_fnFilterUponId","getControlId","getVisible","hasOwnProperty","sectionName","getTitle","subSectionName","oValidationFilters","oValidationAndContextFilter","oFilters","sPath","oSorter","oDialogFilter","objectPageLayoutSections","aUserDefinedFilter","filterOutMessagesInDialog","fnTest","aControlIds","index","Infinity","errorFieldControl","fieldRankinDialog","Dialog","Filter","path","caseSensitive","getCheckControlInViewFilter","aCustomFilters","getAggregation","operator","value1","value2","oBindingContext","filters","FilterOperator","EQ","and","StartsWith","oValidationContextDialogFilters","Sorter","obj1","obj2","getSections","rankA","rankB","sort","_getSectionBySectionTitle","bUseIconTabBar","getUseIconTabBar","sSelectedSectionId","setSelectedSection","oTableContext","oOPContext","bShouldWaitForTableRefresh","oParentElement","oMdcTable","oTableRow","getTable","findIndex","element","getTargetCellIndex","getCells","oCell","getTargetColumnIndex","oTargetElement","iTargetCellIndex","sTargetCellId","aTableColumns","column","getCreationTemplate","component","require","navObject","getOwnerComponentFor","getNavigation","subOPConfigured","navConfigured","detail","route","getRowSettings","getRowActions","mProperties","messagePopover","fnFocus","isOpen","fnOnClose","detachEvent","close","warning"],"sourceRoot":"messages","sources":["MessageButton.ts"],"sourcesContent":["import ResourceBundle from \"sap/base/i18n/ResourceBundle\";\nimport Log from \"sap/base/Log\";\nimport UriParameters from \"sap/base/util/UriParameters\";\nimport messageHandling from \"sap/fe/core/controllerextensions/messageHandler/messageHandling\";\nimport { aggregation, defineUI5Class, event } from \"sap/fe/core/helpers/ClassSupport\";\nimport type PageController from \"sap/fe/core/PageController\";\nimport type MessageFilter from \"sap/fe/macros/messages/MessageFilter\";\nimport MessagePopover from \"sap/fe/macros/messages/MessagePopover\";\nimport Button from \"sap/m/Button\";\nimport ColumnListItem from \"sap/m/ColumnListItem\";\nimport Dialog from \"sap/m/Dialog\";\nimport FormattedText from \"sap/m/FormattedText\";\nimport { ButtonType } from \"sap/m/library\";\nimport MessageItem from \"sap/m/MessageItem\";\nimport type CoreEvent from \"sap/ui/base/Event\";\nimport Control from \"sap/ui/core/Control\";\nimport Core from \"sap/ui/core/Core\";\nimport type UI5Element from \"sap/ui/core/Element\";\nimport { MessageType } from \"sap/ui/core/library\";\nimport Message from \"sap/ui/core/message/Message\";\nimport View from \"sap/ui/core/mvc/View\";\nimport Filter from \"sap/ui/model/Filter\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport type JSONModel from \"sap/ui/model/json/JSONModel\";\nimport Sorter from \"sap/ui/model/Sorter\";\nimport Column from \"sap/ui/table/Column\";\nimport ObjectPageSection from \"sap/uxap/ObjectPageSection\";\nimport ObjectPageSubSection from \"sap/uxap/ObjectPageSubSection\";\n\ntype MessageCount = {\n\tError: number;\n\tWarning: number;\n\tSuccess: number;\n\tInformation: number;\n};\n\ntype ColumnDataWithAvailabilityType = Column & {\n\tavailability?: string;\n\tlabel?: string;\n};\n\n@defineUI5Class(\"sap.fe.macros.messages.MessageButton\")\nclass MessageButton extends Button {\n\t@aggregation({ type: \"sap.fe.macros.messages.MessageFilter\", multiple: true, singularName: \"customFilter\" })\n\tcustomFilters!: MessageFilter;\n\n\t@event()\n\tmessageChange!: Function;\n\n\tprivate oMessagePopover: any;\n\tprivate oItemBinding: any;\n\tprivate oObjectPageLayout: any;\n\tprivate sGeneralGroupText = \"\";\n\tprivate _setMessageDataTimeout: any;\n\tprivate sViewId = \"\";\n\tprivate sLastActionText = \"\";\n\n\tinit() {\n\t\tButton.prototype.init.apply(this);\n\t\t//press event handler attached to open the message popover\n\t\tthis.attachPress(this.handleMessagePopoverPress, this);\n\t\tthis.oMessagePopover = new MessagePopover();\n\t\tthis.oItemBinding = this.oMessagePopover.getBinding(\"items\");\n\t\tthis.oItemBinding.attachChange(this._setMessageData, this);\n\t\tconst messageButtonId = this.getId();\n\t\tif (messageButtonId) {\n\t\t\tthis.oMessagePopover.addCustomData(new (sap as any).ui.core.CustomData({ key: \"messageButtonId\", value: messageButtonId })); // TODO check for custom data type\n\t\t}\n\t\tthis.attachModelContextChange(this._applyFiltersAndSort.bind(this));\n\t\tthis.oMessagePopover.attachActiveTitlePress(this._activeTitlePress.bind(this));\n\t}\n\n\t/**\n\t * The method that is called when a user clicks on the MessageButton control.\n\t *\n\t * @param oEvent Event object\n\t */\n\thandleMessagePopoverPress(oEvent: CoreEvent) {\n\t\tthis.oMessagePopover.toggle(oEvent.getSource());\n\t}\n\n\t/**\n\t * The method that groups the messages based on the section or subsection they belong to.\n\t * This method force the loading of contexts for all tables before to apply the grouping.\n\t *\n\t * @param oView Current view.\n\t * @returns Return promise.\n\t * @private\n\t */\n\tasync _applyGroupingAsync(oView: View) {\n\t\tconst aWaitForData: Promise<void>[] = [];\n\t\tconst oViewBindingContext = oView.getBindingContext();\n\t\tconst _findTablesRelatedToMessages = (view: View) => {\n\t\t\tconst oRes: any[] = [];\n\t\t\tconst aMessages = this.oItemBinding.getContexts().map(function (oContext: any) {\n\t\t\t\treturn oContext.getObject();\n\t\t\t});\n\t\t\tconst oViewContext = view.getBindingContext();\n\t\t\tif (oViewContext) {\n\t\t\t\tconst oObjectPage: Control = view.getContent()[0];\n\t\t\t\tmessageHandling.getVisibleSectionsFromObjectPageLayout(oObjectPage).forEach(function (oSection: any) {\n\t\t\t\t\toSection.getSubSections().forEach(function (oSubSection: any) {\n\t\t\t\t\t\toSubSection.findElements(true).forEach(function (oElem: any) {\n\t\t\t\t\t\t\tif (oElem.isA(\"sap.ui.mdc.Table\")) {\n\t\t\t\t\t\t\t\tfor (let i = 0; i < aMessages.length; i++) {\n\t\t\t\t\t\t\t\t\tconst oRowBinding = oElem.getRowBinding();\n\t\t\t\t\t\t\t\t\tif (oRowBinding) {\n\t\t\t\t\t\t\t\t\t\tconst sElemeBindingPath = `${oViewContext.getPath()}/${oElem.getRowBinding().getPath()}`;\n\t\t\t\t\t\t\t\t\t\tif (aMessages[i].target.indexOf(sElemeBindingPath) === 0) {\n\t\t\t\t\t\t\t\t\t\t\toRes.push({ table: oElem, subsection: oSubSection });\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn oRes;\n\t\t};\n\t\t// Search for table related to Messages and initialize the binding context of the parent subsection to retrieve the data\n\t\tconst oTables = _findTablesRelatedToMessages.bind(this)(oView);\n\t\toTables.forEach(function (_oTable) {\n\t\t\tconst oMDCTable = _oTable.table,\n\t\t\t\toSubsection = _oTable.subsection;\n\t\t\tif (!oMDCTable.getBindingContext() || oMDCTable.getBindingContext()?.getPath() !== oViewBindingContext?.getPath()) {\n\t\t\t\toSubsection.setBindingContext(oViewBindingContext);\n\t\t\t\tif (!oMDCTable.getRowBinding().isLengthFinal()) {\n\t\t\t\t\taWaitForData.push(\n\t\t\t\t\t\tnew Promise(function (resolve: Function) {\n\t\t\t\t\t\t\toMDCTable.getRowBinding().attachEventOnce(\"dataReceived\", function () {\n\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tconst waitForGroupingApplied = new Promise((resolve: Function) => {\n\t\t\tsetTimeout(async () => {\n\t\t\t\tthis._applyGrouping();\n\t\t\t\tresolve();\n\t\t\t}, 0);\n\t\t});\n\t\ttry {\n\t\t\tawait Promise.all(aWaitForData);\n\t\t\toView.getModel().checkMessages();\n\t\t\tawait waitForGroupingApplied;\n\t\t} catch (err) {\n\t\t\tLog.error(\"Error while grouping the messages in the messagePopOver\");\n\t\t}\n\t}\n\n\t/**\n\t * The method that groups the messages based on the section or subsection they belong to.\n\t *\n\t * @private\n\t */\n\t_applyGrouping() {\n\t\tthis.oObjectPageLayout = this._getObjectPageLayout(this, this.oObjectPageLayout);\n\t\tif (!this.oObjectPageLayout) {\n\t\t\treturn;\n\t\t}\n\t\tconst aMessages = this.oMessagePopover.getItems();\n\t\tconst aSections = messageHandling.getVisibleSectionsFromObjectPageLayout(this.oObjectPageLayout);\n\t\tconst bEnableBinding = this._checkControlIdInSections(aMessages, false);\n\t\tif (bEnableBinding) {\n\t\t\tthis._fnEnableBindings(aSections);\n\t\t}\n\t}\n\n\t/**\n\t * The method retrieves the binding context for the refError object.\n\t * The refError contains a map to store the indexes of the rows with errors.\n\t *\n\t * @param oTable The table for which we want to get the refError Object.\n\t * @returns Context of the refError.\n\t * @private\n\t */\n\t_getTableRefErrorContext(oTable: any) {\n\t\tconst oModel = oTable.getModel(\"internal\");\n\t\t//initialize the refError property if it doesn't exist\n\t\tif (!oTable.getBindingContext(\"internal\").getProperty(\"refError\")) {\n\t\t\toModel.setProperty(\"refError\", {}, oTable.getBindingContext(\"internal\"));\n\t\t}\n\t\tconst sRefErrorContextPath =\n\t\t\toTable.getBindingContext(\"internal\").getPath() +\n\t\t\t\"/refError/\" +\n\t\t\toTable.getBindingContext().getPath().replace(\"/\", \"$\") +\n\t\t\t\"$\" +\n\t\t\toTable.getRowBinding().getPath().replace(\"/\", \"$\");\n\t\tconst oContext = oModel.getContext(sRefErrorContextPath);\n\t\tif (!oContext.getProperty(\"\")) {\n\t\t\toModel.setProperty(\"\", {}, oContext);\n\t\t}\n\t\treturn oContext;\n\t}\n\n\t_updateInternalModel(\n\t\toTableRowContext: any,\n\t\tiRowIndex: number,\n\t\tsTableTargetColProperty: string,\n\t\toTable: any,\n\t\toMessageObject: any,\n\t\tbIsCreationRow?: boolean\n\t) {\n\t\tlet oTemp;\n\t\tif (bIsCreationRow) {\n\t\t\toTemp = {\n\t\t\t\trowIndex: \"CreationRow\",\n\t\t\t\ttargetColProperty: sTableTargetColProperty ? sTableTargetColProperty : \"\"\n\t\t\t};\n\t\t} else {\n\t\t\toTemp = {\n\t\t\t\trowIndex: oTableRowContext ? iRowIndex : \"\",\n\t\t\t\ttargetColProperty: sTableTargetColProperty ? sTableTargetColProperty : \"\"\n\t\t\t};\n\t\t}\n\t\tconst oModel = oTable.getModel(\"internal\"),\n\t\t\toContext = this._getTableRefErrorContext(oTable);\n\t\t//we first remove the entries with obsolete message ids from the internal model before inserting the new error info :\n\t\tconst aValidMessageIds = sap.ui\n\t\t\t.getCore()\n\t\t\t.getMessageManager()\n\t\t\t.getMessageModel()\n\t\t\t.getData()\n\t\t\t.map(function (message: any) {\n\t\t\t\treturn message.id;\n\t\t\t});\n\t\tlet aObsoleteMessagelIds;\n\t\tif (oContext.getProperty()) {\n\t\t\taObsoleteMessagelIds = Object.keys(oContext.getProperty()).filter(function (internalMessageId) {\n\t\t\t\treturn aValidMessageIds.indexOf(internalMessageId) === -1;\n\t\t\t});\n\t\t\taObsoleteMessagelIds.forEach(function (obsoleteId) {\n\t\t\t\tdelete oContext.getProperty()[obsoleteId];\n\t\t\t});\n\t\t}\n\t\toModel.setProperty(\n\t\t\toMessageObject.getId(),\n\t\t\tObject.assign({}, oContext.getProperty(oMessageObject.getId()) ? oContext.getProperty(oMessageObject.getId()) : {}, oTemp),\n\t\t\toContext\n\t\t);\n\t}\n\n\t/**\n\t * The method that sets groups for transient messages.\n\t *\n\t * @param {object} message The transient message for which we want to compute and set group.\n\t * @param {string} sActionName The action name.\n\t * @private\n\t */\n\t_setGroupLabelForTransientMsg(message: any, sActionName: string) {\n\t\tthis.sLastActionText = this.sLastActionText\n\t\t\t? this.sLastActionText\n\t\t\t: Core.getLibraryResourceBundle(\"sap.fe.core\").getText(\"T_MESSAGE_BUTTON_SAPFE_MESSAGE_GROUP_LAST_ACTION\");\n\n\t\tmessage.setGroupName(`${this.sLastActionText}: ${sActionName}`);\n\t}\n\n\t/**\n\t * The method that groups messages and adds the subtitle.\n\t *\n\t * @param {object} message The message we use to compute the group and subtitle.\n\t * @param {object} section The section containing the controls.\n\t * @param {object} subSection The subsection containing the controls.\n\t * @param {object} aElements List of controls from a subsection related to a message.\n\t * @param {boolean} bMultipleSubSections True if there is more than 1 subsection in the section.\n\t * @param {string} sActionName The action name.\n\t * @returns {object} Return the control targeted by the message.\n\t * @private\n\t */\n\t_computeMessageGroupAndSubTitle(\n\t\tmessage: MessageItem,\n\t\tsection: ObjectPageSection,\n\t\tsubSection: ObjectPageSubSection,\n\t\taElements: any[],\n\t\tbMultipleSubSections: boolean,\n\t\tsActionName: string\n\t) {\n\t\tthis.oItemBinding.detachChange(this._setMessageData, this);\n\t\tconst oMessageObject = message.getBindingContext(\"message\")?.getObject() as Message;\n\t\tconst setSectionNameInGroup = true;\n\t\tlet oElement, oTable: any, oTargetTableInfo: any, l, iRowIndex, oTargetedControl, bIsCreationRow;\n\t\tconst bIsBackendMessage = new RegExp(\"^/\").test(oMessageObject?.getTargets()[0]),\n\t\t\toResourceBundle = Core.getLibraryResourceBundle(\"sap.fe.core\") as any;\n\t\tif (bIsBackendMessage) {\n\t\t\tfor (l = 0; l < aElements.length; l++) {\n\t\t\t\toElement = aElements[l];\n\t\t\t\toTargetedControl = oElement;\n\t\t\t\tif (oElement.isA(\"sap.m.Table\") || oElement.isA(\"sap.ui.table.Table\")) {\n\t\t\t\t\toTable = oElement.getParent();\n\t\t\t\t\tconst oRowBinding = oTable.getRowBinding();\n\t\t\t\t\tconst fnCallbackSetGroupName = (oMessageObj: any, actionName: string) => {\n\t\t\t\t\t\tthis._setGroupLabelForTransientMsg(message, actionName);\n\t\t\t\t\t};\n\t\t\t\t\tif (oRowBinding && oRowBinding.isLengthFinal() && oTable.getBindingContext()) {\n\t\t\t\t\t\tconst obj = messageHandling.getTableColumnDataAndSetSubtile(\n\t\t\t\t\t\t\toMessageObject,\n\t\t\t\t\t\t\toTable,\n\t\t\t\t\t\t\toElement,\n\t\t\t\t\t\t\toRowBinding,\n\t\t\t\t\t\t\tsActionName,\n\t\t\t\t\t\t\tsetSectionNameInGroup,\n\t\t\t\t\t\t\tfnCallbackSetGroupName\n\t\t\t\t\t\t);\n\t\t\t\t\t\toTargetTableInfo = obj.oTargetTableInfo;\n\t\t\t\t\t\tif (obj.subTitle) {\n\t\t\t\t\t\t\tmessage.setSubtitle(obj.subTitle);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmessage.setActiveTitle(!!oTargetTableInfo.oTableRowContext);\n\n\t\t\t\t\t\tif (oTargetTableInfo.oTableRowContext) {\n\t\t\t\t\t\t\tthis._formatMessageDescription(\n\t\t\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t\t\toTargetTableInfo.oTableRowContext,\n\t\t\t\t\t\t\t\toTargetTableInfo.sTableTargetColName,\n\t\t\t\t\t\t\t\toResourceBundle,\n\t\t\t\t\t\t\t\toTable\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tiRowIndex = oTargetTableInfo.oTableRowContext && oTargetTableInfo.oTableRowContext.getIndex();\n\t\t\t\t\t\tthis._updateInternalModel(\n\t\t\t\t\t\t\toTargetTableInfo.oTableRowContext,\n\t\t\t\t\t\t\tiRowIndex,\n\t\t\t\t\t\t\toTargetTableInfo.sTableTargetColProperty,\n\t\t\t\t\t\t\toTable,\n\t\t\t\t\t\t\toMessageObject\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tmessage.setActiveTitle(true);\n\t\t\t\t\t//check if the targeted control is a child of one of the other controls\n\t\t\t\t\tconst bIsTargetedControlOrphan = messageHandling.bIsOrphanElement(oTargetedControl, aElements);\n\t\t\t\t\tif (bIsTargetedControlOrphan) {\n\t\t\t\t\t\t//set the subtitle\n\t\t\t\t\t\tmessage.setSubtitle(\"\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t//There is only one elt as this is a frontEnd message\n\t\t\toTargetedControl = aElements[0];\n\t\t\toTable = this._getMdcTable(oTargetedControl);\n\t\t\tif (oTable) {\n\t\t\t\toTargetTableInfo = {};\n\t\t\t\toTargetTableInfo.tableHeader = oTable.getHeader();\n\t\t\t\tconst iTargetColumnIndex = this._getTableColumnIndex(oTargetedControl);\n\t\t\t\toTargetTableInfo.sTableTargetColProperty =\n\t\t\t\t\tiTargetColumnIndex > -1 ? oTable.getColumns()[iTargetColumnIndex].getDataProperty() : undefined;\n\t\t\t\toTargetTableInfo.sTableTargetColProperty = oTargetTableInfo.sTableTargetColProperty;\n\t\t\t\toTargetTableInfo.sTableTargetColName =\n\t\t\t\t\toTargetTableInfo.sTableTargetColProperty && iTargetColumnIndex > -1\n\t\t\t\t\t\t? oTable.getColumns()[iTargetColumnIndex].getHeader()\n\t\t\t\t\t\t: undefined;\n\t\t\t\tbIsCreationRow = this._getTableRow(oTargetedControl).isA(\"sap.ui.table.CreationRow\");\n\t\t\t\tif (!bIsCreationRow) {\n\t\t\t\t\tiRowIndex = this._getTableRowIndex(oTargetedControl);\n\t\t\t\t\toTargetTableInfo.oTableRowBindingContexts = oTable.getRowBinding().getCurrentContexts();\n\t\t\t\t\toTargetTableInfo.oTableRowContext = oTargetTableInfo.oTableRowBindingContexts[iRowIndex];\n\t\t\t\t}\n\t\t\t\tconst sMessageSubtitle = messageHandling.getMessageSubtitle(\n\t\t\t\t\toMessageObject,\n\t\t\t\t\toTargetTableInfo.oTableRowBindingContexts,\n\t\t\t\t\toTargetTableInfo.oTableRowContext,\n\t\t\t\t\toTargetTableInfo.sTableTargetColName,\n\t\t\t\t\toResourceBundle,\n\t\t\t\t\toTable,\n\t\t\t\t\tbIsCreationRow,\n\t\t\t\t\tiTargetColumnIndex === 0 && oTargetedControl.getValueState() === \"Error\" ? oTargetedControl : undefined\n\t\t\t\t);\n\t\t\t\t//set the subtitle\n\t\t\t\tif (sMessageSubtitle) {\n\t\t\t\t\tmessage.setSubtitle(sMessageSubtitle);\n\t\t\t\t}\n\n\t\t\t\tmessage.setActiveTitle(true);\n\n\t\t\t\tthis._updateInternalModel(\n\t\t\t\t\toTargetTableInfo.oTableRowContext,\n\t\t\t\t\tiRowIndex,\n\t\t\t\t\toTargetTableInfo.sTableTargetColProperty,\n\t\t\t\t\toTable,\n\t\t\t\t\toMessageObject,\n\t\t\t\t\tbIsCreationRow\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tif (setSectionNameInGroup) {\n\t\t\tconst sectionBasedGroupName = messageHandling.createSectionGroupName(\n\t\t\t\tsection,\n\t\t\t\tsubSection,\n\t\t\t\tbMultipleSubSections,\n\t\t\t\toTargetTableInfo,\n\t\t\t\toResourceBundle\n\t\t\t);\n\n\t\t\tmessage.setGroupName(sectionBasedGroupName);\n\t\t\tconst sViewId = this._getViewId(this.getId());\n\t\t\tconst oView = Core.byId(sViewId as string);\n\t\t\tconst oMessageTargetProperty = oMessageObject.getTargets()[0] && oMessageObject.getTargets()[0].split(\"/\").pop();\n\t\t\tconst oUIModel = oView?.getModel(\"internal\") as JSONModel;\n\t\t\tif (\n\t\t\t\toUIModel &&\n\t\t\t\toUIModel.getProperty(\"/messageTargetProperty\") &&\n\t\t\t\toMessageTargetProperty &&\n\t\t\t\toMessageTargetProperty === oUIModel.getProperty(\"/messageTargetProperty\")\n\t\t\t) {\n\t\t\t\tthis.oMessagePopover.fireActiveTitlePress({ item: message });\n\t\t\t\toUIModel.setProperty(\"/messageTargetProperty\", false);\n\t\t\t}\n\t\t}\n\t\tthis.oItemBinding.attachChange(this._setMessageData, this);\n\t\treturn oTargetedControl;\n\t}\n\n\t_checkControlIdInSections(aMessages: any[], bEnableBinding: boolean) {\n\t\tlet section, aSubSections, message, i, j, k;\n\n\t\tthis.sGeneralGroupText = this.sGeneralGroupText\n\t\t\t? this.sGeneralGroupText\n\t\t\t: Core.getLibraryResourceBundle(\"sap.fe.core\").getText(\"T_MESSAGE_BUTTON_SAPFE_MESSAGE_GROUP_GENERAL\");\n\t\t//Get all sections from the object page layout\n\t\tconst aVisibleSections = messageHandling.getVisibleSectionsFromObjectPageLayout(this.oObjectPageLayout);\n\t\tif (aVisibleSections) {\n\t\t\tconst viewId = this._getViewId(this.getId());\n\t\t\tconst oView = Core.byId(viewId);\n\t\t\tconst sActionName = oView?.getBindingContext(\"internal\")?.getProperty(\"sActionName\");\n\t\t\tif (sActionName) {\n\t\t\t\t(oView?.getBindingContext(\"internal\") as any).setProperty(\"sActionName\", null);\n\t\t\t}\n\t\t\tfor (i = aMessages.length - 1; i >= 0; --i) {\n\t\t\t\t// Loop over all messages\n\t\t\t\tmessage = aMessages[i];\n\t\t\t\tlet bIsGeneralGroupName = true;\n\t\t\t\tfor (j = aVisibleSections.length - 1; j >= 0; --j) {\n\t\t\t\t\t// Loop over all visible sections\n\t\t\t\t\tsection = aVisibleSections[j];\n\t\t\t\t\taSubSections = section.getSubSections();\n\t\t\t\t\tfor (k = aSubSections.length - 1; k >= 0; --k) {\n\t\t\t\t\t\t// Loop over all sub-sections\n\t\t\t\t\t\tconst subSection = aSubSections[k];\n\t\t\t\t\t\tconst oMessageObject = message.getBindingContext(\"message\").getObject();\n\n\t\t\t\t\t\tconst aControls = messageHandling.getControlFromMessageRelatingToSubSection(subSection, oMessageObject);\n\t\t\t\t\t\tif (aControls.length > 0) {\n\t\t\t\t\t\t\tconst oTargetedControl = this._computeMessageGroupAndSubTitle(\n\t\t\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t\t\tsection,\n\t\t\t\t\t\t\t\tsubSection,\n\t\t\t\t\t\t\t\taControls,\n\t\t\t\t\t\t\t\taSubSections.length > 1,\n\t\t\t\t\t\t\t\tsActionName\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t// if we found table that matches with the message, we don't stop the loop\n\t\t\t\t\t\t\t// in case we find an additional control (eg mdc field) that also match with the message\n\t\t\t\t\t\t\tif (oTargetedControl && !oTargetedControl.isA(\"sap.m.Table\") && !oTargetedControl.isA(\"sap.ui.table.Table\")) {\n\t\t\t\t\t\t\t\tj = k = -1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbIsGeneralGroupName = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (bIsGeneralGroupName) {\n\t\t\t\t\tconst oMessageObject = message.getBindingContext(\"message\").getObject();\n\t\t\t\t\tmessage.setActiveTitle(false);\n\t\t\t\t\tif (oMessageObject.persistent && sActionName) {\n\t\t\t\t\t\tthis._setGroupLabelForTransientMsg(message, sActionName);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmessage.setGroupName(this.sGeneralGroupText);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!bEnableBinding && message.getGroupName() === this.sGeneralGroupText && this._findTargetForMessage(message)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_findTargetForMessage(message: any) {\n\t\tconst messageObject = message.getBindingContext(\"message\") && message.getBindingContext(\"message\").getObject();\n\t\tif (messageObject && messageObject.target) {\n\t\t\tconst oMetaModel =\n\t\t\t\t\tthis.oObjectPageLayout && this.oObjectPageLayout.getModel() && this.oObjectPageLayout.getModel().getMetaModel(),\n\t\t\t\tcontextPath = oMetaModel && oMetaModel.getMetaPath(messageObject.target),\n\t\t\t\toContextPathMetadata = oMetaModel && oMetaModel.getObject(contextPath);\n\t\t\tif (oContextPathMetadata && oContextPathMetadata.$kind === \"Property\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\n\t_fnEnableBindings(aSections: any[]) {\n\t\tif (UriParameters.fromQuery(window.location.search).get(\"sap-fe-xx-lazyloadingtest\")) {\n\t\t\treturn;\n\t\t}\n\t\tfor (let iSection = 0; iSection < aSections.length; iSection++) {\n\t\t\tconst oSection = aSections[iSection];\n\t\t\tlet nonTableChartcontrolFound = false;\n\t\t\tconst aSubSections = oSection.getSubSections();\n\t\t\tfor (let iSubSection = 0; iSubSection < aSubSections.length; iSubSection++) {\n\t\t\t\tconst oSubSection = aSubSections[iSubSection];\n\t\t\t\tconst oAllBlocks = oSubSection.getBlocks();\n\t\t\t\tif (oAllBlocks) {\n\t\t\t\t\tfor (let block = 0; block < oSubSection.getBlocks().length; block++) {\n\t\t\t\t\t\tif (oAllBlocks[block].getContent && !oAllBlocks[block].getContent()?.isA(\"sap.fe.macros.table.TableAPI\")) {\n\t\t\t\t\t\t\tnonTableChartcontrolFound = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (nonTableChartcontrolFound) {\n\t\t\t\t\t\toSubSection.setBindingContext(undefined);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (oSubSection.getBindingContext()) {\n\t\t\t\t\tthis._findMessageGroupAfterRebinding();\n\t\t\t\t\toSubSection.getBindingContext().getBinding().attachDataReceived(this._findMessageGroupAfterRebinding.bind(this));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_findMessageGroupAfterRebinding() {\n\t\tconst aMessages = this.oMessagePopover.getItems();\n\t\tthis._checkControlIdInSections(aMessages, true);\n\t}\n\n\t/**\n\t * The method that retrieves the view ID (HTMLView/XMLView/JSONview/JSView/Templateview) of any control.\n\t *\n\t * @param sControlId ID of the control needed to retrieve the view ID\n\t * @returns The view ID of the control\n\t */\n\t_getViewId(sControlId: string) {\n\t\tlet sViewId,\n\t\t\toControl = Core.byId(sControlId) as any;\n\t\twhile (oControl) {\n\t\t\tif (oControl instanceof View) {\n\t\t\t\tsViewId = oControl.getId();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\toControl = oControl.getParent();\n\t\t}\n\t\treturn sViewId;\n\t}\n\n\t_setLongtextUrlDescription(sMessageDescriptionContent: string, oDiagnosisTitle: any) {\n\t\tthis.oMessagePopover.setAsyncDescriptionHandler(function (config: any) {\n\t\t\t// This stores the old description\n\t\t\tconst sOldDescription = sMessageDescriptionContent;\n\t\t\t// Here we can fetch the data and concatenate it to the old one\n\t\t\t// By default, the longtextUrl fetching will overwrite the description (with the default behaviour)\n\t\t\t// Here as we have overwritten the default async handler, which fetches and replaces the description of the item\n\t\t\t// we can manually modify it to include whatever needed.\n\t\t\tconst sLongTextUrl = config.item.getLongtextUrl();\n\t\t\tif (sLongTextUrl) {\n\t\t\t\tjQuery.ajax({\n\t\t\t\t\ttype: \"GET\",\n\t\t\t\t\turl: sLongTextUrl,\n\t\t\t\t\tsuccess: function (data) {\n\t\t\t\t\t\tconst sDiagnosisText = oDiagnosisTitle.getHtmlText() + data;\n\t\t\t\t\t\tconfig.item.setDescription(`${sOldDescription}${sDiagnosisText}`);\n\t\t\t\t\t\tconfig.promise.resolve();\n\t\t\t\t\t},\n\t\t\t\t\terror: function () {\n\t\t\t\t\t\tconfig.item.setDescription(sMessageDescriptionContent);\n\t\t\t\t\t\tconst sError = `A request has failed for long text data. URL: ${sLongTextUrl}`;\n\t\t\t\t\t\tLog.error(sError);\n\t\t\t\t\t\tconfig.promise.reject(sError);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\t_formatMessageDescription(\n\t\tmessage: any,\n\t\toTableRowContext: any,\n\t\tsTableTargetColName: string,\n\t\toResourceBundle: ResourceBundle,\n\t\toTable: any\n\t) {\n\t\tconst sTableFirstColProperty = oTable.getParent().getIdentifierColumn();\n\t\tlet sColumnInfo = \"\";\n\t\tconst oMsgObj = message.getBindingContext(\"message\")?.getObject();\n\t\tconst oColFromTableSettings: ColumnDataWithAvailabilityType = messageHandling.fetchColumnInfo(oMsgObj, oTable);\n\t\tif (sTableTargetColName) {\n\t\t\t// if column in present in table definition\n\t\t\tsColumnInfo = `${oResourceBundle.getText(\"T_MESSAGE_GROUP_DESCRIPTION_TABLE_COLUMN\")}: ${sTableTargetColName}`;\n\t\t} else if (oColFromTableSettings) {\n\t\t\tif (oColFromTableSettings.availability === \"Hidden\") {\n\t\t\t\t// if column in neither in table definition nor personalization\n\t\t\t\tif (message.getType() === \"Error\") {\n\t\t\t\t\tsColumnInfo = sTableFirstColProperty\n\t\t\t\t\t\t? `${oResourceBundle.getText(\"T_COLUMN_AVAILABLE_DIAGNOSIS_MSGDESC_ERROR\")} ${oTableRowContext.getValue(\n\t\t\t\t\t\t\t\tsTableFirstColProperty\n\t\t\t\t\t\t  )}` + \".\"\n\t\t\t\t\t\t: `${oResourceBundle.getText(\"T_COLUMN_AVAILABLE_DIAGNOSIS_MSGDESC_ERROR\")}` + \".\";\n\t\t\t\t} else {\n\t\t\t\t\tsColumnInfo = sTableFirstColProperty\n\t\t\t\t\t\t? `${oResourceBundle.getText(\"T_COLUMN_AVAILABLE_DIAGNOSIS_MSGDESC\")} ${oTableRowContext.getValue(\n\t\t\t\t\t\t\t\tsTableFirstColProperty\n\t\t\t\t\t\t  )}` + \".\"\n\t\t\t\t\t\t: `${oResourceBundle.getText(\"T_COLUMN_AVAILABLE_DIAGNOSIS_MSGDESC\")}` + \".\";\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// if column is not in table definition but in personalization\n\t\t\t\t//if no navigation to sub op then remove link to error field BCP : 2280168899\n\t\t\t\tif (!this._navigationConfigured(oTable)) {\n\t\t\t\t\tmessage.setActiveTitle(false);\n\t\t\t\t}\n\t\t\t\tsColumnInfo = `${oResourceBundle.getText(\"T_MESSAGE_GROUP_DESCRIPTION_TABLE_COLUMN\")}: ${\n\t\t\t\t\toColFromTableSettings.label\n\t\t\t\t} (${oResourceBundle.getText(\"T_COLUMN_INDICATOR_IN_TABLE_DEFINITION\")})`;\n\t\t\t}\n\t\t}\n\t\tconst oFieldsAffectedTitle = new FormattedText({\n\t\t\thtmlText: `<html><body><strong>${oResourceBundle.getText(\"T_FIELDS_AFFECTED_TITLE\")}</strong></body></html><br>`\n\t\t});\n\t\tlet sFieldAffectedText: String;\n\t\tif (sTableFirstColProperty) {\n\t\t\tsFieldAffectedText = `${oFieldsAffectedTitle.getHtmlText()}<br>${oResourceBundle.getText(\n\t\t\t\t\"T_MESSAGE_GROUP_TITLE_TABLE_DENOMINATOR\"\n\t\t\t)}: ${oTable.getHeader()}<br>${oResourceBundle.getText(\"T_MESSAGE_GROUP_DESCRIPTION_TABLE_ROW\")}: ${oTableRowContext.getValue(\n\t\t\t\tsTableFirstColProperty\n\t\t\t)}<br>${sColumnInfo}<br>`;\n\t\t} else if (sColumnInfo == \"\" || !sColumnInfo) {\n\t\t\tsFieldAffectedText = \"\";\n\t\t} else {\n\t\t\tsFieldAffectedText = `${oFieldsAffectedTitle.getHtmlText()}<br>${oResourceBundle.getText(\n\t\t\t\t\"T_MESSAGE_GROUP_TITLE_TABLE_DENOMINATOR\"\n\t\t\t)}: ${oTable.getHeader()}<br>${sColumnInfo}<br>`;\n\t\t}\n\n\t\tconst oDiagnosisTitle = new FormattedText({\n\t\t\thtmlText: `<html><body><strong>${oResourceBundle.getText(\"T_DIAGNOSIS_TITLE\")}</strong></body></html><br>`\n\t\t});\n\t\t// get the UI messages from the message context to set it to Diagnosis section\n\t\tconst sUIMessageDescription = message.getBindingContext(\"message\").getObject().description;\n\t\t//set the description to null to reset it below\n\t\tmessage.setDescription(null);\n\t\tlet sDiagnosisText = \"\";\n\t\tlet sMessageDescriptionContent = \"\";\n\t\tif (message.getLongtextUrl()) {\n\t\t\tsMessageDescriptionContent = `${sFieldAffectedText}<br>`;\n\t\t\tthis._setLongtextUrlDescription(sMessageDescriptionContent, oDiagnosisTitle);\n\t\t} else if (sUIMessageDescription) {\n\t\t\tsDiagnosisText = `${oDiagnosisTitle.getHtmlText()}<br>${sUIMessageDescription}`;\n\t\t\tsMessageDescriptionContent = `${sFieldAffectedText}<br>${sDiagnosisText}`;\n\t\t\tmessage.setDescription(sMessageDescriptionContent);\n\t\t} else {\n\t\t\tmessage.setDescription(sFieldAffectedText);\n\t\t}\n\t}\n\n\t/**\n\t * Method to set the button text, count and icon property based upon the message items\n\t * ButtonType:  Possible settings for warning and error messages are 'critical' and 'negative'.\n\t *\n\t *\n\t * @private\n\t */\n\t_setMessageData() {\n\t\tclearTimeout(this._setMessageDataTimeout);\n\n\t\tthis._setMessageDataTimeout = setTimeout(async () => {\n\t\t\tconst sIcon = \"\",\n\t\t\t\toMessages = this.oMessagePopover.getItems(),\n\t\t\t\toMessageCount: MessageCount = { Error: 0, Warning: 0, Success: 0, Information: 0 },\n\t\t\t\toResourceBundle = Core.getLibraryResourceBundle(\"sap.fe.core\"),\n\t\t\t\tiMessageLength = oMessages.length;\n\t\t\tlet sButtonType = ButtonType.Default,\n\t\t\t\tsMessageKey = \"\",\n\t\t\t\tsTooltipText = \"\",\n\t\t\t\tsMessageText = \"\";\n\t\t\tif (iMessageLength > 0) {\n\t\t\t\tfor (let i = 0; i < iMessageLength; i++) {\n\t\t\t\t\tif (!oMessages[i].getType() || oMessages[i].getType() === \"\") {\n\t\t\t\t\t\t++oMessageCount[\"Information\"];\n\t\t\t\t\t} else {\n\t\t\t\t\t\t++oMessageCount[oMessages[i].getType() as keyof MessageCount];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (oMessageCount[MessageType.Error] > 0) {\n\t\t\t\t\tsButtonType = ButtonType.Negative;\n\t\t\t\t} else if (oMessageCount[MessageType.Warning] > 0) {\n\t\t\t\t\tsButtonType = ButtonType.Critical;\n\t\t\t\t} else if (oMessageCount[MessageType.Success] > 0) {\n\t\t\t\t\tsButtonType = ButtonType.Success;\n\t\t\t\t} else if (oMessageCount[MessageType.Information] > 0) {\n\t\t\t\t\tsButtonType = ButtonType.Neutral;\n\t\t\t\t}\n\n\t\t\t\tconst totalNumberOfMessages =\n\t\t\t\t\toMessageCount[MessageType.Error] +\n\t\t\t\t\toMessageCount[MessageType.Warning] +\n\t\t\t\t\toMessageCount[MessageType.Success] +\n\t\t\t\t\toMessageCount[MessageType.Information];\n\n\t\t\t\tthis.setText(totalNumberOfMessages.toString());\n\n\t\t\t\tif (oMessageCount.Error === 1) {\n\t\t\t\t\tsMessageKey = \"C_COMMON_SAPFE_ERROR_MESSAGES_PAGE_TITLE_ERROR\";\n\t\t\t\t} else if (oMessageCount.Error > 1) {\n\t\t\t\t\tsMessageKey = \"C_COMMON_SAPFE_ERROR_MESSAGES_PAGE_MULTIPLE_ERROR_TOOLTIP\";\n\t\t\t\t} else if (!oMessageCount.Error && oMessageCount.Warning) {\n\t\t\t\t\tsMessageKey = \"C_COMMON_SAPFE_ERROR_MESSAGES_PAGE_WARNING_TOOLTIP\";\n\t\t\t\t} else if (!oMessageCount.Error && !oMessageCount.Warning && oMessageCount.Information) {\n\t\t\t\t\tsMessageKey = \"C_MESSAGE_HANDLING_SAPFE_ERROR_MESSAGES_PAGE_TITLE_INFO\";\n\t\t\t\t} else if (!oMessageCount.Error && !oMessageCount.Warning && !oMessageCount.Information && oMessageCount.Success) {\n\t\t\t\t\tsMessageKey = \"C_MESSAGE_HANDLING_SAPFE_ERROR_MESSAGES_PAGE_TITLE_SUCCESS\";\n\t\t\t\t}\n\t\t\t\tif (sMessageKey) {\n\t\t\t\t\tsMessageText = oResourceBundle.getText(sMessageKey);\n\t\t\t\t\tsTooltipText = oMessageCount.Error ? `${oMessageCount.Error} ${sMessageText}` : sMessageText;\n\t\t\t\t\tthis.setTooltip(sTooltipText);\n\t\t\t\t}\n\t\t\t\tthis.setIcon(sIcon);\n\t\t\t\tthis.setType(sButtonType);\n\t\t\t\tthis.setVisible(true);\n\t\t\t\tconst oView = Core.byId(this.sViewId) as View;\n\t\t\t\tif (oView) {\n\t\t\t\t\tconst oPageReady = (oView.getController() as PageController).pageReady;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait oPageReady.waitPageReady();\n\t\t\t\t\t\tawait this._applyGroupingAsync(oView);\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\tLog.error(\"fail grouping messages\");\n\t\t\t\t\t}\n\t\t\t\t\t(this as any).fireMessageChange({\n\t\t\t\t\t\tiMessageLength: iMessageLength\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (iMessageLength > 1) {\n\t\t\t\t\tthis.oMessagePopover.navigateBack();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.setVisible(false);\n\t\t\t\t(this as any).fireMessageChange({\n\t\t\t\t\tiMessageLength: iMessageLength\n\t\t\t\t});\n\t\t\t}\n\t\t}, 100);\n\t}\n\n\t/**\n\t * The method that is called when a user clicks on the title of the message.\n\t *\n\t * @function\n\t * @name _activeTitlePress\n\t * @private\n\t * @param oEvent Event object passed from the handler\n\t */\n\tasync _activeTitlePress(oEvent: CoreEvent) {\n\t\tconst oInternalModelContext = this.getBindingContext(\"pageInternal\");\n\t\t(oInternalModelContext as any).setProperty(\"errorNavigationSectionFlag\", true);\n\t\tconst oItem = oEvent.getParameter(\"item\"),\n\t\t\toMessage = oItem.getBindingContext(\"message\").getObject(),\n\t\t\tbIsBackendMessage = new RegExp(\"^/\").test(oMessage.getTarget()),\n\t\t\toView = Core.byId(this.sViewId) as View;\n\t\tlet oControl, sSectionTitle;\n\t\tconst _defaultFocus = function (message: any, mdcTable: any) {\n\t\t\tconst focusInfo = { preventScroll: true, targetInfo: message };\n\t\t\tmdcTable.focus(focusInfo);\n\t\t};\n\n\t\t//check if the pressed item is related to a table control\n\t\tif (oItem.getGroupName().indexOf(\"Table:\") !== -1) {\n\t\t\tlet oTargetMdcTable: any;\n\t\t\tif (bIsBackendMessage) {\n\t\t\t\toTargetMdcTable = oMessage.controlIds\n\t\t\t\t\t.map(function (sControlId: string) {\n\t\t\t\t\t\tconst control = Core.byId(sControlId);\n\t\t\t\t\t\tconst oParentControl = control && (control.getParent() as any);\n\t\t\t\t\t\treturn oParentControl &&\n\t\t\t\t\t\t\toParentControl.isA(\"sap.ui.mdc.Table\") &&\n\t\t\t\t\t\t\toParentControl.getHeader() === oItem.getGroupName().split(\", Table: \")[1]\n\t\t\t\t\t\t\t? oParentControl\n\t\t\t\t\t\t\t: null;\n\t\t\t\t\t})\n\t\t\t\t\t.reduce(function (acc: any, val: any) {\n\t\t\t\t\t\treturn val ? val : acc;\n\t\t\t\t\t});\n\t\t\t\tif (oTargetMdcTable) {\n\t\t\t\t\tsSectionTitle = oItem.getGroupName().split(\", \")[0];\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait this._navigateFromMessageToSectionTableInIconTabBarMode(\n\t\t\t\t\t\t\toTargetMdcTable,\n\t\t\t\t\t\t\tthis.oObjectPageLayout,\n\t\t\t\t\t\t\tsSectionTitle\n\t\t\t\t\t\t);\n\t\t\t\t\t\tconst oRefErrorContext = this._getTableRefErrorContext(oTargetMdcTable);\n\t\t\t\t\t\tconst oRefError = oRefErrorContext.getProperty(oItem.getBindingContext(\"message\").getObject().getId());\n\t\t\t\t\t\tconst _setFocusOnTargetField = async (targetMdcTable: any, iRowIndex: number): Promise<any> => {\n\t\t\t\t\t\t\tconst aTargetMdcTableRow = this._getMdcTableRows(targetMdcTable),\n\t\t\t\t\t\t\t\tiFirstVisibleRow = this._getGridTable(targetMdcTable).getFirstVisibleRow();\n\t\t\t\t\t\t\tif (aTargetMdcTableRow.length > 0 && aTargetMdcTableRow[0]) {\n\t\t\t\t\t\t\t\tconst oTargetRow = aTargetMdcTableRow[iRowIndex - iFirstVisibleRow],\n\t\t\t\t\t\t\t\t\toTargetCell = this.getTargetCell(oTargetRow, oMessage);\n\t\t\t\t\t\t\t\tif (oTargetCell) {\n\t\t\t\t\t\t\t\t\tthis.setFocusToControl(oTargetCell);\n\t\t\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t// control not found on table\n\t\t\t\t\t\t\t\t\tconst errorProperty = oMessage.getTarget().split(\"/\").pop();\n\t\t\t\t\t\t\t\t\tif (errorProperty) {\n\t\t\t\t\t\t\t\t\t\t(oView.getModel(\"internal\") as JSONModel).setProperty(\"/messageTargetProperty\", errorProperty);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (this._navigationConfigured(targetMdcTable)) {\n\t\t\t\t\t\t\t\t\t\treturn (oView.getController() as PageController)._routing.navigateForwardToContext(\n\t\t\t\t\t\t\t\t\t\t\toTargetRow.getBindingContext()\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (oTargetMdcTable.data(\"tableType\") === \"GridTable\" && oRefError.rowIndex !== \"\") {\n\t\t\t\t\t\t\tconst iFirstVisibleRow = this._getGridTable(oTargetMdcTable).getFirstVisibleRow();\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tawait oTargetMdcTable.scrollToIndex(oRefError.rowIndex);\n\t\t\t\t\t\t\t\tconst aTargetMdcTableRow = this._getMdcTableRows(oTargetMdcTable);\n\t\t\t\t\t\t\t\tlet iNewFirstVisibleRow, bScrollNeeded;\n\t\t\t\t\t\t\t\tif (aTargetMdcTableRow.length > 0 && aTargetMdcTableRow[0]) {\n\t\t\t\t\t\t\t\t\tiNewFirstVisibleRow = aTargetMdcTableRow[0].getParent().getFirstVisibleRow();\n\t\t\t\t\t\t\t\t\tbScrollNeeded = iFirstVisibleRow - iNewFirstVisibleRow !== 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlet oWaitControlIdAdded: Promise<void>;\n\t\t\t\t\t\t\t\tif (bScrollNeeded) {\n\t\t\t\t\t\t\t\t\t//The scrollToIndex function does not wait for the UI update. As a workaround, pending a fix from MDC (BCP: 2170251631) we use the event \"UIUpdated\".\n\t\t\t\t\t\t\t\t\toWaitControlIdAdded = new Promise(function (resolve) {\n\t\t\t\t\t\t\t\t\t\tCore.attachEvent(\"UIUpdated\", resolve);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\toWaitControlIdAdded = Promise.resolve();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tawait oWaitControlIdAdded;\n\t\t\t\t\t\t\t\tsetTimeout(async function () {\n\t\t\t\t\t\t\t\t\tconst focusOnTargetField = await _setFocusOnTargetField(oTargetMdcTable, oRefError.rowIndex);\n\t\t\t\t\t\t\t\t\tif (focusOnTargetField === false) {\n\t\t\t\t\t\t\t\t\t\t_defaultFocus(oMessage, oTargetMdcTable);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\tLog.error(\"Error while focusing on error\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (oTargetMdcTable.data(\"tableType\") === \"ResponsiveTable\" && oRefError) {\n\t\t\t\t\t\t\tconst focusOnMessageTargetControl = await this.focusOnMessageTargetControl(\n\t\t\t\t\t\t\t\toView,\n\t\t\t\t\t\t\t\toMessage,\n\t\t\t\t\t\t\t\toTargetMdcTable,\n\t\t\t\t\t\t\t\toRefError.rowIndex\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (focusOnMessageTargetControl === false) {\n\t\t\t\t\t\t\t\t_defaultFocus(oMessage, oTargetMdcTable);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.focusOnMessageTargetControl(oView, oMessage);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\tLog.error(\"Fail to navigate to Error control\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toControl = Core.byId(oMessage.controlIds[0]);\n\t\t\t\t//If the control underlying the frontEnd message is not within the current section, we first go into the target section:\n\t\t\t\tconst oSelectedSection: any = Core.byId(this.oObjectPageLayout.getSelectedSection());\n\t\t\t\tif (oSelectedSection?.findElements(true).indexOf(oControl) === -1) {\n\t\t\t\t\tsSectionTitle = oItem.getGroupName().split(\", \")[0];\n\t\t\t\t\tthis._navigateFromMessageToSectionInIconTabBarMode(this.oObjectPageLayout, sSectionTitle);\n\t\t\t\t}\n\t\t\t\tthis.setFocusToControl(oControl);\n\t\t\t}\n\t\t} else {\n\t\t\t// focus on control\n\t\t\tsSectionTitle = oItem.getGroupName().split(\", \")[0];\n\t\t\tthis._navigateFromMessageToSectionInIconTabBarMode(this.oObjectPageLayout, sSectionTitle);\n\t\t\tthis.focusOnMessageTargetControl(oView, oMessage);\n\t\t}\n\t}\n\n\t/**\n\t * Retrieves a table cell targeted by a message.\n\t *\n\t * @param {object} targetRow A table row\n\t * @param {object} message Message targeting a cell\n\t * @returns {object} Returns the cell\n\t * @private\n\t */\n\tgetTargetCell(targetRow: ColumnListItem, message: Message): UI5Element | null | undefined {\n\t\treturn message.getControlIds().length > 0\n\t\t\t? message\n\t\t\t\t\t.getControlIds()\n\t\t\t\t\t.map(function (controlId: string) {\n\t\t\t\t\t\tconst isControlInTable = (targetRow as any).findElements(true, function (elem: any) {\n\t\t\t\t\t\t\treturn elem.getId() === controlId;\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn isControlInTable.length > 0 ? Core.byId(controlId) : null;\n\t\t\t\t\t})\n\t\t\t\t\t.reduce(function (acc: any, val: any) {\n\t\t\t\t\t\treturn val ? val : acc;\n\t\t\t\t\t})\n\t\t\t: null;\n\t}\n\n\t/**\n\t * Focus on the control targeted by a message.\n\t *\n\t * @param {object} view The current view\n\t * @param {object} message The message targeting the control on which we want to set the focus\n\t * @param {object} targetMdcTable The table targeted by the message (optional)\n\t * @param {number} rowIndex The row index of the table targeted by the message (optional)\n\t * @returns {Promise} Promise\n\t * @private\n\t */\n\tasync focusOnMessageTargetControl(view: View, message: Message, targetMdcTable?: any, rowIndex?: number): Promise<any> {\n\t\tconst aAllViewElements = view.findElements(true);\n\t\tconst aErroneousControls = message\n\t\t\t.getControlIds()\n\t\t\t.filter(function (sControlId: string) {\n\t\t\t\treturn aAllViewElements.some(function (oElem) {\n\t\t\t\t\treturn oElem.getId() === sControlId && oElem.getDomRef();\n\t\t\t\t});\n\t\t\t})\n\t\t\t.map(function (sControlId: string) {\n\t\t\t\treturn Core.byId(sControlId);\n\t\t\t});\n\t\tconst aNotTableErroneousControls = aErroneousControls.filter(function (oElem: any) {\n\t\t\treturn !oElem.isA(\"sap.m.Table\") && !oElem.isA(\"sap.ui.table.Table\");\n\t\t});\n\t\t//The focus is set on Not Table control in priority\n\t\tif (aNotTableErroneousControls.length > 0) {\n\t\t\tthis.setFocusToControl(aNotTableErroneousControls[0]);\n\t\t\treturn undefined;\n\t\t} else if (aErroneousControls.length > 0) {\n\t\t\tconst aTargetMdcTableRow = targetMdcTable\n\t\t\t\t? targetMdcTable.findElements(true, function (oElem: any) {\n\t\t\t\t\t\treturn oElem.isA(ColumnListItem.getMetadata().getName());\n\t\t\t\t  })\n\t\t\t\t: [];\n\t\t\tif (aTargetMdcTableRow.length > 0 && aTargetMdcTableRow[0]) {\n\t\t\t\tconst oTargetRow = aTargetMdcTableRow[rowIndex as number];\n\t\t\t\tconst oTargetCell = this.getTargetCell(oTargetRow, message) as any;\n\t\t\t\tif (oTargetCell) {\n\t\t\t\t\tconst oTargetField = oTargetCell.isA(\"sap.fe.macros.field.FieldAPI\")\n\t\t\t\t\t\t? oTargetCell.getContent().getContentEdit()[0]\n\t\t\t\t\t\t: oTargetCell.getItems()[0].getContent().getContentEdit()[0];\n\t\t\t\t\tthis.setFocusToControl(oTargetField);\n\t\t\t\t\treturn undefined;\n\t\t\t\t} else {\n\t\t\t\t\tconst errorProperty = message.getTarget().split(\"/\").pop();\n\t\t\t\t\tif (errorProperty) {\n\t\t\t\t\t\t(view.getModel(\"internal\") as JSONModel).setProperty(\"/messageTargetProperty\", errorProperty);\n\t\t\t\t\t}\n\t\t\t\t\tif (this._navigationConfigured(targetMdcTable)) {\n\t\t\t\t\t\treturn (view.getController() as PageController)._routing.navigateForwardToContext(oTargetRow.getBindingContext());\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}\n\t\treturn undefined;\n\t}\n\n\t/**\n\t *\n\t * @param obj The message object\n\t * @param aSections The array of sections in the object page\n\t * @returns The rank of the message\n\t */\n\t_getMessageRank(obj: any, aSections: any[]) {\n\t\tif (aSections) {\n\t\t\tlet section, aSubSections, subSection, j, k, aElements, aAllElements, sectionRank;\n\t\t\tfor (j = aSections.length - 1; j >= 0; --j) {\n\t\t\t\t// Loop over all sections\n\t\t\t\tsection = aSections[j];\n\t\t\t\taSubSections = section.getSubSections();\n\t\t\t\tfor (k = aSubSections.length - 1; k >= 0; --k) {\n\t\t\t\t\t// Loop over all sub-sections\n\t\t\t\t\tsubSection = aSubSections[k];\n\t\t\t\t\taAllElements = subSection.findElements(true); // Get all elements inside a sub-section\n\t\t\t\t\t//Try to find the control 1 inside the sub section\n\t\t\t\t\taElements = aAllElements.filter(this._fnFilterUponId.bind(this, obj.getControlId()));\n\t\t\t\t\tsectionRank = j + 1;\n\t\t\t\t\tif (aElements.length > 0) {\n\t\t\t\t\t\tif (section.getVisible() && subSection.getVisible()) {\n\t\t\t\t\t\t\tif (!obj.hasOwnProperty(\"sectionName\")) {\n\t\t\t\t\t\t\t\tobj.sectionName = section.getTitle();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (!obj.hasOwnProperty(\"subSectionName\")) {\n\t\t\t\t\t\t\t\tobj.subSectionName = subSection.getTitle();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn sectionRank * 10 + (k + 1);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// if section or subsection is invisible then group name would be Last Action\n\t\t\t\t\t\t\t// so ranking should be lower\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t//if sub section title is Other messages, we return a high number(rank), which ensures\n\t\t\t//that messages belonging to this sub section always come later in messagePopover\n\t\t\tif (!obj.sectionName && !obj.subSectionName && obj.persistent) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\treturn 999;\n\t\t}\n\t\treturn 999;\n\t}\n\n\t/**\n\t * Method to set the filters based upon the message items\n\t * The desired filter operation is:\n\t * ( filters provided by user && ( validation = true && Control should be present in view ) || messages for the current matching context ).\n\t *\n\t * @private\n\t */\n\t_applyFiltersAndSort() {\n\t\tlet oValidationFilters,\n\t\t\toValidationAndContextFilter,\n\t\t\toFilters,\n\t\t\tsPath,\n\t\t\toSorter,\n\t\t\toDialogFilter,\n\t\t\tobjectPageLayoutSections: any = null;\n\t\tconst aUserDefinedFilter: any[] = [];\n\t\tconst filterOutMessagesInDialog = () => {\n\t\t\tconst fnTest = (aControlIds: string[]) => {\n\t\t\t\tlet index = Infinity,\n\t\t\t\t\toControl = Core.byId(aControlIds[0]) as any;\n\t\t\t\tconst errorFieldControl = Core.byId(aControlIds[0]);\n\t\t\t\twhile (oControl) {\n\t\t\t\t\tconst fieldRankinDialog =\n\t\t\t\t\t\toControl instanceof Dialog\n\t\t\t\t\t\t\t? (errorFieldControl?.getParent() as any).findElements(true).indexOf(errorFieldControl)\n\t\t\t\t\t\t\t: Infinity;\n\t\t\t\t\tif (oControl instanceof Dialog) {\n\t\t\t\t\t\tif (index > fieldRankinDialog) {\n\t\t\t\t\t\t\tindex = fieldRankinDialog;\n\t\t\t\t\t\t\t// Set the focus to the dialog's control\n\t\t\t\t\t\t\tthis.setFocusToControl(errorFieldControl);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// messages for sap.m.Dialog should not appear in the message button\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\toControl = oControl.getParent();\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t};\n\t\t\treturn new Filter({\n\t\t\t\tpath: \"controlIds\",\n\t\t\t\ttest: fnTest,\n\t\t\t\tcaseSensitive: true\n\t\t\t});\n\t\t};\n\t\t//Filter function to verify if the control is part of the current view or not\n\t\tfunction getCheckControlInViewFilter() {\n\t\t\tconst fnTest = function (aControlIds: string[]) {\n\t\t\t\tif (!aControlIds.length) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tlet oControl: any = Core.byId(aControlIds[0]);\n\t\t\t\twhile (oControl) {\n\t\t\t\t\tif (oControl.getId() === sViewId) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tif (oControl instanceof Dialog) {\n\t\t\t\t\t\t// messages for sap.m.Dialog should not appear in the message button\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\toControl = oControl.getParent();\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\t\t\treturn new Filter({\n\t\t\t\tpath: \"controlIds\",\n\t\t\t\ttest: fnTest,\n\t\t\t\tcaseSensitive: true\n\t\t\t});\n\t\t}\n\t\tif (!this.sViewId) {\n\t\t\tthis.sViewId = this._getViewId(this.getId()) as string;\n\t\t}\n\t\tconst sViewId = this.sViewId;\n\t\t//Add the filters provided by the user\n\t\tconst aCustomFilters = this.getAggregation(\"customFilters\") as any;\n\t\tif (aCustomFilters) {\n\t\t\taCustomFilters.forEach(function (filter: any) {\n\t\t\t\taUserDefinedFilter.push(\n\t\t\t\t\tnew Filter({\n\t\t\t\t\t\tpath: filter.getProperty(\"path\"),\n\t\t\t\t\t\toperator: filter.getProperty(\"operator\"),\n\t\t\t\t\t\tvalue1: filter.getProperty(\"value1\"),\n\t\t\t\t\t\tvalue2: filter.getProperty(\"value2\")\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t\tconst oBindingContext = this.getBindingContext();\n\t\tif (!oBindingContext) {\n\t\t\tthis.setVisible(false);\n\t\t\treturn;\n\t\t} else {\n\t\t\tsPath = oBindingContext.getPath();\n\t\t\t//Filter for filtering out only validation messages which are currently present in the view\n\t\t\toValidationFilters = new Filter({\n\t\t\t\tfilters: [\n\t\t\t\t\tnew Filter({\n\t\t\t\t\t\tpath: \"validation\",\n\t\t\t\t\t\toperator: FilterOperator.EQ,\n\t\t\t\t\t\tvalue1: true\n\t\t\t\t\t}),\n\t\t\t\t\tgetCheckControlInViewFilter()\n\t\t\t\t],\n\t\t\t\tand: true\n\t\t\t});\n\t\t\t//Filter for filtering out the bound messages i.e target starts with the context path\n\t\t\toValidationAndContextFilter = new Filter({\n\t\t\t\tfilters: [\n\t\t\t\t\toValidationFilters,\n\t\t\t\t\tnew Filter({\n\t\t\t\t\t\tpath: \"target\",\n\t\t\t\t\t\toperator: FilterOperator.StartsWith,\n\t\t\t\t\t\tvalue1: sPath\n\t\t\t\t\t})\n\t\t\t\t],\n\t\t\t\tand: false\n\t\t\t});\n\t\t\toDialogFilter = new Filter({\n\t\t\t\tfilters: [filterOutMessagesInDialog()]\n\t\t\t});\n\t\t}\n\t\tconst oValidationContextDialogFilters = new Filter({\n\t\t\tfilters: [oValidationAndContextFilter, oDialogFilter],\n\t\t\tand: true\n\t\t});\n\t\t// and finally - if there any - add custom filter (via OR)\n\t\tif (aUserDefinedFilter.length > 0) {\n\t\t\toFilters = new (Filter as any)({\n\t\t\t\tfilters: [aUserDefinedFilter, oValidationContextDialogFilters],\n\t\t\t\tand: false\n\t\t\t});\n\t\t} else {\n\t\t\toFilters = oValidationContextDialogFilters;\n\t\t}\n\t\tthis.oItemBinding.filter(oFilters);\n\t\tthis.oObjectPageLayout = this._getObjectPageLayout(this, this.oObjectPageLayout);\n\t\t// We support sorting only for ObjectPageLayout use-case.\n\t\tif (this.oObjectPageLayout) {\n\t\t\toSorter = new (Sorter as any)(\"\", null, null, (obj1: any, obj2: any) => {\n\t\t\t\tif (!objectPageLayoutSections) {\n\t\t\t\t\tobjectPageLayoutSections = this.oObjectPageLayout && this.oObjectPageLayout.getSections();\n\t\t\t\t}\n\t\t\t\tconst rankA = this._getMessageRank(obj1, objectPageLayoutSections);\n\t\t\t\tconst rankB = this._getMessageRank(obj2, objectPageLayoutSections);\n\t\t\t\tif (rankA < rankB) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\tif (rankA > rankB) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\treturn 0;\n\t\t\t});\n\t\t\tthis.oItemBinding.sort(oSorter);\n\t\t}\n\t}\n\n\t/**\n\t *\n\t * @param sControlId\n\t * @param oItem\n\t * @returns True if the control ID matches the item ID\n\t */\n\t_fnFilterUponId(sControlId: string, oItem: any) {\n\t\treturn sControlId === oItem.getId();\n\t}\n\n\t/**\n\t * Retrieves the section based on section title and visibility.\n\t *\n\t * @param oObjectPage Object page.\n\t * @param sSectionTitle Section title.\n\t * @returns The section\n\t * @private\n\t */\n\t_getSectionBySectionTitle(oObjectPage: any, sSectionTitle: string) {\n\t\tlet oSection;\n\t\tif (sSectionTitle) {\n\t\t\tconst aSections = oObjectPage.getSections();\n\t\t\tfor (let i = 0; i < aSections.length; i++) {\n\t\t\t\tif (aSections[i].getVisible() && aSections[i].getTitle() === sSectionTitle) {\n\t\t\t\t\toSection = aSections[i];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn oSection;\n\t}\n\n\t/**\n\t * Navigates to the section if the object page uses an IconTabBar and if the current section is not the target of the navigation.\n\t *\n\t * @param oObjectPage Object page.\n\t * @param sSectionTitle Section title.\n\t * @private\n\t */\n\t_navigateFromMessageToSectionInIconTabBarMode(oObjectPage: any, sSectionTitle: string) {\n\t\tconst bUseIconTabBar = oObjectPage.getUseIconTabBar();\n\t\tif (bUseIconTabBar) {\n\t\t\tconst oSection = this._getSectionBySectionTitle(oObjectPage, sSectionTitle);\n\t\t\tconst sSelectedSectionId = oObjectPage.getSelectedSection();\n\t\t\tif (oSection && sSelectedSectionId !== oSection.getId()) {\n\t\t\t\toObjectPage.setSelectedSection(oSection.getId());\n\t\t\t}\n\t\t}\n\t}\n\n\tasync _navigateFromMessageToSectionTableInIconTabBarMode(oTable: any, oObjectPage: any, sSectionTitle: string): Promise<void> {\n\t\tconst oRowBinding = oTable.getRowBinding();\n\t\tconst oTableContext = oTable.getBindingContext();\n\t\tconst oOPContext = oObjectPage.getBindingContext();\n\t\tconst bShouldWaitForTableRefresh = !(oTableContext === oOPContext);\n\t\tthis._navigateFromMessageToSectionInIconTabBarMode(oObjectPage, sSectionTitle);\n\t\treturn new Promise(function (resolve: Function) {\n\t\t\tif (bShouldWaitForTableRefresh) {\n\t\t\t\toRowBinding.attachEventOnce(\"change\", function () {\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tresolve();\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Retrieves the MdcTable if it is found among any of the parent elements.\n\t *\n\t * @param oElement Control\n\t * @returns MDC table || undefined\n\t * @private\n\t */\n\t_getMdcTable(oElement: any) {\n\t\t//check if the element has a table within any of its parents\n\t\tlet oParentElement = oElement.getParent();\n\t\twhile (oParentElement && !oParentElement.isA(\"sap.ui.mdc.Table\")) {\n\t\t\toParentElement = oParentElement.getParent();\n\t\t}\n\t\treturn oParentElement && oParentElement.isA(\"sap.ui.mdc.Table\") ? oParentElement : undefined;\n\t}\n\n\t_getGridTable(oMdcTable: any) {\n\t\treturn oMdcTable.findElements(true, function (oElem: any) {\n\t\t\treturn (\n\t\t\t\toElem.isA(\"sap.ui.table.Table\") &&\n\t\t\t\t/** We check the element belongs to the MdcTable :*/\n\t\t\t\toElem.getParent() === oMdcTable\n\t\t\t);\n\t\t})[0];\n\t}\n\n\t/**\n\t * Retrieves the table row (if available) containing the element.\n\t *\n\t * @param oElement Control\n\t * @returns Table row || undefined\n\t * @private\n\t */\n\t_getTableRow(oElement: any) {\n\t\tlet oParentElement = oElement.getParent();\n\t\twhile (\n\t\t\toParentElement &&\n\t\t\t!oParentElement.isA(\"sap.ui.table.Row\") &&\n\t\t\t!oParentElement.isA(\"sap.ui.table.CreationRow\") &&\n\t\t\t!oParentElement.isA(ColumnListItem.getMetadata().getName())\n\t\t) {\n\t\t\toParentElement = oParentElement.getParent();\n\t\t}\n\t\treturn oParentElement &&\n\t\t\t(oParentElement.isA(\"sap.ui.table.Row\") ||\n\t\t\t\toParentElement.isA(\"sap.ui.table.CreationRow\") ||\n\t\t\t\toParentElement.isA(ColumnListItem.getMetadata().getName()))\n\t\t\t? oParentElement\n\t\t\t: undefined;\n\t}\n\n\t/**\n\t * Retrieves the index of the table row containing the element.\n\t *\n\t * @param oElement Control\n\t * @returns Row index || undefined\n\t * @private\n\t */\n\t_getTableRowIndex(oElement: any) {\n\t\tconst oTableRow = this._getTableRow(oElement);\n\t\tlet iRowIndex;\n\t\tif (oTableRow.isA(\"sap.ui.table.Row\")) {\n\t\t\tiRowIndex = oTableRow.getIndex();\n\t\t} else {\n\t\t\tiRowIndex = oTableRow\n\t\t\t\t.getTable()\n\t\t\t\t.getItems()\n\t\t\t\t.findIndex(function (element: any) {\n\t\t\t\t\treturn element.getId() === oTableRow.getId();\n\t\t\t\t});\n\t\t}\n\t\treturn iRowIndex;\n\t}\n\n\t/**\n\t * Retrieves the index of the table column containing the element.\n\t *\n\t * @param oElement Control\n\t * @returns Column index || undefined\n\t * @private\n\t */\n\t_getTableColumnIndex(oElement: any) {\n\t\tconst getTargetCellIndex = function (element: any, oTargetRow: any) {\n\t\t\treturn oTargetRow.getCells().findIndex(function (oCell: any) {\n\t\t\t\treturn oCell.getId() === element.getId();\n\t\t\t});\n\t\t};\n\t\tconst getTargetColumnIndex = function (element: any, oTargetRow: any) {\n\t\t\tlet oTargetElement = element.getParent(),\n\t\t\t\tiTargetCellIndex = getTargetCellIndex(oTargetElement, oTargetRow);\n\t\t\twhile (oTargetElement && iTargetCellIndex < 0) {\n\t\t\t\toTargetElement = oTargetElement.getParent();\n\t\t\t\tiTargetCellIndex = getTargetCellIndex(oTargetElement, oTargetRow);\n\t\t\t}\n\t\t\treturn iTargetCellIndex;\n\t\t};\n\t\tconst oTargetRow = this._getTableRow(oElement);\n\t\tlet iTargetColumnIndex;\n\t\tiTargetColumnIndex = getTargetColumnIndex(oElement, oTargetRow);\n\t\tif (oTargetRow.isA(\"sap.ui.table.CreationRow\")) {\n\t\t\tconst sTargetCellId = oTargetRow.getCells()[iTargetColumnIndex].getId(),\n\t\t\t\taTableColumns = oTargetRow.getTable().getColumns();\n\t\t\tiTargetColumnIndex = aTableColumns.findIndex(function (column: any) {\n\t\t\t\tif (column.getCreationTemplate()) {\n\t\t\t\t\treturn sTargetCellId.search(column.getCreationTemplate().getId()) > -1 ? true : false;\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn iTargetColumnIndex;\n\t}\n\n\t_getMdcTableRows(oMdcTable: any) {\n\t\treturn oMdcTable.findElements(true, function (oElem: any) {\n\t\t\treturn (\n\t\t\t\toElem.isA(\"sap.ui.table.Row\") &&\n\t\t\t\t/** We check the element belongs to the Mdc Table :*/\n\t\t\t\toElem.getTable().getParent() === oMdcTable\n\t\t\t);\n\t\t});\n\t}\n\n\t_getObjectPageLayout(oElement: any, oObjectPageLayout: any) {\n\t\tif (oObjectPageLayout) {\n\t\t\treturn oObjectPageLayout;\n\t\t}\n\t\toObjectPageLayout = oElement;\n\t\t//Iterate over parent till you have not reached the object page layout\n\t\twhile (oObjectPageLayout && !oObjectPageLayout.isA(\"sap.uxap.ObjectPageLayout\")) {\n\t\t\toObjectPageLayout = oObjectPageLayout.getParent();\n\t\t}\n\t\treturn oObjectPageLayout;\n\t}\n\n\t/**\n\t * The method that is called to check if a navigation is configured from the table to a sub object page.\n\t *\n\t * @private\n\t * @param table MdcTable\n\t * @returns Either true or false\n\t */\n\t_navigationConfigured(table: any): boolean {\n\t\t// TODO: this logic would be moved to check the same at the template time to avoid the same check happening multiple times.\n\t\tconst component = sap.ui.require(\"sap/ui/core/Component\"),\n\t\t\tnavObject = table && component.getOwnerComponentFor(table) && component.getOwnerComponentFor(table).getNavigation();\n\t\tlet subOPConfigured = false,\n\t\t\tnavConfigured = false;\n\t\tif (navObject && Object.keys(navObject).indexOf(table.getRowBinding().sPath) !== -1) {\n\t\t\tsubOPConfigured =\n\t\t\t\tnavObject[table?.getRowBinding().sPath] &&\n\t\t\t\tnavObject[table?.getRowBinding().sPath].detail &&\n\t\t\t\tnavObject[table?.getRowBinding().sPath].detail.route\n\t\t\t\t\t? true\n\t\t\t\t\t: false;\n\t\t}\n\t\tnavConfigured =\n\t\t\tsubOPConfigured &&\n\t\t\ttable?.getRowSettings().getRowActions() &&\n\t\t\ttable?.getRowSettings().getRowActions()[0].mProperties.type.indexOf(\"Navigation\") !== -1;\n\t\treturn navConfigured;\n\t}\n\n\tsetFocusToControl(control?: UI5Element) {\n\t\tconst messagePopover = this.oMessagePopover;\n\t\tif (messagePopover && control && control.focus) {\n\t\t\tconst fnFocus = () => {\n\t\t\t\tcontrol.focus();\n\t\t\t};\n\t\t\tif (!messagePopover.isOpen()) {\n\t\t\t\t// when navigating to parent page to child page (on click of message), the child page might have a focus logic that might use a timeout.\n\t\t\t\t// we use the below timeouts to override this focus so that we focus on the target control of the message in the child page.\n\t\t\t\tsetTimeout(fnFocus, 0);\n\t\t\t} else {\n\t\t\t\tconst fnOnClose = () => {\n\t\t\t\t\tsetTimeout(fnFocus, 0);\n\t\t\t\t\tmessagePopover.detachEvent(\"afterClose\", fnOnClose);\n\t\t\t\t};\n\t\t\t\tmessagePopover.attachEvent(\"afterClose\", fnOnClose);\n\t\t\t\tmessagePopover.close();\n\t\t\t}\n\t\t} else {\n\t\t\tLog.warning(\"FE V4 : MessageButton : element doesn't have focus method for focusing.\");\n\t\t}\n\t}\n}\n\nexport default MessageButton;\n"],"mappings":"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"}},{"offset":{"line":18980,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","UriParameters","messageHandling","ClassSupport","MessagePopover","Button","ColumnListItem","Dialog","FormattedText","library","Core","coreLibrary","View","Filter","FilterOperator","Sorter","_dec","_dec2","_dec3","_class","_class2","_descriptor","_descriptor2","MessageType","ButtonType","event","defineUI5Class","aggregation","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","MessageButton","type","multiple","singularName","_Button","_this","_len","arguments","length","args","Array","_key","this","sGeneralGroupText","sViewId","sLastActionText","_proto","init","apply","attachPress","handleMessagePopoverPress","oMessagePopover","oItemBinding","getBinding","attachChange","_setMessageData","messageButtonId","getId","addCustomData","core","CustomData","attachModelContextChange","_applyFiltersAndSort","attachActiveTitlePress","_activeTitlePress","oEvent","toggle","getSource","_applyGroupingAsync","async","oView","aWaitForData","oViewBindingContext","getBindingContext","_findTablesRelatedToMessages","view","oRes","aMessages","getContexts","map","oContext","getObject","oViewContext","oObjectPage","getContent","getVisibleSectionsFromObjectPageLayout","oSection","getSubSections","oSubSection","findElements","oElem","isA","i","oRowBinding","getRowBinding","sElemeBindingPath","getPath","indexOf","push","table","subsection","oTables","_oTable","_oMDCTable$getBinding","oMDCTable","oSubsection","setBindingContext","isLengthFinal","Promise","resolve","attachEventOnce","waitForGroupingApplied","setTimeout","_applyGrouping","all","getModel","checkMessages","err","error","oObjectPageLayout","_getObjectPageLayout","getItems","aSections","bEnableBinding","_checkControlIdInSections","_fnEnableBindings","_getTableRefErrorContext","oTable","oModel","getProperty","setProperty","sRefErrorContextPath","replace","getContext","_updateInternalModel","oTableRowContext","iRowIndex","sTableTargetColProperty","oMessageObject","bIsCreationRow","oTemp","rowIndex","targetColProperty","aValidMessageIds","getCore","getMessageManager","getMessageModel","getData","message","id","aObsoleteMessagelIds","filter","internalMessageId","obsoleteId","assign","_setGroupLabelForTransientMsg","sActionName","getLibraryResourceBundle","getText","setGroupName","_computeMessageGroupAndSubTitle","section","subSection","aElements","bMultipleSubSections","_message$getBindingCo","detachChange","setSectionNameInGroup","oElement","oTargetTableInfo","l","oTargetedControl","bIsBackendMessage","RegExp","test","getTargets","oResourceBundle","getParent","fnCallbackSetGroupName","oMessageObj","actionName","obj","getTableColumnDataAndSetSubtile","subTitle","setSubtitle","setActiveTitle","_formatMessageDescription","sTableTargetColName","getIndex","bIsTargetedControlOrphan","bIsOrphanElement","_getMdcTable","tableHeader","getHeader","iTargetColumnIndex","_getTableColumnIndex","getColumns","getDataProperty","_getTableRow","_getTableRowIndex","oTableRowBindingContexts","getCurrentContexts","sMessageSubtitle","getMessageSubtitle","getValueState","sectionBasedGroupName","createSectionGroupName","_getViewId","byId","oMessageTargetProperty","split","pop","oUIModel","fireActiveTitlePress","item","aSubSections","j","k","aVisibleSections","_oView$getBindingCont","viewId","bIsGeneralGroupName","aControls","getControlFromMessageRelatingToSubSection","persistent","getGroupName","_findTargetForMessage","messageObject","oMetaModel","getMetaModel","contextPath","getMetaPath","oContextPathMetadata","$kind","fromQuery","window","location","search","get","iSection","nonTableChartcontrolFound","iSubSection","oAllBlocks","getBlocks","block","_oAllBlocks$block$get","_findMessageGroupAfterRebinding","attachDataReceived","sControlId","oControl","_setLongtextUrlDescription","sMessageDescriptionContent","oDiagnosisTitle","setAsyncDescriptionHandler","config","sOldDescription","sLongTextUrl","getLongtextUrl","jQuery","ajax","url","success","data","sDiagnosisText","getHtmlText","setDescription","promise","sError","reject","_message$getBindingCo2","sTableFirstColProperty","getIdentifierColumn","sColumnInfo","oMsgObj","oColFromTableSettings","fetchColumnInfo","availability","getType","getValue","_navigationConfigured","label","oFieldsAffectedTitle","htmlText","sFieldAffectedText","sUIMessageDescription","description","clearTimeout","_setMessageDataTimeout","sIcon","oMessages","oMessageCount","Warning","Success","Information","iMessageLength","sButtonType","Default","sMessageKey","sTooltipText","sMessageText","Negative","Critical","Neutral","totalNumberOfMessages","setText","toString","setTooltip","setIcon","setType","setVisible","oPageReady","getController","pageReady","waitPageReady","fireMessageChange","navigateBack","oInternalModelContext","oItem","getParameter","oMessage","getTarget","sSectionTitle","_defaultFocus","mdcTable","focusInfo","preventScroll","targetInfo","focus","oTargetMdcTable","controlIds","control","oParentControl","acc","val","_navigateFromMessageToSectionTableInIconTabBarMode","oRefErrorContext","oRefError","_setFocusOnTargetField","targetMdcTable","aTargetMdcTableRow","_getMdcTableRows","iFirstVisibleRow","_getGridTable","getFirstVisibleRow","oTargetRow","oTargetCell","getTargetCell","setFocusToControl","errorProperty","_routing","navigateForwardToContext","scrollToIndex","iNewFirstVisibleRow","bScrollNeeded","oWaitControlIdAdded","attachEvent","focusOnTargetField","focusOnMessageTargetControl","oSelectedSection","getSelectedSection","_navigateFromMessageToSectionInIconTabBarMode","targetRow","getControlIds","controlId","isControlInTable","elem","aAllViewElements","aErroneousControls","some","getDomRef","aNotTableErroneousControls","getMetadata","getName","oTargetField","getContentEdit","_getMessageRank","aAllElements","sectionRank","_fnFilterUponId","getControlId","getVisible","hasOwnProperty","sectionName","getTitle","subSectionName","oValidationFilters","oValidationAndContextFilter","oFilters","sPath","oSorter","oDialogFilter","objectPageLayoutSections","aUserDefinedFilter","filterOutMessagesInDialog","fnTest","aControlIds","index","Infinity","errorFieldControl","fieldRankinDialog","path","caseSensitive","getCheckControlInViewFilter","aCustomFilters","getAggregation","operator","value1","value2","oBindingContext","filters","EQ","and","StartsWith","oValidationContextDialogFilters","obj1","obj2","getSections","rankA","rankB","sort","_getSectionBySectionTitle","bUseIconTabBar","getUseIconTabBar","sSelectedSectionId","setSelectedSection","oTableContext","oOPContext","bShouldWaitForTableRefresh","oParentElement","oMdcTable","oTableRow","getTable","findIndex","element","getTargetCellIndex","getCells","oCell","getTargetColumnIndex","oTargetElement","iTargetCellIndex","sTargetCellId","aTableColumns","column","getCreationTemplate","component","require","navObject","getOwnerComponentFor","getNavigation","subOPConfigured","navConfigured","detail","route","getRowSettings","getRowActions","mProperties","messagePopover","fnFocus","isOpen","fnOnClose","detachEvent","close","warning"],"sources":["MessageButton-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,kDAAO,CAAC,eAAgB,8BAA+B,kEAAmE,mCAAoC,wCAAyC,eAAgB,uBAAwB,eAAgB,sBAAuB,gBAAiB,mBAAoB,sBAAuB,uBAAwB,sBAAuB,8BAA+B,uBAAwB,SAAUC,EAAKC,EAAeC,EAAiBC,EAAcC,EAAgBC,EAAQC,EAAgBC,EAAQC,EAAeC,EAASC,EAAMC,EAAaC,EAAMC,EAAQC,EAAgBC,GACnnB,aAEA,IAAIC,EAAMC,EAAOC,EAAOC,EAAQC,EAASC,EAAaC,EACtD,IAAIC,EAAcZ,EAAYY,YAC9B,IAAIC,EAAaf,EAAQe,WACzB,IAAIC,EAAQtB,EAAasB,MACzB,IAAIC,EAAiBvB,EAAauB,eAClC,IAAIC,EAAcxB,EAAawB,YAC/B,SAASC,EAA2BC,EAAQC,EAAUC,EAAYC,GAAW,IAAKD,EAAY,OAAQE,OAAOC,eAAeL,EAAQC,EAAU,CAAEK,WAAYJ,EAAWI,WAAYC,aAAcL,EAAWK,aAAcC,SAAUN,EAAWM,SAAUC,MAAOP,EAAWQ,YAAcR,EAAWQ,YAAYC,KAAKR,QAAgB,GAAM,CAC3U,SAASS,EAAuBC,GAAQ,GAAIA,SAAc,EAAG,CAAE,MAAM,IAAIC,eAAe,4DAA8D,CAAE,OAAOD,CAAM,CACrK,SAASE,EAAeC,EAAUC,GAAcD,EAASE,UAAYd,OAAOe,OAAOF,EAAWC,WAAYF,EAASE,UAAUE,YAAcJ,EAAUK,EAAgBL,EAAUC,EAAa,CAC5L,SAASI,EAAgBC,EAAGC,GAAKF,EAAkBjB,OAAOoB,eAAiBpB,OAAOoB,eAAeC,OAAS,SAASJ,EAAgBC,EAAGC,GAAKD,EAAEI,UAAYH,EAAG,OAAOD,CAAG,EAAG,OAAOD,EAAgBC,EAAGC,EAAI,CACvM,SAASI,EAA0B3B,EAAQC,EAAU2B,EAAY1B,EAAYC,GAAW,IAAI0B,EAAO,CAAC,EAAGzB,OAAO0B,KAAK5B,GAAY6B,QAAQ,SAAUC,GAAOH,EAAKG,GAAO9B,EAAW8B,EAAM,GAAIH,EAAKvB,aAAeuB,EAAKvB,WAAYuB,EAAKtB,eAAiBsB,EAAKtB,aAAc,GAAI,UAAWsB,GAAQA,EAAKnB,YAAa,CAAEmB,EAAKrB,SAAW,IAAM,CAAEqB,EAAOD,EAAWK,QAAQC,UAAUC,OAAO,SAAUN,EAAMO,GAAa,OAAOA,EAAUpC,EAAQC,EAAU4B,IAASA,CAAM,EAAGA,GAAO,GAAI1B,GAAW0B,EAAKnB,mBAAqB,EAAG,CAAEmB,EAAKpB,MAAQoB,EAAKnB,YAAcmB,EAAKnB,YAAYC,KAAKR,QAAgB,EAAG0B,EAAKnB,YAAc2B,SAAW,CAAE,GAAIR,EAAKnB,mBAAqB,EAAG,CAAEN,OAAOC,eAAeL,EAAQC,EAAU4B,GAAOA,EAAO,IAAM,CAAE,OAAOA,CAAM,CACntB,SAASS,EAA0BpC,EAAYC,GAAW,MAAM,IAAIoC,MAAM,wDAA0D,gFAAkF,CACtN,IAAIC,GAAiBrD,EAAOU,EAAe,wCAAyCT,EAAQU,EAAY,CACtG2C,KAAM,uCACNC,SAAU,KACVC,aAAc,iBACZtD,EAAQO,IAAST,EAAKG,GAAUC,EAAuB,SAAUqD,GACnE7B,EAAeyB,EAAeI,GAC9B,SAASJ,IACP,IAAIK,EACJ,IAAK,IAAIC,EAAOC,UAAUC,OAAQC,EAAO,IAAIC,MAAMJ,GAAOK,EAAO,EAAGA,EAAOL,EAAMK,IAAQ,CACvFF,EAAKE,GAAQJ,UAAUI,EACzB,CACAN,EAAQD,EAAQjC,KAAKyC,QAASH,IAASG,KACvCrD,EAA2B8C,EAAO,gBAAiBrD,EAAaoB,EAAuBiC,IACvF9C,EAA2B8C,EAAO,gBAAiBpD,EAAcmB,EAAuBiC,IACxFA,EAAMQ,kBAAoB,GAC1BR,EAAMS,QAAU,GAChBT,EAAMU,gBAAkB,GACxB,OAAOV,CACT,CACA,IAAIW,EAAShB,EAActB,UAC3BsC,EAAOC,KAAO,SAASA,IACrBjF,EAAO0C,UAAUuC,KAAKC,MAAMN,MAE5BA,KAAKO,YAAYP,KAAKQ,0BAA2BR,MACjDA,KAAKS,gBAAkB,IAAItF,EAC3B6E,KAAKU,aAAeV,KAAKS,gBAAgBE,WAAW,SACpDX,KAAKU,aAAaE,aAAaZ,KAAKa,gBAAiBb,MACrD,MAAMc,EAAkBd,KAAKe,QAC7B,GAAID,EAAiB,CACnBd,KAAKS,gBAAgBO,cAAc,IAAIpG,IAAIC,GAAGoG,KAAKC,WAAW,CAC5DtC,IAAK,kBACLvB,MAAOyD,IAEX,CAEAd,KAAKmB,yBAAyBnB,KAAKoB,qBAAqB/C,KAAK2B,OAC7DA,KAAKS,gBAAgBY,uBAAuBrB,KAAKsB,kBAAkBjD,KAAK2B,MAC1E,EAOAI,EAAOI,0BAA4B,SAASA,EAA0Be,GACpEvB,KAAKS,gBAAgBe,OAAOD,EAAOE,YACrC,EAUArB,EAAOsB,oBAAsBC,eAAeD,EAAoBE,GAC9D,MAAMC,EAAe,GACrB,MAAMC,EAAsBF,EAAMG,oBAClC,MAAMC,EAA+BC,IACnC,MAAMC,EAAO,GACb,MAAMC,EAAYnC,KAAKU,aAAa0B,cAAcC,IAAI,SAAUC,GAC9D,OAAOA,EAASC,WAClB,GACA,MAAMC,EAAeP,EAAKF,oBAC1B,GAAIS,EAAc,CAChB,MAAMC,EAAcR,EAAKS,aAAa,GACtCzH,EAAgB0H,uCAAuCF,GAAa9D,QAAQ,SAAUiE,GACpFA,EAASC,iBAAiBlE,QAAQ,SAAUmE,GAC1CA,EAAYC,aAAa,MAAMpE,QAAQ,SAAUqE,GAC/C,GAAIA,EAAMC,IAAI,oBAAqB,CACjC,IAAK,IAAIC,EAAI,EAAGA,EAAIf,EAAUvC,OAAQsD,IAAK,CACzC,MAAMC,EAAcH,EAAMI,gBAC1B,GAAID,EAAa,CACf,MAAME,EAAoB,GAAGb,EAAac,aAAaN,EAAMI,gBAAgBE,YAC7E,GAAInB,EAAUe,GAAGtG,OAAO2G,QAAQF,KAAuB,EAAG,CACxDnB,EAAKsB,KAAK,CACRC,MAAOT,EACPU,WAAYZ,IAEd,KACF,CACF,CACF,CACF,CACF,EACF,EACF,EACF,CACA,OAAOZ,CAAI,EAGb,MAAMyB,EAAU3B,EAA6B3D,KAAK2B,KAAlCgC,CAAwCJ,GACxD+B,EAAQhF,QAAQ,SAAUiF,GACxB,IAAIC,EACJ,MAAMC,EAAYF,EAAQH,MACxBM,EAAcH,EAAQF,WACxB,IAAKI,EAAU/B,uBAAyB8B,EAAwBC,EAAU/B,uBAAyB,MAAQ8B,SAA+B,OAAS,EAAIA,EAAsBP,cAAgBxB,IAAwB,MAAQA,SAA6B,OAAS,EAAIA,EAAoBwB,WAAY,CACrSS,EAAYC,kBAAkBlC,GAC9B,IAAKgC,EAAUV,gBAAgBa,gBAAiB,CAC9CpC,EAAa2B,KAAK,IAAIU,QAAQ,SAAUC,GACtCL,EAAUV,gBAAgBgB,gBAAgB,eAAgB,WACxDD,GACF,EACF,GACF,CACF,CACF,GACA,MAAME,EAAyB,IAAIH,QAAQC,IACzCG,WAAW3C,UACT3B,KAAKuE,iBACLJ,GAAS,EACR,EAAE,GAEP,UACQD,QAAQM,IAAI3C,GAClBD,EAAM6C,WAAWC,sBACXL,CAGR,CAFE,MAAOM,GACP5J,EAAI6J,MAAM,0DACZ,CACF,EAOAxE,EAAOmE,eAAiB,SAASA,IAC/BvE,KAAK6E,kBAAoB7E,KAAK8E,qBAAqB9E,KAAMA,KAAK6E,mBAC9D,IAAK7E,KAAK6E,kBAAmB,CAC3B,MACF,CACA,MAAM1C,EAAYnC,KAAKS,gBAAgBsE,WACvC,MAAMC,EAAY/J,EAAgB0H,uCAAuC3C,KAAK6E,mBAC9E,MAAMI,EAAiBjF,KAAKkF,0BAA0B/C,EAAW,OACjE,GAAI8C,EAAgB,CAClBjF,KAAKmF,kBAAkBH,EACzB,CACF,EAUA5E,EAAOgF,yBAA2B,SAASA,EAAyBC,GAClE,MAAMC,EAASD,EAAOZ,SAAS,YAE/B,IAAKY,EAAOtD,kBAAkB,YAAYwD,YAAY,YAAa,CACjED,EAAOE,YAAY,WAAY,CAAC,EAAGH,EAAOtD,kBAAkB,YAC9D,CACA,MAAM0D,EAAuBJ,EAAOtD,kBAAkB,YAAYuB,UAAY,aAAe+B,EAAOtD,oBAAoBuB,UAAUoC,QAAQ,IAAK,KAAO,IAAML,EAAOjC,gBAAgBE,UAAUoC,QAAQ,IAAK,KAC1M,MAAMpD,EAAWgD,EAAOK,WAAWF,GACnC,IAAKnD,EAASiD,YAAY,IAAK,CAC7BD,EAAOE,YAAY,GAAI,CAAC,EAAGlD,EAC7B,CACA,OAAOA,CACT,EACAlC,EAAOwF,qBAAuB,SAASA,EAAqBC,EAAkBC,EAAWC,EAAyBV,EAAQW,EAAgBC,GACxI,IAAIC,EACJ,GAAID,EAAgB,CAClBC,EAAQ,CACNC,SAAU,cACVC,kBAAmBL,EAA0BA,EAA0B,GAE3E,KAAO,CACLG,EAAQ,CACNC,SAAUN,EAAmBC,EAAY,GACzCM,kBAAmBL,EAA0BA,EAA0B,GAE3E,CACA,MAAMT,EAASD,EAAOZ,SAAS,YAC7BnC,EAAWtC,KAAKoF,yBAAyBC,GAE3C,MAAMgB,EAAmBzL,IAAIC,GAAGyL,UAAUC,oBAAoBC,kBAAkBC,UAAUpE,IAAI,SAAUqE,GACtG,OAAOA,EAAQC,EACjB,GACA,IAAIC,EACJ,GAAItE,EAASiD,cAAe,CAC1BqB,EAAuB5J,OAAO0B,KAAK4D,EAASiD,eAAesB,OAAO,SAAUC,GAC1E,OAAOT,EAAiB9C,QAAQuD,MAAwB,CAC1D,GACAF,EAAqBjI,QAAQ,SAAUoI,UAC9BzE,EAASiD,cAAcwB,EAChC,EACF,CACAzB,EAAOE,YAAYQ,EAAejF,QAAS/D,OAAOgK,OAAO,CAAC,EAAG1E,EAASiD,YAAYS,EAAejF,SAAWuB,EAASiD,YAAYS,EAAejF,SAAW,CAAC,EAAGmF,GAAQ5D,EACzK,EASAlC,EAAO6G,8BAAgC,SAASA,EAA8BP,EAASQ,GACrFlH,KAAKG,gBAAkBH,KAAKG,gBAAkBH,KAAKG,gBAAkB1E,EAAK0L,yBAAyB,eAAeC,QAAQ,oDAC1HV,EAAQW,aAAa,GAAGrH,KAAKG,oBAAoB+G,IACnD,EAcA9G,EAAOkH,gCAAkC,SAASA,EAAgCZ,EAASa,EAASC,EAAYC,EAAWC,EAAsBR,GAC/I,IAAIS,EACJ3H,KAAKU,aAAakH,aAAa5H,KAAKa,gBAAiBb,MACrD,MAAMgG,GAAkB2B,EAAwBjB,EAAQ3E,kBAAkB,cAAgB,MAAQ4F,SAA+B,OAAS,EAAIA,EAAsBpF,YACpK,MAAMsF,EAAwB,KAC9B,IAAIC,EAAUzC,EAAQ0C,EAAkBC,EAAGlC,EAAWmC,EAAkBhC,EACxE,MAAMiC,EAAoB,IAAIC,OAAO,MAAMC,KAAKpC,IAAmB,MAAQA,SAAwB,OAAS,EAAIA,EAAeqC,aAAa,IAC1IC,EAAkB7M,EAAK0L,yBAAyB,eAClD,GAAIe,EAAmB,CACrB,IAAKF,EAAI,EAAGA,EAAIP,EAAU7H,OAAQoI,IAAK,CACrCF,EAAWL,EAAUO,GACrBC,EAAmBH,EACnB,GAAIA,EAAS7E,IAAI,gBAAkB6E,EAAS7E,IAAI,sBAAuB,CACrEoC,EAASyC,EAASS,YAClB,MAAMpF,EAAckC,EAAOjC,gBAC3B,MAAMoF,EAAyB,CAACC,EAAaC,KAC3C1I,KAAKiH,8BAA8BP,EAASgC,EAAW,EAEzD,GAAIvF,GAAeA,EAAYc,iBAAmBoB,EAAOtD,oBAAqB,CAC5E,MAAM4G,EAAM1N,EAAgB2N,gCAAgC5C,EAAgBX,EAAQyC,EAAU3E,EAAa+D,EAAaW,EAAuBW,GAC/IT,EAAmBY,EAAIZ,iBACvB,GAAIY,EAAIE,SAAU,CAChBnC,EAAQoC,YAAYH,EAAIE,SAC1B,CACAnC,EAAQqC,iBAAiBhB,EAAiBlC,kBAC1C,GAAIkC,EAAiBlC,iBAAkB,CACrC7F,KAAKgJ,0BAA0BtC,EAASqB,EAAiBlC,iBAAkBkC,EAAiBkB,oBAAqBX,EAAiBjD,EACpI,CACAS,EAAYiC,EAAiBlC,kBAAoBkC,EAAiBlC,iBAAiBqD,WACnFlJ,KAAK4F,qBAAqBmC,EAAiBlC,iBAAkBC,EAAWiC,EAAiBhC,wBAAyBV,EAAQW,EAC5H,CACF,KAAO,CACLU,EAAQqC,eAAe,MAEvB,MAAMI,EAA2BlO,EAAgBmO,iBAAiBnB,EAAkBR,GACpF,GAAI0B,EAA0B,CAE5BzC,EAAQoC,YAAY,IACpB,KACF,CACF,CACF,CACF,KAAO,CAELb,EAAmBR,EAAU,GAC7BpC,EAASrF,KAAKqJ,aAAapB,GAC3B,GAAI5C,EAAQ,CACV0C,EAAmB,CAAC,EACpBA,EAAiBuB,YAAcjE,EAAOkE,YACtC,MAAMC,EAAqBxJ,KAAKyJ,qBAAqBxB,GACrDF,EAAiBhC,wBAA0ByD,GAAsB,EAAInE,EAAOqE,aAAaF,GAAoBG,kBAAoB1K,UACjI8I,EAAiBhC,wBAA0BgC,EAAiBhC,wBAC5DgC,EAAiBkB,oBAAsBlB,EAAiBhC,yBAA2ByD,GAAsB,EAAInE,EAAOqE,aAAaF,GAAoBD,YAActK,UACnKgH,EAAiBjG,KAAK4J,aAAa3B,GAAkBhF,IAAI,4BACzD,IAAKgD,EAAgB,CACnBH,EAAY9F,KAAK6J,kBAAkB5B,GACnCF,EAAiB+B,yBAA2BzE,EAAOjC,gBAAgB2G,qBACnEhC,EAAiBlC,iBAAmBkC,EAAiB+B,yBAAyBhE,EAChF,CACA,MAAMkE,EAAmB/O,EAAgBgP,mBAAmBjE,EAAgB+B,EAAiB+B,yBAA0B/B,EAAiBlC,iBAAkBkC,EAAiBkB,oBAAqBX,EAAiBjD,EAAQY,EAAgBuD,IAAuB,GAAKvB,EAAiBiC,kBAAoB,QAAUjC,EAAmBhJ,WAEvU,GAAI+K,EAAkB,CACpBtD,EAAQoC,YAAYkB,EACtB,CACAtD,EAAQqC,eAAe,MACvB/I,KAAK4F,qBAAqBmC,EAAiBlC,iBAAkBC,EAAWiC,EAAiBhC,wBAAyBV,EAAQW,EAAgBC,EAC5I,CACF,CACA,GAAI4B,EAAuB,CACzB,MAAMsC,EAAwBlP,EAAgBmP,uBAAuB7C,EAASC,EAAYE,EAAsBK,EAAkBO,GAClI5B,EAAQW,aAAa8C,GACrB,MAAMjK,EAAUF,KAAKqK,WAAWrK,KAAKe,SACrC,MAAMa,EAAQnG,EAAK6O,KAAKpK,GACxB,MAAMqK,EAAyBvE,EAAeqC,aAAa,IAAMrC,EAAeqC,aAAa,GAAGmC,MAAM,KAAKC,MAC3G,MAAMC,EAAW9I,IAAU,MAAQA,SAAe,OAAS,EAAIA,EAAM6C,SAAS,YAC9E,GAAIiG,GAAYA,EAASnF,YAAY,2BAA6BgF,GAA0BA,IAA2BG,EAASnF,YAAY,0BAA2B,CACrKvF,KAAKS,gBAAgBkK,qBAAqB,CACxCC,KAAMlE,IAERgE,EAASlF,YAAY,yBAA0B,MACjD,CACF,CACAxF,KAAKU,aAAaE,aAAaZ,KAAKa,gBAAiBb,MACrD,OAAOiI,CACT,EACA7H,EAAO8E,0BAA4B,SAASA,EAA0B/C,EAAW8C,GAC/E,IAAIsC,EAASsD,EAAcnE,EAASxD,EAAG4H,EAAGC,EAC1C/K,KAAKC,kBAAoBD,KAAKC,kBAAoBD,KAAKC,kBAAoBxE,EAAK0L,yBAAyB,eAAeC,QAAQ,gDAEhI,MAAM4D,EAAmB/P,EAAgB0H,uCAAuC3C,KAAK6E,mBACrF,GAAImG,EAAkB,CACpB,IAAIC,EACJ,MAAMC,EAASlL,KAAKqK,WAAWrK,KAAKe,SACpC,MAAMa,EAAQnG,EAAK6O,KAAKY,GACxB,MAAMhE,EAActF,IAAU,MAAQA,SAAe,OAAS,GAAKqJ,EAAwBrJ,EAAMG,kBAAkB,eAAiB,MAAQkJ,SAA+B,OAAS,EAAIA,EAAsB1F,YAAY,eAC1N,GAAI2B,EAAa,EACdtF,IAAU,MAAQA,SAAe,OAAS,EAAIA,EAAMG,kBAAkB,aAAayD,YAAY,cAAe,KACjH,CACA,IAAKtC,EAAIf,EAAUvC,OAAS,EAAGsD,GAAK,IAAKA,EAAG,CAE1CwD,EAAUvE,EAAUe,GACpB,IAAIiI,EAAsB,KAC1B,IAAKL,EAAIE,EAAiBpL,OAAS,EAAGkL,GAAK,IAAKA,EAAG,CAEjDvD,EAAUyD,EAAiBF,GAC3BD,EAAetD,EAAQ1E,iBACvB,IAAKkI,EAAIF,EAAajL,OAAS,EAAGmL,GAAK,IAAKA,EAAG,CAE7C,MAAMvD,EAAaqD,EAAaE,GAChC,MAAM/E,EAAiBU,EAAQ3E,kBAAkB,WAAWQ,YAC5D,MAAM6I,EAAYnQ,EAAgBoQ,0CAA0C7D,EAAYxB,GACxF,GAAIoF,EAAUxL,OAAS,EAAG,CACxB,MAAMqI,EAAmBjI,KAAKsH,gCAAgCZ,EAASa,EAASC,EAAY4D,EAAWP,EAAajL,OAAS,EAAGsH,GAGhI,GAAIe,IAAqBA,EAAiBhF,IAAI,iBAAmBgF,EAAiBhF,IAAI,sBAAuB,CAC3G6H,EAAIC,GAAK,CACX,CACAI,EAAsB,KACxB,CACF,CACF,CACA,GAAIA,EAAqB,CACvB,MAAMnF,EAAiBU,EAAQ3E,kBAAkB,WAAWQ,YAC5DmE,EAAQqC,eAAe,OACvB,GAAI/C,EAAesF,YAAcpE,EAAa,CAC5ClH,KAAKiH,8BAA8BP,EAASQ,EAC9C,KAAO,CACLR,EAAQW,aAAarH,KAAKC,kBAC5B,CACF,CACA,IAAKgF,GAAkByB,EAAQ6E,iBAAmBvL,KAAKC,mBAAqBD,KAAKwL,sBAAsB9E,GAAU,CAC/G,OAAO,IACT,CACF,CACF,CACF,EACAtG,EAAOoL,sBAAwB,SAASA,EAAsB9E,GAC5D,MAAM+E,EAAgB/E,EAAQ3E,kBAAkB,YAAc2E,EAAQ3E,kBAAkB,WAAWQ,YACnG,GAAIkJ,GAAiBA,EAAc7O,OAAQ,CACzC,MAAM8O,EAAa1L,KAAK6E,mBAAqB7E,KAAK6E,kBAAkBJ,YAAczE,KAAK6E,kBAAkBJ,WAAWkH,eAClHC,EAAcF,GAAcA,EAAWG,YAAYJ,EAAc7O,QACjEkP,EAAuBJ,GAAcA,EAAWnJ,UAAUqJ,GAC5D,GAAIE,GAAwBA,EAAqBC,QAAU,WAAY,CACrE,OAAO,IACT,CACF,CACF,EACA3L,EAAO+E,kBAAoB,SAASA,EAAkBH,GACpD,GAAIhK,EAAcgR,UAAUC,OAAOC,SAASC,QAAQC,IAAI,6BAA8B,CACpF,MACF,CACA,IAAK,IAAIC,EAAW,EAAGA,EAAWrH,EAAUpF,OAAQyM,IAAY,CAC9D,MAAMzJ,EAAWoC,EAAUqH,GAC3B,IAAIC,EAA4B,MAChC,MAAMzB,EAAejI,EAASC,iBAC9B,IAAK,IAAI0J,EAAc,EAAGA,EAAc1B,EAAajL,OAAQ2M,IAAe,CAC1E,MAAMzJ,EAAc+H,EAAa0B,GACjC,MAAMC,EAAa1J,EAAY2J,YAC/B,GAAID,EAAY,CACd,IAAK,IAAIE,EAAQ,EAAGA,EAAQ5J,EAAY2J,YAAY7M,OAAQ8M,IAAS,CACnE,IAAIC,EACJ,GAAIH,EAAWE,GAAOhK,eAAiBiK,EAAwBH,EAAWE,GAAOhK,gBAAkB,MAAQiK,SAA+B,GAAKA,EAAsB1J,IAAI,iCAAkC,CACzMqJ,EAA4B,KAC5B,KACF,CACF,CACA,GAAIA,EAA2B,CAC7BxJ,EAAYkB,kBAAkB/E,UAChC,CACF,CACA,GAAI6D,EAAYf,oBAAqB,CACnC/B,KAAK4M,kCACL9J,EAAYf,oBAAoBpB,aAAakM,mBAAmB7M,KAAK4M,gCAAgCvO,KAAK2B,MAC5G,CACF,CACF,CACF,EACAI,EAAOwM,gCAAkC,SAASA,IAChD,MAAMzK,EAAYnC,KAAKS,gBAAgBsE,WACvC/E,KAAKkF,0BAA0B/C,EAAW,KAC5C,EAQA/B,EAAOiK,WAAa,SAASA,EAAWyC,GACtC,IAAI5M,EACF6M,EAAWtR,EAAK6O,KAAKwC,GACvB,MAAOC,EAAU,CACf,GAAIA,aAAoBpR,EAAM,CAC5BuE,EAAU6M,EAAShM,QACnB,KACF,CACAgM,EAAWA,EAASxE,WACtB,CACA,OAAOrI,CACT,EACAE,EAAO4M,2BAA6B,SAASA,EAA2BC,EAA4BC,GAClGlN,KAAKS,gBAAgB0M,2BAA2B,SAAUC,GAExD,MAAMC,EAAkBJ,EAKxB,MAAMK,EAAeF,EAAOxC,KAAK2C,iBACjC,GAAID,EAAc,CAChBE,OAAOC,KAAK,CACVpO,KAAM,MACNqO,IAAKJ,EACLK,QAAS,SAAUC,GACjB,MAAMC,EAAiBX,EAAgBY,cAAgBF,EACvDR,EAAOxC,KAAKmD,eAAe,GAAGV,IAAkBQ,KAChDT,EAAOY,QAAQ7J,SACjB,EACAS,MAAO,WACLwI,EAAOxC,KAAKmD,eAAed,GAC3B,MAAMgB,EAAS,iDAAiDX,IAChEvS,EAAI6J,MAAMqJ,GACVb,EAAOY,QAAQE,OAAOD,EACxB,GAEJ,CACF,EACF,EACA7N,EAAO4I,0BAA4B,SAASA,EAA0BtC,EAASb,EAAkBoD,EAAqBX,EAAiBjD,GACrI,IAAI8I,EACJ,MAAMC,EAAyB/I,EAAOkD,YAAY8F,sBAClD,IAAIC,EAAc,GAClB,MAAMC,GAAWJ,EAAyBzH,EAAQ3E,kBAAkB,cAAgB,MAAQoM,SAAgC,OAAS,EAAIA,EAAuB5L,YAChK,MAAMiM,EAAwBvT,EAAgBwT,gBAAgBF,EAASlJ,GACvE,GAAI4D,EAAqB,CAEvBqF,EAAc,GAAGhG,EAAgBlB,QAAQ,gDAAgD6B,GAC3F,MAAO,GAAIuF,EAAuB,CAChC,GAAIA,EAAsBE,eAAiB,SAAU,CAEnD,GAAIhI,EAAQiI,YAAc,QAAS,CACjCL,EAAcF,EAAyB,GAAG9F,EAAgBlB,QAAQ,iDAAiDvB,EAAiB+I,SAASR,KAA4B,IAAM,GAAG9F,EAAgBlB,QAAQ,gDAAkD,GAC9P,KAAO,CACLkH,EAAcF,EAAyB,GAAG9F,EAAgBlB,QAAQ,2CAA2CvB,EAAiB+I,SAASR,KAA4B,IAAM,GAAG9F,EAAgBlB,QAAQ,0CAA4C,GAClP,CACF,KAAO,CAGL,IAAKpH,KAAK6O,sBAAsBxJ,GAAS,CACvCqB,EAAQqC,eAAe,MACzB,CACAuF,EAAc,GAAGhG,EAAgBlB,QAAQ,gDAAgDoH,EAAsBM,UAAUxG,EAAgBlB,QAAQ,4CACnJ,CACF,CACA,MAAM2H,EAAuB,IAAIxT,EAAc,CAC7CyT,SAAU,uBAAuB1G,EAAgBlB,QAAQ,0DAE3D,IAAI6H,EACJ,GAAIb,EAAwB,CAC1Ba,EAAqB,GAAGF,EAAqBjB,oBAAoBxF,EAAgBlB,QAAQ,+CAA+C/B,EAAOkE,kBAAkBjB,EAAgBlB,QAAQ,6CAA6CvB,EAAiB+I,SAASR,SAA8BE,OAChS,MAAO,GAAIA,GAAe,KAAOA,EAAa,CAC5CW,EAAqB,EACvB,KAAO,CACLA,EAAqB,GAAGF,EAAqBjB,oBAAoBxF,EAAgBlB,QAAQ,+CAA+C/B,EAAOkE,kBAAkB+E,OACnK,CACA,MAAMpB,EAAkB,IAAI3R,EAAc,CACxCyT,SAAU,uBAAuB1G,EAAgBlB,QAAQ,oDAG3D,MAAM8H,EAAwBxI,EAAQ3E,kBAAkB,WAAWQ,YAAY4M,YAE/EzI,EAAQqH,eAAe,MACvB,IAAIF,EAAiB,GACrB,IAAIZ,EAA6B,GACjC,GAAIvG,EAAQ6G,iBAAkB,CAC5BN,EAA6B,GAAGgC,QAChCjP,KAAKgN,2BAA2BC,EAA4BC,EAC9D,MAAO,GAAIgC,EAAuB,CAChCrB,EAAiB,GAAGX,EAAgBY,oBAAoBoB,IACxDjC,EAA6B,GAAGgC,QAAyBpB,IACzDnH,EAAQqH,eAAed,EACzB,KAAO,CACLvG,EAAQqH,eAAekB,EACzB,CACF,EASA7O,EAAOS,gBAAkB,SAASA,IAChCuO,aAAapP,KAAKqP,wBAClBrP,KAAKqP,uBAAyB/K,WAAW3C,UACvC,MAAM2N,EAAQ,GACZC,EAAYvP,KAAKS,gBAAgBsE,WACjCyK,EAAgB,CACdrQ,MAAO,EACPsQ,QAAS,EACTC,QAAS,EACTC,YAAa,GAEfrH,EAAkB7M,EAAK0L,yBAAyB,eAChDyI,EAAiBL,EAAU3P,OAC7B,IAAIiQ,EAActT,EAAWuT,QAC3BC,EAAc,GACdC,EAAe,GACfC,EAAe,GACjB,GAAIL,EAAiB,EAAG,CACtB,IAAK,IAAI1M,EAAI,EAAGA,EAAI0M,EAAgB1M,IAAK,CACvC,IAAKqM,EAAUrM,GAAGyL,WAAaY,EAAUrM,GAAGyL,YAAc,GAAI,GAC1Da,EAAc,cAClB,KAAO,GACHA,EAAcD,EAAUrM,GAAGyL,UAC/B,CACF,CACA,GAAIa,EAAclT,EAAY6C,OAAS,EAAG,CACxC0Q,EAActT,EAAW2T,QAC3B,MAAO,GAAIV,EAAclT,EAAYmT,SAAW,EAAG,CACjDI,EAActT,EAAW4T,QAC3B,MAAO,GAAIX,EAAclT,EAAYoT,SAAW,EAAG,CACjDG,EAActT,EAAWmT,OAC3B,MAAO,GAAIF,EAAclT,EAAYqT,aAAe,EAAG,CACrDE,EAActT,EAAW6T,OAC3B,CACA,MAAMC,EAAwBb,EAAclT,EAAY6C,OAASqQ,EAAclT,EAAYmT,SAAWD,EAAclT,EAAYoT,SAAWF,EAAclT,EAAYqT,aACrK3P,KAAKsQ,QAAQD,EAAsBE,YACnC,GAAIf,EAAcrQ,QAAU,EAAG,CAC7B4Q,EAAc,gDAChB,MAAO,GAAIP,EAAcrQ,MAAQ,EAAG,CAClC4Q,EAAc,2DAChB,MAAO,IAAKP,EAAcrQ,OAASqQ,EAAcC,QAAS,CACxDM,EAAc,oDAChB,MAAO,IAAKP,EAAcrQ,QAAUqQ,EAAcC,SAAWD,EAAcG,YAAa,CACtFI,EAAc,yDAChB,MAAO,IAAKP,EAAcrQ,QAAUqQ,EAAcC,UAAYD,EAAcG,aAAeH,EAAcE,QAAS,CAChHK,EAAc,4DAChB,CACA,GAAIA,EAAa,CACfE,EAAe3H,EAAgBlB,QAAQ2I,GACvCC,EAAeR,EAAcrQ,MAAQ,GAAGqQ,EAAcrQ,SAAS8Q,IAAiBA,EAChFjQ,KAAKwQ,WAAWR,EAClB,CACAhQ,KAAKyQ,QAAQnB,GACbtP,KAAK0Q,QAAQb,GACb7P,KAAK2Q,WAAW,MAChB,MAAM/O,EAAQnG,EAAK6O,KAAKtK,KAAKE,SAC7B,GAAI0B,EAAO,CACT,MAAMgP,EAAahP,EAAMiP,gBAAgBC,UACzC,UACQF,EAAWG,sBACX/Q,KAAK0B,oBAAoBE,EAGjC,CAFE,MAAO+C,GACP5J,EAAI6J,MAAM,yBACZ,CACA5E,KAAKgR,kBAAkB,CACrBpB,eAAgBA,GAEpB,CACA,GAAIA,EAAiB,EAAG,CACtB5P,KAAKS,gBAAgBwQ,cACvB,CACF,KAAO,CACLjR,KAAK2Q,WAAW,OAChB3Q,KAAKgR,kBAAkB,CACrBpB,eAAgBA,GAEpB,GACC,IACL,EAUAxP,EAAOkB,kBAAoBK,eAAeL,EAAkBC,GAC1D,MAAM2P,EAAwBlR,KAAK+B,kBAAkB,gBACrDmP,EAAsB1L,YAAY,6BAA8B,MAChE,MAAM2L,EAAQ5P,EAAO6P,aAAa,QAChCC,EAAWF,EAAMpP,kBAAkB,WAAWQ,YAC9C2F,EAAoB,IAAIC,OAAO,MAAMC,KAAKiJ,EAASC,aACnD1P,EAAQnG,EAAK6O,KAAKtK,KAAKE,SACzB,IAAI6M,EAAUwE,EACd,MAAMC,EAAgB,SAAU9K,EAAS+K,GACvC,MAAMC,EAAY,CAChBC,cAAe,KACfC,WAAYlL,GAEd+K,EAASI,MAAMH,EACjB,EAGA,GAAIP,EAAM5F,eAAehI,QAAQ,aAAe,EAAG,CACjD,IAAIuO,EACJ,GAAI5J,EAAmB,CACrB4J,EAAkBT,EAASU,WAAW1P,IAAI,SAAUyK,GAClD,MAAMkF,EAAUvW,EAAK6O,KAAKwC,GAC1B,MAAMmF,EAAiBD,GAAWA,EAAQzJ,YAC1C,OAAO0J,GAAkBA,EAAehP,IAAI,qBAAuBgP,EAAe1I,cAAgB4H,EAAM5F,eAAef,MAAM,aAAa,GAAKyH,EAAiB,IAClK,GAAGlT,OAAO,SAAUmT,EAAKC,GACvB,OAAOA,EAAMA,EAAMD,CACrB,GACA,GAAIJ,EAAiB,CACnBP,EAAgBJ,EAAM5F,eAAef,MAAM,MAAM,GACjD,UACQxK,KAAKoS,mDAAmDN,EAAiB9R,KAAK6E,kBAAmB0M,GACvG,MAAMc,EAAmBrS,KAAKoF,yBAAyB0M,GACvD,MAAMQ,EAAYD,EAAiB9M,YAAY4L,EAAMpP,kBAAkB,WAAWQ,YAAYxB,SAC9F,MAAMwR,EAAyB5Q,MAAO6Q,EAAgB1M,KACpD,MAAM2M,EAAqBzS,KAAK0S,iBAAiBF,GAC/CG,EAAmB3S,KAAK4S,cAAcJ,GAAgBK,qBACxD,GAAIJ,EAAmB7S,OAAS,GAAK6S,EAAmB,GAAI,CAC1D,MAAMK,EAAaL,EAAmB3M,EAAY6M,GAChDI,EAAc/S,KAAKgT,cAAcF,EAAYzB,GAC/C,GAAI0B,EAAa,CACf/S,KAAKiT,kBAAkBF,GACvB,OAAO9T,SACT,KAAO,CAEL,MAAMiU,EAAgB7B,EAASC,YAAY9G,MAAM,KAAKC,MACtD,GAAIyI,EAAe,CACjBtR,EAAM6C,SAAS,YAAYe,YAAY,yBAA0B0N,EACnE,CACA,GAAIlT,KAAK6O,sBAAsB2D,GAAiB,CAC9C,OAAO5Q,EAAMiP,gBAAgBsC,SAASC,yBAAyBN,EAAW/Q,oBAC5E,KAAO,CACL,OAAO,KACT,CACF,CACF,CACA,OAAO9C,SAAS,EAElB,GAAI6S,EAAgBlE,KAAK,eAAiB,aAAe0E,EAAUnM,WAAa,GAAI,CAClF,MAAMwM,EAAmB3S,KAAK4S,cAAcd,GAAiBe,qBAC7D,UACQf,EAAgBuB,cAAcf,EAAUnM,UAC9C,MAAMsM,EAAqBzS,KAAK0S,iBAAiBZ,GACjD,IAAIwB,EAAqBC,EACzB,GAAId,EAAmB7S,OAAS,GAAK6S,EAAmB,GAAI,CAC1Da,EAAsBb,EAAmB,GAAGlK,YAAYsK,qBACxDU,EAAgBZ,EAAmBW,IAAwB,CAC7D,CACA,IAAIE,EACJ,GAAID,EAAe,CAEjBC,EAAsB,IAAItP,QAAQ,SAAUC,GAC1C1I,EAAKgY,YAAY,YAAatP,EAChC,EACF,KAAO,CACLqP,EAAsBtP,QAAQC,SAChC,OACMqP,EACNlP,WAAW3C,iBACT,MAAM+R,QAA2BnB,EAAuBT,EAAiBQ,EAAUnM,UACnF,GAAIuN,IAAuB,MAAO,CAChClC,EAAcH,EAAUS,EAC1B,CACF,EAAG,EAGL,CAFE,MAAOnN,GACP5J,EAAI6J,MAAM,gCACZ,CACF,MAAO,GAAIkN,EAAgBlE,KAAK,eAAiB,mBAAqB0E,EAAW,CAC/E,MAAMqB,QAAoC3T,KAAK2T,4BAA4B/R,EAAOyP,EAAUS,EAAiBQ,EAAUnM,UACvH,GAAIwN,IAAgC,MAAO,CACzCnC,EAAcH,EAAUS,EAC1B,CACF,KAAO,CACL9R,KAAK2T,4BAA4B/R,EAAOyP,EAC1C,CAGF,CAFE,MAAO1M,GACP5J,EAAI6J,MAAM,oCACZ,CACF,CACF,KAAO,CACLmI,EAAWtR,EAAK6O,KAAK+G,EAASU,WAAW,IAEzC,MAAM6B,EAAmBnY,EAAK6O,KAAKtK,KAAK6E,kBAAkBgP,sBAC1D,IAAKD,IAAqB,MAAQA,SAA0B,OAAS,EAAIA,EAAiB7Q,aAAa,MAAMQ,QAAQwJ,OAAgB,EAAG,CACtIwE,EAAgBJ,EAAM5F,eAAef,MAAM,MAAM,GACjDxK,KAAK8T,8CAA8C9T,KAAK6E,kBAAmB0M,EAC7E,CACAvR,KAAKiT,kBAAkBlG,EACzB,CACF,KAAO,CAELwE,EAAgBJ,EAAM5F,eAAef,MAAM,MAAM,GACjDxK,KAAK8T,8CAA8C9T,KAAK6E,kBAAmB0M,GAC3EvR,KAAK2T,4BAA4B/R,EAAOyP,EAC1C,CACF,EAUAjR,EAAO4S,cAAgB,SAASA,EAAce,EAAWrN,GACvD,OAAOA,EAAQsN,gBAAgBpU,OAAS,EAAI8G,EAAQsN,gBAAgB3R,IAAI,SAAU4R,GAChF,MAAMC,EAAmBH,EAAUhR,aAAa,KAAM,SAAUoR,GAC9D,OAAOA,EAAKpT,UAAYkT,CAC1B,GACA,OAAOC,EAAiBtU,OAAS,EAAInE,EAAK6O,KAAK2J,GAAa,IAC9D,GAAGlV,OAAO,SAAUmT,EAAKC,GACvB,OAAOA,EAAMA,EAAMD,CACrB,GAAK,IACP,EAYA9R,EAAOuT,4BAA8BhS,eAAegS,EAA4B1R,EAAMyE,EAAS8L,EAAgBrM,GAC7G,MAAMiO,EAAmBnS,EAAKc,aAAa,MAC3C,MAAMsR,EAAqB3N,EAAQsN,gBAAgBnN,OAAO,SAAUiG,GAClE,OAAOsH,EAAiBE,KAAK,SAAUtR,GACrC,OAAOA,EAAMjC,UAAY+L,GAAc9J,EAAMuR,WAC/C,EACF,GAAGlS,IAAI,SAAUyK,GACf,OAAOrR,EAAK6O,KAAKwC,EACnB,GACA,MAAM0H,EAA6BH,EAAmBxN,OAAO,SAAU7D,GACrE,OAAQA,EAAMC,IAAI,iBAAmBD,EAAMC,IAAI,qBACjD,GAEA,GAAIuR,EAA2B5U,OAAS,EAAG,CACzCI,KAAKiT,kBAAkBuB,EAA2B,IAClD,OAAOvV,SACT,MAAO,GAAIoV,EAAmBzU,OAAS,EAAG,CACxC,MAAM6S,EAAqBD,EAAiBA,EAAezP,aAAa,KAAM,SAAUC,GACtF,OAAOA,EAAMC,IAAI5H,EAAeoZ,cAAcC,UAChD,GAAK,GACL,GAAIjC,EAAmB7S,OAAS,GAAK6S,EAAmB,GAAI,CAC1D,MAAMK,EAAaL,EAAmBtM,GACtC,MAAM4M,EAAc/S,KAAKgT,cAAcF,EAAYpM,GACnD,GAAIqM,EAAa,CACf,MAAM4B,EAAe5B,EAAY9P,IAAI,gCAAkC8P,EAAYrQ,aAAakS,iBAAiB,GAAK7B,EAAYhO,WAAW,GAAGrC,aAAakS,iBAAiB,GAC9K5U,KAAKiT,kBAAkB0B,GACvB,OAAO1V,SACT,KAAO,CACL,MAAMiU,EAAgBxM,EAAQ4K,YAAY9G,MAAM,KAAKC,MACrD,GAAIyI,EAAe,CACjBjR,EAAKwC,SAAS,YAAYe,YAAY,yBAA0B0N,EAClE,CACA,GAAIlT,KAAK6O,sBAAsB2D,GAAiB,CAC9C,OAAOvQ,EAAK4O,gBAAgBsC,SAASC,yBAAyBN,EAAW/Q,oBAC3E,KAAO,CACL,OAAO,KACT,CACF,CACF,CACA,OAAO9C,SACT,CACA,OAAOA,SACT,EAQAmB,EAAOyU,gBAAkB,SAASA,EAAgBlM,EAAK3D,GACrD,GAAIA,EAAW,CACb,IAAIuC,EAASsD,EAAcrD,EAAYsD,EAAGC,EAAGtD,EAAWqN,EAAcC,EACtE,IAAKjK,EAAI9F,EAAUpF,OAAS,EAAGkL,GAAK,IAAKA,EAAG,CAE1CvD,EAAUvC,EAAU8F,GACpBD,EAAetD,EAAQ1E,iBACvB,IAAKkI,EAAIF,EAAajL,OAAS,EAAGmL,GAAK,IAAKA,EAAG,CAE7CvD,EAAaqD,EAAaE,GAC1B+J,EAAetN,EAAWzE,aAAa,MAEvC0E,EAAYqN,EAAajO,OAAO7G,KAAKgV,gBAAgB3W,KAAK2B,KAAM2I,EAAIsM,iBACpEF,EAAcjK,EAAI,EAClB,GAAIrD,EAAU7H,OAAS,EAAG,CACxB,GAAI2H,EAAQ2N,cAAgB1N,EAAW0N,aAAc,CACnD,IAAKvM,EAAIwM,eAAe,eAAgB,CACtCxM,EAAIyM,YAAc7N,EAAQ8N,UAC5B,CACA,IAAK1M,EAAIwM,eAAe,kBAAmB,CACzCxM,EAAI2M,eAAiB9N,EAAW6N,UAClC,CACA,OAAON,EAAc,IAAMhK,EAAI,EACjC,KAAO,CAGL,OAAO,CACT,CACF,CACF,CACF,CAGA,IAAKpC,EAAIyM,cAAgBzM,EAAI2M,gBAAkB3M,EAAI2C,WAAY,CAC7D,OAAO,CACT,CACA,OAAO,GACT,CACA,OAAO,GACT,EASAlL,EAAOgB,qBAAuB,SAASA,IACrC,IAAImU,EACFC,EACAC,EACAC,EACAC,EACAC,EACAC,EAA2B,KAC7B,MAAMC,EAAqB,GAC3B,MAAMC,EAA4B,KAChC,MAAMC,EAASC,IACb,IAAIC,EAAQC,SACVpJ,EAAWtR,EAAK6O,KAAK2L,EAAY,IACnC,MAAMG,EAAoB3a,EAAK6O,KAAK2L,EAAY,IAChD,MAAOlJ,EAAU,CACf,MAAMsJ,EAAoBtJ,aAAoBzR,GAAU8a,IAAsB,MAAQA,SAA2B,OAAS,EAAIA,EAAkB7N,aAAaxF,aAAa,MAAMQ,QAAQ6S,GAAqBD,SAC7M,GAAIpJ,aAAoBzR,EAAQ,CAC9B,GAAI4a,EAAQG,EAAmB,CAC7BH,EAAQG,EAERrW,KAAKiT,kBAAkBmD,EACzB,CAEA,OAAO,KACT,CACArJ,EAAWA,EAASxE,WACtB,CACA,OAAO,IAAI,EAEb,OAAO,IAAI3M,EAAO,CAChB0a,KAAM,aACNlO,KAAM4N,EACNO,cAAe,MACf,EAGJ,SAASC,IACP,MAAMR,EAAS,SAAUC,GACvB,IAAKA,EAAYrW,OAAQ,CACvB,OAAO,KACT,CACA,IAAImN,EAAWtR,EAAK6O,KAAK2L,EAAY,IACrC,MAAOlJ,EAAU,CACf,GAAIA,EAAShM,UAAYb,EAAS,CAChC,OAAO,IACT,CACA,GAAI6M,aAAoBzR,EAAQ,CAE9B,OAAO,KACT,CACAyR,EAAWA,EAASxE,WACtB,CACA,OAAO,KACT,EACA,OAAO,IAAI3M,EAAO,CAChB0a,KAAM,aACNlO,KAAM4N,EACNO,cAAe,MAEnB,CACA,IAAKvW,KAAKE,QAAS,CACjBF,KAAKE,QAAUF,KAAKqK,WAAWrK,KAAKe,QACtC,CACA,MAAMb,EAAUF,KAAKE,QAErB,MAAMuW,EAAiBzW,KAAK0W,eAAe,iBAC3C,GAAID,EAAgB,CAClBA,EAAe9X,QAAQ,SAAUkI,GAC/BiP,EAAmBtS,KAAK,IAAI5H,EAAO,CACjC0a,KAAMzP,EAAOtB,YAAY,QACzBoR,SAAU9P,EAAOtB,YAAY,YAC7BqR,OAAQ/P,EAAOtB,YAAY,UAC3BsR,OAAQhQ,EAAOtB,YAAY,YAE/B,EACF,CACA,MAAMuR,EAAkB9W,KAAK+B,oBAC7B,IAAK+U,EAAiB,CACpB9W,KAAK2Q,WAAW,OAChB,MACF,KAAO,CACL+E,EAAQoB,EAAgBxT,UAExBiS,EAAqB,IAAI3Z,EAAO,CAC9Bmb,QAAS,CAAC,IAAInb,EAAO,CACnB0a,KAAM,aACNK,SAAU9a,EAAemb,GACzBJ,OAAQ,OACNJ,KACJS,IAAK,OAGPzB,EAA8B,IAAI5Z,EAAO,CACvCmb,QAAS,CAACxB,EAAoB,IAAI3Z,EAAO,CACvC0a,KAAM,SACNK,SAAU9a,EAAeqb,WACzBN,OAAQlB,KAEVuB,IAAK,QAEPrB,EAAgB,IAAIha,EAAO,CACzBmb,QAAS,CAAChB,MAEd,CACA,MAAMoB,EAAkC,IAAIvb,EAAO,CACjDmb,QAAS,CAACvB,EAA6BI,GACvCqB,IAAK,OAGP,GAAInB,EAAmBlW,OAAS,EAAG,CACjC6V,EAAW,IAAI7Z,EAAO,CACpBmb,QAAS,CAACjB,EAAoBqB,GAC9BF,IAAK,OAET,KAAO,CACLxB,EAAW0B,CACb,CACAnX,KAAKU,aAAamG,OAAO4O,GACzBzV,KAAK6E,kBAAoB7E,KAAK8E,qBAAqB9E,KAAMA,KAAK6E,mBAE9D,GAAI7E,KAAK6E,kBAAmB,CAC1B8Q,EAAU,IAAI7Z,EAAO,GAAI,KAAM,KAAM,CAACsb,EAAMC,KAC1C,IAAKxB,EAA0B,CAC7BA,EAA2B7V,KAAK6E,mBAAqB7E,KAAK6E,kBAAkByS,aAC9E,CACA,MAAMC,EAAQvX,KAAK6U,gBAAgBuC,EAAMvB,GACzC,MAAM2B,EAAQxX,KAAK6U,gBAAgBwC,EAAMxB,GACzC,GAAI0B,EAAQC,EAAO,CACjB,OAAQ,CACV,CACA,GAAID,EAAQC,EAAO,CACjB,OAAO,CACT,CACA,OAAO,CAAC,GAEVxX,KAAKU,aAAa+W,KAAK9B,EACzB,CACF,EAQAvV,EAAO4U,gBAAkB,SAASA,EAAgBlI,EAAYqE,GAC5D,OAAOrE,IAAeqE,EAAMpQ,OAC9B,EAUAX,EAAOsX,0BAA4B,SAASA,EAA0BjV,EAAa8O,GACjF,IAAI3O,EACJ,GAAI2O,EAAe,CACjB,MAAMvM,EAAYvC,EAAY6U,cAC9B,IAAK,IAAIpU,EAAI,EAAGA,EAAI8B,EAAUpF,OAAQsD,IAAK,CACzC,GAAI8B,EAAU9B,GAAGgS,cAAgBlQ,EAAU9B,GAAGmS,aAAe9D,EAAe,CAC1E3O,EAAWoC,EAAU9B,GACrB,KACF,CACF,CACF,CACA,OAAON,CACT,EASAxC,EAAO0T,8CAAgD,SAASA,EAA8CrR,EAAa8O,GACzH,MAAMoG,EAAiBlV,EAAYmV,mBACnC,GAAID,EAAgB,CAClB,MAAM/U,EAAW5C,KAAK0X,0BAA0BjV,EAAa8O,GAC7D,MAAMsG,EAAqBpV,EAAYoR,qBACvC,GAAIjR,GAAYiV,IAAuBjV,EAAS7B,QAAS,CACvD0B,EAAYqV,mBAAmBlV,EAAS7B,QAC1C,CACF,CACF,EACAX,EAAOgS,mDAAqDzQ,eAAeyQ,EAAmD/M,EAAQ5C,EAAa8O,GACjJ,MAAMpO,EAAckC,EAAOjC,gBAC3B,MAAM2U,EAAgB1S,EAAOtD,oBAC7B,MAAMiW,EAAavV,EAAYV,oBAC/B,MAAMkW,IAA+BF,IAAkBC,GACvDhY,KAAK8T,8CAA8CrR,EAAa8O,GAChE,OAAO,IAAIrN,QAAQ,SAAUC,GAC3B,GAAI8T,EAA4B,CAC9B9U,EAAYiB,gBAAgB,SAAU,WACpCD,GACF,EACF,KAAO,CACLA,GACF,CACF,EACF,EASA/D,EAAOiJ,aAAe,SAASA,EAAavB,GAE1C,IAAIoQ,EAAiBpQ,EAASS,YAC9B,MAAO2P,IAAmBA,EAAejV,IAAI,oBAAqB,CAChEiV,EAAiBA,EAAe3P,WAClC,CACA,OAAO2P,GAAkBA,EAAejV,IAAI,oBAAsBiV,EAAiBjZ,SACrF,EACAmB,EAAOwS,cAAgB,SAASA,EAAcuF,GAC5C,OAAOA,EAAUpV,aAAa,KAAM,SAAUC,GAC5C,OAAOA,EAAMC,IAAI,uBACjBD,EAAMuF,cAAgB4P,CACxB,GAAG,EACL,EASA/X,EAAOwJ,aAAe,SAASA,EAAa9B,GAC1C,IAAIoQ,EAAiBpQ,EAASS,YAC9B,MAAO2P,IAAmBA,EAAejV,IAAI,sBAAwBiV,EAAejV,IAAI,8BAAgCiV,EAAejV,IAAI5H,EAAeoZ,cAAcC,WAAY,CAClLwD,EAAiBA,EAAe3P,WAClC,CACA,OAAO2P,IAAmBA,EAAejV,IAAI,qBAAuBiV,EAAejV,IAAI,6BAA+BiV,EAAejV,IAAI5H,EAAeoZ,cAAcC,YAAcwD,EAAiBjZ,SACvM,EASAmB,EAAOyJ,kBAAoB,SAASA,EAAkB/B,GACpD,MAAMsQ,EAAYpY,KAAK4J,aAAa9B,GACpC,IAAIhC,EACJ,GAAIsS,EAAUnV,IAAI,oBAAqB,CACrC6C,EAAYsS,EAAUlP,UACxB,KAAO,CACLpD,EAAYsS,EAAUC,WAAWtT,WAAWuT,UAAU,SAAUC,GAC9D,OAAOA,EAAQxX,UAAYqX,EAAUrX,OACvC,EACF,CACA,OAAO+E,CACT,EASA1F,EAAOqJ,qBAAuB,SAASA,EAAqB3B,GAC1D,MAAM0Q,EAAqB,SAAUD,EAASzF,GAC5C,OAAOA,EAAW2F,WAAWH,UAAU,SAAUI,GAC/C,OAAOA,EAAM3X,UAAYwX,EAAQxX,OACnC,EACF,EACA,MAAM4X,EAAuB,SAAUJ,EAASzF,GAC9C,IAAI8F,EAAiBL,EAAQhQ,YAC3BsQ,EAAmBL,EAAmBI,EAAgB9F,GACxD,MAAO8F,GAAkBC,EAAmB,EAAG,CAC7CD,EAAiBA,EAAerQ,YAChCsQ,EAAmBL,EAAmBI,EAAgB9F,EACxD,CACA,OAAO+F,CACT,EACA,MAAM/F,EAAa9S,KAAK4J,aAAa9B,GACrC,IAAI0B,EACJA,EAAqBmP,EAAqB7Q,EAAUgL,GACpD,GAAIA,EAAW7P,IAAI,4BAA6B,CAC9C,MAAM6V,EAAgBhG,EAAW2F,WAAWjP,GAAoBzI,QAC9DgY,EAAgBjG,EAAWuF,WAAW3O,aACxCF,EAAqBuP,EAAcT,UAAU,SAAUU,GACrD,GAAIA,EAAOC,sBAAuB,CAChC,OAAOH,EAAc3M,OAAO6M,EAAOC,sBAAsBlY,UAAY,EAAI,KAAO,KAClF,KAAO,CACL,OAAO,KACT,CACF,EACF,CACA,OAAOyI,CACT,EACApJ,EAAOsS,iBAAmB,SAASA,EAAiByF,GAClD,OAAOA,EAAUpV,aAAa,KAAM,SAAUC,GAC5C,OAAOA,EAAMC,IAAI,qBACjBD,EAAMqV,WAAW9P,cAAgB4P,CACnC,EACF,EACA/X,EAAO0E,qBAAuB,SAASA,EAAqBgD,EAAUjD,GACpE,GAAIA,EAAmB,CACrB,OAAOA,CACT,CACAA,EAAoBiD,EAEpB,MAAOjD,IAAsBA,EAAkB5B,IAAI,6BAA8B,CAC/E4B,EAAoBA,EAAkB0D,WACxC,CACA,OAAO1D,CACT,EASAzE,EAAOyO,sBAAwB,SAASA,EAAsBpL,GAE5D,MAAMyV,EAAYte,IAAIC,GAAGse,QAAQ,yBAC/BC,EAAY3V,GAASyV,EAAUG,qBAAqB5V,IAAUyV,EAAUG,qBAAqB5V,GAAO6V,gBACtG,IAAIC,EAAkB,MACpBC,EAAgB,MAClB,GAAIJ,GAAapc,OAAO0B,KAAK0a,GAAW7V,QAAQE,EAAML,gBAAgBsS,UAAY,EAAG,CACnF6D,EAAkBH,EAAU3V,IAAU,MAAQA,SAAe,OAAS,EAAIA,EAAML,gBAAgBsS,QAAU0D,EAAU3V,IAAU,MAAQA,SAAe,OAAS,EAAIA,EAAML,gBAAgBsS,OAAO+D,QAAUL,EAAU3V,IAAU,MAAQA,SAAe,OAAS,EAAIA,EAAML,gBAAgBsS,OAAO+D,OAAOC,MAAQ,KAAO,KACtT,CACAF,EAAgBD,IAAoB9V,IAAU,MAAQA,SAAe,OAAS,EAAIA,EAAMkW,iBAAiBC,mBAAqBnW,IAAU,MAAQA,SAAe,OAAS,EAAIA,EAAMkW,iBAAiBC,gBAAgB,GAAGC,YAAYxa,KAAKkE,QAAQ,kBAAoB,EACnQ,OAAOiW,CACT,EACApZ,EAAO6S,kBAAoB,SAASA,EAAkBjB,GACpD,MAAM8H,EAAiB9Z,KAAKS,gBAC5B,GAAIqZ,GAAkB9H,GAAWA,EAAQH,MAAO,CAC9C,MAAMkI,EAAU,KACd/H,EAAQH,OAAO,EAEjB,IAAKiI,EAAeE,SAAU,CAG5B1V,WAAWyV,EAAS,EACtB,KAAO,CACL,MAAME,EAAY,KAChB3V,WAAWyV,EAAS,GACpBD,EAAeI,YAAY,aAAcD,EAAU,EAErDH,EAAerG,YAAY,aAAcwG,GACzCH,EAAeK,OACjB,CACF,KAAO,CACLpf,EAAIqf,QAAQ,0EACd,CACF,EACA,OAAOhb,CACT,CA9qC2D,CA8qCzDhE,GAAUgB,EAAcmC,EAA0BpC,EAAQ2B,UAAW,gBAAiB,CAAC9B,GAAQ,CAC/FmB,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXjB,EAAekC,EAA0BpC,EAAQ2B,UAAW,gBAAiB,CAAC7B,GAAQ,CACxFkB,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACVnB,KAAaD,GAClB,OAAOkD,CACT,EAAG","sourceRoot":"messages"}},{"offset":{"line":18985,"column":0},"map":{"version":3,"names":["MessageFilter","defineUI5Class","property","type","defaultValue","FilterOperator","Contains","Element"],"sourceRoot":"messages","sources":["MessageFilter.ts"],"sourcesContent":["import { defineUI5Class, property } from \"sap/fe/core/helpers/ClassSupport\";\nimport Element from \"sap/ui/core/Element\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\n\n@defineUI5Class(\"sap.fe.macros.messages.MessageFilter\")\nclass MessageFilter extends Element {\n\t@property({ type: \"string\" })\n\tpath!: string;\n\n\t@property({ type: \"sap.ui.model.FilterOperator\", defaultValue: FilterOperator.Contains })\n\toperator!: FilterOperator;\n\n\t@property({ type: \"string\" })\n\tvalue1!: string;\n\n\t@property({ type: \"string\" })\n\tvalue2!: string;\n}\n\nexport default MessageFilter;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;MAKMA,aAAa,WADlBC,cAAc,CAAC,sCAAsC,CAAC,UAErDC,QAAQ,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC,UAG5BD,QAAQ,CAAC;IAAEC,IAAI,EAAE,6BAA6B;IAAEC,YAAY,EAAEC,cAAc,CAACC;EAAS,CAAC,CAAC,UAGxFJ,QAAQ,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC,UAG5BD,QAAQ,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC;IAAA;IAAA;MAAA;MAAA;QAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;IAAA;IAAA;EAAA,EAVFI,OAAO;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;EAAA,OAcpBP,aAAa;AAAA"}},{"offset":{"line":19048,"column":0},"map":{"version":3,"names":["sap","ui","define","ClassSupport","Element","FilterOperator","_dec","_dec2","_dec3","_dec4","_dec5","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","property","defineUI5Class","_initializerDefineProperty","target","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","MessageFilter","type","defaultValue","Contains","_Element","_this","_len","arguments","length","args","Array","_key","this"],"sources":["MessageFilter-dbg.js"],"mappings":"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","sourceRoot":"messages"}},{"offset":{"line":19053,"column":0},"map":{"version":3,"names":["FeMessagePopover","defineUI5Class","init","MessagePopover","prototype","apply","setModel","sap","ui","getCore","getMessageManager","getMessageModel","bindAggregation","path","length","template","MessageItem","type","title","description","markupDescription","longtextUrl","subtitle","activeTitle","setGroupItems"],"sourceRoot":"messages","sources":["MessagePopover.ts"],"sourcesContent":["import { defineUI5Class } from \"sap/fe/core/helpers/ClassSupport\";\nimport MessageItem from \"sap/m/MessageItem\";\nimport MessagePopover from \"sap/m/MessagePopover\";\n\n@defineUI5Class(\"sap.fe.macros.messages.MessagePopover\")\nclass FeMessagePopover extends MessagePopover {\n\tinit() {\n\t\tMessagePopover.prototype.init.apply(this);\n\t\tthis.setModel(sap.ui.getCore().getMessageManager().getMessageModel(), \"message\");\n\n\t\tthis.bindAggregation(\"items\", {\n\t\t\tpath: \"message>/\",\n\t\t\tlength: 9999,\n\t\t\ttemplate: new (MessageItem as any)({\n\t\t\t\ttype: \"{message>type}\",\n\t\t\t\ttitle: \"{message>message}\",\n\t\t\t\tdescription: \"{message>description}\",\n\t\t\t\tmarkupDescription: true,\n\t\t\t\tlongtextUrl: \"{message>descriptionUrl}\",\n\t\t\t\tsubtitle: \"{message>additionalText}\",\n\t\t\t\tactiveTitle: \"{= ${message>controlIds}.length > 0 ? true : false}\"\n\t\t\t})\n\t\t});\n\t\tthis.setGroupItems(true);\n\t}\n}\n\nexport default FeMessagePopover;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;MAKMA,gBAAgB,WADrBC,cAAc,CAAC,uCAAuC,CAAC;IAAA;IAAA;MAAA;IAAA;IAAA;IAAA,OAEvDC,IAAI,GAAJ,gBAAO;MACNC,cAAc,CAACC,SAAS,CAACF,IAAI,CAACG,KAAK,CAAC,IAAI,CAAC;MACzC,IAAI,CAACC,QAAQ,CAACC,GAAG,CAACC,EAAE,CAACC,OAAO,EAAE,CAACC,iBAAiB,EAAE,CAACC,eAAe,EAAE,EAAE,SAAS,CAAC;MAEhF,IAAI,CAACC,eAAe,CAAC,OAAO,EAAE;QAC7BC,IAAI,EAAE,WAAW;QACjBC,MAAM,EAAE,IAAI;QACZC,QAAQ,EAAE,IAAKC,WAAW,CAAS;UAClCC,IAAI,EAAE,gBAAgB;UACtBC,KAAK,EAAE,mBAAmB;UAC1BC,WAAW,EAAE,uBAAuB;UACpCC,iBAAiB,EAAE,IAAI;UACvBC,WAAW,EAAE,0BAA0B;UACvCC,QAAQ,EAAE,0BAA0B;UACpCC,WAAW,EAAE;QACd,CAAC;MACF,CAAC,CAAC;MACF,IAAI,CAACC,aAAa,CAAC,IAAI,CAAC;IACzB,CAAC;IAAA;EAAA,EAnB6BrB,cAAc;EAAA,OAsB9BH,gBAAgB;AAAA"}},{"offset":{"line":19092,"column":0},"map":{"version":3,"names":["sap","ui","define","ClassSupport","MessageItem","MessagePopover","_dec","_class","defineUI5Class","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","FeMessagePopover","_MessagePopover","apply","this","arguments","_proto","init","setModel","getCore","getMessageManager","getMessageModel","bindAggregation","path","length","template","type","title","description","markupDescription","longtextUrl","subtitle","activeTitle","setGroupItems"],"sources":["MessagePopover-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,mDAAO,CAAC,mCAAoC,oBAAqB,wBAAyB,SAAUC,EAAcC,EAAaC,GACpI,aAEA,IAAIC,EAAMC,EACV,IAAIC,EAAiBL,EAAaK,eAClC,SAASC,EAAeC,EAAUC,GAAcD,EAASE,UAAYC,OAAOC,OAAOH,EAAWC,WAAYF,EAASE,UAAUG,YAAcL,EAAUM,EAAgBN,EAAUC,EAAa,CAC5L,SAASK,EAAgBC,EAAGC,GAAKF,EAAkBH,OAAOM,eAAiBN,OAAOM,eAAeC,OAAS,SAASJ,EAAgBC,EAAGC,GAAKD,EAAEI,UAAYH,EAAG,OAAOD,CAAG,EAAG,OAAOD,EAAgBC,EAAGC,EAAI,CACvM,IAAII,GAAoBhB,EAAOE,EAAe,yCAA0CF,EAAKC,EAAsB,SAAUgB,GAC3Hd,EAAea,EAAkBC,GACjC,SAASD,IACP,OAAOC,EAAgBC,MAAMC,KAAMC,YAAcD,IACnD,CACA,IAAIE,EAASL,EAAiBV,UAC9Be,EAAOC,KAAO,SAASA,IACrBvB,EAAeO,UAAUgB,KAAKJ,MAAMC,MACpCA,KAAKI,SAAS7B,IAAIC,GAAG6B,UAAUC,oBAAoBC,kBAAmB,WACtEP,KAAKQ,gBAAgB,QAAS,CAC5BC,KAAM,YACNC,OAAQ,KACRC,SAAU,IAAIhC,EAAY,CACxBiC,KAAM,iBACNC,MAAO,oBACPC,YAAa,wBACbC,kBAAmB,KACnBC,YAAa,2BACbC,SAAU,2BACVC,YAAa,0DAGjBlB,KAAKmB,cAAc,KACrB,EACA,OAAOtB,CACT,CAzBmH,CAyBjHjB,KAAoBE,GACtB,OAAOe,CACT,EAAG","sourceRoot":"messages"}},{"offset":{"line":19097,"column":0},"map":{"version":3,"names":["MicroChart","MacroMetadata","extend","name","namespace","publicNamespace","fragment","metadata","stereotype","properties","contextPath","type","$kind","isPublic","metaPath","required","id","showOnlyChart","defaultValue","batchGroupId","title","visibility","hideOnNoData","description","navigationType","onTitlePressed","size","isAnalytics","events"],"sourceRoot":"microchart","sources":["MicroChart.metadata.ts"],"sourcesContent":["import MacroMetadata from \"sap/fe/macros/MacroMetadata\";\n\n/**\n * @classdesc\n * Building block used to create a MicroChart based on the metadata provided by OData V4.\n * @class sap.fe.macros.MicroChart\n * @hideconstructor\n * @public\n * @since 1.93.0\n */\nconst MicroChart = MacroMetadata.extend(\"sap.fe.macros.microchart.MicroChart\", {\n\t/**\n\t * Name of the macro control.\n\t */\n\tname: \"MicroChart\",\n\t/**\n\t * Namespace of the macro control.\n\t */\n\tnamespace: \"sap.fe.macros.internal\",\n\tpublicNamespace: \"sap.fe.macros\",\n\t/**\n\t * Fragment source of the macro (optional) - if not set, fragment is generated from namespace and name.\n\t */\n\tfragment: \"sap.fe.macros.microchart.MicroChart\",\n\n\t/**\n\t * The metadata describing the macro control.\n\t */\n\tmetadata: {\n\t\t/**\n\t\t * Macro stereotype for documentation generation. Not visible in documentation.\n\t\t */\n\t\tstereotype: \"xmlmacro\",\n\t\t/**\n\t\t * Properties.\n\t\t */\n\t\tproperties: {\n\t\t\t/**\n\t\t\t * Metadata path to the entitySet or navigationProperty.\n\t\t\t */\n\t\t\tcontextPath: {\n\t\t\t\ttype: \"sap.ui.model.Context\",\n\t\t\t\t$kind: [\"EntitySet\", \"NavigationProperty\"],\n\t\t\t\tisPublic: true\n\t\t\t},\n\t\t\t/**\n\t\t\t * Metadata path to the Chart annotations.\n\t\t\t */\n\t\t\tmetaPath: {\n\t\t\t\ttype: \"sap.ui.model.Context\",\n\t\t\t\trequired: true,\n\t\t\t\tisPublic: true\n\t\t\t},\n\t\t\t/**\n\t\t\t * ID of the MicroChart.\n\t\t\t */\n\t\t\tid: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tisPublic: true,\n\t\t\t\trequired: true\n\t\t\t},\n\t\t\t/**\n\t\t\t * To control the rendering of Title, Subtitle and Currency Labels. When the size is xs then we do\n\t\t\t * not see the inner labels of the MicroChart as well.\n\t\t\t */\n\t\t\tshowOnlyChart: {\n\t\t\t\ttype: \"boolean\",\n\t\t\t\tdefaultValue: false,\n\t\t\t\tisPublic: true\n\t\t\t},\n\t\t\t/**\n\t\t\t * Batch group ID along with which this call should be grouped.\n\t\t\t */\n\t\t\tbatchGroupId: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdefaultValue: \"\",\n\t\t\t\tisPublic: true\n\t\t\t},\n\t\t\t/**\n\t\t\t * Title for the MicroChart. If no title is provided, the title from the Chart annotation is used.\n\t\t\t */\n\t\t\ttitle: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdefaultValue: \"\",\n\t\t\t\tvisibility: \"hidden\"\n\t\t\t},\n\t\t\t/**\n\t\t\t * Show blank space in case there is no data in the chart\n\t\t\t */\n\t\t\thideOnNoData: {\n\t\t\t\ttype: \"boolean\",\n\t\t\t\tdefaultValue: false,\n\t\t\t\tisPublic: true\n\t\t\t},\n\t\t\t/**\n\t\t\t * Description for the MicroChart. If no description is provided, the description from the Chart annotation is used.\n\t\t\t */\n\t\t\tdescription: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdefaultValue: \"\",\n\t\t\t\tvisibility: \"hidden\"\n\t\t\t},\n\t\t\t/**\n\t\t\t * Type of navigation, that is, External or InPage\n\t\t\t */\n\t\t\tnavigationType: {\n\t\t\t\ttype: \"sap.fe.macros.NavigationType\",\n\t\t\t\tdefaultValue: \"None\",\n\t\t\t\tvisibility: \"hidden\"\n\t\t\t},\n\t\t\t/**\n\t\t\t * Event handler for onTitlePressed event\n\t\t\t */\n\t\t\tonTitlePressed: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tvisibility: \"hidden\"\n\t\t\t},\n\t\t\t/**\n\t\t\t * Size of the MicroChart\n\t\t\t */\n\t\t\tsize: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tisPublic: true\n\t\t\t},\n\t\t\t/**\n\t\t\t * Defines whether the MicroChart is part of an analytical table\n\t\t\t */\n\t\t\tisAnalytics: {\n\t\t\t\ttype: \"boolean\",\n\t\t\t\tdefaultValue: false,\n\t\t\t\tvisibility: \"hidden\"\n\t\t\t}\n\t\t},\n\n\t\tevents: {}\n\t}\n});\nexport default MicroChart;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;EAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA,MAAMA,UAAU,GAAGC,aAAa,CAACC,MAAM,CAAC,qCAAqC,EAAE;IAC9E;AACD;AACA;IACCC,IAAI,EAAE,YAAY;IAClB;AACD;AACA;IACCC,SAAS,EAAE,wBAAwB;IACnCC,eAAe,EAAE,eAAe;IAChC;AACD;AACA;IACCC,QAAQ,EAAE,qCAAqC;IAE/C;AACD;AACA;IACCC,QAAQ,EAAE;MACT;AACF;AACA;MACEC,UAAU,EAAE,UAAU;MACtB;AACF;AACA;MACEC,UAAU,EAAE;QACX;AACH;AACA;QACGC,WAAW,EAAE;UACZC,IAAI,EAAE,sBAAsB;UAC5BC,KAAK,EAAE,CAAC,WAAW,EAAE,oBAAoB,CAAC;UAC1CC,QAAQ,EAAE;QACX,CAAC;QACD;AACH;AACA;QACGC,QAAQ,EAAE;UACTH,IAAI,EAAE,sBAAsB;UAC5BI,QAAQ,EAAE,IAAI;UACdF,QAAQ,EAAE;QACX,CAAC;QACD;AACH;AACA;QACGG,EAAE,EAAE;UACHL,IAAI,EAAE,QAAQ;UACdE,QAAQ,EAAE,IAAI;UACdE,QAAQ,EAAE;QACX,CAAC;QACD;AACH;AACA;AACA;QACGE,aAAa,EAAE;UACdN,IAAI,EAAE,SAAS;UACfO,YAAY,EAAE,KAAK;UACnBL,QAAQ,EAAE;QACX,CAAC;QACD;AACH;AACA;QACGM,YAAY,EAAE;UACbR,IAAI,EAAE,QAAQ;UACdO,YAAY,EAAE,EAAE;UAChBL,QAAQ,EAAE;QACX,CAAC;QACD;AACH;AACA;QACGO,KAAK,EAAE;UACNT,IAAI,EAAE,QAAQ;UACdO,YAAY,EAAE,EAAE;UAChBG,UAAU,EAAE;QACb,CAAC;QACD;AACH;AACA;QACGC,YAAY,EAAE;UACbX,IAAI,EAAE,SAAS;UACfO,YAAY,EAAE,KAAK;UACnBL,QAAQ,EAAE;QACX,CAAC;QACD;AACH;AACA;QACGU,WAAW,EAAE;UACZZ,IAAI,EAAE,QAAQ;UACdO,YAAY,EAAE,EAAE;UAChBG,UAAU,EAAE;QACb,CAAC;QACD;AACH;AACA;QACGG,cAAc,EAAE;UACfb,IAAI,EAAE,8BAA8B;UACpCO,YAAY,EAAE,MAAM;UACpBG,UAAU,EAAE;QACb,CAAC;QACD;AACH;AACA;QACGI,cAAc,EAAE;UACfd,IAAI,EAAE,QAAQ;UACdU,UAAU,EAAE;QACb,CAAC;QACD;AACH;AACA;QACGK,IAAI,EAAE;UACLf,IAAI,EAAE,QAAQ;UACdE,QAAQ,EAAE;QACX,CAAC;QACD;AACH;AACA;QACGc,WAAW,EAAE;UACZhB,IAAI,EAAE,SAAS;UACfO,YAAY,EAAE,KAAK;UACnBG,UAAU,EAAE;QACb;MACD,CAAC;MAEDO,MAAM,EAAE,CAAC;IACV;EACD,CAAC,CAAC;EAAC,OACY5B,UAAU;AAAA"}},{"offset":{"line":19239,"column":0},"map":{"version":3,"names":["sap","ui","define","MacroMetadata","MicroChart","extend","name","namespace","publicNamespace","fragment","metadata","stereotype","properties","contextPath","type","$kind","isPublic","metaPath","required","id","showOnlyChart","defaultValue","batchGroupId","title","visibility","hideOnNoData","description","navigationType","onTitlePressed","size","isAnalytics","events"],"sources":["MicroChart.metadata-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,0DAAO,CAAC,+BAAgC,SAAUC,GACvD,aAUA,MAAMC,EAAaD,EAAcE,OAAO,sCAAuC,CAI7EC,KAAM,aAINC,UAAW,yBACXC,gBAAiB,gBAIjBC,SAAU,sCAIVC,SAAU,CAIRC,WAAY,WAIZC,WAAY,CAIVC,YAAa,CACXC,KAAM,uBACNC,MAAO,CAAC,YAAa,sBACrBC,SAAU,MAKZC,SAAU,CACRH,KAAM,uBACNI,SAAU,KACVF,SAAU,MAKZG,GAAI,CACFL,KAAM,SACNE,SAAU,KACVE,SAAU,MAMZE,cAAe,CACbN,KAAM,UACNO,aAAc,MACdL,SAAU,MAKZM,aAAc,CACZR,KAAM,SACNO,aAAc,GACdL,SAAU,MAKZO,MAAO,CACLT,KAAM,SACNO,aAAc,GACdG,WAAY,UAKdC,aAAc,CACZX,KAAM,UACNO,aAAc,MACdL,SAAU,MAKZU,YAAa,CACXZ,KAAM,SACNO,aAAc,GACdG,WAAY,UAKdG,eAAgB,CACdb,KAAM,+BACNO,aAAc,OACdG,WAAY,UAKdI,eAAgB,CACdd,KAAM,SACNU,WAAY,UAKdK,KAAM,CACJf,KAAM,SACNE,SAAU,MAKZc,YAAa,CACXhB,KAAM,UACNO,aAAc,MACdG,WAAY,WAGhBO,OAAQ,CAAC,KAGb,OAAO3B,CACT,EAAG","sourceRoot":"microchart"}},{"offset":{"line":19244,"column":0},"map":{"version":3,"names":["NavigationType","macroLib","ValueColor","mobilelibrary","MicroChartContainer","defineUI5Class","property","type","defaultValue","undefined","event","aggregation","multiple","isDefault","render","oRm","oControl","openStart","openEnd","showOnlyChart","oChartTitle","microChartTitle","forEach","oSubChartTitle","renderControl","close","oChartDescription","Label","text","chartDescription","oMicroChart","microChart","addStyleClass","uomPath","oSettings","_checkIfChartRequiresRuntimeLabels","path","oLabel","oFlexBox","FlexBox","alignItems","justifyContent","items","setAggregation","onBeforeRendering","oBinding","_getListBindingForRuntimeLabels","detachEvent","_setRuntimeChartLabelsAndUnitOfMeasure","_olistBinding","onAfterRendering","attachEvent","setShowOnlyChart","sValue","_setChartLabels","setProperty","Boolean","AreaMicroChart","ColumnMicroChart","LineMicroChart","ComparisonMicroChart","_checkForChartLabelAggregations","getAggregation","oChart","getChart","getBinding","aLines","getLines","length","ODataV4ListBinding","oListBinding","aContexts","getContexts","aMeasures","measures","sDimension","dimension","sUnitOfMeasurePath","oUnitOfMeasureLabel","_uomLabel","setText","getObject","oFirstContext","oLastContext","aLinesPomises","bLineChart","iCurrentMinX","iCurrentMaxX","iCurrentMinY","iCurrentMaxY","oMinX","value","Infinity","oMaxX","oMinY","oMaxY","context","sMeasure","i","index","push","_getCriticalityFromPoint","Promise","all","then","aColors","oLine","setColor","_setChartLabelsColors","aCriticality","leftTop","rightTop","leftBottom","rightBottom","_formatDateAndNumberValue","measurePrecision","measureScale","dimensionPrecision","calendarPattern","oPoint","oReturn","resolve","Neutral","oMetaModel","getModel","getMetaModel","aDataPointQualifiers","dataPointQualifiers","sMetaPath","ODataMetaModel","getPath","getMetaPath","requestObject","oDataPoint","sCriticality","oContext","Criticality","_criticality","CriticalityCalculation","oCriticalityCalculation","oCC","fnGetValue","oProperty","sReturn","$Path","hasOwnProperty","$Decimal","sAcceptanceHigh","AcceptanceRangeHighValue","sAcceptanceLow","AcceptanceRangeLowValue","sDeviationHigh","DeviationRangeHighValue","sDeviationLow","DeviationRangeLowValue","sToleranceHigh","ToleranceRangeHighValue","sToleranceLow","ToleranceRangeLowValue","sImprovementDirection","ImprovementDirection","$EnumMember","_criticalityCalculation","oCriticality","iCriticality","sCriticalityPath","Error","Critical","Good","indexOf","Log","warning","sCriticalityExpression","iPrecision","iScale","sPattern","_getSemanticsValueFormatter","formatValue","isNaN","_getLabelNumberFormatter","format","_oDateType","DateType","style","source","pattern","NumberFormat","getFloatInstance","showScale","precision","decimals","Control"],"sourceRoot":"microchart","sources":["MicroChartContainer.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport { aggregation, defineUI5Class, event, property } from \"sap/fe/core/helpers/ClassSupport\";\nimport macroLib from \"sap/fe/macros/library\";\nimport FlexBox from \"sap/m/FlexBox\";\nimport Label from \"sap/m/Label\";\nimport mobilelibrary from \"sap/m/library\";\nimport AreaMicroChart from \"sap/suite/ui/microchart/AreaMicroChart\";\nimport ColumnMicroChart from \"sap/suite/ui/microchart/ColumnMicroChart\";\nimport ComparisonMicroChart from \"sap/suite/ui/microchart/ComparisonMicroChart\";\nimport LineMicroChart from \"sap/suite/ui/microchart/LineMicroChart\";\nimport Control from \"sap/ui/core/Control\";\nimport NumberFormat from \"sap/ui/core/format/NumberFormat\";\nimport type RenderManager from \"sap/ui/core/RenderManager\";\nimport type Context from \"sap/ui/model/Context\";\nimport ODataV4ListBinding from \"sap/ui/model/odata/v4/ODataListBinding\";\nimport ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport DateType from \"sap/ui/model/type/Date\";\n\nconst NavigationType = macroLib.NavigationType;\nconst ValueColor = mobilelibrary.ValueColor;\n/**\n *  Container Control for Micro Chart and UoM.\n *\n * @private\n * @experimental This module is only for internal/experimental use!\n */\n@defineUI5Class(\"sap.fe.macros.microchart.MicroChartContainer\")\nclass MicroChartContainer extends Control {\n\t@property({\n\t\ttype: \"boolean\",\n\t\tdefaultValue: false\n\t})\n\tshowOnlyChart!: boolean;\n\t@property({\n\t\ttype: \"string\",\n\t\tdefaultValue: undefined\n\t})\n\tuomPath!: string;\n\t@property({\n\t\ttype: \"string[]\",\n\t\tdefaultValue: []\n\t})\n\tmeasures!: string[];\n\t@property({\n\t\ttype: \"string\",\n\t\tdefaultValue: undefined\n\t})\n\tdimension?: string;\n\t@property({\n\t\ttype: \"string[]\",\n\t\tdefaultValue: []\n\t})\n\tdataPointQualifiers!: string[];\n\t@property({\n\t\ttype: \"int\",\n\t\tdefaultValue: undefined\n\t})\n\tmeasurePrecision!: number;\n\t@property({\n\t\ttype: \"int\",\n\t\tdefaultValue: 1\n\t})\n\tmeasureScale!: number;\n\t@property({\n\t\ttype: \"int\",\n\t\tdefaultValue: undefined\n\t})\n\tdimensionPrecision?: number;\n\t@property({\n\t\ttype: \"string\",\n\t\tdefaultValue: \"\"\n\t})\n\tchartTitle!: string;\n\t@property({\n\t\ttype: \"string\",\n\t\tdefaultValue: \"\"\n\t})\n\tchartDescription!: string;\n\t@property({\n\t\ttype: \"sap.fe.macros.NavigationType\",\n\t\tdefaultValue: \"None\"\n\t})\n\tnavigationType!: typeof NavigationType;\n\t@property({\n\t\ttype: \"string\",\n\t\tdefaultValue: \"\"\n\t})\n\tcalendarPattern!: string;\n\t@event()\n\tonTitlePressed!: Function;\n\n\t@aggregation({\n\t\ttype: \"sap.ui.core.Control\",\n\t\tmultiple: false,\n\t\tisDefault: true\n\t})\n\tmicroChart!: Control;\n\t@aggregation({\n\t\ttype: \"sap.m.Label\",\n\t\tmultiple: false\n\t})\n\t_uomLabel!: Label;\n\n\t@aggregation({\n\t\ttype: \"sap.ui.core.Control\",\n\t\tmultiple: true\n\t})\n\tmicroChartTitle!: Control[];\n\tprivate _olistBinding?: ODataV4ListBinding;\n\tprivate _oDateType?: DateType;\n\n\tstatic render(oRm: RenderManager, oControl: MicroChartContainer) {\n\t\toRm.openStart(\"div\", oControl);\n\t\toRm.openEnd();\n\t\tif (!oControl.showOnlyChart) {\n\t\t\tconst oChartTitle = oControl.microChartTitle;\n\t\t\tif (oChartTitle) {\n\t\t\t\toChartTitle.forEach(function (oSubChartTitle: any) {\n\t\t\t\t\toRm.openStart(\"div\");\n\t\t\t\t\toRm.openEnd();\n\t\t\t\t\toRm.renderControl(oSubChartTitle);\n\t\t\t\t\toRm.close(\"div\");\n\t\t\t\t});\n\t\t\t}\n\t\t\toRm.openStart(\"div\");\n\t\t\toRm.openEnd();\n\t\t\tconst oChartDescription = new Label({ text: oControl.chartDescription });\n\t\t\toRm.renderControl(oChartDescription);\n\t\t\toRm.close(\"div\");\n\t\t}\n\t\tconst oMicroChart = oControl.microChart;\n\t\tif (oMicroChart) {\n\t\t\toMicroChart.addStyleClass(\"sapUiTinyMarginTopBottom\");\n\t\t\toRm.renderControl(oMicroChart);\n\t\t\tif (!oControl.showOnlyChart && oControl.uomPath) {\n\t\t\t\tconst oSettings = oControl._checkIfChartRequiresRuntimeLabels() ? undefined : { text: { path: oControl.uomPath } },\n\t\t\t\t\toLabel = new Label(oSettings),\n\t\t\t\t\toFlexBox = new FlexBox({\n\t\t\t\t\t\talignItems: \"Start\",\n\t\t\t\t\t\tjustifyContent: \"End\",\n\t\t\t\t\t\titems: [oLabel]\n\t\t\t\t\t});\n\t\t\t\toRm.renderControl(oFlexBox);\n\t\t\t\toControl.setAggregation(\"_uomLabel\", oLabel);\n\t\t\t}\n\t\t}\n\t\toRm.close(\"div\");\n\t}\n\tonBeforeRendering() {\n\t\tconst oBinding = this._getListBindingForRuntimeLabels();\n\t\tif (oBinding) {\n\t\t\toBinding.detachEvent(\"change\", this._setRuntimeChartLabelsAndUnitOfMeasure, this);\n\t\t\tthis._olistBinding = undefined;\n\t\t}\n\t}\n\tonAfterRendering() {\n\t\tconst oBinding = this._getListBindingForRuntimeLabels();\n\n\t\tif (!this._checkIfChartRequiresRuntimeLabels()) {\n\t\t\treturn;\n\t\t}\n\t\tif (oBinding) {\n\t\t\t(oBinding.attachEvent as any)(\"change\", this._setRuntimeChartLabelsAndUnitOfMeasure, this);\n\t\t\tthis._olistBinding = oBinding;\n\t\t}\n\t}\n\tsetShowOnlyChart(sValue: any) {\n\t\tif (!sValue && this._olistBinding) {\n\t\t\tthis._setChartLabels();\n\t\t}\n\t\tthis.setProperty(\"showOnlyChart\", sValue, false /*re-rendering*/);\n\t}\n\t_checkIfChartRequiresRuntimeLabels() {\n\t\tconst oMicroChart = this.microChart;\n\n\t\treturn Boolean(\n\t\t\toMicroChart instanceof AreaMicroChart ||\n\t\t\t\toMicroChart instanceof ColumnMicroChart ||\n\t\t\t\toMicroChart instanceof LineMicroChart ||\n\t\t\t\toMicroChart instanceof ComparisonMicroChart\n\t\t);\n\t}\n\t_checkForChartLabelAggregations() {\n\t\tconst oMicroChart = this.microChart;\n\t\treturn Boolean(\n\t\t\t(oMicroChart instanceof AreaMicroChart &&\n\t\t\t\toMicroChart.getAggregation(\"firstYLabel\") &&\n\t\t\t\toMicroChart.getAggregation(\"lastYLabel\") &&\n\t\t\t\toMicroChart.getAggregation(\"firstXLabel\") &&\n\t\t\t\toMicroChart.getAggregation(\"lastXLabel\")) ||\n\t\t\t\t(oMicroChart instanceof ColumnMicroChart &&\n\t\t\t\t\toMicroChart.getAggregation(\"leftTopLabel\") &&\n\t\t\t\t\toMicroChart.getAggregation(\"rightTopLabel\") &&\n\t\t\t\t\toMicroChart.getAggregation(\"leftBottomLabel\") &&\n\t\t\t\t\toMicroChart.getAggregation(\"rightBottomLabel\")) ||\n\t\t\t\toMicroChart instanceof LineMicroChart\n\t\t);\n\t}\n\t_getListBindingForRuntimeLabels() {\n\t\tconst oMicroChart = this.microChart;\n\t\tlet oBinding;\n\t\tif (oMicroChart instanceof AreaMicroChart) {\n\t\t\tconst oChart = oMicroChart.getChart();\n\t\t\toBinding = oChart && oMicroChart.getChart().getBinding(\"points\");\n\t\t} else if (oMicroChart instanceof ColumnMicroChart) {\n\t\t\toBinding = oMicroChart.getBinding(\"columns\");\n\t\t} else if (oMicroChart instanceof LineMicroChart) {\n\t\t\tconst aLines = oMicroChart.getLines();\n\t\t\toBinding = aLines && aLines.length && aLines[0].getBinding(\"points\");\n\t\t} else if (oMicroChart instanceof ComparisonMicroChart) {\n\t\t\toBinding = oMicroChart.getBinding(\"data\");\n\t\t}\n\t\treturn oBinding instanceof ODataV4ListBinding ? oBinding : false;\n\t}\n\t_setRuntimeChartLabelsAndUnitOfMeasure() {\n\t\tconst oListBinding = this._olistBinding,\n\t\t\taContexts = oListBinding?.getContexts(),\n\t\t\taMeasures = this.measures || [],\n\t\t\tsDimension = this.dimension,\n\t\t\tsUnitOfMeasurePath = this.uomPath,\n\t\t\toMicroChart = this.microChart,\n\t\t\toUnitOfMeasureLabel = this._uomLabel;\n\n\t\tif (oUnitOfMeasureLabel && sUnitOfMeasurePath && aContexts && aContexts.length && !this.showOnlyChart) {\n\t\t\toUnitOfMeasureLabel.setText(aContexts[0].getObject(sUnitOfMeasurePath));\n\t\t} else if (oUnitOfMeasureLabel) {\n\t\t\toUnitOfMeasureLabel.setText(\"\");\n\t\t}\n\n\t\tif (!this._checkForChartLabelAggregations()) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!aContexts || !aContexts.length) {\n\t\t\tthis._setChartLabels();\n\t\t\treturn;\n\t\t}\n\n\t\tconst oFirstContext = aContexts[0],\n\t\t\toLastContext = aContexts[aContexts.length - 1],\n\t\t\taLinesPomises: any[] = [],\n\t\t\tbLineChart = oMicroChart instanceof LineMicroChart,\n\t\t\tiCurrentMinX = oFirstContext.getObject(sDimension),\n\t\t\tiCurrentMaxX = oLastContext.getObject(sDimension);\n\t\tlet iCurrentMinY,\n\t\t\tiCurrentMaxY,\n\t\t\toMinX: any = { value: Infinity },\n\t\t\toMaxX: any = { value: -Infinity },\n\t\t\toMinY: any = { value: Infinity },\n\t\t\toMaxY: any = { value: -Infinity };\n\n\t\toMinX = iCurrentMinX == undefined ? oMinX : { context: oFirstContext, value: iCurrentMinX };\n\t\toMaxX = iCurrentMaxX == undefined ? oMaxX : { context: oLastContext, value: iCurrentMaxX };\n\n\t\taMeasures.forEach((sMeasure: any, i: any) => {\n\t\t\tiCurrentMinY = oFirstContext.getObject(sMeasure);\n\t\t\tiCurrentMaxY = oLastContext.getObject(sMeasure);\n\t\t\toMaxY = iCurrentMaxY > oMaxY.value ? { context: oLastContext, value: iCurrentMaxY, index: bLineChart ? i : 0 } : oMaxY;\n\t\t\toMinY = iCurrentMinY < oMinY.value ? { context: oFirstContext, value: iCurrentMinY, index: bLineChart ? i : 0 } : oMinY;\n\t\t\tif (bLineChart) {\n\t\t\t\taLinesPomises.push(this._getCriticalityFromPoint({ context: oLastContext, value: iCurrentMaxY, index: i }));\n\t\t\t}\n\t\t});\n\t\tthis._setChartLabels(oMinY.value, oMaxY.value, oMinX.value, oMaxX.value);\n\t\tif (bLineChart) {\n\t\t\treturn Promise.all(aLinesPomises).then(function (aColors: any[]) {\n\t\t\t\tconst aLines = oMicroChart.getLines();\n\t\t\t\taLines.forEach(function (oLine: any, i: any) {\n\t\t\t\t\toLine.setColor(aColors[i]);\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\treturn this._setChartLabelsColors(oMaxY, oMinY);\n\t\t}\n\t}\n\t_setChartLabelsColors(oMaxY: object, oMinY: object) {\n\t\tconst oMicroChart = this.microChart;\n\n\t\treturn Promise.all([this._getCriticalityFromPoint(oMinY), this._getCriticalityFromPoint(oMaxY)]).then(function (\n\t\t\taCriticality: [any, any]\n\t\t) {\n\t\t\tif (oMicroChart instanceof AreaMicroChart) {\n\t\t\t\t(oMicroChart.getAggregation(\"firstYLabel\") as any).setProperty(\"color\", aCriticality[0], true);\n\t\t\t\t(oMicroChart.getAggregation(\"lastYLabel\") as any).setProperty(\"color\", aCriticality[1], true);\n\t\t\t} else if (oMicroChart instanceof ColumnMicroChart) {\n\t\t\t\t(oMicroChart.getAggregation(\"leftTopLabel\") as any).setProperty(\"color\", aCriticality[0], true);\n\t\t\t\t(oMicroChart.getAggregation(\"rightTopLabel\") as any).setProperty(\"color\", aCriticality[1], true);\n\t\t\t}\n\t\t});\n\t}\n\t_setChartLabels(leftTop?: object, rightTop?: object, leftBottom?: object, rightBottom?: object) {\n\t\tconst oMicroChart = this.microChart;\n\n\t\tleftTop = this._formatDateAndNumberValue(leftTop, this.measurePrecision, this.measureScale);\n\t\trightTop = this._formatDateAndNumberValue(rightTop, this.measurePrecision, this.measureScale);\n\t\tleftBottom = this._formatDateAndNumberValue(leftBottom, this.dimensionPrecision, undefined, this.calendarPattern);\n\t\trightBottom = this._formatDateAndNumberValue(rightBottom, this.dimensionPrecision, undefined, this.calendarPattern);\n\n\t\tif (oMicroChart instanceof AreaMicroChart) {\n\t\t\t(oMicroChart.getAggregation(\"firstYLabel\") as any).setProperty(\"label\", leftTop, false);\n\t\t\t(oMicroChart.getAggregation(\"lastYLabel\") as any).setProperty(\"label\", rightTop, false);\n\t\t\t(oMicroChart.getAggregation(\"firstXLabel\") as any).setProperty(\"label\", leftBottom, false);\n\t\t\t(oMicroChart.getAggregation(\"lastXLabel\") as any).setProperty(\"label\", rightBottom, false);\n\t\t} else if (oMicroChart instanceof ColumnMicroChart) {\n\t\t\t(oMicroChart.getAggregation(\"leftTopLabel\") as any).setProperty(\"label\", leftTop, false);\n\t\t\t(oMicroChart.getAggregation(\"rightTopLabel\") as any).setProperty(\"label\", rightTop, false);\n\t\t\t(oMicroChart.getAggregation(\"leftBottomLabel\") as any).setProperty(\"label\", leftBottom, false);\n\t\t\t(oMicroChart.getAggregation(\"rightBottomLabel\") as any).setProperty(\"label\", rightBottom, false);\n\t\t} else if (oMicroChart instanceof LineMicroChart) {\n\t\t\toMicroChart.setProperty(\"leftTopLabel\", leftTop, false);\n\t\t\toMicroChart.setProperty(\"rightTopLabel\", rightTop, false);\n\t\t\toMicroChart.setProperty(\"leftBottomLabel\", leftBottom, false);\n\t\t\toMicroChart.setProperty(\"rightBottomLabel\", rightBottom, false);\n\t\t}\n\t}\n\t_getCriticalityFromPoint(oPoint: any) {\n\t\tlet oReturn = Promise.resolve(ValueColor.Neutral);\n\t\tconst oMetaModel = this.getModel() && (this.getModel().getMetaModel() as ODataMetaModel),\n\t\t\taDataPointQualifiers = this.dataPointQualifiers,\n\t\t\tsMetaPath =\n\t\t\t\toMetaModel instanceof ODataMetaModel &&\n\t\t\t\toPoint &&\n\t\t\t\toPoint.context &&\n\t\t\t\toPoint.context.getPath() &&\n\t\t\t\toMetaModel.getMetaPath(oPoint.context.getPath());\n\n\t\tif (typeof sMetaPath === \"string\") {\n\t\t\toReturn = oMetaModel\n\t\t\t\t.requestObject(\n\t\t\t\t\t`${sMetaPath}/@com.sap.vocabularies.UI.v1.DataPoint${\n\t\t\t\t\t\taDataPointQualifiers[oPoint.index] ? `#${aDataPointQualifiers[oPoint.index]}` : \"\"\n\t\t\t\t\t}`\n\t\t\t\t)\n\t\t\t\t.then((oDataPoint: any) => {\n\t\t\t\t\tlet sCriticality = ValueColor.Neutral;\n\t\t\t\t\tconst oContext = oPoint.context;\n\t\t\t\t\tif (oDataPoint.Criticality) {\n\t\t\t\t\t\tsCriticality = this._criticality(oDataPoint.Criticality, oContext);\n\t\t\t\t\t} else if (oDataPoint.CriticalityCalculation) {\n\t\t\t\t\t\tconst oCriticalityCalculation = oDataPoint.CriticalityCalculation,\n\t\t\t\t\t\t\toCC: any = {},\n\t\t\t\t\t\t\tfnGetValue = function (oProperty: any) {\n\t\t\t\t\t\t\t\tlet sReturn;\n\t\t\t\t\t\t\t\tif (oProperty.$Path) {\n\t\t\t\t\t\t\t\t\tsReturn = oContext.getObject(oProperty.$Path);\n\t\t\t\t\t\t\t\t} else if (oProperty.hasOwnProperty(\"$Decimal\")) {\n\t\t\t\t\t\t\t\t\tsReturn = oProperty.$Decimal;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn sReturn;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\toCC.sAcceptanceHigh = oCriticalityCalculation.AcceptanceRangeHighValue\n\t\t\t\t\t\t\t? fnGetValue(oCriticalityCalculation.AcceptanceRangeHighValue)\n\t\t\t\t\t\t\t: undefined;\n\t\t\t\t\t\toCC.sAcceptanceLow = oCriticalityCalculation.AcceptanceRangeLowValue\n\t\t\t\t\t\t\t? fnGetValue(oCriticalityCalculation.AcceptanceRangeLowValue)\n\t\t\t\t\t\t\t: undefined;\n\t\t\t\t\t\toCC.sDeviationHigh = oCriticalityCalculation.DeviationRangeHighValue\n\t\t\t\t\t\t\t? fnGetValue(oCriticalityCalculation.DeviationRangeHighValue)\n\t\t\t\t\t\t\t: undefined;\n\t\t\t\t\t\toCC.sDeviationLow = oCriticalityCalculation.DeviationRangeLowValue\n\t\t\t\t\t\t\t? fnGetValue(oCriticalityCalculation.DeviationRangeLowValue)\n\t\t\t\t\t\t\t: undefined;\n\t\t\t\t\t\toCC.sToleranceHigh = oCriticalityCalculation.ToleranceRangeHighValue\n\t\t\t\t\t\t\t? fnGetValue(oCriticalityCalculation.ToleranceRangeHighValue)\n\t\t\t\t\t\t\t: undefined;\n\t\t\t\t\t\toCC.sToleranceLow = oCriticalityCalculation.ToleranceRangeLowValue\n\t\t\t\t\t\t\t? fnGetValue(oCriticalityCalculation.ToleranceRangeLowValue)\n\t\t\t\t\t\t\t: undefined;\n\t\t\t\t\t\toCC.sImprovementDirection = oCriticalityCalculation.ImprovementDirection.$EnumMember;\n\n\t\t\t\t\t\tsCriticality = this._criticalityCalculation(\n\t\t\t\t\t\t\toCC.sImprovementDirection,\n\t\t\t\t\t\t\toPoint.value,\n\t\t\t\t\t\t\toCC.sDeviationLow,\n\t\t\t\t\t\t\toCC.sToleranceLow,\n\t\t\t\t\t\t\toCC.sAcceptanceLow,\n\t\t\t\t\t\t\toCC.sAcceptanceHigh,\n\t\t\t\t\t\t\toCC.sToleranceHigh,\n\t\t\t\t\t\t\toCC.sDeviationHigh\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\treturn sCriticality;\n\t\t\t\t});\n\t\t}\n\t\treturn oReturn;\n\t}\n\t_criticality(oCriticality: any, oContext: Context) {\n\t\tlet iCriticality,\n\t\t\tsCriticality = ValueColor.Neutral;\n\t\tif (oCriticality.$Path) {\n\t\t\tconst sCriticalityPath = oCriticality.$Path;\n\t\t\tiCriticality = oContext.getObject(sCriticalityPath);\n\t\t\tif (iCriticality === \"Negative\" || iCriticality === \"1\" || iCriticality === 1) {\n\t\t\t\tsCriticality = ValueColor.Error;\n\t\t\t} else if (iCriticality === \"Critical\" || iCriticality === \"2\" || iCriticality === 2) {\n\t\t\t\tsCriticality = ValueColor.Critical;\n\t\t\t} else if (iCriticality === \"Positive\" || iCriticality === \"3\" || iCriticality === 3) {\n\t\t\t\tsCriticality = ValueColor.Good;\n\t\t\t}\n\t\t} else if (oCriticality.$EnumMember) {\n\t\t\tiCriticality = oCriticality.$EnumMember;\n\t\t\tif (iCriticality.indexOf(\"com.sap.vocabularies.UI.v1.CriticalityType/Negative\") > -1) {\n\t\t\t\tsCriticality = ValueColor.Error;\n\t\t\t} else if (iCriticality.indexOf(\"com.sap.vocabularies.UI.v1.CriticalityType/Positive\") > -1) {\n\t\t\t\tsCriticality = ValueColor.Good;\n\t\t\t} else if (iCriticality.indexOf(\"com.sap.vocabularies.UI.v1.CriticalityType/Critical\") > -1) {\n\t\t\t\tsCriticality = ValueColor.Critical;\n\t\t\t}\n\t\t} else {\n\t\t\tLog.warning(\"Case not supported, returning the default Value Neutral\");\n\t\t}\n\t\treturn sCriticality;\n\t}\n\t_criticalityCalculation(\n\t\tsImprovementDirection: string,\n\t\tsValue: string,\n\t\tsDeviationLow?: string | number,\n\t\tsToleranceLow?: string | number,\n\t\tsAcceptanceLow?: string | number,\n\t\tsAcceptanceHigh?: string | number,\n\t\tsToleranceHigh?: string | number,\n\t\tsDeviationHigh?: string | number\n\t) {\n\t\tlet sCriticalityExpression = ValueColor.Neutral; // Default Criticality State\n\n\t\t// Dealing with Decimal and Path based bingdings\n\t\tsDeviationLow = sDeviationLow == undefined ? -Infinity : sDeviationLow;\n\t\tsToleranceLow = sToleranceLow == undefined ? sDeviationLow : sToleranceLow;\n\t\tsAcceptanceLow = sAcceptanceLow == undefined ? sToleranceLow : sAcceptanceLow;\n\t\tsDeviationHigh = sDeviationHigh == undefined ? Infinity : sDeviationHigh;\n\t\tsToleranceHigh = sToleranceHigh == undefined ? sDeviationHigh : sToleranceHigh;\n\t\tsAcceptanceHigh = sAcceptanceHigh == undefined ? sToleranceHigh : sAcceptanceHigh;\n\n\t\t// Creating runtime expression binding from criticality calculation for Criticality State\n\t\tif (sImprovementDirection.indexOf(\"Minimize\") > -1) {\n\t\t\tif (sValue <= sAcceptanceHigh) {\n\t\t\t\tsCriticalityExpression = ValueColor.Good;\n\t\t\t} else if (sValue <= sToleranceHigh) {\n\t\t\t\tsCriticalityExpression = ValueColor.Neutral;\n\t\t\t} else if (sDeviationHigh && sValue <= sDeviationHigh) {\n\t\t\t\tsCriticalityExpression = ValueColor.Critical;\n\t\t\t} else {\n\t\t\t\tsCriticalityExpression = ValueColor.Error;\n\t\t\t}\n\t\t} else if (sImprovementDirection.indexOf(\"Maximize\") > -1) {\n\t\t\tif (sValue >= sAcceptanceLow) {\n\t\t\t\tsCriticalityExpression = ValueColor.Good;\n\t\t\t} else if (sValue >= sToleranceLow) {\n\t\t\t\tsCriticalityExpression = ValueColor.Neutral;\n\t\t\t} else if (sDeviationHigh && sValue >= sDeviationLow) {\n\t\t\t\tsCriticalityExpression = ValueColor.Critical;\n\t\t\t} else {\n\t\t\t\tsCriticalityExpression = ValueColor.Error;\n\t\t\t}\n\t\t} else if (sImprovementDirection.indexOf(\"Target\") > -1) {\n\t\t\tif (sValue <= sAcceptanceHigh && sValue >= sAcceptanceLow) {\n\t\t\t\tsCriticalityExpression = ValueColor.Good;\n\t\t\t} else if ((sValue >= sToleranceLow && sValue < sAcceptanceLow) || (sValue > sAcceptanceHigh && sValue <= sToleranceHigh)) {\n\t\t\t\tsCriticalityExpression = ValueColor.Neutral;\n\t\t\t} else if (\n\t\t\t\t(sDeviationLow && sValue >= sDeviationLow && sValue < sToleranceLow) ||\n\t\t\t\t(sValue > sToleranceHigh && sDeviationHigh && sValue <= sDeviationHigh)\n\t\t\t) {\n\t\t\t\tsCriticalityExpression = ValueColor.Critical;\n\t\t\t} else {\n\t\t\t\tsCriticalityExpression = ValueColor.Error;\n\t\t\t}\n\t\t} else {\n\t\t\tLog.warning(\"Case not supported, returning the default Value Neutral\");\n\t\t}\n\n\t\treturn sCriticalityExpression;\n\t}\n\t_formatDateAndNumberValue(value: any, iPrecision: any, iScale: any, sPattern?: any) {\n\t\tif (sPattern) {\n\t\t\treturn this._getSemanticsValueFormatter(sPattern).formatValue(value, \"string\");\n\t\t} else if (!isNaN(value)) {\n\t\t\treturn this._getLabelNumberFormatter(iPrecision, iScale).format(value);\n\t\t}\n\n\t\treturn value;\n\t}\n\t_getSemanticsValueFormatter(sPattern: any) {\n\t\tif (!this._oDateType) {\n\t\t\tthis._oDateType = new DateType({\n\t\t\t\tstyle: \"short\",\n\t\t\t\tsource: {\n\t\t\t\t\tpattern: sPattern\n\t\t\t\t}\n\t\t\t} as any);\n\t\t}\n\t\treturn this._oDateType;\n\t}\n\t_getLabelNumberFormatter(iPrecision: any, iScale: any) {\n\t\treturn NumberFormat.getFloatInstance({\n\t\t\tstyle: \"short\",\n\t\t\tshowScale: true,\n\t\t\tprecision: typeof iPrecision === \"number\" ? iPrecision : (null as any),\n\t\t\tdecimals: typeof iScale === \"number\" ? iScale : (null as any)\n\t\t});\n\t}\n}\n\nexport default MicroChartContainer;\n"],"mappings":"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"}},{"offset":{"line":19771,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","ClassSupport","macroLib","FlexBox","Label","mobilelibrary","AreaMicroChart","ColumnMicroChart","ComparisonMicroChart","LineMicroChart","Control","NumberFormat","ODataV4ListBinding","ODataMetaModel","DateType","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_descriptor15","_descriptor16","property","event","defineUI5Class","aggregation","_initializerDefineProperty","target","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","NavigationType","ValueColor","MicroChartContainer","type","defaultValue","multiple","isDefault","_Control","_this","_len","arguments","length","args","Array","_key","this","render","oRm","oControl","openStart","openEnd","showOnlyChart","oChartTitle","microChartTitle","oSubChartTitle","renderControl","close","oChartDescription","text","chartDescription","oMicroChart","microChart","addStyleClass","uomPath","oSettings","_checkIfChartRequiresRuntimeLabels","path","oLabel","oFlexBox","alignItems","justifyContent","items","setAggregation","_proto","onBeforeRendering","oBinding","_getListBindingForRuntimeLabels","detachEvent","_setRuntimeChartLabelsAndUnitOfMeasure","_olistBinding","onAfterRendering","attachEvent","setShowOnlyChart","sValue","_setChartLabels","setProperty","Boolean","_checkForChartLabelAggregations","getAggregation","oChart","getChart","getBinding","aLines","getLines","oListBinding","aContexts","getContexts","aMeasures","measures","sDimension","dimension","sUnitOfMeasurePath","oUnitOfMeasureLabel","_uomLabel","setText","getObject","oFirstContext","oLastContext","aLinesPomises","bLineChart","iCurrentMinX","iCurrentMaxX","iCurrentMinY","iCurrentMaxY","oMinX","Infinity","oMaxX","oMinY","oMaxY","sMeasure","i","index","push","_getCriticalityFromPoint","Promise","all","then","aColors","oLine","setColor","_setChartLabelsColors","aCriticality","leftTop","rightTop","leftBottom","rightBottom","_formatDateAndNumberValue","measurePrecision","measureScale","dimensionPrecision","calendarPattern","oPoint","oReturn","resolve","Neutral","oMetaModel","getModel","getMetaModel","aDataPointQualifiers","dataPointQualifiers","sMetaPath","getPath","getMetaPath","requestObject","oDataPoint","sCriticality","oContext","Criticality","_criticality","CriticalityCalculation","oCriticalityCalculation","oCC","fnGetValue","oProperty","sReturn","$Path","hasOwnProperty","$Decimal","sAcceptanceHigh","AcceptanceRangeHighValue","sAcceptanceLow","AcceptanceRangeLowValue","sDeviationHigh","DeviationRangeHighValue","sDeviationLow","DeviationRangeLowValue","sToleranceHigh","ToleranceRangeHighValue","sToleranceLow","ToleranceRangeLowValue","sImprovementDirection","ImprovementDirection","$EnumMember","_criticalityCalculation","oCriticality","iCriticality","sCriticalityPath","Critical","Good","indexOf","warning","sCriticalityExpression","iPrecision","iScale","sPattern","_getSemanticsValueFormatter","formatValue","isNaN","_getLabelNumberFormatter","format","_oDateType","style","source","pattern","getFloatInstance","showScale","precision","decimals"],"sources":["MicroChartContainer-dbg.js"],"mappings":"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","sourceRoot":"microchart"}},{"offset":{"line":19776,"column":0},"map":{"version":3,"names":["ValueColor","mobilelibrary","calendarPatternMap","yyyy","RegExp","Q","MM","ww","yyyyMMdd","yyyyMM","MicroChartHelper","getThresholdColor","sValue","iContext","oContext","context","sPath","getPath","sThresholdColor","Neutral","indexOf","Error","Critical","getMeasurePropertyPaths","oChartAnnotations","oEntityTypeAnnotations","sChartType","aPropertyPath","Log","warning","undefined","Measures","forEach","sMeasure","iMeasure","iMeasureAttribute","CommonHelper","getMeasureAttributeIndex","oMeasureAttribute","MeasureAttributes","oDataPoint","DataPoint","$AnnotationPath","Value","$Path","push","join","getHiddenPathExpression","args","hiddenPaths","call","hiddenProperty","isNotAlwaysHidden","chartType","sMaxValue","sValueHidden","sMaxValueHidden","logError","error","formatDecimal","oProperty","iFractionDigits","aConstraints","aFormatOptions","sScale","$Scale","sBinding","$Nullable","$Precision","getSelectParameters","oCC","aParameters","k","$EnumMember","i","length","getDataPointQualifiersForMeasures","aQualifers","aMeasureAttributes","fnAddDataPointQualifier","oMeasure","$PropertyPath","sQualifer","Measure","sAnnotationPath","split","logWarning","sChart","oError","sKey","getDisplayValueForMicroChart","oPathText","oValueTextPath","oValueDataPointPath","sValueFormat","ValueFormat","NumberOfFractionalDigits","sResult","shouldMicroChartRender","oDataPointValue","oDatapointMaxValue","aChartTypes","sDataPointValue","sHiddenPath","sChartAnnotationDimension","Dimensions","oFinalDataPointValue","oDataPointMaximumValue","MaximumValue","sMaxValueHiddenPath","getdataPointQualifiersForMicroChart","sUiName","getcolorPaletteForMicroChart","Criticality","getMeasureScaleForMicroChart","getBindingExpressionForMicrochart","oThis","oCollection","bCondition","sCurrencyOrUnit","getUOMPathForMicrochart","sDataPointCriticallity","sFunctionValue","batchGroupId","bShowOnlyChart","bResult","getAggregationForMicrochart","sAggregationType","oDimension","sMeasureOrDimensionBar","sGroupId","sDataPointCriticallityCalc","sTargetValuePath","sDimensionPropertyPath","CriticalityCalculation","TargetValue","sAggregationExpression","getCurrencyOrUnit","getCalendarPattern","oAnnotations","formatDimension","sDate","sPattern","sPropertyPath","fValue","DateFormat","getDateInstance","pattern","parse","Date","parseFloat","getTime","formatDateDimension","formatStringDimension","sMatchedValue","toString","match","getX","sType"],"sourceRoot":"microchart","sources":["MicroChartHelper.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport mobilelibrary from \"sap/m/library\";\nimport DateFormat from \"sap/ui/core/format/DateFormat\";\n\nconst ValueColor = mobilelibrary.ValueColor;\nconst calendarPatternMap: any = {\n\tyyyy: new RegExp(\"[1-9][0-9]{3,}|0[0-9]{3}\"),\n\tQ: new RegExp(\"[1-4]\"),\n\tMM: new RegExp(\"0[1-9]|1[0-2]\"),\n\tww: new RegExp(\"0[1-9]|[1-4][0-9]|5[0-3]\"),\n\tyyyyMMdd: new RegExp(\"([1-9][0-9]{3,}|0[0-9]{3})(0[1-9]|1[0-2])(0[1-9]|[12][0-9]|3[01])\"),\n\tyyyyMM: new RegExp(\"([1-9][0-9]{3,}|0[0-9]{3})(0[1-9]|1[0-2])\")\n};\n/**\n * Helper class used by MDC_Controls to handle SAP Fiori elements for OData V4\n *\n * @private\n * @experimental This module is only for internal/experimental use!\n */\nconst MicroChartHelper = {\n\t/**\n\t * This function returns the Threshold Color for bullet micro chart.\n\t *\n\t * @param sValue Threshold value provided in the annotations\n\t * @param iContext InterfaceContext with path to the threshold\n\t * @returns The indicator for Threshold Color\n\t */\n\tgetThresholdColor: function (sValue: string, iContext: any) {\n\t\tconst oContext = iContext.context;\n\t\tconst sPath = oContext.getPath();\n\t\tlet sThresholdColor = ValueColor.Neutral;\n\n\t\tif (sPath.indexOf(\"DeviationRange\") > -1) {\n\t\t\tsThresholdColor = ValueColor.Error;\n\t\t} else if (sPath.indexOf(\"ToleranceRange\") > -1) {\n\t\t\tsThresholdColor = ValueColor.Critical;\n\t\t}\n\t\treturn sThresholdColor;\n\t},\n\n\t/**\n\t * To fetch measures from DataPoints.\n\t *\n\t * @param oChartAnnotations Chart Annotations\n\t * @param oEntityTypeAnnotations EntityType Annotations\n\t * @param sChartType Chart Type used\n\t * @returns Containing all measures.\n\t * @private\n\t */\n\tgetMeasurePropertyPaths: function (oChartAnnotations: any, oEntityTypeAnnotations: any, sChartType: string) {\n\t\tconst aPropertyPath: any[] = [];\n\n\t\tif (!oEntityTypeAnnotations) {\n\t\t\tLog.warning(\"FE:Macro:MicroChart : Couldn't find annotations for the DataPoint.\");\n\t\t\treturn undefined;\n\t\t}\n\n\t\toChartAnnotations.Measures.forEach(function (sMeasure: any, iMeasure: any) {\n\t\t\tconst iMeasureAttribute = CommonHelper.getMeasureAttributeIndex(iMeasure, oChartAnnotations),\n\t\t\t\toMeasureAttribute =\n\t\t\t\t\tiMeasureAttribute > -1 && oChartAnnotations.MeasureAttributes && oChartAnnotations.MeasureAttributes[iMeasureAttribute],\n\t\t\t\toDataPoint =\n\t\t\t\t\toMeasureAttribute && oEntityTypeAnnotations && oEntityTypeAnnotations[oMeasureAttribute.DataPoint.$AnnotationPath];\n\t\t\tif (oDataPoint && oDataPoint.Value && oDataPoint.Value.$Path) {\n\t\t\t\taPropertyPath.push(oDataPoint.Value.$Path);\n\t\t\t} else {\n\t\t\t\tLog.warning(\n\t\t\t\t\t`FE:Macro:MicroChart : Couldn't find DataPoint(Value) measure for the measureAttribute ${sChartType} MicroChart.`\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\n\t\treturn aPropertyPath.join(\",\");\n\t},\n\n\t/**\n\t * This function returns the visible expression path.\n\t *\n\t * @param args\n\t * @returns Expression Binding for the visible.\n\t */\n\tgetHiddenPathExpression: function (...args: any[]) {\n\t\tif (!args[0] && !args[1]) {\n\t\t\treturn true;\n\t\t} else if (args[0] === true || args[1] === true) {\n\t\t\treturn false;\n\t\t} else {\n\t\t\tconst hiddenPaths: any[] = [];\n\t\t\t[].forEach.call(args, function (hiddenProperty: any) {\n\t\t\t\tif (hiddenProperty && hiddenProperty.$Path) {\n\t\t\t\t\thiddenPaths.push(\"%{\" + hiddenProperty.$Path + \"}\");\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn \"{= \" + hiddenPaths.join(\" || \") + \" === true ? false : true }\";\n\t\t}\n\t},\n\n\t/**\n\t * This function returns the true/false to display chart.\n\t *\n\t * @param chartType The chart type\n\t * @param sValue Datapoint value of Value\n\t * @param sMaxValue Datapoint value of MaximumValue\n\t * @param sValueHidden Hidden path object/boolean value for the referrenced property of value\n\t * @param sMaxValueHidden Hidden path object/boolean value for the referrenced property of MaxValue\n\t * @returns `true` or `false` to hide/show chart\n\t */\n\tisNotAlwaysHidden: function (\n\t\tchartType: string,\n\t\tsValue: object,\n\t\tsMaxValue: object | undefined,\n\t\tsValueHidden: boolean | any,\n\t\tsMaxValueHidden?: boolean | any\n\t) {\n\t\tif (sValueHidden === true) {\n\t\t\tthis.logError(chartType, sValue);\n\t\t}\n\t\tif (sMaxValueHidden === true) {\n\t\t\tthis.logError(chartType, sMaxValue);\n\t\t}\n\t\tif (sValueHidden === undefined && sMaxValueHidden === undefined) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn ((!sValueHidden || sValueHidden.$Path) && sValueHidden !== undefined) ||\n\t\t\t\t((!sMaxValueHidden || sMaxValueHidden.$Path) && sMaxValueHidden !== undefined)\n\t\t\t\t? true\n\t\t\t\t: false;\n\t\t}\n\t},\n\n\t/**\n\t * This function is to log errors for missing datapoint properties.\n\t *\n\t * @param chartType The chart type.\n\t * @param sValue Dynamic hidden property name.\n\t */\n\tlogError: function (chartType: string, sValue: any) {\n\t\tLog.error(`Measure Property ${sValue.$Path} is hidden for the ${chartType} Micro Chart`);\n\t},\n\n\t/**\n\t * This function returns the formatted value with scale factor for the value displayed.\n\t *\n\t * @param sPath Propertypath for the value\n\t * @param oProperty The Property for constraints\n\t * @param iFractionDigits No. of fraction digits specified from annotations\n\t * @returns Expression Binding for the value with scale.\n\t */\n\tformatDecimal: function (sPath: string, oProperty: any, iFractionDigits: number) {\n\t\tconst aConstraints = [],\n\t\t\taFormatOptions = [\"style: 'short'\"];\n\t\tlet sScale;\n\t\tif (typeof iFractionDigits === \"number\") {\n\t\t\tsScale = iFractionDigits;\n\t\t} else {\n\t\t\tsScale = (oProperty && oProperty.$Scale) || 1;\n\t\t}\n\t\tlet sBinding;\n\n\t\tif (sPath) {\n\t\t\tif (oProperty.$Nullable != undefined) {\n\t\t\t\taConstraints.push(\"nullable: \" + oProperty.$Nullable);\n\t\t\t}\n\t\t\tif (oProperty.$Precision != undefined) {\n\t\t\t\taFormatOptions.push(\"precision: \" + (oProperty.$Precision ? oProperty.$Precision : \"1\"));\n\t\t\t}\n\t\t\taConstraints.push(\"scale: \" + (sScale === \"variable\" ? \"'\" + sScale + \"'\" : sScale));\n\n\t\t\tsBinding =\n\t\t\t\t\"{ path: '\" +\n\t\t\t\tsPath +\n\t\t\t\t\"'\" +\n\t\t\t\t\", type: 'sap.ui.model.odata.type.Decimal', constraints: { \" +\n\t\t\t\taConstraints.join(\",\") +\n\t\t\t\t\" }, formatOptions: { \" +\n\t\t\t\taFormatOptions.join(\",\") +\n\t\t\t\t\" } }\";\n\t\t}\n\t\treturn sBinding;\n\t},\n\n\t/**\n\t * To fetch select parameters from annotations that need to be added to the list binding.\n\t *\n\t * @param args The select parameter\n\t * param {string} sGroupId groupId to be used(optional)\n\t * param {string} sUoMPath unit of measure path\n\t * param {string} oCriticality criticality for the chart\n\t * param {object} oCC criticality calculation object conatining the paths.\n\t * @returns String containing all the propertypaths needed to be added to the $select query of the listbinding.\n\t * @private\n\t */\n\tgetSelectParameters: function (...args: any[]) {\n\t\tconst aPropertyPath = [],\n\t\t\toCC = args[1],\n\t\t\taParameters = [];\n\n\t\tif (args[0]) {\n\t\t\taParameters.push(\"$$groupId : '\" + args[0] + \"'\");\n\t\t}\n\t\tif (args[2]) {\n\t\t\taPropertyPath.push(args[2]);\n\t\t} else if (oCC) {\n\t\t\tfor (const k in oCC) {\n\t\t\t\tif (!oCC[k].$EnumMember && oCC[k].$Path) {\n\t\t\t\t\taPropertyPath.push(oCC[k].$Path);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (let i = 3; i < args.length; i++) {\n\t\t\tif (args[i]) {\n\t\t\t\taPropertyPath.push(args[i]);\n\t\t\t}\n\t\t}\n\n\t\tif (aPropertyPath.length) {\n\t\t\taParameters.push(\"$select : '\" + aPropertyPath.join(\",\") + \"'\");\n\t\t}\n\n\t\treturn aParameters.join(\",\");\n\t},\n\n\t/**\n\t * To fetch DataPoint Qualifiers of measures.\n\t *\n\t * @param oChartAnnotations Chart Annotations\n\t * @param oEntityTypeAnnotations EntityType Annotations\n\t * @param sChartType Chart Type used\n\t * @returns Containing all Datapoint Qualifiers.\n\t * @private\n\t */\n\tgetDataPointQualifiersForMeasures: function (oChartAnnotations: any, oEntityTypeAnnotations: any, sChartType: string) {\n\t\tconst aQualifers: any[] = [],\n\t\t\taMeasureAttributes = oChartAnnotations.MeasureAttributes,\n\t\t\tfnAddDataPointQualifier = function (oMeasure: any) {\n\t\t\t\tconst sMeasure = oMeasure.$PropertyPath;\n\t\t\t\tlet sQualifer;\n\t\t\t\taMeasureAttributes.forEach(function (oMeasureAttribute: any) {\n\t\t\t\t\tif (\n\t\t\t\t\t\toEntityTypeAnnotations &&\n\t\t\t\t\t\t(oMeasureAttribute && oMeasureAttribute.Measure && oMeasureAttribute.Measure.$PropertyPath) === sMeasure &&\n\t\t\t\t\t\toMeasureAttribute.DataPoint &&\n\t\t\t\t\t\toMeasureAttribute.DataPoint.$AnnotationPath\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst sAnnotationPath = oMeasureAttribute.DataPoint.$AnnotationPath;\n\t\t\t\t\t\tif (oEntityTypeAnnotations[sAnnotationPath]) {\n\t\t\t\t\t\t\tsQualifer = sAnnotationPath.indexOf(\"#\") ? sAnnotationPath.split(\"#\")[1] : \"\";\n\t\t\t\t\t\t\taQualifers.push(sQualifer);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (sQualifer === undefined) {\n\t\t\t\t\tLog.warning(\n\t\t\t\t\t\t`FE:Macro:MicroChart : Couldn't find DataPoint(Value) measure for the measureAttribute for ${sChartType} MicroChart.`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t};\n\n\t\tif (!oEntityTypeAnnotations) {\n\t\t\tLog.warning(`FE:Macro:MicroChart : Couldn't find annotations for the DataPoint ${sChartType} MicroChart.`);\n\t\t}\n\t\toChartAnnotations.Measures.forEach(fnAddDataPointQualifier);\n\t\treturn aQualifers.join(\",\");\n\t},\n\n\t/**\n\t * This function is to log warnings for missing datapoint properties.\n\t *\n\t * @param sChart The Chart type.\n\t * @param oError Object with properties from DataPoint.\n\t */\n\tlogWarning: function (sChart: string, oError: any) {\n\t\tfor (const sKey in oError) {\n\t\t\tconst sValue = oError[sKey];\n\t\t\tif (!sValue) {\n\t\t\t\tLog.warning(`${sKey} parameter is missing for the ${sChart} Micro Chart`);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * This function is used to get DisplayValue for comparison micro chart data aggregation.\n\t *\n\t * @param oDataPoint Data point object.\n\t * @param oPathText Object after evaluating @com.sap.vocabularies.Common.v1.Text annotation\n\t * @param oValueTextPath Evaluation of @com.sap.vocabularies.Common.v1.Text/$Path/$ value of the annotation\n\t * @param oValueDataPointPath DataPoint>Value/$Path/$ value after evaluating annotation\n\t * @returns Expression binding for Display Value for comparison micro chart's aggregation data.\n\t */\n\tgetDisplayValueForMicroChart: function (oDataPoint: any, oPathText: any, oValueTextPath: object, oValueDataPointPath: object) {\n\t\tconst sValueFormat = oDataPoint.ValueFormat && oDataPoint.ValueFormat.NumberOfFractionalDigits;\n\t\tlet sResult;\n\t\tif (oPathText) {\n\t\t\tsResult = MicroChartHelper.formatDecimal(oPathText[\"$Path\"], oValueTextPath, sValueFormat);\n\t\t} else {\n\t\t\tsResult = MicroChartHelper.formatDecimal(oDataPoint.Value[\"$Path\"], oValueDataPointPath, sValueFormat);\n\t\t}\n\t\treturn sResult;\n\t},\n\t/**\n\t * This function is used to check whether micro chart is enabled or not by checking properties, chart annotations, hidden properties.\n\t *\n\t * @param sChartType MicroChart Type eg:- Bullet.\n\t * @param oDataPoint Data point object.\n\t * @param oDataPointValue Object with $Path annotation to get hidden value path\n\t * @param oChartAnnotations ChartAnnotation object\n\t * @param oDatapointMaxValue Object with $Path annotation to get hidden max value path\n\t * @returns `true` if the chart has all values and properties and also it is not always hidden sFinalDataPointValue && bMicrochartVisible.\n\t */\n\tshouldMicroChartRender: function (\n\t\tsChartType: string,\n\t\toDataPoint: any,\n\t\toDataPointValue: any,\n\t\toChartAnnotations: any,\n\t\toDatapointMaxValue: any\n\t) {\n\t\tconst aChartTypes = [\"Area\", \"Column\", \"Comparison\"],\n\t\t\tsDataPointValue = oDataPoint && oDataPoint.Value,\n\t\t\tsHiddenPath = oDataPointValue && oDataPointValue[\"com.sap.vocabularies.UI.v1.Hidden\"],\n\t\t\tsChartAnnotationDimension = oChartAnnotations && oChartAnnotations.Dimensions && oChartAnnotations.Dimensions[0],\n\t\t\toFinalDataPointValue = aChartTypes.indexOf(sChartType) > -1 ? sDataPointValue && sChartAnnotationDimension : sDataPointValue; // only for three charts in array\n\t\tif (sChartType === \"Harvey\") {\n\t\t\tconst oDataPointMaximumValue = oDataPoint && oDataPoint.MaximumValue,\n\t\t\t\tsMaxValueHiddenPath = oDatapointMaxValue && oDatapointMaxValue[\"com.sap.vocabularies.UI.v1.Hidden\"];\n\t\t\treturn (\n\t\t\t\tsDataPointValue &&\n\t\t\t\toDataPointMaximumValue &&\n\t\t\t\tMicroChartHelper.isNotAlwaysHidden(\"Bullet\", sDataPointValue, oDataPointMaximumValue, sHiddenPath, sMaxValueHiddenPath)\n\t\t\t);\n\t\t}\n\t\treturn oFinalDataPointValue && MicroChartHelper.isNotAlwaysHidden(sChartType, sDataPointValue, undefined, sHiddenPath);\n\t},\n\t/**\n\t * This function is used to get dataPointQualifiers for Column, Comparison and StackedBar micro charts.\n\t *\n\t * @param sUiName\n\t * @returns Result string or undefined.\n\t */\n\tgetdataPointQualifiersForMicroChart: function (sUiName: string) {\n\t\tif (sUiName.indexOf(\"com.sap.vocabularies.UI.v1.DataPoint\") === -1) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (sUiName.indexOf(\"#\") > -1) {\n\t\t\treturn sUiName.split(\"#\")[1];\n\t\t}\n\t\treturn \"\";\n\t},\n\t/**\n\t * This function is used to get colorPalette for comparison and HarveyBall Microcharts.\n\t *\n\t * @param oDataPoint Data point object.\n\t * @returns Result string for colorPalette or undefined.\n\t */\n\tgetcolorPaletteForMicroChart: function (oDataPoint: any) {\n\t\treturn oDataPoint.Criticality\n\t\t\t? undefined\n\t\t\t: \"sapUiChartPaletteQualitativeHue1, sapUiChartPaletteQualitativeHue2, sapUiChartPaletteQualitativeHue3,          sapUiChartPaletteQualitativeHue4, sapUiChartPaletteQualitativeHue5, sapUiChartPaletteQualitativeHue6, sapUiChartPaletteQualitativeHue7,          sapUiChartPaletteQualitativeHue8, sapUiChartPaletteQualitativeHue9, sapUiChartPaletteQualitativeHue10, sapUiChartPaletteQualitativeHue11\";\n\t},\n\t/**\n\t * This function is used to get MeasureScale for Area, Column and Line micro charts.\n\t *\n\t * @param oDataPoint Data point object.\n\t * @returns Datapoint valueformat or datapoint scale or 1.\n\t */\n\tgetMeasureScaleForMicroChart: function (oDataPoint: any) {\n\t\tif (oDataPoint.ValueFormat && oDataPoint.ValueFormat.NumberOfFractionalDigits) {\n\t\t\treturn oDataPoint.ValueFormat.NumberOfFractionalDigits;\n\t\t}\n\t\tif (oDataPoint.Value && oDataPoint.Value[\"$Path\"] && oDataPoint.Value[\"$Path\"][\"$Scale\"]) {\n\t\t\treturn oDataPoint.Value[\"$Path\"][\"$Scale\"];\n\t\t}\n\t\treturn 1;\n\t},\n\t/**\n\t * This function is to return the binding expression of microchart.\n\t *\n\t * @param sChartType The type of micro chart (Bullet, Radial etc.)\n\t * @param oMeasure Measure value for micro chart.\n\t * @param oThis `this`/current model for micro chart.\n\t * @param oCollection Collection object.\n\t * @param sUiName The @sapui.name in collection model is not accessible here from model hence need to pass it.\n\t * @param oDataPoint Data point object used in case of Harvey Ball micro chart\n\t * @returns The binding expression for micro chart.\n\t * @private\n\t */\n\tgetBindingExpressionForMicrochart: function (\n\t\tsChartType: string,\n\t\toMeasure: any,\n\t\toThis: any,\n\t\toCollection: any,\n\t\tsUiName: string,\n\t\toDataPoint: any\n\t) {\n\t\tconst bCondition = oCollection[\"$isCollection\"] || oCollection[\"$kind\"] === \"EntitySet\";\n\t\tconst sPath = bCondition ? \"\" : sUiName;\n\t\tlet sCurrencyOrUnit = MicroChartHelper.getUOMPathForMicrochart(oMeasure);\n\t\tlet sDataPointCriticallity = \"\";\n\t\tswitch (sChartType) {\n\t\t\tcase \"Radial\":\n\t\t\t\tsCurrencyOrUnit = \"\";\n\t\t\t\tbreak;\n\t\t\tcase \"Harvey\":\n\t\t\t\tsDataPointCriticallity = oDataPoint.Criticality ? oDataPoint.Criticality[\"$Path\"] : \"\";\n\t\t\t\tbreak;\n\t\t}\n\t\tconst sFunctionValue = MicroChartHelper.getSelectParameters(oThis.batchGroupId, \"\", sDataPointCriticallity, sCurrencyOrUnit),\n\t\t\tsBinding = `{ path: '${sPath}'` + `, parameters : {${sFunctionValue}} }`;\n\t\treturn sBinding;\n\t},\n\t/**\n\t * This function is to return the UOMPath expression of the micro chart.\n\t *\n\t * @param bShowOnlyChart Whether only chart should be rendered or not.\n\t * @param oMeasure Measures for the micro chart.\n\t * @returns UOMPath String for the micro chart.\n\t * @private\n\t */\n\tgetUOMPathForMicrochart: function (bShowOnlyChart: boolean, oMeasure?: any) {\n\t\tlet bResult;\n\t\tif (oMeasure && !bShowOnlyChart) {\n\t\t\tbResult =\n\t\t\t\t(oMeasure[\"@Org.OData.Measures.V1.ISOCurrency\"] && oMeasure[\"@Org.OData.Measures.V1.ISOCurrency\"].$Path) ||\n\t\t\t\t(oMeasure[\"@Org.OData.Measures.V1.Unit\"] && oMeasure[\"@Org.OData.Measures.V1.Unit\"].$Path);\n\t\t}\n\t\treturn bResult ? bResult : undefined;\n\t},\n\n\t/**\n\t * This function is to return the aggregation binding expression of micro chart.\n\t *\n\t * @param sAggregationType Aggregation type of chart (eg:- Point for AreaMicrochart)\n\t * @param oCollection Collection object.\n\t * @param oDataPoint Data point info for micro chart.\n\t * @param sUiName The @sapui.name in collection model is not accessible here from model hence need to pass it.\n\t * @param oDimension Micro chart Dimensions.\n\t * @param oMeasure Measure value for micro chart.\n\t * @param sMeasureOrDimensionBar The measure or dimension passed specifically in case of bar chart\n\t * @returns Aggregation binding expression for micro chart.\n\t * @private\n\t */\n\tgetAggregationForMicrochart: function (\n\t\tsAggregationType: string,\n\t\toCollection: any,\n\t\toDataPoint: any,\n\t\tsUiName: string,\n\t\toDimension: any,\n\t\toMeasure: any,\n\t\tsMeasureOrDimensionBar: string\n\t) {\n\t\tlet sPath = oCollection[\"$kind\"] === \"EntitySet\" ? \"/\" : \"\";\n\t\tsPath = sPath + sUiName;\n\t\tconst sGroupId = \"\";\n\t\tlet sDataPointCriticallityCalc = \"\";\n\t\tlet sDataPointCriticallity = oDataPoint.Criticality ? oDataPoint.Criticality[\"$Path\"] : \"\";\n\t\tconst sCurrencyOrUnit = MicroChartHelper.getUOMPathForMicrochart(false, oMeasure);\n\t\tlet sTargetValuePath = \"\";\n\t\tlet sDimensionPropertyPath = \"\";\n\t\tif (oDimension && oDimension.$PropertyPath && oDimension.$PropertyPath[\"@com.sap.vocabularies.Common.v1.Text\"]) {\n\t\t\tsDimensionPropertyPath = oDimension.$PropertyPath[\"@com.sap.vocabularies.Common.v1.Text\"].$Path;\n\t\t} else {\n\t\t\tsDimensionPropertyPath = oDimension.$PropertyPath;\n\t\t}\n\t\tswitch (sAggregationType) {\n\t\t\tcase \"Points\":\n\t\t\t\tsDataPointCriticallityCalc = oDataPoint && oDataPoint.CriticalityCalculation;\n\t\t\t\tsTargetValuePath = oDataPoint && oDataPoint.TargetValue && oDataPoint.TargetValue[\"$Path\"];\n\t\t\t\tsDataPointCriticallity = \"\";\n\t\t\t\tbreak;\n\t\t\tcase \"Columns\":\n\t\t\t\tsDataPointCriticallityCalc = oDataPoint && oDataPoint.CriticalityCalculation;\n\t\t\t\tbreak;\n\t\t\tcase \"LinePoints\":\n\t\t\t\tsDataPointCriticallity = \"\";\n\t\t\t\tbreak;\n\t\t\tcase \"Bars\":\n\t\t\t\tsDimensionPropertyPath = \"\";\n\t\t\t\tbreak;\n\t\t}\n\t\tconst sFunctionValue = MicroChartHelper.getSelectParameters(\n\t\t\t\tsGroupId,\n\t\t\t\tsDataPointCriticallityCalc,\n\t\t\t\tsDataPointCriticallity,\n\t\t\t\tsCurrencyOrUnit,\n\t\t\t\tsTargetValuePath,\n\t\t\t\tsDimensionPropertyPath,\n\t\t\t\tsMeasureOrDimensionBar\n\t\t\t),\n\t\t\tsAggregationExpression = `{path:'${sPath}'` + `, parameters : {${sFunctionValue}} }`;\n\t\treturn sAggregationExpression;\n\t},\n\tgetCurrencyOrUnit: function (oMeasure: any) {\n\t\tif (oMeasure[\"@Org.OData.Measures.V1.ISOCurrency\"]) {\n\t\t\treturn oMeasure[\"@Org.OData.Measures.V1.ISOCurrency\"].$Path || oMeasure[\"@Org.OData.Measures.V1.ISOCurrency\"];\n\t\t} else if (oMeasure[\"@Org.OData.Measures.V1.Unit\"]) {\n\t\t\treturn oMeasure[\"@Org.OData.Measures.V1.Unit\"].$Path || oMeasure[\"@Org.OData.Measures.V1.Unit\"];\n\t\t} else {\n\t\t\treturn \"\";\n\t\t}\n\t},\n\n\tgetCalendarPattern: function (oAnnotations: any) {\n\t\treturn (\n\t\t\t(oAnnotations[\"@com.sap.vocabularies.Common.v1.IsCalendarYear\"] && \"yyyy\") ||\n\t\t\t(oAnnotations[\"@com.sap.vocabularies.Common.v1.IsCalendarQuarter\"] && \"Q\") ||\n\t\t\t(oAnnotations[\"@com.sap.vocabularies.Common.v1.IsCalendarMonth\"] && \"MM\") ||\n\t\t\t(oAnnotations[\"@com.sap.vocabularies.Common.v1.IsCalendarWeek\"] && \"ww\") ||\n\t\t\t(oAnnotations[\"@com.sap.vocabularies.Common.v1.IsCalendarDate\"] && \"yyyyMMdd\") ||\n\t\t\t(oAnnotations[\"@com.sap.vocabularies.Common.v1.IsCalendarYearMonth\"] && \"yyyyMM\")\n\t\t);\n\t},\n\n\tformatDimension: function (sDate: any, sPattern: any, sPropertyPath: any) {\n\t\tconst fValue = DateFormat.getDateInstance({ pattern: sPattern }).parse(sDate, false, true);\n\t\tif (fValue instanceof Date) {\n\t\t\treturn parseFloat(fValue.getTime() as any);\n\t\t} else {\n\t\t\tLog.warning(\"Date value could not be determined for \" + sPropertyPath);\n\t\t}\n\t\treturn 0;\n\t},\n\n\tformatDateDimension: function (sDate: any) {\n\t\treturn MicroChartHelper.formatDimension(sDate, \"yyyy-MM-dd\", \"\");\n\t},\n\n\tformatStringDimension: function (sValue: any, sPattern: any, sPropertyPath: any) {\n\t\tconst sMatchedValue = sValue && sValue.toString().match(calendarPatternMap[sPattern]);\n\t\tif (sMatchedValue && sMatchedValue.length) {\n\t\t\treturn MicroChartHelper.formatDimension(sMatchedValue[0], sPattern, sPropertyPath);\n\t\t} else {\n\t\t\tLog.warning(\"Pattern not supported for \" + sPropertyPath);\n\t\t}\n\t\treturn 0;\n\t},\n\n\tgetX: function (sPropertyPath: any, sType: any, oAnnotations: any) {\n\t\tif (sType === \"Edm.Date\") {\n\t\t\t//TODO: Check why formatter is not getting called\n\t\t\treturn (\n\t\t\t\t\"{parts: [{path: '\" +\n\t\t\t\tsPropertyPath +\n\t\t\t\t\"', type: 'sap.ui.model.odata.type.String'}, {value: '\" +\n\t\t\t\tsPropertyPath +\n\t\t\t\t\"'}], formatter: 'MICROCHARTR.formatStringDimension'}\"\n\t\t\t);\n\t\t} else if (sType === \"Edm.String\") {\n\t\t\tconst sPattern = oAnnotations && MicroChartHelper.getCalendarPattern(oAnnotations);\n\t\t\tif (sPattern) {\n\t\t\t\treturn (\n\t\t\t\t\t\"{parts: [{path: '\" +\n\t\t\t\t\tsPropertyPath +\n\t\t\t\t\t\"', type: 'sap.ui.model.odata.type.String'}, {value: '\" +\n\t\t\t\t\tsPattern +\n\t\t\t\t\t\"'}, {value: '\" +\n\t\t\t\t\tsPropertyPath +\n\t\t\t\t\t\"'}], formatter: 'MICROCHARTR.formatStringDimension'}\"\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n};\n\nexport default MicroChartHelper;\n"],"mappings":"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"}},{"offset":{"line":20239,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","CommonHelper","mobilelibrary","DateFormat","ValueColor","calendarPatternMap","yyyy","RegExp","Q","MM","ww","yyyyMMdd","yyyyMM","MicroChartHelper","getThresholdColor","sValue","iContext","oContext","context","sPath","getPath","sThresholdColor","Neutral","indexOf","Error","Critical","getMeasurePropertyPaths","oChartAnnotations","oEntityTypeAnnotations","sChartType","aPropertyPath","warning","undefined","Measures","forEach","sMeasure","iMeasure","iMeasureAttribute","getMeasureAttributeIndex","oMeasureAttribute","MeasureAttributes","oDataPoint","DataPoint","$AnnotationPath","Value","$Path","push","join","getHiddenPathExpression","_len","arguments","length","args","Array","_key","hiddenPaths","call","hiddenProperty","isNotAlwaysHidden","chartType","sMaxValue","sValueHidden","sMaxValueHidden","this","logError","error","formatDecimal","oProperty","iFractionDigits","aConstraints","aFormatOptions","sScale","$Scale","sBinding","$Nullable","$Precision","getSelectParameters","_len2","_key2","oCC","aParameters","k","$EnumMember","i","getDataPointQualifiersForMeasures","aQualifers","aMeasureAttributes","fnAddDataPointQualifier","oMeasure","$PropertyPath","sQualifer","Measure","sAnnotationPath","split","logWarning","sChart","oError","sKey","getDisplayValueForMicroChart","oPathText","oValueTextPath","oValueDataPointPath","sValueFormat","ValueFormat","NumberOfFractionalDigits","sResult","shouldMicroChartRender","oDataPointValue","oDatapointMaxValue","aChartTypes","sDataPointValue","sHiddenPath","sChartAnnotationDimension","Dimensions","oFinalDataPointValue","oDataPointMaximumValue","MaximumValue","sMaxValueHiddenPath","getdataPointQualifiersForMicroChart","sUiName","getcolorPaletteForMicroChart","Criticality","getMeasureScaleForMicroChart","getBindingExpressionForMicrochart","oThis","oCollection","bCondition","sCurrencyOrUnit","getUOMPathForMicrochart","sDataPointCriticallity","sFunctionValue","batchGroupId","bShowOnlyChart","bResult","getAggregationForMicrochart","sAggregationType","oDimension","sMeasureOrDimensionBar","sGroupId","sDataPointCriticallityCalc","sTargetValuePath","sDimensionPropertyPath","CriticalityCalculation","TargetValue","sAggregationExpression","getCurrencyOrUnit","getCalendarPattern","oAnnotations","formatDimension","sDate","sPattern","sPropertyPath","fValue","getDateInstance","pattern","parse","Date","parseFloat","getTime","formatDateDimension","formatStringDimension","sMatchedValue","toString","match","getX","sType"],"sources":["MicroChartHelper-dbg.js"],"mappings":"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","sourceRoot":"microchart"}},{"offset":{"line":20244,"column":0},"map":{"version":3,"names":["MultiValueField","defineBuildingBlock","name","namespace","blockAttribute","type","defaultValue","required","$kind","validate","formatOptionsInput","displayMode","includes","Error","_getMultiInputSettings","propertyDataModelObjectPath","formatOptions","collectionPath","itemDataModelObjectPath","_getPathStructure","collectionBindingDisplay","collectionBindingEdit","propertyDefinition","targetObject","$target","commonText","annotations","Common","Text","relativeLocation","getRelativePaths","textExpression","compileExpression","getExpressionFromAnnotation","getValueBinding","text","key","dataModelObjectPath","firstCollectionPath","currentEntitySet","contextLocation","targetEntitySet","startingEntitySet","navigatedPaths","contextNavsForItem","navigationProperties","navProp","some","contextNavProp","fullyQualifiedName","push","navigationPropertyBinding","hasOwnProperty","_type","isCollection","join","Object","assign","props","dataModelPath","MetaModelConverter","getInvolvedDataModelObjects","metaPath","contextPath","dataFieldConverted","convertMetaModelContext","extraPath","Value","path","visible","getVisibleExpression","length","enhanceDataModelPath","insertable","isPathInsertable","deleteNavigationRestriction","isPathDeletable","ignoreTargetCollection","authorizeUnresolvable","deletePath","deletable","ifElse","or","not","isConstant","editMode","displayOnly","and","UI","IsEditable","constant","getDisplayMode","multiInputSettings","collection","getTemplate","internalDataModelPath","internalDataPointConverted","enhancedDataModelPath","id","idPrefix","ID","generate","undefined","valueHelpProperty","FieldHelper","valueHelpPropertyContext","getModel","createBindingContext","fieldHelp","ValueHelpTemplating","generateID","vhIdPrefix","PropertyFormatters","getRelativePropertyPath","context","getContextRelativeTargetObjectPath","label","computeLabelText","xml","ariaLabelledBy","showEmptyIndicator","BuildingBlockBase"],"sourceRoot":"multiValueField","sources":["MultiValueField.block.ts"],"sourcesContent":["import type { Property, PropertyAnnotationValue } from \"@sap-ux/vocabularies-types\";\nimport { blockAttribute, BuildingBlockBase, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockRuntime\";\nimport { UI } from \"sap/fe/core/converters/helpers/BindingHelper\";\nimport * as MetaModelConverter from \"sap/fe/core/converters/MetaModelConverter\";\nimport type { BindingToolkitExpression, CompiledBindingToolkitExpression } from \"sap/fe/core/helpers/BindingToolkit\";\nimport {\n\tand,\n\tcompileExpression,\n\tconstant,\n\tgetExpressionFromAnnotation,\n\tifElse,\n\tisConstant,\n\tnot,\n\tor\n} from \"sap/fe/core/helpers/BindingToolkit\";\nimport type { PropertiesOf } from \"sap/fe/core/helpers/ClassSupport\";\nimport * as ID from \"sap/fe/core/helpers/StableIdHelper\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport {\n\tenhanceDataModelPath,\n\tgetContextRelativeTargetObjectPath,\n\tgetRelativePaths,\n\tisPathDeletable,\n\tisPathInsertable\n} from \"sap/fe/core/templating/DataModelPathHelper\";\nimport * as PropertyFormatters from \"sap/fe/core/templating/PropertyFormatters\";\nimport type { DisplayMode, MetaModelContext } from \"sap/fe/core/templating/UIFormatters\";\nimport { getDisplayMode } from \"sap/fe/core/templating/UIFormatters\";\nimport FieldHelper from \"sap/fe/macros/field/FieldHelper\";\nimport { getValueBinding, getVisibleExpression } from \"sap/fe/macros/field/FieldTemplating\";\nimport * as ValueHelpTemplating from \"sap/fe/macros/internal/valuehelp/ValueHelpTemplating\";\nimport type EditMode from \"sap/ui/mdc/enum/EditMode\";\nimport type { V4Context } from \"types/extension_types\";\n\ntype MultiInputSettings = {\n\ttext: BindingToolkitExpression<string> | CompiledBindingToolkitExpression;\n\tcollectionBindingDisplay: CompiledBindingToolkitExpression;\n\tcollectionBindingEdit: CompiledBindingToolkitExpression;\n\tkey: BindingToolkitExpression<string> | CompiledBindingToolkitExpression;\n};\n\ntype MultiValueFieldFormatOptions = Partial<{\n\tshowEmptyIndicator?: boolean;\n\tdisplayOnly?: boolean | string;\n\tdisplayMode?: string;\n\tmeasureDisplayMode?: string;\n\tisAnalytics?: boolean;\n}>;\n\ntype MultiValueFieldPathStructure = {\n\tcollectionPath: string;\n\titemDataModelObjectPath: DataModelObjectPath;\n};\n\n/**\n * Building block for creating a MultiValueField based on the metadata provided by OData V4.\n * <br>\n * Usually, a DataField annotation is expected\n *\n * Usage example:\n * <pre>\n * <internalMacro:MultiValueField\n *   idPrefix=\"SomePrefix\"\n *   contextPath=\"{entitySet>}\"\n *   metaPath=\"{dataField>}\"\n * />\n * </pre>\n *\n * @hideconstructor\n * @private\n * @experimental\n * @since 1.94.0\n */\n@defineBuildingBlock({\n\tname: \"MultiValueField\",\n\tnamespace: \"sap.fe.macros.internal\"\n})\nexport default class MultiValueField extends BuildingBlockBase {\n\t/**\n\t * Prefix added to the generated ID of the field\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic idPrefix?: string;\n\n\t/**\n\t * Prefix added to the generated ID of the value help used for the field\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tdefaultValue: \"FieldValueHelp\"\n\t})\n\tpublic vhIdPrefix!: string;\n\n\t/**\n\t * Metadata path to the MultiValueField.\n\t * This property is usually a metadataContext pointing to a DataField having a Value that uses a 1:n navigation\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true,\n\t\t$kind: [\"Property\"]\n\t})\n\tpublic metaPath!: V4Context;\n\n\t/**\n\t * Mandatory context to the MultiValueField\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true,\n\t\t$kind: [\"EntitySet\", \"NavigationProperty\", \"EntityType\", \"Singleton\"]\n\t})\n\tpublic contextPath!: V4Context;\n\n\t/**\n\t * Property added to associate the label with the MultiValueField\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic ariaLabelledBy?: string;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tprivate key?: BindingToolkitExpression<string> | CompiledBindingToolkitExpression;\n\n\tprivate text?: BindingToolkitExpression<string> | CompiledBindingToolkitExpression;\n\n\t/**\n\t * Edit Mode of the field.\n\t * If the editMode is undefined then we compute it based on the metadata\n\t * Otherwise we use the value provided here.\n\t */\n\tprivate editMode!: EditMode | CompiledBindingToolkitExpression;\n\n\t/**\n\t * The display mode added to the collection field\n\t */\n\tprivate displayMode!: DisplayMode;\n\n\t/**\n\t * The CompiledBindingToolkitExpression that is calculated internally\n\t */\n\tprivate collection!: CompiledBindingToolkitExpression;\n\n\t/**\n\t * The format options\n\t */\n\t@blockAttribute({\n\t\ttype: \"object\",\n\t\tvalidate: function (formatOptionsInput: MultiValueFieldFormatOptions) {\n\t\t\tif (\n\t\t\t\tformatOptionsInput.displayMode &&\n\t\t\t\t![\"Value\", \"Description\", \"ValueDescription\", \"DescriptionValue\"].includes(formatOptionsInput.displayMode)\n\t\t\t) {\n\t\t\t\tthrow new Error(`Allowed value ${formatOptionsInput.displayMode} for displayMode does not match`);\n\t\t\t}\n\t\t\treturn formatOptionsInput;\n\t\t}\n\t})\n\tpublic formatOptions!: MultiValueFieldFormatOptions;\n\n\tprivate visible: CompiledBindingToolkitExpression;\n\n\t/**\n\t * Function to get the correct settings for the multi input.\n\t *\n\t * @param propertyDataModelObjectPath The corresponding datamodelobjectpath.\n\t * @param formatOptions The format options to calculate the result\n\t * @returns MultiInputSettings\n\t */\n\tprivate static _getMultiInputSettings(\n\t\tpropertyDataModelObjectPath: DataModelObjectPath,\n\t\tformatOptions: MultiValueFieldFormatOptions\n\t): MultiInputSettings {\n\t\tconst { collectionPath, itemDataModelObjectPath } = MultiValueField._getPathStructure(propertyDataModelObjectPath);\n\t\tconst collectionBindingDisplay = `{path:'${collectionPath}', templateShareable: false}`;\n\t\tconst collectionBindingEdit = `{path:'${collectionPath}', parameters: {$$ownRequest : true}, templateShareable: false}`;\n\n\t\tconst propertyDefinition =\n\t\t\tpropertyDataModelObjectPath.targetObject.type === \"PropertyPath\"\n\t\t\t\t? (propertyDataModelObjectPath.targetObject.$target as Property)\n\t\t\t\t: (propertyDataModelObjectPath.targetObject as Property);\n\t\tconst commonText = propertyDefinition.annotations.Common?.Text;\n\t\tconst relativeLocation = getRelativePaths(propertyDataModelObjectPath);\n\n\t\tconst textExpression = commonText\n\t\t\t? compileExpression(\n\t\t\t\t\tgetExpressionFromAnnotation(\n\t\t\t\t\t\tcommonText as unknown as PropertyAnnotationValue<Property>,\n\t\t\t\t\t\trelativeLocation\n\t\t\t\t\t) as BindingToolkitExpression<string>\n\t\t\t  )\n\t\t\t: getValueBinding(itemDataModelObjectPath, formatOptions, true);\n\t\treturn {\n\t\t\ttext: textExpression,\n\t\t\tcollectionBindingDisplay: collectionBindingDisplay,\n\t\t\tcollectionBindingEdit: collectionBindingEdit,\n\t\t\tkey: getValueBinding(itemDataModelObjectPath, formatOptions, true)\n\t\t};\n\t}\n\n\t// Process the dataModelPath to find the collection and the relative DataModelPath for the item.\n\tprivate static _getPathStructure(dataModelObjectPath: DataModelObjectPath): MultiValueFieldPathStructure {\n\t\tlet firstCollectionPath = \"\";\n\t\tconst currentEntitySet = dataModelObjectPath.contextLocation?.targetEntitySet\n\t\t\t? dataModelObjectPath.contextLocation.targetEntitySet\n\t\t\t: dataModelObjectPath.startingEntitySet;\n\t\tconst navigatedPaths: string[] = [];\n\t\tconst contextNavsForItem = dataModelObjectPath.contextLocation?.navigationProperties || [];\n\t\tfor (const navProp of dataModelObjectPath.navigationProperties) {\n\t\t\tif (\n\t\t\t\t!dataModelObjectPath.contextLocation ||\n\t\t\t\t!dataModelObjectPath.contextLocation.navigationProperties.some(\n\t\t\t\t\t(contextNavProp) => contextNavProp.fullyQualifiedName === navProp.fullyQualifiedName\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\t// in case of relative entitySetPath we don't consider navigationPath that are already in the context\n\t\t\t\tnavigatedPaths.push(navProp.name);\n\t\t\t\tcontextNavsForItem.push(navProp);\n\t\t\t}\n\t\t\tif (currentEntitySet.navigationPropertyBinding.hasOwnProperty(navProp.name)) {\n\t\t\t\tif (navProp._type === \"NavigationProperty\" && navProp.isCollection) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfirstCollectionPath = `${navigatedPaths.join(\"/\")}`;\n\t\tconst itemDataModelObjectPath = Object.assign({}, dataModelObjectPath);\n\t\tif (itemDataModelObjectPath.contextLocation) {\n\t\t\titemDataModelObjectPath.contextLocation.navigationProperties = contextNavsForItem;\n\t\t}\n\n\t\treturn { collectionPath: firstCollectionPath, itemDataModelObjectPath: itemDataModelObjectPath };\n\t}\n\n\tconstructor(props: PropertiesOf<MultiValueField>) {\n\t\tsuper(props);\n\t\tlet dataModelPath = MetaModelConverter.getInvolvedDataModelObjects(this.metaPath, props.contextPath);\n\t\tconst dataFieldConverted = MetaModelConverter.convertMetaModelContext(this.metaPath);\n\t\tconst extraPath = dataFieldConverted.Value.path;\n\n\t\tthis.visible = getVisibleExpression(dataModelPath, props.formatOptions);\n\t\tif (extraPath && extraPath.length > 0) {\n\t\t\tdataModelPath = enhanceDataModelPath(dataModelPath, extraPath);\n\t\t}\n\t\tconst insertable = isPathInsertable(dataModelPath);\n\t\tconst deleteNavigationRestriction = isPathDeletable(dataModelPath, {\n\t\t\tignoreTargetCollection: true,\n\t\t\tauthorizeUnresolvable: true\n\t\t});\n\t\tconst deletePath = isPathDeletable(dataModelPath);\n\t\t// deletable:\n\t\t//\t\tif restrictions come from Navigation we apply it\n\t\t//\t\totherwise we apply restrictions defined on target collection only if it's a constant\n\t\t//      otherwise it's true!\n\t\tconst deletable = ifElse(\n\t\t\tdeleteNavigationRestriction._type === \"Unresolvable\",\n\t\t\tor(not(isConstant(deletePath)), deletePath),\n\t\t\tdeletePath\n\t\t);\n\t\tthis.editMode =\n\t\t\tthis.formatOptions.displayOnly === \"true\"\n\t\t\t\t? \"Display\"\n\t\t\t\t: compileExpression(ifElse(and(insertable, deletable, UI.IsEditable), constant(\"Editable\"), constant(\"Display\")));\n\t\tthis.displayMode = getDisplayMode(dataModelPath);\n\n\t\tconst multiInputSettings = MultiValueField._getMultiInputSettings(dataModelPath, this.formatOptions);\n\t\tthis.text = multiInputSettings.text;\n\t\tthis.collection =\n\t\t\tthis.editMode === \"Display\" ? multiInputSettings.collectionBindingDisplay : multiInputSettings.collectionBindingEdit;\n\t\tthis.key = multiInputSettings.key;\n\t}\n\n\t/**\n\t * The building block template function.\n\t *\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetTemplate() {\n\t\t//prepare settings for further processing\n\t\tconst internalDataModelPath = MetaModelConverter.getInvolvedDataModelObjects(this.metaPath, this.contextPath);\n\t\tconst internalDataPointConverted = MetaModelConverter.convertMetaModelContext(this.metaPath);\n\t\tconst enhancedDataModelPath = enhanceDataModelPath(internalDataModelPath, internalDataPointConverted.Value.path);\n\t\t//calculate the id settings for this block\n\t\tconst id = this.idPrefix ? ID.generate([this.idPrefix, \"MultiValueField\"]) : undefined;\n\t\t//create a new binding context for the value help\n\t\tconst valueHelpProperty = FieldHelper.valueHelpProperty(this.metaPath);\n\t\tconst valueHelpPropertyContext = this.metaPath.getModel().createBindingContext(valueHelpProperty, this.metaPath);\n\t\t//calculate fieldHelp\n\t\tconst fieldHelp = ValueHelpTemplating.generateID(\n\t\t\tundefined,\n\t\t\tthis.vhIdPrefix,\n\t\t\tPropertyFormatters.getRelativePropertyPath(valueHelpPropertyContext as unknown as MetaModelContext, {\n\t\t\t\tcontext: this.contextPath\n\t\t\t}),\n\t\t\tgetContextRelativeTargetObjectPath(enhancedDataModelPath)!\n\t\t);\n\t\t//compute the correct label\n\t\tconst label = FieldHelper.computeLabelText(internalDataModelPath.targetObject.Value, { context: this.metaPath });\n\n\t\treturn xml`\n\t\t<mdc:MultiValueField\n\t\t\t\txmlns:mdc=\"sap.ui.mdc\"\n\t\t\t\tdelegate=\"{name: 'sap/fe/macros/multiValueField/MultiValueFieldDelegate'}\"\n\t\t\t\tid=\"${id}\"\n\t\t\t\titems=\"${this.collection}\"\n\t\t\t\tdisplay=\"${this.displayMode}\"\n\t\t\t\twidth=\"100%\"\n\t\t\t\teditMode=\"${this.editMode}\"\n\t\t\t\tfieldHelp=\"${fieldHelp}\"\n\t\t\t\tariaLabelledBy = \"${this.ariaLabelledBy}\"\n\t\t\t\tshowEmptyIndicator = \"${this.formatOptions.showEmptyIndicator}\"\n\t\t\t\tlabel = \"${label}\"\n\t\t>\n\t\t<mdcField:MultiValueFieldItem xmlns:mdcField=\"sap.ui.mdc.field\" key=\"${this.key}\" description=\"${this.text}\" />\n\t\t</mdc:MultiValueField>\n\t\t\t`;\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":20526,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlock","BuildingBlockRuntime","BindingHelper","MetaModelConverter","BindingToolkit","ID","DataModelPathHelper","PropertyFormatters","UIFormatters","FieldHelper","FieldTemplating","ValueHelpTemplating","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_exports","getVisibleExpression","getValueBinding","getDisplayMode","isPathInsertable","isPathDeletable","getRelativePaths","getContextRelativeTargetObjectPath","enhanceDataModelPath","or","not","isConstant","ifElse","getExpressionFromAnnotation","constant","compileExpression","and","UI","xml","defineBuildingBlock","BuildingBlockBase","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","MultiValueField","name","namespace","type","defaultValue","required","$kind","validate","formatOptionsInput","displayMode","includes","_BuildingBlockBase","_getMultiInputSettings","propertyDataModelObjectPath","formatOptions","_propertyDefinition$a","collectionPath","itemDataModelObjectPath","_getPathStructure","collectionBindingDisplay","collectionBindingEdit","propertyDefinition","targetObject","$target","commonText","annotations","Common","Text","relativeLocation","textExpression","text","dataModelObjectPath","_dataModelObjectPath$","_dataModelObjectPath$2","firstCollectionPath","currentEntitySet","contextLocation","targetEntitySet","startingEntitySet","navigatedPaths","contextNavsForItem","navigationProperties","navProp","some","contextNavProp","fullyQualifiedName","push","navigationPropertyBinding","hasOwnProperty","_type","isCollection","join","assign","props","_this","this","dataModelPath","getInvolvedDataModelObjects","metaPath","contextPath","dataFieldConverted","convertMetaModelContext","extraPath","Value","path","visible","length","insertable","deleteNavigationRestriction","ignoreTargetCollection","authorizeUnresolvable","deletePath","deletable","editMode","displayOnly","IsEditable","multiInputSettings","collection","_proto","getTemplate","internalDataModelPath","internalDataPointConverted","enhancedDataModelPath","id","idPrefix","generate","valueHelpProperty","valueHelpPropertyContext","getModel","createBindingContext","fieldHelp","generateID","vhIdPrefix","getRelativePropertyPath","label","computeLabelText","ariaLabelledBy","showEmptyIndicator"],"sources":["MultiValueField.block-dbg.js"],"mappings":"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","sourceRoot":"multiValueField"}},{"offset":{"line":20547,"column":0},"map":{"version":3,"names":["MultiValueFieldDelegate","Object","assign","MdcMultiValueFieldDelegate","updateItems","oPayload","aConditions","oControl","oListBinding","getBinding","isA","oBindingInfo","getBindingInfo","oTemplate","template","oKeyBindingInfo","oDescriptionBindingInfo","sKeyPath","parts","path","sDescriptionPath","aContexts","getCurrentContexts","aDataToAdd","oController","CommonUtils","getTargetView","getController","aNewKeys","map","oCondition","values","aOldKeys","oContext","getProperty","aModificationPromises","i","length","oDeleteContext","includes","push","editFlow","deleteMultipleDocuments","controlId","getId","noDialog","forEach","oItem","indexOf","_editFlow","createMultipleDocuments","undefined","Promise","all"],"sourceRoot":"multiValueField","sources":["MultiValueFieldDelegate.ts"],"sourcesContent":["import CommonUtils from \"sap/fe/core/CommonUtils\";\nimport PageController from \"sap/fe/core/PageController\";\nimport MdcMultiValueFieldDelegate from \"sap/ui/mdc/field/MultiValueFieldDelegate\";\nconst MultiValueFieldDelegate = Object.assign({}, MdcMultiValueFieldDelegate);\nMultiValueFieldDelegate.updateItems = function (oPayload: any, aConditions: any, oControl: any) {\n\tconst oListBinding = oControl.getBinding(\"items\");\n\tif (oListBinding.isA(\"sap.ui.model.odata.v4.ODataListBinding\")) {\n\t\tconst oBindingInfo = oControl.getBindingInfo(\"items\");\n\t\t// check if conditions are added, removed or changed\n\t\tconst oTemplate = oBindingInfo.template;\n\t\tconst oKeyBindingInfo = oTemplate.getBindingInfo(\"key\");\n\t\tconst oDescriptionBindingInfo = oTemplate.getBindingInfo(\"description\");\n\t\tconst sKeyPath = oKeyBindingInfo && oKeyBindingInfo.parts[0].path;\n\t\tconst sDescriptionPath =\n\t\t\toDescriptionBindingInfo &&\n\t\t\toDescriptionBindingInfo.parts &&\n\t\t\toDescriptionBindingInfo.parts[0] &&\n\t\t\toDescriptionBindingInfo.parts[0].path;\n\t\tconst aContexts = oListBinding.getCurrentContexts();\n\t\tconst aDataToAdd: any[] = [];\n\t\tconst oController = CommonUtils.getTargetView(oControl).getController() as PageController;\n\n\t\t// Contexts to delete\n\t\tconst aNewKeys = aConditions.map(function (oCondition: any) {\n\t\t\treturn oCondition.values[0];\n\t\t});\n\t\tconst aOldKeys = aContexts.map(function (oContext: any) {\n\t\t\treturn oContext.getProperty(sKeyPath);\n\t\t});\n\t\tconst aModificationPromises = [];\n\t\tfor (let i = 0; i < aContexts.length; i++) {\n\t\t\tconst oDeleteContext = aContexts[i];\n\t\t\tif (!aNewKeys.includes(oDeleteContext.getProperty(sKeyPath))) {\n\t\t\t\taModificationPromises.push(\n\t\t\t\t\toController.editFlow.deleteMultipleDocuments([oDeleteContext], { controlId: oControl.getId(), noDialog: true })\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\t// data to add\n\t\taConditions.forEach((oCondition: any) => {\n\t\t\tif (!aOldKeys.includes(oCondition.values[0])) {\n\t\t\t\tconst oItem: any = {};\n\t\t\t\tif (sKeyPath && sKeyPath.indexOf(\"/\") === -1) {\n\t\t\t\t\t// we do not manage to create on a sub entity of the 1:n navigation\n\t\t\t\t\toItem[sKeyPath] = oCondition.values[0];\n\n\t\t\t\t\tif (sDescriptionPath && sDescriptionPath.indexOf(\"/\") === -1 && sDescriptionPath !== sKeyPath) {\n\t\t\t\t\t\toItem[sDescriptionPath] = oCondition.values[1];\n\t\t\t\t\t}\n\t\t\t\t\taDataToAdd.push(oItem);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tif (aDataToAdd.length) {\n\t\t\taModificationPromises.push(oController._editFlow.createMultipleDocuments(oListBinding, aDataToAdd, true, false, undefined));\n\t\t}\n\t\treturn Promise.all(aModificationPromises);\n\t}\n};\n\nexport default MultiValueFieldDelegate;\n"],"mappings":"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"}},{"offset":{"line":20608,"column":0},"map":{"version":3,"names":["sap","ui","define","CommonUtils","MdcMultiValueFieldDelegate","MultiValueFieldDelegate","Object","assign","updateItems","oPayload","aConditions","oControl","oListBinding","getBinding","isA","oBindingInfo","getBindingInfo","oTemplate","template","oKeyBindingInfo","oDescriptionBindingInfo","sKeyPath","parts","path","sDescriptionPath","aContexts","getCurrentContexts","aDataToAdd","oController","getTargetView","getController","aNewKeys","map","oCondition","values","aOldKeys","oContext","getProperty","aModificationPromises","i","length","oDeleteContext","includes","push","editFlow","deleteMultipleDocuments","controlId","getId","noDialog","forEach","oItem","indexOf","_editFlow","createMultipleDocuments","undefined","Promise","all"],"sources":["MultiValueFieldDelegate-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,mEAAO,CAAC,0BAA2B,4CAA6C,SAAUC,EAAaC,GAC5G,aAEA,MAAMC,EAA0BC,OAAOC,OAAO,CAAC,EAAGH,GAClDC,EAAwBG,YAAc,SAAUC,EAAUC,EAAaC,GACrE,MAAMC,EAAeD,EAASE,WAAW,SACzC,GAAID,EAAaE,IAAI,0CAA2C,CAC9D,MAAMC,EAAeJ,EAASK,eAAe,SAE7C,MAAMC,EAAYF,EAAaG,SAC/B,MAAMC,EAAkBF,EAAUD,eAAe,OACjD,MAAMI,EAA0BH,EAAUD,eAAe,eACzD,MAAMK,EAAWF,GAAmBA,EAAgBG,MAAM,GAAGC,KAC7D,MAAMC,EAAmBJ,GAA2BA,EAAwBE,OAASF,EAAwBE,MAAM,IAAMF,EAAwBE,MAAM,GAAGC,KAC1J,MAAME,EAAYb,EAAac,qBAC/B,MAAMC,EAAa,GACnB,MAAMC,EAAczB,EAAY0B,cAAclB,GAAUmB,gBAGxD,MAAMC,EAAWrB,EAAYsB,IAAI,SAAUC,GACzC,OAAOA,EAAWC,OAAO,EAC3B,GACA,MAAMC,EAAWV,EAAUO,IAAI,SAAUI,GACvC,OAAOA,EAASC,YAAYhB,EAC9B,GACA,MAAMiB,EAAwB,GAC9B,IAAK,IAAIC,EAAI,EAAGA,EAAId,EAAUe,OAAQD,IAAK,CACzC,MAAME,EAAiBhB,EAAUc,GACjC,IAAKR,EAASW,SAASD,EAAeJ,YAAYhB,IAAY,CAC5DiB,EAAsBK,KAAKf,EAAYgB,SAASC,wBAAwB,CAACJ,GAAiB,CACxFK,UAAWnC,EAASoC,QACpBC,SAAU,OAEd,CACF,CAEAtC,EAAYuC,QAAQhB,IAClB,IAAKE,EAASO,SAAST,EAAWC,OAAO,IAAK,CAC5C,MAAMgB,EAAQ,CAAC,EACf,GAAI7B,GAAYA,EAAS8B,QAAQ,QAAU,EAAG,CAE5CD,EAAM7B,GAAYY,EAAWC,OAAO,GACpC,GAAIV,GAAoBA,EAAiB2B,QAAQ,QAAU,GAAK3B,IAAqBH,EAAU,CAC7F6B,EAAM1B,GAAoBS,EAAWC,OAAO,EAC9C,CACAP,EAAWgB,KAAKO,EAClB,CACF,IAEF,GAAIvB,EAAWa,OAAQ,CACrBF,EAAsBK,KAAKf,EAAYwB,UAAUC,wBAAwBzC,EAAce,EAAY,KAAM,MAAO2B,WAClH,CACA,OAAOC,QAAQC,IAAIlB,EACrB,CACF,EACA,OAAOjC,CACT,EAAG","sourceRoot":"multiValueField"}},{"offset":{"line":20613,"column":0},"map":{"version":3,"names":["Paginator","MacroMetadata","extend","name","namespace","publicNamespace","fragment","metadata","stereotype","properties","id","type","isPublic"],"sourceRoot":"paginator","sources":["Paginator.metadata.ts"],"sourcesContent":["import MacroMetadata from \"sap/fe/macros/MacroMetadata\";\n\n/**\n * @classdesc\n * Building block used to create a paginator control.\n *\n * Usage example:\n * <pre>\n * &lt;macro:Paginator /&gt;\n * </pre>\n * @class sap.fe.macros.Paginator\n * @hideconstructor\n * @public\n * @since 1.94.0\n */\nconst Paginator = MacroMetadata.extend(\"sap.fe.macros.paginator.Paginator\", {\n\t/**\n\t * Name of the building block control.\n\t */\n\tname: \"Paginator\",\n\t/**\n\t * Namespace of the building block control\n\t */\n\tnamespace: \"sap.fe.macros.internal\",\n\tpublicNamespace: \"sap.fe.macros\",\n\t/**\n\t * Fragment source of the macro (optional) - if not set, fragment is generated from namespace and name\n\t */\n\tfragment: \"sap.fe.macros.paginator.Paginator\",\n\t/**\n\t * The metadata describing the macro control.\n\t */\n\tmetadata: {\n\t\t/**\n\t\t * Defines the macro stereotype used in documentation.\n\t\t */\n\t\tstereotype: \"xmlmacro\",\n\t\t/**\n\t\t * Properties.\n\t\t */\n\t\tproperties: {\n\t\t\t/**\n\t\t\t * The identifier of the Paginator control.\n\t\t\t */\n\t\t\tid: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tisPublic: true\n\t\t\t}\n\t\t}\n\t}\n});\nexport default Paginator;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;EAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA,MAAMA,SAAS,GAAGC,aAAa,CAACC,MAAM,CAAC,mCAAmC,EAAE;IAC3E;AACD;AACA;IACCC,IAAI,EAAE,WAAW;IACjB;AACD;AACA;IACCC,SAAS,EAAE,wBAAwB;IACnCC,eAAe,EAAE,eAAe;IAChC;AACD;AACA;IACCC,QAAQ,EAAE,mCAAmC;IAC7C;AACD;AACA;IACCC,QAAQ,EAAE;MACT;AACF;AACA;MACEC,UAAU,EAAE,UAAU;MACtB;AACF;AACA;MACEC,UAAU,EAAE;QACX;AACH;AACA;QACGC,EAAE,EAAE;UACHC,IAAI,EAAE,QAAQ;UACdC,QAAQ,EAAE;QACX;MACD;IACD;EACD,CAAC,CAAC;EAAC,OACYZ,SAAS;AAAA"}},{"offset":{"line":20671,"column":0},"map":{"version":3,"names":["sap","ui","define","MacroMetadata","Paginator","extend","name","namespace","publicNamespace","fragment","metadata","stereotype","properties","id","type","isPublic"],"sources":["Paginator.metadata-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,wDAAO,CAAC,+BAAgC,SAAUC,GACvD,aAeA,MAAMC,EAAYD,EAAcE,OAAO,oCAAqC,CAI1EC,KAAM,YAINC,UAAW,yBACXC,gBAAiB,gBAIjBC,SAAU,oCAIVC,SAAU,CAIRC,WAAY,WAIZC,WAAY,CAIVC,GAAI,CACFC,KAAM,SACNC,SAAU,UAKlB,OAAOX,CACT,EAAG","sourceRoot":"paginator"}},{"offset":{"line":20676,"column":0},"map":{"version":3,"names":["QuickView","MacroMetadata","extend","name","namespace","fragment","metadata","stereotype","designtime","properties","dataField","type","required","$kind","$Type","semanticObject","contextPath","semanticObjectsToResolve","computed","events","create","oProps","oDataModelPath","MetaModelConverter","getInvolvedDataModelObjects","valueDataModelPath","getDataModelObjectPathForValue","valueProperty","targetObject","hasQuickViewFacets","FieldTemplating","isUsedInNavigationWithQuickViewFacets","commonAnnotations","annotations","Common","aSemObjExprToResolve","getSemanticObjectExpressionToResolve","pathOfDynamicSemanticObject","getDynamicPathFromSemanticObject","push","key","value","getSemanticObjects","relativePathToQuickViewEntity","_getRelativePathToQuickViewEntity","quickViewEntity","contextLocation","targetEntitySet","fullyQualifiedName","undefined","navigationPath","compileExpression","pathInModel","propertyWithSemanticObject","_getPropertyWithSemanticObject","mainSemanticObject","semanticObjectsList","qualifierMap","_getSemanticObjectsForPayloadAndQualifierMap","semanticObjectMappings","_getSemanticObjectMappingsForPayload","semanticObjectUnavailableActions","_getSemanticObjectUnavailableActionsForPayload","isProperty","_addCustomSemanticObjectToSemanticObjectListForPayload","propertyPathLabel","Label","valueOf","payload","semanticObjects","entityType","getPath","contact","delegateConfiguration","JSON","stringify","propertyDataModelPath","quickViewNavProp","_getNavPropToQuickViewEntity","navigationProperties","reduce","relativPath","navProp","find","contextNavProp","dataModelObjectPath","hasSemanticObject","length","navProperty","compiledSemanticObject","getExpressionFromAnnotation","includes","qualifier","semanticObjectMapping","getSemanticObjectMappings","correspondingSemanticObject","items","map","semanticObjectMappingType","LocalProperty","SemanticObjectProperty","unavailableActionAnnotation","getSemanticObjectUnavailableActions","actions","unavailableAction","customSemanticObject","indexOf","parse","property","targetEntityType","referentialConstraint","some","sourceProperty","targetType","UI","QuickViewFacets","semanticKeys","SemanticKey","isPropertySemanticKey","semanticKey","$target","lastNavProp","isKey"],"sourceRoot":"quickView","sources":["QuickView.metadata.ts"],"sourcesContent":["import { AnnotationTerm, NavigationProperty, Property } from \"@sap-ux/vocabularies-types\";\nimport * as Edm from \"@sap-ux/vocabularies-types/Edm\";\nimport { CommonAnnotationTerms } from \"@sap-ux/vocabularies-types/vocabularies/Common\";\nimport * as MetaModelConverter from \"sap/fe/core/converters/MetaModelConverter\";\nimport {\n\tBindingToolkitExpression,\n\tCompiledBindingToolkitExpression,\n\tcompileExpression,\n\tgetExpressionFromAnnotation,\n\tpathInModel\n} from \"sap/fe/core/helpers/BindingToolkit\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { isProperty } from \"sap/fe/core/templating/PropertyHelper\";\nimport {\n\tgetDynamicPathFromSemanticObject,\n\tgetSemanticObjectMappings,\n\tgetSemanticObjects,\n\tgetSemanticObjectUnavailableActions,\n\thasSemanticObject\n} from \"sap/fe/core/templating/SemanticObjectHelper\";\nimport type { SemanticObjectCustomData } from \"sap/fe/macros/field/FieldTemplating\";\nimport * as FieldTemplating from \"sap/fe/macros/field/FieldTemplating\";\nimport { getDataModelObjectPathForValue } from \"sap/fe/macros/field/FieldTemplating\";\nimport MacroMetadata from \"sap/fe/macros/MacroMetadata\";\nimport {\n\tRegisteredPayload,\n\tRegisteredSemanticObjectMapping,\n\tRegisteredSemanticObjectUnavailableActions\n} from \"sap/fe/macros/quickView/QuickViewDelegate\";\n\nconst QuickView = MacroMetadata.extend(\"sap.fe.macros.quickView.QuickView\", {\n\t/**\n\t * Name of the building block control.\n\t */\n\tname: \"QuickView\",\n\t/**\n\t *\n\t * Namespace of the building block control\n\t */\n\tnamespace: \"sap.fe.macros\",\n\t/**\n\t * Fragment source of the building block (optional) - if not set, fragment is generated from namespace and name\n\t */\n\tfragment: \"sap.fe.macros.quickView.QuickView\",\n\t/**\n\t * The metadata describing the building block control.\n\t */\n\tmetadata: {\n\t\t/**\n\t\t * Define building block stereotype for documentation\n\t\t */\n\t\tstereotype: \"xmlmacro\",\n\t\t/**\n\t\t * Location of the designtime info\n\t\t */\n\t\tdesigntime: \"sap/fe/macros/quickView/QuickView.designtime\",\n\t\t/**\n\t\t * Properties.\n\t\t */\n\t\tproperties: {\n\t\t\tdataField: {\n\t\t\t\ttype: \"sap.ui.model.Context\",\n\t\t\t\trequired: true,\n\t\t\t\t$kind: \"Property\",\n\t\t\t\t$Type: [\n\t\t\t\t\t\"com.sap.vocabularies.UI.v1.DataField\",\n\t\t\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldWithUrl\",\n\t\t\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldForAnnotation\",\n\t\t\t\t\t\"com.sap.vocabularies.UI.v1.DataPointType\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tsemanticObject: {\n\t\t\t\ttype: \"string\"\n\t\t\t},\n\t\t\t/**\n\t\t\t * Metadata path to the entity set\n\t\t\t */\n\t\t\tcontextPath: {\n\t\t\t\ttype: \"sap.ui.model.Context\",\n\t\t\t\trequired: false\n\t\t\t},\n\t\t\t/**\n\t\t\t * Context pointing to an array of key value that is used for custom data generation\n\t\t\t */\n\t\t\tsemanticObjectsToResolve: {\n\t\t\t\ttype: \"sap.ui.model.Context\",\n\t\t\t\trequired: false,\n\t\t\t\tcomputed: true\n\t\t\t}\n\t\t},\n\n\t\tevents: {}\n\t},\n\tcreate: function (oProps: any) {\n\t\tlet oDataModelPath = MetaModelConverter.getInvolvedDataModelObjects(oProps.dataField, oProps.contextPath);\n\t\tconst valueDataModelPath = getDataModelObjectPathForValue(oDataModelPath);\n\t\toDataModelPath = valueDataModelPath || oDataModelPath;\n\n\t\tconst valueProperty = oDataModelPath.targetObject;\n\t\tconst hasQuickViewFacets = valueProperty\n\t\t\t? FieldTemplating.isUsedInNavigationWithQuickViewFacets(oDataModelPath, valueProperty) + \"\"\n\t\t\t: \"false\";\n\n\t\tconst commonAnnotations = valueProperty?.annotations?.Common;\n\t\t//we will need to pass the relativeLocation=getRelativePaths(oDataModelPath); to fieldTemplating#getSemanticObjectExpressionToResolve\n\n\t\tconst aSemObjExprToResolve: SemanticObjectCustomData[] = commonAnnotations\n\t\t\t? FieldTemplating.getSemanticObjectExpressionToResolve(commonAnnotations, true)\n\t\t\t: [];\n\n\t\tconst pathOfDynamicSemanticObject = getDynamicPathFromSemanticObject(oProps.semanticObject);\n\t\tif (pathOfDynamicSemanticObject) {\n\t\t\taSemObjExprToResolve.push({\n\t\t\t\tkey: pathOfDynamicSemanticObject,\n\t\t\t\tvalue: oProps.semanticObject\n\t\t\t});\n\t\t}\n\t\toProps.semanticObjectsToResolve = FieldTemplating.getSemanticObjects(aSemObjExprToResolve); // this is used via semanticObjectsToResolve>\n\t\tconst relativePathToQuickViewEntity = this._getRelativePathToQuickViewEntity(oDataModelPath);\n\t\t// it can be that there is no targetEntityset for the context location so we use the targetObjectFullyQualifiedName\n\t\tconst quickViewEntity = relativePathToQuickViewEntity\n\t\t\t? `/${\n\t\t\t\t\toDataModelPath.contextLocation?.targetEntitySet?.name ||\n\t\t\t\t\toDataModelPath.contextLocation?.targetObject?.fullyQualifiedName\n\t\t\t  }/${relativePathToQuickViewEntity}`\n\t\t\t: undefined;\n\t\tconst navigationPath = relativePathToQuickViewEntity ? compileExpression(pathInModel(relativePathToQuickViewEntity)) : undefined;\n\n\t\tconst propertyWithSemanticObject = this._getPropertyWithSemanticObject(oDataModelPath);\n\t\tlet mainSemanticObject;\n\t\tconst { semanticObjectsList, qualifierMap } = this._getSemanticObjectsForPayloadAndQualifierMap(propertyWithSemanticObject);\n\t\tconst semanticObjectMappings = this._getSemanticObjectMappingsForPayload(propertyWithSemanticObject, qualifierMap);\n\t\tconst semanticObjectUnavailableActions = this._getSemanticObjectUnavailableActionsForPayload(\n\t\t\tpropertyWithSemanticObject,\n\t\t\tqualifierMap\n\t\t);\n\t\tif (isProperty(propertyWithSemanticObject)) {\n\t\t\t// TODO why should this be different for navigation: when we add this some links disappear\n\t\t\tmainSemanticObject = qualifierMap[\"main\"] || qualifierMap[\"\"];\n\t\t}\n\t\tthis._addCustomSemanticObjectToSemanticObjectListForPayload(semanticObjectsList, oProps.semanticObject as string | undefined);\n\t\tconst propertyPathLabel = valueProperty.annotations?.Common?.Label?.valueOf() || \"\";\n\n\t\tconst payload: RegisteredPayload = {\n\t\t\tsemanticObjects: semanticObjectsList,\n\t\t\tentityType: quickViewEntity,\n\t\t\tsemanticObjectUnavailableActions: semanticObjectUnavailableActions,\n\t\t\tsemanticObjectMappings: semanticObjectMappings,\n\t\t\tmainSemanticObject: mainSemanticObject,\n\t\t\tpropertyPathLabel: propertyPathLabel,\n\t\t\tdataField: quickViewEntity === undefined ? oProps.dataField.getPath() : undefined,\n\t\t\tcontact: undefined,\n\t\t\tnavigationPath: navigationPath,\n\t\t\thasQuickViewFacets: hasQuickViewFacets\n\t\t};\n\t\toProps.delegateConfiguration = JSON.stringify({\n\t\t\tname: \"sap/fe/macros/quickView/QuickViewDelegate\",\n\t\t\tpayload: payload\n\t\t});\n\n\t\treturn oProps;\n\t},\n\t/**\n\t * Get the relative path to the entity which quick view Facets we want to display.\n\t *\n\t * @param propertyDataModelPath\n\t * @returns A path if it exists.\n\t */\n\t_getRelativePathToQuickViewEntity: function (propertyDataModelPath: DataModelObjectPath): string | undefined {\n\t\tlet relativePathToQuickViewEntity: string | undefined;\n\t\tconst quickViewNavProp = this._getNavPropToQuickViewEntity(propertyDataModelPath);\n\t\tif (quickViewNavProp) {\n\t\t\trelativePathToQuickViewEntity = propertyDataModelPath.navigationProperties.reduce((relativPath: string, navProp) => {\n\t\t\t\tif (\n\t\t\t\t\tnavProp.name !== quickViewNavProp.name &&\n\t\t\t\t\t!propertyDataModelPath.contextLocation?.navigationProperties.find(\n\t\t\t\t\t\t(contextNavProp) => contextNavProp.name === navProp.name\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\t// we keep only navProperties that are part of the relativePath and not the one for quickViewNavProp\n\t\t\t\t\treturn `${relativPath}${navProp.name}/`;\n\t\t\t\t}\n\t\t\t\treturn relativPath;\n\t\t\t}, \"\");\n\t\t\trelativePathToQuickViewEntity = `${relativePathToQuickViewEntity}${quickViewNavProp.name}`;\n\t\t}\n\t\treturn relativePathToQuickViewEntity;\n\t},\n\t/**\n\t * Get the property or the navigation property in  its relative path that holds semanticObject annotation if it exists.\n\t *\n\t * @param dataModelObjectPath\n\t * @returns A property or a NavProperty or undefined\n\t */\n\t_getPropertyWithSemanticObject: function (dataModelObjectPath: DataModelObjectPath) {\n\t\tlet propertyWithSemanticObject: Property | NavigationProperty | undefined;\n\t\tif (hasSemanticObject(dataModelObjectPath.targetObject)) {\n\t\t\tpropertyWithSemanticObject = dataModelObjectPath.targetObject;\n\t\t} else if (dataModelObjectPath.navigationProperties.length > 0) {\n\t\t\t// there are no semantic objects on the property itself so we look for some on nav properties\n\t\t\tfor (const navProperty of dataModelObjectPath.navigationProperties) {\n\t\t\t\tif (\n\t\t\t\t\t!dataModelObjectPath.contextLocation?.navigationProperties.find(\n\t\t\t\t\t\t(contextNavProp) => contextNavProp.fullyQualifiedName === navProperty.fullyQualifiedName\n\t\t\t\t\t) &&\n\t\t\t\t\t!propertyWithSemanticObject &&\n\t\t\t\t\thasSemanticObject(navProperty)\n\t\t\t\t) {\n\t\t\t\t\tpropertyWithSemanticObject = navProperty;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn propertyWithSemanticObject;\n\t},\n\t/**\n\t * Get the semanticObject compile biding from metadata and a map to the qualifiers.\n\t *\n\t * @param propertyWithSemanticObject The property that holds semanticObject annotataions if it exists\n\t * @returns An object containing semanticObjectList and qualifierMap\n\t */\n\t_getSemanticObjectsForPayloadAndQualifierMap: function (propertyWithSemanticObject: Property | NavigationProperty | undefined) {\n\t\tconst qualifierMap: { [key: string]: CompiledBindingToolkitExpression } = {};\n\t\tconst semanticObjectsList: string[] = [];\n\t\tif (propertyWithSemanticObject !== undefined) {\n\t\t\tfor (const semanticObject of getSemanticObjects(propertyWithSemanticObject)) {\n\t\t\t\tconst compiledSemanticObject = compileExpression(\n\t\t\t\t\tgetExpressionFromAnnotation(semanticObject) as BindingToolkitExpression<string>\n\t\t\t\t);\n\t\t\t\t// this should not happen, but we make sure not to add twice the semanticObject otherwise the mdcLink crashes\n\t\t\t\tif (compiledSemanticObject && !semanticObjectsList.includes(compiledSemanticObject)) {\n\t\t\t\t\tqualifierMap[semanticObject.qualifier || \"\"] = compiledSemanticObject;\n\t\t\t\t\tsemanticObjectsList.push(compiledSemanticObject);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn { semanticObjectsList, qualifierMap };\n\t},\n\t/**\n\t * Get the semanticObjectMappings from metadata in the payload expected structure.\n\t *\n\t * @param propertyWithSemanticObject\n\t * @param qualifierMap\n\t * @returns A payload structure for semanticObjectMappings\n\t */\n\t_getSemanticObjectMappingsForPayload: function (\n\t\tpropertyWithSemanticObject: Property | NavigationProperty | undefined,\n\t\tqualifierMap: { [key: string]: CompiledBindingToolkitExpression }\n\t) {\n\t\tconst semanticObjectMappings: RegisteredSemanticObjectMapping[] = [];\n\t\tif (propertyWithSemanticObject !== undefined) {\n\t\t\tfor (const semanticObjectMapping of getSemanticObjectMappings(propertyWithSemanticObject)) {\n\t\t\t\tconst correspondingSemanticObject = qualifierMap[semanticObjectMapping.qualifier || \"\"];\n\t\t\t\tif (correspondingSemanticObject) {\n\t\t\t\t\tsemanticObjectMappings.push({\n\t\t\t\t\t\tsemanticObject: correspondingSemanticObject,\n\t\t\t\t\t\titems: semanticObjectMapping.map((semanticObjectMappingType) => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tkey: semanticObjectMappingType.LocalProperty.value,\n\t\t\t\t\t\t\t\tvalue: semanticObjectMappingType.SemanticObjectProperty.valueOf() as string\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn semanticObjectMappings;\n\t},\n\t/**\n\t * Get the semanticObjectUnavailableActions from metadata in the payload expected structure.\n\t *\n\t * @param propertyWithSemanticObject\n\t * @param qualifierMap\n\t * @returns A payload structure for semanticObjectUnavailableActions\n\t */\n\t_getSemanticObjectUnavailableActionsForPayload: function (\n\t\tpropertyWithSemanticObject: Property | NavigationProperty | undefined,\n\t\tqualifierMap: { [key: string]: CompiledBindingToolkitExpression }\n\t) {\n\t\tconst semanticObjectUnavailableActions: RegisteredSemanticObjectUnavailableActions = [];\n\t\tif (propertyWithSemanticObject !== undefined) {\n\t\t\tfor (const unavailableActionAnnotation of getSemanticObjectUnavailableActions(propertyWithSemanticObject) as ({\n\t\t\t\tterm: CommonAnnotationTerms.SemanticObjectUnavailableActions;\n\t\t\t} & AnnotationTerm<Edm.String[]>)[]) {\n\t\t\t\tconst correspondingSemanticObject = qualifierMap[unavailableActionAnnotation.qualifier || \"\"];\n\t\t\t\tif (correspondingSemanticObject) {\n\t\t\t\t\tsemanticObjectUnavailableActions.push({\n\t\t\t\t\t\tsemanticObject: correspondingSemanticObject,\n\t\t\t\t\t\tactions: unavailableActionAnnotation.map((unavailableAction) => unavailableAction as string)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn semanticObjectUnavailableActions;\n\t},\n\t/**\n\t * Add customObject(s) to the semanticObject list for the payload if it exists.\n\t *\n\t * @param semanticObjectsList\n\t * @param customSemanticObject\n\t */\n\t_addCustomSemanticObjectToSemanticObjectListForPayload: function (\n\t\tsemanticObjectsList: string[],\n\t\tcustomSemanticObject: string | undefined\n\t): void {\n\t\tif (customSemanticObject) {\n\t\t\t// the custom semantic objects are either a single string/key to custom data or a stringified array\n\t\t\tif (customSemanticObject[0] !== \"[\") {\n\t\t\t\t// customSemanticObject = \"semanticObject\" | \"{pathInModel}\"\n\t\t\t\tif (semanticObjectsList.indexOf(customSemanticObject) === -1) {\n\t\t\t\t\tsemanticObjectsList.push(customSemanticObject);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// customSemanticObject = '[\"semanticObject1\",\"semanticObject2\"]'\n\t\t\t\tfor (const semanticObject of JSON.parse(customSemanticObject)) {\n\t\t\t\t\tif (semanticObjectsList.indexOf(semanticObject) === -1) {\n\t\t\t\t\t\tsemanticObjectsList.push(semanticObject);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t/**\n\t * Get the navigationProperty to an entity with QuickViewFacets that can be linked to the property.\n\t *\n\t * @param propertyDataModelPath\n\t * @returns A navigation property if it exists.\n\t */\n\t_getNavPropToQuickViewEntity: function (propertyDataModelPath: DataModelObjectPath) {\n\t\t//TODO we should investigate to put this code as common with FieldTemplating.isUsedInNavigationWithQuickViewFacets\n\t\tconst property = propertyDataModelPath.targetObject as Property;\n\t\tconst navigationProperties = propertyDataModelPath.targetEntityType.navigationProperties;\n\t\tlet quickViewNavProp = navigationProperties.find((navProp: NavigationProperty) => {\n\t\t\treturn navProp.referentialConstraint?.some((referentialConstraint) => {\n\t\t\t\treturn referentialConstraint?.sourceProperty === property.name && navProp?.targetType?.annotations?.UI?.QuickViewFacets;\n\t\t\t});\n\t\t});\n\t\tif (!quickViewNavProp && propertyDataModelPath.contextLocation?.targetEntitySet !== propertyDataModelPath.targetEntitySet) {\n\t\t\tconst semanticKeys = propertyDataModelPath?.targetEntityType?.annotations?.Common?.SemanticKey || [];\n\t\t\tconst isPropertySemanticKey = semanticKeys.some(function (semanticKey) {\n\t\t\t\treturn semanticKey?.$target?.name === property.name;\n\t\t\t});\n\t\t\tconst lastNavProp = propertyDataModelPath.navigationProperties[propertyDataModelPath.navigationProperties.length - 1];\n\t\t\tif ((isPropertySemanticKey || property.isKey) && propertyDataModelPath?.targetEntityType?.annotations?.UI?.QuickViewFacets) {\n\t\t\t\tquickViewNavProp = lastNavProp as unknown as NavigationProperty;\n\t\t\t}\n\t\t}\n\t\treturn quickViewNavProp;\n\t}\n});\n\nexport default QuickView;\n"],"mappings":"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"}},{"offset":{"line":20980,"column":0},"map":{"version":3,"names":["sap","ui","define","MetaModelConverter","BindingToolkit","PropertyHelper","SemanticObjectHelper","FieldTemplating","MacroMetadata","getDataModelObjectPathForValue","hasSemanticObject","getSemanticObjectUnavailableActions","getSemanticObjects","getSemanticObjectMappings","getDynamicPathFromSemanticObject","isProperty","pathInModel","getExpressionFromAnnotation","compileExpression","QuickView","extend","name","namespace","fragment","metadata","stereotype","designtime","properties","dataField","type","required","$kind","$Type","semanticObject","contextPath","semanticObjectsToResolve","computed","events","create","oProps","_valueProperty$annota","_oDataModelPath$conte","_oDataModelPath$conte2","_oDataModelPath$conte3","_oDataModelPath$conte4","_valueProperty$annota2","_valueProperty$annota3","_valueProperty$annota4","oDataModelPath","getInvolvedDataModelObjects","valueDataModelPath","valueProperty","targetObject","hasQuickViewFacets","isUsedInNavigationWithQuickViewFacets","commonAnnotations","annotations","Common","aSemObjExprToResolve","getSemanticObjectExpressionToResolve","pathOfDynamicSemanticObject","push","key","value","relativePathToQuickViewEntity","this","_getRelativePathToQuickViewEntity","quickViewEntity","contextLocation","targetEntitySet","fullyQualifiedName","undefined","navigationPath","propertyWithSemanticObject","_getPropertyWithSemanticObject","mainSemanticObject","semanticObjectsList","qualifierMap","_getSemanticObjectsForPayloadAndQualifierMap","semanticObjectMappings","_getSemanticObjectMappingsForPayload","semanticObjectUnavailableActions","_getSemanticObjectUnavailableActionsForPayload","_addCustomSemanticObjectToSemanticObjectListForPayload","propertyPathLabel","Label","valueOf","payload","semanticObjects","entityType","getPath","contact","delegateConfiguration","JSON","stringify","propertyDataModelPath","quickViewNavProp","_getNavPropToQuickViewEntity","navigationProperties","reduce","relativPath","navProp","_propertyDataModelPat","find","contextNavProp","dataModelObjectPath","length","navProperty","_dataModelObjectPath$","compiledSemanticObject","includes","qualifier","semanticObjectMapping","correspondingSemanticObject","items","map","semanticObjectMappingType","LocalProperty","SemanticObjectProperty","unavailableActionAnnotation","actions","unavailableAction","customSemanticObject","indexOf","parse","_propertyDataModelPat2","property","targetEntityType","_navProp$referentialC","referentialConstraint","some","_navProp$targetType","_navProp$targetType$a","_navProp$targetType$a2","sourceProperty","targetType","UI","QuickViewFacets","_propertyDataModelPat3","_propertyDataModelPat4","_propertyDataModelPat5","_propertyDataModelPat6","_propertyDataModelPat7","_propertyDataModelPat8","semanticKeys","SemanticKey","isPropertySemanticKey","semanticKey","_semanticKey$$target","$target","lastNavProp","isKey"],"sources":["QuickView.metadata-dbg.js"],"mappings":"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","sourceRoot":"quickView"}},{"offset":{"line":20985,"column":0},"map":{"version":3,"names":["SimpleLinkDelegate","Object","assign","LinkDelegate","CONSTANTS","iLinksShownInPopup","sapmLink","sapuimdcLink","sapuimdclinkLinkItem","sapmObjectIdentifier","sapmObjectStatus","getConstants","_getEntityType","oPayload","oMetaModel","createBindingContext","entityType","undefined","_getSemanticsModel","JSONModel","_getDataField","dataField","_getContact","contact","fnTemplateFragment","sFragmentName","titleLinkHref","oFragmentModel","oPayloadToUse","resolvedpayload","payload","LinkId","oControl","isA","getId","getModel","getProperty","titlelink","oSemanticsModel","semanticModel","bindingContexts","semantic","models","entitySet","metaModel","viewData","oFragment","XMLTemplateProcessor","loadTemplate","Promise","resolve","XMLPreprocessor","process","name","then","_internalFragment","Fragment","load","definition","controller","oPopoverContent","setModel","setBindingContext","fetchAdditionalContent","oPayLoad","oMdcLinkControl","aNavigateRegexpMatch","navigationPath","match","oBindingContext","length","bindContext","getBindingContext","$$ownRequest","getMetaModel","getBoundContext","_fetchLinkCustomData","_oLink","getParent","getCustomData","fetchLinkItems","oInfoLog","_getSemanticObjects","oContextObject","getObject","initialize","_oLinkCustomData","_link","aLinkCustomData","map","linkItem","mProperties","value","oSemanticAttributesResolved","_calculateSemanticAttributes","oSemanticAttributes","results","oPayloadResolved","_retrieveNavigationTargets","aLinks","_findLinkType","aLinkItems","nLinkType","oLinkItem","LinkItem","text","getText","href","getHref","hasQuickViewFacets","linkType","fetchLinkType","oLink","_oCurrentLink","_oPayload","oDefaultInitialType","initialType","type","directLink","runtimeType","appStateKeyMap","semanticObjects","_retrieveUnmodifiedLinkItems","_LinkType","Error","oError","Log","error","_RemoveTitleLinkFromTargets","_aLinkItems","_bTitleHasLink","_aTitleLink","_sTitleLinkHref","_oMDCLink","bResult","linkIsPrimaryAction","_sLinkIntentWithoutParameters","_sTitleIntent","intent","split","titlelinkhref","setProperty","aMLinkItems","filter","key","_IsSemanticObjectDynamic","aNewLinkCustomData","oThis","link","otherLink","_getLineContext","oView","mLineContext","getAggregation","_setFilterContextUrlForSelectionVariant","oSelectionVariant","oNavigationService","getViewData","sContextUrl","constructContextUrl","setFilterContextUrl","_setObjectMappings","sSemanticObject","oParams","aSemanticObjectMappings","hasChanged","modifiedSelectionVariant","SelectionVariant","toJSONObject","forEach","mapping","mappingSemanticObject","semanticObject","mappingSemanticObjectPath","getDynamicPathFromSemanticObject","oMappings","items","i","sLocalProperty","sSemanticObjectProperty","removeParameter","removeSelectOption","renameParameter","renameSelectOption","propertyToBeRemoved","slice","params","selectionVariant","_getAppStateKeyAndUrlParameters","_this","navigationService","aValues","deepEqual","defaultCache","semanticAttributes","appstatekey","toES6Promise","getAppStateKeyAndUrlParameters","toJSONString","cache","_getLinkItemWithNewParameter","_that","_oLinkItem","_oShellServices","_oParams","_sAppStateKey","_oSelectionVariant","_oNavigationService","expandCompactHash","sHash","oShellHash","parseShellHash","oNewParams","newSelectionVariant","semanticObjectMappings","oNewShellHash","target","action","appStateKey","setHref","constructShellHash","aSemanticLinks","push","bind","_removeEmptyLinkItem","modifyLinkItems","primaryActionIsActive","FieldHelper","checkPrimaryActions","aTitleLink","titleLink","bTitleHasLink","hasTitleLink","CommonUtils","getTargetView","oAppComponent","getAppComponent","oShellServices","getShellServices","hasUShell","reject","oTargetInfo","mainSemanticObject","getNavigationService","oController","getController","mLineContextData","sMetaPath","getMetaPath","getPath","_intentBasedNavigation","removeSensitiveData","prepareContextForExternalNavigation","mixAttributesAndSelectionVariant","propertiesWithoutConflict","intentBasedNavigation","adaptNavigationContext","_removeTechnicalParameters","titleLinktoBeRemove","index","beforeNavigationCallback","oEvent","oSource","getSource","sHref","getParameter","oURLParsing","Factory","getService","oHash","KeepAliveHelper","storeControlRefreshStrategyForHash","_getSemanticObjectCustomDataValue","oSemanticObjectsResolved","sPropertyName","sCustomDataValue","iCustomDataCount","getKey","getValue","_isDynamicPath","pathOrValue","indexOf","_updatePayloadWithResolvedSemanticObjectValue","newPayload","semanticObjectName","semanticObjectsResolved","j","_createNewPayloadWithDynamicSemanticObjectsResolved","tmpPropertyName","substr","_updateSemanticObjectsForMappings","mdcPayload","mdcPayloadWithDynamicSemanticObjectsResolved","semanticObjectMapping","_updateSemanticObjectsUnavailableActions","mdcPayloadSemanticObjectUnavailableActions","_Index","semanticObjectUnavailableAction","findIndex","_updateSemanticObjectsWithResolvedValue","newSemanticObjectsCount","splice","_removeEmptySemanticObjectsMappings","mappingsCount","_setPayloadWithDynamicSemanticObjectsResolved","oPayloadWithDynamicSemanticObjectsResolved","propertyPathLabel","deepClone","_SemanticObjectUnavailableActions","semanticObjectUnavailableActions","_getPayloadWithDynamicSemanticObjectsResolved","linkCustomData","_updatePayloadWithSemanticAttributes","aSemanticObjects","oResults","mSemanticObjectMappings","addContextObject","sAttributeName","oAttribute","oTransformationAdditional","getSemanticObjectAttribute","createAttributeStructure","addSemanticObjectAttribute","transformations","description","isPlainObject","aKeys","keys","sNewAttributeNameMapped","sNewAttributeName","sValue","sKey","sAttributeNameMapped","reason","aAttributeNew","_convertSemanticObjectMapping","_getSemanticObjectMappings","sAppStateKey","oNavigationTargets","ownNavigation","availableActions","iSuperiorActionLinksFound","Core","loadLibrary","async","sap","ui","require","Utils","getAppComponentForControl","aParams","sortResultsBy","getLinks","bHasLinks","aSemanticObjectUnavailableActions","_getSemanticObjectUnavailableActions","oUnavailableActions","_convertSemanticObjectUnavailableAction","sCurrentHash","FieldRuntime","_fnFixHashQueryString","getHash","fnIsUnavailableAction","sAction","fnAddLink","shellHash","icon","initiallyVisible","tags","addSemanticObjectIntent","n","iLinkItemIndex","oSemanticObjectUnavailableAction","SemanticObjectUnavailableAction","actions","aSemanticObjectMappingItems","oSemanticObjectMapping","oSemanticObjectMappingItem","SemanticObjectMappingItem","SemanticObjectMapping","getSemanticObject","getItems","reduce","oMap","oItem","_SemanticObjectName","_SemanticObjectHasAlreadyUnavailableActions","_UnavailableActions","mSemanticObjectUnavailableActions","oSemanticObjectUnavailableActions","getActions","UnavailableAction"],"sourceRoot":"quickView","sources":["QuickViewDelegate.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport deepClone from \"sap/base/util/deepClone\";\nimport deepEqual from \"sap/base/util/deepEqual\";\nimport isPlainObject from \"sap/base/util/isPlainObject\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport KeepAliveHelper from \"sap/fe/core/helpers/KeepAliveHelper\";\nimport toES6Promise from \"sap/fe/core/helpers/ToES6Promise\";\nimport PageController from \"sap/fe/core/PageController\";\nimport { NavigationService } from \"sap/fe/core/services/NavigationServiceFactory\";\nimport { getDynamicPathFromSemanticObject } from \"sap/fe/core/templating/SemanticObjectHelper\";\nimport FieldHelper from \"sap/fe/macros/field/FieldHelper\";\nimport FieldRuntime from \"sap/fe/macros/field/FieldRuntime\";\nimport SelectionVariant from \"sap/fe/navigation/SelectionVariant\";\nimport Core from \"sap/ui/core/Core\";\nimport Fragment from \"sap/ui/core/Fragment\";\nimport XMLPreprocessor from \"sap/ui/core/util/XMLPreprocessor\";\nimport XMLTemplateProcessor from \"sap/ui/core/XMLTemplateProcessor\";\nimport Factory from \"sap/ui/mdc/link/Factory\";\nimport LinkItem from \"sap/ui/mdc/link/LinkItem\";\nimport SemanticObjectMapping from \"sap/ui/mdc/link/SemanticObjectMapping\";\nimport SemanticObjectMappingItem from \"sap/ui/mdc/link/SemanticObjectMappingItem\";\nimport SemanticObjectUnavailableAction from \"sap/ui/mdc/link/SemanticObjectUnavailableAction\";\nimport LinkDelegate from \"sap/ui/mdc/LinkDelegate\";\nimport type Context from \"sap/ui/model/Context\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\n\nexport type RegisteredSemanticObjectMapping = { semanticObject: string; items: { key: string; value: string }[] };\ntype RegisteredSemanticObjectMappings = RegisteredSemanticObjectMapping[];\nexport type RegisteredPayload = {\n\tmainSemanticObject?: string;\n\tsemanticObjects: string[];\n\tsemanticObjectsResolved?: string[];\n\tsemanticObjectMappings: RegisteredSemanticObjectMappings;\n\tsemanticObjectUnavailableActions?: RegisteredSemanticObjectUnavailableActions;\n\tentityType?: string;\n\tdataField?: string;\n\tcontact?: string;\n\tnavigationPath?: string;\n\tpropertyPathLabel?: string;\n\thasQuickViewFacets?: string;\n};\n\nexport type RegisteredSemanticObjectUnavailableActions = {\n\tsemanticObject: string;\n\tactions: string[];\n}[];\n\nconst SimpleLinkDelegate = Object.assign({}, LinkDelegate) as any;\nconst CONSTANTS = {\n\tiLinksShownInPopup: 3,\n\tsapmLink: \"sap.m.Link\",\n\tsapuimdcLink: \"sap.ui.mdc.Link\",\n\tsapuimdclinkLinkItem: \"sap.ui.mdc.link.LinkItem\",\n\tsapmObjectIdentifier: \"sap.m.ObjectIdentifier\",\n\tsapmObjectStatus: \"sap.m.ObjectStatus\"\n};\nSimpleLinkDelegate.getConstants = function () {\n\treturn CONSTANTS;\n};\n/**\n * This will return an array of the SemanticObjects as strings given by the payload.\n *\n * @private\n * @param oPayload The payload defined by the application\n * @param oMetaModel The ODataMetaModel received from the Link\n * @returns The context pointing to the current EntityType.\n */\nSimpleLinkDelegate._getEntityType = function (oPayload: any, oMetaModel: ODataMetaModel) {\n\tif (oMetaModel) {\n\t\treturn oMetaModel.createBindingContext(oPayload.entityType);\n\t} else {\n\t\treturn undefined;\n\t}\n};\n/**\n * This will return an array of the SemanticObjects as strings given by the payload.\n *\n * @private\n * @param oPayload The payload defined by the application\n * @param oMetaModel The ODataMetaModel received from the Link\n * @returns A model containing the payload information\n */\nSimpleLinkDelegate._getSemanticsModel = function (oPayload: object, oMetaModel: object) {\n\tif (oMetaModel) {\n\t\treturn new JSONModel(oPayload);\n\t} else {\n\t\treturn undefined;\n\t}\n};\n/**\n * This will return an array of the SemanticObjects as strings given by the payload.\n *\n * @private\n * @param oPayload The payload defined by the application\n * @param oMetaModel The ODataMetaModel received from the Link\n * @returns An array containing SemanticObjects based of the payload\n */\nSimpleLinkDelegate._getDataField = function (oPayload: any, oMetaModel: ODataMetaModel) {\n\treturn oMetaModel.createBindingContext(oPayload.dataField);\n};\n/**\n * This will return an array of the SemanticObjects as strings given by the payload.\n *\n * @private\n * @param oPayload The payload defined by the application\n * @param oMetaModel The ODataMetaModel received from the Link\n * @returns Ancontaining SemanticObjects based of the payload\n */\nSimpleLinkDelegate._getContact = function (oPayload: any, oMetaModel: ODataMetaModel) {\n\treturn oMetaModel.createBindingContext(oPayload.contact);\n};\nSimpleLinkDelegate.fnTemplateFragment = function () {\n\tlet sFragmentName: string, titleLinkHref;\n\tconst oFragmentModel: any = {};\n\tlet oPayloadToUse;\n\n\t// payload has been modified by fetching Semantic Objects names with path\n\tif (this.resolvedpayload) {\n\t\toPayloadToUse = this.resolvedpayload;\n\t} else {\n\t\toPayloadToUse = this.payload;\n\t}\n\n\tif (oPayloadToUse && !oPayloadToUse.LinkId) {\n\t\toPayloadToUse.LinkId = this.oControl && this.oControl.isA(CONSTANTS.sapuimdcLink) ? this.oControl.getId() : undefined;\n\t}\n\n\tif (oPayloadToUse.LinkId) {\n\t\ttitleLinkHref = this.oControl.getModel(\"$sapuimdcLink\").getProperty(\"/titleLinkHref\");\n\t\toPayloadToUse.titlelink = titleLinkHref;\n\t}\n\n\tconst oSemanticsModel = this._getSemanticsModel(oPayloadToUse, this.oMetaModel);\n\tthis.semanticModel = oSemanticsModel;\n\n\tif (oPayloadToUse.entityType && this._getEntityType(oPayloadToUse, this.oMetaModel)) {\n\t\tsFragmentName = \"sap.fe.macros.quickView.fragments.EntityQuickView\";\n\t\toFragmentModel.bindingContexts = {\n\t\t\tentityType: this._getEntityType(oPayloadToUse, this.oMetaModel),\n\t\t\tsemantic: oSemanticsModel.createBindingContext(\"/\")\n\t\t};\n\t\toFragmentModel.models = {\n\t\t\tentityType: this.oMetaModel,\n\t\t\tsemantic: oSemanticsModel\n\t\t};\n\t} else if (oPayloadToUse.dataField && this._getDataField(oPayloadToUse, this.oMetaModel)) {\n\t\tsFragmentName = \"sap.fe.macros.quickView.fragments.DataFieldQuickView\";\n\t\toFragmentModel.bindingContexts = {\n\t\t\tdataField: this._getDataField(oPayloadToUse, this.oMetaModel),\n\t\t\tsemantic: oSemanticsModel.createBindingContext(\"/\")\n\t\t};\n\t\toFragmentModel.models = {\n\t\t\tdataField: this.oMetaModel,\n\t\t\tsemantic: oSemanticsModel\n\t\t};\n\t}\n\toFragmentModel.models.entitySet = this.oMetaModel;\n\toFragmentModel.models.metaModel = this.oMetaModel;\n\tif (this.oControl && this.oControl.getModel(\"viewData\")) {\n\t\toFragmentModel.models.viewData = this.oControl.getModel(\"viewData\");\n\t\toFragmentModel.bindingContexts.viewData = this.oControl.getModel(\"viewData\").createBindingContext(\"/\");\n\t}\n\n\tconst oFragment = XMLTemplateProcessor.loadTemplate(sFragmentName!, \"fragment\");\n\n\treturn Promise.resolve(XMLPreprocessor.process(oFragment, { name: sFragmentName! }, oFragmentModel))\n\t\t.then((_internalFragment: any) => {\n\t\t\treturn Fragment.load({\n\t\t\t\tdefinition: _internalFragment,\n\t\t\t\tcontroller: this\n\t\t\t});\n\t\t})\n\t\t.then((oPopoverContent: any) => {\n\t\t\tif (oPopoverContent) {\n\t\t\t\tif (oFragmentModel.models && oFragmentModel.models.semantic) {\n\t\t\t\t\toPopoverContent.setModel(oFragmentModel.models.semantic, \"semantic\");\n\t\t\t\t\toPopoverContent.setBindingContext(oFragmentModel.bindingContexts.semantic, \"semantic\");\n\t\t\t\t}\n\n\t\t\t\tif (oFragmentModel.bindingContexts && oFragmentModel.bindingContexts.entityType) {\n\t\t\t\t\toPopoverContent.setModel(oFragmentModel.models.entityType, \"entityType\");\n\t\t\t\t\toPopoverContent.setBindingContext(oFragmentModel.bindingContexts.entityType, \"entityType\");\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.resolvedpayload = undefined;\n\t\t\treturn oPopoverContent;\n\t\t});\n};\nSimpleLinkDelegate.fetchAdditionalContent = function (oPayLoad: any, oMdcLinkControl: any) {\n\tthis.oControl = oMdcLinkControl;\n\tconst aNavigateRegexpMatch = oPayLoad?.navigationPath?.match(/{(.*?)}/);\n\tconst oBindingContext =\n\t\taNavigateRegexpMatch && aNavigateRegexpMatch.length > 1 && aNavigateRegexpMatch[1]\n\t\t\t? oMdcLinkControl.getModel().bindContext(aNavigateRegexpMatch[1], oMdcLinkControl.getBindingContext(), { $$ownRequest: true })\n\t\t\t: null;\n\tthis.payload = oPayLoad;\n\tif (oMdcLinkControl && oMdcLinkControl.isA(CONSTANTS.sapuimdcLink)) {\n\t\tthis.oMetaModel = oMdcLinkControl.getModel().getMetaModel();\n\t\treturn this.fnTemplateFragment().then(function (oPopoverContent: any) {\n\t\t\tif (oBindingContext) {\n\t\t\t\toPopoverContent.setBindingContext(oBindingContext.getBoundContext());\n\t\t\t}\n\t\t\treturn [oPopoverContent];\n\t\t});\n\t}\n\treturn Promise.resolve([]);\n};\nSimpleLinkDelegate._fetchLinkCustomData = function (_oLink: any) {\n\tif (\n\t\t_oLink.getParent() &&\n\t\t_oLink.isA(CONSTANTS.sapuimdcLink) &&\n\t\t(_oLink.getParent().isA(CONSTANTS.sapmLink) ||\n\t\t\t_oLink.getParent().isA(CONSTANTS.sapmObjectIdentifier) ||\n\t\t\t_oLink.getParent().isA(CONSTANTS.sapmObjectStatus))\n\t) {\n\t\treturn _oLink.getCustomData();\n\t} else {\n\t\treturn undefined;\n\t}\n};\n/**\n * Fetches the relevant {@link sap.ui.mdc.link.LinkItem} for the Link and returns them.\n *\n * @public\n * @param oPayload The Payload of the Link given by the application\n * @param oBindingContext The ContextObject of the Link\n * @param oInfoLog The InfoLog of the Link\n * @returns Once resolved an array of {@link sap.ui.mdc.link.LinkItem} is returned\n */\nSimpleLinkDelegate.fetchLinkItems = function (oPayload: any, oBindingContext: Context, oInfoLog: any) {\n\tif (oBindingContext && SimpleLinkDelegate._getSemanticObjects(oPayload)) {\n\t\tconst oContextObject = oBindingContext.getObject();\n\t\tif (oInfoLog) {\n\t\t\toInfoLog.initialize(SimpleLinkDelegate._getSemanticObjects(oPayload));\n\t\t}\n\t\tconst _oLinkCustomData = this._link && this._fetchLinkCustomData(this._link);\n\t\tthis.aLinkCustomData =\n\t\t\t_oLinkCustomData &&\n\t\t\tthis._fetchLinkCustomData(this._link).map(function (linkItem: any) {\n\t\t\t\treturn linkItem.mProperties.value;\n\t\t\t});\n\n\t\tconst oSemanticAttributesResolved = SimpleLinkDelegate._calculateSemanticAttributes(oContextObject, oPayload, oInfoLog, this._link);\n\t\tconst oSemanticAttributes = oSemanticAttributesResolved.results;\n\t\tconst oPayloadResolved = oSemanticAttributesResolved.payload;\n\n\t\treturn SimpleLinkDelegate._retrieveNavigationTargets(\"\", oSemanticAttributes, oPayloadResolved, oInfoLog, this._link).then(\n\t\t\tfunction (aLinks: any /*oOwnNavigationLink: any*/) {\n\t\t\t\treturn aLinks.length === 0 ? null : aLinks;\n\t\t\t}\n\t\t);\n\t} else {\n\t\treturn Promise.resolve(null);\n\t}\n};\n\n/**\n * Find the type of the link.\n *\n * @param payload The payload of the mdc link.\n * @param aLinkItems Links returned by call to mdc _retrieveUnmodifiedLinkItems.\n * @returns The type of the link as defined by mdc.\n */\nSimpleLinkDelegate._findLinkType = function (payload: any, aLinkItems: any[]): any {\n\tlet nLinkType, oLinkItem;\n\tif (aLinkItems?.length === 1) {\n\t\toLinkItem = new LinkItem({\n\t\t\ttext: aLinkItems[0].getText(),\n\t\t\thref: aLinkItems[0].getHref()\n\t\t});\n\t\tnLinkType = payload.hasQuickViewFacets === \"false\" ? 1 : 2;\n\t} else if (payload.hasQuickViewFacets === \"false\" && aLinkItems?.length === 0) {\n\t\tnLinkType = 0;\n\t} else {\n\t\tnLinkType = 2;\n\t}\n\treturn {\n\t\tlinkType: nLinkType,\n\t\tlinkItem: oLinkItem\n\t};\n};\nSimpleLinkDelegate.fetchLinkType = async function (oPayload: any, oLink: any) {\n\tconst _oCurrentLink = oLink;\n\tconst _oPayload = Object.assign({}, oPayload);\n\tconst oDefaultInitialType = {\n\t\tinitialType: {\n\t\t\ttype: 2,\n\t\t\tdirectLink: undefined\n\t\t},\n\t\truntimeType: undefined\n\t};\n\t// clean appStateKeyMap storage\n\tif (!this.appStateKeyMap) {\n\t\tthis.appStateKeyMap = {};\n\t}\n\n\ttry {\n\t\tif (_oPayload?.semanticObjects) {\n\t\t\tthis._link = oLink;\n\t\t\tconst aLinkItems = await _oCurrentLink._retrieveUnmodifiedLinkItems();\n\t\t\tconst _LinkType = SimpleLinkDelegate._findLinkType(_oPayload, aLinkItems);\n\t\t\treturn {\n\t\t\t\tinitialType: {\n\t\t\t\t\ttype: _LinkType.linkType,\n\t\t\t\t\tdirectLink: _LinkType.linkItem ? _LinkType.linkItem : undefined\n\t\t\t\t},\n\t\t\t\truntimeType: undefined\n\t\t\t};\n\t\t} else if (_oPayload?.contact?.length > 0) {\n\t\t\treturn oDefaultInitialType;\n\t\t} else if (_oPayload?.entityType && _oPayload?.navigationPath) {\n\t\t\treturn oDefaultInitialType;\n\t\t}\n\t\tthrow new Error(\"no payload or semanticObjects found\");\n\t} catch (oError: any) {\n\t\tLog.error(\"Error in SimpleLinkDelegate.fetchLinkType: \", oError);\n\t}\n};\n\nSimpleLinkDelegate._RemoveTitleLinkFromTargets = function (_aLinkItems: any[], _bTitleHasLink: boolean, _aTitleLink: any): any {\n\tlet _sTitleLinkHref, _oMDCLink;\n\tlet bResult: boolean = false;\n\tif (_bTitleHasLink && _aTitleLink && _aTitleLink[0]) {\n\t\tlet linkIsPrimaryAction: boolean, _sLinkIntentWithoutParameters: string;\n\t\tconst _sTitleIntent = _aTitleLink[0].intent.split(\"?\")[0];\n\t\tif (_aLinkItems && _aLinkItems[0]) {\n\t\t\t_sLinkIntentWithoutParameters = `#${_aLinkItems[0].getProperty(\"key\")}`;\n\t\t\tlinkIsPrimaryAction = _sTitleIntent === _sLinkIntentWithoutParameters;\n\t\t\tif (linkIsPrimaryAction) {\n\t\t\t\t_sTitleLinkHref = _aLinkItems[0].getProperty(\"href\");\n\t\t\t\tthis.payload.titlelinkhref = _sTitleLinkHref;\n\t\t\t\tif (_aLinkItems[0].isA(CONSTANTS.sapuimdclinkLinkItem)) {\n\t\t\t\t\t_oMDCLink = _aLinkItems[0].getParent();\n\t\t\t\t\t_oMDCLink.getModel(\"$sapuimdcLink\").setProperty(\"/titleLinkHref\", _sTitleLinkHref);\n\t\t\t\t\tconst aMLinkItems = _oMDCLink\n\t\t\t\t\t\t.getModel(\"$sapuimdcLink\")\n\t\t\t\t\t\t.getProperty(\"/linkItems\")\n\t\t\t\t\t\t.filter(function (oLinkItem: any) {\n\t\t\t\t\t\t\tif (`#${oLinkItem.key}` !== _sLinkIntentWithoutParameters) {\n\t\t\t\t\t\t\t\treturn oLinkItem;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\tif (aMLinkItems && aMLinkItems.length > 0) {\n\t\t\t\t\t\t_oMDCLink.getModel(\"$sapuimdcLink\").setProperty(\"/linkItems/\", aMLinkItems);\n\t\t\t\t\t}\n\t\t\t\t\tbResult = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn bResult;\n};\nSimpleLinkDelegate._IsSemanticObjectDynamic = function (aNewLinkCustomData: any, oThis: any) {\n\tif (aNewLinkCustomData && oThis.aLinkCustomData) {\n\t\treturn (\n\t\t\toThis.aLinkCustomData.filter(function (link: any) {\n\t\t\t\treturn (\n\t\t\t\t\taNewLinkCustomData.filter(function (otherLink: any) {\n\t\t\t\t\t\treturn otherLink !== link;\n\t\t\t\t\t}).length > 0\n\t\t\t\t);\n\t\t\t}).length > 0\n\t\t);\n\t} else {\n\t\treturn false;\n\t}\n};\nSimpleLinkDelegate._getLineContext = function (oView: any, mLineContext: any) {\n\tif (!mLineContext) {\n\t\tif (oView.getAggregation(\"content\")[0] && oView.getAggregation(\"content\")[0].getBindingContext()) {\n\t\t\treturn oView.getAggregation(\"content\")[0].getBindingContext();\n\t\t}\n\t}\n\treturn mLineContext;\n};\nSimpleLinkDelegate._setFilterContextUrlForSelectionVariant = function (\n\toView: any,\n\toSelectionVariant: SelectionVariant,\n\toNavigationService: any\n): SelectionVariant {\n\tif (oView.getViewData().entitySet && oSelectionVariant) {\n\t\tconst sContextUrl = oNavigationService.constructContextUrl(oView.getViewData().entitySet, oView.getModel());\n\t\toSelectionVariant.setFilterContextUrl(sContextUrl);\n\t}\n\treturn oSelectionVariant;\n};\n\nSimpleLinkDelegate._setObjectMappings = function (\n\tsSemanticObject: string,\n\toParams: any,\n\taSemanticObjectMappings: RegisteredSemanticObjectMappings,\n\toSelectionVariant: SelectionVariant\n) {\n\tlet hasChanged = false;\n\tconst modifiedSelectionVariant = new SelectionVariant(oSelectionVariant.toJSONObject());\n\t// if semanticObjectMappings has items with dynamic semanticObjects we need to resolve them using oParams\n\taSemanticObjectMappings.forEach(function (mapping) {\n\t\tlet mappingSemanticObject = mapping.semanticObject;\n\t\tconst mappingSemanticObjectPath = getDynamicPathFromSemanticObject(mapping.semanticObject);\n\t\tif (mappingSemanticObjectPath && oParams[mappingSemanticObjectPath]) {\n\t\t\tmappingSemanticObject = oParams[mappingSemanticObjectPath];\n\t\t}\n\t\tif (sSemanticObject === mappingSemanticObject) {\n\t\t\tconst oMappings = mapping.items;\n\t\t\tfor (const i in oMappings) {\n\t\t\t\tconst sLocalProperty = oMappings[i].key;\n\t\t\t\tconst sSemanticObjectProperty = oMappings[i].value;\n\t\t\t\tif (sLocalProperty !== sSemanticObjectProperty) {\n\t\t\t\t\tif (oParams[sLocalProperty]) {\n\t\t\t\t\t\tmodifiedSelectionVariant.removeParameter(sSemanticObjectProperty);\n\t\t\t\t\t\tmodifiedSelectionVariant.removeSelectOption(sSemanticObjectProperty);\n\t\t\t\t\t\tmodifiedSelectionVariant.renameParameter(sLocalProperty, sSemanticObjectProperty);\n\t\t\t\t\t\tmodifiedSelectionVariant.renameSelectOption(sLocalProperty, sSemanticObjectProperty);\n\t\t\t\t\t\toParams[sSemanticObjectProperty] = oParams[sLocalProperty];\n\t\t\t\t\t\tdelete oParams[sLocalProperty];\n\t\t\t\t\t\thasChanged = true;\n\t\t\t\t\t}\n\t\t\t\t\t// We remove the parameter as there is no value\n\n\t\t\t\t\t// The local property comes from a navigation property\n\t\t\t\t\telse if (sLocalProperty.split(\"/\").length > 1) {\n\t\t\t\t\t\t// find the property to be removed\n\t\t\t\t\t\tconst propertyToBeRemoved = sLocalProperty.split(\"/\").slice(-1)[0];\n\t\t\t\t\t\t// The navigation property has no value\n\t\t\t\t\t\tif (!oParams[propertyToBeRemoved]) {\n\t\t\t\t\t\t\tdelete oParams[propertyToBeRemoved];\n\t\t\t\t\t\t\tmodifiedSelectionVariant.removeParameter(propertyToBeRemoved);\n\t\t\t\t\t\t\tmodifiedSelectionVariant.removeSelectOption(propertyToBeRemoved);\n\t\t\t\t\t\t} else if (propertyToBeRemoved !== sSemanticObjectProperty) {\n\t\t\t\t\t\t\t// The navigation property has a value and properties names are different\n\t\t\t\t\t\t\tmodifiedSelectionVariant.renameParameter(propertyToBeRemoved, sSemanticObjectProperty);\n\t\t\t\t\t\t\tmodifiedSelectionVariant.renameSelectOption(propertyToBeRemoved, sSemanticObjectProperty);\n\t\t\t\t\t\t\toParams[sSemanticObjectProperty] = oParams[propertyToBeRemoved];\n\t\t\t\t\t\t\tdelete oParams[propertyToBeRemoved];\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdelete oParams[sLocalProperty];\n\t\t\t\t\t\tmodifiedSelectionVariant.removeParameter(sSemanticObjectProperty);\n\t\t\t\t\t\tmodifiedSelectionVariant.removeSelectOption(sSemanticObjectProperty);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\treturn { params: oParams, hasChanged, selectionVariant: modifiedSelectionVariant };\n};\n\n/**\n * Call getAppStateKeyAndUrlParameters in navigation service and cache its results.\n *\n * @param _this The instance of quickviewdelegate.\n * @param navigationService The navigation service.\n * @param selectionVariant The current selection variant.\n * @param semanticObject The current semanticObject.\n */\nSimpleLinkDelegate._getAppStateKeyAndUrlParameters = async function (\n\t_this: typeof SimpleLinkDelegate,\n\tnavigationService: any,\n\tselectionVariant: SelectionVariant,\n\tsemanticObject: string\n): Promise<string[]> {\n\tlet aValues = [];\n\n\t// check if default cache contains already the unmodified selectionVariant\n\tif (deepEqual(selectionVariant, _this.appStateKeyMap[\"\"]?.selectionVariant)) {\n\t\tconst defaultCache = _this.appStateKeyMap[\"\"];\n\t\treturn [defaultCache.semanticAttributes, defaultCache.appstatekey];\n\t}\n\t// update url parameters because there is a change in selection variant\n\tif (\n\t\t_this.appStateKeyMap[`${semanticObject}`] === undefined ||\n\t\t!deepEqual(_this.appStateKeyMap[`${semanticObject}`].selectionVariant, selectionVariant)\n\t) {\n\t\taValues = await toES6Promise(navigationService.getAppStateKeyAndUrlParameters(selectionVariant.toJSONString()));\n\t\t_this.appStateKeyMap[`${semanticObject}`] = {\n\t\t\tsemanticAttributes: aValues[0],\n\t\t\tappstatekey: aValues[1],\n\t\t\tselectionVariant: selectionVariant\n\t\t};\n\t} else {\n\t\tconst cache = _this.appStateKeyMap[`${semanticObject}`];\n\t\taValues = [cache.semanticAttributes, cache.appstatekey];\n\t}\n\treturn aValues;\n};\n\nSimpleLinkDelegate._getLinkItemWithNewParameter = async function (\n\t_that: any,\n\t_bTitleHasLink: boolean,\n\t_aTitleLink: string[],\n\t_oLinkItem: any,\n\t_oShellServices: any,\n\t_oPayload: any,\n\t_oParams: any,\n\t_sAppStateKey: string,\n\t_oSelectionVariant: SelectionVariant,\n\t_oNavigationService: NavigationService\n): Promise<any> {\n\treturn _oShellServices.expandCompactHash(_oLinkItem.getHref()).then(async function (sHash: any) {\n\t\tconst oShellHash = _oShellServices.parseShellHash(sHash);\n\t\tconst params = Object.assign({}, _oParams);\n\t\tconst {\n\t\t\tparams: oNewParams,\n\t\t\thasChanged,\n\t\t\tselectionVariant: newSelectionVariant\n\t\t} = SimpleLinkDelegate._setObjectMappings(oShellHash.semanticObject, params, _oPayload.semanticObjectMappings, _oSelectionVariant);\n\t\tif (hasChanged) {\n\t\t\tconst aValues = await SimpleLinkDelegate._getAppStateKeyAndUrlParameters(\n\t\t\t\t_that,\n\t\t\t\t_oNavigationService,\n\t\t\t\tnewSelectionVariant,\n\t\t\t\toShellHash.semanticObject\n\t\t\t);\n\n\t\t\t_sAppStateKey = aValues[1];\n\t\t}\n\t\tconst oNewShellHash = {\n\t\t\ttarget: {\n\t\t\t\tsemanticObject: oShellHash.semanticObject,\n\t\t\t\taction: oShellHash.action\n\t\t\t},\n\t\t\tparams: oNewParams,\n\t\t\tappStateKey: _sAppStateKey\n\t\t};\n\t\tdelete oNewShellHash.params[\"sap-xapp-state\"];\n\t\t_oLinkItem.setHref(`#${_oShellServices.constructShellHash(oNewShellHash)}`);\n\t\t_oPayload.aSemanticLinks.push(_oLinkItem.getHref());\n\t\t// The link is removed from the target list because the title link has same target.\n\t\treturn SimpleLinkDelegate._RemoveTitleLinkFromTargets.bind(_that)([_oLinkItem], _bTitleHasLink, _aTitleLink);\n\t});\n};\nSimpleLinkDelegate._removeEmptyLinkItem = function (aLinkItems: any): any[] {\n\treturn aLinkItems.filter((linkItem: any) => {\n\t\treturn linkItem !== undefined;\n\t});\n};\n/**\n * Enables the modification of LinkItems before the popover opens. This enables additional parameters\n * to be added to the link.\n *\n * @param oPayload The payload of the Link given by the application\n * @param oBindingContext The binding context of the Link\n * @param aLinkItems The LinkItems of the Link that can be modified\n * @returns Once resolved an array of {@link sap.ui.mdc.link.LinkItem} is returned\n */\nSimpleLinkDelegate.modifyLinkItems = async function (oPayload: any, oBindingContext: Context, aLinkItems: any) {\n\tconst primaryActionIsActive = (await FieldHelper.checkPrimaryActions(oPayload, true)) as any;\n\tconst aTitleLink = primaryActionIsActive.titleLink;\n\tconst bTitleHasLink: boolean = primaryActionIsActive.hasTitleLink;\n\tif (aLinkItems.length !== 0) {\n\t\tthis.payload = oPayload;\n\t\tconst oLink = aLinkItems[0].getParent();\n\t\tconst oView = CommonUtils.getTargetView(oLink);\n\t\tconst oAppComponent = CommonUtils.getAppComponent(oView);\n\t\tconst oShellServices = oAppComponent.getShellServices();\n\t\tif (!oShellServices.hasUShell()) {\n\t\t\tLog.error(\"QuickViewDelegate: Cannot retrieve the shell services\");\n\t\t\treturn Promise.reject();\n\t\t}\n\t\tconst oMetaModel = oView.getModel().getMetaModel() as ODataMetaModel;\n\t\tlet mLineContext = oLink.getBindingContext();\n\t\tconst oTargetInfo: any = {\n\t\t\tsemanticObject: oPayload.mainSemanticObject,\n\t\t\taction: \"\"\n\t\t};\n\n\t\ttry {\n\t\t\tconst aNewLinkCustomData =\n\t\t\t\toLink &&\n\t\t\t\tthis._fetchLinkCustomData(oLink).map(function (linkItem: any) {\n\t\t\t\t\treturn linkItem.mProperties.value;\n\t\t\t\t});\n\t\t\t// check if all link items in this.aLinkCustomData are also present in aNewLinkCustomData\n\t\t\tif (SimpleLinkDelegate._IsSemanticObjectDynamic(aNewLinkCustomData, this)) {\n\t\t\t\t// if the customData changed there are different LinkItems to display\n\t\t\t\tconst oSemanticAttributesResolved = SimpleLinkDelegate._calculateSemanticAttributes(\n\t\t\t\t\toBindingContext.getObject(),\n\t\t\t\t\toPayload,\n\t\t\t\t\tundefined,\n\t\t\t\t\tthis._link\n\t\t\t\t);\n\t\t\t\tconst oSemanticAttributes = oSemanticAttributesResolved.results;\n\t\t\t\tconst oPayloadResolved = oSemanticAttributesResolved.payload;\n\t\t\t\taLinkItems = await SimpleLinkDelegate._retrieveNavigationTargets(\n\t\t\t\t\t\"\",\n\t\t\t\t\toSemanticAttributes,\n\t\t\t\t\toPayloadResolved,\n\t\t\t\t\tundefined,\n\t\t\t\t\tthis._link\n\t\t\t\t);\n\t\t\t}\n\t\t\tconst oNavigationService = oAppComponent.getNavigationService();\n\t\t\tconst oController = oView.getController() as PageController;\n\t\t\tlet oSelectionVariant;\n\t\t\tlet mLineContextData;\n\t\t\tmLineContext = SimpleLinkDelegate._getLineContext(oView, mLineContext);\n\t\t\tconst sMetaPath = oMetaModel.getMetaPath(mLineContext.getPath());\n\t\t\tmLineContextData = oController._intentBasedNavigation.removeSensitiveData(mLineContext.getObject(), sMetaPath);\n\t\t\tmLineContextData = oController._intentBasedNavigation.prepareContextForExternalNavigation(mLineContextData, mLineContext);\n\t\t\toSelectionVariant = oNavigationService.mixAttributesAndSelectionVariant(mLineContextData.semanticAttributes, {});\n\t\t\toTargetInfo.propertiesWithoutConflict = mLineContextData.propertiesWithoutConflict;\n\t\t\t//TO modify the selection variant from the Extension API\n\t\t\toController.intentBasedNavigation.adaptNavigationContext(oSelectionVariant, oTargetInfo);\n\t\t\tSimpleLinkDelegate._removeTechnicalParameters(oSelectionVariant);\n\t\t\toSelectionVariant = SimpleLinkDelegate._setFilterContextUrlForSelectionVariant(oView, oSelectionVariant, oNavigationService);\n\t\t\tconst aValues = await SimpleLinkDelegate._getAppStateKeyAndUrlParameters(this, oNavigationService, oSelectionVariant, \"\");\n\t\t\tconst oParams = aValues[0];\n\t\t\tconst appStateKey = aValues[1];\n\t\t\tlet titleLinktoBeRemove: any;\n\t\t\toPayload.aSemanticLinks = [];\n\t\t\taLinkItems = SimpleLinkDelegate._removeEmptyLinkItem(aLinkItems);\n\t\t\tfor (const index in aLinkItems) {\n\t\t\t\ttitleLinktoBeRemove = await SimpleLinkDelegate._getLinkItemWithNewParameter(\n\t\t\t\t\tthis,\n\t\t\t\t\tbTitleHasLink,\n\t\t\t\t\taTitleLink,\n\t\t\t\t\taLinkItems[index],\n\t\t\t\t\toShellServices,\n\t\t\t\t\toPayload,\n\t\t\t\t\toParams,\n\t\t\t\t\tappStateKey,\n\t\t\t\t\toSelectionVariant,\n\t\t\t\t\toNavigationService\n\t\t\t\t);\n\t\t\t\tif (titleLinktoBeRemove === true) {\n\t\t\t\t\taLinkItems[index] = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn SimpleLinkDelegate._removeEmptyLinkItem(aLinkItems);\n\t\t} catch (oError: any) {\n\t\t\tLog.error(\"Error while getting the navigation service\", oError);\n\t\t\treturn undefined;\n\t\t}\n\t} else {\n\t\treturn aLinkItems;\n\t}\n};\nSimpleLinkDelegate.beforeNavigationCallback = function (oPayload: any, oEvent: any) {\n\tconst oSource = oEvent.getSource(),\n\t\tsHref = oEvent.getParameter(\"href\"),\n\t\toURLParsing = Factory.getService(\"URLParsing\"),\n\t\toHash = sHref && oURLParsing.parseShellHash(sHref);\n\n\tKeepAliveHelper.storeControlRefreshStrategyForHash(oSource, oHash);\n\n\treturn Promise.resolve(true);\n};\nSimpleLinkDelegate._removeTechnicalParameters = function (oSelectionVariant: any) {\n\toSelectionVariant.removeSelectOption(\"@odata.context\");\n\toSelectionVariant.removeSelectOption(\"@odata.metadataEtag\");\n\toSelectionVariant.removeSelectOption(\"SAP__Messages\");\n};\n\nSimpleLinkDelegate._getSemanticObjectCustomDataValue = function (aLinkCustomData: any, oSemanticObjectsResolved: any): void {\n\tlet sPropertyName: string, sCustomDataValue: string;\n\tfor (let iCustomDataCount = 0; iCustomDataCount < aLinkCustomData.length; iCustomDataCount++) {\n\t\tsPropertyName = aLinkCustomData[iCustomDataCount].getKey();\n\t\tsCustomDataValue = aLinkCustomData[iCustomDataCount].getValue();\n\t\toSemanticObjectsResolved[sPropertyName] = { value: sCustomDataValue };\n\t}\n};\n\n/**\n * Check the semantic object name if it is dynamic or not.\n *\n * @private\n * @param pathOrValue The semantic object path or name\n * @returns True if semantic object is dynamic\n */\nSimpleLinkDelegate._isDynamicPath = function (pathOrValue: string): boolean {\n\tif (pathOrValue && pathOrValue.indexOf(\"{\") === 0 && pathOrValue.indexOf(\"}\") === pathOrValue.length - 1) {\n\t\treturn true;\n\t} else {\n\t\treturn false;\n\t}\n};\n\n/**\n * Update the payload with semantic object values from custom data of Link.\n *\n * @private\n * @param payload The payload of the mdc link.\n * @param newPayload The new updated payload.\n * @param semanticObjectName The semantic object name resolved.\n */\nSimpleLinkDelegate._updatePayloadWithResolvedSemanticObjectValue = function (\n\tpayload: RegisteredPayload,\n\tnewPayload: RegisteredPayload,\n\tsemanticObjectName: string\n): void {\n\tif (SimpleLinkDelegate._isDynamicPath(payload.mainSemanticObject)) {\n\t\tif (semanticObjectName) {\n\t\t\tnewPayload.mainSemanticObject = semanticObjectName;\n\t\t} else {\n\t\t\t// no value from Custom Data, so removing mainSemanticObject\n\t\t\tnewPayload.mainSemanticObject = undefined;\n\t\t}\n\t}\n\tswitch (typeof semanticObjectName) {\n\t\tcase \"string\":\n\t\t\tnewPayload.semanticObjectsResolved?.push(semanticObjectName);\n\t\t\tnewPayload.semanticObjects.push(semanticObjectName);\n\t\t\tbreak;\n\t\tcase \"object\":\n\t\t\tfor (const j in semanticObjectName as string[]) {\n\t\t\t\tnewPayload.semanticObjectsResolved?.push(semanticObjectName[j]);\n\t\t\t\tnewPayload.semanticObjects.push(semanticObjectName[j]);\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t}\n};\n\nSimpleLinkDelegate._createNewPayloadWithDynamicSemanticObjectsResolved = function (\n\tpayload: RegisteredPayload,\n\tsemanticObjectsResolved: any,\n\tnewPayload: RegisteredPayload\n): void {\n\tlet semanticObjectName: string, tmpPropertyName: string;\n\tfor (const i in payload.semanticObjects) {\n\t\tsemanticObjectName = payload.semanticObjects[i];\n\t\tif (SimpleLinkDelegate._isDynamicPath(semanticObjectName)) {\n\t\t\ttmpPropertyName = semanticObjectName.substr(1, semanticObjectName.indexOf(\"}\") - 1);\n\t\t\tsemanticObjectName = semanticObjectsResolved[tmpPropertyName].value;\n\t\t\tSimpleLinkDelegate._updatePayloadWithResolvedSemanticObjectValue(payload, newPayload, semanticObjectName);\n\t\t} else {\n\t\t\tnewPayload.semanticObjects.push(semanticObjectName);\n\t\t}\n\t}\n};\n\n/**\n * Update the semantic object name from the resolved value for the mappings attributes.\n *\n * @private\n * @param mdcPayload The payload given by the application.\n * @param mdcPayloadWithDynamicSemanticObjectsResolved The payload with the resolved value for the semantic object name.\n * @param newPayload The new updated payload.\n */\nSimpleLinkDelegate._updateSemanticObjectsForMappings = function (\n\tmdcPayload: RegisteredPayload,\n\tmdcPayloadWithDynamicSemanticObjectsResolved: RegisteredPayload,\n\tnewPayload: RegisteredPayload\n): void {\n\t// update the semantic object name from the resolved ones in the semantic object mappings.\n\tmdcPayloadWithDynamicSemanticObjectsResolved.semanticObjectMappings.forEach(function (\n\t\tsemanticObjectMapping: RegisteredSemanticObjectMapping\n\t) {\n\t\tif (semanticObjectMapping.semanticObject && SimpleLinkDelegate._isDynamicPath(semanticObjectMapping.semanticObject)) {\n\t\t\tsemanticObjectMapping.semanticObject =\n\t\t\t\tnewPayload.semanticObjects[mdcPayload.semanticObjects.indexOf(semanticObjectMapping.semanticObject)];\n\t\t}\n\t});\n};\n\n/**\n * Update the semantic object name from the resolved value for the unavailable actions.\n *\n * @private\n * @param mdcPayload The payload given by the application.\n * @param mdcPayloadSemanticObjectUnavailableActions The unavailable actions given by the application.\n * @param mdcPayloadWithDynamicSemanticObjectsResolved The updated payload with the resolved value for the semantic object name for the unavailable actions.\n */\nSimpleLinkDelegate._updateSemanticObjectsUnavailableActions = function (\n\tmdcPayload: RegisteredPayload,\n\tmdcPayloadSemanticObjectUnavailableActions: RegisteredSemanticObjectUnavailableActions,\n\tmdcPayloadWithDynamicSemanticObjectsResolved: RegisteredPayload\n): void {\n\tlet _Index: any;\n\tmdcPayloadSemanticObjectUnavailableActions.forEach(function (semanticObjectUnavailableAction: any) {\n\t\t// Dynamic SemanticObject has an unavailable action\n\t\tif (\n\t\t\tsemanticObjectUnavailableAction?.semanticObject &&\n\t\t\tSimpleLinkDelegate._isDynamicPath(semanticObjectUnavailableAction.semanticObject)\n\t\t) {\n\t\t\t_Index = mdcPayload.semanticObjects.findIndex(function (semanticObject: string) {\n\t\t\t\treturn semanticObject === semanticObjectUnavailableAction.semanticObject;\n\t\t\t});\n\t\t\tif (_Index !== undefined) {\n\t\t\t\t// Get the SemanticObject name resolved to a value\n\t\t\t\tsemanticObjectUnavailableAction.semanticObject = mdcPayloadWithDynamicSemanticObjectsResolved.semanticObjects[_Index];\n\t\t\t}\n\t\t}\n\t});\n};\n\n/**\n * Update the semantic object name from the resolved value for the unavailable actions.\n *\n * @private\n * @param mdcPayload The updated payload with the information from custom data provided in the link.\n * @param mdcPayloadWithDynamicSemanticObjectsResolved The payload updated with resolved semantic objects names.\n */\nSimpleLinkDelegate._updateSemanticObjectsWithResolvedValue = function (\n\tmdcPayload: RegisteredPayload,\n\tmdcPayloadWithDynamicSemanticObjectsResolved: RegisteredPayload\n): void {\n\tfor (let newSemanticObjectsCount = 0; newSemanticObjectsCount < mdcPayload.semanticObjects.length; newSemanticObjectsCount++) {\n\t\tif (\n\t\t\tmdcPayloadWithDynamicSemanticObjectsResolved.mainSemanticObject ===\n\t\t\t(mdcPayload.semanticObjectsResolved && mdcPayload.semanticObjectsResolved[newSemanticObjectsCount])\n\t\t) {\n\t\t\tmdcPayloadWithDynamicSemanticObjectsResolved.mainSemanticObject = mdcPayload.semanticObjects[newSemanticObjectsCount];\n\t\t}\n\t\tif (mdcPayloadWithDynamicSemanticObjectsResolved.semanticObjects[newSemanticObjectsCount]) {\n\t\t\tmdcPayloadWithDynamicSemanticObjectsResolved.semanticObjects[newSemanticObjectsCount] =\n\t\t\t\tmdcPayload.semanticObjects[newSemanticObjectsCount];\n\t\t} else {\n\t\t\t// no Custom Data value for a Semantic Object name with path\n\t\t\tmdcPayloadWithDynamicSemanticObjectsResolved.semanticObjects.splice(newSemanticObjectsCount, 1);\n\t\t}\n\t}\n};\n\n/**\n * Remove empty semantic object mappings and if there is no semantic object name, link to it.\n *\n * @private\n * @param mdcPayloadWithDynamicSemanticObjectsResolved The payload used to check the mappings of the semantic objects.\n */\nSimpleLinkDelegate._removeEmptySemanticObjectsMappings = function (mdcPayloadWithDynamicSemanticObjectsResolved: RegisteredPayload): void {\n\t// remove undefined Semantic Object Mapping\n\tfor (\n\t\tlet mappingsCount = 0;\n\t\tmappingsCount < mdcPayloadWithDynamicSemanticObjectsResolved.semanticObjectMappings.length;\n\t\tmappingsCount++\n\t) {\n\t\tif (\n\t\t\tmdcPayloadWithDynamicSemanticObjectsResolved.semanticObjectMappings[mappingsCount] &&\n\t\t\tmdcPayloadWithDynamicSemanticObjectsResolved.semanticObjectMappings[mappingsCount].semanticObject === undefined\n\t\t) {\n\t\t\tmdcPayloadWithDynamicSemanticObjectsResolved.semanticObjectMappings.splice(mappingsCount, 1);\n\t\t}\n\t}\n};\n\nSimpleLinkDelegate._setPayloadWithDynamicSemanticObjectsResolved = function (\n\tpayload: any,\n\tnewPayload: RegisteredPayload\n): RegisteredPayload {\n\tlet oPayloadWithDynamicSemanticObjectsResolved: RegisteredPayload;\n\tif (newPayload.semanticObjectsResolved && newPayload.semanticObjectsResolved.length > 0) {\n\t\toPayloadWithDynamicSemanticObjectsResolved = {\n\t\t\tentityType: payload.entityType,\n\t\t\tdataField: payload.dataField,\n\t\t\tcontact: payload.contact,\n\t\t\tmainSemanticObject: payload.mainSemanticObject,\n\t\t\tnavigationPath: payload.navigationPath,\n\t\t\tpropertyPathLabel: payload.propertyPathLabel,\n\t\t\tsemanticObjectMappings: deepClone(payload.semanticObjectMappings),\n\t\t\tsemanticObjects: newPayload.semanticObjects\n\t\t};\n\t\tSimpleLinkDelegate._updateSemanticObjectsForMappings(payload, oPayloadWithDynamicSemanticObjectsResolved, newPayload);\n\t\tconst _SemanticObjectUnavailableActions: RegisteredSemanticObjectUnavailableActions = deepClone(\n\t\t\tpayload.semanticObjectUnavailableActions\n\t\t);\n\t\tSimpleLinkDelegate._updateSemanticObjectsUnavailableActions(\n\t\t\tpayload,\n\t\t\t_SemanticObjectUnavailableActions,\n\t\t\toPayloadWithDynamicSemanticObjectsResolved\n\t\t);\n\t\toPayloadWithDynamicSemanticObjectsResolved.semanticObjectUnavailableActions = _SemanticObjectUnavailableActions;\n\t\tif (newPayload.mainSemanticObject) {\n\t\t\toPayloadWithDynamicSemanticObjectsResolved.mainSemanticObject = newPayload.mainSemanticObject;\n\t\t} else {\n\t\t\toPayloadWithDynamicSemanticObjectsResolved.mainSemanticObject = undefined;\n\t\t}\n\t\tSimpleLinkDelegate._updateSemanticObjectsWithResolvedValue(newPayload, oPayloadWithDynamicSemanticObjectsResolved);\n\t\tSimpleLinkDelegate._removeEmptySemanticObjectsMappings(oPayloadWithDynamicSemanticObjectsResolved);\n\t\treturn oPayloadWithDynamicSemanticObjectsResolved;\n\t} else {\n\t\treturn {} as any;\n\t}\n};\n\nSimpleLinkDelegate._getPayloadWithDynamicSemanticObjectsResolved = function (payload: any, linkCustomData: any): any {\n\tlet oPayloadWithDynamicSemanticObjectsResolved: any;\n\tconst oSemanticObjectsResolved: any = {};\n\tconst newPayload: RegisteredPayload = { semanticObjects: [], semanticObjectsResolved: [], semanticObjectMappings: [] };\n\tif (payload.semanticObjects) {\n\t\t// sap.m.Link has custom data with Semantic Objects names resolved\n\t\tif (linkCustomData && linkCustomData.length > 0) {\n\t\t\tSimpleLinkDelegate._getSemanticObjectCustomDataValue(linkCustomData, oSemanticObjectsResolved);\n\t\t\tSimpleLinkDelegate._createNewPayloadWithDynamicSemanticObjectsResolved(payload, oSemanticObjectsResolved, newPayload);\n\t\t\toPayloadWithDynamicSemanticObjectsResolved = SimpleLinkDelegate._setPayloadWithDynamicSemanticObjectsResolved(\n\t\t\t\tpayload,\n\t\t\t\tnewPayload\n\t\t\t);\n\t\t\treturn oPayloadWithDynamicSemanticObjectsResolved;\n\t\t}\n\t} else {\n\t\treturn undefined;\n\t}\n};\n\nSimpleLinkDelegate._updatePayloadWithSemanticAttributes = function (\n\taSemanticObjects: any,\n\toInfoLog: any,\n\toContextObject: any,\n\toResults: any,\n\tmSemanticObjectMappings: any\n): void {\n\taSemanticObjects.forEach(function (sSemanticObject: any) {\n\t\tif (oInfoLog) {\n\t\t\toInfoLog.addContextObject(sSemanticObject, oContextObject);\n\t\t}\n\t\toResults[sSemanticObject] = {};\n\t\tfor (const sAttributeName in oContextObject) {\n\t\t\tlet oAttribute = null,\n\t\t\t\toTransformationAdditional = null;\n\t\t\tif (oInfoLog) {\n\t\t\t\toAttribute = oInfoLog.getSemanticObjectAttribute(sSemanticObject, sAttributeName);\n\t\t\t\tif (!oAttribute) {\n\t\t\t\t\toAttribute = oInfoLog.createAttributeStructure();\n\t\t\t\t\toInfoLog.addSemanticObjectAttribute(sSemanticObject, sAttributeName, oAttribute);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Ignore undefined and null values\n\t\t\tif (oContextObject[sAttributeName] === undefined || oContextObject[sAttributeName] === null) {\n\t\t\t\tif (oAttribute) {\n\t\t\t\t\toAttribute.transformations.push({\n\t\t\t\t\t\tvalue: undefined,\n\t\t\t\t\t\tdescription: \"\\u2139 Undefined and null values have been removed in SimpleLinkDelegate.\"\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t// Ignore plain objects (BCP 1770496639)\n\t\t\tif (isPlainObject(oContextObject[sAttributeName])) {\n\t\t\t\tif (mSemanticObjectMappings && mSemanticObjectMappings[sSemanticObject]) {\n\t\t\t\t\tconst aKeys = Object.keys(mSemanticObjectMappings[sSemanticObject]);\n\t\t\t\t\tlet sNewAttributeNameMapped, sNewAttributeName, sValue, sKey;\n\t\t\t\t\tfor (let index = 0; index < aKeys.length; index++) {\n\t\t\t\t\t\tsKey = aKeys[index];\n\t\t\t\t\t\tif (sKey.indexOf(sAttributeName) === 0) {\n\t\t\t\t\t\t\tsNewAttributeNameMapped = mSemanticObjectMappings[sSemanticObject][sKey];\n\t\t\t\t\t\t\tsNewAttributeName = sKey.split(\"/\")[sKey.split(\"/\").length - 1];\n\t\t\t\t\t\t\tsValue = oContextObject[sAttributeName][sNewAttributeName];\n\t\t\t\t\t\t\tif (sNewAttributeNameMapped && sNewAttributeName && sValue) {\n\t\t\t\t\t\t\t\toResults[sSemanticObject][sNewAttributeNameMapped] = sValue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (oAttribute) {\n\t\t\t\t\toAttribute.transformations.push({\n\t\t\t\t\t\tvalue: undefined,\n\t\t\t\t\t\tdescription: \"\\u2139 Plain objects has been removed in SimpleLinkDelegate.\"\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Map the attribute name only if 'semanticObjectMapping' is defined.\n\t\t\t// Note: under defined 'semanticObjectMapping' we also mean an empty annotation or an annotation with empty record\n\t\t\tconst sAttributeNameMapped =\n\t\t\t\tmSemanticObjectMappings &&\n\t\t\t\tmSemanticObjectMappings[sSemanticObject] &&\n\t\t\t\tmSemanticObjectMappings[sSemanticObject][sAttributeName]\n\t\t\t\t\t? mSemanticObjectMappings[sSemanticObject][sAttributeName]\n\t\t\t\t\t: sAttributeName;\n\n\t\t\tif (oAttribute && sAttributeName !== sAttributeNameMapped) {\n\t\t\t\toTransformationAdditional = {\n\t\t\t\t\tvalue: undefined,\n\t\t\t\t\tdescription: `\\u2139 The attribute ${sAttributeName} has been renamed to ${sAttributeNameMapped} in SimpleLinkDelegate.`,\n\t\t\t\t\treason: `\\ud83d\\udd34 A com.sap.vocabularies.Common.v1.SemanticObjectMapping annotation is defined for semantic object ${sSemanticObject} with source attribute ${sAttributeName} and target attribute ${sAttributeNameMapped}. You can modify the annotation if the mapping result is not what you expected.`\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// If more then one local property maps to the same target property (clash situation)\n\t\t\t// we take the value of the last property and write an error log\n\t\t\tif (oResults[sSemanticObject][sAttributeNameMapped]) {\n\t\t\t\tLog.error(\n\t\t\t\t\t`SimpleLinkDelegate: The attribute ${sAttributeName} can not be renamed to the attribute ${sAttributeNameMapped} due to a clash situation. This can lead to wrong navigation later on.`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Copy the value replacing the attribute name by semantic object name\n\t\t\toResults[sSemanticObject][sAttributeNameMapped] = oContextObject[sAttributeName];\n\n\t\t\tif (oAttribute) {\n\t\t\t\tif (oTransformationAdditional) {\n\t\t\t\t\toAttribute.transformations.push(oTransformationAdditional);\n\t\t\t\t\tconst aAttributeNew = oInfoLog.createAttributeStructure();\n\t\t\t\t\taAttributeNew.transformations.push({\n\t\t\t\t\t\tvalue: oContextObject[sAttributeName],\n\t\t\t\t\t\tdescription: `\\u2139 The attribute ${sAttributeNameMapped} with the value ${oContextObject[sAttributeName]} has been added due to a mapping rule regarding the attribute ${sAttributeName} in SimpleLinkDelegate.`\n\t\t\t\t\t});\n\t\t\t\t\toInfoLog.addSemanticObjectAttribute(sSemanticObject, sAttributeNameMapped, aAttributeNew);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n};\n\n/**\n * Checks which attributes of the ContextObject belong to which SemanticObject and maps them into a two dimensional array.\n *\n * @private\n * @param oContextObject The BindingContext of the SourceControl of the Link / of the Link itself if not set\n * @param oPayload The payload given by the application\n * @param oInfoLog The corresponding InfoLog of the Link\n * @param oLink The corresponding Link\n * @returns A two dimensional array which maps a given SemanticObject name together with a given attribute name to the value of that given attribute\n */\nSimpleLinkDelegate._calculateSemanticAttributes = function (oContextObject: any, oPayload: any, oInfoLog: any, oLink: any) {\n\tconst aLinkCustomData = oLink && this._fetchLinkCustomData(oLink);\n\tconst oPayloadWithDynamicSemanticObjectsResolved: any = SimpleLinkDelegate._getPayloadWithDynamicSemanticObjectsResolved(\n\t\toPayload,\n\t\taLinkCustomData\n\t);\n\tconst oPayloadResolved = oPayloadWithDynamicSemanticObjectsResolved ? oPayloadWithDynamicSemanticObjectsResolved : oPayload;\n\tthis.resolvedpayload = oPayloadWithDynamicSemanticObjectsResolved;\n\tconst aSemanticObjects = SimpleLinkDelegate._getSemanticObjects(oPayloadResolved);\n\tconst mSemanticObjectMappings = SimpleLinkDelegate._convertSemanticObjectMapping(\n\t\tSimpleLinkDelegate._getSemanticObjectMappings(oPayloadResolved)\n\t);\n\tif (!aSemanticObjects.length) {\n\t\treturn { payload: oPayloadResolved, results: {} };\n\t}\n\tconst oResults: any = {};\n\tSimpleLinkDelegate._updatePayloadWithSemanticAttributes(aSemanticObjects, oInfoLog, oContextObject, oResults, mSemanticObjectMappings);\n\treturn { payload: oPayloadResolved, results: oResults };\n};\n/**\n * Retrieves the actual targets for the navigation of the link. This uses the UShell loaded by the {@link sap.ui.mdc.link.Factory} to retrieve\n * the navigation targets from the FLP service.\n *\n * @private\n * @param sAppStateKey Key of the appstate (not used yet)\n * @param oSemanticAttributes The calculated by _calculateSemanticAttributes\n * @param oPayload The payload given by the application\n * @param oInfoLog The corresponding InfoLog of the Link\n * @param oLink The corresponding Link\n * @returns Resolving into availableAtions and ownNavigation containing an array of {@link sap.ui.mdc.link.LinkItem}\n */\nSimpleLinkDelegate._retrieveNavigationTargets = function (\n\tsAppStateKey: string,\n\toSemanticAttributes: any,\n\toPayload: any,\n\toInfoLog: any,\n\toLink: any\n) {\n\tif (!oPayload.semanticObjects) {\n\t\treturn Promise.resolve([]);\n\t}\n\tconst aSemanticObjects = oPayload.semanticObjects;\n\tconst oNavigationTargets: any = {\n\t\townNavigation: undefined,\n\t\tavailableActions: []\n\t};\n\tlet iSuperiorActionLinksFound = 0;\n\treturn Core.loadLibrary(\"sap.ui.fl\", {\n\t\tasync: true\n\t}).then(() => {\n\t\treturn new Promise((resolve) => {\n\t\t\tsap.ui.require([\"sap/ui/fl/Utils\"], async (Utils: any) => {\n\t\t\t\tconst oAppComponent = Utils.getAppComponentForControl(oLink === undefined ? this.oControl : oLink);\n\t\t\t\tconst oShellServices = oAppComponent ? oAppComponent.getShellServices() : null;\n\t\t\t\tif (!oShellServices) {\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tresolve(oNavigationTargets.availableActions, oNavigationTargets.ownNavigation);\n\t\t\t\t}\n\t\t\t\tif (!oShellServices.hasUShell()) {\n\t\t\t\t\tLog.error(\"SimpleLinkDelegate: Service 'CrossApplicationNavigation' or 'URLParsing' could not be obtained\");\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tresolve(oNavigationTargets.availableActions, oNavigationTargets.ownNavigation);\n\t\t\t\t}\n\t\t\t\tconst aParams = aSemanticObjects.map(function (sSemanticObject: any) {\n\t\t\t\t\treturn [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsemanticObject: sSemanticObject,\n\t\t\t\t\t\t\tparams: oSemanticAttributes ? oSemanticAttributes[sSemanticObject] : undefined,\n\t\t\t\t\t\t\tappStateKey: sAppStateKey,\n\t\t\t\t\t\t\tsortResultsBy: \"text\"\n\t\t\t\t\t\t}\n\t\t\t\t\t];\n\t\t\t\t});\n\t\t\t\ttry {\n\t\t\t\t\tconst aLinks = await oShellServices.getLinks(aParams);\n\t\t\t\t\tlet bHasLinks = false;\n\t\t\t\t\tfor (let i = 0; i < aLinks.length; i++) {\n\t\t\t\t\t\tfor (let j = 0; j < aLinks[i].length; j++) {\n\t\t\t\t\t\t\tif (aLinks[i][j].length > 0) {\n\t\t\t\t\t\t\t\tbHasLinks = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (bHasLinks) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!aLinks || !aLinks.length || !bHasLinks) {\n\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tresolve(oNavigationTargets.availableActions, oNavigationTargets.ownNavigation);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst aSemanticObjectUnavailableActions = SimpleLinkDelegate._getSemanticObjectUnavailableActions(oPayload);\n\t\t\t\t\tconst oUnavailableActions =\n\t\t\t\t\t\tSimpleLinkDelegate._convertSemanticObjectUnavailableAction(aSemanticObjectUnavailableActions);\n\t\t\t\t\tlet sCurrentHash = FieldRuntime._fnFixHashQueryString(CommonUtils.getHash());\n\n\t\t\t\t\tif (sCurrentHash) {\n\t\t\t\t\t\t// BCP 1770315035: we have to set the end-point '?' of action in order to avoid matching of \"#SalesOrder-manage\" in \"#SalesOrder-manageFulfillment\"\n\t\t\t\t\t\tsCurrentHash += \"?\";\n\t\t\t\t\t}\n\n\t\t\t\t\tconst fnIsUnavailableAction = function (sSemanticObject: any, sAction: any) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t!!oUnavailableActions &&\n\t\t\t\t\t\t\t!!oUnavailableActions[sSemanticObject] &&\n\t\t\t\t\t\t\toUnavailableActions[sSemanticObject].indexOf(sAction) > -1\n\t\t\t\t\t\t);\n\t\t\t\t\t};\n\t\t\t\t\tconst fnAddLink = function (_oLink: any) {\n\t\t\t\t\t\tconst oShellHash = oShellServices.parseShellHash(_oLink.intent);\n\t\t\t\t\t\tif (fnIsUnavailableAction(oShellHash.semanticObject, oShellHash.action)) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst sHref = `#${oShellServices.constructShellHash({ target: { shellHash: _oLink.intent } })}`;\n\n\t\t\t\t\t\tif (_oLink.intent && _oLink.intent.indexOf(sCurrentHash) === 0) {\n\t\t\t\t\t\t\t// Prevent current app from being listed\n\t\t\t\t\t\t\t// NOTE: If the navigation target exists in\n\t\t\t\t\t\t\t// multiple contexts (~XXXX in hash) they will all be skipped\n\t\t\t\t\t\t\toNavigationTargets.ownNavigation = new LinkItem({\n\t\t\t\t\t\t\t\thref: sHref,\n\t\t\t\t\t\t\t\ttext: _oLink.text\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst oLinkItem = new LinkItem({\n\t\t\t\t\t\t\t// As the retrieveNavigationTargets method can be called several time we can not create the LinkItem instance with the same id\n\t\t\t\t\t\t\tkey:\n\t\t\t\t\t\t\t\toShellHash.semanticObject && oShellHash.action\n\t\t\t\t\t\t\t\t\t? `${oShellHash.semanticObject}-${oShellHash.action}`\n\t\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\t\ttext: _oLink.text,\n\t\t\t\t\t\t\tdescription: undefined,\n\t\t\t\t\t\t\thref: sHref,\n\t\t\t\t\t\t\t// target: not supported yet\n\t\t\t\t\t\t\ticon: undefined, //_oLink.icon,\n\t\t\t\t\t\t\tinitiallyVisible: _oLink.tags && _oLink.tags.indexOf(\"superiorAction\") > -1\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (oLinkItem.getProperty(\"initiallyVisible\")) {\n\t\t\t\t\t\t\tiSuperiorActionLinksFound++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\toNavigationTargets.availableActions.push(oLinkItem);\n\n\t\t\t\t\t\tif (oInfoLog) {\n\t\t\t\t\t\t\toInfoLog.addSemanticObjectIntent(oShellHash.semanticObject, {\n\t\t\t\t\t\t\t\tintent: oLinkItem.getHref(),\n\t\t\t\t\t\t\t\ttext: oLinkItem.getText()\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tfor (let n = 0; n < aSemanticObjects.length; n++) {\n\t\t\t\t\t\taLinks[n][0].forEach(fnAddLink);\n\t\t\t\t\t}\n\t\t\t\t\tif (iSuperiorActionLinksFound === 0) {\n\t\t\t\t\t\tfor (let iLinkItemIndex = 0; iLinkItemIndex < oNavigationTargets.availableActions.length; iLinkItemIndex++) {\n\t\t\t\t\t\t\tif (iLinkItemIndex < this.getConstants().iLinksShownInPopup) {\n\t\t\t\t\t\t\t\toNavigationTargets.availableActions[iLinkItemIndex].setProperty(\"initiallyVisible\", true);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tresolve(oNavigationTargets.availableActions, oNavigationTargets.ownNavigation);\n\t\t\t\t} catch (oError) {\n\t\t\t\t\tLog.error(\"SimpleLinkDelegate: '_retrieveNavigationTargets' failed executing getLinks method\");\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tresolve(oNavigationTargets.availableActions, oNavigationTargets.ownNavigation);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t});\n};\nSimpleLinkDelegate._getSemanticObjects = function (oPayload: any) {\n\treturn oPayload.semanticObjects ? oPayload.semanticObjects : [];\n};\nSimpleLinkDelegate._getSemanticObjectUnavailableActions = function (oPayload: any) {\n\tconst aSemanticObjectUnavailableActions: any[] = [];\n\tif (oPayload.semanticObjectUnavailableActions) {\n\t\toPayload.semanticObjectUnavailableActions.forEach(function (oSemanticObjectUnavailableAction: any) {\n\t\t\taSemanticObjectUnavailableActions.push(\n\t\t\t\tnew SemanticObjectUnavailableAction({\n\t\t\t\t\tsemanticObject: oSemanticObjectUnavailableAction.semanticObject,\n\t\t\t\t\tactions: oSemanticObjectUnavailableAction.actions\n\t\t\t\t})\n\t\t\t);\n\t\t});\n\t}\n\treturn aSemanticObjectUnavailableActions;\n};\n\n/**\n * This will return an array of {@link sap.ui.mdc.link.SemanticObjectMapping} depending on the given payload.\n *\n * @private\n * @param oPayload The payload defined by the application\n * @returns An array of semantic object mappings.\n */\nSimpleLinkDelegate._getSemanticObjectMappings = function (oPayload: any) {\n\tconst aSemanticObjectMappings: any[] = [];\n\tlet aSemanticObjectMappingItems: any[] = [];\n\tif (oPayload.semanticObjectMappings) {\n\t\toPayload.semanticObjectMappings.forEach(function (oSemanticObjectMapping: any) {\n\t\t\taSemanticObjectMappingItems = [];\n\t\t\tif (oSemanticObjectMapping.items) {\n\t\t\t\toSemanticObjectMapping.items.forEach(function (oSemanticObjectMappingItem: any) {\n\t\t\t\t\taSemanticObjectMappingItems.push(\n\t\t\t\t\t\tnew SemanticObjectMappingItem({\n\t\t\t\t\t\t\tkey: oSemanticObjectMappingItem.key,\n\t\t\t\t\t\t\tvalue: oSemanticObjectMappingItem.value\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\t\t\taSemanticObjectMappings.push(\n\t\t\t\tnew SemanticObjectMapping({\n\t\t\t\t\tsemanticObject: oSemanticObjectMapping.semanticObject,\n\t\t\t\t\titems: aSemanticObjectMappingItems\n\t\t\t\t})\n\t\t\t);\n\t\t});\n\t}\n\treturn aSemanticObjectMappings;\n};\n/**\n * Converts a given array of SemanticObjectMapping into a Map containing SemanticObjects as Keys and a Map of it's corresponding SemanticObjectMappings as values.\n *\n * @private\n * @param aSemanticObjectMappings An array of SemanticObjectMappings.\n * @returns The converterd SemanticObjectMappings\n */\nSimpleLinkDelegate._convertSemanticObjectMapping = function (aSemanticObjectMappings: any[]) {\n\tif (!aSemanticObjectMappings.length) {\n\t\treturn undefined;\n\t}\n\tconst mSemanticObjectMappings: any = {};\n\taSemanticObjectMappings.forEach(function (oSemanticObjectMapping: any) {\n\t\tif (!oSemanticObjectMapping.getSemanticObject()) {\n\t\t\tthrow Error(\n\t\t\t\t`SimpleLinkDelegate: 'semanticObject' property with value '${oSemanticObjectMapping.getSemanticObject()}' is not valid`\n\t\t\t);\n\t\t}\n\t\tmSemanticObjectMappings[oSemanticObjectMapping.getSemanticObject()] = oSemanticObjectMapping\n\t\t\t.getItems()\n\t\t\t.reduce(function (oMap: any, oItem: any) {\n\t\t\t\toMap[oItem.getKey()] = oItem.getValue();\n\t\t\t\treturn oMap;\n\t\t\t}, {});\n\t});\n\treturn mSemanticObjectMappings;\n};\n/**\n * Converts a given array of SemanticObjectUnavailableActions into a map containing SemanticObjects as keys and a map of its corresponding SemanticObjectUnavailableActions as values.\n *\n * @private\n * @param aSemanticObjectUnavailableActions The SemanticObjectUnavailableActions converted\n * @returns The map containing the converted SemanticObjectUnavailableActions\n */\nSimpleLinkDelegate._convertSemanticObjectUnavailableAction = function (aSemanticObjectUnavailableActions: any[]) {\n\tlet _SemanticObjectName: any;\n\tlet _SemanticObjectHasAlreadyUnavailableActions: any;\n\tlet _UnavailableActions: any[] = [];\n\tif (!aSemanticObjectUnavailableActions.length) {\n\t\treturn undefined;\n\t}\n\tconst mSemanticObjectUnavailableActions: any = {};\n\taSemanticObjectUnavailableActions.forEach(function (oSemanticObjectUnavailableActions: any) {\n\t\t_SemanticObjectName = oSemanticObjectUnavailableActions.getSemanticObject();\n\t\tif (!_SemanticObjectName) {\n\t\t\tthrow Error(`SimpleLinkDelegate: 'semanticObject' property with value '${_SemanticObjectName}' is not valid`);\n\t\t}\n\t\t_UnavailableActions = oSemanticObjectUnavailableActions.getActions();\n\t\tif (mSemanticObjectUnavailableActions[_SemanticObjectName] === undefined) {\n\t\t\tmSemanticObjectUnavailableActions[_SemanticObjectName] = _UnavailableActions;\n\t\t} else {\n\t\t\t_SemanticObjectHasAlreadyUnavailableActions = mSemanticObjectUnavailableActions[_SemanticObjectName];\n\t\t\t_UnavailableActions.forEach(function (UnavailableAction: string) {\n\t\t\t\t_SemanticObjectHasAlreadyUnavailableActions.push(UnavailableAction);\n\t\t\t});\n\t\t\tmSemanticObjectUnavailableActions[_SemanticObjectName] = _SemanticObjectHasAlreadyUnavailableActions;\n\t\t}\n\t});\n\treturn mSemanticObjectUnavailableActions;\n};\n\nexport default SimpleLinkDelegate;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;EAgDA,MAAMA,kBAAkB,GAAGC,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEC,YAAY,CAAQ;EACjE,MAAMC,SAAS,GAAG;IACjBC,kBAAkB,EAAE,CAAC;IACrBC,QAAQ,EAAE,YAAY;IACtBC,YAAY,EAAE,iBAAiB;IAC/BC,oBAAoB,EAAE,0BAA0B;IAChDC,oBAAoB,EAAE,wBAAwB;IAC9CC,gBAAgB,EAAE;EACnB,CAAC;EACDV,kBAAkB,CAACW,YAAY,GAAG,YAAY;IAC7C,OAAOP,SAAS;EACjB,CAAC;EACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACAJ,kBAAkB,CAACY,cAAc,GAAG,UAAUC,QAAa,EAAEC,UAA0B,EAAE;IACxF,IAAIA,UAAU,EAAE;MACf,OAAOA,UAAU,CAACC,oBAAoB,CAACF,QAAQ,CAACG,UAAU,CAAC;IAC5D,CAAC,MAAM;MACN,OAAOC,SAAS;IACjB;EACD,CAAC;EACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACAjB,kBAAkB,CAACkB,kBAAkB,GAAG,UAAUL,QAAgB,EAAEC,UAAkB,EAAE;IACvF,IAAIA,UAAU,EAAE;MACf,OAAO,IAAIK,SAAS,CAACN,QAAQ,CAAC;IAC/B,CAAC,MAAM;MACN,OAAOI,SAAS;IACjB;EACD,CAAC;EACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACAjB,kBAAkB,CAACoB,aAAa,GAAG,UAAUP,QAAa,EAAEC,UAA0B,EAAE;IACvF,OAAOA,UAAU,CAACC,oBAAoB,CAACF,QAAQ,CAACQ,SAAS,CAAC;EAC3D,CAAC;EACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACArB,kBAAkB,CAACsB,WAAW,GAAG,UAAUT,QAAa,EAAEC,UAA0B,EAAE;IACrF,OAAOA,UAAU,CAACC,oBAAoB,CAACF,QAAQ,CAACU,OAAO,CAAC;EACzD,CAAC;EACDvB,kBAAkB,CAACwB,kBAAkB,GAAG,YAAY;IACnD,IAAIC,aAAqB,EAAEC,aAAa;IACxC,MAAMC,cAAmB,GAAG,CAAC,CAAC;IAC9B,IAAIC,aAAa;;IAEjB;IACA,IAAI,IAAI,CAACC,eAAe,EAAE;MACzBD,aAAa,GAAG,IAAI,CAACC,eAAe;IACrC,CAAC,MAAM;MACND,aAAa,GAAG,IAAI,CAACE,OAAO;IAC7B;IAEA,IAAIF,aAAa,IAAI,CAACA,aAAa,CAACG,MAAM,EAAE;MAC3CH,aAAa,CAACG,MAAM,GAAG,IAAI,CAACC,QAAQ,IAAI,IAAI,CAACA,QAAQ,CAACC,GAAG,CAAC7B,SAAS,CAACG,YAAY,CAAC,GAAG,IAAI,CAACyB,QAAQ,CAACE,KAAK,EAAE,GAAGjB,SAAS;IACtH;IAEA,IAAIW,aAAa,CAACG,MAAM,EAAE;MACzBL,aAAa,GAAG,IAAI,CAACM,QAAQ,CAACG,QAAQ,CAAC,eAAe,CAAC,CAACC,WAAW,CAAC,gBAAgB,CAAC;MACrFR,aAAa,CAACS,SAAS,GAAGX,aAAa;IACxC;IAEA,MAAMY,eAAe,GAAG,IAAI,CAACpB,kBAAkB,CAACU,aAAa,EAAE,IAAI,CAACd,UAAU,CAAC;IAC/E,IAAI,CAACyB,aAAa,GAAGD,eAAe;IAEpC,IAAIV,aAAa,CAACZ,UAAU,IAAI,IAAI,CAACJ,cAAc,CAACgB,aAAa,EAAE,IAAI,CAACd,UAAU,CAAC,EAAE;MACpFW,aAAa,GAAG,mDAAmD;MACnEE,cAAc,CAACa,eAAe,GAAG;QAChCxB,UAAU,EAAE,IAAI,CAACJ,cAAc,CAACgB,aAAa,EAAE,IAAI,CAACd,UAAU,CAAC;QAC/D2B,QAAQ,EAAEH,eAAe,CAACvB,oBAAoB,CAAC,GAAG;MACnD,CAAC;MACDY,cAAc,CAACe,MAAM,GAAG;QACvB1B,UAAU,EAAE,IAAI,CAACF,UAAU;QAC3B2B,QAAQ,EAAEH;MACX,CAAC;IACF,CAAC,MAAM,IAAIV,aAAa,CAACP,SAAS,IAAI,IAAI,CAACD,aAAa,CAACQ,aAAa,EAAE,IAAI,CAACd,UAAU,CAAC,EAAE;MACzFW,aAAa,GAAG,sDAAsD;MACtEE,cAAc,CAACa,eAAe,GAAG;QAChCnB,SAAS,EAAE,IAAI,CAACD,aAAa,CAACQ,aAAa,EAAE,IAAI,CAACd,UAAU,CAAC;QAC7D2B,QAAQ,EAAEH,eAAe,CAACvB,oBAAoB,CAAC,GAAG;MACnD,CAAC;MACDY,cAAc,CAACe,MAAM,GAAG;QACvBrB,SAAS,EAAE,IAAI,CAACP,UAAU;QAC1B2B,QAAQ,EAAEH;MACX,CAAC;IACF;IACAX,cAAc,CAACe,MAAM,CAACC,SAAS,GAAG,IAAI,CAAC7B,UAAU;IACjDa,cAAc,CAACe,MAAM,CAACE,SAAS,GAAG,IAAI,CAAC9B,UAAU;IACjD,IAAI,IAAI,CAACkB,QAAQ,IAAI,IAAI,CAACA,QAAQ,CAACG,QAAQ,CAAC,UAAU,CAAC,EAAE;MACxDR,cAAc,CAACe,MAAM,CAACG,QAAQ,GAAG,IAAI,CAACb,QAAQ,CAACG,QAAQ,CAAC,UAAU,CAAC;MACnER,cAAc,CAACa,eAAe,CAACK,QAAQ,GAAG,IAAI,CAACb,QAAQ,CAACG,QAAQ,CAAC,UAAU,CAAC,CAACpB,oBAAoB,CAAC,GAAG,CAAC;IACvG;IAEA,MAAM+B,SAAS,GAAGC,oBAAoB,CAACC,YAAY,CAACvB,aAAa,EAAG,UAAU,CAAC;IAE/E,OAAOwB,OAAO,CAACC,OAAO,CAACC,eAAe,CAACC,OAAO,CAACN,SAAS,EAAE;MAAEO,IAAI,EAAE5B;IAAe,CAAC,EAAEE,cAAc,CAAC,CAAC,CAClG2B,IAAI,CAAEC,iBAAsB,IAAK;MACjC,OAAOC,QAAQ,CAACC,IAAI,CAAC;QACpBC,UAAU,EAAEH,iBAAiB;QAC7BI,UAAU,EAAE;MACb,CAAC,CAAC;IACH,CAAC,CAAC,CACDL,IAAI,CAAEM,eAAoB,IAAK;MAC/B,IAAIA,eAAe,EAAE;QACpB,IAAIjC,cAAc,CAACe,MAAM,IAAIf,cAAc,CAACe,MAAM,CAACD,QAAQ,EAAE;UAC5DmB,eAAe,CAACC,QAAQ,CAAClC,cAAc,CAACe,MAAM,CAACD,QAAQ,EAAE,UAAU,CAAC;UACpEmB,eAAe,CAACE,iBAAiB,CAACnC,cAAc,CAACa,eAAe,CAACC,QAAQ,EAAE,UAAU,CAAC;QACvF;QAEA,IAAId,cAAc,CAACa,eAAe,IAAIb,cAAc,CAACa,eAAe,CAACxB,UAAU,EAAE;UAChF4C,eAAe,CAACC,QAAQ,CAAClC,cAAc,CAACe,MAAM,CAAC1B,UAAU,EAAE,YAAY,CAAC;UACxE4C,eAAe,CAACE,iBAAiB,CAACnC,cAAc,CAACa,eAAe,CAACxB,UAAU,EAAE,YAAY,CAAC;QAC3F;MACD;MACA,IAAI,CAACa,eAAe,GAAGZ,SAAS;MAChC,OAAO2C,eAAe;IACvB,CAAC,CAAC;EACJ,CAAC;EACD5D,kBAAkB,CAAC+D,sBAAsB,GAAG,UAAUC,QAAa,EAAEC,eAAoB,EAAE;IAAA;IAC1F,IAAI,CAACjC,QAAQ,GAAGiC,eAAe;IAC/B,MAAMC,oBAAoB,GAAGF,QAAQ,aAARA,QAAQ,gDAARA,QAAQ,CAAEG,cAAc,0DAAxB,sBAA0BC,KAAK,CAAC,SAAS,CAAC;IACvE,MAAMC,eAAe,GACpBH,oBAAoB,IAAIA,oBAAoB,CAACI,MAAM,GAAG,CAAC,IAAIJ,oBAAoB,CAAC,CAAC,CAAC,GAC/ED,eAAe,CAAC9B,QAAQ,EAAE,CAACoC,WAAW,CAACL,oBAAoB,CAAC,CAAC,CAAC,EAAED,eAAe,CAACO,iBAAiB,EAAE,EAAE;MAAEC,YAAY,EAAE;IAAK,CAAC,CAAC,GAC5H,IAAI;IACR,IAAI,CAAC3C,OAAO,GAAGkC,QAAQ;IACvB,IAAIC,eAAe,IAAIA,eAAe,CAAChC,GAAG,CAAC7B,SAAS,CAACG,YAAY,CAAC,EAAE;MACnE,IAAI,CAACO,UAAU,GAAGmD,eAAe,CAAC9B,QAAQ,EAAE,CAACuC,YAAY,EAAE;MAC3D,OAAO,IAAI,CAAClD,kBAAkB,EAAE,CAAC8B,IAAI,CAAC,UAAUM,eAAoB,EAAE;QACrE,IAAIS,eAAe,EAAE;UACpBT,eAAe,CAACE,iBAAiB,CAACO,eAAe,CAACM,eAAe,EAAE,CAAC;QACrE;QACA,OAAO,CAACf,eAAe,CAAC;MACzB,CAAC,CAAC;IACH;IACA,OAAOX,OAAO,CAACC,OAAO,CAAC,EAAE,CAAC;EAC3B,CAAC;EACDlD,kBAAkB,CAAC4E,oBAAoB,GAAG,UAAUC,MAAW,EAAE;IAChE,IACCA,MAAM,CAACC,SAAS,EAAE,IAClBD,MAAM,CAAC5C,GAAG,CAAC7B,SAAS,CAACG,YAAY,CAAC,KACjCsE,MAAM,CAACC,SAAS,EAAE,CAAC7C,GAAG,CAAC7B,SAAS,CAACE,QAAQ,CAAC,IAC1CuE,MAAM,CAACC,SAAS,EAAE,CAAC7C,GAAG,CAAC7B,SAAS,CAACK,oBAAoB,CAAC,IACtDoE,MAAM,CAACC,SAAS,EAAE,CAAC7C,GAAG,CAAC7B,SAAS,CAACM,gBAAgB,CAAC,CAAC,EACnD;MACD,OAAOmE,MAAM,CAACE,aAAa,EAAE;IAC9B,CAAC,MAAM;MACN,OAAO9D,SAAS;IACjB;EACD,CAAC;EACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACAjB,kBAAkB,CAACgF,cAAc,GAAG,UAAUnE,QAAa,EAAEwD,eAAwB,EAAEY,QAAa,EAAE;IACrG,IAAIZ,eAAe,IAAIrE,kBAAkB,CAACkF,mBAAmB,CAACrE,QAAQ,CAAC,EAAE;MACxE,MAAMsE,cAAc,GAAGd,eAAe,CAACe,SAAS,EAAE;MAClD,IAAIH,QAAQ,EAAE;QACbA,QAAQ,CAACI,UAAU,CAACrF,kBAAkB,CAACkF,mBAAmB,CAACrE,QAAQ,CAAC,CAAC;MACtE;MACA,MAAMyE,gBAAgB,GAAG,IAAI,CAACC,KAAK,IAAI,IAAI,CAACX,oBAAoB,CAAC,IAAI,CAACW,KAAK,CAAC;MAC5E,IAAI,CAACC,eAAe,GACnBF,gBAAgB,IAChB,IAAI,CAACV,oBAAoB,CAAC,IAAI,CAACW,KAAK,CAAC,CAACE,GAAG,CAAC,UAAUC,QAAa,EAAE;QAClE,OAAOA,QAAQ,CAACC,WAAW,CAACC,KAAK;MAClC,CAAC,CAAC;MAEH,MAAMC,2BAA2B,GAAG7F,kBAAkB,CAAC8F,4BAA4B,CAACX,cAAc,EAAEtE,QAAQ,EAAEoE,QAAQ,EAAE,IAAI,CAACM,KAAK,CAAC;MACnI,MAAMQ,mBAAmB,GAAGF,2BAA2B,CAACG,OAAO;MAC/D,MAAMC,gBAAgB,GAAGJ,2BAA2B,CAAC/D,OAAO;MAE5D,OAAO9B,kBAAkB,CAACkG,0BAA0B,CAAC,EAAE,EAAEH,mBAAmB,EAAEE,gBAAgB,EAAEhB,QAAQ,EAAE,IAAI,CAACM,KAAK,CAAC,CAACjC,IAAI,CACzH,UAAU6C,MAAW,EAA8B;QAClD,OAAOA,MAAM,CAAC7B,MAAM,KAAK,CAAC,GAAG,IAAI,GAAG6B,MAAM;MAC3C,CAAC,CACD;IACF,CAAC,MAAM;MACN,OAAOlD,OAAO,CAACC,OAAO,CAAC,IAAI,CAAC;IAC7B;EACD,CAAC;;EAED;AACA;AACA;AACA;AACA;AACA;AACA;EACAlD,kBAAkB,CAACoG,aAAa,GAAG,UAAUtE,OAAY,EAAEuE,UAAiB,EAAO;IAClF,IAAIC,SAAS,EAAEC,SAAS;IACxB,IAAI,CAAAF,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAE/B,MAAM,MAAK,CAAC,EAAE;MAC7BiC,SAAS,GAAG,IAAIC,QAAQ,CAAC;QACxBC,IAAI,EAAEJ,UAAU,CAAC,CAAC,CAAC,CAACK,OAAO,EAAE;QAC7BC,IAAI,EAAEN,UAAU,CAAC,CAAC,CAAC,CAACO,OAAO;MAC5B,CAAC,CAAC;MACFN,SAAS,GAAGxE,OAAO,CAAC+E,kBAAkB,KAAK,OAAO,GAAG,CAAC,GAAG,CAAC;IAC3D,CAAC,MAAM,IAAI/E,OAAO,CAAC+E,kBAAkB,KAAK,OAAO,IAAI,CAAAR,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAE/B,MAAM,MAAK,CAAC,EAAE;MAC9EgC,SAAS,GAAG,CAAC;IACd,CAAC,MAAM;MACNA,SAAS,GAAG,CAAC;IACd;IACA,OAAO;MACNQ,QAAQ,EAAER,SAAS;MACnBZ,QAAQ,EAAEa;IACX,CAAC;EACF,CAAC;EACDvG,kBAAkB,CAAC+G,aAAa,GAAG,gBAAgBlG,QAAa,EAAEmG,KAAU,EAAE;IAC7E,MAAMC,aAAa,GAAGD,KAAK;IAC3B,MAAME,SAAS,GAAGjH,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEW,QAAQ,CAAC;IAC7C,MAAMsG,mBAAmB,GAAG;MAC3BC,WAAW,EAAE;QACZC,IAAI,EAAE,CAAC;QACPC,UAAU,EAAErG;MACb,CAAC;MACDsG,WAAW,EAAEtG;IACd,CAAC;IACD;IACA,IAAI,CAAC,IAAI,CAACuG,cAAc,EAAE;MACzB,IAAI,CAACA,cAAc,GAAG,CAAC,CAAC;IACzB;IAEA,IAAI;MAAA;MACH,IAAIN,SAAS,aAATA,SAAS,eAATA,SAAS,CAAEO,eAAe,EAAE;QAC/B,IAAI,CAAClC,KAAK,GAAGyB,KAAK;QAClB,MAAMX,UAAU,GAAG,MAAMY,aAAa,CAACS,4BAA4B,EAAE;QACrE,MAAMC,SAAS,GAAG3H,kBAAkB,CAACoG,aAAa,CAACc,SAAS,EAAEb,UAAU,CAAC;QACzE,OAAO;UACNe,WAAW,EAAE;YACZC,IAAI,EAAEM,SAAS,CAACb,QAAQ;YACxBQ,UAAU,EAAEK,SAAS,CAACjC,QAAQ,GAAGiC,SAAS,CAACjC,QAAQ,GAAGzE;UACvD,CAAC;UACDsG,WAAW,EAAEtG;QACd,CAAC;MACF,CAAC,MAAM,IAAI,CAAAiG,SAAS,aAATA,SAAS,4CAATA,SAAS,CAAE3F,OAAO,sDAAlB,kBAAoB+C,MAAM,IAAG,CAAC,EAAE;QAC1C,OAAO6C,mBAAmB;MAC3B,CAAC,MAAM,IAAID,SAAS,aAATA,SAAS,eAATA,SAAS,CAAElG,UAAU,IAAIkG,SAAS,aAATA,SAAS,eAATA,SAAS,CAAE/C,cAAc,EAAE;QAC9D,OAAOgD,mBAAmB;MAC3B;MACA,MAAM,IAAIS,KAAK,CAAC,qCAAqC,CAAC;IACvD,CAAC,CAAC,OAAOC,MAAW,EAAE;MACrBC,GAAG,CAACC,KAAK,CAAC,6CAA6C,EAAEF,MAAM,CAAC;IACjE;EACD,CAAC;EAED7H,kBAAkB,CAACgI,2BAA2B,GAAG,UAAUC,WAAkB,EAAEC,cAAuB,EAAEC,WAAgB,EAAO;IAC9H,IAAIC,eAAe,EAAEC,SAAS;IAC9B,IAAIC,OAAgB,GAAG,KAAK;IAC5B,IAAIJ,cAAc,IAAIC,WAAW,IAAIA,WAAW,CAAC,CAAC,CAAC,EAAE;MACpD,IAAII,mBAA4B,EAAEC,6BAAqC;MACvE,MAAMC,aAAa,GAAGN,WAAW,CAAC,CAAC,CAAC,CAACO,MAAM,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;MACzD,IAAIV,WAAW,IAAIA,WAAW,CAAC,CAAC,CAAC,EAAE;QAClCO,6BAA6B,GAAI,IAAGP,WAAW,CAAC,CAAC,CAAC,CAAC7F,WAAW,CAAC,KAAK,CAAE,EAAC;QACvEmG,mBAAmB,GAAGE,aAAa,KAAKD,6BAA6B;QACrE,IAAID,mBAAmB,EAAE;UACxBH,eAAe,GAAGH,WAAW,CAAC,CAAC,CAAC,CAAC7F,WAAW,CAAC,MAAM,CAAC;UACpD,IAAI,CAACN,OAAO,CAAC8G,aAAa,GAAGR,eAAe;UAC5C,IAAIH,WAAW,CAAC,CAAC,CAAC,CAAChG,GAAG,CAAC7B,SAAS,CAACI,oBAAoB,CAAC,EAAE;YACvD6H,SAAS,GAAGJ,WAAW,CAAC,CAAC,CAAC,CAACnD,SAAS,EAAE;YACtCuD,SAAS,CAAClG,QAAQ,CAAC,eAAe,CAAC,CAAC0G,WAAW,CAAC,gBAAgB,EAAET,eAAe,CAAC;YAClF,MAAMU,WAAW,GAAGT,SAAS,CAC3BlG,QAAQ,CAAC,eAAe,CAAC,CACzBC,WAAW,CAAC,YAAY,CAAC,CACzB2G,MAAM,CAAC,UAAUxC,SAAc,EAAE;cACjC,IAAK,IAAGA,SAAS,CAACyC,GAAI,EAAC,KAAKR,6BAA6B,EAAE;gBAC1D,OAAOjC,SAAS;cACjB;YACD,CAAC,CAAC;YACH,IAAIuC,WAAW,IAAIA,WAAW,CAACxE,MAAM,GAAG,CAAC,EAAE;cAC1C+D,SAAS,CAAClG,QAAQ,CAAC,eAAe,CAAC,CAAC0G,WAAW,CAAC,aAAa,EAAEC,WAAW,CAAC;YAC5E;YACAR,OAAO,GAAG,IAAI;UACf;QACD;MACD;IACD;IACA,OAAOA,OAAO;EACf,CAAC;EACDtI,kBAAkB,CAACiJ,wBAAwB,GAAG,UAAUC,kBAAuB,EAAEC,KAAU,EAAE;IAC5F,IAAID,kBAAkB,IAAIC,KAAK,CAAC3D,eAAe,EAAE;MAChD,OACC2D,KAAK,CAAC3D,eAAe,CAACuD,MAAM,CAAC,UAAUK,IAAS,EAAE;QACjD,OACCF,kBAAkB,CAACH,MAAM,CAAC,UAAUM,SAAc,EAAE;UACnD,OAAOA,SAAS,KAAKD,IAAI;QAC1B,CAAC,CAAC,CAAC9E,MAAM,GAAG,CAAC;MAEf,CAAC,CAAC,CAACA,MAAM,GAAG,CAAC;IAEf,CAAC,MAAM;MACN,OAAO,KAAK;IACb;EACD,CAAC;EACDtE,kBAAkB,CAACsJ,eAAe,GAAG,UAAUC,KAAU,EAAEC,YAAiB,EAAE;IAC7E,IAAI,CAACA,YAAY,EAAE;MAClB,IAAID,KAAK,CAACE,cAAc,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAIF,KAAK,CAACE,cAAc,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAACjF,iBAAiB,EAAE,EAAE;QACjG,OAAO+E,KAAK,CAACE,cAAc,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAACjF,iBAAiB,EAAE;MAC9D;IACD;IACA,OAAOgF,YAAY;EACpB,CAAC;EACDxJ,kBAAkB,CAAC0J,uCAAuC,GAAG,UAC5DH,KAAU,EACVI,iBAAmC,EACnCC,kBAAuB,EACJ;IACnB,IAAIL,KAAK,CAACM,WAAW,EAAE,CAAClH,SAAS,IAAIgH,iBAAiB,EAAE;MACvD,MAAMG,WAAW,GAAGF,kBAAkB,CAACG,mBAAmB,CAACR,KAAK,CAACM,WAAW,EAAE,CAAClH,SAAS,EAAE4G,KAAK,CAACpH,QAAQ,EAAE,CAAC;MAC3GwH,iBAAiB,CAACK,mBAAmB,CAACF,WAAW,CAAC;IACnD;IACA,OAAOH,iBAAiB;EACzB,CAAC;EAED3J,kBAAkB,CAACiK,kBAAkB,GAAG,UACvCC,eAAuB,EACvBC,OAAY,EACZC,uBAAyD,EACzDT,iBAAmC,EAClC;IACD,IAAIU,UAAU,GAAG,KAAK;IACtB,MAAMC,wBAAwB,GAAG,IAAIC,gBAAgB,CAACZ,iBAAiB,CAACa,YAAY,EAAE,CAAC;IACvF;IACAJ,uBAAuB,CAACK,OAAO,CAAC,UAAUC,OAAO,EAAE;MAClD,IAAIC,qBAAqB,GAAGD,OAAO,CAACE,cAAc;MAClD,MAAMC,yBAAyB,GAAGC,gCAAgC,CAACJ,OAAO,CAACE,cAAc,CAAC;MAC1F,IAAIC,yBAAyB,IAAIV,OAAO,CAACU,yBAAyB,CAAC,EAAE;QACpEF,qBAAqB,GAAGR,OAAO,CAACU,yBAAyB,CAAC;MAC3D;MACA,IAAIX,eAAe,KAAKS,qBAAqB,EAAE;QAC9C,MAAMI,SAAS,GAAGL,OAAO,CAACM,KAAK;QAC/B,KAAK,MAAMC,CAAC,IAAIF,SAAS,EAAE;UAC1B,MAAMG,cAAc,GAAGH,SAAS,CAACE,CAAC,CAAC,CAACjC,GAAG;UACvC,MAAMmC,uBAAuB,GAAGJ,SAAS,CAACE,CAAC,CAAC,CAACrF,KAAK;UAClD,IAAIsF,cAAc,KAAKC,uBAAuB,EAAE;YAC/C,IAAIhB,OAAO,CAACe,cAAc,CAAC,EAAE;cAC5BZ,wBAAwB,CAACc,eAAe,CAACD,uBAAuB,CAAC;cACjEb,wBAAwB,CAACe,kBAAkB,CAACF,uBAAuB,CAAC;cACpEb,wBAAwB,CAACgB,eAAe,CAACJ,cAAc,EAAEC,uBAAuB,CAAC;cACjFb,wBAAwB,CAACiB,kBAAkB,CAACL,cAAc,EAAEC,uBAAuB,CAAC;cACpFhB,OAAO,CAACgB,uBAAuB,CAAC,GAAGhB,OAAO,CAACe,cAAc,CAAC;cAC1D,OAAOf,OAAO,CAACe,cAAc,CAAC;cAC9Bb,UAAU,GAAG,IAAI;YAClB;YACA;;YAEA;YAAA,KACK,IAAIa,cAAc,CAACvC,KAAK,CAAC,GAAG,CAAC,CAACrE,MAAM,GAAG,CAAC,EAAE;cAC9C;cACA,MAAMkH,mBAAmB,GAAGN,cAAc,CAACvC,KAAK,CAAC,GAAG,CAAC,CAAC8C,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;cAClE;cACA,IAAI,CAACtB,OAAO,CAACqB,mBAAmB,CAAC,EAAE;gBAClC,OAAOrB,OAAO,CAACqB,mBAAmB,CAAC;gBACnClB,wBAAwB,CAACc,eAAe,CAACI,mBAAmB,CAAC;gBAC7DlB,wBAAwB,CAACe,kBAAkB,CAACG,mBAAmB,CAAC;cACjE,CAAC,MAAM,IAAIA,mBAAmB,KAAKL,uBAAuB,EAAE;gBAC3D;gBACAb,wBAAwB,CAACgB,eAAe,CAACE,mBAAmB,EAAEL,uBAAuB,CAAC;gBACtFb,wBAAwB,CAACiB,kBAAkB,CAACC,mBAAmB,EAAEL,uBAAuB,CAAC;gBACzFhB,OAAO,CAACgB,uBAAuB,CAAC,GAAGhB,OAAO,CAACqB,mBAAmB,CAAC;gBAC/D,OAAOrB,OAAO,CAACqB,mBAAmB,CAAC;cACpC;YACD,CAAC,MAAM;cACN,OAAOrB,OAAO,CAACe,cAAc,CAAC;cAC9BZ,wBAAwB,CAACc,eAAe,CAACD,uBAAuB,CAAC;cACjEb,wBAAwB,CAACe,kBAAkB,CAACF,uBAAuB,CAAC;YACrE;UACD;QACD;MACD;IACD,CAAC,CAAC;IACF,OAAO;MAAEO,MAAM,EAAEvB,OAAO;MAAEE,UAAU;MAAEsB,gBAAgB,EAAErB;IAAyB,CAAC;EACnF,CAAC;;EAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACAtK,kBAAkB,CAAC4L,+BAA+B,GAAG,gBACpDC,KAAgC,EAChCC,iBAAsB,EACtBH,gBAAkC,EAClCf,cAAsB,EACF;IAAA;IACpB,IAAImB,OAAO,GAAG,EAAE;;IAEhB;IACA,IAAIC,SAAS,CAACL,gBAAgB,2BAAEE,KAAK,CAACrE,cAAc,CAAC,EAAE,CAAC,0DAAxB,sBAA0BmE,gBAAgB,CAAC,EAAE;MAC5E,MAAMM,YAAY,GAAGJ,KAAK,CAACrE,cAAc,CAAC,EAAE,CAAC;MAC7C,OAAO,CAACyE,YAAY,CAACC,kBAAkB,EAAED,YAAY,CAACE,WAAW,CAAC;IACnE;IACA;IACA,IACCN,KAAK,CAACrE,cAAc,CAAE,GAAEoD,cAAe,EAAC,CAAC,KAAK3J,SAAS,IACvD,CAAC+K,SAAS,CAACH,KAAK,CAACrE,cAAc,CAAE,GAAEoD,cAAe,EAAC,CAAC,CAACe,gBAAgB,EAAEA,gBAAgB,CAAC,EACvF;MACDI,OAAO,GAAG,MAAMK,YAAY,CAACN,iBAAiB,CAACO,8BAA8B,CAACV,gBAAgB,CAACW,YAAY,EAAE,CAAC,CAAC;MAC/GT,KAAK,CAACrE,cAAc,CAAE,GAAEoD,cAAe,EAAC,CAAC,GAAG;QAC3CsB,kBAAkB,EAAEH,OAAO,CAAC,CAAC,CAAC;QAC9BI,WAAW,EAAEJ,OAAO,CAAC,CAAC,CAAC;QACvBJ,gBAAgB,EAAEA;MACnB,CAAC;IACF,CAAC,MAAM;MACN,MAAMY,KAAK,GAAGV,KAAK,CAACrE,cAAc,CAAE,GAAEoD,cAAe,EAAC,CAAC;MACvDmB,OAAO,GAAG,CAACQ,KAAK,CAACL,kBAAkB,EAAEK,KAAK,CAACJ,WAAW,CAAC;IACxD;IACA,OAAOJ,OAAO;EACf,CAAC;EAED/L,kBAAkB,CAACwM,4BAA4B,GAAG,gBACjDC,KAAU,EACVvE,cAAuB,EACvBC,WAAqB,EACrBuE,UAAe,EACfC,eAAoB,EACpBzF,SAAc,EACd0F,QAAa,EACbC,aAAqB,EACrBC,kBAAoC,EACpCC,mBAAsC,EACvB;IACf,OAAOJ,eAAe,CAACK,iBAAiB,CAACN,UAAU,CAAC9F,OAAO,EAAE,CAAC,CAACtD,IAAI,CAAC,gBAAgB2J,KAAU,EAAE;MAC/F,MAAMC,UAAU,GAAGP,eAAe,CAACQ,cAAc,CAACF,KAAK,CAAC;MACxD,MAAMvB,MAAM,GAAGzL,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAE0M,QAAQ,CAAC;MAC1C,MAAM;QACLlB,MAAM,EAAE0B,UAAU;QAClB/C,UAAU;QACVsB,gBAAgB,EAAE0B;MACnB,CAAC,GAAGrN,kBAAkB,CAACiK,kBAAkB,CAACiD,UAAU,CAACtC,cAAc,EAAEc,MAAM,EAAExE,SAAS,CAACoG,sBAAsB,EAAER,kBAAkB,CAAC;MAClI,IAAIzC,UAAU,EAAE;QACf,MAAM0B,OAAO,GAAG,MAAM/L,kBAAkB,CAAC4L,+BAA+B,CACvEa,KAAK,EACLM,mBAAmB,EACnBM,mBAAmB,EACnBH,UAAU,CAACtC,cAAc,CACzB;QAEDiC,aAAa,GAAGd,OAAO,CAAC,CAAC,CAAC;MAC3B;MACA,MAAMwB,aAAa,GAAG;QACrBC,MAAM,EAAE;UACP5C,cAAc,EAAEsC,UAAU,CAACtC,cAAc;UACzC6C,MAAM,EAAEP,UAAU,CAACO;QACpB,CAAC;QACD/B,MAAM,EAAE0B,UAAU;QAClBM,WAAW,EAAEb;MACd,CAAC;MACD,OAAOU,aAAa,CAAC7B,MAAM,CAAC,gBAAgB,CAAC;MAC7CgB,UAAU,CAACiB,OAAO,CAAE,IAAGhB,eAAe,CAACiB,kBAAkB,CAACL,aAAa,CAAE,EAAC,CAAC;MAC3ErG,SAAS,CAAC2G,cAAc,CAACC,IAAI,CAACpB,UAAU,CAAC9F,OAAO,EAAE,CAAC;MACnD;MACA,OAAO5G,kBAAkB,CAACgI,2BAA2B,CAAC+F,IAAI,CAACtB,KAAK,CAAC,CAAC,CAACC,UAAU,CAAC,EAAExE,cAAc,EAAEC,WAAW,CAAC;IAC7G,CAAC,CAAC;EACH,CAAC;EACDnI,kBAAkB,CAACgO,oBAAoB,GAAG,UAAU3H,UAAe,EAAS;IAC3E,OAAOA,UAAU,CAAC0C,MAAM,CAAErD,QAAa,IAAK;MAC3C,OAAOA,QAAQ,KAAKzE,SAAS;IAC9B,CAAC,CAAC;EACH,CAAC;EACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACAjB,kBAAkB,CAACiO,eAAe,GAAG,gBAAgBpN,QAAa,EAAEwD,eAAwB,EAAEgC,UAAe,EAAE;IAC9G,MAAM6H,qBAAqB,GAAI,MAAMC,WAAW,CAACC,mBAAmB,CAACvN,QAAQ,EAAE,IAAI,CAAS;IAC5F,MAAMwN,UAAU,GAAGH,qBAAqB,CAACI,SAAS;IAClD,MAAMC,aAAsB,GAAGL,qBAAqB,CAACM,YAAY;IACjE,IAAInI,UAAU,CAAC/B,MAAM,KAAK,CAAC,EAAE;MAC5B,IAAI,CAACxC,OAAO,GAAGjB,QAAQ;MACvB,MAAMmG,KAAK,GAAGX,UAAU,CAAC,CAAC,CAAC,CAACvB,SAAS,EAAE;MACvC,MAAMyE,KAAK,GAAGkF,WAAW,CAACC,aAAa,CAAC1H,KAAK,CAAC;MAC9C,MAAM2H,aAAa,GAAGF,WAAW,CAACG,eAAe,CAACrF,KAAK,CAAC;MACxD,MAAMsF,cAAc,GAAGF,aAAa,CAACG,gBAAgB,EAAE;MACvD,IAAI,CAACD,cAAc,CAACE,SAAS,EAAE,EAAE;QAChCjH,GAAG,CAACC,KAAK,CAAC,uDAAuD,CAAC;QAClE,OAAO9E,OAAO,CAAC+L,MAAM,EAAE;MACxB;MACA,MAAMlO,UAAU,GAAGyI,KAAK,CAACpH,QAAQ,EAAE,CAACuC,YAAY,EAAoB;MACpE,IAAI8E,YAAY,GAAGxC,KAAK,CAACxC,iBAAiB,EAAE;MAC5C,MAAMyK,WAAgB,GAAG;QACxBrE,cAAc,EAAE/J,QAAQ,CAACqO,kBAAkB;QAC3CzB,MAAM,EAAE;MACT,CAAC;MAED,IAAI;QACH,MAAMvE,kBAAkB,GACvBlC,KAAK,IACL,IAAI,CAACpC,oBAAoB,CAACoC,KAAK,CAAC,CAACvB,GAAG,CAAC,UAAUC,QAAa,EAAE;UAC7D,OAAOA,QAAQ,CAACC,WAAW,CAACC,KAAK;QAClC,CAAC,CAAC;QACH;QACA,IAAI5F,kBAAkB,CAACiJ,wBAAwB,CAACC,kBAAkB,EAAE,IAAI,CAAC,EAAE;UAC1E;UACA,MAAMrD,2BAA2B,GAAG7F,kBAAkB,CAAC8F,4BAA4B,CAClFzB,eAAe,CAACe,SAAS,EAAE,EAC3BvE,QAAQ,EACRI,SAAS,EACT,IAAI,CAACsE,KAAK,CACV;UACD,MAAMQ,mBAAmB,GAAGF,2BAA2B,CAACG,OAAO;UAC/D,MAAMC,gBAAgB,GAAGJ,2BAA2B,CAAC/D,OAAO;UAC5DuE,UAAU,GAAG,MAAMrG,kBAAkB,CAACkG,0BAA0B,CAC/D,EAAE,EACFH,mBAAmB,EACnBE,gBAAgB,EAChBhF,SAAS,EACT,IAAI,CAACsE,KAAK,CACV;QACF;QACA,MAAMqE,kBAAkB,GAAG+E,aAAa,CAACQ,oBAAoB,EAAE;QAC/D,MAAMC,WAAW,GAAG7F,KAAK,CAAC8F,aAAa,EAAoB;QAC3D,IAAI1F,iBAAiB;QACrB,IAAI2F,gBAAgB;QACpB9F,YAAY,GAAGxJ,kBAAkB,CAACsJ,eAAe,CAACC,KAAK,EAAEC,YAAY,CAAC;QACtE,MAAM+F,SAAS,GAAGzO,UAAU,CAAC0O,WAAW,CAAChG,YAAY,CAACiG,OAAO,EAAE,CAAC;QAChEH,gBAAgB,GAAGF,WAAW,CAACM,sBAAsB,CAACC,mBAAmB,CAACnG,YAAY,CAACpE,SAAS,EAAE,EAAEmK,SAAS,CAAC;QAC9GD,gBAAgB,GAAGF,WAAW,CAACM,sBAAsB,CAACE,mCAAmC,CAACN,gBAAgB,EAAE9F,YAAY,CAAC;QACzHG,iBAAiB,GAAGC,kBAAkB,CAACiG,gCAAgC,CAACP,gBAAgB,CAACpD,kBAAkB,EAAE,CAAC,CAAC,CAAC;QAChH+C,WAAW,CAACa,yBAAyB,GAAGR,gBAAgB,CAACQ,yBAAyB;QAClF;QACAV,WAAW,CAACW,qBAAqB,CAACC,sBAAsB,CAACrG,iBAAiB,EAAEsF,WAAW,CAAC;QACxFjP,kBAAkB,CAACiQ,0BAA0B,CAACtG,iBAAiB,CAAC;QAChEA,iBAAiB,GAAG3J,kBAAkB,CAAC0J,uCAAuC,CAACH,KAAK,EAAEI,iBAAiB,EAAEC,kBAAkB,CAAC;QAC5H,MAAMmC,OAAO,GAAG,MAAM/L,kBAAkB,CAAC4L,+BAA+B,CAAC,IAAI,EAAEhC,kBAAkB,EAAED,iBAAiB,EAAE,EAAE,CAAC;QACzH,MAAMQ,OAAO,GAAG4B,OAAO,CAAC,CAAC,CAAC;QAC1B,MAAM2B,WAAW,GAAG3B,OAAO,CAAC,CAAC,CAAC;QAC9B,IAAImE,mBAAwB;QAC5BrP,QAAQ,CAACgN,cAAc,GAAG,EAAE;QAC5BxH,UAAU,GAAGrG,kBAAkB,CAACgO,oBAAoB,CAAC3H,UAAU,CAAC;QAChE,KAAK,MAAM8J,KAAK,IAAI9J,UAAU,EAAE;UAC/B6J,mBAAmB,GAAG,MAAMlQ,kBAAkB,CAACwM,4BAA4B,CAC1E,IAAI,EACJ+B,aAAa,EACbF,UAAU,EACVhI,UAAU,CAAC8J,KAAK,CAAC,EACjBtB,cAAc,EACdhO,QAAQ,EACRsJ,OAAO,EACPuD,WAAW,EACX/D,iBAAiB,EACjBC,kBAAkB,CAClB;UACD,IAAIsG,mBAAmB,KAAK,IAAI,EAAE;YACjC7J,UAAU,CAAC8J,KAAK,CAAC,GAAGlP,SAAS;UAC9B;QACD;QACA,OAAOjB,kBAAkB,CAACgO,oBAAoB,CAAC3H,UAAU,CAAC;MAC3D,CAAC,CAAC,OAAOwB,MAAW,EAAE;QACrBC,GAAG,CAACC,KAAK,CAAC,4CAA4C,EAAEF,MAAM,CAAC;QAC/D,OAAO5G,SAAS;MACjB;IACD,CAAC,MAAM;MACN,OAAOoF,UAAU;IAClB;EACD,CAAC;EACDrG,kBAAkB,CAACoQ,wBAAwB,GAAG,UAAUvP,QAAa,EAAEwP,MAAW,EAAE;IACnF,MAAMC,OAAO,GAAGD,MAAM,CAACE,SAAS,EAAE;MACjCC,KAAK,GAAGH,MAAM,CAACI,YAAY,CAAC,MAAM,CAAC;MACnCC,WAAW,GAAGC,OAAO,CAACC,UAAU,CAAC,YAAY,CAAC;MAC9CC,KAAK,GAAGL,KAAK,IAAIE,WAAW,CAACvD,cAAc,CAACqD,KAAK,CAAC;IAEnDM,eAAe,CAACC,kCAAkC,CAACT,OAAO,EAAEO,KAAK,CAAC;IAElE,OAAO5N,OAAO,CAACC,OAAO,CAAC,IAAI,CAAC;EAC7B,CAAC;EACDlD,kBAAkB,CAACiQ,0BAA0B,GAAG,UAAUtG,iBAAsB,EAAE;IACjFA,iBAAiB,CAAC0B,kBAAkB,CAAC,gBAAgB,CAAC;IACtD1B,iBAAiB,CAAC0B,kBAAkB,CAAC,qBAAqB,CAAC;IAC3D1B,iBAAiB,CAAC0B,kBAAkB,CAAC,eAAe,CAAC;EACtD,CAAC;EAEDrL,kBAAkB,CAACgR,iCAAiC,GAAG,UAAUxL,eAAoB,EAAEyL,wBAA6B,EAAQ;IAC3H,IAAIC,aAAqB,EAAEC,gBAAwB;IACnD,KAAK,IAAIC,gBAAgB,GAAG,CAAC,EAAEA,gBAAgB,GAAG5L,eAAe,CAAClB,MAAM,EAAE8M,gBAAgB,EAAE,EAAE;MAC7FF,aAAa,GAAG1L,eAAe,CAAC4L,gBAAgB,CAAC,CAACC,MAAM,EAAE;MAC1DF,gBAAgB,GAAG3L,eAAe,CAAC4L,gBAAgB,CAAC,CAACE,QAAQ,EAAE;MAC/DL,wBAAwB,CAACC,aAAa,CAAC,GAAG;QAAEtL,KAAK,EAAEuL;MAAiB,CAAC;IACtE;EACD,CAAC;;EAED;AACA;AACA;AACA;AACA;AACA;AACA;EACAnR,kBAAkB,CAACuR,cAAc,GAAG,UAAUC,WAAmB,EAAW;IAC3E,IAAIA,WAAW,IAAIA,WAAW,CAACC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IAAID,WAAW,CAACC,OAAO,CAAC,GAAG,CAAC,KAAKD,WAAW,CAAClN,MAAM,GAAG,CAAC,EAAE;MACzG,OAAO,IAAI;IACZ,CAAC,MAAM;MACN,OAAO,KAAK;IACb;EACD,CAAC;;EAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACAtE,kBAAkB,CAAC0R,6CAA6C,GAAG,UAClE5P,OAA0B,EAC1B6P,UAA6B,EAC7BC,kBAA0B,EACnB;IAAA;IACP,IAAI5R,kBAAkB,CAACuR,cAAc,CAACzP,OAAO,CAACoN,kBAAkB,CAAC,EAAE;MAClE,IAAI0C,kBAAkB,EAAE;QACvBD,UAAU,CAACzC,kBAAkB,GAAG0C,kBAAkB;MACnD,CAAC,MAAM;QACN;QACAD,UAAU,CAACzC,kBAAkB,GAAGjO,SAAS;MAC1C;IACD;IACA,QAAQ,OAAO2Q,kBAAkB;MAChC,KAAK,QAAQ;QACZ,yBAAAD,UAAU,CAACE,uBAAuB,0DAAlC,sBAAoC/D,IAAI,CAAC8D,kBAAkB,CAAC;QAC5DD,UAAU,CAAClK,eAAe,CAACqG,IAAI,CAAC8D,kBAAkB,CAAC;QACnD;MACD,KAAK,QAAQ;QACZ,KAAK,MAAME,CAAC,IAAIF,kBAAkB,EAAc;UAAA;UAC/C,0BAAAD,UAAU,CAACE,uBAAuB,2DAAlC,uBAAoC/D,IAAI,CAAC8D,kBAAkB,CAACE,CAAC,CAAC,CAAC;UAC/DH,UAAU,CAAClK,eAAe,CAACqG,IAAI,CAAC8D,kBAAkB,CAACE,CAAC,CAAC,CAAC;QACvD;QACA;MACD;IAAQ;EAEV,CAAC;EAED9R,kBAAkB,CAAC+R,mDAAmD,GAAG,UACxEjQ,OAA0B,EAC1B+P,uBAA4B,EAC5BF,UAA6B,EACtB;IACP,IAAIC,kBAA0B,EAAEI,eAAuB;IACvD,KAAK,MAAM/G,CAAC,IAAInJ,OAAO,CAAC2F,eAAe,EAAE;MACxCmK,kBAAkB,GAAG9P,OAAO,CAAC2F,eAAe,CAACwD,CAAC,CAAC;MAC/C,IAAIjL,kBAAkB,CAACuR,cAAc,CAACK,kBAAkB,CAAC,EAAE;QAC1DI,eAAe,GAAGJ,kBAAkB,CAACK,MAAM,CAAC,CAAC,EAAEL,kBAAkB,CAACH,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACnFG,kBAAkB,GAAGC,uBAAuB,CAACG,eAAe,CAAC,CAACpM,KAAK;QACnE5F,kBAAkB,CAAC0R,6CAA6C,CAAC5P,OAAO,EAAE6P,UAAU,EAAEC,kBAAkB,CAAC;MAC1G,CAAC,MAAM;QACND,UAAU,CAAClK,eAAe,CAACqG,IAAI,CAAC8D,kBAAkB,CAAC;MACpD;IACD;EACD,CAAC;;EAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA5R,kBAAkB,CAACkS,iCAAiC,GAAG,UACtDC,UAA6B,EAC7BC,4CAA+D,EAC/DT,UAA6B,EACtB;IACP;IACAS,4CAA4C,CAAC9E,sBAAsB,CAAC7C,OAAO,CAAC,UAC3E4H,qBAAsD,EACrD;MACD,IAAIA,qBAAqB,CAACzH,cAAc,IAAI5K,kBAAkB,CAACuR,cAAc,CAACc,qBAAqB,CAACzH,cAAc,CAAC,EAAE;QACpHyH,qBAAqB,CAACzH,cAAc,GACnC+G,UAAU,CAAClK,eAAe,CAAC0K,UAAU,CAAC1K,eAAe,CAACgK,OAAO,CAACY,qBAAqB,CAACzH,cAAc,CAAC,CAAC;MACtG;IACD,CAAC,CAAC;EACH,CAAC;;EAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA5K,kBAAkB,CAACsS,wCAAwC,GAAG,UAC7DH,UAA6B,EAC7BI,0CAAsF,EACtFH,4CAA+D,EACxD;IACP,IAAII,MAAW;IACfD,0CAA0C,CAAC9H,OAAO,CAAC,UAAUgI,+BAAoC,EAAE;MAClG;MACA,IACCA,+BAA+B,aAA/BA,+BAA+B,eAA/BA,+BAA+B,CAAE7H,cAAc,IAC/C5K,kBAAkB,CAACuR,cAAc,CAACkB,+BAA+B,CAAC7H,cAAc,CAAC,EAChF;QACD4H,MAAM,GAAGL,UAAU,CAAC1K,eAAe,CAACiL,SAAS,CAAC,UAAU9H,cAAsB,EAAE;UAC/E,OAAOA,cAAc,KAAK6H,+BAA+B,CAAC7H,cAAc;QACzE,CAAC,CAAC;QACF,IAAI4H,MAAM,KAAKvR,SAAS,EAAE;UACzB;UACAwR,+BAA+B,CAAC7H,cAAc,GAAGwH,4CAA4C,CAAC3K,eAAe,CAAC+K,MAAM,CAAC;QACtH;MACD;IACD,CAAC,CAAC;EACH,CAAC;;EAED;AACA;AACA;AACA;AACA;AACA;AACA;EACAxS,kBAAkB,CAAC2S,uCAAuC,GAAG,UAC5DR,UAA6B,EAC7BC,4CAA+D,EACxD;IACP,KAAK,IAAIQ,uBAAuB,GAAG,CAAC,EAAEA,uBAAuB,GAAGT,UAAU,CAAC1K,eAAe,CAACnD,MAAM,EAAEsO,uBAAuB,EAAE,EAAE;MAC7H,IACCR,4CAA4C,CAAClD,kBAAkB,MAC9DiD,UAAU,CAACN,uBAAuB,IAAIM,UAAU,CAACN,uBAAuB,CAACe,uBAAuB,CAAC,CAAC,EAClG;QACDR,4CAA4C,CAAClD,kBAAkB,GAAGiD,UAAU,CAAC1K,eAAe,CAACmL,uBAAuB,CAAC;MACtH;MACA,IAAIR,4CAA4C,CAAC3K,eAAe,CAACmL,uBAAuB,CAAC,EAAE;QAC1FR,4CAA4C,CAAC3K,eAAe,CAACmL,uBAAuB,CAAC,GACpFT,UAAU,CAAC1K,eAAe,CAACmL,uBAAuB,CAAC;MACrD,CAAC,MAAM;QACN;QACAR,4CAA4C,CAAC3K,eAAe,CAACoL,MAAM,CAACD,uBAAuB,EAAE,CAAC,CAAC;MAChG;IACD;EACD,CAAC;;EAED;AACA;AACA;AACA;AACA;AACA;EACA5S,kBAAkB,CAAC8S,mCAAmC,GAAG,UAAUV,4CAA+D,EAAQ;IACzI;IACA,KACC,IAAIW,aAAa,GAAG,CAAC,EACrBA,aAAa,GAAGX,4CAA4C,CAAC9E,sBAAsB,CAAChJ,MAAM,EAC1FyO,aAAa,EAAE,EACd;MACD,IACCX,4CAA4C,CAAC9E,sBAAsB,CAACyF,aAAa,CAAC,IAClFX,4CAA4C,CAAC9E,sBAAsB,CAACyF,aAAa,CAAC,CAACnI,cAAc,KAAK3J,SAAS,EAC9G;QACDmR,4CAA4C,CAAC9E,sBAAsB,CAACuF,MAAM,CAACE,aAAa,EAAE,CAAC,CAAC;MAC7F;IACD;EACD,CAAC;EAED/S,kBAAkB,CAACgT,6CAA6C,GAAG,UAClElR,OAAY,EACZ6P,UAA6B,EACT;IACpB,IAAIsB,0CAA6D;IACjE,IAAItB,UAAU,CAACE,uBAAuB,IAAIF,UAAU,CAACE,uBAAuB,CAACvN,MAAM,GAAG,CAAC,EAAE;MACxF2O,0CAA0C,GAAG;QAC5CjS,UAAU,EAAEc,OAAO,CAACd,UAAU;QAC9BK,SAAS,EAAES,OAAO,CAACT,SAAS;QAC5BE,OAAO,EAAEO,OAAO,CAACP,OAAO;QACxB2N,kBAAkB,EAAEpN,OAAO,CAACoN,kBAAkB;QAC9C/K,cAAc,EAAErC,OAAO,CAACqC,cAAc;QACtC+O,iBAAiB,EAAEpR,OAAO,CAACoR,iBAAiB;QAC5C5F,sBAAsB,EAAE6F,SAAS,CAACrR,OAAO,CAACwL,sBAAsB,CAAC;QACjE7F,eAAe,EAAEkK,UAAU,CAAClK;MAC7B,CAAC;MACDzH,kBAAkB,CAACkS,iCAAiC,CAACpQ,OAAO,EAAEmR,0CAA0C,EAAEtB,UAAU,CAAC;MACrH,MAAMyB,iCAA6E,GAAGD,SAAS,CAC9FrR,OAAO,CAACuR,gCAAgC,CACxC;MACDrT,kBAAkB,CAACsS,wCAAwC,CAC1DxQ,OAAO,EACPsR,iCAAiC,EACjCH,0CAA0C,CAC1C;MACDA,0CAA0C,CAACI,gCAAgC,GAAGD,iCAAiC;MAC/G,IAAIzB,UAAU,CAACzC,kBAAkB,EAAE;QAClC+D,0CAA0C,CAAC/D,kBAAkB,GAAGyC,UAAU,CAACzC,kBAAkB;MAC9F,CAAC,MAAM;QACN+D,0CAA0C,CAAC/D,kBAAkB,GAAGjO,SAAS;MAC1E;MACAjB,kBAAkB,CAAC2S,uCAAuC,CAAChB,UAAU,EAAEsB,0CAA0C,CAAC;MAClHjT,kBAAkB,CAAC8S,mCAAmC,CAACG,0CAA0C,CAAC;MAClG,OAAOA,0CAA0C;IAClD,CAAC,MAAM;MACN,OAAO,CAAC,CAAC;IACV;EACD,CAAC;EAEDjT,kBAAkB,CAACsT,6CAA6C,GAAG,UAAUxR,OAAY,EAAEyR,cAAmB,EAAO;IACpH,IAAIN,0CAA+C;IACnD,MAAMhC,wBAA6B,GAAG,CAAC,CAAC;IACxC,MAAMU,UAA6B,GAAG;MAAElK,eAAe,EAAE,EAAE;MAAEoK,uBAAuB,EAAE,EAAE;MAAEvE,sBAAsB,EAAE;IAAG,CAAC;IACtH,IAAIxL,OAAO,CAAC2F,eAAe,EAAE;MAC5B;MACA,IAAI8L,cAAc,IAAIA,cAAc,CAACjP,MAAM,GAAG,CAAC,EAAE;QAChDtE,kBAAkB,CAACgR,iCAAiC,CAACuC,cAAc,EAAEtC,wBAAwB,CAAC;QAC9FjR,kBAAkB,CAAC+R,mDAAmD,CAACjQ,OAAO,EAAEmP,wBAAwB,EAAEU,UAAU,CAAC;QACrHsB,0CAA0C,GAAGjT,kBAAkB,CAACgT,6CAA6C,CAC5GlR,OAAO,EACP6P,UAAU,CACV;QACD,OAAOsB,0CAA0C;MAClD;IACD,CAAC,MAAM;MACN,OAAOhS,SAAS;IACjB;EACD,CAAC;EAEDjB,kBAAkB,CAACwT,oCAAoC,GAAG,UACzDC,gBAAqB,EACrBxO,QAAa,EACbE,cAAmB,EACnBuO,QAAa,EACbC,uBAA4B,EACrB;IACPF,gBAAgB,CAAChJ,OAAO,CAAC,UAAUP,eAAoB,EAAE;MACxD,IAAIjF,QAAQ,EAAE;QACbA,QAAQ,CAAC2O,gBAAgB,CAAC1J,eAAe,EAAE/E,cAAc,CAAC;MAC3D;MACAuO,QAAQ,CAACxJ,eAAe,CAAC,GAAG,CAAC,CAAC;MAC9B,KAAK,MAAM2J,cAAc,IAAI1O,cAAc,EAAE;QAC5C,IAAI2O,UAAU,GAAG,IAAI;UACpBC,yBAAyB,GAAG,IAAI;QACjC,IAAI9O,QAAQ,EAAE;UACb6O,UAAU,GAAG7O,QAAQ,CAAC+O,0BAA0B,CAAC9J,eAAe,EAAE2J,cAAc,CAAC;UACjF,IAAI,CAACC,UAAU,EAAE;YAChBA,UAAU,GAAG7O,QAAQ,CAACgP,wBAAwB,EAAE;YAChDhP,QAAQ,CAACiP,0BAA0B,CAAChK,eAAe,EAAE2J,cAAc,EAAEC,UAAU,CAAC;UACjF;QACD;QACA;QACA,IAAI3O,cAAc,CAAC0O,cAAc,CAAC,KAAK5S,SAAS,IAAIkE,cAAc,CAAC0O,cAAc,CAAC,KAAK,IAAI,EAAE;UAC5F,IAAIC,UAAU,EAAE;YACfA,UAAU,CAACK,eAAe,CAACrG,IAAI,CAAC;cAC/BlI,KAAK,EAAE3E,SAAS;cAChBmT,WAAW,EAAE;YACd,CAAC,CAAC;UACH;UACA;QACD;QACA;QACA,IAAIC,aAAa,CAAClP,cAAc,CAAC0O,cAAc,CAAC,CAAC,EAAE;UAClD,IAAIF,uBAAuB,IAAIA,uBAAuB,CAACzJ,eAAe,CAAC,EAAE;YACxE,MAAMoK,KAAK,GAAGrU,MAAM,CAACsU,IAAI,CAACZ,uBAAuB,CAACzJ,eAAe,CAAC,CAAC;YACnE,IAAIsK,uBAAuB,EAAEC,iBAAiB,EAAEC,MAAM,EAAEC,IAAI;YAC5D,KAAK,IAAIxE,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGmE,KAAK,CAAChQ,MAAM,EAAE6L,KAAK,EAAE,EAAE;cAClDwE,IAAI,GAAGL,KAAK,CAACnE,KAAK,CAAC;cACnB,IAAIwE,IAAI,CAAClD,OAAO,CAACoC,cAAc,CAAC,KAAK,CAAC,EAAE;gBACvCW,uBAAuB,GAAGb,uBAAuB,CAACzJ,eAAe,CAAC,CAACyK,IAAI,CAAC;gBACxEF,iBAAiB,GAAGE,IAAI,CAAChM,KAAK,CAAC,GAAG,CAAC,CAACgM,IAAI,CAAChM,KAAK,CAAC,GAAG,CAAC,CAACrE,MAAM,GAAG,CAAC,CAAC;gBAC/DoQ,MAAM,GAAGvP,cAAc,CAAC0O,cAAc,CAAC,CAACY,iBAAiB,CAAC;gBAC1D,IAAID,uBAAuB,IAAIC,iBAAiB,IAAIC,MAAM,EAAE;kBAC3DhB,QAAQ,CAACxJ,eAAe,CAAC,CAACsK,uBAAuB,CAAC,GAAGE,MAAM;gBAC5D;cACD;YACD;UACD;UACA,IAAIZ,UAAU,EAAE;YACfA,UAAU,CAACK,eAAe,CAACrG,IAAI,CAAC;cAC/BlI,KAAK,EAAE3E,SAAS;cAChBmT,WAAW,EAAE;YACd,CAAC,CAAC;UACH;UACA;QACD;;QAEA;QACA;QACA,MAAMQ,oBAAoB,GACzBjB,uBAAuB,IACvBA,uBAAuB,CAACzJ,eAAe,CAAC,IACxCyJ,uBAAuB,CAACzJ,eAAe,CAAC,CAAC2J,cAAc,CAAC,GACrDF,uBAAuB,CAACzJ,eAAe,CAAC,CAAC2J,cAAc,CAAC,GACxDA,cAAc;QAElB,IAAIC,UAAU,IAAID,cAAc,KAAKe,oBAAoB,EAAE;UAC1Db,yBAAyB,GAAG;YAC3BnO,KAAK,EAAE3E,SAAS;YAChBmT,WAAW,EAAG,wBAAuBP,cAAe,wBAAuBe,oBAAqB,yBAAwB;YACxHC,MAAM,EAAG,iHAAgH3K,eAAgB,0BAAyB2J,cAAe,yBAAwBe,oBAAqB;UAC/N,CAAC;QACF;;QAEA;QACA;QACA,IAAIlB,QAAQ,CAACxJ,eAAe,CAAC,CAAC0K,oBAAoB,CAAC,EAAE;UACpD9M,GAAG,CAACC,KAAK,CACP,qCAAoC8L,cAAe,wCAAuCe,oBAAqB,wEAAuE,CACvL;QACF;;QAEA;QACAlB,QAAQ,CAACxJ,eAAe,CAAC,CAAC0K,oBAAoB,CAAC,GAAGzP,cAAc,CAAC0O,cAAc,CAAC;QAEhF,IAAIC,UAAU,EAAE;UACf,IAAIC,yBAAyB,EAAE;YAC9BD,UAAU,CAACK,eAAe,CAACrG,IAAI,CAACiG,yBAAyB,CAAC;YAC1D,MAAMe,aAAa,GAAG7P,QAAQ,CAACgP,wBAAwB,EAAE;YACzDa,aAAa,CAACX,eAAe,CAACrG,IAAI,CAAC;cAClClI,KAAK,EAAET,cAAc,CAAC0O,cAAc,CAAC;cACrCO,WAAW,EAAG,wBAAuBQ,oBAAqB,mBAAkBzP,cAAc,CAAC0O,cAAc,CAAE,iEAAgEA,cAAe;YAC3L,CAAC,CAAC;YACF5O,QAAQ,CAACiP,0BAA0B,CAAChK,eAAe,EAAE0K,oBAAoB,EAAEE,aAAa,CAAC;UAC1F;QACD;MACD;IACD,CAAC,CAAC;EACH,CAAC;;EAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA9U,kBAAkB,CAAC8F,4BAA4B,GAAG,UAAUX,cAAmB,EAAEtE,QAAa,EAAEoE,QAAa,EAAE+B,KAAU,EAAE;IAC1H,MAAMxB,eAAe,GAAGwB,KAAK,IAAI,IAAI,CAACpC,oBAAoB,CAACoC,KAAK,CAAC;IACjE,MAAMiM,0CAA+C,GAAGjT,kBAAkB,CAACsT,6CAA6C,CACvHzS,QAAQ,EACR2E,eAAe,CACf;IACD,MAAMS,gBAAgB,GAAGgN,0CAA0C,GAAGA,0CAA0C,GAAGpS,QAAQ;IAC3H,IAAI,CAACgB,eAAe,GAAGoR,0CAA0C;IACjE,MAAMQ,gBAAgB,GAAGzT,kBAAkB,CAACkF,mBAAmB,CAACe,gBAAgB,CAAC;IACjF,MAAM0N,uBAAuB,GAAG3T,kBAAkB,CAAC+U,6BAA6B,CAC/E/U,kBAAkB,CAACgV,0BAA0B,CAAC/O,gBAAgB,CAAC,CAC/D;IACD,IAAI,CAACwN,gBAAgB,CAACnP,MAAM,EAAE;MAC7B,OAAO;QAAExC,OAAO,EAAEmE,gBAAgB;QAAED,OAAO,EAAE,CAAC;MAAE,CAAC;IAClD;IACA,MAAM0N,QAAa,GAAG,CAAC,CAAC;IACxB1T,kBAAkB,CAACwT,oCAAoC,CAACC,gBAAgB,EAAExO,QAAQ,EAAEE,cAAc,EAAEuO,QAAQ,EAAEC,uBAAuB,CAAC;IACtI,OAAO;MAAE7R,OAAO,EAAEmE,gBAAgB;MAAED,OAAO,EAAE0N;IAAS,CAAC;EACxD,CAAC;EACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA1T,kBAAkB,CAACkG,0BAA0B,GAAG,UAC/C+O,YAAoB,EACpBlP,mBAAwB,EACxBlF,QAAa,EACboE,QAAa,EACb+B,KAAU,EACT;IACD,IAAI,CAACnG,QAAQ,CAAC4G,eAAe,EAAE;MAC9B,OAAOxE,OAAO,CAACC,OAAO,CAAC,EAAE,CAAC;IAC3B;IACA,MAAMuQ,gBAAgB,GAAG5S,QAAQ,CAAC4G,eAAe;IACjD,MAAMyN,kBAAuB,GAAG;MAC/BC,aAAa,EAAElU,SAAS;MACxBmU,gBAAgB,EAAE;IACnB,CAAC;IACD,IAAIC,yBAAyB,GAAG,CAAC;IACjC,OAAOC,IAAI,CAACC,WAAW,CAAC,WAAW,EAAE;MACpCC,KAAK,EAAE;IACR,CAAC,CAAC,CAAClS,IAAI,CAAC,MAAM;MACb,OAAO,IAAIL,OAAO,CAAEC,OAAO,IAAK;QAC/BuS,GAAG,CAACC,EAAE,CAACC,OAAO,CAAC,CAAC,iBAAiB,CAAC,EAAE,MAAOC,KAAU,IAAK;UACzD,MAAMjH,aAAa,GAAGiH,KAAK,CAACC,yBAAyB,CAAC7O,KAAK,KAAK/F,SAAS,GAAG,IAAI,CAACe,QAAQ,GAAGgF,KAAK,CAAC;UAClG,MAAM6H,cAAc,GAAGF,aAAa,GAAGA,aAAa,CAACG,gBAAgB,EAAE,GAAG,IAAI;UAC9E,IAAI,CAACD,cAAc,EAAE;YACpB;YACA;YACA3L,OAAO,CAACgS,kBAAkB,CAACE,gBAAgB,EAAEF,kBAAkB,CAACC,aAAa,CAAC;UAC/E;UACA,IAAI,CAACtG,cAAc,CAACE,SAAS,EAAE,EAAE;YAChCjH,GAAG,CAACC,KAAK,CAAC,gGAAgG,CAAC;YAC3G;YACA;YACA7E,OAAO,CAACgS,kBAAkB,CAACE,gBAAgB,EAAEF,kBAAkB,CAACC,aAAa,CAAC;UAC/E;UACA,MAAMW,OAAO,GAAGrC,gBAAgB,CAAChO,GAAG,CAAC,UAAUyE,eAAoB,EAAE;YACpE,OAAO,CACN;cACCU,cAAc,EAAEV,eAAe;cAC/BwB,MAAM,EAAE3F,mBAAmB,GAAGA,mBAAmB,CAACmE,eAAe,CAAC,GAAGjJ,SAAS;cAC9EyM,WAAW,EAAEuH,YAAY;cACzBc,aAAa,EAAE;YAChB,CAAC,CACD;UACF,CAAC,CAAC;UACF,IAAI;YACH,MAAM5P,MAAM,GAAG,MAAM0I,cAAc,CAACmH,QAAQ,CAACF,OAAO,CAAC;YACrD,IAAIG,SAAS,GAAG,KAAK;YACrB,KAAK,IAAIhL,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG9E,MAAM,CAAC7B,MAAM,EAAE2G,CAAC,EAAE,EAAE;cACvC,KAAK,IAAI6G,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG3L,MAAM,CAAC8E,CAAC,CAAC,CAAC3G,MAAM,EAAEwN,CAAC,EAAE,EAAE;gBAC1C,IAAI3L,MAAM,CAAC8E,CAAC,CAAC,CAAC6G,CAAC,CAAC,CAACxN,MAAM,GAAG,CAAC,EAAE;kBAC5B2R,SAAS,GAAG,IAAI;kBAChB;gBACD;gBACA,IAAIA,SAAS,EAAE;kBACd;gBACD;cACD;YACD;YAEA,IAAI,CAAC9P,MAAM,IAAI,CAACA,MAAM,CAAC7B,MAAM,IAAI,CAAC2R,SAAS,EAAE;cAC5C;cACA;cACA/S,OAAO,CAACgS,kBAAkB,CAACE,gBAAgB,EAAEF,kBAAkB,CAACC,aAAa,CAAC;YAC/E;YAEA,MAAMe,iCAAiC,GAAGlW,kBAAkB,CAACmW,oCAAoC,CAACtV,QAAQ,CAAC;YAC3G,MAAMuV,mBAAmB,GACxBpW,kBAAkB,CAACqW,uCAAuC,CAACH,iCAAiC,CAAC;YAC9F,IAAII,YAAY,GAAGC,YAAY,CAACC,qBAAqB,CAAC/H,WAAW,CAACgI,OAAO,EAAE,CAAC;YAE5E,IAAIH,YAAY,EAAE;cACjB;cACAA,YAAY,IAAI,GAAG;YACpB;YAEA,MAAMI,qBAAqB,GAAG,UAAUxM,eAAoB,EAAEyM,OAAY,EAAE;cAC3E,OACC,CAAC,CAACP,mBAAmB,IACrB,CAAC,CAACA,mBAAmB,CAAClM,eAAe,CAAC,IACtCkM,mBAAmB,CAAClM,eAAe,CAAC,CAACuH,OAAO,CAACkF,OAAO,CAAC,GAAG,CAAC,CAAC;YAE5D,CAAC;YACD,MAAMC,SAAS,GAAG,UAAU/R,MAAW,EAAE;cACxC,MAAMqI,UAAU,GAAG2B,cAAc,CAAC1B,cAAc,CAACtI,MAAM,CAAC6D,MAAM,CAAC;cAC/D,IAAIgO,qBAAqB,CAACxJ,UAAU,CAACtC,cAAc,EAAEsC,UAAU,CAACO,MAAM,CAAC,EAAE;gBACxE;cACD;cACA,MAAM+C,KAAK,GAAI,IAAG3B,cAAc,CAACjB,kBAAkB,CAAC;gBAAEJ,MAAM,EAAE;kBAAEqJ,SAAS,EAAEhS,MAAM,CAAC6D;gBAAO;cAAE,CAAC,CAAE,EAAC;cAE/F,IAAI7D,MAAM,CAAC6D,MAAM,IAAI7D,MAAM,CAAC6D,MAAM,CAAC+I,OAAO,CAAC6E,YAAY,CAAC,KAAK,CAAC,EAAE;gBAC/D;gBACA;gBACA;gBACApB,kBAAkB,CAACC,aAAa,GAAG,IAAI3O,QAAQ,CAAC;kBAC/CG,IAAI,EAAE6J,KAAK;kBACX/J,IAAI,EAAE5B,MAAM,CAAC4B;gBACd,CAAC,CAAC;gBACF;cACD;cACA,MAAMF,SAAS,GAAG,IAAIC,QAAQ,CAAC;gBAC9B;gBACAwC,GAAG,EACFkE,UAAU,CAACtC,cAAc,IAAIsC,UAAU,CAACO,MAAM,GAC1C,GAAEP,UAAU,CAACtC,cAAe,IAAGsC,UAAU,CAACO,MAAO,EAAC,GACnDxM,SAAS;gBACbwF,IAAI,EAAE5B,MAAM,CAAC4B,IAAI;gBACjB2N,WAAW,EAAEnT,SAAS;gBACtB0F,IAAI,EAAE6J,KAAK;gBACX;gBACAsG,IAAI,EAAE7V,SAAS;gBAAE;gBACjB8V,gBAAgB,EAAElS,MAAM,CAACmS,IAAI,IAAInS,MAAM,CAACmS,IAAI,CAACvF,OAAO,CAAC,gBAAgB,CAAC,GAAG,CAAC;cAC3E,CAAC,CAAC;cACF,IAAIlL,SAAS,CAACnE,WAAW,CAAC,kBAAkB,CAAC,EAAE;gBAC9CiT,yBAAyB,EAAE;cAC5B;cACAH,kBAAkB,CAACE,gBAAgB,CAACtH,IAAI,CAACvH,SAAS,CAAC;cAEnD,IAAItB,QAAQ,EAAE;gBACbA,QAAQ,CAACgS,uBAAuB,CAAC/J,UAAU,CAACtC,cAAc,EAAE;kBAC3DlC,MAAM,EAAEnC,SAAS,CAACK,OAAO,EAAE;kBAC3BH,IAAI,EAAEF,SAAS,CAACG,OAAO;gBACxB,CAAC,CAAC;cACH;YACD,CAAC;YACD,KAAK,IAAIwQ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGzD,gBAAgB,CAACnP,MAAM,EAAE4S,CAAC,EAAE,EAAE;cACjD/Q,MAAM,CAAC+Q,CAAC,CAAC,CAAC,CAAC,CAAC,CAACzM,OAAO,CAACmM,SAAS,CAAC;YAChC;YACA,IAAIvB,yBAAyB,KAAK,CAAC,EAAE;cACpC,KAAK,IAAI8B,cAAc,GAAG,CAAC,EAAEA,cAAc,GAAGjC,kBAAkB,CAACE,gBAAgB,CAAC9Q,MAAM,EAAE6S,cAAc,EAAE,EAAE;gBAC3G,IAAIA,cAAc,GAAG,IAAI,CAACxW,YAAY,EAAE,CAACN,kBAAkB,EAAE;kBAC5D6U,kBAAkB,CAACE,gBAAgB,CAAC+B,cAAc,CAAC,CAACtO,WAAW,CAAC,kBAAkB,EAAE,IAAI,CAAC;gBAC1F,CAAC,MAAM;kBACN;gBACD;cACD;YACD;YACA;YACA;YACA3F,OAAO,CAACgS,kBAAkB,CAACE,gBAAgB,EAAEF,kBAAkB,CAACC,aAAa,CAAC;UAC/E,CAAC,CAAC,OAAOtN,MAAM,EAAE;YAChBC,GAAG,CAACC,KAAK,CAAC,mFAAmF,CAAC;YAC9F;YACA;YACA7E,OAAO,CAACgS,kBAAkB,CAACE,gBAAgB,EAAEF,kBAAkB,CAACC,aAAa,CAAC;UAC/E;QACD,CAAC,CAAC;MACH,CAAC,CAAC;IACH,CAAC,CAAC;EACH,CAAC;EACDnV,kBAAkB,CAACkF,mBAAmB,GAAG,UAAUrE,QAAa,EAAE;IACjE,OAAOA,QAAQ,CAAC4G,eAAe,GAAG5G,QAAQ,CAAC4G,eAAe,GAAG,EAAE;EAChE,CAAC;EACDzH,kBAAkB,CAACmW,oCAAoC,GAAG,UAAUtV,QAAa,EAAE;IAClF,MAAMqV,iCAAwC,GAAG,EAAE;IACnD,IAAIrV,QAAQ,CAACwS,gCAAgC,EAAE;MAC9CxS,QAAQ,CAACwS,gCAAgC,CAAC5I,OAAO,CAAC,UAAU2M,gCAAqC,EAAE;QAClGlB,iCAAiC,CAACpI,IAAI,CACrC,IAAIuJ,+BAA+B,CAAC;UACnCzM,cAAc,EAAEwM,gCAAgC,CAACxM,cAAc;UAC/D0M,OAAO,EAAEF,gCAAgC,CAACE;QAC3C,CAAC,CAAC,CACF;MACF,CAAC,CAAC;IACH;IACA,OAAOpB,iCAAiC;EACzC,CAAC;;EAED;AACA;AACA;AACA;AACA;AACA;AACA;EACAlW,kBAAkB,CAACgV,0BAA0B,GAAG,UAAUnU,QAAa,EAAE;IACxE,MAAMuJ,uBAA8B,GAAG,EAAE;IACzC,IAAImN,2BAAkC,GAAG,EAAE;IAC3C,IAAI1W,QAAQ,CAACyM,sBAAsB,EAAE;MACpCzM,QAAQ,CAACyM,sBAAsB,CAAC7C,OAAO,CAAC,UAAU+M,sBAA2B,EAAE;QAC9ED,2BAA2B,GAAG,EAAE;QAChC,IAAIC,sBAAsB,CAACxM,KAAK,EAAE;UACjCwM,sBAAsB,CAACxM,KAAK,CAACP,OAAO,CAAC,UAAUgN,0BAA+B,EAAE;YAC/EF,2BAA2B,CAACzJ,IAAI,CAC/B,IAAI4J,yBAAyB,CAAC;cAC7B1O,GAAG,EAAEyO,0BAA0B,CAACzO,GAAG;cACnCpD,KAAK,EAAE6R,0BAA0B,CAAC7R;YACnC,CAAC,CAAC,CACF;UACF,CAAC,CAAC;QACH;QACAwE,uBAAuB,CAAC0D,IAAI,CAC3B,IAAI6J,qBAAqB,CAAC;UACzB/M,cAAc,EAAE4M,sBAAsB,CAAC5M,cAAc;UACrDI,KAAK,EAAEuM;QACR,CAAC,CAAC,CACF;MACF,CAAC,CAAC;IACH;IACA,OAAOnN,uBAAuB;EAC/B,CAAC;EACD;AACA;AACA;AACA;AACA;AACA;AACA;EACApK,kBAAkB,CAAC+U,6BAA6B,GAAG,UAAU3K,uBAA8B,EAAE;IAC5F,IAAI,CAACA,uBAAuB,CAAC9F,MAAM,EAAE;MACpC,OAAOrD,SAAS;IACjB;IACA,MAAM0S,uBAA4B,GAAG,CAAC,CAAC;IACvCvJ,uBAAuB,CAACK,OAAO,CAAC,UAAU+M,sBAA2B,EAAE;MACtE,IAAI,CAACA,sBAAsB,CAACI,iBAAiB,EAAE,EAAE;QAChD,MAAMhQ,KAAK,CACT,6DAA4D4P,sBAAsB,CAACI,iBAAiB,EAAG,gBAAe,CACvH;MACF;MACAjE,uBAAuB,CAAC6D,sBAAsB,CAACI,iBAAiB,EAAE,CAAC,GAAGJ,sBAAsB,CAC1FK,QAAQ,EAAE,CACVC,MAAM,CAAC,UAAUC,IAAS,EAAEC,KAAU,EAAE;QACxCD,IAAI,CAACC,KAAK,CAAC3G,MAAM,EAAE,CAAC,GAAG2G,KAAK,CAAC1G,QAAQ,EAAE;QACvC,OAAOyG,IAAI;MACZ,CAAC,EAAE,CAAC,CAAC,CAAC;IACR,CAAC,CAAC;IACF,OAAOpE,uBAAuB;EAC/B,CAAC;EACD;AACA;AACA;AACA;AACA;AACA;AACA;EACA3T,kBAAkB,CAACqW,uCAAuC,GAAG,UAAUH,iCAAwC,EAAE;IAChH,IAAI+B,mBAAwB;IAC5B,IAAIC,2CAAgD;IACpD,IAAIC,mBAA0B,GAAG,EAAE;IACnC,IAAI,CAACjC,iCAAiC,CAAC5R,MAAM,EAAE;MAC9C,OAAOrD,SAAS;IACjB;IACA,MAAMmX,iCAAsC,GAAG,CAAC,CAAC;IACjDlC,iCAAiC,CAACzL,OAAO,CAAC,UAAU4N,iCAAsC,EAAE;MAC3FJ,mBAAmB,GAAGI,iCAAiC,CAACT,iBAAiB,EAAE;MAC3E,IAAI,CAACK,mBAAmB,EAAE;QACzB,MAAMrQ,KAAK,CAAE,6DAA4DqQ,mBAAoB,gBAAe,CAAC;MAC9G;MACAE,mBAAmB,GAAGE,iCAAiC,CAACC,UAAU,EAAE;MACpE,IAAIF,iCAAiC,CAACH,mBAAmB,CAAC,KAAKhX,SAAS,EAAE;QACzEmX,iCAAiC,CAACH,mBAAmB,CAAC,GAAGE,mBAAmB;MAC7E,CAAC,MAAM;QACND,2CAA2C,GAAGE,iCAAiC,CAACH,mBAAmB,CAAC;QACpGE,mBAAmB,CAAC1N,OAAO,CAAC,UAAU8N,iBAAyB,EAAE;UAChEL,2CAA2C,CAACpK,IAAI,CAACyK,iBAAiB,CAAC;QACpE,CAAC,CAAC;QACFH,iCAAiC,CAACH,mBAAmB,CAAC,GAAGC,2CAA2C;MACrG;IACD,CAAC,CAAC;IACF,OAAOE,iCAAiC;EACzC,CAAC;EAAC,OAEapY,kBAAkB;AAAA"}},{"offset":{"line":22074,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","deepClone","deepEqual","isPlainObject","CommonUtils","KeepAliveHelper","toES6Promise","SemanticObjectHelper","FieldHelper","FieldRuntime","SelectionVariant","Core","Fragment","XMLPreprocessor","XMLTemplateProcessor","Factory","LinkItem","SemanticObjectMapping","SemanticObjectMappingItem","SemanticObjectUnavailableAction","LinkDelegate","JSONModel","getDynamicPathFromSemanticObject","SimpleLinkDelegate","Object","assign","CONSTANTS","iLinksShownInPopup","sapmLink","sapuimdcLink","sapuimdclinkLinkItem","sapmObjectIdentifier","sapmObjectStatus","getConstants","_getEntityType","oPayload","oMetaModel","createBindingContext","entityType","undefined","_getSemanticsModel","_getDataField","dataField","_getContact","contact","fnTemplateFragment","sFragmentName","titleLinkHref","oFragmentModel","oPayloadToUse","this","resolvedpayload","payload","LinkId","oControl","isA","getId","getModel","getProperty","titlelink","oSemanticsModel","semanticModel","bindingContexts","semantic","models","entitySet","metaModel","viewData","oFragment","loadTemplate","Promise","resolve","process","name","then","_internalFragment","load","definition","controller","oPopoverContent","setModel","setBindingContext","fetchAdditionalContent","oPayLoad","oMdcLinkControl","_oPayLoad$navigationP","aNavigateRegexpMatch","navigationPath","match","oBindingContext","length","bindContext","getBindingContext","$$ownRequest","getMetaModel","getBoundContext","_fetchLinkCustomData","_oLink","getParent","getCustomData","fetchLinkItems","oInfoLog","_getSemanticObjects","oContextObject","getObject","initialize","_oLinkCustomData","_link","aLinkCustomData","map","linkItem","mProperties","value","oSemanticAttributesResolved","_calculateSemanticAttributes","oSemanticAttributes","results","oPayloadResolved","_retrieveNavigationTargets","aLinks","_findLinkType","aLinkItems","nLinkType","oLinkItem","text","getText","href","getHref","hasQuickViewFacets","linkType","fetchLinkType","async","oLink","_oCurrentLink","_oPayload","oDefaultInitialType","initialType","type","directLink","runtimeType","appStateKeyMap","_oPayload$contact","semanticObjects","_retrieveUnmodifiedLinkItems","_LinkType","Error","oError","error","_RemoveTitleLinkFromTargets","_aLinkItems","_bTitleHasLink","_aTitleLink","_sTitleLinkHref","_oMDCLink","bResult","linkIsPrimaryAction","_sLinkIntentWithoutParameters","_sTitleIntent","intent","split","titlelinkhref","setProperty","aMLinkItems","filter","key","_IsSemanticObjectDynamic","aNewLinkCustomData","oThis","link","otherLink","_getLineContext","oView","mLineContext","getAggregation","_setFilterContextUrlForSelectionVariant","oSelectionVariant","oNavigationService","getViewData","sContextUrl","constructContextUrl","setFilterContextUrl","_setObjectMappings","sSemanticObject","oParams","aSemanticObjectMappings","hasChanged","modifiedSelectionVariant","toJSONObject","forEach","mapping","mappingSemanticObject","semanticObject","mappingSemanticObjectPath","oMappings","items","i","sLocalProperty","sSemanticObjectProperty","removeParameter","removeSelectOption","renameParameter","renameSelectOption","propertyToBeRemoved","slice","params","selectionVariant","_getAppStateKeyAndUrlParameters","_this","navigationService","_this$appStateKeyMap$","aValues","defaultCache","semanticAttributes","appstatekey","getAppStateKeyAndUrlParameters","toJSONString","cache","_getLinkItemWithNewParameter","_that","_oLinkItem","_oShellServices","_oParams","_sAppStateKey","_oSelectionVariant","_oNavigationService","expandCompactHash","sHash","oShellHash","parseShellHash","oNewParams","newSelectionVariant","semanticObjectMappings","oNewShellHash","target","action","appStateKey","setHref","constructShellHash","aSemanticLinks","push","bind","_removeEmptyLinkItem","modifyLinkItems","primaryActionIsActive","checkPrimaryActions","aTitleLink","titleLink","bTitleHasLink","hasTitleLink","getTargetView","oAppComponent","getAppComponent","oShellServices","getShellServices","hasUShell","reject","oTargetInfo","mainSemanticObject","getNavigationService","oController","getController","mLineContextData","sMetaPath","getMetaPath","getPath","_intentBasedNavigation","removeSensitiveData","prepareContextForExternalNavigation","mixAttributesAndSelectionVariant","propertiesWithoutConflict","intentBasedNavigation","adaptNavigationContext","_removeTechnicalParameters","titleLinktoBeRemove","index","beforeNavigationCallback","oEvent","oSource","getSource","sHref","getParameter","oURLParsing","getService","oHash","storeControlRefreshStrategyForHash","_getSemanticObjectCustomDataValue","oSemanticObjectsResolved","sPropertyName","sCustomDataValue","iCustomDataCount","getKey","getValue","_isDynamicPath","pathOrValue","indexOf","_updatePayloadWithResolvedSemanticObjectValue","newPayload","semanticObjectName","_newPayload$semanticO","semanticObjectsResolved","j","_newPayload$semanticO2","_createNewPayloadWithDynamicSemanticObjectsResolved","tmpPropertyName","substr","_updateSemanticObjectsForMappings","mdcPayload","mdcPayloadWithDynamicSemanticObjectsResolved","semanticObjectMapping","_updateSemanticObjectsUnavailableActions","mdcPayloadSemanticObjectUnavailableActions","_Index","semanticObjectUnavailableAction","findIndex","_updateSemanticObjectsWithResolvedValue","newSemanticObjectsCount","splice","_removeEmptySemanticObjectsMappings","mappingsCount","_setPayloadWithDynamicSemanticObjectsResolved","oPayloadWithDynamicSemanticObjectsResolved","propertyPathLabel","_SemanticObjectUnavailableActions","semanticObjectUnavailableActions","_getPayloadWithDynamicSemanticObjectsResolved","linkCustomData","_updatePayloadWithSemanticAttributes","aSemanticObjects","oResults","mSemanticObjectMappings","addContextObject","sAttributeName","oAttribute","oTransformationAdditional","getSemanticObjectAttribute","createAttributeStructure","addSemanticObjectAttribute","transformations","description","aKeys","keys","sNewAttributeNameMapped","sNewAttributeName","sValue","sKey","sAttributeNameMapped","reason","aAttributeNew","_convertSemanticObjectMapping","_getSemanticObjectMappings","sAppStateKey","oNavigationTargets","ownNavigation","availableActions","iSuperiorActionLinksFound","loadLibrary","require","Utils","getAppComponentForControl","aParams","sortResultsBy","getLinks","bHasLinks","aSemanticObjectUnavailableActions","_getSemanticObjectUnavailableActions","oUnavailableActions","_convertSemanticObjectUnavailableAction","sCurrentHash","_fnFixHashQueryString","getHash","fnIsUnavailableAction","sAction","fnAddLink","shellHash","icon","initiallyVisible","tags","addSemanticObjectIntent","n","iLinkItemIndex","oSemanticObjectUnavailableAction","actions","aSemanticObjectMappingItems","oSemanticObjectMapping","oSemanticObjectMappingItem","getSemanticObject","getItems","reduce","oMap","oItem","_SemanticObjectName","_SemanticObjectHasAlreadyUnavailableActions","_UnavailableActions","mSemanticObjectUnavailableActions","oSemanticObjectUnavailableActions","getActions","UnavailableAction"],"sources":["QuickViewDelegate-dbg.js"],"mappings":"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","sourceRoot":"quickView"}},{"offset":{"line":22079,"column":0},"map":{"version":3,"names":["ShareBuildingBlock","defineBuildingBlock","name","namespace","publicNamespace","isRuntime","blockAttribute","type","required","isPublic","defaultValue","bindable","defineReference","_initializeMenuItems","view","appComponent","isTeamsModeActive","CollaborationHelper","menuButton","current","unbindProperty","setVisible","controller","getController","coreResource","Core","getLibraryResourceBundle","shellServices","getShellServices","isPluginInfoStable","waitForPluginsLoad","internalButton","getAggregation","attachEventOnce","menu","addItem","getText","share","_triggerEmail","_addShellBasedMenuItems","hasUshell","hasUShell","hasJam","getUser","isJamActive","collaborationTeamsHelper","ServiceContainer","getServiceAsync","shareCollaborationOptions","getOptions","_triggerShareToJam","collaborationOption","menuItemSettings","text","icon","items","subOptions","length","forEach","subOption","subMenuItem","MenuItem","press","collaborationMenuItemPress","customData","CustomData","key","value","fesrStepName","FESRHelper","setSemanticStepname","push","menuItem","addBookmarkButton","AddBookmarkButton","getEnabled","saveAsTileMenuItem","getIcon","_saveAsTile","dependents","destroy","event","clickedMenuItem","getSource","CommonUtils","getTargetView","_adaptShareMetadata","collaborationInfo","getModel","getData","data","getContent","id","visible","addDependent","getMenu","openBy","isInitialized","catch","error","Log","BuildingBlockBase"],"sourceRoot":"share","sources":["Share.block.tsx"],"sourcesContent":["import ResourceBundle from \"sap/base/i18n/ResourceBundle\";\nimport Log from \"sap/base/Log\";\nimport AppComponent from \"sap/fe/core/AppComponent\";\nimport { blockAttribute, BuildingBlockBase, defineBuildingBlock, RuntimeBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport CommandExecution from \"sap/fe/core/controls/CommandExecution\";\nimport { BindingToolkitExpression } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { defineReference } from \"sap/fe/core/helpers/ClassSupport\";\nimport { Ref } from \"sap/fe/core/jsx-runtime/jsx\";\nimport PageController from \"sap/fe/core/PageController\";\nimport type { IShellServices } from \"sap/fe/core/services/ShellServicesFactory\";\nimport Menu from \"sap/m/Menu\";\nimport MenuButton from \"sap/m/MenuButton\";\nimport MenuItem, { $MenuItemSettings } from \"sap/m/MenuItem\";\nimport CollaborationHelper from \"sap/suite/ui/commons/collaboration/CollaborationHelper\";\nimport ServiceContainer from \"sap/suite/ui/commons/collaboration/ServiceContainer\";\nimport TeamsHelperService, { CollaborationOptions } from \"sap/suite/ui/commons/collaboration/TeamsHelperService\";\nimport UI5Event from \"sap/ui/base/Event\";\nimport ManagedObject from \"sap/ui/base/ManagedObject\";\nimport Core from \"sap/ui/core/Core\";\nimport CustomData from \"sap/ui/core/CustomData\";\nimport View from \"sap/ui/core/mvc/View\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport FESRHelper from \"sap/ui/performance/trace/FESRHelper\";\nimport AddBookmarkButton from \"sap/ushell/ui/footerbar/AddBookmarkButton\";\nimport ShareAPI from \"./ShareAPI\";\n\n/**\n * @classdesc\n * Building block used to create the Share functionality.\n * <br>\n * Please note that the 'Share in SAP Jam' option is only available on platforms that are integrated with SAP Jam.\n * <br>\n * If you are consuming this macro in an environment where the SAP Fiori launchpad is not available, then the 'Save as Tile' option is not visible.\n *\n *\n * Usage example:\n * <pre>\n * &lt;macro:Share\n * \tid=\"someID\"\n *\tvisible=\"true\"\n * /&gt;\n * </pre>\n * @class sap.fe.macros.Share\n * @hideconstructor\n * @since 1.93.0\n */\n@defineBuildingBlock({\n\tname: \"Share\",\n\tnamespace: \"sap.fe.macros.internal\",\n\tpublicNamespace: \"sap.fe.macros\",\n\tisRuntime: true\n})\nexport default class ShareBuildingBlock extends BuildingBlockBase implements RuntimeBuildingBlock {\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\trequired: true,\n\t\tisPublic: true\n\t})\n\tid!: string;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\tdefaultValue: true,\n\t\tisPublic: true,\n\t\tbindable: true\n\t})\n\tvisible!: BindingToolkitExpression<boolean>;\n\n\t@defineReference()\n\tmenuButton!: Ref<MenuButton>;\n\n\t@defineReference()\n\tmenu!: Ref<Menu>;\n\n\t@defineReference()\n\tsaveAsTileMenuItem!: Ref<MenuItem>;\n\n\tpublic isInitialized?: Promise<void>;\n\n\t/**\n\t * Retrieves the share option from the shell configuration asynchronously and prepare the content of the menu button.\n\t * Options order are:\n\t * - Send as Email\n\t * - Share as Jam (if available)\n\t * - Teams options (if available)\n\t * - Save as tile.\n\t *\n\t * @param view The view this building block is used in\n\t * @param appComponent The AppComponent instance\n\t */\n\tasync _initializeMenuItems(view: View, appComponent: AppComponent) {\n\t\tconst isTeamsModeActive = await CollaborationHelper.isTeamsModeActive();\n\t\tif (isTeamsModeActive) {\n\t\t\t//need to clear the visible property bindings otherwise when the binding value changes then it will set back the visible to the resolved value\n\t\t\tthis.menuButton.current?.unbindProperty(\"visible\", true);\n\t\t\tthis.menuButton.current?.setVisible(false);\n\t\t\treturn;\n\t\t}\n\t\tconst controller = view.getController() as PageController;\n\t\tconst coreResource = Core.getLibraryResourceBundle(\"sap.fe.core\");\n\t\tconst shellServices = appComponent.getShellServices();\n\t\tconst isPluginInfoStable = await shellServices.waitForPluginsLoad();\n\t\tif (!isPluginInfoStable) {\n\t\t\t// In case the plugin info is not yet available we need to do this computation again on the next button click\n\t\t\tconst internalButton = this.menuButton.current?.getAggregation(\"_control\") as ManagedObject;\n\t\t\tinternalButton?.attachEventOnce(\"press\", {}, () => this._initializeMenuItems, this);\n\t\t}\n\t\tif (this.menu.current) {\n\t\t\tthis.menu.current.addItem(\n\t\t\t\t<MenuItem\n\t\t\t\t\ttext={coreResource.getText(\"T_SEMANTIC_CONTROL_SEND_EMAIL\")}\n\t\t\t\t\ticon={\"sap-icon://email\"}\n\t\t\t\t\tpress={() => controller.share._triggerEmail()}\n\t\t\t\t/>\n\t\t\t);\n\t\t\tthis._addShellBasedMenuItems(controller, shellServices, coreResource);\n\t\t}\n\t}\n\n\tasync _addShellBasedMenuItems(controller: PageController, shellServices: IShellServices, coreResource: ResourceBundle) {\n\t\tconst hasUshell = shellServices.hasUShell();\n\t\tconst hasJam = !!shellServices.getUser().isJamActive?.();\n\n\t\tconst collaborationTeamsHelper: TeamsHelperService = await ServiceContainer.getServiceAsync();\n\t\tconst shareCollaborationOptions: CollaborationOptions[] = collaborationTeamsHelper.getOptions();\n\t\tif (hasUshell) {\n\t\t\tif (hasJam) {\n\t\t\t\tthis?.menu?.current?.addItem(\n\t\t\t\t\t<MenuItem\n\t\t\t\t\t\ttext={coreResource.getText(\"T_COMMON_SAPFE_SHARE_JAM\")}\n\t\t\t\t\t\ticon={\"sap-icon://share-2\"}\n\t\t\t\t\t\tpress={() => controller.share._triggerShareToJam()}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t\t// prepare teams menu items\n\t\t\tfor (const collaborationOption of shareCollaborationOptions) {\n\t\t\t\tconst menuItemSettings: $MenuItemSettings = {\n\t\t\t\t\ttext: collaborationOption.text,\n\t\t\t\t\ticon: collaborationOption.icon,\n\t\t\t\t\titems: []\n\t\t\t\t};\n\n\t\t\t\tif (collaborationOption?.subOptions && collaborationOption?.subOptions?.length > 0) {\n\t\t\t\t\tmenuItemSettings.items = [];\n\t\t\t\t\tcollaborationOption.subOptions.forEach((subOption: CollaborationOptions) => {\n\t\t\t\t\t\tconst subMenuItem = new MenuItem({\n\t\t\t\t\t\t\ttext: subOption.text,\n\t\t\t\t\t\t\ticon: subOption.icon,\n\t\t\t\t\t\t\tpress: this.collaborationMenuItemPress,\n\t\t\t\t\t\t\tcustomData: new CustomData({\n\t\t\t\t\t\t\t\tkey: \"collaborationData\",\n\t\t\t\t\t\t\t\tvalue: subOption\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (subOption.fesrStepName) {\n\t\t\t\t\t\t\tFESRHelper.setSemanticStepname(subMenuItem, \"press\", subOption.fesrStepName);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t(menuItemSettings.items as MenuItem[]).push(subMenuItem);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// if there are no sub option then the main option should be clickable\n\t\t\t\t\t// so add a press handler.\n\t\t\t\t\tmenuItemSettings.press = this.collaborationMenuItemPress;\n\t\t\t\t\tmenuItemSettings[\"customData\"] = new CustomData({\n\t\t\t\t\t\tkey: \"collaborationData\",\n\t\t\t\t\t\tvalue: collaborationOption\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tconst menuItem = new MenuItem(menuItemSettings);\n\t\t\t\tif (menuItemSettings.press && collaborationOption.fesrStepName) {\n\t\t\t\t\tFESRHelper.setSemanticStepname(menuItem, \"press\", collaborationOption.fesrStepName);\n\t\t\t\t}\n\t\t\t\tthis?.menu?.current?.addItem(menuItem);\n\t\t\t}\n\t\t\t// set save as tile\n\t\t\t// for now we need to create addBookmarkButton to use the save as tile feature.\n\t\t\t// In the future save as tile should be available as an API or a MenuItem so that it can be added to the Menu button.\n\t\t\t// This needs to be discussed with AddBookmarkButton team.\n\t\t\tconst addBookmarkButton = new AddBookmarkButton();\n\t\t\tif (addBookmarkButton.getEnabled()) {\n\t\t\t\tthis?.menu?.current?.addItem(\n\t\t\t\t\t<MenuItem\n\t\t\t\t\t\tref={this.saveAsTileMenuItem}\n\t\t\t\t\t\ttext={addBookmarkButton.getText()}\n\t\t\t\t\t\ticon={addBookmarkButton.getIcon()}\n\t\t\t\t\t\tpress={() => controller.share._saveAsTile(this.saveAsTileMenuItem.current)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ dependents: [addBookmarkButton] }}\n\t\t\t\t\t</MenuItem>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\taddBookmarkButton.destroy();\n\t\t\t}\n\t\t}\n\t}\n\n\tasync collaborationMenuItemPress(event: UI5Event) {\n\t\tconst clickedMenuItem = event.getSource() as MenuItem;\n\t\tconst collaborationTeamsHelper: TeamsHelperService = await ServiceContainer.getServiceAsync();\n\t\tconst view: View = CommonUtils.getTargetView(clickedMenuItem);\n\t\tconst controller: PageController = view.getController() as PageController;\n\t\t// call adapt share metadata so that the collaboration info model is updated with the required info\n\t\tawait controller.share._adaptShareMetadata();\n\t\tconst collaborationInfo = (view.getModel(\"collaborationInfo\") as JSONModel).getData();\n\t\tcollaborationTeamsHelper.share(clickedMenuItem.data(\"collaborationData\"), collaborationInfo);\n\t}\n\n\tgetContent(view: View, appComponent: AppComponent) {\n\t\t// Ctrl+Shift+S is needed for the time being but this needs to be removed after backlog from menu button\n\t\tconst menuButton = (\n\t\t\t<ShareAPI id={this.id}>\n\t\t\t\t<MenuButton\n\t\t\t\t\tref={this.menuButton}\n\t\t\t\t\ticon={\"sap-icon://action\"}\n\t\t\t\t\tvisible={this.visible as any}\n\t\t\t\t\ttooltip={\"{sap.fe.i18n>M_COMMON_SAPFE_ACTION_SHARE} (Ctrl+Shift+S)\"}\n\t\t\t\t>\n\t\t\t\t\t<Menu ref={this.menu}></Menu>\n\t\t\t\t</MenuButton>\n\t\t\t</ShareAPI>\n\t\t);\n\t\tview.addDependent(\n\t\t\t<CommandExecution\n\t\t\t\tvisible={this.visible}\n\t\t\t\tenabled={this.visible}\n\t\t\t\tcommand=\"Share\"\n\t\t\t\texecute={() => this.menuButton.current?.getMenu().openBy(this.menuButton.current, true)}\n\t\t\t/>\n\t\t);\n\t\t// The initialization is asynchronous, so we just trigger it and hope for the best :D\n\t\tthis.isInitialized = this._initializeMenuItems(view, appComponent).catch((error) => {\n\t\t\tLog.error(error as string);\n\t\t});\n\t\treturn menuButton;\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":22334,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","BuildingBlock","CommonUtils","CommandExecution","ClassSupport","Menu","MenuButton","MenuItem","CollaborationHelper","ServiceContainer","Core","CustomData","FESRHelper","AddBookmarkButton","ShareAPI","_jsx","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_exports","defineReference","defineBuildingBlock","BuildingBlockBase","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","ShareBuildingBlock","name","namespace","publicNamespace","isRuntime","type","required","isPublic","defaultValue","bindable","_BuildingBlockBase","_this","_len","arguments","length","args","Array","_key","this","_proto","_initializeMenuItems","async","view","appComponent","isTeamsModeActive","_this$menuButton$curr","_this$menuButton$curr2","menuButton","current","unbindProperty","setVisible","controller","getController","coreResource","getLibraryResourceBundle","shellServices","getShellServices","isPluginInfoStable","waitForPluginsLoad","_this$menuButton$curr3","internalButton","getAggregation","attachEventOnce","menu","addItem","text","getText","icon","press","share","_triggerEmail","_addShellBasedMenuItems","_shellServices$getUse","_shellServices$getUse2","hasUshell","hasUShell","hasJam","getUser","isJamActive","collaborationTeamsHelper","getServiceAsync","shareCollaborationOptions","getOptions","_this$menu","_this$menu$current","_triggerShareToJam","collaborationOption","_collaborationOption$","_this$menu2","_this$menu2$current","menuItemSettings","items","subOptions","subOption","subMenuItem","collaborationMenuItemPress","customData","fesrStepName","setSemanticStepname","push","menuItem","addBookmarkButton","getEnabled","_this$menu3","_this$menu3$current","ref","saveAsTileMenuItem","getIcon","_saveAsTile","children","dependents","destroy","event","clickedMenuItem","getSource","getTargetView","_adaptShareMetadata","collaborationInfo","getModel","getData","data","getContent","id","visible","tooltip","addDependent","enabled","command","execute","_this$menuButton$curr4","getMenu","openBy","isInitialized","catch","error"],"sources":["Share.block-dbg.js"],"mappings":"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","sourceRoot":"share"}},{"offset":{"line":22339,"column":0},"map":{"version":3,"names":["ShareAPI","defineUI5Class","interfaces","property","type","defaultValue","getOverflowToolbarConfig","canOverflow","setVisibility","visibility","isTeamsModeActive","CollaborationHelper","content","setVisible","visible","Log","info","Promise","resolve","MacroAPI"],"sourceRoot":"share","sources":["ShareAPI.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport { defineUI5Class, property } from \"sap/fe/core/helpers/ClassSupport\";\nimport CollaborationHelper from \"sap/suite/ui/commons/collaboration/CollaborationHelper\";\nimport MacroAPI from \"../MacroAPI\";\n/**\n * Building block used to create the Share functionality.\n * <br>\n * Please note that the 'Share in SAP Jam' option is only available on platforms that are integrated with SAP Jam.\n * <br>\n * If you are consuming this building block in an environment where the SAP Fiori launchpad is not available, then the 'Save as Tile' option is not visible.\n *\n *\n * Usage example:\n * <pre>\n * &lt;macro:Share\n * \tid=\"someID\"\n *\tvisible=\"true\"\n * /&gt;\n * </pre>\n *\n * @alias sap.fe.macros.ShareAPI\n * @private\n * @since 1.108.0\n */\n@defineUI5Class(\"sap.fe.macros.share.ShareAPI\", {\n\tinterfaces: [\"sap.m.IOverflowToolbarContent\"]\n})\nclass ShareAPI extends MacroAPI {\n\t/**\n\t * The identifier of the 'Share' building block\n\t *\n\t * @private\n\t */\n\t@property({ type: \"string\" })\n\tid!: string;\n\t/**\n\t * Whether the 'Share' building block is visible or not.\n\t *\n\t * @private\n\t */\n\t@property({ type: \"boolean\", defaultValue: true })\n\tvisible!: boolean;\n\t/**\n\t * Returns properties for the interface IOverflowToolbarContent.\n\t *\n\t * @returns {object} Returns the configuration of IOverflowToolbarContent\n\t */\n\tgetOverflowToolbarConfig() {\n\t\treturn {\n\t\t\tcanOverflow: true\n\t\t};\n\t}\n\t/**\n\t * Sets the visibility of the 'Share' building block based on the value.\n\t * If the 'Share' building block is used in an application that's running in Microsoft Teams,\n\t * this function does not have any effect,\n\t * since the 'Share' building block handles the visibility on it's own in that case.\n\t *\n\t * @param visibility The desired visibility to be set\n\t * @returns Promise which resolves with the instance of ShareAPI\n\t * @private\n\t */\n\tasync setVisibility(visibility: boolean): Promise<this> {\n\t\tconst isTeamsModeActive = await CollaborationHelper.isTeamsModeActive();\n\t\t// In case of teams mode share should not be visible\n\t\t// so we do not do anything\n\t\tif (!isTeamsModeActive) {\n\t\t\tthis.content.setVisible(visibility);\n\t\t\tthis.visible = visibility;\n\t\t} else {\n\t\t\tLog.info(\"Share Building Block: visibility not changed since application is running in teams mode!\");\n\t\t}\n\t\treturn Promise.resolve(this);\n\t}\n}\nexport default ShareAPI;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;EAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAnBA,IAuBMA,QAAQ,WAHbC,cAAc,CAAC,8BAA8B,EAAE;IAC/CC,UAAU,EAAE,CAAC,+BAA+B;EAC7C,CAAC,CAAC,UAOAC,QAAQ,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC,UAO5BD,QAAQ,CAAC;IAAEC,IAAI,EAAE,SAAS;IAAEC,YAAY,EAAE;EAAK,CAAC,CAAC;IAAA;IAAA;MAAA;MAAA;QAAA;MAAA;MAAA;MAAA;MAAA;MAAA;IAAA;IAAA;IAElD;AACD;AACA;AACA;AACA;IAJC,OAKAC,wBAAwB,GAAxB,oCAA2B;MAC1B,OAAO;QACNC,WAAW,EAAE;MACd,CAAC;IACF;IACA;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OATC;IAAA,OAUMC,aAAa,GAAnB,6BAAoBC,UAAmB,EAAiB;MACvD,MAAMC,iBAAiB,GAAG,MAAMC,mBAAmB,CAACD,iBAAiB,EAAE;MACvE;MACA;MACA,IAAI,CAACA,iBAAiB,EAAE;QACvB,IAAI,CAACE,OAAO,CAACC,UAAU,CAACJ,UAAU,CAAC;QACnC,IAAI,CAACK,OAAO,GAAGL,UAAU;MAC1B,CAAC,MAAM;QACNM,GAAG,CAACC,IAAI,CAAC,0FAA0F,CAAC;MACrG;MACA,OAAOC,OAAO,CAACC,OAAO,CAAC,IAAI,CAAC;IAC7B,CAAC;IAAA;EAAA,EA9CqBC,QAAQ;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;EAAA,OAgDhBnB,QAAQ;AAAA"}},{"offset":{"line":22441,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","ClassSupport","CollaborationHelper","MacroAPI","_dec","_dec2","_dec3","_class","_class2","_descriptor","_descriptor2","property","defineUI5Class","_initializerDefineProperty","target","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","ShareAPI","interfaces","type","defaultValue","_MacroAPI","_this","_len","arguments","length","args","Array","_key","this","_proto","getOverflowToolbarConfig","canOverflow","setVisibility","async","visibility","isTeamsModeActive","content","setVisible","visible","info","Promise","resolve"],"sources":["ShareAPI-dbg.js"],"mappings":"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","sourceRoot":"share"}},{"offset":{"line":22446,"column":0},"map":{"version":3,"names":["SituationsIndicator","defineBuildingBlock","name","namespace","blockAttribute","type","required","getSituationsNavigationProperty","context","navigationProperties","_type","targetType","entityType","situationsNavProps","filter","navigationProperty","isCollection","annotations","Common","SAPObjectNodeType","Name","situationsNavProp","length","undefined","navPropNames","map","prop","join","Log","error","getTemplate","convertMetaModelContext","entitySet","numberOfSituations","pathInModel","visible","propertyPath","greaterThan","and","equal","text","ifElse","tooltip","ResourceModel","getText","fn","onPress","showPopover","ref","xml","BuildingBlockBase"],"sourceRoot":"situations","sources":["SituationsIndicator.fragment.ts"],"sourcesContent":["import type { EntitySet, EntityType, NavigationProperty, Singleton } from \"@sap-ux/vocabularies-types\";\nimport Log from \"sap/base/Log\";\nimport { blockAttribute, BuildingBlockBase, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockRuntime\";\nimport { convertMetaModelContext } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type { BindingToolkitExpression } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { and, equal, fn, greaterThan, ifElse, pathInModel, ref } from \"sap/fe/core/helpers/BindingToolkit\";\nimport ResourceModel from \"sap/fe/macros/ResourceModel\";\nimport { showPopover } from \"sap/fe/macros/situations/SituationsPopover\";\nimport type Context from \"sap/ui/model/Context\";\n\n@defineBuildingBlock({ name: \"SituationsIndicator\", namespace: \"sap.fe.macros.internal.situations\" })\nexport default class SituationsIndicator extends BuildingBlockBase {\n\t@blockAttribute({ type: \"sap.ui.model.Context\", required: true })\n\tentitySet!: Context;\n\n\t@blockAttribute({ type: \"string\", required: false })\n\tpropertyPath?: string;\n\n\tstatic getSituationsNavigationProperty(\n\t\tcontext: EntitySet | Singleton | EntityType | NavigationProperty\n\t): NavigationProperty | undefined {\n\t\tlet navigationProperties: NavigationProperty[];\n\t\tswitch (context._type) {\n\t\t\tcase \"NavigationProperty\":\n\t\t\t\tnavigationProperties = context.targetType.navigationProperties;\n\t\t\t\tbreak;\n\t\t\tcase \"EntityType\":\n\t\t\t\tnavigationProperties = context.navigationProperties;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tnavigationProperties = context.entityType.navigationProperties;\n\t\t}\n\n\t\tconst situationsNavProps = navigationProperties.filter(\n\t\t\t(navigationProperty) =>\n\t\t\t\t!navigationProperty.isCollection &&\n\t\t\t\tnavigationProperty.targetType.annotations.Common?.SAPObjectNodeType?.Name === \"BusinessSituation\"\n\t\t);\n\n\t\tconst situationsNavProp: NavigationProperty | undefined = situationsNavProps.length >= 1 ? situationsNavProps[0] : undefined;\n\n\t\t// only one navigation property may lead to an entity tagged as \"BusinessSituation\"\n\t\tif (situationsNavProps.length > 1) {\n\t\t\tconst navPropNames = situationsNavProps.map((prop) => `'${prop.name}'`).join(\", \");\n\n\t\t\tlet name: string;\n\t\t\tswitch (context._type) {\n\t\t\t\tcase \"NavigationProperty\":\n\t\t\t\t\tname = context.targetType.name;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"EntityType\":\n\t\t\t\t\tname = context.name;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tname = context.entityType.name;\n\t\t\t}\n\n\t\t\tLog.error(`Entity type '${name}' has multiple paths to SAP Situations (${navPropNames}). Using '${situationsNavProp?.name}'.\nHint: Make sure there is at most one navigation property whose target entity type is annotated with\n<Annotation Term=\"com.sap.vocabularies.Common.v1.SAPObjectNodeType\">\n  <Record>\n    <PropertyValue Property=\"Name\" String=\"BusinessSituation\" />\n  </Record>\n</Annotation>.`);\n\t\t}\n\n\t\treturn situationsNavProp;\n\t}\n\n\tgetTemplate() {\n\t\tconst context = convertMetaModelContext(this.entitySet);\n\t\tconst situationsNavProp = SituationsIndicator.getSituationsNavigationProperty(context);\n\t\tif (!situationsNavProp) {\n\t\t\t// No path to SAP Situations. That is, the entity type is not situation-enabled. Ignore this fragment.\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst numberOfSituations = pathInModel(`${situationsNavProp.name}/SitnNumberOfInstances`);\n\n\t\t// Indicator visibility\n\t\tlet visible: BindingToolkitExpression<boolean>;\n\t\tif (!this.propertyPath) {\n\t\t\t// no propertyPath --> visibility depends on the number of situations only\n\t\t\tvisible = greaterThan(numberOfSituations, 0);\n\t\t} else {\n\t\t\t// propertyPath --> visibility depends on the number of situations and on the semantic key used for showing indicators\n\t\t\tvisible = and(\n\t\t\t\tgreaterThan(numberOfSituations, 0),\n\t\t\t\tequal(pathInModel(\"semanticKeyHasDraftIndicator\", \"internal\"), this.propertyPath)\n\t\t\t);\n\t\t}\n\n\t\t// Button text: the number of situations if there are multiple, the empty string otherwise\n\t\tconst text = ifElse(greaterThan(numberOfSituations, 1), numberOfSituations, \"\");\n\n\t\t// Button tooltip: \"There is one situation\" / \"There are <n> situations\"\n\t\tconst tooltip = ifElse(\n\t\t\tequal(numberOfSituations, 1),\n\t\t\tResourceModel.getText(\"situationsTooltipSingular\"),\n\t\t\tfn(\"formatMessage\", [ResourceModel.getText(\"situationsTooltipPlural\"), numberOfSituations])\n\t\t);\n\n\t\t// 'press' handler\n\t\tconst onPress = fn(showPopover, [ref(\"$controller\"), ref(\"$event\"), situationsNavProp.name]);\n\n\t\treturn xml`\n\t\t\t<m:Button core:require=\"{rt: 'sap/fe/macros/situations/SituationsPopover', formatMessage: 'sap/base/strings/formatMessage'}\"\n\t\t\t\ttype=\"Attention\"\n\t\t\t\ticon=\"sap-icon://alert\"\n\t\t\t\ttext=\"${text}\"\n\t\t\t\ttooltip=\"${tooltip}\"\n\t\t\t\tvisible=\"${visible}\"\n\t\t\t\tpress=\"${onPress}\"\n\t\t\t/>`;\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":22591,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","BuildingBlock","BuildingBlockRuntime","MetaModelConverter","BindingToolkit","ResourceModel","SituationsPopover","_dec","_dec2","_dec3","_class","_class2","_descriptor","_descriptor2","_exports","showPopover","ref","pathInModel","ifElse","greaterThan","fn","equal","and","convertMetaModelContext","xml","defineBuildingBlock","BuildingBlockBase","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","SituationsIndicator","name","namespace","type","required","_BuildingBlockBase","_this","_len","arguments","length","args","Array","_key","this","getSituationsNavigationProperty","navigationProperties","_type","targetType","entityType","situationsNavProps","filter","navigationProperty","_navigationProperty$t","_navigationProperty$t2","isCollection","annotations","Common","SAPObjectNodeType","Name","situationsNavProp","navPropNames","map","prop","join","error","_proto","getTemplate","entitySet","numberOfSituations","visible","propertyPath","text","tooltip","getText","onPress"],"sources":["SituationsIndicator-dbg.fragment.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,mEAAO,CAAC,eAAgB,2CAA4C,kDAAmD,4CAA6C,qCAAsC,8BAA+B,8CAA+C,SAAUC,EAAKC,EAAeC,EAAsBC,EAAoBC,EAAgBC,EAAeC,GACpY,aAEA,IAAIC,EAAMC,EAAOC,EAAOC,EAAQC,EAASC,EAAaC,EACtD,IAAIC,EAAW,CAAC,EAChB,IAAIC,EAAcT,EAAkBS,YACpC,IAAIC,EAAMZ,EAAeY,IACzB,IAAIC,EAAcb,EAAea,YACjC,IAAIC,EAASd,EAAec,OAC5B,IAAIC,EAAcf,EAAee,YACjC,IAAIC,EAAKhB,EAAegB,GACxB,IAAIC,EAAQjB,EAAeiB,MAC3B,IAAIC,EAAMlB,EAAekB,IACzB,IAAIC,EAA0BpB,EAAmBoB,wBACjD,IAAIC,EAAMtB,EAAqBsB,IAC/B,IAAIC,EAAsBxB,EAAcwB,oBACxC,IAAIC,EAAoBzB,EAAcyB,kBACtC,IAAIC,EAAiB1B,EAAc0B,eACnC,SAASC,EAA2BC,EAAQC,EAAUC,EAAYC,GAAW,IAAKD,EAAY,OAAQE,OAAOC,eAAeL,EAAQC,EAAU,CAAEK,WAAYJ,EAAWI,WAAYC,aAAcL,EAAWK,aAAcC,SAAUN,EAAWM,SAAUC,MAAOP,EAAWQ,YAAcR,EAAWQ,YAAYC,KAAKR,QAAgB,GAAM,CAC3U,SAASS,EAAuBC,GAAQ,GAAIA,SAAc,EAAG,CAAE,MAAM,IAAIC,eAAe,4DAA8D,CAAE,OAAOD,CAAM,CACrK,SAASE,EAAeC,EAAUC,GAAcD,EAASE,UAAYd,OAAOe,OAAOF,EAAWC,WAAYF,EAASE,UAAUE,YAAcJ,EAAUK,EAAgBL,EAAUC,EAAa,CAC5L,SAASI,EAAgBC,EAAGC,GAAKF,EAAkBjB,OAAOoB,eAAiBpB,OAAOoB,eAAeC,OAAS,SAASJ,EAAgBC,EAAGC,GAAKD,EAAEI,UAAYH,EAAG,OAAOD,CAAG,EAAG,OAAOD,EAAgBC,EAAGC,EAAI,CACvM,SAASI,EAA0B3B,EAAQC,EAAU2B,EAAY1B,EAAYC,GAAW,IAAI0B,EAAO,CAAC,EAAGzB,OAAO0B,KAAK5B,GAAY6B,QAAQ,SAAUC,GAAOH,EAAKG,GAAO9B,EAAW8B,EAAM,GAAIH,EAAKvB,aAAeuB,EAAKvB,WAAYuB,EAAKtB,eAAiBsB,EAAKtB,aAAc,GAAI,UAAWsB,GAAQA,EAAKnB,YAAa,CAAEmB,EAAKrB,SAAW,IAAM,CAAEqB,EAAOD,EAAWK,QAAQC,UAAUC,OAAO,SAAUN,EAAMO,GAAa,OAAOA,EAAUpC,EAAQC,EAAU4B,IAASA,CAAM,EAAGA,GAAO,GAAI1B,GAAW0B,EAAKnB,mBAAqB,EAAG,CAAEmB,EAAKpB,MAAQoB,EAAKnB,YAAcmB,EAAKnB,YAAYC,KAAKR,QAAgB,EAAG0B,EAAKnB,YAAc2B,SAAW,CAAE,GAAIR,EAAKnB,mBAAqB,EAAG,CAAEN,OAAOC,eAAeL,EAAQC,EAAU4B,GAAOA,EAAO,IAAM,CAAE,OAAOA,CAAM,CACntB,SAASS,EAA0BpC,EAAYC,GAAW,MAAM,IAAIoC,MAAM,wDAA0D,gFAAkF,CACtN,IAAIC,GAAuB9D,EAAOkB,EAAoB,CACpD6C,KAAM,sBACNC,UAAW,sCACT/D,EAAQmB,EAAe,CACzB6C,KAAM,uBACNC,SAAU,OACRhE,EAAQkB,EAAe,CACzB6C,KAAM,SACNC,SAAU,QACRlE,EAAKG,GAAUC,EAAuB,SAAU+D,GAClD9B,EAAeyB,EAAqBK,GACpC,SAASL,IACP,IAAIM,EACJ,IAAK,IAAIC,EAAOC,UAAUC,OAAQC,EAAO,IAAIC,MAAMJ,GAAOK,EAAO,EAAGA,EAAOL,EAAMK,IAAQ,CACvFF,EAAKE,GAAQJ,UAAUI,EACzB,CACAN,EAAQD,EAAmBlC,KAAK0C,QAASH,IAASG,KAClDtD,EAA2B+C,EAAO,YAAa/D,EAAa6B,EAAuBkC,IACnF/C,EAA2B+C,EAAO,eAAgB9D,EAAc4B,EAAuBkC,IACvF,OAAOA,CACT,CACA7D,EAAWuD,EACXA,EAAoBc,gCAAkC,SAASA,EAAgCnD,GAC7F,IAAIoD,EACJ,OAAQpD,EAAQqD,OACd,IAAK,qBACHD,EAAuBpD,EAAQsD,WAAWF,qBAC1C,MACF,IAAK,aACHA,EAAuBpD,EAAQoD,qBAC/B,MACF,QACEA,EAAuBpD,EAAQuD,WAAWH,qBAE9C,MAAMI,EAAqBJ,EAAqBK,OAAOC,IACrD,IAAIC,EAAuBC,EAC3B,OAAQF,EAAmBG,gBAAkBF,EAAwBD,EAAmBJ,WAAWQ,YAAYC,UAAY,MAAQJ,SAA+B,OAAS,GAAKC,EAAyBD,EAAsBK,qBAAuB,MAAQJ,SAAgC,OAAS,EAAIA,EAAuBK,QAAU,mBAAmB,GAEjW,MAAMC,EAAoBV,EAAmBV,QAAU,EAAIU,EAAmB,GAAKtB,UAGnF,GAAIsB,EAAmBV,OAAS,EAAG,CACjC,MAAMqB,EAAeX,EAAmBY,IAAIC,GAAQ,IAAIA,EAAK/B,SAASgC,KAAK,MAC3E,IAAIhC,EACJ,OAAQtC,EAAQqD,OACd,IAAK,qBACHf,EAAOtC,EAAQsD,WAAWhB,KAC1B,MACF,IAAK,aACHA,EAAOtC,EAAQsC,KACf,MACF,QACEA,EAAOtC,EAAQuD,WAAWjB,KAE9BtE,EAAIuG,MAAM,gBAAgBjC,4CAA+C6B,cAAyBD,IAAsB,MAAQA,SAA2B,OAAS,EAAIA,EAAkB5B,+RAO5L,CACA,OAAO4B,CACT,EACA,IAAIM,EAASnC,EAAoBtB,UACjCyD,EAAOC,YAAc,SAASA,IAC5B,MAAMzE,EAAUT,EAAwB2D,KAAKwB,WAC7C,MAAMR,EAAoB7B,EAAoBc,gCAAgCnD,GAC9E,IAAKkE,EAAmB,CAEtB,OAAOhC,SACT,CACA,MAAMyC,EAAqB1F,EAAY,GAAGiF,EAAkB5B,8BAG5D,IAAIsC,EACJ,IAAK1B,KAAK2B,aAAc,CAEtBD,EAAUzF,EAAYwF,EAAoB,EAC5C,KAAO,CAELC,EAAUtF,EAAIH,EAAYwF,EAAoB,GAAItF,EAAMJ,EAAY,+BAAgC,YAAaiE,KAAK2B,cACxH,CAGA,MAAMC,EAAO5F,EAAOC,EAAYwF,EAAoB,GAAIA,EAAoB,IAG5E,MAAMI,EAAU7F,EAAOG,EAAMsF,EAAoB,GAAItG,EAAc2G,QAAQ,6BAA8B5F,EAAG,gBAAiB,CAACf,EAAc2G,QAAQ,2BAA4BL,KAGhL,MAAMM,EAAU7F,EAAGL,EAAa,CAACC,EAAI,eAAgBA,EAAI,UAAWkF,EAAkB5B,OACtF,OAAO9C,CAAG;;;;YAIJsF;eACGC;eACAH;aACFK;MAET,EACA,OAAO5C,CACT,CA9F0C,CA8FxC3C,GAAqBd,EAAc4C,EAA0B7C,EAAQoC,UAAW,YAAa,CAACvC,GAAQ,CACtG4B,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACX1B,EAAe2C,EAA0B7C,EAAQoC,UAAW,eAAgB,CAACtC,GAAQ,CACvF2B,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACV5B,KAAaD,GAClBI,EAAWuD,EACX,OAAOvD,CACT,EAAG","sourceRoot":"situations"}},{"offset":{"line":22604,"column":0},"map":{"version":3,"names":["bindTimestamp","timestampPropertyPath","path","type","constraints","precision","formatOptions","relative","currentSituationIndicator","createListPopover","controller","expectedNumberOfSituations","listDetailsPopover","listPopover","ResponsivePopover","showHeader","contentHeight","contentWidth","busyIndicatorDelay","placement","content","List","items","events","dataReceived","setContentHeight","parameters","$orderby","$expand","template","CustomListItem","press","goToDetails","HBox","ObjectStatus","icon","state","tooltip","ResourceModel","getText","addStyleClass","ObjectIdentifier","title","bindText","text","templateShareable","showNoData","goToList","unbindObject","close","openBy","event","pressedItem","getSource","context","getBindingContext","createPreviewPopover","getView","addDependent","bindElement","getPath","BusyLocker","unlock","lock","back","toolBarContent","push","Button","titleActive","popoverSettings","customHeader","Toolbar","VBox","Label","Text","shellServices","CommonUtils","getShellServices","navigationArguments","target","action","semanticObject","isNavigationSupported","supported","endButton","situationKey","getObject","undefined","crossAppNavService","params","SitnInstceKey","toExternal","showPopover","situationsNavigationProperty","bindingContext","numberOfSituations","popover","getModel","bindContext","getBoundContext","setBindingContext","__functionName"],"sourceRoot":"situations","sources":["SituationsPopover.ts"],"sourcesContent":["import CommonUtils from \"sap/fe/core/CommonUtils\";\nimport BusyLocker from \"sap/fe/core/controllerextensions/BusyLocker\";\nimport PageController from \"sap/fe/core/PageController\";\nimport ResourceModel from \"sap/fe/macros/ResourceModel\";\nimport { bindText } from \"sap/fe/macros/situations/SituationsText\";\nimport Button from \"sap/m/Button\";\nimport CustomListItem from \"sap/m/CustomListItem\";\nimport HBox from \"sap/m/HBox\";\nimport Label from \"sap/m/Label\";\nimport List from \"sap/m/List\";\nimport ObjectIdentifier from \"sap/m/ObjectIdentifier\";\nimport ObjectStatus from \"sap/m/ObjectStatus\";\nimport type { $ResponsivePopoverSettings } from \"sap/m/ResponsivePopover\";\nimport ResponsivePopover from \"sap/m/ResponsivePopover\";\nimport Text from \"sap/m/Text\";\nimport Toolbar from \"sap/m/Toolbar\";\nimport VBox from \"sap/m/VBox\";\nimport type UI5Event from \"sap/ui/base/Event\";\nimport type { AggregationBindingInfo, PropertyBindingInfo } from \"sap/ui/base/ManagedObject\";\nimport type Control from \"sap/ui/core/Control\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\n\nfunction bindTimestamp(timestampPropertyPath: string): PropertyBindingInfo {\n\treturn {\n\t\tpath: timestampPropertyPath,\n\t\ttype: \"sap.ui.model.odata.type.DateTimeOffset\",\n\t\tconstraints: { precision: 7 },\n\t\tformatOptions: { relative: true }\n\t};\n}\n\nlet currentSituationIndicator: Control | undefined;\n\nfunction createListPopover(controller: PageController, expectedNumberOfSituations: number) {\n\tlet listDetailsPopover: ResponsivePopover | null = null;\n\n\tconst listPopover = new ResponsivePopover({\n\t\tshowHeader: false,\n\t\tcontentHeight: `${expectedNumberOfSituations * 4.5}em`,\n\t\tcontentWidth: \"25em\",\n\t\tbusyIndicatorDelay: 200,\n\t\tplacement: \"Horizontal\",\n\t\tcontent: [\n\t\t\tnew List({\n\t\t\t\titems: {\n\t\t\t\t\tpath: \"_Instance\",\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tdataReceived: () => {\n\t\t\t\t\t\t\tlistPopover.setContentHeight();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tparameters: {\n\t\t\t\t\t\t$orderby: \"SitnInstceLastChgdAtDateTime desc\",\n\t\t\t\t\t\t$expand: \"_InstanceAttribute($expand=_InstanceAttributeValue)\" // required for formatting the texts\n\t\t\t\t\t},\n\t\t\t\t\ttemplate: new CustomListItem({\n\t\t\t\t\t\ttype: \"Navigation\",\n\t\t\t\t\t\tpress: goToDetails,\n\t\t\t\t\t\tcontent: [\n\t\t\t\t\t\t\tnew HBox({\n\t\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\t\tnew ObjectStatus({\n\t\t\t\t\t\t\t\t\t\ticon: \"sap-icon://alert\",\n\t\t\t\t\t\t\t\t\t\tstate: \"Warning\",\n\t\t\t\t\t\t\t\t\t\ttooltip: ResourceModel.getText(\"situation\")\n\t\t\t\t\t\t\t\t\t}).addStyleClass(\"sapUiTinyMarginEnd\"),\n\t\t\t\t\t\t\t\t\tnew ObjectIdentifier({\n\t\t\t\t\t\t\t\t\t\ttitle: bindText(\"SituationTitle\"),\n\t\t\t\t\t\t\t\t\t\ttext: bindTimestamp(\"SitnInstceLastChgdAtDateTime\")\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.addStyleClass(\"sapUiSmallMarginBeginEnd\")\n\t\t\t\t\t\t\t\t.addStyleClass(\"sapUiSmallMarginTopBottom\")\n\t\t\t\t\t\t]\n\t\t\t\t\t}),\n\t\t\t\t\ttemplateShareable: false\n\t\t\t\t} as AggregationBindingInfo,\n\t\t\t\tshowNoData: false\n\t\t\t})\n\t\t]\n\t});\n\n\tfunction goToList() {\n\t\tif (listDetailsPopover) {\n\t\t\tlistDetailsPopover.unbindObject();\n\t\t\tlistDetailsPopover.close();\n\t\t}\n\t\tif (currentSituationIndicator) {\n\t\t\tlistPopover.openBy(currentSituationIndicator);\n\t\t}\n\t}\n\n\tasync function goToDetails(event: UI5Event) {\n\t\tconst pressedItem = event.getSource() as Control;\n\t\tconst context = pressedItem.getBindingContext();\n\n\t\tif (context && currentSituationIndicator) {\n\t\t\tif (listDetailsPopover === null) {\n\t\t\t\tlistDetailsPopover = await createPreviewPopover(controller, goToList);\n\t\t\t\tcontroller.getView().addDependent(listDetailsPopover);\n\t\t\t}\n\n\t\t\tlistDetailsPopover.bindElement({\n\t\t\t\tpath: context.getPath(),\n\t\t\t\tparameters: { $expand: \"_InstanceAttribute($expand=_InstanceAttributeValue)\" },\n\t\t\t\tevents: {\n\t\t\t\t\tdataReceived: () => {\n\t\t\t\t\t\tBusyLocker.unlock(listDetailsPopover);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tlistPopover.close();\n\n\t\t\tBusyLocker.lock(listDetailsPopover);\n\t\t\tlistDetailsPopover.openBy(currentSituationIndicator);\n\t\t}\n\t}\n\n\treturn listPopover;\n}\n\nasync function createPreviewPopover(controller: PageController, back?: (event: UI5Event) => void) {\n\tconst toolBarContent: Control[] = [];\n\n\tif (back) {\n\t\ttoolBarContent.push(\n\t\t\tnew Button({\n\t\t\t\ttype: \"Back\",\n\t\t\t\ttooltip: ResourceModel.getText(\"back\"),\n\t\t\t\tpress: back\n\t\t\t}).addStyleClass(\"sapUiNoMarginEnd\")\n\t\t);\n\t}\n\n\ttoolBarContent.push(\n\t\tnew ObjectStatus({\n\t\t\tstate: \"Warning\",\n\t\t\ticon: \"sap-icon://alert\",\n\t\t\ttooltip: ResourceModel.getText(\"situationIconTooltip\")\n\t\t}).addStyleClass(\"sapUiSmallMarginBegin\")\n\t);\n\n\ttoolBarContent.push(\n\t\tnew ObjectIdentifier({\n\t\t\ttitleActive: false,\n\t\t\ttitle: bindText(\"SituationTitle\")\n\t\t}).addStyleClass(\"sapUiSmallMarginEnd\")\n\t);\n\n\tconst popoverSettings: $ResponsivePopoverSettings = {\n\t\tcontentWidth: \"25em\",\n\t\tcontentHeight: \"7em\",\n\t\tplacement: \"Horizontal\",\n\t\tcustomHeader: new Toolbar({ content: toolBarContent }),\n\t\tbusyIndicatorDelay: 100,\n\t\tcontent: [\n\t\t\tnew VBox({\n\t\t\t\titems: [\n\t\t\t\t\tnew Label({ text: bindTimestamp(\"SitnInstceLastChgdAtDateTime\") }),\n\t\t\t\t\tnew Text({ text: bindText(\"SituationText\") }).addStyleClass(\"sapUiTinyMarginTop\")\n\t\t\t\t]\n\t\t\t})\n\t\t]\n\t};\n\n\tconst shellServices = CommonUtils.getShellServices(controller.getView());\n\tconst navigationArguments: any = {\n\t\ttarget: {\n\t\t\taction: \"displayExtended\",\n\t\t\tsemanticObject: \"SituationInstance\"\n\t\t}\n\t};\n\tconst isNavigationSupported = await shellServices.isNavigationSupported([navigationArguments]);\n\n\tif (isNavigationSupported[0].supported) {\n\t\tpopoverSettings.endButton = new Button({\n\t\t\ttext: ResourceModel.getText(\"showDetails\"),\n\n\t\t\tpress: (event: UI5Event) => {\n\t\t\t\tconst situationKey = (event.getSource() as Control).getBindingContext()?.getObject(`SitnInstceKey`);\n\n\t\t\t\tif (situationKey !== undefined && situationKey !== null && shellServices.crossAppNavService) {\n\t\t\t\t\tnavigationArguments.params = { SitnInstceKey: situationKey };\n\t\t\t\t\tshellServices.crossAppNavService.toExternal(navigationArguments);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\treturn new ResponsivePopover(popoverSettings).addStyleClass(\"sapUiPopupWithPadding\").addStyleClass(\"sapUiResponsivePadding--header\");\n}\n\nexport async function showPopover(controller: PageController, event: UI5Event, situationsNavigationProperty: string) {\n\tcurrentSituationIndicator = event.getSource() as Control;\n\n\tconst bindingContext = currentSituationIndicator.getBindingContext() as Context,\n\t\tnumberOfSituations = bindingContext.getObject(`${situationsNavigationProperty}/SitnNumberOfInstances`);\n\n\tlet popover: ResponsivePopover;\n\tconst context = bindingContext\n\t\t.getModel()\n\t\t.bindContext(situationsNavigationProperty, bindingContext, {\n\t\t\t$expand: \"_Instance($expand=_InstanceAttribute($expand=_InstanceAttributeValue))\"\n\t\t} as any)\n\t\t.getBoundContext();\n\n\tif (numberOfSituations <= 1) {\n\t\tpopover = await createPreviewPopover(controller);\n\t\tpopover.setBindingContext(context);\n\t\tpopover.bindElement({ path: \"_Instance/0\" });\n\t} else {\n\t\tpopover = createListPopover(controller, numberOfSituations);\n\t\tpopover.setBindingContext(context);\n\t}\n\n\tcontroller.getView().addDependent(popover);\n\tpopover.openBy(currentSituationIndicator);\n}\n\nshowPopover.__functionName = \"rt.showPopover\";\n"],"mappings":"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"}},{"offset":{"line":22785,"column":0},"map":{"version":3,"names":["sap","ui","define","CommonUtils","BusyLocker","ResourceModel","SituationsText","Button","CustomListItem","HBox","Label","List","ObjectIdentifier","ObjectStatus","ResponsivePopover","Text","Toolbar","VBox","_exports","bindText","bindTimestamp","timestampPropertyPath","path","type","constraints","precision","formatOptions","relative","currentSituationIndicator","createListPopover","controller","expectedNumberOfSituations","listDetailsPopover","listPopover","showHeader","contentHeight","contentWidth","busyIndicatorDelay","placement","content","items","events","dataReceived","setContentHeight","parameters","$orderby","$expand","template","press","goToDetails","icon","state","tooltip","getText","addStyleClass","title","text","templateShareable","showNoData","goToList","unbindObject","close","openBy","async","event","pressedItem","getSource","context","getBindingContext","createPreviewPopover","getView","addDependent","bindElement","getPath","unlock","lock","back","toolBarContent","push","titleActive","popoverSettings","customHeader","shellServices","getShellServices","navigationArguments","target","action","semanticObject","isNavigationSupported","supported","endButton","_getBindingContext","situationKey","getObject","undefined","crossAppNavService","params","SitnInstceKey","toExternal","showPopover","situationsNavigationProperty","bindingContext","numberOfSituations","popover","getModel","bindContext","getBoundContext","setBindingContext","__functionName"],"sources":["SituationsPopover-dbg.js"],"mappings":"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","sourceRoot":"situations"}},{"offset":{"line":22790,"column":0},"map":{"version":3,"names":["types","createEdmType","attributeEDMType","EdmBoolean","EdmDate","DateTimeOffset","Decimal","Guid","Int32","EdmString","parseAttributeValue","type","value","oDataType","parseValue","parseInt","parseFloat","getType","formatter","key","template","context","getBindingContext","undefined","attributes","getObject","length","placeholderReplacer","match","attributeSource","attributeName","source","toString","resolvedAttribute","find","attribute","SitnInstceAttribSource","SitnInstceAttribName","Log","error","_InstanceAttributeValue","resolvedAttributeType","SitnInstceAttribEntityType","map","parsedValue","SitnInstceAttribValue","formatValue","join","replace","bindText","textTemplatePropertyPath","parts","path"],"sourceRoot":"situations","sources":["SituationsText.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport type Control from \"sap/ui/core/Control\";\nimport EdmBoolean from \"sap/ui/model/odata/type/Boolean\";\nimport EdmDate from \"sap/ui/model/odata/type/Date\";\nimport DateTimeOffset from \"sap/ui/model/odata/type/DateTimeOffset\";\nimport Decimal from \"sap/ui/model/odata/type/Decimal\";\nimport Guid from \"sap/ui/model/odata/type/Guid\";\nimport Int32 from \"sap/ui/model/odata/type/Int32\";\nimport type ODataType from \"sap/ui/model/odata/type/ODataType\";\nimport EdmString from \"sap/ui/model/odata/type/String\";\n\n/**\n * Attribute type.\n *\n * Situation Handling supports a subset of the EDM types.\n */\ntype InstanceAttributeEdmType =\n\t| \"EDM.STRING\"\n\t| \"EDM.DATE\"\n\t| \"EDM.DATETIME\"\n\t| \"EDM.DATETIMEOFFSET\"\n\t| \"EDM.INT32\"\n\t| \"EDM.DECIMAL\"\n\t| \"EDM.GUID\"\n\t| \"EDM.BOOLEAN\";\n\n/**\n * Attribute.\n */\nexport type InstanceAttribute = {\n\tSitnInstceAttribSource: string;\n\tSitnInstceAttribName: string;\n\tSitnInstceAttribEntityType: InstanceAttributeEdmType;\n\t_InstanceAttributeValue?: {\n\t\tSitnInstceAttribValue: string;\n\t}[];\n};\n\nconst types: Partial<Record<InstanceAttributeEdmType, ODataType>> = {};\n\nfunction createEdmType(attributeEDMType: InstanceAttributeEdmType): ODataType {\n\tswitch (attributeEDMType) {\n\t\tcase \"EDM.BOOLEAN\":\n\t\t\treturn new EdmBoolean();\n\t\tcase \"EDM.DATE\":\n\t\tcase \"EDM.DATETIME\":\n\t\t\treturn new EdmDate();\n\t\tcase \"EDM.DATETIMEOFFSET\":\n\t\t\treturn new DateTimeOffset();\n\t\tcase \"EDM.DECIMAL\":\n\t\t\treturn new Decimal();\n\t\tcase \"EDM.GUID\":\n\t\t\treturn new Guid();\n\t\tcase \"EDM.INT32\":\n\t\t\treturn new Int32();\n\t\tcase \"EDM.STRING\":\n\t\t\treturn new EdmString();\n\t\tdefault:\n\t\t\treturn createEdmType(\"EDM.STRING\");\n\t}\n}\n\nfunction parseAttributeValue(type: InstanceAttributeEdmType, value: string, oDataType: ODataType) {\n\tswitch (type) {\n\t\tcase \"EDM.STRING\":\n\t\t\treturn value;\n\t\tcase \"EDM.DATE\":\n\t\tcase \"EDM.DATETIME\":\n\t\tcase \"EDM.DATETIMEOFFSET\":\n\t\t\treturn oDataType.parseValue(value, \"string\");\n\t\tcase \"EDM.INT32\":\n\t\t\treturn parseInt(value, 10);\n\t\tcase \"EDM.DECIMAL\":\n\t\t\treturn parseFloat(value);\n\t\tcase \"EDM.GUID\":\n\t\t\treturn value;\n\t\tcase \"EDM.BOOLEAN\":\n\t\t\t// ABAP style: 'X' = true, '' = false\n\t\t\treturn value === \"X\";\n\t\tdefault:\n\t\t\treturn value;\n\t}\n}\n\nfunction getType(attributeEDMType: InstanceAttributeEdmType): ODataType {\n\tlet type = types[attributeEDMType];\n\tif (!type) {\n\t\ttype = createEdmType(attributeEDMType);\n\t\ttypes[attributeEDMType] = type;\n\t}\n\treturn type;\n}\n\nexport function formatter(this: Control, key: string | undefined | null, template: string | undefined | null) {\n\tconst context = this.getBindingContext();\n\tif (key === undefined || key === null || template === undefined || template === null || !context) {\n\t\treturn \"\";\n\t}\n\n\tconst attributes = context.getObject(\"_InstanceAttribute\") as InstanceAttribute[] | null | undefined;\n\tif (attributes === undefined || attributes === null || attributes.length === 0) {\n\t\treturn template;\n\t}\n\n\tconst placeholderReplacer = (match: string, attributeSource: string, attributeName: string) => {\n\t\tconst source = parseInt(attributeSource, 10).toString(); // remove leading zeros from the attribute source\n\n\t\tconst resolvedAttribute: InstanceAttribute | undefined = attributes.find(\n\t\t\t(attribute) => attribute.SitnInstceAttribSource === source && attribute.SitnInstceAttribName === attributeName\n\t\t);\n\n\t\tif (resolvedAttribute === undefined) {\n\t\t\tLog.error(`Failed to resolve attribute ${attributeSource}.${attributeName}`);\n\t\t\treturn \"\";\n\t\t}\n\n\t\tif (!resolvedAttribute._InstanceAttributeValue) {\n\t\t\tLog.error(`Failed to resolve a value for attribute ${attributeSource}.${attributeName}`);\n\t\t\treturn \"\";\n\t\t}\n\n\t\tconst resolvedAttributeType = getType(resolvedAttribute.SitnInstceAttribEntityType);\n\n\t\t// Format the value(s) - if there are multiple, concatenate them\n\t\treturn resolvedAttribute._InstanceAttributeValue\n\t\t\t.map((value) => {\n\t\t\t\tconst parsedValue = parseAttributeValue(\n\t\t\t\t\tresolvedAttribute.SitnInstceAttribEntityType,\n\t\t\t\t\tvalue.SitnInstceAttribValue,\n\t\t\t\t\tresolvedAttributeType\n\t\t\t\t);\n\t\t\t\treturn resolvedAttributeType.formatValue(parsedValue, \"string\");\n\t\t\t})\n\t\t\t.join(\", \");\n\t};\n\n\t// Replace placeholders for attribute values.\n\t// Their format is {<digitsequence>.<something>} - e.g. {01.PURCHASECONTRACT}\n\treturn template.replace(/\\{(\\d+)\\.([^}]+)}/g, placeholderReplacer);\n}\n\nexport function bindText(textTemplatePropertyPath: string) {\n\treturn {\n\t\tparts: [{ path: \"SitnInstceKey\" }, { path: `_InstanceText/${textTemplatePropertyPath}` }],\n\t\tformatter: formatter\n\t};\n}\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;EAsCA,MAAMA,KAA2D,GAAG,CAAC,CAAC;EAEtE,SAASC,aAAa,CAACC,gBAA0C,EAAa;IAC7E,QAAQA,gBAAgB;MACvB,KAAK,aAAa;QACjB,OAAO,IAAIC,UAAU,EAAE;MACxB,KAAK,UAAU;MACf,KAAK,cAAc;QAClB,OAAO,IAAIC,OAAO,EAAE;MACrB,KAAK,oBAAoB;QACxB,OAAO,IAAIC,cAAc,EAAE;MAC5B,KAAK,aAAa;QACjB,OAAO,IAAIC,OAAO,EAAE;MACrB,KAAK,UAAU;QACd,OAAO,IAAIC,IAAI,EAAE;MAClB,KAAK,WAAW;QACf,OAAO,IAAIC,KAAK,EAAE;MACnB,KAAK,YAAY;QAChB,OAAO,IAAIC,SAAS,EAAE;MACvB;QACC,OAAOR,aAAa,CAAC,YAAY,CAAC;IAAC;EAEtC;EAEA,SAASS,mBAAmB,CAACC,IAA8B,EAAEC,KAAa,EAAEC,SAAoB,EAAE;IACjG,QAAQF,IAAI;MACX,KAAK,YAAY;QAChB,OAAOC,KAAK;MACb,KAAK,UAAU;MACf,KAAK,cAAc;MACnB,KAAK,oBAAoB;QACxB,OAAOC,SAAS,CAACC,UAAU,CAACF,KAAK,EAAE,QAAQ,CAAC;MAC7C,KAAK,WAAW;QACf,OAAOG,QAAQ,CAACH,KAAK,EAAE,EAAE,CAAC;MAC3B,KAAK,aAAa;QACjB,OAAOI,UAAU,CAACJ,KAAK,CAAC;MACzB,KAAK,UAAU;QACd,OAAOA,KAAK;MACb,KAAK,aAAa;QACjB;QACA,OAAOA,KAAK,KAAK,GAAG;MACrB;QACC,OAAOA,KAAK;IAAC;EAEhB;EAEA,SAASK,OAAO,CAACf,gBAA0C,EAAa;IACvE,IAAIS,IAAI,GAAGX,KAAK,CAACE,gBAAgB,CAAC;IAClC,IAAI,CAACS,IAAI,EAAE;MACVA,IAAI,GAAGV,aAAa,CAACC,gBAAgB,CAAC;MACtCF,KAAK,CAACE,gBAAgB,CAAC,GAAGS,IAAI;IAC/B;IACA,OAAOA,IAAI;EACZ;EAEO,SAASO,SAAS,CAAgBC,GAA8B,EAAEC,QAAmC,EAAE;IAC7G,MAAMC,OAAO,GAAG,IAAI,CAACC,iBAAiB,EAAE;IACxC,IAAIH,GAAG,KAAKI,SAAS,IAAIJ,GAAG,KAAK,IAAI,IAAIC,QAAQ,KAAKG,SAAS,IAAIH,QAAQ,KAAK,IAAI,IAAI,CAACC,OAAO,EAAE;MACjG,OAAO,EAAE;IACV;IAEA,MAAMG,UAAU,GAAGH,OAAO,CAACI,SAAS,CAAC,oBAAoB,CAA2C;IACpG,IAAID,UAAU,KAAKD,SAAS,IAAIC,UAAU,KAAK,IAAI,IAAIA,UAAU,CAACE,MAAM,KAAK,CAAC,EAAE;MAC/E,OAAON,QAAQ;IAChB;IAEA,MAAMO,mBAAmB,GAAG,CAACC,KAAa,EAAEC,eAAuB,EAAEC,aAAqB,KAAK;MAC9F,MAAMC,MAAM,GAAGhB,QAAQ,CAACc,eAAe,EAAE,EAAE,CAAC,CAACG,QAAQ,EAAE,CAAC,CAAC;;MAEzD,MAAMC,iBAAgD,GAAGT,UAAU,CAACU,IAAI,CACtEC,SAAS,IAAKA,SAAS,CAACC,sBAAsB,KAAKL,MAAM,IAAII,SAAS,CAACE,oBAAoB,KAAKP,aAAa,CAC9G;MAED,IAAIG,iBAAiB,KAAKV,SAAS,EAAE;QACpCe,GAAG,CAACC,KAAK,CAAE,+BAA8BV,eAAgB,IAAGC,aAAc,EAAC,CAAC;QAC5E,OAAO,EAAE;MACV;MAEA,IAAI,CAACG,iBAAiB,CAACO,uBAAuB,EAAE;QAC/CF,GAAG,CAACC,KAAK,CAAE,2CAA0CV,eAAgB,IAAGC,aAAc,EAAC,CAAC;QACxF,OAAO,EAAE;MACV;MAEA,MAAMW,qBAAqB,GAAGxB,OAAO,CAACgB,iBAAiB,CAACS,0BAA0B,CAAC;;MAEnF;MACA,OAAOT,iBAAiB,CAACO,uBAAuB,CAC9CG,GAAG,CAAE/B,KAAK,IAAK;QACf,MAAMgC,WAAW,GAAGlC,mBAAmB,CACtCuB,iBAAiB,CAACS,0BAA0B,EAC5C9B,KAAK,CAACiC,qBAAqB,EAC3BJ,qBAAqB,CACrB;QACD,OAAOA,qBAAqB,CAACK,WAAW,CAACF,WAAW,EAAE,QAAQ,CAAC;MAChE,CAAC,CAAC,CACDG,IAAI,CAAC,IAAI,CAAC;IACb,CAAC;;IAED;IACA;IACA,OAAO3B,QAAQ,CAAC4B,OAAO,CAAC,oBAAoB,EAAErB,mBAAmB,CAAC;EACnE;EAAC;EAEM,SAASsB,QAAQ,CAACC,wBAAgC,EAAE;IAC1D,OAAO;MACNC,KAAK,EAAE,CAAC;QAAEC,IAAI,EAAE;MAAgB,CAAC,EAAE;QAAEA,IAAI,EAAG,iBAAgBF,wBAAyB;MAAE,CAAC,CAAC;MACzFhC,SAAS,EAAEA;IACZ,CAAC;EACF;EAAC;EAAA;AAAA"}},{"offset":{"line":22897,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","EdmBoolean","EdmDate","DateTimeOffset","Decimal","Guid","Int32","EdmString","_exports","types","createEdmType","attributeEDMType","parseAttributeValue","type","value","oDataType","parseValue","parseInt","parseFloat","getType","formatter","key","template","context","this","getBindingContext","undefined","attributes","getObject","length","placeholderReplacer","match","attributeSource","attributeName","source","toString","resolvedAttribute","find","attribute","SitnInstceAttribSource","SitnInstceAttribName","error","_InstanceAttributeValue","resolvedAttributeType","SitnInstceAttribEntityType","map","parsedValue","SitnInstceAttribValue","formatValue","join","replace","bindText","textTemplatePropertyPath","parts","path"],"sources":["SituationsText-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,qDAAO,CAAC,eAAgB,kCAAmC,+BAAgC,yCAA0C,kCAAmC,+BAAgC,gCAAiC,kCAAmC,SAAUC,EAAKC,EAAYC,EAASC,EAAgBC,EAASC,EAAMC,EAAOC,GAC3V,aAEA,IAAIC,EAAW,CAAC,EAChB,MAAMC,EAAQ,CAAC,EACf,SAASC,EAAcC,GACrB,OAAQA,GACN,IAAK,cACH,OAAO,IAAIV,EACb,IAAK,WACL,IAAK,eACH,OAAO,IAAIC,EACb,IAAK,qBACH,OAAO,IAAIC,EACb,IAAK,cACH,OAAO,IAAIC,EACb,IAAK,WACH,OAAO,IAAIC,EACb,IAAK,YACH,OAAO,IAAIC,EACb,IAAK,aACH,OAAO,IAAIC,EACb,QACE,OAAOG,EAAc,cAE3B,CACA,SAASE,EAAoBC,EAAMC,EAAOC,GACxC,OAAQF,GACN,IAAK,aACH,OAAOC,EACT,IAAK,WACL,IAAK,eACL,IAAK,qBACH,OAAOC,EAAUC,WAAWF,EAAO,UACrC,IAAK,YACH,OAAOG,SAASH,EAAO,IACzB,IAAK,cACH,OAAOI,WAAWJ,GACpB,IAAK,WACH,OAAOA,EACT,IAAK,cAEH,OAAOA,IAAU,IACnB,QACE,OAAOA,EAEb,CACA,SAASK,EAAQR,GACf,IAAIE,EAAOJ,EAAME,GACjB,IAAKE,EAAM,CACTA,EAAOH,EAAcC,GACrBF,EAAME,GAAoBE,CAC5B,CACA,OAAOA,CACT,CACA,SAASO,EAAUC,EAAKC,GACtB,MAAMC,EAAUC,KAAKC,oBACrB,GAAIJ,IAAQK,WAAaL,IAAQ,MAAQC,IAAaI,WAAaJ,IAAa,OAASC,EAAS,CAChG,MAAO,EACT,CACA,MAAMI,EAAaJ,EAAQK,UAAU,sBACrC,GAAID,IAAeD,WAAaC,IAAe,MAAQA,EAAWE,SAAW,EAAG,CAC9E,OAAOP,CACT,CACA,MAAMQ,EAAsB,CAACC,EAAOC,EAAiBC,KACnD,MAAMC,EAASjB,SAASe,EAAiB,IAAIG,WAE7C,MAAMC,EAAoBT,EAAWU,KAAKC,GAAaA,EAAUC,yBAA2BL,GAAUI,EAAUE,uBAAyBP,GACzI,GAAIG,IAAsBV,UAAW,CACnC1B,EAAIyC,MAAM,+BAA+BT,KAAmBC,KAC5D,MAAO,EACT,CACA,IAAKG,EAAkBM,wBAAyB,CAC9C1C,EAAIyC,MAAM,2CAA2CT,KAAmBC,KACxE,MAAO,EACT,CACA,MAAMU,EAAwBxB,EAAQiB,EAAkBQ,4BAGxD,OAAOR,EAAkBM,wBAAwBG,IAAI/B,IACnD,MAAMgC,EAAclC,EAAoBwB,EAAkBQ,2BAA4B9B,EAAMiC,sBAAuBJ,GACnH,OAAOA,EAAsBK,YAAYF,EAAa,SAAS,GAC9DG,KAAK,KAAK,EAKf,OAAO3B,EAAS4B,QAAQ,qBAAsBpB,EAChD,CACAtB,EAASY,UAAYA,EACrB,SAAS+B,EAASC,GAChB,MAAO,CACLC,MAAO,CAAC,CACNC,KAAM,iBACL,CACDA,KAAM,iBAAiBF,MAEzBhC,UAAWA,EAEf,CACAZ,EAAS2C,SAAWA,EACpB,OAAO3C,CACT,EAAG","sourceRoot":"situations"}},{"offset":{"line":22902,"column":0},"map":{"version":3,"names":["BasicSearch","defineUI5Class","implementInterface","event","aggregation","type","multiple","__implements__sap_ui_mdc_IFilterSource","init","setAggregation","SearchField","placeholder","search","fireEvent","getConditions","undefined","getSearch","filter","getValue","validate","Promise","resolve","render","oRm","oControl","openStart","openEnd","renderControl","close","Control"],"sourceRoot":"table","sources":["BasicSearch.ts"],"sourcesContent":["import { aggregation, defineUI5Class, event, implementInterface } from \"sap/fe/core/helpers/ClassSupport\";\nimport SearchField from \"sap/m/SearchField\";\nimport Control from \"sap/ui/core/Control\";\nimport type RenderManager from \"sap/ui/core/RenderManager\";\nimport type { IFilter } from \"sap/ui/mdc/library\";\n@defineUI5Class(\"sap.fe.macros.table.BasicSearch\")\nclass BasicSearch extends Control implements IFilter {\n\t@implementInterface(\"sap.ui.mdc.IFilter\")\n\t__implements__sap_ui_mdc_IFilter: boolean = true;\n\t__implements__sap_ui_mdc_IFilterSource: boolean = true;\n\n\t/**\n\t * The 'filterChanged' can be optionally implemented to display an overlay\n\t * when the filter value of the IFilter changes\n\t */\n\t@event(/*{ conditionsBased: {\n\t\t \ttype: \"boolean\"\n\t\t }}*/)\n\tfilterChanged!: Function;\n\t/**\n\t * The 'search' event is a mandatory IFilter event to trigger a search query\n\t * on the consuming control\n\t */\n\t@event(/*{\n\t\t\t\tconditions: {\n\t\t\t\t\ttype: \"object\"\n\t\t\t\t}\n\t\t\t}*/)\n\tsearch!: Function;\n\n\t@aggregation({\n\t\ttype: \"sap.ui.core.Control\",\n\t\tmultiple: false\n\t})\n\tfilter!: SearchField;\n\n\tinit() {\n\t\tthis.setAggregation(\n\t\t\t\"filter\",\n\t\t\tnew SearchField({\n\t\t\t\tplaceholder: \"{sap.fe.i18n>M_FILTERBAR_SEARCH}\",\n\t\t\t\tsearch: () => {\n\t\t\t\t\tthis.fireEvent(\"search\");\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}\n\tgetConditions() {\n\t\treturn undefined as any;\n\t}\n\tgetSearch() {\n\t\treturn this.filter.getValue();\n\t}\n\tvalidate() {\n\t\treturn Promise.resolve();\n\t}\n\tstatic render(oRm: RenderManager, oControl: BasicSearch) {\n\t\toRm.openStart(\"div\", oControl);\n\t\toRm.openEnd();\n\t\toRm.renderControl(oControl.filter);\n\t\toRm.close(\"div\");\n\t}\n}\n\nexport default BasicSearch;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;MAMMA,WAAW,WADhBC,cAAc,CAAC,iCAAiC,CAAC,UAEhDC,kBAAkB,CAAC,oBAAoB,CAAC,UAQxCC,KAAK,EAAC;AACR;AACA,oJAFQ,CAEA,UAMNA,KAAK,EAAC;AACR;AACA;AACA;AACA,yKAJQ,CAID,UAGLC,WAAW,CAAC;IACZC,IAAI,EAAE,qBAAqB;IAC3BC,QAAQ,EAAE;EACX,CAAC,CAAC;IAAA;IAAA;MAAA;MAAA;QAAA;MAAA;MAAA;MAAA;MAAA,MAxBFC,sCAAsC,GAAY,IAAI;MAAA;MAAA;MAAA;MAAA;IAAA;IAAA;IAAA,OA2BtDC,IAAI,GAAJ,gBAAO;MACN,IAAI,CAACC,cAAc,CAClB,QAAQ,EACR,IAAIC,WAAW,CAAC;QACfC,WAAW,EAAE,kCAAkC;QAC/CC,MAAM,EAAE,MAAM;UACb,IAAI,CAACC,SAAS,CAAC,QAAQ,CAAC;QACzB;MACD,CAAC,CAAC,CACF;IACF,CAAC;IAAA,OACDC,aAAa,GAAb,yBAAgB;MACf,OAAOC,SAAS;IACjB,CAAC;IAAA,OACDC,SAAS,GAAT,qBAAY;MACX,OAAO,IAAI,CAACC,MAAM,CAACC,QAAQ,EAAE;IAC9B,CAAC;IAAA,OACDC,QAAQ,GAAR,oBAAW;MACV,OAAOC,OAAO,CAACC,OAAO,EAAE;IACzB,CAAC;IAAA,YACMC,MAAM,GAAb,gBAAcC,GAAkB,EAAEC,QAAqB,EAAE;MACxDD,GAAG,CAACE,SAAS,CAAC,KAAK,EAAED,QAAQ,CAAC;MAC9BD,GAAG,CAACG,OAAO,EAAE;MACbH,GAAG,CAACI,aAAa,CAACH,QAAQ,CAACP,MAAM,CAAC;MAClCM,GAAG,CAACK,KAAK,CAAC,KAAK,CAAC;IACjB,CAAC;IAAA;EAAA,EAvDwBC,OAAO;IAAA;IAAA;IAAA;IAAA;MAAA,OAEY,IAAI;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;EAAA,OAwDlC7B,WAAW;AAAA"}},{"offset":{"line":22994,"column":0},"map":{"version":3,"names":["sap","ui","define","ClassSupport","SearchField","Control","_dec","_dec2","_dec3","_dec4","_dec5","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","implementInterface","event","defineUI5Class","aggregation","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","BasicSearch","type","multiple","_Control","_this","_len","arguments","length","args","Array","_key","this","__implements__sap_ui_mdc_IFilterSource","_proto","init","setAggregation","placeholder","search","fireEvent","getConditions","getSearch","filter","getValue","validate","Promise","resolve","render","oRm","oControl","openStart","openEnd","renderControl","close"],"sources":["BasicSearch-dbg.js"],"mappings":"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","sourceRoot":"table"}},{"offset":{"line":22999,"column":0},"map":{"version":3,"names":["PROPERTY_QUICKFILTER_KEY","FILTER_MODEL","QuickFilterContainer","defineUI5Class","interfaces","property","type","defaultValue","aggregation","multiple","isDefault","_attachedToView","render","oRm","oControl","macroBundle","Core","getLibraryResourceBundle","renderControl","selector","attr","getText","init","attachEvent","_initControl","oDelegateOnBeforeRendering","onBeforeRendering","_createControlSideEffects","removeEventDelegate","addEventDelegate","oEvent","getModel","detachEvent","getId","_manageTable","_createContent","getParent","oModel","_getFilterModel","aFilters","getObject","sDefaultFilter","Array","isArray","length","annotationPath","undefined","isA","_oTable","FilterControl","byId","getFilter","attachFiltersChanged","_onFiltersChanged","bind","_onTableDataRequested","DelegateUtil","setCustomData","event","getParameter","setProperty","showCounts","_updateCounts","setSelectorKey","sKey","oSelector","getSelectedKey","setSelectedKey","sFilterBarID","oFilterBar","bSkipRebind","getSuspendSelection","rebind","getSelectorKey","getDomRef","sSuffix","mFilters","getCustomData","JSONModel","setModel","bIsSelect","mSelectorOptions","id","generate","enabled","items","path","factory","sId","oBindingContext","mItemOptions","key","text","_getSelectorItemText","Item","SegmentedButtonItem","autoAdjustWidth","_onSelectionChange","Select","SegmentedButton","getOverflowToolbarConfig","canOverflow","oSvControl","oSvItems","getItems","sTableNavigationPath","aSourceProperties","k","sItemKey","getKey","oFilterInfos","TableUtils","getFiltersInfoForSV","properties","forEach","sProperty","sPropertyPath","includes","push","_getSideEffectController","addControlSideEffects","parentEntityType","SourceProperties","TargetEntities","$NavigationPropertyPath","sourceControlId","oItemContext","itemPath","getPath","oMetaModel","getMetaModel","oQuickFilter","entitySet","Text","oController","_getViewController","_sideEffects","oView","CommonUtils","getTargetView","getController","oTable","aBindingPromises","aInitialItemTexts","aAdditionalFilters","aChartFilters","sCurrentFilterKey","getChartControl","oChart","oChartFilterInfo","ChartUtils","getAllFilterInfo","filters","concat","getHiddenFilters","getListBindingForCount","getBindingContext","batchGroupId","additionalFilters","Promise","all","then","aCounts","getCountFormatted","catch","oError","Log","error","getSource","getExtensionAPI","updateAppState","destroy","bSuppressInvalidate","oSideEffects","removeControlSideEffects","Control"],"sourceRoot":"table","sources":["QuickFilterContainer.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport { aggregation, defineUI5Class, property } from \"sap/fe/core/helpers/ClassSupport\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport PageController from \"sap/fe/core/PageController\";\nimport ChartUtils from \"sap/fe/macros/chart/ChartUtils\";\nimport DelegateUtil from \"sap/fe/macros/DelegateUtil\";\nimport TableUtils from \"sap/fe/macros/table/Utils\";\nimport SegmentedButton from \"sap/m/SegmentedButton\";\nimport SegmentedButtonItem from \"sap/m/SegmentedButtonItem\";\nimport Select from \"sap/m/Select\";\nimport type UI5Event from \"sap/ui/base/Event\";\nimport Control from \"sap/ui/core/Control\";\nimport Core from \"sap/ui/core/Core\";\nimport Item from \"sap/ui/core/Item\";\nimport type RenderManager from \"sap/ui/core/RenderManager\";\nimport type FilterBar from \"sap/ui/mdc/FilterBar\";\nimport type Table from \"sap/ui/mdc/Table\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\n\nconst PROPERTY_QUICKFILTER_KEY = \"quickFilterKey\";\nconst FILTER_MODEL = \"filters\";\n/**\n *  Container Control for Table QuickFilters\n *\n * @private\n * @experimental This module is only for internal/experimental use!\n */\n@defineUI5Class(\"sap.fe.macros.table.QuickFilterContainer\", {\n\tinterfaces: [\"sap.m.IOverflowToolbarContent\"]\n})\nclass QuickFilterContainer extends Control {\n\t@property({ type: \"boolean\" }) showCounts!: boolean;\n\n\t@property({ type: \"string\" })\n\tentitySet!: string;\n\t@property({ type: \"string\" })\n\tparentEntityType!: string;\n\n\t@property({ type: \"string\", defaultValue: \"$auto\" })\n\tbatchGroupId!: string;\n\n\t@aggregation({\n\t\ttype: \"sap.ui.core.Control\",\n\t\tmultiple: false,\n\t\tisDefault: true\n\t})\n\tselector!: Select | SegmentedButton;\n\tprivate _oTable?: Table;\n\tprivate _attachedToView: boolean = false;\n\n\tstatic render(oRm: RenderManager, oControl: QuickFilterContainer) {\n\t\tconst macroBundle = Core.getLibraryResourceBundle(\"sap.fe.macros\");\n\t\toRm.renderControl(oControl.selector);\n\t\toRm.attr(\"aria-label\", macroBundle.getText(\"M_TABLE_QUICKFILTER_ARIA\"));\n\t}\n\tinit() {\n\t\tsuper.init();\n\t\tthis._attachedToView = false;\n\t\tthis.attachEvent(\"modelContextChange\", this._initControl);\n\t\tconst oDelegateOnBeforeRendering = {\n\t\t\tonBeforeRendering: () => {\n\t\t\t\t// Need to wait for Control rendering to get parent view (.i.e into OP the highest parent is the Object Section)\n\t\t\t\tthis._createControlSideEffects();\n\t\t\t\tthis._attachedToView = true;\n\t\t\t\tthis.removeEventDelegate(oDelegateOnBeforeRendering);\n\t\t\t}\n\t\t};\n\t\tthis.addEventDelegate(oDelegateOnBeforeRendering, this);\n\t}\n\t_initControl(oEvent: any) {\n\t\t// Need to wait for the OData Model to be propagated (models are propagated one by one when we come from FLP)\n\t\tif (this.getModel()) {\n\t\t\tthis.detachEvent(oEvent.getId(), this._initControl);\n\t\t\tthis._manageTable();\n\t\t\tthis._createContent();\n\t\t}\n\t}\n\t_manageTable() {\n\t\tlet oControl = this.getParent();\n\t\tconst oModel = this._getFilterModel(),\n\t\t\taFilters = oModel.getObject(\"/paths\"),\n\t\t\tsDefaultFilter = Array.isArray(aFilters) && aFilters.length > 0 ? aFilters[0].annotationPath : undefined;\n\n\t\twhile (oControl && !oControl.isA<Table>(\"sap.ui.mdc.Table\")) {\n\t\t\toControl = oControl.getParent();\n\t\t}\n\t\tthis._oTable = oControl!;\n\n\t\tconst FilterControl = Core.byId(this._oTable.getFilter());\n\t\tif (FilterControl && FilterControl.isA<FilterBar>(\"sap.ui.mdc.FilterBar\")) {\n\t\t\tFilterControl.attachFiltersChanged(this._onFiltersChanged.bind(this));\n\t\t}\n\t\tthis._oTable?.getParent()?.attachEvent(\"internalDataRequested\", this._onTableDataRequested.bind(this));\n\t\tDelegateUtil.setCustomData(oControl, PROPERTY_QUICKFILTER_KEY, sDefaultFilter);\n\t}\n\n\t_onFiltersChanged(event: UI5Event) {\n\t\tif (event.getParameter(\"conditionsBased\")) {\n\t\t\tthis.selector.setProperty(\"enabled\", false);\n\t\t}\n\t}\n\n\t_onTableDataRequested() {\n\t\tthis.selector.setProperty(\"enabled\", true);\n\t\tif (this.showCounts) {\n\t\t\tthis._updateCounts();\n\t\t}\n\t}\n\tsetSelectorKey(sKey: any) {\n\t\tconst oSelector = this.selector;\n\t\tif (oSelector && oSelector.getSelectedKey() !== sKey) {\n\t\t\toSelector.setSelectedKey(sKey);\n\t\t\tDelegateUtil.setCustomData(this._oTable, PROPERTY_QUICKFILTER_KEY, sKey);\n\n\t\t\t// Rebind the table to reflect the change in quick filter key.\n\t\t\t// We don't rebind the table if the filterbar for the table is suspended\n\t\t\t// as rebind will be done when the filterbar is resumed\n\t\t\tconst sFilterBarID = this._oTable!.getFilter && this._oTable!.getFilter();\n\t\t\tconst oFilterBar = sFilterBarID && (Core.byId(sFilterBarID) as FilterBar);\n\t\t\tconst bSkipRebind = oFilterBar && oFilterBar.getSuspendSelection && oFilterBar.getSuspendSelection();\n\n\t\t\tif (!bSkipRebind) {\n\t\t\t\t(this._oTable as any).rebind();\n\t\t\t}\n\t\t}\n\t}\n\tgetSelectorKey() {\n\t\tconst oSelector = this.selector;\n\t\treturn oSelector ? oSelector.getSelectedKey() : null;\n\t}\n\tgetDomRef(sSuffix?: string) {\n\t\tconst oSelector = this.selector;\n\t\treturn oSelector ? oSelector.getDomRef(sSuffix) : (null as any);\n\t}\n\t_getFilterModel() {\n\t\tlet oModel = this.getModel(FILTER_MODEL);\n\t\tif (!oModel) {\n\t\t\tconst mFilters = DelegateUtil.getCustomData(this, FILTER_MODEL);\n\t\t\toModel = new JSONModel(mFilters);\n\t\t\tthis.setModel(oModel, FILTER_MODEL);\n\t\t}\n\t\treturn oModel;\n\t}\n\t/**\n\t * Create QuickFilter Selector (Select or SegmentedButton).\n\t */\n\t_createContent() {\n\t\tconst oModel = this._getFilterModel(),\n\t\t\taFilters = oModel.getObject(\"/paths\"),\n\t\t\tbIsSelect = aFilters.length > 3,\n\t\t\tmSelectorOptions: any = {\n\t\t\t\tid: generate([this._oTable!.getId(), \"QuickFilter\"]),\n\t\t\t\tenabled: oModel.getObject(\"/enabled\"),\n\t\t\t\titems: {\n\t\t\t\t\tpath: `${FILTER_MODEL}>/paths`,\n\t\t\t\t\tfactory: (sId: any, oBindingContext: any) => {\n\t\t\t\t\t\tconst mItemOptions = {\n\t\t\t\t\t\t\tkey: oBindingContext.getObject().annotationPath,\n\t\t\t\t\t\t\ttext: this._getSelectorItemText(oBindingContext)\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn bIsSelect ? new Item(mItemOptions) : new SegmentedButtonItem(mItemOptions);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\tif (bIsSelect) {\n\t\t\tmSelectorOptions.autoAdjustWidth = true;\n\t\t}\n\t\tmSelectorOptions[bIsSelect ? \"change\" : \"selectionChange\"] = this._onSelectionChange.bind(this);\n\t\tthis.selector = bIsSelect ? new Select(mSelectorOptions) : new SegmentedButton(mSelectorOptions);\n\t}\n\n\t/**\n\t * Returns properties for the interface IOverflowToolbarContent.\n\t *\n\t * @returns {object} Returns the configuration of IOverflowToolbarContent\n\t */\n\tgetOverflowToolbarConfig() {\n\t\treturn {\n\t\t\tcanOverflow: true\n\t\t};\n\t}\n\n\t/**\n\t * Creates SideEffects control that must be executed when table cells that are related to configured filter(s) change.\n\t *\n\t */\n\n\t_createControlSideEffects() {\n\t\tconst oSvControl = this.selector,\n\t\t\toSvItems = oSvControl.getItems(),\n\t\t\tsTableNavigationPath = DelegateUtil.getCustomData(this._oTable, \"navigationPath\");\n\t\t/**\n\t\t * Cannot execute SideEffects with targetEntity = current Table collection\n\t\t */\n\n\t\tif (sTableNavigationPath) {\n\t\t\tconst aSourceProperties: any[] = [];\n\t\t\tfor (const k in oSvItems) {\n\t\t\t\tconst sItemKey = oSvItems[k].getKey(),\n\t\t\t\t\toFilterInfos = TableUtils.getFiltersInfoForSV(this._oTable!, sItemKey);\n\t\t\t\toFilterInfos.properties.forEach(function (sProperty: any) {\n\t\t\t\t\tconst sPropertyPath = `${sTableNavigationPath}/${sProperty}`;\n\t\t\t\t\tif (!aSourceProperties.includes(sPropertyPath)) {\n\t\t\t\t\t\taSourceProperties.push(sPropertyPath);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis._getSideEffectController()?.addControlSideEffects(this.parentEntityType, {\n\t\t\t\tSourceProperties: aSourceProperties,\n\t\t\t\tTargetEntities: [\n\t\t\t\t\t{\n\t\t\t\t\t\t$NavigationPropertyPath: sTableNavigationPath\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tsourceControlId: this.getId()\n\t\t\t});\n\t\t}\n\t}\n\t_getSelectorItemText(oItemContext: any) {\n\t\tconst annotationPath = oItemContext.getObject().annotationPath,\n\t\t\titemPath = oItemContext.getPath(),\n\t\t\toMetaModel = this.getModel().getMetaModel()!,\n\t\t\toQuickFilter = oMetaModel.getObject(`${this.entitySet}/${annotationPath}`);\n\t\treturn oQuickFilter.Text + (this.showCounts ? ` ({${FILTER_MODEL}>${itemPath}/count})` : \"\");\n\t}\n\t_getSideEffectController() {\n\t\tconst oController = this._getViewController();\n\t\treturn oController ? oController._sideEffects : undefined;\n\t}\n\t_getViewController() {\n\t\tconst oView = CommonUtils.getTargetView(this);\n\t\treturn oView && (oView.getController() as PageController);\n\t}\n\t/**\n\t * Manage List Binding request related to Counts on QuickFilter control and update text\n\t * in line with batch result.\n\t *\n\t */\n\t_updateCounts() {\n\t\tconst oTable = this._oTable!,\n\t\t\toController = this._getViewController() as any,\n\t\t\toSvControl = this.selector,\n\t\t\toSvItems = oSvControl.getItems(),\n\t\t\toModel: any = this._getFilterModel(),\n\t\t\taBindingPromises = [],\n\t\t\taInitialItemTexts: any[] = [];\n\t\tlet aAdditionalFilters: any[] = [];\n\t\tlet aChartFilters = [];\n\t\tconst sCurrentFilterKey = DelegateUtil.getCustomData(oTable, PROPERTY_QUICKFILTER_KEY);\n\n\t\t// Add filters related to the chart for ALP\n\t\tif (oController && oController.getChartControl) {\n\t\t\tconst oChart = oController.getChartControl();\n\t\t\tif (oChart) {\n\t\t\t\tconst oChartFilterInfo = ChartUtils.getAllFilterInfo(oChart);\n\t\t\t\tif (oChartFilterInfo && oChartFilterInfo.filters.length) {\n\t\t\t\t\taChartFilters = oChartFilterInfo.filters;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\taAdditionalFilters = aAdditionalFilters.concat(TableUtils.getHiddenFilters(oTable)).concat(aChartFilters);\n\t\tfor (const k in oSvItems) {\n\t\t\tconst sItemKey = oSvItems[k].getKey(),\n\t\t\t\toFilterInfos = TableUtils.getFiltersInfoForSV(oTable, sItemKey);\n\t\t\taInitialItemTexts.push(oFilterInfos.text);\n\t\t\toModel.setProperty(`/paths/${k}/count`, \"...\");\n\t\t\taBindingPromises.push(\n\t\t\t\tTableUtils.getListBindingForCount(oTable, oTable.getBindingContext(), {\n\t\t\t\t\tbatchGroupId: sItemKey === sCurrentFilterKey ? this.batchGroupId : \"$auto\",\n\t\t\t\t\tadditionalFilters: aAdditionalFilters.concat(oFilterInfos.filters)\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t\tPromise.all(aBindingPromises)\n\t\t\t.then(function (aCounts: any[]) {\n\t\t\t\tfor (const k in aCounts) {\n\t\t\t\t\toModel.setProperty(`/paths/${k}/count`, TableUtils.getCountFormatted(aCounts[k]));\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(function (oError: any) {\n\t\t\t\tLog.error(\"Error while retrieving the binding promises\", oError);\n\t\t\t});\n\t}\n\t_onSelectionChange(oEvent: any) {\n\t\tconst oControl = oEvent.getSource();\n\t\tDelegateUtil.setCustomData(this._oTable, PROPERTY_QUICKFILTER_KEY, oControl.getSelectedKey());\n\t\t(this._oTable as any).rebind();\n\t\tconst oController = this._getViewController();\n\t\tif (oController && oController.getExtensionAPI && oController.getExtensionAPI().updateAppState) {\n\t\t\toController.getExtensionAPI().updateAppState();\n\t\t}\n\t}\n\tdestroy(bSuppressInvalidate?: boolean) {\n\t\tif (this._attachedToView) {\n\t\t\tconst oSideEffects = this._getSideEffectController();\n\t\t\tif (oSideEffects) {\n\t\t\t\t// if \"destroy\" signal comes when view is destroyed there is not anymore reference to Controller Extension\n\t\t\t\toSideEffects.removeControlSideEffects(this);\n\t\t\t}\n\t\t}\n\t\tdelete this._oTable;\n\t\tsuper.destroy(bSuppressInvalidate);\n\t}\n}\n\nexport default QuickFilterContainer;\n"],"mappings":"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"}},{"offset":{"line":23329,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","CommonUtils","ClassSupport","StableIdHelper","ChartUtils","DelegateUtil","TableUtils","SegmentedButton","SegmentedButtonItem","Select","Control","Core","Item","JSONModel","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","generate","property","defineUI5Class","aggregation","_initializerDefineProperty","target","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","PROPERTY_QUICKFILTER_KEY","FILTER_MODEL","QuickFilterContainer","interfaces","type","defaultValue","multiple","isDefault","_Control","_this","_len","arguments","length","args","Array","_key","this","_attachedToView","render","oRm","oControl","macroBundle","getLibraryResourceBundle","renderControl","selector","attr","getText","_proto","init","attachEvent","_initControl","oDelegateOnBeforeRendering","onBeforeRendering","_createControlSideEffects","removeEventDelegate","addEventDelegate","oEvent","getModel","detachEvent","getId","_manageTable","_createContent","_this$_oTable","_this$_oTable$getPare","getParent","oModel","_getFilterModel","aFilters","getObject","sDefaultFilter","isArray","annotationPath","isA","_oTable","FilterControl","byId","getFilter","attachFiltersChanged","_onFiltersChanged","_onTableDataRequested","setCustomData","event","getParameter","setProperty","showCounts","_updateCounts","setSelectorKey","sKey","oSelector","getSelectedKey","setSelectedKey","sFilterBarID","oFilterBar","bSkipRebind","getSuspendSelection","rebind","getSelectorKey","getDomRef","sSuffix","mFilters","getCustomData","setModel","bIsSelect","mSelectorOptions","id","enabled","items","path","factory","sId","oBindingContext","mItemOptions","text","_getSelectorItemText","autoAdjustWidth","_onSelectionChange","getOverflowToolbarConfig","canOverflow","oSvControl","oSvItems","getItems","sTableNavigationPath","_this$_getSideEffectC","aSourceProperties","k","sItemKey","getKey","oFilterInfos","getFiltersInfoForSV","properties","sProperty","sPropertyPath","includes","push","_getSideEffectController","addControlSideEffects","parentEntityType","SourceProperties","TargetEntities","$NavigationPropertyPath","sourceControlId","oItemContext","itemPath","getPath","oMetaModel","getMetaModel","oQuickFilter","entitySet","Text","oController","_getViewController","_sideEffects","oView","getTargetView","getController","oTable","aBindingPromises","aInitialItemTexts","aAdditionalFilters","aChartFilters","sCurrentFilterKey","getChartControl","oChart","oChartFilterInfo","getAllFilterInfo","filters","concat","getHiddenFilters","getListBindingForCount","getBindingContext","batchGroupId","additionalFilters","Promise","all","then","aCounts","getCountFormatted","catch","oError","error","getSource","getExtensionAPI","updateAppState","destroy","bSuppressInvalidate","oSideEffects","removeControlSideEffects"],"sources":["QuickFilterContainer-dbg.js"],"mappings":"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","sourceRoot":"table"}},{"offset":{"line":23334,"column":0},"map":{"version":3,"names":["Table","MacroMetadata","extend","name","namespace","publicNamespace","fragment","metadata","stereotype","properties","tableDefinition","type","metaPath","isPublic","contextPath","collection","required","$kind","parentEntitySet","id","_apiId","navigationPath","readOnly","fieldMode","defaultValue","allowedValues","disableAddRowButtonForEmptyData","customValidationFunction","useCondensedTableLayout","rowAction","undefined","selectionMode","busy","enableFullScreen","header","headerVisible","headerLevel","noDataText","creationMode","createAtEnd","createOutbound","createOutboundDetail","createNewAction","personalization","isSearchable","tableType","enableExport","enablePaste","selectionLimit","multiSelectMode","filterBar","filterBarId","tableDelegate","enableAutoScroll","visible","isAlp","variantManagement","columnEditMode","computed","tabTitle","isOptimizedForSmallDevice","enableAutoColumnWidth","dataStateIndicatorFilter","isCompactType","events","variantSaved","variantSelected","onChange","rowPress","onContextChange","onSegmentedButtonPressed","stateChange","selectionChange","aggregations","actions","columns","create","oProps","oControlConfiguration","mSettings","oAggregations","oTableDefinition","oContextObjectPath","getInvolvedDataModelObjects","initialConverterContext","getConverterContext","sVisualizationPath","_getVisualizationPath","sPresentationPath","_getPresentationPath","oExtraActions","_buildActions","oExtraColumns","parseAggregation","childColumn","columnChildIdx","columnKey","getAttribute","key","width","importance","horizontalAlign","availability","template","children","outerHTML","split","position","placement","anchor","oExtraParams","mTableSettings","JSON","parse","stringify","tableSettings","oConverterContext","oVisualizationDefinition","getDataVisualizationConfiguration","useCondensedLayout","visualizations","createBindingContext","getObject","path","getPath","setDefaultValue","annotation","control","standardActions","paste","enabled","updatablePropertyPath","searchable","showRowCount","inlineCreationRowCount","title","inlineCreationRowsHiddenInEditMode","getContentId","mode","append","outbound","newAction","outboundDetail","p13nMode","CommonUtils","isSmallDevice","displayMode","row","press","action","useBasicSearch","generate","showCreate","autoBindOnInit","startsWith","startingEntitySet","_type","models","metaModel","contextLocation","targetEntitySet","headerBindingExpression","buildExpressionForHeaderVisible","oActions","length","Array","prototype","slice","apply","actionIdx","forEach","act","menuActions","localName","namespaceURI","actionsToAdd","actToAdd","actionKeyAdd","curOutObject","text","__noWrap","requiresSelection","Object","values","map","menuItem","actionKey","actObject","menu","contextObjectPath","converterContext","getContextRelativeTargetObjectPath","targetObject","term","resolvedTarget","getEntityTypeAnnotation","PresentationVariant","getVisualizationsFromPresentationVariant","Log","error","lineItemViz","find","viz","visualization","annotationPath","presentationPath"],"sourceRoot":"table","sources":["Table.metadata.ts"],"sourcesContent":["import { UIAnnotationTerms } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type { VisualizationAndPath } from \"sap/fe/core/converters/controls/Common/DataVisualization\";\nimport {\n\tgetDataVisualizationConfiguration,\n\tgetVisualizationsFromPresentationVariant\n} from \"sap/fe/core/converters/controls/Common/DataVisualization\";\nimport type ConverterContext from \"sap/fe/core/converters/ConverterContext\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { getContextRelativeTargetObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { buildExpressionForHeaderVisible } from \"sap/fe/macros/internal/helpers/TableTemplating\";\nimport MacroMetadata from \"sap/fe/macros/MacroMetadata\";\n\n/**\n * @classdesc\n * Building block used to create a table based on the metadata provided by OData V4.\n *\n * Usage example:\n * <pre>\n * &lt;macro:Table\n *   id=\"someID\"\n *   type=\"ResponsiveTable\"\n *   collection=\"collection\",\n *   presentation=\"presentation\"\n *   selectionMode=\"Multi\"\n *   requestGroupId=\"$auto.test\"\n *   displayMode=\"false\"\n *   personalization=\"Column,Sort\"\n * /&gt;\n * </pre>\n * @class sap.fe.macros.Table\n * @hideconstructor\n * @private\n * @experimental\n */\nconst Table = MacroMetadata.extend(\"sap.fe.macros.table.Table\", {\n\t/**\n\t * Name of the macro control.\n\t */\n\tname: \"Table\",\n\t/**\n\t * Namespace of the macro control\n\t */\n\tnamespace: \"sap.fe.macros.internal\",\n\tpublicNamespace: \"sap.fe.macros\",\n\t/**\n\t * Fragment source of the macro (optional) - if not set, fragment is generated from namespace and name\n\t */\n\tfragment: \"sap.fe.macros.table.Table\",\n\t/**\n\t * The metadata describing the macro control.\n\t */\n\tmetadata: {\n\t\t/**\n\t\t * Define macro stereotype for documentation\n\t\t */\n\t\tstereotype: \"xmlmacro\",\n\t\t/**\n\t\t * Properties.\n\t\t */\n\t\tproperties: {\n\t\t\ttableDefinition: {\n\t\t\t\ttype: \"sap.ui.model.Context\"\n\t\t\t},\n\t\t\tmetaPath: {\n\t\t\t\ttype: \"sap.ui.model.Context\",\n\t\t\t\tisPublic: true\n\t\t\t},\n\t\t\tcontextPath: {\n\t\t\t\ttype: \"sap.ui.model.Context\",\n\t\t\t\tisPublic: true\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * metadataContext:collection Mandatory context to a collection (entitySet or 1:n navigation)\n\t\t\t */\n\t\t\tcollection: {\n\t\t\t\ttype: \"sap.ui.model.Context\",\n\t\t\t\trequired: true,\n\t\t\t\t$kind: [\"EntitySet\", \"NavigationProperty\", \"Singleton\"]\n\t\t\t},\n\t\t\t/**\n\t\t\t * Parent EntitySet for the present collection\n\t\t\t */\n\t\t\tparentEntitySet: {\n\t\t\t\ttype: \"sap.ui.model.Context\"\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * ID of the table\n\t\t\t */\n\t\t\tid: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tisPublic: true\n\t\t\t},\n\t\t\t_apiId: {\n\t\t\t\ttype: \"string\"\n\t\t\t},\n\t\t\t/**\n\t\t\t * Used for binding the table to a navigation path. Only the path is used for binding rows.\n\t\t\t */\n\t\t\tnavigationPath: {\n\t\t\t\ttype: \"string\"\n\t\t\t},\n\t\t\t/**\n\t\t\t * Specifies whether the table should be read-only or not.\n\t\t\t */\n\t\t\treadOnly: {\n\t\t\t\ttype: \"boolean\",\n\t\t\t\tisPublic: true\n\t\t\t},\n\t\t\tfieldMode: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdefaultValue: \"\",\n\t\t\t\tallowedValues: [\"\", \"nowrapper\"]\n\t\t\t},\n\t\t\t/**\n\t\t\t * Specifies whether the button is hidden when no data has been entered yet in the row (true/false). The default setting is `false`.\n\t\t\t */\n\t\t\tdisableAddRowButtonForEmptyData: {\n\t\t\t\ttype: \"boolean\"\n\t\t\t},\n\t\t\t/**\n\t\t\t * Specifies the full path and function name of a custom validation function.\n\t\t\t */\n\t\t\tcustomValidationFunction: {\n\t\t\t\ttype: \"string\"\n\t\t\t},\n\t\t\t/**\n\t\t\t * Specifies whether the table is displayed with condensed layout (true/false). The default setting is `false`.\n\t\t\t */\n\t\t\tuseCondensedTableLayout: {\n\t\t\t\ttype: \"boolean\"\n\t\t\t},\n\t\t\t/**\n\t\t\t * Specifies the possible actions available on the table row (Navigation,null). The default setting is `undefined`\n\t\t\t */\n\t\t\trowAction: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdefaultValue: undefined\n\t\t\t},\n\t\t\t/**\n\t\t\t * Specifies the selection mode (None,Single,Multi,Auto)\n\t\t\t */\n\t\t\tselectionMode: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tisPublic: true\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * The `busy` mode of table\n\t\t\t */\n\t\t\tbusy: {\n\t\t\t\ttype: \"boolean\",\n\t\t\t\tisPublic: true\n\t\t\t},\n\t\t\t/**\n\t\t\t * Parameter used to show the fullScreen button on the table.\n\t\t\t */\n\t\t\tenableFullScreen: {\n\t\t\t\ttype: \"boolean\",\n\t\t\t\tisPublic: true\n\t\t\t},\n\t\t\t/**\n\t\t\t * Specifies header text that is shown in table.\n\t\t\t */\n\t\t\theader: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tisPublic: true\n\t\t\t},\n\t\t\t/**\n\t\t\t * Controls if the header text should be shown or not\n\t\t\t */\n\t\t\theaderVisible: {\n\t\t\t\ttype: \"boolean\",\n\t\t\t\tisPublic: true\n\t\t\t},\n\t\t\t/**\n\t\t\t * Defines the \"aria-level\" of the table header\n\t\t\t */\n\t\t\theaderLevel: {\n\t\t\t\ttype: \"sap.ui.core.TitleLevel\",\n\t\t\t\tdefaultValue: \"Auto\",\n\t\t\t\tisPublic: true\n\t\t\t},\n\t\t\t/**\n\t\t\t * Parameter which sets the noDataText for the mdc table\n\t\t\t */\n\t\t\tnoDataText: {\n\t\t\t\ttype: \"string\"\n\t\t\t},\n\t\t\t/**\n\t\t\t * Creation Mode to be passed to the onCreate hanlder. Values: [\"Inline\", \"NewPage\"]\n\t\t\t */\n\t\t\tcreationMode: {\n\t\t\t\ttype: \"string\"\n\t\t\t},\n\t\t\t/**\n\t\t\t * Setting to determine if the new row should be created at the end or beginning\n\t\t\t */\n\t\t\tcreateAtEnd: {\n\t\t\t\ttype: \"boolean\"\n\t\t\t},\n\t\t\tcreateOutbound: {\n\t\t\t\ttype: \"string\"\n\t\t\t},\n\t\t\tcreateOutboundDetail: {\n\t\t\t\ttype: \"string\"\n\t\t\t},\n\t\t\tcreateNewAction: {\n\t\t\t\ttype: \"string\"\n\t\t\t},\n\t\t\t/**\n\t\t\t * Personalization Mode\n\t\t\t */\n\t\t\tpersonalization: {\n\t\t\t\ttype: \"string|boolean\",\n\t\t\t\tisPublic: true\n\t\t\t},\n\t\t\tisSearchable: {\n\t\t\t\ttype: \"boolean\",\n\t\t\t\tisPublic: true\n\t\t\t},\n\t\t\t/**\n\t\t\t * Allows to choose the Table type. Allowed values are `ResponsiveTable` or `GridTable`.\n\t\t\t */\n\t\t\ttype: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tisPublic: true\n\t\t\t},\n\t\t\ttableType: {\n\t\t\t\ttype: \"string\"\n\t\t\t},\n\t\t\t/**\n\t\t\t * Enable export to file\n\t\t\t */\n\t\t\tenableExport: {\n\t\t\t\ttype: \"boolean\",\n\t\t\t\tisPublic: true\n\t\t\t},\n\t\t\t/**\n\t\t\t * Enable export to file\n\t\t\t */\n\t\t\tenablePaste: {\n\t\t\t\ttype: \"boolean\",\n\t\t\t\tisPublic: true\n\t\t\t},\n\t\t\t/**\n\t\t\t * ONLY FOR GRID TABLE: Number of indices which can be selected in a range. If set to 0, the selection limit is disabled, and the Select All checkbox appears instead of the Deselect All button.\n\t\t\t */\n\t\t\tselectionLimit: {\n\t\t\t\ttype: \"string\"\n\t\t\t},\n\t\t\t/**\n\t\t\t * ONLY FOR RESPONSIVE TABLE: Setting to define the checkbox in the column header: Allowed values are `Default` or `ClearAll`. If set to `Default`, the sap.m.Table control renders the Select All checkbox, otherwise the Deselect All button is rendered.\n\t\t\t */\n\t\t\tmultiSelectMode: {\n\t\t\t\ttype: \"string\"\n\t\t\t},\n\t\t\t/**\n\t\t\t * The control ID of the FilterBar that is used to filter the rows of the table.\n\t\t\t */\n\t\t\tfilterBar: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tisPublic: true\n\t\t\t},\n\t\t\t/**\n\t\t\t * The control ID of the FilterBar that is used internally to filter the rows of the table.\n\t\t\t */\n\t\t\tfilterBarId: {\n\t\t\t\ttype: \"string\"\n\t\t\t},\n\t\t\ttableDelegate: {\n\t\t\t\ttype: \"string\"\n\t\t\t},\n\t\t\tenableAutoScroll: {\n\t\t\t\ttype: \"boolean\"\n\t\t\t},\n\t\t\tvisible: {\n\t\t\t\ttype: \"string\"\n\t\t\t},\n\t\t\tisAlp: {\n\t\t\t\ttype: \"boolean\",\n\t\t\t\tdefaultValue: false\n\t\t\t},\n\t\t\tvariantManagement: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tisPublic: true\n\t\t\t},\n\t\t\tcolumnEditMode: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tcomputed: true\n\t\t\t},\n\t\t\ttabTitle: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdefaultValue: \"\"\n\t\t\t},\n\t\t\tisOptimizedForSmallDevice: {\n\t\t\t\ttype: \"boolean\"\n\t\t\t},\n\t\t\tenableAutoColumnWidth: {\n\t\t\t\ttype: \"boolean\"\n\t\t\t},\n\t\t\tdataStateIndicatorFilter: {\n\t\t\t\ttype: \"string\"\n\t\t\t},\n\t\t\tisCompactType: {\n\t\t\t\ttype: \"boolean\"\n\t\t\t}\n\t\t},\n\t\tevents: {\n\t\t\tvariantSaved: {\n\t\t\t\ttype: \"function\"\n\t\t\t},\n\t\t\tvariantSelected: {\n\t\t\t\ttype: \"function\"\n\t\t\t},\n\t\t\t/**\n\t\t\t * Event handler for change event\n\t\t\t */\n\t\t\tonChange: {\n\t\t\t\ttype: \"function\"\n\t\t\t},\n\t\t\t/**\n\t\t\t * Event handler to react when the user chooses a row\n\t\t\t */\n\t\t\trowPress: {\n\t\t\t\ttype: \"function\",\n\t\t\t\tisPublic: true\n\t\t\t},\n\t\t\t/**\n\t\t\t * Event handler to react to the contextChange event of the table.\n\t\t\t */\n\t\t\tonContextChange: {\n\t\t\t\ttype: \"function\"\n\t\t\t},\n\t\t\t/**\n\t\t\t * Event handler called when the user chooses an option of the segmented button in the ALP View\n\t\t\t */\n\t\t\tonSegmentedButtonPressed: {\n\t\t\t\ttype: \"function\"\n\t\t\t},\n\t\t\t/**\n\t\t\t * Event handler to react to the stateChange event of the table.\n\t\t\t */\n\t\t\tstateChange: {\n\t\t\t\ttype: \"function\"\n\t\t\t},\n\t\t\t/**\n\t\t\t * Event handler to react when the table selection changes\n\t\t\t */\n\t\t\tselectionChange: {\n\t\t\t\ttype: \"function\",\n\t\t\t\tisPublic: true\n\t\t\t}\n\t\t},\n\t\taggregations: {\n\t\t\tactions: {\n\t\t\t\ttype: \"sap.fe.macros.internal.table.Action | sap.fe.macros.internal.table.ActionGroup\",\n\t\t\t\tisPublic: true\n\t\t\t},\n\t\t\tcolumns: {\n\t\t\t\ttype: \"sap.fe.macros.internal.table.Column\",\n\t\t\t\tisPublic: true\n\t\t\t}\n\t\t}\n\t},\n\tcreate: function (oProps: any, oControlConfiguration: any, mSettings: any, oAggregations: any) {\n\t\tlet oTableDefinition;\n\t\tconst oContextObjectPath = getInvolvedDataModelObjects(oProps.metaPath, oProps.contextPath);\n\n\t\tif (!oProps.tableDefinition) {\n\t\t\tconst initialConverterContext = this.getConverterContext(oContextObjectPath, oProps.contextPath, mSettings);\n\t\t\tconst sVisualizationPath = this._getVisualizationPath(oContextObjectPath, initialConverterContext);\n\t\t\tconst sPresentationPath = this._getPresentationPath(oContextObjectPath);\n\n\t\t\t//Check if we have ActionGroup and add nested actions\n\t\t\tconst oExtraActions = this._buildActions(oAggregations.actions);\n\n\t\t\tconst oExtraColumns = this.parseAggregation(oAggregations.columns, function (childColumn: any, columnChildIdx: number) {\n\t\t\t\tconst columnKey = childColumn.getAttribute(\"key\") || \"InlineXMLColumn_\" + columnChildIdx;\n\t\t\t\toAggregations[columnKey] = childColumn;\n\t\t\t\treturn {\n\t\t\t\t\t// Defaults are to be defined in Table.ts\n\t\t\t\t\tkey: columnKey,\n\t\t\t\t\ttype: \"Slot\",\n\t\t\t\t\twidth: childColumn.getAttribute(\"width\"),\n\t\t\t\t\timportance: childColumn.getAttribute(\"importance\"),\n\t\t\t\t\thorizontalAlign: childColumn.getAttribute(\"horizontalAlign\"),\n\t\t\t\t\tavailability: childColumn.getAttribute(\"availability\"),\n\t\t\t\t\theader: childColumn.getAttribute(\"header\"),\n\t\t\t\t\ttemplate: childColumn.children[0]?.outerHTML || \"\",\n\t\t\t\t\tproperties: childColumn.getAttribute(\"properties\") ? childColumn.getAttribute(\"properties\").split(\",\") : undefined,\n\t\t\t\t\tposition: {\n\t\t\t\t\t\tplacement: childColumn.getAttribute(\"positionPlacement\"),\n\t\t\t\t\t\tanchor: childColumn.getAttribute(\"positionAnchor\")\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t});\n\t\t\tconst oExtraParams: any = {};\n\t\t\tlet mTableSettings = {\n\t\t\t\tenableExport: oProps.enableExport,\n\t\t\t\tenableFullScreen: oProps.enableFullScreen,\n\t\t\t\tenablePaste: oProps.enablePaste,\n\t\t\t\tselectionMode: oProps.selectionMode,\n\t\t\t\ttype: oProps.type\n\t\t\t};\n\t\t\t//removes undefined values from mTableSettings\n\t\t\tmTableSettings = JSON.parse(JSON.stringify(mTableSettings));\n\n\t\t\toExtraParams[sVisualizationPath] = {\n\t\t\t\tactions: oExtraActions,\n\t\t\t\tcolumns: oExtraColumns,\n\t\t\t\ttableSettings: mTableSettings\n\t\t\t};\n\t\t\tconst oConverterContext = this.getConverterContext(oContextObjectPath, oProps.contextPath, mSettings, oExtraParams);\n\n\t\t\tconst oVisualizationDefinition = getDataVisualizationConfiguration(\n\t\t\t\tsVisualizationPath,\n\t\t\t\toProps.useCondensedLayout,\n\t\t\t\toConverterContext,\n\t\t\t\tundefined,\n\t\t\t\tundefined,\n\t\t\t\tsPresentationPath,\n\t\t\t\ttrue\n\t\t\t);\n\t\t\toTableDefinition = oVisualizationDefinition.visualizations[0];\n\n\t\t\toProps.tableDefinition = this.createBindingContext(oTableDefinition, mSettings);\n\t\t} else {\n\t\t\toTableDefinition = oProps.tableDefinition.getObject();\n\t\t}\n\t\toTableDefinition.path = \"{_pageModel>\" + oProps.tableDefinition.getPath() + \"}\";\n\t\t// public properties processed by converter context\n\t\tthis.setDefaultValue(oProps, \"selectionMode\", oTableDefinition.annotation.selectionMode, true);\n\t\tthis.setDefaultValue(oProps, \"enableFullScreen\", oTableDefinition.control.enableFullScreen, true);\n\t\tthis.setDefaultValue(oProps, \"enableExport\", oTableDefinition.control.enableExport, true);\n\t\tthis.setDefaultValue(oProps, \"enablePaste\", oTableDefinition.annotation.standardActions.actions.paste.enabled, true);\n\t\tthis.setDefaultValue(oProps, \"updatablePropertyPath\", oTableDefinition.annotation.standardActions.updatablePropertyPath, true);\n\t\tthis.setDefaultValue(oProps, \"type\", oTableDefinition.control.type, true);\n\n\t\tthis.setDefaultValue(oProps, \"useCondensedTableLayout\", oTableDefinition.control.useCondensedTableLayout);\n\t\tthis.setDefaultValue(oProps, \"disableAddRowButtonForEmptyData\", oTableDefinition.control.disableAddRowButtonForEmptyData);\n\t\tthis.setDefaultValue(oProps, \"customValidationFunction\", oTableDefinition.control.customValidationFunction);\n\t\tthis.setDefaultValue(oProps, \"headerVisible\", oTableDefinition.control.headerVisible);\n\t\tthis.setDefaultValue(oProps, \"searchable\", oTableDefinition.annotation.searchable);\n\t\tthis.setDefaultValue(oProps, \"showRowCount\", oTableDefinition.control.showRowCount);\n\t\tthis.setDefaultValue(oProps, \"inlineCreationRowCount\", oTableDefinition.control.inlineCreationRowCount);\n\t\tthis.setDefaultValue(oProps, \"header\", oTableDefinition.annotation.title);\n\t\tthis.setDefaultValue(oProps, \"selectionLimit\", oTableDefinition.control.selectionLimit);\n\t\tthis.setDefaultValue(oProps, \"isCompactType\", oTableDefinition.control.isCompactType);\n\t\tthis.setDefaultValue(oProps, \"inlineCreationRowsHiddenInEditMode\", oTableDefinition.annotation.inlineCreationRowsHiddenInEditMode);\n\t\tif (oProps.id) {\n\t\t\t// The given ID shall be assigned to the TableAPI and not to the MDC Table\n\t\t\toProps._apiId = oProps.id;\n\t\t\toProps.id = this.getContentId(oProps.id);\n\t\t} else {\n\t\t\t// We generate the ID. Due to compatibility reasons we keep it on the MDC Table but provide assign\n\t\t\t// the ID with a ::Table suffix to the TableAPI\n\t\t\tthis.setDefaultValue(oProps, \"id\", oTableDefinition.annotation.id);\n\t\t\toProps._apiId = oTableDefinition.annotation.id + \"::Table\";\n\t\t}\n\n\t\tthis.setDefaultValue(oProps, \"creationMode\", oTableDefinition.annotation.create.mode);\n\t\tthis.setDefaultValue(oProps, \"createAtEnd\", oTableDefinition.annotation.create.append);\n\t\tthis.setDefaultValue(oProps, \"createOutbound\", oTableDefinition.annotation.create.outbound);\n\t\tthis.setDefaultValue(oProps, \"createNewAction\", oTableDefinition.annotation.create.newAction);\n\t\tthis.setDefaultValue(oProps, \"createOutboundDetail\", oTableDefinition.annotation.create.outboundDetail);\n\t\tthis.setDefaultValue(oProps, \"personalization\", oTableDefinition.annotation.p13nMode);\n\t\tthis.setDefaultValue(oProps, \"variantManagement\", oTableDefinition.annotation.variantManagement);\n\t\tthis.setDefaultValue(oProps, \"enableAutoColumnWidth\", true);\n\t\tthis.setDefaultValue(oProps, \"dataStateIndicatorFilter\", oTableDefinition.control.dataStateIndicatorFilter);\n\t\tthis.setDefaultValue(oProps, \"isOptimizedForSmallDevice\", CommonUtils.isSmallDevice());\n\t\t// Special code for readOnly\n\t\t// readonly = false -> Force editable\n\t\t// readonly = true -> Force display mode\n\t\t// readonly = undefined -> Bound to edit flow\n\n\t\tswitch (oProps.readOnly) {\n\t\t\tcase \"false\":\n\t\t\t\toProps.readOnly = false;\n\t\t\t\tbreak;\n\t\t\tcase \"true\":\n\t\t\t\toProps.readOnly = true;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t}\n\n\t\tswitch (oProps.enableAutoColumnWidth) {\n\t\t\tcase \"false\":\n\t\t\t\toProps.enableAutoColumnWidth = false;\n\t\t\t\tbreak;\n\t\t\tcase \"true\":\n\t\t\t\toProps.enableAutoColumnWidth = true;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t}\n\n\t\tif (oProps.readOnly === undefined && oTableDefinition.annotation.displayMode === true) {\n\t\t\toProps.readOnly = true;\n\t\t}\n\n\t\tif (oProps.rowPress) {\n\t\t\toProps.rowAction = \"Navigation\";\n\t\t}\n\t\tthis.setDefaultValue(oProps, \"rowPress\", oTableDefinition.annotation.row.press);\n\t\tthis.setDefaultValue(oProps, \"rowAction\", oTableDefinition.annotation.row.action);\n\n\t\tif (oProps.personalization === \"false\") {\n\t\t\toProps.personalization = undefined;\n\t\t} else if (oProps.personalization === \"true\") {\n\t\t\toProps.personalization = \"Sort,Column,Filter\";\n\t\t}\n\n\t\tswitch (oProps.personalization) {\n\t\t\tcase \"false\":\n\t\t\t\toProps.personalization = undefined;\n\t\t\t\tbreak;\n\t\t\tcase \"true\":\n\t\t\t\toProps.personalization = \"Sort,Column,Filter\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t}\n\n\t\tif (oProps.isSearchable === \"false\") {\n\t\t\toProps.searchable = false;\n\t\t} else {\n\t\t\toProps.searchable = oTableDefinition.annotation.searchable;\n\t\t}\n\n\t\tlet useBasicSearch = false;\n\n\t\t// Note for the 'filterBar' property:\n\t\t// 1. ID relative to the view of the Table.\n\t\t// 2. Absolute ID.\n\t\t// 3. ID would be considered in association to TableAPI's ID.\n\t\tif (!oProps.filterBar && !oProps.filterBarId && oProps.searchable) {\n\t\t\t// filterBar: Public property for building blocks\n\t\t\t// filterBarId: Only used as Internal private property for FE templates\n\t\t\toProps.filterBarId = generate([oProps.id, \"StandardAction\", \"BasicSearch\"]);\n\t\t\tuseBasicSearch = true;\n\t\t}\n\t\t// Internal properties\n\t\toProps.useBasicSearch = useBasicSearch;\n\t\toProps.tableType = oProps.type;\n\t\toProps.showCreate = oTableDefinition.annotation.standardActions.actions.create.visible || true;\n\t\toProps.autoBindOnInit = oTableDefinition.annotation.autoBindOnInit;\n\n\t\t// Internal that I want to remove in the end\n\t\toProps.navigationPath = oTableDefinition.annotation.navigationPath; // oTableDefinition.annotation.collection; //DataModelPathHelper.getContextRelativeTargetObjectPath(oContextObjectPath); //\n\t\tif (oTableDefinition.annotation.collection.startsWith(\"/\") && oContextObjectPath.startingEntitySet._type === \"Singleton\") {\n\t\t\toTableDefinition.annotation.collection = oProps.navigationPath;\n\t\t}\n\t\toProps.parentEntitySet = mSettings.models.metaModel.createBindingContext(\n\t\t\t\"/\" +\n\t\t\t\t(oContextObjectPath.contextLocation!.targetEntitySet\n\t\t\t\t\t? oContextObjectPath.contextLocation!.targetEntitySet.name\n\t\t\t\t\t: oContextObjectPath.startingEntitySet.name)\n\t\t);\n\t\toProps.collection = mSettings.models.metaModel.createBindingContext(oTableDefinition.annotation.collection);\n\n\t\tswitch (oProps.readOnly) {\n\t\t\tcase true:\n\t\t\t\toProps.columnEditMode = \"Display\";\n\t\t\t\tbreak;\n\t\t\tcase false:\n\t\t\t\toProps.columnEditMode = \"Editable\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\toProps.columnEditMode = undefined;\n\t\t}\n\t\t// Regarding the remaining ones that I think we could review\n\t\t// selectedContextsModel -> potentially hardcoded or internal only\n\t\t// onContextChange -> Autoscroll ... might need revision\n\t\t// onChange -> Just proxied down to the Field may need to see if needed or not\n\t\t// variantSelected / variantSaved -> Variant Management standard helpers ?\n\t\t// tableDelegate  -> used externally for ALP ... might need to see if relevant still\n\t\t// onSegmentedButtonPressed -> ALP specific, should be a dedicated control for the contentViewSwitcher\n\t\t// visible -> related to this ALP contentViewSwitcher... maybe an outer control would make more sense ?\n\n\t\toProps.headerBindingExpression = buildExpressionForHeaderVisible(oProps);\n\t\treturn oProps;\n\t},\n\t/**\n\t * Build actions and action groups for table visualisation.\n\t *\n\t * @param oActions XML node corresponding to actions\n\t * @returns Prepared actions\n\t */\n\t_buildActions: function (oActions: any) {\n\t\tconst oExtraActions: any = {};\n\t\tif (oActions && oActions.children.length > 0) {\n\t\t\tconst actions = Array.prototype.slice.apply(oActions.children);\n\t\t\tlet actionIdx = 0;\n\t\t\tactions.forEach(function (act) {\n\t\t\t\tactionIdx++;\n\t\t\t\tlet menuActions: any[] = [];\n\t\t\t\tif (act.children.length && act.localName === \"ActionGroup\" && act.namespaceURI === \"sap.fe.macros\") {\n\t\t\t\t\tconst actionsToAdd = Array.prototype.slice.apply(act.children);\n\t\t\t\t\tactionsToAdd.forEach(function (actToAdd) {\n\t\t\t\t\t\tconst actionKeyAdd = actToAdd.getAttribute(\"key\") || \"InlineXMLAction_\" + actionIdx;\n\t\t\t\t\t\tconst curOutObject = {\n\t\t\t\t\t\t\tkey: actionKeyAdd,\n\t\t\t\t\t\t\ttext: actToAdd.getAttribute(\"text\"),\n\t\t\t\t\t\t\t__noWrap: true,\n\t\t\t\t\t\t\tpress: actToAdd.getAttribute(\"press\"),\n\t\t\t\t\t\t\trequiresSelection: actToAdd.getAttribute(\"requiresSelection\") === \"true\",\n\t\t\t\t\t\t\tenabled: actToAdd.getAttribute(\"enabled\") === null ? true : actToAdd.getAttribute(\"enabled\")\n\t\t\t\t\t\t};\n\t\t\t\t\t\toExtraActions[curOutObject.key] = curOutObject;\n\t\t\t\t\t\tactionIdx++;\n\t\t\t\t\t});\n\t\t\t\t\tmenuActions = Object.values(oExtraActions)\n\t\t\t\t\t\t.slice(-act.children.length)\n\t\t\t\t\t\t.map(function (menuItem: any) {\n\t\t\t\t\t\t\treturn menuItem.key;\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tconst actionKey = act.getAttribute(\"key\") || \"InlineXMLAction_\" + actionIdx;\n\t\t\t\tconst actObject = {\n\t\t\t\t\tkey: actionKey,\n\t\t\t\t\ttext: act.getAttribute(\"text\"),\n\t\t\t\t\tposition: {\n\t\t\t\t\t\tplacement: act.getAttribute(\"placement\"),\n\t\t\t\t\t\tanchor: act.getAttribute(\"anchor\")\n\t\t\t\t\t},\n\t\t\t\t\t__noWrap: true,\n\t\t\t\t\tpress: act.getAttribute(\"press\"),\n\t\t\t\t\trequiresSelection: act.getAttribute(\"requiresSelection\") === \"true\",\n\t\t\t\t\tenabled: act.getAttribute(\"enabled\") === null ? true : act.getAttribute(\"enabled\"),\n\t\t\t\t\tmenu: menuActions.length ? menuActions : null\n\t\t\t\t};\n\t\t\t\toExtraActions[actObject.key] = actObject;\n\t\t\t});\n\t\t}\n\t\treturn oExtraActions;\n\t},\n\n\t/**\n\t * Returns the annotation path pointing to the visualization annotation (LineItem).\n\t *\n\t * @param contextObjectPath The datamodel object path for the table\n\t * @param converterContext The converter context\n\t * @returns The annotation path\n\t */\n\t_getVisualizationPath: function (contextObjectPath: DataModelObjectPath, converterContext: ConverterContext): string {\n\t\tconst metaPath = getContextRelativeTargetObjectPath(contextObjectPath) as string;\n\t\tif (contextObjectPath.targetObject.term === UIAnnotationTerms.LineItem) {\n\t\t\treturn metaPath; // MetaPath is already pointing to a LineItem\n\t\t}\n\t\t//Need to switch to the context related the PV or SPV\n\t\tconst resolvedTarget = converterContext.getEntityTypeAnnotation(metaPath);\n\n\t\tlet visualizations: VisualizationAndPath[] = [];\n\t\tswitch (contextObjectPath.targetObject.term) {\n\t\t\tcase UIAnnotationTerms.SelectionPresentationVariant:\n\t\t\t\tif (contextObjectPath.targetObject.PresentationVariant) {\n\t\t\t\t\tvisualizations = getVisualizationsFromPresentationVariant(\n\t\t\t\t\t\tcontextObjectPath.targetObject.PresentationVariant,\n\t\t\t\t\t\tmetaPath,\n\t\t\t\t\t\tresolvedTarget.converterContext,\n\t\t\t\t\t\ttrue\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase UIAnnotationTerms.PresentationVariant:\n\t\t\t\tvisualizations = getVisualizationsFromPresentationVariant(\n\t\t\t\t\tcontextObjectPath.targetObject,\n\t\t\t\t\tmetaPath,\n\t\t\t\t\tresolvedTarget.converterContext,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tLog.error(`Bad metapath parameter for table : ${contextObjectPath.targetObject.term}`);\n\t\t}\n\n\t\tconst lineItemViz = visualizations.find((viz) => {\n\t\t\treturn viz.visualization.term === UIAnnotationTerms.LineItem;\n\t\t});\n\n\t\tif (lineItemViz) {\n\t\t\treturn lineItemViz.annotationPath;\n\t\t} else {\n\t\t\treturn metaPath; // Fallback\n\t\t}\n\t},\n\n\t_getPresentationPath: function (oContextObjectPath: any) {\n\t\tlet presentationPath;\n\t\tswitch (oContextObjectPath.targetObject.term) {\n\t\t\tcase UIAnnotationTerms.PresentationVariant:\n\t\t\t\tpresentationPath = getContextRelativeTargetObjectPath(oContextObjectPath);\n\t\t\t\tbreak;\n\t\t\tcase UIAnnotationTerms.SelectionPresentationVariant:\n\t\t\t\tpresentationPath = getContextRelativeTargetObjectPath(oContextObjectPath) + \"/PresentationVariant\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tpresentationPath = null;\n\t\t}\n\t\treturn presentationPath;\n\t}\n});\nexport default Table;\n"],"mappings":"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"}},{"offset":{"line":23993,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","CommonUtils","DataVisualization","MetaModelConverter","StableIdHelper","DataModelPathHelper","TableTemplating","MacroMetadata","buildExpressionForHeaderVisible","getContextRelativeTargetObjectPath","generate","getInvolvedDataModelObjects","getVisualizationsFromPresentationVariant","getDataVisualizationConfiguration","Table","extend","name","namespace","publicNamespace","fragment","metadata","stereotype","properties","tableDefinition","type","metaPath","isPublic","contextPath","collection","required","$kind","parentEntitySet","id","_apiId","navigationPath","readOnly","fieldMode","defaultValue","allowedValues","disableAddRowButtonForEmptyData","customValidationFunction","useCondensedTableLayout","rowAction","undefined","selectionMode","busy","enableFullScreen","header","headerVisible","headerLevel","noDataText","creationMode","createAtEnd","createOutbound","createOutboundDetail","createNewAction","personalization","isSearchable","tableType","enableExport","enablePaste","selectionLimit","multiSelectMode","filterBar","filterBarId","tableDelegate","enableAutoScroll","visible","isAlp","variantManagement","columnEditMode","computed","tabTitle","isOptimizedForSmallDevice","enableAutoColumnWidth","dataStateIndicatorFilter","isCompactType","events","variantSaved","variantSelected","onChange","rowPress","onContextChange","onSegmentedButtonPressed","stateChange","selectionChange","aggregations","actions","columns","create","oProps","oControlConfiguration","mSettings","oAggregations","oTableDefinition","oContextObjectPath","initialConverterContext","this","getConverterContext","sVisualizationPath","_getVisualizationPath","sPresentationPath","_getPresentationPath","oExtraActions","_buildActions","oExtraColumns","parseAggregation","childColumn","columnChildIdx","_childColumn$children","columnKey","getAttribute","key","width","importance","horizontalAlign","availability","template","children","outerHTML","split","position","placement","anchor","oExtraParams","mTableSettings","JSON","parse","stringify","tableSettings","oConverterContext","oVisualizationDefinition","useCondensedLayout","visualizations","createBindingContext","getObject","path","getPath","setDefaultValue","annotation","control","standardActions","paste","enabled","updatablePropertyPath","searchable","showRowCount","inlineCreationRowCount","title","inlineCreationRowsHiddenInEditMode","getContentId","mode","append","outbound","newAction","outboundDetail","p13nMode","isSmallDevice","displayMode","row","press","action","useBasicSearch","showCreate","autoBindOnInit","startsWith","startingEntitySet","_type","models","metaModel","contextLocation","targetEntitySet","headerBindingExpression","oActions","length","Array","prototype","slice","apply","actionIdx","forEach","act","menuActions","localName","namespaceURI","actionsToAdd","actToAdd","actionKeyAdd","curOutObject","text","__noWrap","requiresSelection","Object","values","map","menuItem","actionKey","actObject","menu","contextObjectPath","converterContext","targetObject","term","resolvedTarget","getEntityTypeAnnotation","PresentationVariant","error","lineItemViz","find","viz","visualization","annotationPath","presentationPath"],"sources":["Table.metadata-dbg.js"],"mappings":"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","sourceRoot":"table"}},{"offset":{"line":23998,"column":0},"map":{"version":3,"names":["TableAPI","defineUI5Class","property","type","expectedTypes","expectedAnnotations","defaultValue","aggregation","event","xmlEventHandler","mSettings","others","updateFilterBar","content","attachEvent","onTableSelectionChange","getSelectedContexts","addMessage","parameters","msgManager","_getMessageManager","oTable","oMessage","Message","target","getRowBinding","getResolvedPath","message","processor","getModel","description","persistent","addMessages","getId","removeMessage","id","messages","getMessageModel","getData","result","find","e","removeMessages","sap","ui","getCore","getMessageManager","_getRowBinding","getContent","getCounts","TableUtils","getListBindingForCount","getBindingContext","batchGroupId","getProperty","data","additionalFilters","getHiddenFilters","then","iValue","getCountFormatted","catch","onTableRowPress","oEvent","oController","oContext","mParameters","isInactive","isTransient","getTableDefinition","enableAnalytics","isA","navigationParameters","Object","assign","reason","NavigationReason","RowPress","_routing","navigateForwardToContext","onInternalDataReceived","getParameter","getController","messageHandler","showMessageDialog","onInternalDataRequested","setProperty","fireEvent","getParameters","onPaste","tableDefinition","control","enablePaste","aRawPastedData","getSource","getEnablePaste","PasteHelper","pasteData","oResourceModel","getLibraryResourceBundle","MessageBox","error","getText","title","onBeforeExport","exportEvent","isSplitMode","splitCells","tableController","exportColumns","workbook","columns","tableColumns","updateExportSettings","dataStateIndicatorFilter","sTableContextBindingPath","getPath","sTableRowBinding","getTarget","onDataStateChange","oDataStateIndicator","aFilteredMessages","oInternalModel","index","length","exportColumn","label","DelegateUtil","getLocalizedText","falseValue","ResourceModel","trueValue","targetValueColumn","column","_columnWithTargetValueToBeAdded","columnToBeAdded","Array","isArray","template","exportDataPointTargetValue","splice","columnExport","columnNeedsToBeAdded","propertyInfos","relativePath","includes","name","resumeBinding","bRequestIfNotInitialized","getDataInitialized","rebind","refreshNotApplicableFields","oFilterControl","FilterUtils","getNotApplicableFilters","suspendBinding","invalidateContent","onMassEditButtonPressed","pageController","massEdit","openMassEditDialog","Log","warning","table","filterBarRefId","getFilterBar","getFilter","_setFilterBar","tableAPIId","tableAPILocalId","potentialfilterBarId","replace","RegExp","filterBar","CommonUtils","getTargetView","byId","Core","setFilter","checkIfColumnExists","aFilteredColummns","columnName","some","oColumn","sColumnNameVisible","sTextArrangement","undefined","getIdentifierColumn","headerInfoTitlePath","headerInfoTitle","oMetaModel","getMetaModel","sCurrentEntitySetName","aTechnicalKeys","getObject","aFilteredTechnicalKeys","forEach","technicalKey","push","semanticKeyColumns","semanticKeys","aVisibleColumns","aTableColumns","getColumns","getDataProperty","oTextArrangement","$Path","sTextPlacement","$EnumMember","setUpEmptyRows","createButtonWasPressed","creationMode","CreationMode","InlineCreationRows","inlineCreationRowsHiddenInEditMode","waitTableRendered","Promise","resolve","getDomRef","delegate","onAfterRendering","removeEventDelegate","addEventDelegate","uiModel","watchBinding","bindProperty","fnHandler","detachChange","destroy","attachChange","isInEditMode","binding","isResolved","isLengthFinal","contextPath","getContext","inactiveContext","getAllCurrentContexts","context","startsWith","_createEmptyRow","oBinding","iInlineCreationRowCount","inlineCreationRowCount","aData","i","bAtEnd","bInactive","oView","oInternalEditFlow","_editFlow","creatingEmptyRows","aContexts","createMultipleDocuments","editFlow","onBeforeCreate","created","oError","canceled","MacroAPI"],"sourceRoot":"table","sources":["TableAPI.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport NavigationReason from \"sap/fe/core/controllerextensions/routing/NavigationReason\";\nimport type { AnnotationTableColumn, TableColumn, TableVisualization } from \"sap/fe/core/converters/controls/Common/Table\";\nimport { CreationMode } from \"sap/fe/core/converters/ManifestSettings\";\nimport type { PropertiesOf } from \"sap/fe/core/helpers/ClassSupport\";\nimport { aggregation, defineUI5Class, event, property, xmlEventHandler } from \"sap/fe/core/helpers/ClassSupport\";\nimport PasteHelper from \"sap/fe/core/helpers/PasteHelper\";\nimport type PageController from \"sap/fe/core/PageController\";\nimport DelegateUtil from \"sap/fe/macros/DelegateUtil\";\nimport FilterUtils from \"sap/fe/macros/filter/FilterUtils\";\nimport ResourceModel from \"sap/fe/macros/ResourceModel\";\nimport TableUtils from \"sap/fe/macros/table/Utils\";\nimport MessageBox from \"sap/m/MessageBox\";\nimport DataStateIndicator from \"sap/m/plugins/DataStateIndicator\";\nimport UI5Event from \"sap/ui/base/Event\";\nimport Control from \"sap/ui/core/Control\";\nimport Core from \"sap/ui/core/Core\";\nimport { MessageType } from \"sap/ui/core/library\";\nimport Message from \"sap/ui/core/message/Message\";\nimport FilterBar from \"sap/ui/mdc/FilterBar\";\nimport Table from \"sap/ui/mdc/Table\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport Context from \"sap/ui/model/odata/v4/Context\";\nimport ODataListBinding from \"sap/ui/model/odata/v4/ODataListBinding\";\nimport FilterBarAPI from \"../filterBar/FilterBarAPI\";\nimport MacroAPI from \"../MacroAPI\";\n\n/**\n * Definition of a custom action to be used inside the table toolbar\n *\n * @alias sap.fe.macros.table.Action\n * @public\n */\nexport type Action = {\n\t/**\n\t * Unique identifier of the action\n\t *\n\t * @public\n\t */\n\tkey: string;\n\t/**\n\t * The text that will be displayed for this action\n\t *\n\t * @public\n\t */\n\ttext: string;\n\t/**\n\t * Reference to the key of another action already displayed in the toolbar to properly place this one\n\t *\n\t * @public\n\t */\n\tanchor?: string;\n\t/**\n\t * Defines where this action should be placed relative to the defined anchor\n\t *\n\t * Allowed values are `Before` and `After`\n\t *\n\t * @public\n\t */\n\tplacement?: string;\n\n\t/**\n\t * Event handler to be called when the user chooses the action\n\t *\n\t * @public\n\t */\n\tpress: string;\n\n\t/**\n\t * Defines if the action requires a selection.\n\t *\n\t * @public\n\t */\n\trequiresSelection?: boolean;\n\n\t/**\n\t * Enables or disables the action\n\t *\n\t * @public\n\t */\n\tenabled?: boolean;\n};\n\n/**\n * Definition of a custom ActionGroup to be used inside the table toolbar\n *\n * @alias sap.fe.macros.table.ActionGroup\n * @public\n */\nexport type ActionGroup = {\n\t/**\n\t * Unique identifier of the ActionGroup\n\t *\n\t * @public\n\t */\n\tkey: string;\n\t/**\n\t * Defines nested actions\n\t *\n\t * @public\n\t */\n\tactions: Action[];\n\n\t/**\n\t * The text that will be displayed for this action group\n\t *\n\t * @public\n\t */\n\ttext: string;\n\n\t/**\n\t * Defines where this action group should be placed relative to the defined anchor\n\t *\n\t * Allowed values are `Before` and `After`\n\t *\n\t * @public\n\t */\n\tplacement?: string;\n\n\t/**\n\t * Reference to the key of another action or action group already displayed in the toolbar to properly place this one\n\t *\n\t * @public\n\t */\n\tanchor?: string;\n};\n\n/**\n * Definition of a custom column to be used inside the table.\n *\n * The template for the column has to be provided as the default aggregation\n *\n * @alias sap.fe.macros.table.Column\n * @public\n * @experimental\n */\nexport type Column = {\n\t/**\n\t * Unique identifier of the column\n\t *\n\t * @public\n\t */\n\tkey: string;\n\t/**\n\t * The text that will be displayed for this column header\n\t *\n\t * @public\n\t */\n\theader: string;\n\t/**\n\t * Reference to the key of another column already displayed in the table to properly place this one\n\t *\n\t * @public\n\t */\n\tanchor?: string;\n\t/**\n\t * Defines the column importance\n\t *\n\t * You can define which columns should be automatically moved to the pop-in area based on their importance\n\t *\n\t * @public\n\t */\n\timportance?: string;\n\t/**\n\t * Defines where this column should be placed relative to the defined anchor\n\t *\n\t * Allowed values are `Before` and `After`\n\t *\n\t * @public\n\t */\n\tplacement?: string;\n};\n\ntype exportColumn = {\n\tlabel: string;\n\tproperty: string | Array<string>;\n\ttype?: string;\n\twidth?: number;\n\ttextAlign?: string;\n\tscale?: number;\n\tdelimiter?: boolean;\n\tunit?: string;\n\tunitProperty?: string;\n\tdisplayUnit?: boolean;\n\ttrueValue?: string;\n\tfalseValue?: string;\n\ttemplate?: string;\n\tinputFormat?: string;\n\tutc?: boolean;\n\tvalueMap?: string;\n\twrap?: boolean;\n};\n\n/**\n * Building block used to create a table based on the metadata provided by OData V4.\n * <br>\n * Usually, a LineItem or PresentationVariant annotation is expected, but the Table building block can also be used to display an EntitySet.\n *\n *\n * Usage example:\n * <pre>\n * &lt;macro:Table id=\"MyTable\" metaPath=\"@com.sap.vocabularies.UI.v1.LineItem\" /&gt;\n * </pre>\n *\n * @alias sap.fe.macros.Table\n * @public\n */\n@defineUI5Class(\"sap.fe.macros.table.TableAPI\")\nclass TableAPI extends MacroAPI {\n\tcreatingEmptyRows?: boolean;\n\tconstructor(mSettings?: PropertiesOf<TableAPI>, ...others: any[]) {\n\t\tsuper(mSettings as any, ...others);\n\n\t\tthis.updateFilterBar();\n\n\t\tif (this.content) {\n\t\t\tthis.content.attachEvent(\"selectionChange\", {}, this.onTableSelectionChange, this);\n\t\t}\n\t}\n\n\t/**\n\t * Defines the relative path of the property in the metamodel, based on the current contextPath.\n\t *\n\t * @public\n\t */\n\t@property({\n\t\ttype: \"string\",\n\t\texpectedTypes: [\"EntitySet\", \"EntityType\", \"Singleton\", \"NavigationProperty\"],\n\t\texpectedAnnotations: [\n\t\t\t\"com.sap.vocabularies.UI.v1.LineItem\",\n\t\t\t\"com.sap.vocabularies.UI.v1.PresentationVariant\",\n\t\t\t\"com.sap.vocabularies.UI.v1.SelectionPresentationVariant\"\n\t\t]\n\t})\n\tmetaPath!: string;\n\n\t@property({ type: \"sap.ui.model.Context\" })\n\ttableDefinition!: TableVisualization;\n\n\t/**\n\t * An expression that allows you to control the 'read-only' state of the table.\n\t *\n\t * If you do not set any expression, SAP Fiori elements hooks into the standard lifecycle to determine the current state.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean\" })\n\treadOnly!: boolean;\n\n\t/**\n\t * The identifier of the table control.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\tid!: string;\n\n\t/**\n\t * An expression that allows you to control the 'busy' state of the table.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean\", defaultValue: false })\n\tbusy!: boolean;\n\n\t/**\n\t * Defines the type of table that will be used by the building block to render the data.\n\t *\n\t * Allowed values are `GridTable` and `ResponsiveTable`\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\", defaultValue: \"ResponsiveTable\" })\n\ttype!: string;\n\n\t/**\n\t * Controls if the export functionality of the table is enabled or not.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean\", defaultValue: true })\n\tenableExport!: boolean;\n\n\t/**\n\t * Controls if the paste functionality of the table is enabled or not.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean\", defaultValue: false })\n\tenablePaste!: boolean;\n\n\t/**\n\t * Controls whether the table can be opened in fullscreen mode or not.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean\", defaultValue: false })\n\tenableFullScreen!: boolean;\n\n\t/**\n\t * ID of the FilterBar building block associated with the table.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\tfilterBar!: string;\n\n\t/**\n\t * Defines the selection mode to be used by the table.\n\t *\n\t * Allowed values are `None`, `Single`, `Multi` or `Auto`\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\tselectionMode!: string;\n\n\t/**\n\t * Specifies the header text that is shown in the table.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\theader!: string;\n\n\t/**\n\t * Specifies if the column width is automatically calculated.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean\", defaultValue: true })\n\tenableAutoColumnWidth!: boolean;\n\n\t/**\n\t * Specifies it the table is designed for a mobile device.\n\t *\n\t * @private\n\t */\n\t@property({ type: \"boolean\", defaultValue: false })\n\tisOptimizedForSmallDevice!: boolean;\n\n\t/**\n\t * Controls if the header text should be shown or not.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean\", defaultValue: true })\n\theaderVisible!: boolean;\n\n\t/**\n\t * Aggregate actions of the table.\n\t *\n\t * @public\n\t */\n\t@aggregation({ type: \"sap.fe.macros.table.Action\" })\n\tactions!: Action[];\n\n\t/**\n\t * Aggregate columns of the table.\n\t *\n\t * @public\n\t */\n\t@aggregation({ type: \"sap.fe.macros.table.Column\" })\n\tcolumns!: Column[];\n\n\t/**\n\t *\n\t *\n\t * @private\n\t */\n\t@property({ type: \"boolean\", defaultValue: false })\n\tdataInitialized!: boolean;\n\n\t/**\n\t *\n\t *\n\t * @private\n\t */\n\t@property({ type: \"boolean\", defaultValue: false })\n\tbindingSuspended!: boolean;\n\n\t/**\n\t *\n\t *\n\t * @private\n\t */\n\t@property({ type: \"boolean\", defaultValue: false })\n\toutDatedBinding!: boolean;\n\n\t/**\n\t *\n\t *\n\t * @private\n\t */\n\t@property({ type: \"boolean\", defaultValue: false })\n\tpendingRequest!: boolean;\n\n\t/**\n\t * An event triggered when the user chooses a row; the event contains information about which row was chosen.\n\t *\n\t * You can set this in order to handle the navigation manually.\n\t *\n\t * @public\n\t */\n\t@event()\n\trowPress!: Function;\n\n\t/**\n\t * An event triggered when the Table State changes.\n\t *\n\t * You can set this in order to store the table state in the appstate.\n\t *\n\t * @private\n\t */\n\t@event()\n\tstateChange!: Function;\n\n\t@event()\n\tinternalDataRequested!: Function;\n\n\t/**\n\t * Controls which options should be enabled for the table personalization dialog.\n\t *\n\t * If it is set to `true`, all possible options for this kind of table are enabled.<br/>\n\t * If it is set to `false`, personalization is disabled.<br/>\n\t *<br/>\n\t * You can also provide a more granular control for the personalization by providing a comma-separated list with the options you want to be available.<br/>\n\t * Available options are:<br/>\n\t *  - Sort<br/>\n\t *  - Column<br/>\n\t *  - Filter<br/>\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean|string\", defaultValue: true })\n\tpersonalization!: boolean | string;\n\n\t/**\n\t * Controls the kind of variant management that should be enabled for the table.\n\t *\n\t * Allowed value is `Control`.<br/>\n\t * If set with value `Control`, a variant management control is seen within the table and the table is linked to this.<br/>\n\t * If not set with any value, control level variant management is not available for this table.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\tvariantManagement!: string;\n\n\t/**\n\t * Groups menu actions by key.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\tmenu?: string;\n\n\t/**\n\t * Defines whether to display the search action.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean\", defaultValue: true })\n\tisSearchable?: boolean;\n\n\t/**\n\t * Gets contexts from the table that have been selected by the user.\n\t *\n\t * @returns Contexts of the rows selected by the user\n\t * @public\n\t */\n\tgetSelectedContexts(): Context[] {\n\t\treturn (this.content as any).getSelectedContexts();\n\t}\n\n\t/**\n\t * Adds a message to the table.\n\t *\n\t * The message applies to the whole table and not to an individual table row.\n\t *\n\t * @param [parameters] The parameters to create the message\n\t * @param parameters.type Message type\n\t * @param parameters.message Message text\n\t * @param parameters.description Message description\n\t * @param parameters.persistent True if the message is persistent\n\t * @returns The ID of the message\n\t * @public\n\t */\n\taddMessage(parameters: { type?: MessageType; message?: string; description?: string; persistent?: boolean }): string {\n\t\tconst msgManager = this._getMessageManager();\n\n\t\tconst oTable = this.content as any as Table;\n\n\t\tconst oMessage = new Message({\n\t\t\ttarget: oTable.getRowBinding().getResolvedPath(),\n\t\t\ttype: parameters.type,\n\t\t\tmessage: parameters.message,\n\t\t\tprocessor: oTable.getModel(),\n\t\t\tdescription: parameters.description,\n\t\t\tpersistent: parameters.persistent\n\t\t});\n\n\t\tmsgManager.addMessages(oMessage);\n\t\treturn oMessage.getId();\n\t}\n\n\t/**\n\t * Removes a message from the table.\n\t *\n\t * @param id The id of the message\n\t * @public\n\t */\n\tremoveMessage(id: string) {\n\t\tconst msgManager = this._getMessageManager();\n\t\tconst messages = msgManager.getMessageModel().getData();\n\t\tconst result = messages.find((e: any) => e.id === id);\n\t\tif (result) {\n\t\t\tmsgManager.removeMessages(result);\n\t\t}\n\t}\n\n\t_getMessageManager() {\n\t\treturn sap.ui.getCore().getMessageManager();\n\t}\n\n\t/**\n\t * An event triggered when the selection in the table changes.\n\t *\n\t * @public\n\t */\n\t@event()\n\tselectionChange!: Function;\n\n\t_getRowBinding() {\n\t\tconst oTable = (this as any).getContent();\n\t\treturn oTable.getRowBinding();\n\t}\n\n\tgetCounts(): Promise<string> {\n\t\tconst oTable = (this as any).getContent();\n\t\treturn TableUtils.getListBindingForCount(oTable, oTable.getBindingContext(), {\n\t\t\tbatchGroupId: !this.getProperty(\"bindingSuspended\") ? oTable.data(\"batchGroupId\") : \"$auto\",\n\t\t\tadditionalFilters: TableUtils.getHiddenFilters(oTable)\n\t\t})\n\t\t\t.then((iValue: any) => {\n\t\t\t\treturn TableUtils.getCountFormatted(iValue);\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\treturn \"0\";\n\t\t\t});\n\t}\n\n\t@xmlEventHandler()\n\tonTableRowPress(oEvent: UI5Event, oController: PageController, oContext: Context, mParameters: any) {\n\t\t// prevent navigation to an empty row\n\t\tif (oContext && oContext.isInactive() && oContext.isTransient()) {\n\t\t\treturn false;\n\t\t}\n\t\t// In the case of an analytical table, if we're trying to navigate to a context corresponding to a visual group or grand total\n\t\t// --> Cancel navigation\n\t\tif (\n\t\t\tthis.getTableDefinition().enableAnalytics &&\n\t\t\toContext &&\n\t\t\toContext.isA(\"sap.ui.model.odata.v4.Context\") &&\n\t\t\ttypeof oContext.getProperty(\"@$ui5.node.isExpanded\") === \"boolean\"\n\t\t) {\n\t\t\treturn false;\n\t\t} else {\n\t\t\tconst navigationParameters = Object.assign({}, mParameters, { reason: NavigationReason.RowPress });\n\t\t\t(oController as any)._routing.navigateForwardToContext(oContext, navigationParameters);\n\t\t}\n\t}\n\n\t@xmlEventHandler()\n\tonInternalDataReceived(oEvent: UI5Event) {\n\t\tif (oEvent.getParameter(\"error\")) {\n\t\t\tthis.getController().messageHandler.showMessageDialog();\n\t\t}\n\t}\n\n\t@xmlEventHandler()\n\tonInternalDataRequested(oEvent: UI5Event) {\n\t\tthis.setProperty(\"dataInitialized\", true);\n\t\t(this as any).fireEvent(\"internalDataRequested\", oEvent.getParameters());\n\t}\n\n\t@xmlEventHandler()\n\tonPaste(oEvent: UI5Event, oController: PageController) {\n\t\t// If paste is disable or if we're not in edit mode, we can't paste anything\n\t\tif (!this.tableDefinition.control.enablePaste || !this.getModel(\"ui\").getProperty(\"/isEditable\")) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst aRawPastedData = oEvent.getParameter(\"data\"),\n\t\t\toTable = oEvent.getSource() as Table;\n\n\t\tif (oTable.getEnablePaste() === true) {\n\t\t\tPasteHelper.pasteData(aRawPastedData, oTable, oController);\n\t\t} else {\n\t\t\tconst oResourceModel = sap.ui.getCore().getLibraryResourceBundle(\"sap.fe.core\");\n\t\t\tMessageBox.error(oResourceModel.getText(\"T_OP_CONTROLLER_SAPFE_PASTE_DISABLED_MESSAGE\"), {\n\t\t\t\ttitle: oResourceModel.getText(\"C_COMMON_SAPFE_ERROR\")\n\t\t\t});\n\t\t}\n\t}\n\n\t// This event will allow us to intercept the export before is triggered to cover specific cases\n\t// that couldn't be addressed on the propertyInfos for each column.\n\t// e.g. Fixed Target Value for the datapoints\n\t@xmlEventHandler()\n\tonBeforeExport(exportEvent: UI5Event) {\n\t\tconst isSplitMode = exportEvent.getParameter(\"userExportSettings\").splitCells,\n\t\t\ttableController = exportEvent.getSource() as PageController,\n\t\t\texportColumns = exportEvent.getParameter(\"exportSettings\").workbook?.columns,\n\t\t\ttableColumns = this.tableDefinition.columns;\n\n\t\tTableAPI.updateExportSettings(exportColumns, tableColumns, tableController, isSplitMode);\n\t}\n\n\t/**\n\t * Handles the MDC DataStateIndicator plugin to display messageStrip on a table.\n\t *\n\t * @param oMessage\n\t * @param oTable\n\t * @name dataStateFilter\n\t * @returns Whether to render the messageStrip visible\n\t */\n\tstatic dataStateIndicatorFilter(oMessage: any, oTable: any): boolean {\n\t\tconst sTableContextBindingPath = oTable.getBindingContext()?.getPath();\n\t\tconst sTableRowBinding = (sTableContextBindingPath ? `${sTableContextBindingPath}/` : \"\") + oTable.getRowBinding().getPath();\n\t\treturn sTableRowBinding === oMessage.getTarget() ? true : false;\n\t}\n\n\t/**\n\t * This event handles the DataState of the DataStateIndicator plugin from MDC on a table.\n\t * It's fired when new error messages are sent from the backend to update row highlighting.\n\t *\n\t * @name onDataStateChange\n\t * @param oEvent Event object\n\t */\n\t@xmlEventHandler()\n\tonDataStateChange(oEvent: UI5Event) {\n\t\tconst oDataStateIndicator = oEvent.getSource() as DataStateIndicator;\n\t\tconst aFilteredMessages = oEvent.getParameter(\"filteredMessages\");\n\t\tif (aFilteredMessages) {\n\t\t\tconst oInternalModel = oDataStateIndicator.getModel(\"internal\") as JSONModel;\n\t\t\toInternalModel.setProperty(\"filteredMessages\", aFilteredMessages, oDataStateIndicator.getBindingContext(\"internal\") as Context);\n\t\t}\n\t}\n\n\t/**\n\t * Updates the columns to be exported of a table.\n\t *\n\t * @param exportColumns The columns to be exported\n\t * @param columns The columns from the table converter\n\t * @param tableController The table controller\n\t * @param isSplitMode Defines if the export has been launched using split mode\n\t * @returns The updated columns to be exported\n\t */\n\tstatic updateExportSettings(\n\t\texportColumns: exportColumn[],\n\t\tcolumns: TableColumn[],\n\t\ttableController: PageController,\n\t\tisSplitMode: boolean\n\t): exportColumn[] {\n\t\tfor (let index = exportColumns.length - 1; index >= 0; index--) {\n\t\t\tconst exportColumn = exportColumns[index];\n\t\t\texportColumn.label = DelegateUtil.getLocalizedText(exportColumn.label, tableController);\n\t\t\t//translate boolean values\n\t\t\tif (exportColumn.type === \"Boolean\") {\n\t\t\t\texportColumn.falseValue = ResourceModel.getText(\"no\");\n\t\t\t\texportColumn.trueValue = ResourceModel.getText(\"yes\");\n\t\t\t}\n\t\t\tconst targetValueColumn = columns?.find((column) => {\n\t\t\t\tif (isSplitMode) {\n\t\t\t\t\treturn this._columnWithTargetValueToBeAdded(column as AnnotationTableColumn, exportColumn);\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (targetValueColumn) {\n\t\t\t\tconst columnToBeAdded = {\n\t\t\t\t\tlabel: ResourceModel.getText(\"TargetValue\"),\n\t\t\t\t\tproperty: Array.isArray(exportColumn.property) ? exportColumn.property : [exportColumn.property],\n\t\t\t\t\ttemplate: (targetValueColumn as AnnotationTableColumn).exportDataPointTargetValue\n\t\t\t\t};\n\t\t\t\texportColumns.splice(index + 1, 0, columnToBeAdded);\n\t\t\t}\n\t\t}\n\t\treturn exportColumns;\n\t}\n\n\t/**\n\t * Defines if a column that is to be exported and contains a DataPoint with a fixed target value needs to be added.\n\t *\n\t * @param column The column from the annotations column\n\t * @param columnExport The column to be exported\n\t * @returns `true` if the referenced column has defined a targetValue for the dataPoint, false else\n\t */\n\tstatic _columnWithTargetValueToBeAdded(column: AnnotationTableColumn, columnExport: exportColumn): boolean {\n\t\tlet columnNeedsToBeAdded = false;\n\t\tif (column.exportDataPointTargetValue && column.propertyInfos?.length === 1) {\n\t\t\t//Add TargetValue column when exporting on split mode\n\t\t\tif (\n\t\t\t\tcolumn.relativePath === columnExport.property ||\n\t\t\t\tcolumnExport.property[0] === column.propertyInfos[0] ||\n\t\t\t\tcolumnExport.property.includes(column.relativePath) ||\n\t\t\t\tcolumnExport.property.includes(column.name)\n\t\t\t) {\n\t\t\t\t// part of a FieldGroup or from a lineItem or from a column on the entitySet\n\t\t\t\tdelete columnExport.template;\n\t\t\t\tcolumnNeedsToBeAdded = true;\n\t\t\t}\n\t\t}\n\t\treturn columnNeedsToBeAdded;\n\t}\n\n\tresumeBinding(bRequestIfNotInitialized: boolean) {\n\t\tthis.setProperty(\"bindingSuspended\", false);\n\t\tif ((bRequestIfNotInitialized && !(this as any).getDataInitialized()) || this.getProperty(\"outDatedBinding\")) {\n\t\t\tthis.setProperty(\"outDatedBinding\", false);\n\t\t\t(this as any).getContent()?.rebind();\n\t\t}\n\t}\n\n\trefreshNotApplicableFields(oFilterControl: Control): any[] {\n\t\tconst oTable = (this as any).getContent();\n\t\treturn FilterUtils.getNotApplicableFilters(oFilterControl, oTable);\n\t}\n\n\tsuspendBinding() {\n\t\tthis.setProperty(\"bindingSuspended\", true);\n\t}\n\n\tinvalidateContent() {\n\t\tthis.setProperty(\"dataInitialized\", false);\n\t\tthis.setProperty(\"outDatedBinding\", false);\n\t}\n\n\t@xmlEventHandler()\n\tonMassEditButtonPressed(oEvent: UI5Event, pageController: any) {\n\t\tconst oTable = this.content;\n\t\tif (pageController && pageController.massEdit) {\n\t\t\tpageController.massEdit.openMassEditDialog(oTable);\n\t\t} else {\n\t\t\tLog.warning(\"The Controller is not enhanced with Mass Edit functionality\");\n\t\t}\n\t}\n\t@xmlEventHandler()\n\tonTableSelectionChange(oEvent: UI5Event) {\n\t\tthis.fireEvent(\"selectionChange\", oEvent.getParameters());\n\t}\n\n\t/**\n\t * Expose the internal table definition for external usage in delegate.\n\t *\n\t * @returns The tableDefinition\n\t */\n\tgetTableDefinition() {\n\t\treturn this.tableDefinition;\n\t}\n\n\t/**\n\t * connect the filter to the tableAPI if required\n\t *\n\t * @private\n\t * @alias sap.fe.macros.TableAPI\n\t */\n\n\tupdateFilterBar() {\n\t\tconst table = (this as any).getContent();\n\t\tconst filterBarRefId = (this as any).getFilterBar();\n\t\tif (table && filterBarRefId && table.getFilter() !== filterBarRefId) {\n\t\t\tthis._setFilterBar(filterBarRefId);\n\t\t}\n\t}\n\n\t/**\n\t * Sets the filter depending on the type of filterBar.\n\t *\n\t * @param filterBarRefId Id of the filter bar\n\t * @private\n\t * @alias sap.fe.macros.TableAPI\n\t */\n\t_setFilterBar(filterBarRefId: string): void {\n\t\tconst table = (this as any).getContent();\n\n\t\t// 'filterBar' property of macro:Table(passed as customData) might be\n\t\t// 1. A localId wrt View(FPM explorer example).\n\t\t// 2. Absolute Id(this was not supported in older versions).\n\t\t// 3. A localId wrt FragmentId(when an XMLComposite or Fragment is independently processed) instead of ViewId.\n\t\t//    'filterBar' was supported earlier as an 'association' to the 'mdc:Table' control inside 'macro:Table' in prior versions.\n\t\t//    In newer versions 'filterBar' is used like an association to 'macro:TableAPI'.\n\t\t//    This means that the Id is relative to 'macro:TableAPI'.\n\t\t//    This scenario happens in case of FilterBar and Table in a custom sections in OP of FEV4.\n\n\t\tconst tableAPIId = this?.getId();\n\t\tconst tableAPILocalId = this.data(\"tableAPILocalId\");\n\t\tconst potentialfilterBarId =\n\t\t\ttableAPILocalId && filterBarRefId && tableAPIId && tableAPIId.replace(new RegExp(tableAPILocalId + \"$\"), filterBarRefId); // 3\n\n\t\tconst filterBar =\n\t\t\tCommonUtils.getTargetView(this)?.byId(filterBarRefId) || Core.byId(filterBarRefId) || Core.byId(potentialfilterBarId);\n\n\t\tif (filterBar) {\n\t\t\tif (filterBar.isA<FilterBarAPI>(\"sap.fe.macros.filterBar.FilterBarAPI\")) {\n\t\t\t\ttable.setFilter(`${filterBar.getId()}-content`);\n\t\t\t} else if (filterBar.isA<FilterBar>(\"sap.ui.mdc.FilterBar\")) {\n\t\t\t\ttable.setFilter(filterBar.getId());\n\t\t\t}\n\t\t}\n\t}\n\n\tcheckIfColumnExists(aFilteredColummns: any, columnName: any) {\n\t\treturn aFilteredColummns.some(function (oColumn: any) {\n\t\t\tif (\n\t\t\t\t(oColumn?.columnName === columnName && oColumn?.sColumnNameVisible) ||\n\t\t\t\t(oColumn?.sTextArrangement !== undefined && oColumn?.sTextArrangement === columnName)\n\t\t\t) {\n\t\t\t\treturn columnName;\n\t\t\t}\n\t\t});\n\t}\n\tgetIdentifierColumn(): any {\n\t\tconst oTable = (this as any).getContent();\n\t\tconst headerInfoTitlePath = this.getTableDefinition().headerInfoTitle;\n\t\tconst oMetaModel = oTable && oTable.getModel().getMetaModel(),\n\t\t\tsCurrentEntitySetName = oTable.data(\"metaPath\");\n\t\tconst aTechnicalKeys = oMetaModel.getObject(`${sCurrentEntitySetName}/$Type/$Key`);\n\t\tconst aFilteredTechnicalKeys: string[] = [];\n\n\t\tif (aTechnicalKeys && aTechnicalKeys.length > 0) {\n\t\t\taTechnicalKeys.forEach(function (technicalKey: string) {\n\t\t\t\tif (technicalKey !== \"IsActiveEntity\") {\n\t\t\t\t\taFilteredTechnicalKeys.push(technicalKey);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tconst semanticKeyColumns = this.getTableDefinition().semanticKeys;\n\n\t\tconst aVisibleColumns: any = [];\n\t\tconst aFilteredColummns: any = [];\n\t\tconst aTableColumns = oTable.getColumns();\n\t\taTableColumns.forEach(function (oColumn: any) {\n\t\t\tconst column = oColumn?.getDataProperty();\n\t\t\taVisibleColumns.push(column);\n\t\t});\n\n\t\taVisibleColumns.forEach(function (oColumn: any) {\n\t\t\tconst oTextArrangement = oMetaModel.getObject(`${sCurrentEntitySetName}/$Type/${oColumn}@`);\n\t\t\tconst sTextArrangement = oTextArrangement && oTextArrangement[\"@com.sap.vocabularies.Common.v1.Text\"]?.$Path;\n\t\t\tconst sTextPlacement =\n\t\t\t\toTextArrangement &&\n\t\t\t\toTextArrangement[\"@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement\"]?.$EnumMember;\n\t\t\taFilteredColummns.push({\n\t\t\t\tcolumnName: oColumn,\n\t\t\t\tsTextArrangement: sTextArrangement,\n\t\t\t\tsColumnNameVisible: !(sTextPlacement === \"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly\")\n\t\t\t});\n\t\t});\n\t\tlet column: any;\n\n\t\tif (headerInfoTitlePath !== undefined && this.checkIfColumnExists(aFilteredColummns, headerInfoTitlePath)) {\n\t\t\tcolumn = headerInfoTitlePath;\n\t\t} else if (\n\t\t\tsemanticKeyColumns !== undefined &&\n\t\t\tsemanticKeyColumns.length === 1 &&\n\t\t\tthis.checkIfColumnExists(aFilteredColummns, semanticKeyColumns[0])\n\t\t) {\n\t\t\tcolumn = semanticKeyColumns[0];\n\t\t} else if (\n\t\t\taFilteredTechnicalKeys !== undefined &&\n\t\t\taFilteredTechnicalKeys.length === 1 &&\n\t\t\tthis.checkIfColumnExists(aFilteredColummns, aFilteredTechnicalKeys[0])\n\t\t) {\n\t\t\tcolumn = aFilteredTechnicalKeys[0];\n\t\t}\n\t\treturn column;\n\t}\n\n\tasync setUpEmptyRows(table: Table, createButtonWasPressed: boolean = false) {\n\t\tif (this.tableDefinition.control?.creationMode !== CreationMode.InlineCreationRows) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tthis.tableDefinition.control?.inlineCreationRowsHiddenInEditMode &&\n\t\t\t!table.getBindingContext(\"ui\")?.getProperty(\"createMode\") &&\n\t\t\t!createButtonWasPressed\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tconst waitTableRendered = new Promise<void>((resolve) => {\n\t\t\tif (table.getDomRef()) {\n\t\t\t\tresolve();\n\t\t\t} else {\n\t\t\t\tconst delegate = {\n\t\t\t\t\tonAfterRendering: function () {\n\t\t\t\t\t\ttable.removeEventDelegate(delegate);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\ttable.addEventDelegate(delegate, this);\n\t\t\t}\n\t\t});\n\t\tawait waitTableRendered;\n\n\t\tconst uiModel = table.getModel(\"ui\");\n\t\tif (uiModel.getProperty(\"/isEditablePending\")) {\n\t\t\t// The edit mode is still being computed, so we wait until this computation is done before checking its value\n\t\t\tconst watchBinding = uiModel.bindProperty(\"/isEditablePending\");\n\t\t\tawait new Promise<void>((resolve) => {\n\t\t\t\tconst fnHandler = () => {\n\t\t\t\t\twatchBinding.detachChange(fnHandler);\n\t\t\t\t\twatchBinding.destroy();\n\t\t\t\t\tresolve();\n\t\t\t\t};\n\t\t\t\twatchBinding.attachChange(fnHandler);\n\t\t\t});\n\t\t}\n\t\tconst isInEditMode = uiModel.getProperty(\"/isEditable\");\n\t\tif (!isInEditMode) {\n\t\t\treturn;\n\t\t}\n\t\tconst binding = table.getRowBinding() as ODataListBinding;\n\t\tif (binding.isResolved() && binding.isLengthFinal()) {\n\t\t\tconst contextPath = binding.getContext().getPath();\n\t\t\tconst inactiveContext = binding.getAllCurrentContexts().find(function (context) {\n\t\t\t\treturn context.isInactive() && context.getPath().startsWith(contextPath);\n\t\t\t});\n\t\t\tif (!inactiveContext) {\n\t\t\t\tawait this._createEmptyRow(binding, table);\n\t\t\t}\n\t\t}\n\t}\n\tasync _createEmptyRow(oBinding: ODataListBinding, oTable: Table) {\n\t\tconst iInlineCreationRowCount = this.tableDefinition.control?.inlineCreationRowCount || 2;\n\t\tconst aData = [];\n\t\tfor (let i = 0; i < iInlineCreationRowCount; i += 1) {\n\t\t\taData.push({});\n\t\t}\n\t\tconst bAtEnd = oTable.data(\"tableType\") !== \"ResponsiveTable\";\n\t\tconst bInactive = true;\n\t\tconst oView = CommonUtils.getTargetView(oTable);\n\t\tconst oController = oView.getController() as PageController;\n\t\tconst oInternalEditFlow = oController._editFlow;\n\t\tif (!this.creatingEmptyRows) {\n\t\t\tthis.creatingEmptyRows = true;\n\t\t\ttry {\n\t\t\t\tconst aContexts = await oInternalEditFlow.createMultipleDocuments(\n\t\t\t\t\toBinding,\n\t\t\t\t\taData,\n\t\t\t\t\tbAtEnd,\n\t\t\t\t\tfalse,\n\t\t\t\t\toController.editFlow.onBeforeCreate,\n\t\t\t\t\tbInactive\n\t\t\t\t);\n\t\t\t\taContexts?.forEach(function (oContext: any) {\n\t\t\t\t\toContext.created().catch(function (oError: any) {\n\t\t\t\t\t\tif (!oError.canceled) {\n\t\t\t\t\t\t\tthrow oError;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\tLog.error(e as any);\n\t\t\t} finally {\n\t\t\t\tthis.creatingEmptyRows = false;\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport default TableAPI;\n"],"mappings":"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"}},{"offset":{"line":24734,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","CommonUtils","NavigationReason","ManifestSettings","ClassSupport","PasteHelper","DelegateUtil","FilterUtils","ResourceModel","TableUtils","MessageBox","Core","Message","MacroAPI","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_dec18","_dec19","_dec20","_dec21","_dec22","_dec23","_dec24","_dec25","_dec26","_dec27","_dec28","_dec29","_dec30","_dec31","_dec32","_dec33","_dec34","_dec35","_dec36","_dec37","_dec38","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_descriptor15","_descriptor16","_descriptor17","_descriptor18","_descriptor19","_descriptor20","_descriptor21","_descriptor22","_descriptor23","_descriptor24","_descriptor25","_descriptor26","_descriptor27","_descriptor28","_descriptor29","xmlEventHandler","property","event","defineUI5Class","aggregation","CreationMode","_initializerDefineProperty","target","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","TableAPI","type","expectedTypes","expectedAnnotations","defaultValue","_MacroAPI","mSettings","_this","_len","arguments","length","others","Array","_key","this","updateFilterBar","content","attachEvent","onTableSelectionChange","_proto","getSelectedContexts","addMessage","parameters","msgManager","_getMessageManager","oTable","oMessage","getRowBinding","getResolvedPath","message","processor","getModel","description","persistent","addMessages","getId","removeMessage","id","messages","getMessageModel","getData","result","find","e","removeMessages","getCore","getMessageManager","_getRowBinding","getContent","getCounts","getListBindingForCount","getBindingContext","batchGroupId","getProperty","data","additionalFilters","getHiddenFilters","then","iValue","getCountFormatted","catch","onTableRowPress","oEvent","oController","oContext","mParameters","isInactive","isTransient","getTableDefinition","enableAnalytics","isA","navigationParameters","assign","reason","RowPress","_routing","navigateForwardToContext","onInternalDataReceived","getParameter","getController","messageHandler","showMessageDialog","onInternalDataRequested","setProperty","fireEvent","getParameters","onPaste","tableDefinition","control","enablePaste","aRawPastedData","getSource","getEnablePaste","pasteData","oResourceModel","getLibraryResourceBundle","error","getText","title","onBeforeExport","exportEvent","_exportEvent$getParam","isSplitMode","splitCells","tableController","exportColumns","workbook","columns","tableColumns","updateExportSettings","dataStateIndicatorFilter","_oTable$getBindingCon","sTableContextBindingPath","getPath","sTableRowBinding","getTarget","onDataStateChange","oDataStateIndicator","aFilteredMessages","oInternalModel","index","exportColumn","label","getLocalizedText","falseValue","trueValue","targetValueColumn","column","_columnWithTargetValueToBeAdded","columnToBeAdded","isArray","template","exportDataPointTargetValue","splice","columnExport","_column$propertyInfos","columnNeedsToBeAdded","propertyInfos","relativePath","includes","name","resumeBinding","bRequestIfNotInitialized","getDataInitialized","_getContent","rebind","refreshNotApplicableFields","oFilterControl","getNotApplicableFilters","suspendBinding","invalidateContent","onMassEditButtonPressed","pageController","massEdit","openMassEditDialog","warning","table","filterBarRefId","getFilterBar","getFilter","_setFilterBar","_CommonUtils$getTarge","tableAPIId","tableAPILocalId","potentialfilterBarId","replace","RegExp","filterBar","getTargetView","byId","setFilter","checkIfColumnExists","aFilteredColummns","columnName","some","oColumn","sColumnNameVisible","sTextArrangement","getIdentifierColumn","headerInfoTitlePath","headerInfoTitle","oMetaModel","getMetaModel","sCurrentEntitySetName","aTechnicalKeys","getObject","aFilteredTechnicalKeys","technicalKey","push","semanticKeyColumns","semanticKeys","aVisibleColumns","aTableColumns","getColumns","getDataProperty","_oTextArrangement$Co","_oTextArrangement$Co2","oTextArrangement","$Path","sTextPlacement","$EnumMember","setUpEmptyRows","async","_this$tableDefinition","_this$tableDefinition2","_table$getBindingCont","createButtonWasPressed","creationMode","InlineCreationRows","inlineCreationRowsHiddenInEditMode","waitTableRendered","Promise","resolve","getDomRef","delegate","onAfterRendering","removeEventDelegate","addEventDelegate","uiModel","watchBinding","bindProperty","fnHandler","detachChange","destroy","attachChange","isInEditMode","binding","isResolved","isLengthFinal","contextPath","getContext","inactiveContext","getAllCurrentContexts","startsWith","_createEmptyRow","oBinding","_this$tableDefinition3","iInlineCreationRowCount","inlineCreationRowCount","aData","i","bAtEnd","bInactive","oView","oInternalEditFlow","_editFlow","creatingEmptyRows","aContexts","createMultipleDocuments","editFlow","onBeforeCreate","created","oError","canceled","getOwnPropertyDescriptor"],"sources":["TableAPI-dbg.js"],"mappings":"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","sourceRoot":"table"}},{"offset":{"line":24739,"column":0},"map":{"version":3,"names":["ButtonType","mLibrary","TableFullScreenUtil","onFullScreenToggle","oFullScreenButton","oTable","getParent","$oTableContent","_enteringFullScreen","fnOnFullScreenToggle","bind","oMessageBundle","Core","getLibraryResourceBundle","setIcon","setTooltip","getText","$","css","_oHTML","HTML","preferDOM","afterRendering","$oHTMLContent","oChildren","children","remove","append","getDomRef","_oFullScreenDialog","oComponent","Component","getOwnerComponentFor","runAsOwner","Dialog","showHeader","stretch","beforeClose","_$placeHolder","endButton","Button","text","type","Transparent","press","close","content","data","getRootControl","addDependent","attachAfterOpen","focus","_oGrowingDelegate","onAfterRendering","_oOldParent","oParent","find","attachAfterClose","oAppComponent","getRootViewController","getView","getController","_scrollTablesToLastNavigatedItems","addStyleClass","closest","length","jQuery","document","createElement","before","setContent","_oTable","_oList","getGrowingScrollToLoad","open","replaceWith"],"sourceRoot":"table","sources":["TableFullScreenUtil.ts"],"sourcesContent":["import type AppComponent from \"sap/fe/core/AppComponent\";\nimport Button from \"sap/m/Button\";\nimport Dialog from \"sap/m/Dialog\";\nimport mLibrary from \"sap/m/library\";\nimport Component from \"sap/ui/core/Component\";\nimport Core from \"sap/ui/core/Core\";\nimport HTML from \"sap/ui/core/HTML\";\nimport jQuery from \"sap/ui/thirdparty/jquery\";\n\nconst ButtonType = mLibrary.ButtonType;\nconst TableFullScreenUtil = {\n\tonFullScreenToggle: function (oFullScreenButton: any) {\n\t\tlet oTable = oFullScreenButton.getParent().getParent().getParent().getParent();\n\t\tlet $oTableContent;\n\t\toFullScreenButton._enteringFullScreen = !oFullScreenButton._enteringFullScreen;\n\t\tconst fnOnFullScreenToggle = this.onFullScreenToggle.bind(this, oFullScreenButton);\n\t\tconst oMessageBundle = Core.getLibraryResourceBundle(\"sap.fe.macros\");\n\n\t\tif (oFullScreenButton._enteringFullScreen === true) {\n\t\t\t// change the button icon and text\n\t\t\toFullScreenButton.setIcon(\"sap-icon://exit-full-screen\");\n\t\t\toFullScreenButton.setTooltip(oMessageBundle.getText(\"M_COMMON_TABLE_FULLSCREEN_MINIMIZE\"));\n\t\t\t// if the table is a responsive table, switch to load on scroll\n\t\t\t// get the dom reference of the control\n\t\t\t$oTableContent = oTable.$();\n\t\t\t// add 100% height to the FlexBox container for the Control to rendering in full screen\n\t\t\t$oTableContent.css(\"height\", \"100%\");\n\t\t\t// Create an HTML element to add the controls DOM content in the FullScreen dialog\n\t\t\tif (!oTable._oHTML) {\n\t\t\t\toTable._oHTML = new HTML({\n\t\t\t\t\tpreferDOM: false,\n\t\t\t\t\tafterRendering: function () {\n\t\t\t\t\t\tif (oTable && oTable._oHTML) {\n\t\t\t\t\t\t\tconst $oHTMLContent = oTable._oHTML.$();\n\t\t\t\t\t\t\tlet oChildren;\n\t\t\t\t\t\t\t// Get the current HTML Dom content\n\t\t\t\t\t\t\tif ($oHTMLContent) {\n\t\t\t\t\t\t\t\t// remove any old child content\n\t\t\t\t\t\t\t\toChildren = $oHTMLContent.children();\n\t\t\t\t\t\t\t\toChildren.remove();\n\t\t\t\t\t\t\t\t// stretch the content to occupy the whole space\n\t\t\t\t\t\t\t\t$oHTMLContent.css(\"height\", \"100%\");\n\t\t\t\t\t\t\t\t// append the control dom to HTML content\n\t\t\t\t\t\t\t\t$oHTMLContent.append(oTable.getDomRef());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Create and set a fullscreen Dialog (without headers) on the registered control instance\n\t\t\tif (!oTable._oFullScreenDialog) {\n\t\t\t\tconst oComponent = Component.getOwnerComponentFor(oTable)!;\n\t\t\t\toComponent.runAsOwner(function () {\n\t\t\t\t\toTable._oFullScreenDialog = new Dialog({\n\t\t\t\t\t\tshowHeader: false,\n\t\t\t\t\t\tstretch: true,\n\t\t\t\t\t\tbeforeClose: function () {\n\t\t\t\t\t\t\t// In case fullscreen dialog was closed due to navigation to another page/view/app, \"Esc\" click, etc. The dialog close\n\t\t\t\t\t\t\t// would be triggered externally and we need to clean up and replace the DOM content back to the original location\n\t\t\t\t\t\t\tif (oTable && oTable._$placeHolder) {\n\t\t\t\t\t\t\t\tfnOnFullScreenToggle();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tendButton: new Button({\n\t\t\t\t\t\t\ttext: oMessageBundle.getText(\"M_COMMON_TABLE_FULLSCREEN_CLOSE\"),\n\t\t\t\t\t\t\ttype: ButtonType.Transparent,\n\t\t\t\t\t\t\tpress: function () {\n\t\t\t\t\t\t\t\t// Just close the dialog here, all the needed processing is triggered\n\t\t\t\t\t\t\t\t// in beforeClose.\n\t\t\t\t\t\t\t\t// This ensures, that we only do it once event if the user presses the\n\t\t\t\t\t\t\t\t// ESC key and the Close button simultaneously\n\t\t\t\t\t\t\t\toTable._oFullScreenDialog.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tcontent: [oTable._oHTML]\n\t\t\t\t\t});\n\t\t\t\t\toTable._oFullScreenDialog.data(\"FullScreenDialog\", true);\n\t\t\t\t\t(oComponent as AppComponent).getRootControl().addDependent(oTable._oFullScreenDialog);\n\t\t\t\t});\n\n\t\t\t\t// Set focus back on full-screen button of control\n\t\t\t\tif (oFullScreenButton) {\n\t\t\t\t\toTable._oFullScreenDialog.attachAfterOpen(function () {\n\t\t\t\t\t\toFullScreenButton.focus();\n\t\t\t\t\t\t// Hack to update scroll of sap.m.List/ResponsiveTable - 2/2\n\t\t\t\t\t\tif (oTable._oGrowingDelegate && oTable._oGrowingDelegate.onAfterRendering) {\n\t\t\t\t\t\t\t// Temporarily change the parent of control to Fullscreen Dialog\n\t\t\t\t\t\t\toTable._oOldParent = oTable.oParent;\n\t\t\t\t\t\t\toTable.oParent = oTable._oFullScreenDialog;\n\t\t\t\t\t\t\t// update delegate to enable scroll with new parent\n\t\t\t\t\t\t\toTable._oGrowingDelegate.onAfterRendering();\n\t\t\t\t\t\t\t// restore parent\n\t\t\t\t\t\t\toTable.oParent = oTable._oOldParent;\n\t\t\t\t\t\t\t// delete unnecessary props\n\t\t\t\t\t\t\tdelete oTable._oOldParent;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Add 100% height to scroll container\n\t\t\t\t\t\toTable._oFullScreenDialog.$().find(\".sapMDialogScroll\").css(\"height\", \"100%\");\n\t\t\t\t\t});\n\t\t\t\t\toTable._oFullScreenDialog.attachAfterClose(function () {\n\t\t\t\t\t\tconst oAppComponent = Component.getOwnerComponentFor(oComponent) as AppComponent;\n\t\t\t\t\t\toFullScreenButton.focus();\n\t\t\t\t\t\t// trigger the automatic scroll to the latest navigated row :\n\t\t\t\t\t\t(oAppComponent.getRootViewController().getView().getController() as any)._scrollTablesToLastNavigatedItems();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t// add the style class from control to the dialog\n\t\t\t\toTable._oFullScreenDialog.addStyleClass($oTableContent.closest(\".sapUiSizeCompact\").length ? \"sapUiSizeCompact\" : \"\");\n\t\t\t\t// add style class to make the scroll container height as 100% (required to stretch UI to 100% e.g. for SmartChart)\n\t\t\t\toTable._oFullScreenDialog.addStyleClass(\"sapUiCompSmartFullScreenDialog\");\n\t\t\t}\n\t\t\t// create a dummy div node (place holder)\n\t\t\toTable._$placeHolder = jQuery(document.createElement(\"div\"));\n\t\t\t// Set the place holder before the current content\n\t\t\t$oTableContent.before(oTable._$placeHolder);\n\t\t\t// Add a dummy div as content of the HTML control\n\t\t\toTable._oHTML.setContent(\"<div/>\");\n\t\t\t// Hack to update scroll of sap.m.List/ResponsiveTable - 1/2\n\t\t\tif (!oTable._oGrowingDelegate) {\n\t\t\t\toTable._oGrowingDelegate = oTable._oTable || oTable._oList;\n\t\t\t\tif (\n\t\t\t\t\toTable._oGrowingDelegate &&\n\t\t\t\t\toTable._oGrowingDelegate.getGrowingScrollToLoad &&\n\t\t\t\t\toTable._oGrowingDelegate.getGrowingScrollToLoad()\n\t\t\t\t) {\n\t\t\t\t\toTable._oGrowingDelegate = oTable._oGrowingDelegate._oGrowingDelegate;\n\t\t\t\t} else {\n\t\t\t\t\toTable._oGrowingDelegate = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// open the full screen Dialog\n\t\t\toTable._oFullScreenDialog.open();\n\t\t} else {\n\t\t\t// change the button icon\n\t\t\toFullScreenButton.setIcon(\"sap-icon://full-screen\");\n\t\t\toFullScreenButton.setTooltip(oMessageBundle.getText(\"M_COMMON_TABLE_FULLSCREEN_MAXIMIZE\"));\n\t\t\t// Get reference to table\n\t\t\toTable = oFullScreenButton.getParent().getParent().getParent().getParent();\n\n\t\t\t// get the HTML controls content --> as it should contain the control's current DOM ref\n\t\t\t$oTableContent = oTable._oHTML.$();\n\t\t\t// Replace the place holder with the Controls DOM ref (child of HTML)\n\t\t\toTable._$placeHolder.replaceWith($oTableContent.children());\n\n\t\t\toTable._$placeHolder = null;\n\t\t\t$oTableContent = null;\n\n\t\t\t// close the full screen Dialog\n\t\t\tif (oTable._oFullScreenDialog) {\n\t\t\t\toTable._oFullScreenDialog.close();\n\t\t\t}\n\t\t}\n\t}\n};\n\nexport default TableFullScreenUtil;\n"],"mappings":"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"}},{"offset":{"line":24888,"column":0},"map":{"version":3,"names":["sap","ui","define","Button","Dialog","mLibrary","Component","Core","HTML","jQuery","ButtonType","TableFullScreenUtil","onFullScreenToggle","oFullScreenButton","oTable","getParent","$oTableContent","_enteringFullScreen","fnOnFullScreenToggle","this","bind","oMessageBundle","getLibraryResourceBundle","setIcon","setTooltip","getText","$","css","_oHTML","preferDOM","afterRendering","$oHTMLContent","oChildren","children","remove","append","getDomRef","_oFullScreenDialog","oComponent","getOwnerComponentFor","runAsOwner","showHeader","stretch","beforeClose","_$placeHolder","endButton","text","type","Transparent","press","close","content","data","getRootControl","addDependent","attachAfterOpen","focus","_oGrowingDelegate","onAfterRendering","_oOldParent","oParent","find","attachAfterClose","oAppComponent","getRootViewController","getView","getController","_scrollTablesToLastNavigatedItems","addStyleClass","closest","length","document","createElement","before","setContent","_oTable","_oList","getGrowingScrollToLoad","open","replaceWith"],"sources":["TableFullScreenUtil-dbg.js"],"mappings":"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","sourceRoot":"table"}},{"offset":{"line":24893,"column":0},"map":{"version":3,"names":["CreationMode","FELibrary","TableHelper","_isStaticAction","oActionContext","sActionName","oAction","Array","isArray","sEntityType","_getActionOverloadEntityType","find","action","$IsBound","$Parameter","$Type","$isCollection","indexOf","aParts","split","length","replaceAll","undefined","_isActionOverloadOnDifferentType","sAnnotationTargetEntityType","getMessageForDraftValidation","oThis","oCollectionAnnotations","collection","getObject","sMessagePath","$Path","tableDefinition","getProperty","TemplateType","ObjectPage","Object","keys","sKey","oAnnotation","SourceProperties","SourceEntities","TargetProperties","getFieldsRequestedByPresentationVariant","oPresentationVariant","RequestAtLeast","map","oRequested","value","getNavigationAvailableFieldsFromLineItem","aLineItemContext","aSelectedFieldsArray","forEach","oRecord","Inline","Determining","NavigationAvailable","push","getNavigationAvailableMap","aLineItemCollection","oIBNNavigationAvailableMap","SemanticObject","Action","RequiresContext","JSON","stringify","getUiLineItem","oPresentationContext","getUiControl","create$Select","collectionContext","selectedFields","lineItemContext","metaPath","targetCollectionPath","CommonHelper","getTargetCollection","pushField","field","includes","pushFieldList","fields","columns","propertiesFromCustomColumns","getPropertiesFromCustomColumns","getPath","presentationAnnotation","getInvolvedDataModelObjects","targetObject","operationAvailableProperties","applicableProperties","_filterNonApplicableProperties","semanticKeys","semanticKey","$PropertyPath","Deletable","Updatable","join","getColumnWidth","column","dataField","dataFieldActionText","dataModelObjectPath","useRemUnit","microChartTitle","width","enableAutoColumnWidth","getColumnWidthForImage","getColumnWidthForDataField","compileExpression","formatResult","pathInModel","name","TableFormatter","annotations","Value","$target","dataType","type","getEditMode","EditMode","Display","hasTextAnnotation","hasText","Core","MediaType","isImageURL","oMicroChartTitle","Target","$AnnotationPath","nTmpTextWidth","TableSizeHelper","getButtonWidth","Label","toString","nTmpVisualizationWidth","getWidthForDataFieldForAnnotation","propertyWidth","getColumnWidthForChart","columnLabelWidth","chartSize","getChartSize","getShowOnlyChart","Title","Description","tmpText","titleSize","tmpWidth","getMarginClass","oCollection","oDataField","sVisualization","sFieldGroupHiddenExpressions","sBindingExpression","sClass","sHiddenExpressionResult","substring","lastIndexOf","getVBoxVisibility","fieldGroupHiddenExpressions","fieldGroup","allStatic","hiddenPaths","hiddenAnnotationValue","hasAnyPathExpressions","constant","hasAllHiddenStaticExpressions","ifElse","formatHiddenFilters","oHiddenFilter","ex","getElementStableId","tableId","elementId","dataFieldPart","path","generate","getColumnStableId","id","getFieldGroupLabelStableId","aPropertyPaths","oCollectionContext","filter","sPropertyPath","properties","property","getRowsBindingInfo","dataModelPath","contextPath","getContextRelativeTargetObjectPath","getTargetObjectPath","oRowBinding","ui5object","suspended","addSingleQuotes","parameters","$count","events","sSelect","$select","$$getKeepAliveContext","$$groupId","$$updateGroupId","$$ownRequest","$$patchWithoutSideEffects","patchSent","dataReceived","dataRequested","createActivate","onContextChange","change","objectToString","validateCreationRowFields","oFieldValidityObject","every","key","pressEventDataFieldForActionButton","sEntitySetName","sOperationAvailableMap","bIsNavigable","bEnableAutoScroll","sDefaultValuesExtensionFunction","bStaticAction","oParams","contexts","entitySetName","applicableContext","notApplicableContext","isNavigable","enableAutoScroll","defaultValuesExtensionFunction","ActionHelper","getPressEventDataFieldForActionButton","isDataFieldForActionEnabled","oRequiresContext","bIsDataFieldForIBN","vActionEnabled","oTableDefinition","isAnalyticalTable","enableAnalytics","oOperationAvailableMap","parse","operationAvailableMap","hasOwnProperty","sEntitySet","oMetaModel","getModel","Log","warning","substr","sDataFieldForActionEnabledExpression","sNumberOfSelectedContexts","sAction","getNumberOfContextsExpression","pressEventForCreateButton","bCmdExecutionFlag","sCreationMode","creationMode","sMdcTable","sRowBinding","External","outbound","createOutbound","CreationRow","creationRow","createAtEnd","NewPage","createNewAction","newAction","InlineCreationRows","generateFunction","getIBNData","outboundDetail","createOutboundDetail","oIBNData","semanticObject","_getExpressionForDeleteButton","fullContextPath","expression","getExpressionFromAnnotation","isConstant","isPathInModelExpression","valueExpression","formatValueRecursively","pressEventForDeleteButton","oHeaderInfo","fullcontextPath","sDeletableContexts","sTitleExpression","sDescriptionExpression","numberOfSelectedContexts","unSavedContexts","lockedContexts","createModeContexts","draftsWithDeletableActive","draftsWithNonDeletableActive","controlId","title","description","selectedContexts","setHeaderLabelVisibility","datafield","dataFieldCollection","some","oDC","getTextOnActionField","oContext","context","sPathDataFields","aMultipleLabels","i","reduce","a","b","_getResponsiveTableColumnSettings","oColumn","tableType","settings","microChartSize","showMicroChartLabel","getDelegate","table","isALP","entityName","oDelegate","control","Error","payload","collectionName","hierarchyQualifier","initialExpansionLevel","annotation","setIBNEnablement","oInternalModelContext","oNavigationAvailableMap","aSelectedContexts","setProperty","bEnabled","aApplicable","aNotApplicable","sProperty","oSelectedContext","requiresIContext"],"sourceRoot":"table","sources":["TableHelper.ts"],"sourcesContent":["import { CommonAnnotationTypes } from \"@sap-ux/vocabularies-types/vocabularies/Common\";\nimport {\n\tDataField,\n\tDataFieldAbstractTypes,\n\tDataFieldForAction,\n\tDataFieldForAnnotation,\n\tDataFieldForIntentBasedNavigation,\n\tFieldGroup,\n\tPresentationVariantType,\n\tUIAnnotationTerms,\n\tUIAnnotationTypes\n} from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport { getUiControl } from \"sap/fe/core/converters/controls/Common/DataVisualization\";\nimport { AnnotationTableColumn, TableColumn, TableVisualization } from \"sap/fe/core/converters/controls/Common/Table\";\nimport { TemplateType } from \"sap/fe/core/converters/ManifestSettings\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport TableFormatter from \"sap/fe/core/formatters/TableFormatter\";\nimport {\n\tCompiledBindingToolkitExpression,\n\tcompileExpression,\n\tconstant,\n\tformatResult,\n\tgetExpressionFromAnnotation,\n\tifElse,\n\tisConstant,\n\tisPathInModelExpression,\n\tpathInModel\n} from \"sap/fe/core/helpers/BindingToolkit\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport FELibrary from \"sap/fe/core/library\";\nimport { DataModelObjectPath, getContextRelativeTargetObjectPath, getTargetObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { hasText, isImageURL } from \"sap/fe/core/templating/PropertyHelper\";\nimport { getEditMode } from \"sap/fe/core/templating/UIFormatters\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport type { tableDelegateModel } from \"sap/fe/macros/DelegateUtil\";\nimport { formatValueRecursively } from \"sap/fe/macros/field/FieldTemplating\";\nimport ActionHelper from \"sap/fe/macros/internal/helpers/ActionHelper\";\nimport TableSizeHelper from \"sap/fe/macros/table/TableSizeHelper\";\nimport EditMode from \"sap/ui/mdc/enum/EditMode\";\nimport type Context from \"sap/ui/model/Context\";\n\ntype Hidden = { \"@com.sap.vocabularies.UI.v1.Hidden\": boolean | { $Path?: string } };\n\nconst CreationMode = FELibrary.CreationMode;\n/**\n * Helper class used by the control library for OData-specific handling (OData V4)\n *\n * @private\n * @experimental This module is only for internal/experimental use!\n */\nconst TableHelper = {\n\t/**\n\t * Check if a given action is static.\n\t *\n\t * @param oActionContext The instance of the action\n\t * @param sActionName The name of the action\n\t * @returns Returns 'true' if action is static, else 'false'\n\t * @private\n\t * @ui5-restricted\n\t */\n\t_isStaticAction: function (oActionContext: object, sActionName: string | String) {\n\t\tlet oAction;\n\t\tif (oActionContext) {\n\t\t\tif (Array.isArray(oActionContext)) {\n\t\t\t\tconst sEntityType = this._getActionOverloadEntityType(sActionName);\n\t\t\t\tif (sEntityType) {\n\t\t\t\t\toAction = oActionContext.find(function (action: any) {\n\t\t\t\t\t\treturn action.$IsBound && action.$Parameter[0].$Type === sEntityType;\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// if this is just one - OK we take it. If it's more it's actually a wrong usage by the app\n\t\t\t\t\t// as we used the first one all the time we keep it as it is\n\t\t\t\t\toAction = oActionContext[0];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toAction = oActionContext;\n\t\t\t}\n\t\t}\n\n\t\treturn !!oAction && oAction.$IsBound && oAction.$Parameter[0].$isCollection;\n\t},\n\n\t/**\n\t * Get the entity type of an action overload.\n\t *\n\t * @param sActionName The name of the action.\n\t * @returns The entity type used in the action overload.\n\t * @private\n\t */\n\t_getActionOverloadEntityType: function (sActionName: any) {\n\t\tif (sActionName && sActionName.indexOf(\"(\") > -1) {\n\t\t\tconst aParts = sActionName.split(\"(\");\n\t\t\treturn aParts[aParts.length - 1].replaceAll(\")\", \"\");\n\t\t}\n\t\treturn undefined;\n\t},\n\n\t/**\n\t * Checks whether the action is overloaded on a different entity type.\n\t *\n\t * @param sActionName The name of the action.\n\t * @param sAnnotationTargetEntityType The entity type of the annotation target.\n\t * @returns Returns 'true' if the action is overloaded with a different entity type, else 'false'.\n\t * @private\n\t */\n\t_isActionOverloadOnDifferentType: function (sActionName: any, sAnnotationTargetEntityType: any) {\n\t\tconst sEntityType = this._getActionOverloadEntityType(sActionName);\n\t\treturn !!sEntityType && sAnnotationTargetEntityType !== sEntityType;\n\t},\n\n\tgetMessageForDraftValidation: function (oThis: any): string {\n\t\tconst oCollectionAnnotations = oThis.collection.getObject(\"./@\");\n\t\tconst sMessagePath = oCollectionAnnotations[\"@com.sap.vocabularies.Common.v1.Messages\"]?.$Path;\n\t\tif (\n\t\t\tsMessagePath &&\n\t\t\toThis.tableDefinition?.getProperty(\"/template\") === TemplateType.ObjectPage &&\n\t\t\t!!Object.keys(oCollectionAnnotations).find((sKey) => {\n\t\t\t\tconst oAnnotation = oCollectionAnnotations[sKey];\n\t\t\t\treturn (\n\t\t\t\t\toAnnotation &&\n\t\t\t\t\toAnnotation.$Type === CommonAnnotationTypes.SideEffectsType &&\n\t\t\t\t\t!oAnnotation.SourceProperties &&\n\t\t\t\t\t!oAnnotation.SourceEntities &&\n\t\t\t\t\toAnnotation.TargetProperties?.indexOf(sMessagePath) > -1\n\t\t\t\t);\n\t\t\t})\n\t\t) {\n\t\t\treturn sMessagePath;\n\t\t}\n\t\treturn \"\";\n\t},\n\n\t/**\n\t * Returns an array of the fields listed by the property RequestAtLeast in the PresentationVariant .\n\t *\n\t * @param oPresentationVariant The annotation related to com.sap.vocabularies.UI.v1.PresentationVariant.\n\t * @returns The fields.\n\t * @private\n\t * @ui5-restricted\n\t */\n\tgetFieldsRequestedByPresentationVariant: function (oPresentationVariant: PresentationVariantType): string[] {\n\t\treturn oPresentationVariant.RequestAtLeast?.map((oRequested) => oRequested.value) || [];\n\t},\n\tgetNavigationAvailableFieldsFromLineItem: function (aLineItemContext: Context): string[] {\n\t\tconst aSelectedFieldsArray: string[] = [];\n\t\t((aLineItemContext.getObject() as Array<any>) || []).forEach(function (oRecord: any) {\n\t\t\tif (\n\t\t\t\toRecord.$Type === UIAnnotationTypes.DataFieldForIntentBasedNavigation &&\n\t\t\t\t!oRecord.Inline &&\n\t\t\t\t!oRecord.Determining &&\n\t\t\t\toRecord.NavigationAvailable?.$Path\n\t\t\t) {\n\t\t\t\taSelectedFieldsArray.push(oRecord.NavigationAvailable.$Path);\n\t\t\t}\n\t\t});\n\t\treturn aSelectedFieldsArray;\n\t},\n\n\tgetNavigationAvailableMap: function (aLineItemCollection: any) {\n\t\tconst oIBNNavigationAvailableMap: any = {};\n\t\taLineItemCollection.forEach(function (oRecord: any) {\n\t\t\tconst sKey = `${oRecord.SemanticObject}-${oRecord.Action}`;\n\t\t\tif (oRecord.$Type === UIAnnotationTypes.DataFieldForIntentBasedNavigation && !oRecord.Inline && oRecord.RequiresContext) {\n\t\t\t\tif (oRecord.NavigationAvailable !== undefined) {\n\t\t\t\t\toIBNNavigationAvailableMap[sKey] = oRecord.NavigationAvailable.$Path\n\t\t\t\t\t\t? oRecord.NavigationAvailable.$Path\n\t\t\t\t\t\t: oRecord.NavigationAvailable;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn JSON.stringify(oIBNNavigationAvailableMap);\n\t},\n\n\t/**\n\t * Return the context of the UI Line Item.\n\t *\n\t * @param oPresentationContext The context of the presentation (Presentation variant or UI.LineItem)\n\t * @returns The context of the UI Line Item\n\t */\n\tgetUiLineItem: function (oPresentationContext: Context) {\n\t\treturn getUiControl(oPresentationContext, \"@com.sap.vocabularies.UI.v1.LineItem\");\n\t},\n\n\t/**\n\t * Creates and returns a select query with the selected fields from the parameters that were passed.\n\t *\n\t * @param oThis The instance of the inner model of the table building block\n\t * @returns The 'select' query that has the selected fields from the parameters that were passed\n\t */\n\tcreate$Select: function (oThis: any) {\n\t\tconst collectionContext = oThis.collection;\n\t\tconst selectedFields: string[] = [];\n\t\tconst lineItemContext = TableHelper.getUiLineItem(oThis.metaPath);\n\t\tconst targetCollectionPath = CommonHelper.getTargetCollection(collectionContext);\n\n\t\tfunction pushField(field: string) {\n\t\t\tif (field && !selectedFields.includes(field) && field.indexOf(\"/\") !== 0) {\n\t\t\t\t// Do not add singleton property (with absolute path) to $select\n\t\t\t\tselectedFields.push(field);\n\t\t\t}\n\t\t}\n\n\t\tfunction pushFieldList(fields: string[]) {\n\t\t\tif (fields?.length) {\n\t\t\t\tfields.forEach(pushField);\n\t\t\t}\n\t\t}\n\t\tconst columns = oThis.tableDefinition.getObject(\"columns\");\n\t\tconst propertiesFromCustomColumns = this.getPropertiesFromCustomColumns(columns);\n\t\tif (propertiesFromCustomColumns?.length) {\n\t\t\tpushFieldList(propertiesFromCustomColumns);\n\t\t}\n\n\t\tif (lineItemContext.getPath().indexOf(\"@com.sap.vocabularies.UI.v1.LineItem\") > -1) {\n\t\t\t// Don't process EntityType without LineItem\n\t\t\tconst presentationAnnotation = getInvolvedDataModelObjects(oThis.metaPath).targetObject;\n\t\t\tconst operationAvailableProperties = (oThis.tableDefinition.getObject(\"operationAvailableProperties\") || \"\").split(\",\");\n\t\t\tconst applicableProperties = TableHelper._filterNonApplicableProperties(operationAvailableProperties, collectionContext);\n\t\t\tconst semanticKeys: string[] = (\n\t\t\t\tcollectionContext.getObject(`${targetCollectionPath}/@com.sap.vocabularies.Common.v1.SemanticKey`) || []\n\t\t\t).map((semanticKey: any) => semanticKey.$PropertyPath as string);\n\n\t\t\tif (presentationAnnotation?.$Type === UIAnnotationTypes.PresentationVariantType) {\n\t\t\t\tpushFieldList(TableHelper.getFieldsRequestedByPresentationVariant(presentationAnnotation));\n\t\t\t}\n\n\t\t\tpushFieldList(TableHelper.getNavigationAvailableFieldsFromLineItem(lineItemContext));\n\t\t\tpushFieldList(applicableProperties);\n\t\t\tpushFieldList(semanticKeys);\n\t\t\tpushField(TableHelper.getMessageForDraftValidation(oThis));\n\t\t\tpushField(\n\t\t\t\tcollectionContext.getObject(`${targetCollectionPath}@Org.OData.Capabilities.V1.DeleteRestrictions`)?.Deletable?.$Path\n\t\t\t);\n\t\t\tpushField(\n\t\t\t\tcollectionContext.getObject(`${targetCollectionPath}@Org.OData.Capabilities.V1.UpdateRestrictions`)?.Updatable?.$Path\n\t\t\t);\n\t\t}\n\t\treturn selectedFields.join(\",\");\n\t},\n\n\t/**\n\t * Method to get column's width if defined from manifest or from customization via annotations.\n\t *\n\t * @function\n\t * @name getColumnWidth\n\t * @param oThis The instance of the inner model of the table building block\n\t * @param column Defined width of the column, which is taken with priority if not null, undefined or empty\n\t * @param dataField DataField definition object\n\t * @param dataFieldActionText DataField's text from button\n\t * @param dataModelObjectPath The object path of the data model\n\t * @param useRemUnit Indicates if the rem unit must be concatenated with the column width result\n\t * @param microChartTitle The object containing title and description of the MicroChart\n\t * @returns - Column width if defined, otherwise width is set to auto\n\t */\n\tgetColumnWidth: function (\n\t\toThis: tableDelegateModel,\n\t\tcolumn: AnnotationTableColumn,\n\t\tdataField: DataField | DataFieldForAnnotation | DataFieldForAction | DataFieldForIntentBasedNavigation,\n\t\tdataFieldActionText: string,\n\t\tdataModelObjectPath: DataModelObjectPath,\n\t\tuseRemUnit: boolean,\n\t\tmicroChartTitle?: any\n\t) {\n\t\tif (column.width) {\n\t\t\treturn column.width;\n\t\t}\n\t\tif (oThis.enableAutoColumnWidth === true) {\n\t\t\tlet width;\n\t\t\twidth =\n\t\t\t\tthis.getColumnWidthForImage(dataModelObjectPath) ||\n\t\t\t\tthis.getColumnWidthForDataField(oThis, column, dataField, dataFieldActionText, dataModelObjectPath, microChartTitle) ||\n\t\t\t\tundefined;\n\t\t\tif (width) {\n\t\t\t\treturn useRemUnit ? `${width}rem` : width;\n\t\t\t}\n\t\t\twidth = compileExpression(\n\t\t\t\tformatResult(\n\t\t\t\t\t[pathInModel(\"/editMode\", \"ui\"), pathInModel(\"tablePropertiesAvailable\", \"internal\"), column.name, useRemUnit],\n\t\t\t\t\tTableFormatter.getColumnWidth\n\t\t\t\t)\n\t\t\t);\n\t\t\treturn width;\n\t\t}\n\t\treturn undefined;\n\t},\n\n\t/**\n\t * Method to get the width of the column containing an image.\n\t *\n\t * @function\n\t * @name getColumnWidthForImage\n\t * @param dataModelObjectPath The data model object path\n\t * @returns - Column width if defined, otherwise null (the width is treated as a rem value)\n\t */\n\tgetColumnWidthForImage: function (dataModelObjectPath: DataModelObjectPath): number | null {\n\t\tlet width: number | null = null;\n\t\tconst annotations = dataModelObjectPath.targetObject?.Value?.$target?.annotations;\n\t\tconst dataType = dataModelObjectPath.targetObject?.Value?.$target?.type;\n\t\tif (\n\t\t\tdataModelObjectPath.targetObject?.Value &&\n\t\t\tgetEditMode(\n\t\t\t\tdataModelObjectPath.targetObject.Value?.$target,\n\t\t\t\tdataModelObjectPath,\n\t\t\t\tfalse,\n\t\t\t\tfalse,\n\t\t\t\tdataModelObjectPath.targetObject\n\t\t\t) === EditMode.Display\n\t\t) {\n\t\t\tconst hasTextAnnotation = hasText(dataModelObjectPath.targetObject.Value.$target);\n\t\t\tif (dataType === \"Edm.Stream\" && !hasTextAnnotation && annotations?.Core?.MediaType?.includes(\"image/\")) {\n\t\t\t\twidth = 6.2;\n\t\t\t}\n\t\t} else if (\n\t\t\tannotations &&\n\t\t\t(isImageURL(dataModelObjectPath.targetObject?.Value?.$target) || annotations?.Core?.MediaType?.includes(\"image/\"))\n\t\t) {\n\t\t\twidth = 6.2;\n\t\t}\n\t\treturn width;\n\t},\n\n\t/**\n\t * Method to get the width of the column containing the DataField.\n\t *\n\t * @function\n\t * @name getColumnWidthForDataField\n\t * @param oThis The instance of the inner model of the table building block\n\t * @param column Defined width of the column, which is taken with priority if not null, undefined or empty\n\t * @param dataField Data Field\n\t * @param dataFieldActionText DataField's text from button\n\t * @param dataModelObjectPath The data model object path\n\t * @param oMicroChartTitle The object containing the title and description of the MicroChart\n\t * @returns - Column width if defined, otherwise null ( the width is treated as a rem value)\n\t */\n\tgetColumnWidthForDataField: function (\n\t\toThis: tableDelegateModel,\n\t\tcolumn: AnnotationTableColumn,\n\t\tdataField: DataField | DataFieldForAnnotation | DataFieldForAction | DataFieldForIntentBasedNavigation,\n\t\tdataFieldActionText: string,\n\t\tdataModelObjectPath: DataModelObjectPath,\n\t\toMicroChartTitle?: any\n\t): number | null {\n\t\tconst annotations = dataModelObjectPath.targetObject?.annotations;\n\t\tconst dataType = dataModelObjectPath.targetObject?.$Type;\n\t\tlet width: number | null = null;\n\t\tif (\n\t\t\tdataType === UIAnnotationTypes.DataFieldForAction ||\n\t\t\tdataType === UIAnnotationTypes.DataFieldForIntentBasedNavigation ||\n\t\t\t(dataType === UIAnnotationTypes.DataFieldForAnnotation &&\n\t\t\t\t((dataField as DataFieldForAnnotation).Target as any).$AnnotationPath.indexOf(`@${UIAnnotationTerms.FieldGroup}`) === -1)\n\t\t) {\n\t\t\tlet nTmpTextWidth;\n\t\t\tnTmpTextWidth =\n\t\t\t\tTableSizeHelper.getButtonWidth(dataFieldActionText) ||\n\t\t\t\tTableSizeHelper.getButtonWidth(dataField?.Label?.toString()) ||\n\t\t\t\tTableSizeHelper.getButtonWidth(annotations?.Label);\n\n\t\t\t// get width for rating or progress bar datafield\n\t\t\tconst nTmpVisualizationWidth = TableSizeHelper.getWidthForDataFieldForAnnotation(\n\t\t\t\tdataModelObjectPath.targetObject\n\t\t\t).propertyWidth;\n\n\t\t\tif (nTmpVisualizationWidth > nTmpTextWidth) {\n\t\t\t\twidth = nTmpVisualizationWidth;\n\t\t\t} else if (\n\t\t\t\tdataFieldActionText ||\n\t\t\t\t(annotations &&\n\t\t\t\t\t(annotations.$Type === UIAnnotationTypes.DataFieldForIntentBasedNavigation ||\n\t\t\t\t\t\tannotations.$Type === UIAnnotationTypes.DataFieldForAction))\n\t\t\t) {\n\t\t\t\t// Add additional 1.8 rem to avoid showing ellipsis in some cases.\n\t\t\t\tnTmpTextWidth += 1.8;\n\t\t\t\twidth = nTmpTextWidth;\n\t\t\t}\n\t\t\twidth = width || this.getColumnWidthForChart(oThis, column, dataField, nTmpTextWidth, oMicroChartTitle);\n\t\t}\n\t\treturn width;\n\t},\n\n\t/**\n\t * Method to get the width of the column containing the Chart.\n\t *\n\t * @function\n\t * @name getColumnWidthForChart\n\t * @param oThis The instance of the inner model of the table building block\n\t * @param column Defined width of the column, which is taken with priority if not null, undefined or empty\n\t * @param dataField Data Field\n\t * @param columnLabelWidth The width of the column label or button label\n\t * @param microChartTitle The object containing the title and the description of the MicroChart\n\t * @returns - Column width if defined, otherwise null (the width is treated as a rem value)\n\t */\n\tgetColumnWidthForChart(oThis: any, column: any, dataField: any, columnLabelWidth: number, microChartTitle: any): number | null {\n\t\tlet chartSize,\n\t\t\twidth: number | null = null;\n\t\tif (dataField.Target?.$AnnotationPath?.indexOf(\"@com.sap.vocabularies.UI.v1.Chart\") !== -1) {\n\t\t\tswitch (this.getChartSize(oThis, column)) {\n\t\t\t\tcase \"XS\":\n\t\t\t\t\tchartSize = 4.4;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"S\":\n\t\t\t\t\tchartSize = 4.6;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"M\":\n\t\t\t\t\tchartSize = 5.5;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"L\":\n\t\t\t\t\tchartSize = 6.9;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tchartSize = 5.3;\n\t\t\t}\n\t\t\tcolumnLabelWidth += 1.8;\n\t\t\tif (\n\t\t\t\t!this.getShowOnlyChart(oThis, column) &&\n\t\t\t\tmicroChartTitle &&\n\t\t\t\t(microChartTitle.Title.length || microChartTitle.Description.length)\n\t\t\t) {\n\t\t\t\tconst tmpText =\n\t\t\t\t\tmicroChartTitle.Title.length > microChartTitle.Description.length ? microChartTitle.Title : microChartTitle.Description;\n\t\t\t\tconst titleSize = TableSizeHelper.getButtonWidth(tmpText) + 7;\n\t\t\t\tconst tmpWidth = titleSize > columnLabelWidth ? titleSize : columnLabelWidth;\n\t\t\t\twidth = tmpWidth;\n\t\t\t} else if (columnLabelWidth > chartSize) {\n\t\t\t\twidth = columnLabelWidth;\n\t\t\t} else {\n\t\t\t\twidth = chartSize;\n\t\t\t}\n\t\t}\n\t\treturn width;\n\t},\n\t/**\n\t * Method to add a margin class at the control.\n\t *\n\t * @function\n\t * @name getMarginClass\n\t * @param oCollection Title of the DataPoint\n\t * @param oDataField Value of the DataPoint\n\t * @param sVisualization\n\t * @param sFieldGroupHiddenExpressions Hidden expression contained in FieldGroup\n\t * @returns Adjusting the margin\n\t */\n\tgetMarginClass: function (oCollection: any, oDataField: any, sVisualization: any, sFieldGroupHiddenExpressions: any) {\n\t\tlet sBindingExpression,\n\t\t\tsClass = \"\";\n\t\tif (JSON.stringify(oCollection[oCollection.length - 1]) == JSON.stringify(oDataField)) {\n\t\t\t//If rating indicator is last element in fieldgroup, then the 0.5rem margin added by sapMRI class of interactive rating indicator on top and bottom must be nullified.\n\t\t\tif (sVisualization == \"com.sap.vocabularies.UI.v1.VisualizationType/Rating\") {\n\t\t\t\tsClass = \"sapUiNoMarginBottom sapUiNoMarginTop\";\n\t\t\t}\n\t\t} else if (sVisualization === \"com.sap.vocabularies.UI.v1.VisualizationType/Rating\") {\n\t\t\t//If rating indicator is NOT the last element in fieldgroup, then to maintain the 0.5rem spacing between cogetMarginClassntrols (as per UX spec),\n\t\t\t//only the top margin added by sapMRI class of interactive rating indicator must be nullified.\n\n\t\t\tsClass = \"sapUiNoMarginTop\";\n\t\t} else {\n\t\t\tsClass = \"sapUiTinyMarginBottom\";\n\t\t}\n\n\t\tif (sFieldGroupHiddenExpressions && sFieldGroupHiddenExpressions !== \"true\" && sFieldGroupHiddenExpressions !== \"false\") {\n\t\t\tconst sHiddenExpressionResult = sFieldGroupHiddenExpressions.substring(\n\t\t\t\tsFieldGroupHiddenExpressions.indexOf(\"{=\") + 2,\n\t\t\t\tsFieldGroupHiddenExpressions.lastIndexOf(\"}\")\n\t\t\t);\n\t\t\tsBindingExpression = \"{= \" + sHiddenExpressionResult + \" ? '\" + sClass + \"' : \" + \"''\" + \" }\";\n\t\t\treturn sBindingExpression;\n\t\t} else {\n\t\t\treturn sClass;\n\t\t}\n\t},\n\n\t/**\n\t * Method to get VBox visibility.\n\t *\n\t * @param collection Collection of data fields in VBox\n\t * @param fieldGroupHiddenExpressions Hidden expression contained in FieldGroup\n\t * @param fieldGroup Data field containing the VBox\n\t * @returns Visibility expression\n\t */\n\tgetVBoxVisibility: function (\n\t\tcollection: Array<DataFieldForAnnotation & Hidden>,\n\t\tfieldGroupHiddenExpressions: CompiledBindingToolkitExpression,\n\t\tfieldGroup: FieldGroup & Hidden\n\t): CompiledBindingToolkitExpression {\n\t\tlet allStatic = true;\n\t\tconst hiddenPaths = [];\n\n\t\tif (fieldGroup[\"@com.sap.vocabularies.UI.v1.Hidden\"]) {\n\t\t\treturn fieldGroupHiddenExpressions;\n\t\t}\n\n\t\tfor (const dataField of collection) {\n\t\t\tconst hiddenAnnotationValue = dataField[\"@com.sap.vocabularies.UI.v1.Hidden\"];\n\t\t\tif (hiddenAnnotationValue === undefined || hiddenAnnotationValue === false) {\n\t\t\t\thiddenPaths.push(false);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (hiddenAnnotationValue === true) {\n\t\t\t\thiddenPaths.push(true);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (hiddenAnnotationValue.$Path) {\n\t\t\t\thiddenPaths.push(pathInModel(hiddenAnnotationValue.$Path));\n\t\t\t\tallStatic = false;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (typeof hiddenAnnotationValue === \"object\") {\n\t\t\t\t// Dynamic expression found in a field\n\t\t\t\treturn fieldGroupHiddenExpressions;\n\t\t\t}\n\t\t}\n\n\t\tconst hasAnyPathExpressions = constant(hiddenPaths.length > 0 && allStatic !== true);\n\t\tconst hasAllHiddenStaticExpressions = constant(hiddenPaths.length > 0 && hiddenPaths.indexOf(false) === -1 && allStatic);\n\n\t\treturn compileExpression(\n\t\t\tifElse(\n\t\t\t\thasAnyPathExpressions,\n\t\t\t\tformatResult(hiddenPaths, TableFormatter.getVBoxVisibility),\n\t\t\t\tifElse(hasAllHiddenStaticExpressions, constant(false), constant(true))\n\t\t\t)\n\t\t);\n\t},\n\n\t/**\n\t * Method to provide hidden filters to the table.\n\t *\n\t * @function\n\t * @name formatHiddenFilters\n\t * @param oHiddenFilter The hiddenFilters via context named filters (and key hiddenFilters) passed to Macro Table\n\t * @returns The string representation of the hidden filters\n\t */\n\tformatHiddenFilters: function (oHiddenFilter: string) {\n\t\tif (oHiddenFilter) {\n\t\t\ttry {\n\t\t\t\treturn JSON.stringify(oHiddenFilter);\n\t\t\t} catch (ex) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t},\n\n\t/**\n\t * Method to get the stable ID of a table element (column or FieldGroup label).\n\t *\n\t * @function\n\t * @name getElementStableId\n\t * @param tableId Current object ID\n\t * @param elementId Element Id or suffix\n\t * @param dataModelObjectPath DataModelObjectPath of the dataField\n\t * @returns The stable ID for a given column\n\t */\n\tgetElementStableId: function (tableId: string | undefined, elementId: string, dataModelObjectPath: DataModelObjectPath) {\n\t\tif (!tableId) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst dataField = dataModelObjectPath.targetObject as DataFieldAbstractTypes;\n\t\tlet dataFieldPart: string | DataFieldAbstractTypes;\n\t\tswitch (dataField.$Type) {\n\t\t\tcase UIAnnotationTypes.DataFieldForAnnotation:\n\t\t\t\tdataFieldPart = dataField.Target.value;\n\t\t\t\tbreak;\n\t\t\tcase UIAnnotationTypes.DataFieldForIntentBasedNavigation:\n\t\t\tcase UIAnnotationTypes.DataFieldForAction:\n\t\t\t\tdataFieldPart = dataField;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tdataFieldPart = (dataField as DataField).Value?.path ?? \"\";\n\t\t\t\tbreak;\n\t\t}\n\t\treturn generate([tableId, elementId, dataFieldPart]);\n\t},\n\n\t/**\n\t * Method to get the stable ID of the column.\n\t *\n\t * @function\n\t * @name getColumnStableId\n\t * @param id Current object ID\n\t * @param dataModelObjectPath DataModelObjectPath of the dataField\n\t * @returns The stable ID for a given column\n\t */\n\tgetColumnStableId: function (id: string, dataModelObjectPath: DataModelObjectPath) {\n\t\treturn TableHelper.getElementStableId(id, \"C\", dataModelObjectPath);\n\t},\n\n\tgetFieldGroupLabelStableId: function (id: string, dataModelObjectPath: DataModelObjectPath) {\n\t\treturn TableHelper.getElementStableId(id, \"FGLabel\", dataModelObjectPath);\n\t},\n\n\t/**\n\t * Method filters out properties which do not belong to the collection.\n\t *\n\t * @param aPropertyPaths The array of properties to be checked.\n\t * @param oCollectionContext The collection context to be used.\n\t * @returns The array of applicable properties.\n\t * @private\n\t */\n\t_filterNonApplicableProperties: function (aPropertyPaths: any[], oCollectionContext: Context) {\n\t\treturn (\n\t\t\taPropertyPaths &&\n\t\t\taPropertyPaths.filter(function (sPropertyPath: any) {\n\t\t\t\treturn oCollectionContext.getObject(`./${sPropertyPath}`);\n\t\t\t})\n\t\t);\n\t},\n\n\t/**\n\t * Method to retreive the listed properties from the custom columns\n\t *\n\t * @param columns The table columns\n\t * @returns The list of available properties from the custom columns\n\t * @private\n\t */\n\n\tgetPropertiesFromCustomColumns: function (columns: TableColumn[]) {\n\t\t// Add properties from the custom columns, this is required for the export of all the properties listed on a custom column\n\t\tif (!columns?.length) {\n\t\t\treturn;\n\t\t}\n\t\tconst propertiesFromCustomColumns: string[] = [];\n\t\tfor (const column of columns) {\n\t\t\tif (\"properties\" in column && column.properties?.length) {\n\t\t\t\tfor (const property of column.properties) {\n\t\t\t\t\tif (propertiesFromCustomColumns.indexOf(property) === -1) {\n\t\t\t\t\t\t// only add property if it doesn't exist\n\t\t\t\t\t\tpropertiesFromCustomColumns.push(property);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn propertiesFromCustomColumns;\n\t},\n\t/**\n\t * Method to generate the binding information for a table row.\n\t *\n\t * @param oThis The instance of the inner model of the table building block\n\t * @returns - Returns the binding information of a table row\n\t */\n\tgetRowsBindingInfo: function (oThis: any) {\n\t\tconst dataModelPath = getInvolvedDataModelObjects(oThis.collection, oThis.contextPath);\n\t\tconst path = getContextRelativeTargetObjectPath(dataModelPath) || getTargetObjectPath(dataModelPath);\n\t\tconst oRowBinding = {\n\t\t\tui5object: true,\n\t\t\tsuspended: false,\n\t\t\tpath: CommonHelper.addSingleQuotes(path),\n\t\t\tparameters: {\n\t\t\t\t$count: true\n\t\t\t} as any,\n\t\t\tevents: {} as any\n\t\t};\n\n\t\tif (oThis.tableDefinition.getObject(\"enable$select\")) {\n\t\t\t// Don't add $select parameter in case of an analytical query, this isn't supported by the model\n\t\t\tconst sSelect = TableHelper.create$Select(oThis);\n\t\t\tif (sSelect) {\n\t\t\t\toRowBinding.parameters.$select = `'${sSelect}'`;\n\t\t\t}\n\t\t}\n\n\t\tif (oThis.tableDefinition.getObject(\"enable$$getKeepAliveContext\")) {\n\t\t\t// we later ensure in the delegate only one list binding for a given targetCollectionPath has the flag $$getKeepAliveContext\n\t\t\toRowBinding.parameters.$$getKeepAliveContext = true;\n\t\t}\n\n\t\toRowBinding.parameters.$$groupId = CommonHelper.addSingleQuotes(\"$auto.Workers\");\n\t\toRowBinding.parameters.$$updateGroupId = CommonHelper.addSingleQuotes(\"$auto\");\n\t\toRowBinding.parameters.$$ownRequest = true;\n\t\toRowBinding.parameters.$$patchWithoutSideEffects = true;\n\n\t\toRowBinding.events.patchSent = CommonHelper.addSingleQuotes(\".editFlow.handlePatchSent\");\n\t\toRowBinding.events.dataReceived = CommonHelper.addSingleQuotes(\"API.onInternalDataReceived\");\n\t\toRowBinding.events.dataRequested = CommonHelper.addSingleQuotes(\"API.onInternalDataRequested\");\n\t\t// recreate an empty row when one is activated\n\t\toRowBinding.events.createActivate = CommonHelper.addSingleQuotes(\".editFlow.handleCreateActivate\");\n\n\t\tif (oThis.onContextChange !== undefined && oThis.onContextChange !== null) {\n\t\t\toRowBinding.events.change = CommonHelper.addSingleQuotes(oThis.onContextChange);\n\t\t}\n\t\treturn CommonHelper.objectToString(oRowBinding);\n\t},\n\t/**\n\t * Method to check the validity of the fields in the creation row.\n\t *\n\t * @function\n\t * @name validateCreationRowFields\n\t * @param oFieldValidityObject Current Object holding the fields\n\t * @returns `true` if all the fields in the creation row are valid, `false` otherwise\n\t */\n\tvalidateCreationRowFields: function (oFieldValidityObject: any) {\n\t\tif (!oFieldValidityObject) {\n\t\t\treturn false;\n\t\t}\n\t\treturn (\n\t\t\tObject.keys(oFieldValidityObject).length > 0 &&\n\t\t\tObject.keys(oFieldValidityObject).every(function (key: string) {\n\t\t\t\treturn oFieldValidityObject[key][\"validity\"];\n\t\t\t})\n\t\t);\n\t},\n\t/**\n\t * Method to get the expression for the 'press' event for the DataFieldForActionButton.\n\t *\n\t * @function\n\t * @name pressEventDataFieldForActionButton\n\t * @param oThis Current object\n\t * @param oDataField Value of the DataPoint\n\t * @param sEntitySetName Name of the EntitySet\n\t * @param sOperationAvailableMap OperationAvailableMap as stringified JSON object\n\t * @param oActionContext Action object\n\t * @param bIsNavigable Action either triggers navigation or not\n\t * @param bEnableAutoScroll Action either triggers scrolling to the newly created items in the related table or not\n\t * @param sDefaultValuesExtensionFunction Function name to prefill dialog parameters\n\t * @returns The binding expression\n\t */\n\tpressEventDataFieldForActionButton: function (\n\t\toThis: any,\n\t\toDataField: any,\n\t\tsEntitySetName: string,\n\t\tsOperationAvailableMap: string,\n\t\toActionContext: object,\n\t\tbIsNavigable: any,\n\t\tbEnableAutoScroll: any,\n\t\tsDefaultValuesExtensionFunction: string\n\t) {\n\t\tconst sActionName = oDataField.Action,\n\t\t\tsAnnotationTargetEntityType = oThis && oThis.collection.getObject(\"$Type\"),\n\t\t\tbStaticAction =\n\t\t\t\tthis._isStaticAction(oActionContext, sActionName) ||\n\t\t\t\tthis._isActionOverloadOnDifferentType(sActionName, sAnnotationTargetEntityType),\n\t\t\toParams = {\n\t\t\t\tcontexts: !bStaticAction ? \"${internal>selectedContexts}\" : null,\n\t\t\t\tbStaticAction: bStaticAction ? bStaticAction : undefined,\n\t\t\t\tentitySetName: CommonHelper.addSingleQuotes(sEntitySetName),\n\t\t\t\tapplicableContext: !bStaticAction ? \"${internal>dynamicActions/\" + oDataField.Action + \"/aApplicable/}\" : null,\n\t\t\t\tnotApplicableContext: !bStaticAction ? \"${internal>dynamicActions/\" + oDataField.Action + \"/aNotApplicable/}\" : null,\n\t\t\t\tisNavigable: bIsNavigable,\n\t\t\t\tenableAutoScroll: bEnableAutoScroll,\n\t\t\t\tdefaultValuesExtensionFunction: sDefaultValuesExtensionFunction ? \"'\" + sDefaultValuesExtensionFunction + \"'\" : undefined\n\t\t\t};\n\n\t\treturn ActionHelper.getPressEventDataFieldForActionButton(oThis.id, oDataField, oParams, sOperationAvailableMap);\n\t},\n\t/**\n\t * Method to determine the binding expression for 'enabled' property of DataFieldForAction and DataFieldForIBN actions.\n\t *\n\t * @function\n\t * @name isDataFieldForActionEnabled\n\t * @param oThis The instance of the table control\n\t * @param oDataField The value of the data field\n\t * @param oRequiresContext RequiresContext for IBN\n\t * @param bIsDataFieldForIBN Flag for IBN\n\t * @param oActionContext The instance of the action\n\t * @param vActionEnabled Status of action (single or multiselect)\n\t * @returns A binding expression to define the 'enabled' property of the action\n\t */\n\tisDataFieldForActionEnabled: function (\n\t\toThis: any,\n\t\toDataField: any,\n\t\toRequiresContext: object,\n\t\tbIsDataFieldForIBN: boolean,\n\t\toActionContext: object,\n\t\tvActionEnabled: string\n\t) {\n\t\tconst sActionName = oDataField.Action,\n\t\t\tsAnnotationTargetEntityType = oThis && oThis.collection.getObject(\"$Type\"),\n\t\t\toTableDefinition = oThis && oThis.tableDefinition && oThis.tableDefinition.getObject(),\n\t\t\tbStaticAction = this._isStaticAction(oActionContext, sActionName),\n\t\t\tisAnalyticalTable = oTableDefinition && oTableDefinition.enableAnalytics;\n\n\t\t// Check for action overload on a different Entity type.\n\t\t// If yes, table row selection is not required to enable this action.\n\t\tif (!bIsDataFieldForIBN && this._isActionOverloadOnDifferentType(sActionName, sAnnotationTargetEntityType)) {\n\t\t\t// Action overload defined on different entity type\n\t\t\tconst oOperationAvailableMap = oTableDefinition && JSON.parse(oTableDefinition.operationAvailableMap);\n\t\t\tif (oOperationAvailableMap && oOperationAvailableMap.hasOwnProperty(sActionName)) {\n\t\t\t\t// Core.OperationAvailable annotation defined for the action.\n\t\t\t\t// Need to refer to internal model for enabled property of the dynamic action.\n\t\t\t\t// return compileBinding(bindingExpression(\"dynamicActions/\" + sActionName + \"/bEnabled\", \"internal\"), true);\n\t\t\t\treturn \"{= ${internal>dynamicActions/\" + sActionName + \"/bEnabled} }\";\n\t\t\t}\n\t\t\t// Consider the action just like any other static DataFieldForAction.\n\t\t\treturn true;\n\t\t}\n\t\tif (!oRequiresContext || bStaticAction) {\n\t\t\tif (bIsDataFieldForIBN) {\n\t\t\t\tconst sEntitySet = oThis.collection.getPath();\n\t\t\t\tconst oMetaModel = oThis.collection.getModel();\n\t\t\t\tif (vActionEnabled === \"false\" && !isAnalyticalTable) {\n\t\t\t\t\tLog.warning(\"NavigationAvailable as false is incorrect usage\");\n\t\t\t\t\treturn false;\n\t\t\t\t} else if (\n\t\t\t\t\t!isAnalyticalTable &&\n\t\t\t\t\toDataField &&\n\t\t\t\t\toDataField.NavigationAvailable &&\n\t\t\t\t\toDataField.NavigationAvailable.$Path &&\n\t\t\t\t\toMetaModel.getObject(sEntitySet + \"/$Partner\") === oDataField.NavigationAvailable.$Path.split(\"/\")[0]\n\t\t\t\t) {\n\t\t\t\t\treturn \"{= ${\" + vActionEnabled.substr(vActionEnabled.indexOf(\"/\") + 1, vActionEnabled.length) + \"}\";\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\tlet sDataFieldForActionEnabledExpression = \"\",\n\t\t\tsNumberOfSelectedContexts,\n\t\t\tsAction;\n\t\tif (bIsDataFieldForIBN) {\n\t\t\tif (vActionEnabled === \"true\" || isAnalyticalTable) {\n\t\t\t\tsDataFieldForActionEnabledExpression = \"%{internal>numberOfSelectedContexts} >= 1\";\n\t\t\t} else if (vActionEnabled === \"false\") {\n\t\t\t\tLog.warning(\"NavigationAvailable as false is incorrect usage\");\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tsNumberOfSelectedContexts = \"%{internal>numberOfSelectedContexts} >= 1\";\n\t\t\t\tsAction = \"${internal>ibn/\" + oDataField.SemanticObject + \"-\" + oDataField.Action + \"/bEnabled\" + \"}\";\n\t\t\t\tsDataFieldForActionEnabledExpression = sNumberOfSelectedContexts + \" && \" + sAction;\n\t\t\t}\n\t\t} else {\n\t\t\tsNumberOfSelectedContexts = ActionHelper.getNumberOfContextsExpression(vActionEnabled);\n\t\t\tsAction = \"${internal>dynamicActions/\" + oDataField.Action + \"/bEnabled\" + \"}\";\n\t\t\tsDataFieldForActionEnabledExpression = sNumberOfSelectedContexts + \" && \" + sAction;\n\t\t}\n\t\treturn \"{= \" + sDataFieldForActionEnabledExpression + \"}\";\n\t},\n\t/**\n\t * Method to get press event expression for CreateButton.\n\t *\n\t * @function\n\t * @name pressEventForCreateButton\n\t * @param oThis Current Object\n\t * @param bCmdExecutionFlag Flag to indicate that the function is called from CMD Execution\n\t * @returns The binding expression for the press event of the create button\n\t */\n\tpressEventForCreateButton: function (oThis: any, bCmdExecutionFlag: boolean) {\n\t\tconst sCreationMode = oThis.creationMode;\n\t\tlet oParams: any;\n\t\tconst sMdcTable = bCmdExecutionFlag ? \"${$source>}.getParent()\" : \"${$source>}.getParent().getParent().getParent()\";\n\t\tlet sRowBinding = sMdcTable + \".getRowBinding() || \" + sMdcTable + \".data('rowsBindingInfo').path\";\n\n\t\tswitch (sCreationMode) {\n\t\t\tcase CreationMode.External:\n\t\t\t\t// navigate to external target for creating new entries\n\t\t\t\t// TODO: Add required parameters\n\t\t\t\toParams = {\n\t\t\t\t\tcreationMode: CommonHelper.addSingleQuotes(CreationMode.External),\n\t\t\t\t\toutbound: CommonHelper.addSingleQuotes(oThis.createOutbound)\n\t\t\t\t};\n\t\t\t\tbreak;\n\n\t\t\tcase CreationMode.CreationRow:\n\t\t\t\toParams = {\n\t\t\t\t\tcreationMode: CommonHelper.addSingleQuotes(CreationMode.CreationRow),\n\t\t\t\t\tcreationRow: \"${$source>}\",\n\t\t\t\t\tcreateAtEnd: oThis.createAtEnd !== undefined ? oThis.createAtEnd : false\n\t\t\t\t};\n\n\t\t\t\tsRowBinding = \"${$source>}.getParent()._getRowBinding()\";\n\t\t\t\tbreak;\n\n\t\t\tcase CreationMode.NewPage:\n\t\t\tcase CreationMode.Inline:\n\t\t\t\toParams = {\n\t\t\t\t\tcreationMode: CommonHelper.addSingleQuotes(sCreationMode),\n\t\t\t\t\tcreateAtEnd: oThis.createAtEnd !== undefined ? oThis.createAtEnd : false,\n\t\t\t\t\ttableId: CommonHelper.addSingleQuotes(oThis.id)\n\t\t\t\t};\n\n\t\t\t\tif (oThis.createNewAction) {\n\t\t\t\t\toParams.newAction = CommonHelper.addSingleQuotes(oThis.createNewAction);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase CreationMode.InlineCreationRows:\n\t\t\t\treturn CommonHelper.generateFunction(\"._editFlow.createEmptyRowsAndFocus\", sMdcTable);\n\t\t\tdefault:\n\t\t\t\t// unsupported\n\t\t\t\treturn undefined;\n\t\t}\n\t\treturn CommonHelper.generateFunction(\".editFlow.createDocument\", sRowBinding, CommonHelper.objectToString(oParams));\n\t},\n\n\tgetIBNData: function (oThis: any) {\n\t\tconst outboundDetail = oThis.createOutboundDetail;\n\t\tif (outboundDetail) {\n\t\t\tconst oIBNData = {\n\t\t\t\tsemanticObject: CommonHelper.addSingleQuotes(outboundDetail.semanticObject),\n\t\t\t\taction: CommonHelper.addSingleQuotes(outboundDetail.action)\n\t\t\t};\n\t\t\treturn CommonHelper.objectToString(oIBNData);\n\t\t}\n\t},\n\n\t_getExpressionForDeleteButton: function (value: any, fullContextPath: DataModelObjectPath): string | CompiledBindingToolkitExpression {\n\t\tif (typeof value === \"string\") {\n\t\t\treturn CommonHelper.addSingleQuotes(value, true);\n\t\t} else {\n\t\t\tconst expression = getExpressionFromAnnotation(value);\n\t\t\tif (isConstant(expression) || isPathInModelExpression(expression)) {\n\t\t\t\tconst valueExpression = formatValueRecursively(expression, fullContextPath);\n\t\t\t\treturn compileExpression(valueExpression);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Method to get press event expression for 'Delete' button.\n\t *\n\t * @function\n\t * @name pressEventForDeleteButton\n\t * @param oThis Current Object\n\t * @param sEntitySetName EntitySet name\n\t * @param oHeaderInfo Header Info\n\t * @param fullcontextPath Context Path\n\t * @returns The binding expression for the press event of the 'Delete' button\n\t */\n\tpressEventForDeleteButton: function (oThis: any, sEntitySetName: string, oHeaderInfo: any, fullcontextPath: any) {\n\t\tconst sDeletableContexts = \"${internal>deletableContexts}\";\n\t\tlet sTitleExpression, sDescriptionExpression;\n\n\t\tif (oHeaderInfo?.Title) {\n\t\t\tsTitleExpression = this._getExpressionForDeleteButton(oHeaderInfo.Title.Value, fullcontextPath);\n\t\t}\n\t\tif (oHeaderInfo?.Description) {\n\t\t\tsDescriptionExpression = this._getExpressionForDeleteButton(oHeaderInfo.Description.Value, fullcontextPath);\n\t\t}\n\n\t\tconst oParams = {\n\t\t\tid: CommonHelper.addSingleQuotes(oThis.id),\n\t\t\tentitySetName: CommonHelper.addSingleQuotes(sEntitySetName),\n\t\t\tnumberOfSelectedContexts: \"${internal>selectedContexts}.length\",\n\t\t\tunSavedContexts: \"${internal>unSavedContexts}\",\n\t\t\tlockedContexts: \"${internal>lockedContexts}\",\n\t\t\tcreateModeContexts: \"${internal>createModeContexts}\",\n\t\t\tdraftsWithDeletableActive: \"${internal>draftsWithDeletableActive}\",\n\t\t\tdraftsWithNonDeletableActive: \"${internal>draftsWithNonDeletableActive}\",\n\t\t\tcontrolId: \"${internal>controlId}\",\n\t\t\ttitle: sTitleExpression,\n\t\t\tdescription: sDescriptionExpression,\n\t\t\tselectedContexts: \"${internal>selectedContexts}\"\n\t\t};\n\n\t\treturn CommonHelper.generateFunction(\".editFlow.deleteMultipleDocuments\", sDeletableContexts, CommonHelper.objectToString(oParams));\n\t},\n\n\t/**\n\t * Method to set the visibility of the label for the column header.\n\t *\n\t * @function\n\t * @name setHeaderLabelVisibility\n\t * @param datafield DataField\n\t * @param dataFieldCollection List of items inside a fieldgroup (if any)\n\t * @returns `true` if the header label needs to be visible else false.\n\t */\n\tsetHeaderLabelVisibility: function (datafield: any, dataFieldCollection: any[]) {\n\t\t// If Inline button/navigation action, return false, else true;\n\t\tif (!dataFieldCollection) {\n\t\t\tif (datafield.$Type.indexOf(\"DataFieldForAction\") > -1 && datafield.Inline) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (datafield.$Type.indexOf(\"DataFieldForIntentBasedNavigation\") > -1 && datafield.Inline) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\t// In Fieldgroup, If NOT all datafield/datafieldForAnnotation exists with hidden, return true;\n\t\treturn dataFieldCollection.some(function (oDC: any) {\n\t\t\tif (\n\t\t\t\t(oDC.$Type === UIAnnotationTypes.DataField || oDC.$Type === UIAnnotationTypes.DataFieldForAnnotation) &&\n\t\t\t\toDC[\"@com.sap.vocabularies.UI.v1.Hidden\"] !== true\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Method to get Text from DataFieldForAnnotation into Column.\n\t *\n\t * @function\n\t * @name getTextOnActionField\n\t * @param oDataField DataPoint's Value\n\t * @param oContext Context object of the LineItem\n\t * @returns String from label referring to action text\n\t */\n\tgetTextOnActionField: function (oDataField: any, oContext: any): string | undefined {\n\t\tif (\n\t\t\toDataField.$Type === UIAnnotationTypes.DataFieldForAction ||\n\t\t\toDataField.$Type === UIAnnotationTypes.DataFieldForIntentBasedNavigation\n\t\t) {\n\t\t\treturn oDataField.Label;\n\t\t}\n\t\t// for FieldGroup containing DataFieldForAnnotation\n\t\tif (\n\t\t\toDataField.$Type === UIAnnotationTypes.DataFieldForAnnotation &&\n\t\t\toContext.context.getObject(\"Target/$AnnotationPath\").indexOf(\"@\" + UIAnnotationTerms.FieldGroup) > -1\n\t\t) {\n\t\t\tconst sPathDataFields = \"Target/$AnnotationPath/Data/\";\n\t\t\tconst aMultipleLabels = [];\n\t\t\tfor (const i in oContext.context.getObject(sPathDataFields)) {\n\t\t\t\tif (\n\t\t\t\t\toContext.context.getObject(`${sPathDataFields + i}/$Type`) === UIAnnotationTypes.DataFieldForAction ||\n\t\t\t\t\toContext.context.getObject(`${sPathDataFields + i}/$Type`) === UIAnnotationTypes.DataFieldForIntentBasedNavigation\n\t\t\t\t) {\n\t\t\t\t\taMultipleLabels.push(oContext.context.getObject(`${sPathDataFields + i}/Label`));\n\t\t\t\t}\n\t\t\t}\n\t\t\t// In case there are multiple actions inside a Field Group select the largest Action Label\n\t\t\tif (aMultipleLabels.length > 1) {\n\t\t\t\treturn aMultipleLabels.reduce(function (a: any, b: any) {\n\t\t\t\t\treturn a.length > b.length ? a : b;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treturn aMultipleLabels.length === 0 ? undefined : aMultipleLabels.toString();\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t},\n\t_getResponsiveTableColumnSettings: function (oThis: any, oColumn: any) {\n\t\tif (oThis.tableType === \"ResponsiveTable\") {\n\t\t\treturn oColumn.settings;\n\t\t}\n\t\treturn null;\n\t},\n\n\tgetChartSize: function (oThis: any, oColumn: any) {\n\t\tconst settings = this._getResponsiveTableColumnSettings(oThis, oColumn);\n\t\tif (settings && settings.microChartSize) {\n\t\t\treturn settings.microChartSize;\n\t\t}\n\t\treturn \"XS\";\n\t},\n\tgetShowOnlyChart: function (oThis: any, oColumn: any) {\n\t\tconst settings = this._getResponsiveTableColumnSettings(oThis, oColumn);\n\t\tif (settings && settings.showMicroChartLabel) {\n\t\t\treturn !settings.showMicroChartLabel;\n\t\t}\n\t\treturn true;\n\t},\n\tgetDelegate: function (table: TableVisualization, isALP: string, entityName: string) {\n\t\tlet oDelegate;\n\t\tif (isALP === \"true\") {\n\t\t\t// We don't support TreeTable in ALP\n\t\t\tif (table.control.type === \"TreeTable\") {\n\t\t\t\tthrow new Error(\"TreeTable not supported in Analytical ListPage\");\n\t\t\t}\n\t\t\toDelegate = {\n\t\t\t\tname: \"sap/fe/macros/table/delegates/ALPTableDelegate\",\n\t\t\t\tpayload: {\n\t\t\t\t\tcollectionName: entityName\n\t\t\t\t}\n\t\t\t};\n\t\t} else if (table.control.type === \"TreeTable\") {\n\t\t\toDelegate = {\n\t\t\t\tname: \"sap/fe/macros/table/delegates/TreeTableDelegate\",\n\t\t\t\tpayload: {\n\t\t\t\t\thierarchyQualifier: table.control.hierarchyQualifier,\n\t\t\t\t\tinitialExpansionLevel: table.annotation.initialExpansionLevel\n\t\t\t\t}\n\t\t\t};\n\t\t} else {\n\t\t\toDelegate = {\n\t\t\t\tname: \"sap/fe/macros/table/delegates/TableDelegate\"\n\t\t\t};\n\t\t}\n\n\t\treturn JSON.stringify(oDelegate);\n\t},\n\tsetIBNEnablement: function (oInternalModelContext: any, oNavigationAvailableMap: any, aSelectedContexts: any) {\n\t\tfor (const sKey in oNavigationAvailableMap) {\n\t\t\toInternalModelContext.setProperty(`ibn/${sKey}`, {\n\t\t\t\tbEnabled: false,\n\t\t\t\taApplicable: [],\n\t\t\t\taNotApplicable: []\n\t\t\t});\n\t\t\tconst aApplicable = [],\n\t\t\t\taNotApplicable = [];\n\t\t\tconst sProperty = oNavigationAvailableMap[sKey];\n\t\t\tfor (let i = 0; i < aSelectedContexts.length; i++) {\n\t\t\t\tconst oSelectedContext = aSelectedContexts[i];\n\t\t\t\tif (oSelectedContext.getObject(sProperty)) {\n\t\t\t\t\toInternalModelContext.getModel().setProperty(`${oInternalModelContext.getPath()}/ibn/${sKey}/bEnabled`, true);\n\t\t\t\t\taApplicable.push(oSelectedContext);\n\t\t\t\t} else {\n\t\t\t\t\taNotApplicable.push(oSelectedContext);\n\t\t\t\t}\n\t\t\t}\n\t\t\toInternalModelContext.getModel().setProperty(`${oInternalModelContext.getPath()}/ibn/${sKey}/aApplicable`, aApplicable);\n\t\t\toInternalModelContext.getModel().setProperty(`${oInternalModelContext.getPath()}/ibn/${sKey}/aNotApplicable`, aNotApplicable);\n\t\t}\n\t}\n};\n(TableHelper.getNavigationAvailableMap as any).requiresIContext = true;\n(TableHelper.getTextOnActionField as any).requiresIContext = true;\n\nexport default TableHelper;\n"],"mappings":"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"}},{"offset":{"line":25800,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","DataVisualization","ManifestSettings","MetaModelConverter","TableFormatter","BindingToolkit","StableIdHelper","FELibrary","DataModelPathHelper","PropertyHelper","UIFormatters","CommonHelper","FieldTemplating","ActionHelper","TableSizeHelper","EditMode","formatValueRecursively","getEditMode","isImageURL","hasText","getTargetObjectPath","getContextRelativeTargetObjectPath","generate","pathInModel","isPathInModelExpression","isConstant","ifElse","getExpressionFromAnnotation","formatResult","constant","compileExpression","getInvolvedDataModelObjects","TemplateType","getUiControl","CreationMode","TableHelper","_isStaticAction","oActionContext","sActionName","oAction","Array","isArray","sEntityType","this","_getActionOverloadEntityType","find","action","$IsBound","$Parameter","$Type","$isCollection","indexOf","aParts","split","length","replaceAll","undefined","_isActionOverloadOnDifferentType","sAnnotationTargetEntityType","getMessageForDraftValidation","oThis","_oCollectionAnnotatio","_oThis$tableDefinitio","oCollectionAnnotations","collection","getObject","sMessagePath","$Path","tableDefinition","getProperty","ObjectPage","Object","keys","sKey","_oAnnotation$TargetPr","oAnnotation","SourceProperties","SourceEntities","TargetProperties","getFieldsRequestedByPresentationVariant","oPresentationVariant","_oPresentationVariant","RequestAtLeast","map","oRequested","value","getNavigationAvailableFieldsFromLineItem","aLineItemContext","aSelectedFieldsArray","forEach","oRecord","_oRecord$NavigationAv","Inline","Determining","NavigationAvailable","push","getNavigationAvailableMap","aLineItemCollection","oIBNNavigationAvailableMap","SemanticObject","Action","RequiresContext","JSON","stringify","getUiLineItem","oPresentationContext","create$Select","collectionContext","selectedFields","lineItemContext","metaPath","targetCollectionPath","getTargetCollection","pushField","field","includes","pushFieldList","fields","columns","propertiesFromCustomColumns","getPropertiesFromCustomColumns","getPath","_collectionContext$ge","_collectionContext$ge2","_collectionContext$ge3","_collectionContext$ge4","presentationAnnotation","targetObject","operationAvailableProperties","applicableProperties","_filterNonApplicableProperties","semanticKeys","semanticKey","$PropertyPath","Deletable","Updatable","join","getColumnWidth","column","dataField","dataFieldActionText","dataModelObjectPath","useRemUnit","microChartTitle","width","enableAutoColumnWidth","getColumnWidthForImage","getColumnWidthForDataField","name","_dataModelObjectPath$","_dataModelObjectPath$2","_dataModelObjectPath$3","_dataModelObjectPath$4","_dataModelObjectPath$5","_dataModelObjectPath$6","_dataModelObjectPath$7","_dataModelObjectPath$8","_dataModelObjectPath$9","_dataModelObjectPath$10","_annotations$Core2","_annotations$Core2$Me","annotations","Value","$target","dataType","type","Display","_annotations$Core","_annotations$Core$Med","hasTextAnnotation","Core","MediaType","oMicroChartTitle","_dataModelObjectPath$11","_dataModelObjectPath$12","Target","$AnnotationPath","_dataField$Label","nTmpTextWidth","getButtonWidth","Label","toString","nTmpVisualizationWidth","getWidthForDataFieldForAnnotation","propertyWidth","getColumnWidthForChart","columnLabelWidth","_dataField$Target","_dataField$Target$$An","chartSize","getChartSize","getShowOnlyChart","Title","Description","tmpText","titleSize","tmpWidth","getMarginClass","oCollection","oDataField","sVisualization","sFieldGroupHiddenExpressions","sBindingExpression","sClass","sHiddenExpressionResult","substring","lastIndexOf","getVBoxVisibility","fieldGroupHiddenExpressions","fieldGroup","allStatic","hiddenPaths","hiddenAnnotationValue","hasAnyPathExpressions","hasAllHiddenStaticExpressions","formatHiddenFilters","oHiddenFilter","ex","getElementStableId","tableId","elementId","_Value","dataFieldPart","path","getColumnStableId","id","getFieldGroupLabelStableId","aPropertyPaths","oCollectionContext","filter","sPropertyPath","_column$properties","properties","property","getRowsBindingInfo","dataModelPath","contextPath","oRowBinding","ui5object","suspended","addSingleQuotes","parameters","$count","events","sSelect","$select","$$getKeepAliveContext","$$groupId","$$updateGroupId","$$ownRequest","$$patchWithoutSideEffects","patchSent","dataReceived","dataRequested","createActivate","onContextChange","change","objectToString","validateCreationRowFields","oFieldValidityObject","every","key","pressEventDataFieldForActionButton","sEntitySetName","sOperationAvailableMap","bIsNavigable","bEnableAutoScroll","sDefaultValuesExtensionFunction","bStaticAction","oParams","contexts","entitySetName","applicableContext","notApplicableContext","isNavigable","enableAutoScroll","defaultValuesExtensionFunction","getPressEventDataFieldForActionButton","isDataFieldForActionEnabled","oRequiresContext","bIsDataFieldForIBN","vActionEnabled","oTableDefinition","isAnalyticalTable","enableAnalytics","oOperationAvailableMap","parse","operationAvailableMap","hasOwnProperty","sEntitySet","oMetaModel","getModel","warning","substr","sDataFieldForActionEnabledExpression","sNumberOfSelectedContexts","sAction","getNumberOfContextsExpression","pressEventForCreateButton","bCmdExecutionFlag","sCreationMode","creationMode","sMdcTable","sRowBinding","External","outbound","createOutbound","CreationRow","creationRow","createAtEnd","NewPage","createNewAction","newAction","InlineCreationRows","generateFunction","getIBNData","outboundDetail","createOutboundDetail","oIBNData","semanticObject","_getExpressionForDeleteButton","fullContextPath","expression","valueExpression","pressEventForDeleteButton","oHeaderInfo","fullcontextPath","sDeletableContexts","sTitleExpression","sDescriptionExpression","numberOfSelectedContexts","unSavedContexts","lockedContexts","createModeContexts","draftsWithDeletableActive","draftsWithNonDeletableActive","controlId","title","description","selectedContexts","setHeaderLabelVisibility","datafield","dataFieldCollection","some","oDC","getTextOnActionField","oContext","context","sPathDataFields","aMultipleLabels","i","reduce","a","b","_getResponsiveTableColumnSettings","oColumn","tableType","settings","microChartSize","showMicroChartLabel","getDelegate","table","isALP","entityName","oDelegate","control","Error","payload","collectionName","hierarchyQualifier","initialExpansionLevel","annotation","setIBNEnablement","oInternalModelContext","oNavigationAvailableMap","aSelectedContexts","setProperty","bEnabled","aApplicable","aNotApplicable","sProperty","oSelectedContext","requiresIContext"],"sources":["TableHelper-dbg.js"],"mappings":"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","sourceRoot":"table"}},{"offset":{"line":25805,"column":0},"map":{"version":3,"names":["CreationMode","FELibrary","TableRuntime","displayTableSettings","oEvent","oParent","getSource","getParent","oSettingsButton","sap","ui","getCore","byId","getId","CommonUtils","fireButtonPress","executeConditionalActionShortcut","sButtonMatcher","oSource","oMdcTable","CreationRow","oButton","getActions","reduce","aActionButtons","oActionToolbarAction","concat","getAction","find","oActionButton","endsWith","oCreationRow","getAggregation","getApplyEnabled","getVisible","fireApply","setContexts","oTable","sDeletablePath","draft","sCollection","sNavigationAvailableMap","sActionsMultiselectDisabled","sUpdatablePath","BusyLocker","lock","setContextsAsync","then","Log","info","catch","error","finally","unlock","aActionsMultiselectDisabled","split","oActionOperationAvailableMap","JSON","parse","oNavigationAvailableMap","aSelectedContexts","getSelectedContexts","aDeletableContexts","bReadOnlyDraftEnabled","data","aUpdatableContexts","oDynamicActions","oIBN","oInternalModelContext","getBindingContext","filter","oContext","isInactive","oModelObject","Object","assign","getObject","selectedContexts","numberOfSelectedContexts","length","dynamicActions","ibn","deleteEnabled","deletableContexts","unSavedContexts","lockedContexts","draftsWithNonDeletableActive","draftsWithDeletableActive","createModeContexts","controlId","updatableContexts","semanticKeyHasDraftIndicator","getProperty","undefined","oSelectedContext","oContextData","key","indexOf","sActionPath","substring","enabled","setProperty","bUpdatableByPath","bNotDraftInReadOnlyMode","IsActiveEntity","push","deleteHelper","updateDeleteInfoForSelectedContexts","TableHelper","setIBNEnablement","disableAction","ActionRuntime","setActionEnablement","forEach","sAction","bEnabled","onFieldChangeInCreationRow","oCustomValidationFunction","mField","FieldRuntime","getFieldStateOnChange","oSourceField","field","sFieldId","mFieldValidity","mNewFieldValidity","state","mCustomValidity","mNewCustomValidity","getBinding","getPath","fieldId","oMessageManager","getMessageManager","sTarget","getBindingPath","getMessageModel","getData","oMessage","target","removeMessages"],"sourceRoot":"table","sources":["TableRuntime.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport ActionRuntime from \"sap/fe/core/ActionRuntime\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport BusyLocker from \"sap/fe/core/controllerextensions/BusyLocker\";\nimport deleteHelper from \"sap/fe/core/helpers/DeleteHelper\";\nimport type { InternalModelContext } from \"sap/fe/core/helpers/ModelHelper\";\nimport FELibrary from \"sap/fe/core/library\";\nimport FieldRuntime from \"sap/fe/macros/field/FieldRuntime\";\nimport TableHelper from \"sap/fe/macros/table/TableHelper\";\nimport Button from \"sap/m/Button\";\nimport type Table from \"sap/ui/mdc/Table\";\nimport { V4Context } from \"types/extension_types\";\n\nconst CreationMode = FELibrary.CreationMode;\n/**\n * Static class used by Table building block during runtime\n *\n * @private\n * @experimental This module is only for internal/experimental use!\n */\nconst TableRuntime = {\n\tdisplayTableSettings: function (oEvent: any) {\n\t\t/*\n\t\t\t\t Temporary solution\n\t\t\t\t Wait for mdc Table to provide public api to either get button 'Settings' or fire event on this button\n\t\t\t\t */\n\t\tconst oParent = oEvent.getSource().getParent(),\n\t\t\toSettingsButton = sap.ui.getCore().byId(`${oParent.getId()}-settings`);\n\t\tCommonUtils.fireButtonPress(oSettingsButton as Button);\n\t},\n\texecuteConditionalActionShortcut: function (sButtonMatcher: any, oSource: any) {\n\t\t// Get the button related to keyboard shortcut\n\t\tconst oMdcTable = oSource.getParent();\n\t\tif (sButtonMatcher !== CreationMode.CreationRow) {\n\t\t\tconst oButton = oMdcTable\n\t\t\t\t.getActions()\n\t\t\t\t.reduce(function (aActionButtons: any, oActionToolbarAction: any) {\n\t\t\t\t\treturn aActionButtons.concat(oActionToolbarAction.getAction());\n\t\t\t\t}, [])\n\t\t\t\t.find(function (oActionButton: any) {\n\t\t\t\t\treturn oActionButton.getId().endsWith(sButtonMatcher);\n\t\t\t\t});\n\t\t\tCommonUtils.fireButtonPress(oButton);\n\t\t} else {\n\t\t\tconst oCreationRow = oMdcTable.getAggregation(\"creationRow\");\n\t\t\tif (oCreationRow && oCreationRow.getApplyEnabled() && oCreationRow.getVisible()) {\n\t\t\t\toCreationRow.fireApply();\n\t\t\t}\n\t\t}\n\t},\n\n\tsetContexts: function (\n\t\toTable: Table,\n\t\tsDeletablePath: string,\n\t\tdraft: string,\n\t\tsCollection: string,\n\t\tsNavigationAvailableMap: string,\n\t\tsActionsMultiselectDisabled: string,\n\t\tsUpdatablePath: string\n\t) {\n\t\tBusyLocker.lock(oTable);\n\t\treturn TableRuntime.setContextsAsync(\n\t\t\toTable,\n\t\t\tsDeletablePath,\n\t\t\tdraft,\n\t\t\tsCollection,\n\t\t\tsNavigationAvailableMap,\n\t\t\tsActionsMultiselectDisabled,\n\t\t\tsUpdatablePath\n\t\t)\n\t\t\t.then(() => {\n\t\t\t\tLog.info(\"Selections updated\");\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tLog.error(error);\n\t\t\t})\n\t\t\t.finally(() => {\n\t\t\t\tBusyLocker.unlock(oTable);\n\t\t\t});\n\t},\n\n\tsetContextsAsync: async function (\n\t\toTable: Table,\n\t\tsDeletablePath: string,\n\t\tdraft: string,\n\t\tsCollection: string,\n\t\tsNavigationAvailableMap: string,\n\t\tsActionsMultiselectDisabled: string,\n\t\tsUpdatablePath: string\n\t): Promise<void[] | undefined> {\n\t\ttry {\n\t\t\tconst aActionsMultiselectDisabled = sActionsMultiselectDisabled ? sActionsMultiselectDisabled.split(\",\") : [];\n\t\t\tconst oActionOperationAvailableMap = JSON.parse(sCollection);\n\t\t\tconst oNavigationAvailableMap =\n\t\t\t\tsNavigationAvailableMap && sNavigationAvailableMap !== \"undefined\" && JSON.parse(sNavigationAvailableMap);\n\t\t\tlet aSelectedContexts = oTable.getSelectedContexts() as V4Context[];\n\t\t\tconst aDeletableContexts: V4Context[] = [];\n\t\t\tconst bReadOnlyDraftEnabled = oTable.data(\"displayModePropertyBinding\") === \"true\" && draft !== \"undefined\";\n\t\t\tconst aUpdatableContexts: V4Context[] = [];\n\t\t\t// oDynamicActions are bound actions that are available according to some property\n\t\t\t// in each item\n\t\t\tconst oDynamicActions: Record<string, unknown> | undefined = {};\n\t\t\tconst oIBN = {};\n\t\t\tconst oInternalModelContext = oTable.getBindingContext(\"internal\") as InternalModelContext;\n\n\t\t\tif (!oInternalModelContext) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t//do not consider empty rows as selected context\n\t\t\taSelectedContexts = aSelectedContexts.filter(function (oContext: V4Context) {\n\t\t\t\treturn !oContext.isInactive();\n\t\t\t});\n\n\t\t\tconst oModelObject = Object.assign(oInternalModelContext.getObject() || {}, {\n\t\t\t\tselectedContexts: aSelectedContexts,\n\t\t\t\tnumberOfSelectedContexts: aSelectedContexts.length,\n\t\t\t\tdynamicActions: oDynamicActions,\n\t\t\t\tibn: oIBN,\n\t\t\t\tdeleteEnabled: true,\n\t\t\t\tdeletableContexts: aDeletableContexts,\n\t\t\t\tunSavedContexts: [],\n\t\t\t\tlockedContexts: [],\n\t\t\t\tdraftsWithNonDeletableActive: [],\n\t\t\t\tdraftsWithDeletableActive: [],\n\t\t\t\tcreateModeContexts: [],\n\t\t\t\tcontrolId: \"\",\n\t\t\t\tupdatableContexts: aUpdatableContexts,\n\t\t\t\tsemanticKeyHasDraftIndicator: oInternalModelContext.getProperty(\"semanticKeyHasDraftIndicator\")\n\t\t\t\t\t? oInternalModelContext.getProperty(\"semanticKeyHasDraftIndicator\")\n\t\t\t\t\t: undefined\n\t\t\t});\n\n\t\t\tfor (const oSelectedContext of aSelectedContexts) {\n\t\t\t\tconst oContextData = oSelectedContext.getObject();\n\t\t\t\tfor (const key in oContextData) {\n\t\t\t\t\tif (key.indexOf(\"#\") === 0) {\n\t\t\t\t\t\tlet sActionPath: string = key;\n\t\t\t\t\t\tsActionPath = sActionPath.substring(1, sActionPath.length);\n\t\t\t\t\t\toModelObject.dynamicActions[sActionPath] = { enabled: true };\n\t\t\t\t\t\toInternalModelContext.setProperty(\"\", oModelObject);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// The updatable contexts with mass edit depend on the following:\n\t\t\t\t// 1. Update is dependendent on current entity property (sUpdatablePath).\n\t\t\t\t// 2. The table is read only and draft enabled(like LR), in this case only active contexts can be mass edited(not draft contexts).\n\t\t\t\t//    So, update depends on 'IsActiveEntity' value which needs to be checked.\n\t\t\t\tconst bUpdatableByPath = sUpdatablePath.length === 0 || !!oSelectedContext.getProperty(sUpdatablePath);\n\t\t\t\tconst bNotDraftInReadOnlyMode = !bReadOnlyDraftEnabled || oContextData.IsActiveEntity;\n\t\t\t\tif (bUpdatableByPath && bNotDraftInReadOnlyMode) {\n\t\t\t\t\taUpdatableContexts.push(oSelectedContext);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdeleteHelper.updateDeleteInfoForSelectedContexts(oInternalModelContext, aSelectedContexts);\n\n\t\t\tif (!oTable.data(\"enableAnalytics\")) {\n\t\t\t\tTableHelper.setIBNEnablement(oInternalModelContext, oNavigationAvailableMap, aSelectedContexts);\n\t\t\t}\n\n\t\t\tif (aSelectedContexts.length > 1) {\n\t\t\t\tthis.disableAction(aActionsMultiselectDisabled, oDynamicActions);\n\t\t\t}\n\n\t\t\tif (oModelObject) {\n\t\t\t\toModelObject[\"updatableContexts\"] = aUpdatableContexts;\n\t\t\t\toModelObject[\"controlId\"] = oTable.getId();\n\t\t\t\toInternalModelContext.setProperty(\"\", oModelObject);\n\t\t\t}\n\n\t\t\treturn ActionRuntime.setActionEnablement(oInternalModelContext, oActionOperationAvailableMap, aSelectedContexts, \"table\");\n\t\t} catch (error) {\n\t\t\tthrow error;\n\t\t}\n\t},\n\n\tdisableAction: function (aActionsMultiselectDisabled: any, oDynamicActions: any) {\n\t\taActionsMultiselectDisabled.forEach(function (sAction: any) {\n\t\t\toDynamicActions[sAction] = { bEnabled: false };\n\t\t});\n\t},\n\tonFieldChangeInCreationRow: function (oEvent: any, oCustomValidationFunction: any) {\n\t\t// CREATION ROW CASE\n\t\tconst mField = FieldRuntime.getFieldStateOnChange(oEvent),\n\t\t\toSourceField = mField.field,\n\t\t\tsFieldId = oSourceField.getId();\n\n\t\tconst oInternalModelContext = oSourceField.getBindingContext(\"internal\"),\n\t\t\tmFieldValidity = oInternalModelContext.getProperty(\"creationRowFieldValidity\"),\n\t\t\tmNewFieldValidity = Object.assign({}, mFieldValidity);\n\n\t\tmNewFieldValidity[sFieldId] = mField.state;\n\t\toInternalModelContext.setProperty(\"creationRowFieldValidity\", mNewFieldValidity);\n\n\t\t// prepare Custom Validation\n\t\tif (oCustomValidationFunction) {\n\t\t\tconst mCustomValidity = oInternalModelContext.getProperty(\"creationRowCustomValidity\"),\n\t\t\t\tmNewCustomValidity = Object.assign({}, mCustomValidity);\n\t\t\tmNewCustomValidity[oSourceField.getBinding(\"value\").getPath()] = {\n\t\t\t\tfieldId: oSourceField.getId()\n\t\t\t};\n\t\t\toInternalModelContext.setProperty(\"creationRowCustomValidity\", mNewCustomValidity);\n\t\t\t// Remove existing CustomValidation message\n\t\t\tconst oMessageManager = sap.ui.getCore().getMessageManager();\n\t\t\tconst sTarget = `${oSourceField.getBindingContext().getPath()}/${oSourceField.getBindingPath(\"value\")}`;\n\t\t\toMessageManager\n\t\t\t\t.getMessageModel()\n\t\t\t\t.getData()\n\t\t\t\t.forEach(function (oMessage: any) {\n\t\t\t\t\tif (oMessage.target === sTarget) {\n\t\t\t\t\t\toMessageManager.removeMessages(oMessage);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t}\n};\n\nexport default TableRuntime;\n"],"mappings":"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"}},{"offset":{"line":25971,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","ActionRuntime","CommonUtils","BusyLocker","deleteHelper","FELibrary","FieldRuntime","TableHelper","CreationMode","TableRuntime","displayTableSettings","oEvent","oParent","getSource","getParent","oSettingsButton","getCore","byId","getId","fireButtonPress","executeConditionalActionShortcut","sButtonMatcher","oSource","oMdcTable","CreationRow","oButton","getActions","reduce","aActionButtons","oActionToolbarAction","concat","getAction","find","oActionButton","endsWith","oCreationRow","getAggregation","getApplyEnabled","getVisible","fireApply","setContexts","oTable","sDeletablePath","draft","sCollection","sNavigationAvailableMap","sActionsMultiselectDisabled","sUpdatablePath","lock","setContextsAsync","then","info","catch","error","finally","unlock","async","aActionsMultiselectDisabled","split","oActionOperationAvailableMap","JSON","parse","oNavigationAvailableMap","aSelectedContexts","getSelectedContexts","aDeletableContexts","bReadOnlyDraftEnabled","data","aUpdatableContexts","oDynamicActions","oIBN","oInternalModelContext","getBindingContext","filter","oContext","isInactive","oModelObject","Object","assign","getObject","selectedContexts","numberOfSelectedContexts","length","dynamicActions","ibn","deleteEnabled","deletableContexts","unSavedContexts","lockedContexts","draftsWithNonDeletableActive","draftsWithDeletableActive","createModeContexts","controlId","updatableContexts","semanticKeyHasDraftIndicator","getProperty","undefined","oSelectedContext","oContextData","key","indexOf","sActionPath","substring","enabled","setProperty","bUpdatableByPath","bNotDraftInReadOnlyMode","IsActiveEntity","push","updateDeleteInfoForSelectedContexts","setIBNEnablement","this","disableAction","setActionEnablement","forEach","sAction","bEnabled","onFieldChangeInCreationRow","oCustomValidationFunction","mField","getFieldStateOnChange","oSourceField","field","sFieldId","mFieldValidity","mNewFieldValidity","state","mCustomValidity","mNewCustomValidity","getBinding","getPath","fieldId","oMessageManager","getMessageManager","sTarget","getBindingPath","getMessageModel","getData","oMessage","target","removeMessages"],"sources":["TableRuntime-dbg.js"],"mappings":"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","sourceRoot":"table"}},{"offset":{"line":25976,"column":0},"map":{"version":3,"names":["TableSizeHelper","nbCalls","oBtn","undefined","propertyHelper","init","Button","placeAt","sap","ui","getCore","getStaticAreaRef","setVisible","getButtonWidth","text","getVisible","setText","rerender","nButtonWidth","Rem","fromPx","getDomRef","scrollWidth","Math","round","getMDCColumnWidthFromDataField","dataField","properties","convertedMetaData","includeLabel","property","find","prop","metadataPath","resolvePath","target","fullyQualifiedName","getMDCColumnWidthFromProperty","mWidthCalculation","Object","assign","gap","truncateLabel","excludeProperties","visualSettings","widthCalculation","types","propertyInfos","length","map","propName","_property","name","typeConfig","typeInstance","filter","item","sSize","TableUtil","calcColumnWidth","label","Log","error","parseFloat","replace","_getPropertyHelperCache","sTableId","_setPropertyHelperCache","oPropertyHelper","getWidthForDataFieldForAnnotation","showDataFieldsLabel","oTargetedProperty","Target","$target","nPropertyWidth","fLabelWidth","Visualization","nbStars","TargetValue","parseInt","sLabel","Label","$Type","fn","labelWidth","propertyWidth","getWidthForDataField","Value","oTextArrangementTarget","annotations","Common","Text","displayMode","getDisplayMode","_getPropertiesByPath","aProperties","sPath","oProperty","path","exit","destroy"],"sourceRoot":"table","sources":["TableSizeHelper.ts"],"sourcesContent":["import { ConvertedMetadata } from \"@sap-ux/vocabularies-types/Edm\";\nimport { CommunicationAnnotationTypes } from \"@sap-ux/vocabularies-types/vocabularies/Communication\";\nimport { DataField, DataFieldForAnnotation } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport { AnnotationTableColumn } from \"sap/fe/core/converters/controls/Common/Table\";\nimport { getDisplayMode } from \"sap/fe/core/templating/DisplayModeFormatter\";\nimport Button from \"sap/m/Button\";\nimport TableUtil from \"sap/m/table/Util\";\nimport Rem from \"sap/ui/dom/units/Rem\";\nimport { PropertyInfo } from \"../DelegateUtil\";\n\nconst TableSizeHelper = {\n\tnbCalls: 0,\n\toBtn: undefined as any,\n\tpropertyHelper: undefined as any,\n\tinit: function () {\n\t\t// Create a new button in static area sap.ui.getCore().getStaticAreaRef()\n\t\tthis.nbCalls = this.nbCalls ? this.nbCalls : 0;\n\t\tthis.nbCalls++;\n\t\tthis.oBtn = this.oBtn ? this.oBtn : new Button().placeAt(sap.ui.getCore().getStaticAreaRef());\n\t\t// Hide button from accessibility tree\n\t\tthis.oBtn.setVisible(false);\n\t},\n\t/**\n\t * Method to calculate the width of the button from a temporarily created button placed in the static area.\n\t *\n\t * @param text The text to measure inside the Button.\n\t * @returns The value of the Button width.\n\t */\n\tgetButtonWidth: function (text?: string): number {\n\t\tif (!text) {\n\t\t\treturn 0;\n\t\t}\n\t\tif (this.oBtn.getVisible() === false) {\n\t\t\tthis.oBtn.setVisible(true);\n\t\t}\n\t\tthis.oBtn.setText(text);\n\t\t//adding missing styles from buttons inside a table\n\t\t// for sync rendering\n\t\tthis.oBtn.rerender();\n\t\tconst nButtonWidth = Rem.fromPx(this.oBtn.getDomRef().scrollWidth);\n\t\tthis.oBtn.setVisible(false);\n\t\treturn Math.round(nButtonWidth * 100) / 100;\n\t},\n\n\t/**\n\t * Method to calculate the width of the MDCColumn.\n\t *\n\t * @param dataField The Property or PropertyInfo Object for which the width will be calculated.\n\t * @param properties An array containing all property definitions (optional)\n\t * @param convertedMetaData\n\t * @param includeLabel Indicates if the label should be part of the width calculation\n\t * @private\n\t * @alias sap.fe.macros.TableSizeHelper\n\t * @returns The width of the column.\n\t */\n\tgetMDCColumnWidthFromDataField: function (\n\t\tdataField: DataField,\n\t\tproperties: PropertyInfo[],\n\t\tconvertedMetaData: ConvertedMetadata,\n\t\tincludeLabel = false\n\t): number {\n\t\tconst property = properties.find(\n\t\t\t(prop) =>\n\t\t\t\tprop.metadataPath &&\n\t\t\t\t(convertedMetaData.resolvePath(prop.metadataPath) as any)?.target?.fullyQualifiedName === dataField.fullyQualifiedName\n\t\t);\n\t\treturn property ? this.getMDCColumnWidthFromProperty(property, properties, includeLabel) : 0;\n\t},\n\n\tgetMDCColumnWidthFromProperty: function (property: PropertyInfo, properties: PropertyInfo[], includeLabel = false): number {\n\t\tconst mWidthCalculation = Object.assign(\n\t\t\t{\n\t\t\t\tgap: 0,\n\t\t\t\ttruncateLabel: !includeLabel,\n\t\t\t\texcludeProperties: []\n\t\t\t},\n\t\t\tproperty.visualSettings?.widthCalculation\n\t\t);\n\n\t\tlet types;\n\n\t\tif (property.propertyInfos?.length) {\n\t\t\ttypes = property.propertyInfos\n\t\t\t\t.map((propName) => {\n\t\t\t\t\tconst prop = properties.find((_property) => _property.name === propName);\n\t\t\t\t\treturn prop?.typeConfig?.typeInstance;\n\t\t\t\t})\n\t\t\t\t.filter((item) => item);\n\t\t} else if (property?.typeConfig?.typeInstance) {\n\t\t\ttypes = [property?.typeConfig.typeInstance];\n\t\t}\n\t\tconst sSize = types ? TableUtil.calcColumnWidth(types, property.label, mWidthCalculation) : null;\n\t\tif (!sSize) {\n\t\t\tLog.error(`Cannot compute the column width for property: ${property.name}`);\n\t\t}\n\t\treturn sSize ? parseFloat(sSize.replace(\"Rem\", \"\")) : 0;\n\t},\n\n\t_getPropertyHelperCache: function (sTableId: any) {\n\t\treturn this.propertyHelper && this.propertyHelper[sTableId];\n\t},\n\t_setPropertyHelperCache: function (sTableId: any, oPropertyHelper: any) {\n\t\tthis.propertyHelper = Object.assign({}, this.propertyHelper);\n\t\tthis.propertyHelper[sTableId] = oPropertyHelper;\n\t},\n\n\t/**\n\t * Method to calculate the  width of a DataFieldAnnotation object contained in a fieldGroup.\n\t *\n\t * @param dataField DataFieldAnnotation object.\n\t * @param properties Array containing all PropertyInfo objects.\n\t * @param convertedMetaData\n\t * @param showDataFieldsLabel Label is displayed inside the field\n\t * @private\n\t * @alias sap.fe.macros.TableSizeHelper\n\t * @returns Object containing the width of the label and the width of the property.\n\t */\n\tgetWidthForDataFieldForAnnotation: function (\n\t\tdataField: DataFieldForAnnotation,\n\t\tproperties?: PropertyInfo[],\n\t\tconvertedMetaData?: ConvertedMetadata,\n\t\tshowDataFieldsLabel = false\n\t) {\n\t\tconst oTargetedProperty = dataField?.Target?.$target as any;\n\t\tlet nPropertyWidth = 0,\n\t\t\tfLabelWidth = 0;\n\t\tif (oTargetedProperty?.Visualization) {\n\t\t\tswitch (oTargetedProperty.Visualization) {\n\t\t\t\tcase \"UI.VisualizationType/Rating\":\n\t\t\t\t\tconst nbStars = oTargetedProperty.TargetValue;\n\t\t\t\t\tnPropertyWidth = parseInt(nbStars, 10) * 1.375;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"UI.VisualizationType/Progress\":\n\t\t\t\tdefault:\n\t\t\t\t\tnPropertyWidth = 5;\n\t\t\t}\n\t\t\tconst sLabel = oTargetedProperty ? oTargetedProperty.label : dataField.Label || \"\";\n\t\t\tfLabelWidth = showDataFieldsLabel && sLabel ? TableSizeHelper.getButtonWidth(sLabel) : 0;\n\t\t} else if (convertedMetaData && properties && oTargetedProperty?.$Type === CommunicationAnnotationTypes.ContactType) {\n\t\t\tnPropertyWidth = this.getMDCColumnWidthFromDataField(oTargetedProperty.fn.$target, properties, convertedMetaData, false);\n\t\t}\n\t\treturn { labelWidth: fLabelWidth, propertyWidth: nPropertyWidth };\n\t},\n\n\t/**\n\t * Method to calculate the width of a DataField object.\n\t *\n\t * @param dataField DataFieldAnnotation object.\n\t * @param showDataFieldsLabel Label is displayed inside the field.\n\t * @param properties Array containing all PropertyInfo objects.\n\t * @param convertedMetaData Context Object of the parent property.\n\t * @private\n\t * @alias sap.fe.macros.TableSizeHelper\n\t * @returns {object} Object containing the width of the label and the width of the property.\n\t */\n\n\tgetWidthForDataField: function (\n\t\tdataField: DataField,\n\t\tshowDataFieldsLabel: boolean,\n\t\tproperties: PropertyInfo[],\n\t\tconvertedMetaData: ConvertedMetadata\n\t) {\n\t\tconst oTargetedProperty = dataField.Value?.$target,\n\t\t\toTextArrangementTarget = oTargetedProperty?.annotations?.Common?.Text,\n\t\t\tdisplayMode = getDisplayMode(dataField.Value?.$target);\n\n\t\tlet nPropertyWidth = 0,\n\t\t\tfLabelWidth = 0;\n\t\tif (oTargetedProperty) {\n\t\t\tswitch (displayMode) {\n\t\t\t\tcase \"Description\":\n\t\t\t\t\tnPropertyWidth =\n\t\t\t\t\t\tthis.getMDCColumnWidthFromDataField(oTextArrangementTarget.$target, properties, convertedMetaData, false) - 1;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"DescriptionValue\":\n\t\t\t\tcase \"ValueDescription\":\n\t\t\t\tcase \"Value\":\n\t\t\t\tdefault:\n\t\t\t\t\tnPropertyWidth = this.getMDCColumnWidthFromDataField(oTargetedProperty, properties, convertedMetaData, false) - 1;\n\t\t\t}\n\t\t\tconst sLabel = dataField.Label ? dataField.Label : oTargetedProperty.label;\n\t\t\tfLabelWidth = showDataFieldsLabel && sLabel ? TableSizeHelper.getButtonWidth(sLabel) : 0;\n\t\t} else {\n\t\t\tLog.error(`Cannot compute width for type object: ${dataField.$Type}`);\n\t\t}\n\t\treturn { labelWidth: fLabelWidth, propertyWidth: nPropertyWidth };\n\t},\n\n\t_getPropertiesByPath: function (aProperties: AnnotationTableColumn[], sPath: any): AnnotationTableColumn | undefined {\n\t\treturn aProperties.find(function (oProperty: any) {\n\t\t\treturn oProperty.path === sPath;\n\t\t});\n\t},\n\n\texit: function () {\n\t\tthis.nbCalls--;\n\t\tif (this.nbCalls === 0) {\n\t\t\tthis.oBtn.destroy();\n\t\t\tthis.oBtn = null;\n\t\t}\n\t}\n};\n\nexport default TableSizeHelper;\n"],"mappings":"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"}},{"offset":{"line":26159,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","DisplayModeFormatter","Button","TableUtil","Rem","getDisplayMode","TableSizeHelper","nbCalls","oBtn","undefined","propertyHelper","init","this","placeAt","getCore","getStaticAreaRef","setVisible","getButtonWidth","text","getVisible","setText","rerender","nButtonWidth","fromPx","getDomRef","scrollWidth","Math","round","getMDCColumnWidthFromDataField","dataField","properties","convertedMetaData","includeLabel","arguments","length","property","find","prop","_convertedMetaData$re","_convertedMetaData$re2","metadataPath","resolvePath","target","fullyQualifiedName","getMDCColumnWidthFromProperty","_property$visualSetti","_property$propertyInf","_property$typeConfig","mWidthCalculation","Object","assign","gap","truncateLabel","excludeProperties","visualSettings","widthCalculation","types","propertyInfos","map","propName","_prop$typeConfig","_property","name","typeConfig","typeInstance","filter","item","sSize","calcColumnWidth","label","error","parseFloat","replace","_getPropertyHelperCache","sTableId","_setPropertyHelperCache","oPropertyHelper","getWidthForDataFieldForAnnotation","_dataField$Target","showDataFieldsLabel","oTargetedProperty","Target","$target","nPropertyWidth","fLabelWidth","Visualization","nbStars","TargetValue","parseInt","sLabel","Label","$Type","fn","labelWidth","propertyWidth","getWidthForDataField","_dataField$Value","_oTargetedProperty$an","_oTargetedProperty$an2","_dataField$Value2","Value","oTextArrangementTarget","annotations","Common","Text","displayMode","_getPropertiesByPath","aProperties","sPath","oProperty","path","exit","destroy"],"sources":["TableSizeHelper-dbg.js"],"mappings":"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","sourceRoot":"table"}},{"offset":{"line":26164,"column":0},"map":{"version":3,"names":["getFiltersInfoForSV","oTable","sSvPath","sEntityTypePath","data","oMetaModel","CommonUtils","getAppComponent","getMetaModel","oSelectionVariant","getObject","mPropertyFilters","aFilters","aPaths","sText","Text","SelectOptions","filter","oSelectOption","PropertyName","$PropertyPath","forEach","sPath","includes","push","j","Ranges","oRange","concat","Filter","Option","$EnumMember","split","pop","Low","High","sPropertyPath","filters","and","properties","text","getHiddenFilters","hiddenFilters","Array","isArray","paths","mPath","oSvFilter","annotationPath","getQuickFilter","sQuickFilterKey","DelegateUtil","getCustomData","getTableFilters","getListBindingForCount","oPageBinding","oParams","countBinding","oBindingInfo","oDataModel","getModel","sBatchId","batchGroupId","oFilterInfo","getFilterInfo","additionalFilters","sBindingPath","bindingPath","path","getP13nFilters","oTableContextFilter","oListBinding","bindList","getPath","getBindingContext","fetchFilter","getContext","then","aStringFilters","bindProperty","$$groupId","$filter","$search","search","requestValue","iValue","destroy","getCountFormatted","iCount","oCountFormatter","NumberFormat","getIntegerInstance","groupingEnabled","format","oTableDefinition","getParent","getTableDefinition","aIgnoreProperties","_getRelativePathArrayFromAggregates","oSubTable","mAggregates","aggregates","Object","keys","map","sAggregateName","relativePath","enableAnalytics","enableAnalyticsSearch","FilterUtils","getFilter","ignoredProperties","targetControl","aP13nMode","getP13nMode","indexOf","aP13nProperties","oTableProperty","filterable","propertiesMetadata","getAllFilterInfo","oIFilterInfo","whenBound","_getOrCreateBoundPromiseInfo","promise","onTableBound","oBoundPromiseInfo","resolve","fnResolve","Promise","isBound","updateBindingInfo","oFilter","parameters","normalizeSearchTerm","undefined","fnGetSemanticTargetsFromTable","oController","oView","getView","oInternalModelContext","sEntitySet","oComponent","getOwnerComponent","oAppComponent","Component","getOwnerComponentFor","oShellServiceHelper","getShellServices","sCurrentHash","FieldRuntime","_fnFixHashQueryString","getHash","oColumns","columns","aSemanticObjectsForGetLinks","aSemanticObjects","aPathAlreadyProcessed","sAnnotationPath","oProperty","_oSemanticObject","aSemanticObjectsPromises","sQualifier","regexResult","i","length","$kind","$Type","_Keys","index","exec","getSemanticObjectPromise","all","aValues","aGetLinksPromises","sSemObjExpression","aSemanticObjectsResolved","element","semanticObject","compileExpression","pathInModel","$Path","semanticObjectForGetLinks","unavailableActions","semanticObjectPath","getLinksWithCache","updateSemanticTargets","catch","oError","Log","error","clearSelection","setProperty","oTableUtils","getSemanticTargetsFromTable"],"sourceRoot":"table","sources":["Utils.ts"],"sourcesContent":["import { CommonAnnotationTerms } from \"@sap-ux/vocabularies-types/vocabularies/Common\";\nimport Log from \"sap/base/Log\";\nimport type AppComponent from \"sap/fe/core/AppComponent\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport { compileExpression, pathInModel } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { InternalModelContext } from \"sap/fe/core/helpers/ModelHelper\";\nimport type PageController from \"sap/fe/core/PageController\";\nimport DelegateUtil from \"sap/fe/macros/DelegateUtil\";\nimport FieldRuntime from \"sap/fe/macros/field/FieldRuntime\";\nimport FilterUtils from \"sap/fe/macros/filter/FilterUtils\";\nimport type TableAPI from \"sap/fe/macros/table/TableAPI\";\nimport Component from \"sap/ui/core/Component\";\nimport type Control from \"sap/ui/core/Control\";\nimport NumberFormat from \"sap/ui/core/format/NumberFormat\";\nimport type Table from \"sap/ui/mdc/Table\";\nimport type Context from \"sap/ui/model/Context\";\nimport Filter from \"sap/ui/model/Filter\";\nimport type ODataV4ListBinding from \"sap/ui/model/odata/v4/ODataListBinding\";\n\n/**\n * Get filter information for a SelectionVariant annotation.\n *\n * @param oTable The table instance\n * @param sSvPath Relative SelectionVariant annotation path\n * @returns Information on filters\n *  filters: array of sap.ui.model.filters\n * text: selection Variant text property\n * @private\n * @ui5-restricted\n */\nfunction getFiltersInfoForSV(oTable: any, sSvPath: string) {\n\tconst sEntityTypePath = oTable.data(\"entityType\"),\n\t\toMetaModel = CommonUtils.getAppComponent(oTable).getMetaModel(),\n\t\toSelectionVariant = oMetaModel.getObject(`${sEntityTypePath}${sSvPath}`),\n\t\tmPropertyFilters: any = {},\n\t\taFilters = [],\n\t\taPaths: any[] = [];\n\tlet sText = \"\";\n\tif (oSelectionVariant) {\n\t\tsText = oSelectionVariant.Text;\n\t\t(oSelectionVariant.SelectOptions || [])\n\t\t\t.filter(function (oSelectOption: any) {\n\t\t\t\treturn oSelectOption && oSelectOption.PropertyName && oSelectOption.PropertyName.$PropertyPath;\n\t\t\t})\n\t\t\t.forEach(function (oSelectOption: any) {\n\t\t\t\tconst sPath = oSelectOption.PropertyName.$PropertyPath;\n\t\t\t\tif (!aPaths.includes(sPath)) {\n\t\t\t\t\taPaths.push(sPath);\n\t\t\t\t}\n\t\t\t\tfor (const j in oSelectOption.Ranges) {\n\t\t\t\t\tconst oRange = oSelectOption.Ranges[j];\n\t\t\t\t\tmPropertyFilters[sPath] = (mPropertyFilters[sPath] || []).concat(\n\t\t\t\t\t\tnew Filter(sPath, oRange.Option.$EnumMember.split(\"/\").pop(), oRange.Low, oRange.High)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\n\t\tfor (const sPropertyPath in mPropertyFilters) {\n\t\t\taFilters.push(\n\t\t\t\tnew Filter({\n\t\t\t\t\tfilters: mPropertyFilters[sPropertyPath],\n\t\t\t\t\tand: false\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n\n\treturn {\n\t\tproperties: aPaths,\n\t\tfilters: aFilters,\n\t\ttext: sText\n\t};\n}\nfunction getHiddenFilters(oTable: Control) {\n\tlet aFilters: any[] = [];\n\tconst hiddenFilters = oTable.data(\"hiddenFilters\");\n\tif (hiddenFilters && Array.isArray(hiddenFilters.paths)) {\n\t\thiddenFilters.paths.forEach(function (mPath: any) {\n\t\t\tconst oSvFilter = getFiltersInfoForSV(oTable, mPath.annotationPath);\n\t\t\taFilters = aFilters.concat(oSvFilter.filters);\n\t\t});\n\t}\n\treturn aFilters;\n}\nfunction getQuickFilter(oTable: Control) {\n\tlet aFilters: any[] = [];\n\tconst sQuickFilterKey = DelegateUtil.getCustomData(oTable, \"quickFilterKey\");\n\tif (sQuickFilterKey) {\n\t\taFilters = aFilters.concat(getFiltersInfoForSV(oTable, sQuickFilterKey).filters);\n\t}\n\treturn aFilters;\n}\nfunction getTableFilters(oTable: Control) {\n\treturn getQuickFilter(oTable).concat(getHiddenFilters(oTable));\n}\nfunction getListBindingForCount(oTable: Table, oPageBinding: any, oParams: any) {\n\tlet countBinding!: any;\n\tconst oBindingInfo = oTable.data(\"rowsBindingInfo\"),\n\t\toDataModel = oTable.getModel();\n\tconst sBatchId = oParams.batchGroupId || \"\",\n\t\toFilterInfo = getFilterInfo(oTable);\n\tlet aFilters = Array.isArray(oParams.additionalFilters) ? oParams.additionalFilters : [];\n\tconst sBindingPath = oFilterInfo.bindingPath ? oFilterInfo.bindingPath : oBindingInfo.path;\n\n\taFilters = aFilters.concat(oFilterInfo.filters).concat(getP13nFilters(oTable));\n\tconst oTableContextFilter = new Filter({\n\t\tfilters: aFilters,\n\t\tand: true\n\t});\n\n\t// Need to pass by a temporary ListBinding in order to get $filter query option (as string) thanks to fetchFilter of OdataListBinding\n\tconst oListBinding = oDataModel.bindList(\n\t\t(oPageBinding ? `${oPageBinding.getPath()}/` : \"\") + sBindingPath,\n\t\toTable.getBindingContext() as Context,\n\t\t[],\n\t\toTableContextFilter\n\t) as ODataV4ListBinding;\n\n\treturn (oListBinding as any)\n\t\t.fetchFilter(oListBinding.getContext())\n\t\t.then(function (aStringFilters: string[]) {\n\t\t\tcountBinding = oDataModel.bindProperty(`${oListBinding.getPath()}/$count`, oListBinding.getContext(), {\n\t\t\t\t$$groupId: sBatchId || \"$auto\",\n\t\t\t\t$filter: aStringFilters[0],\n\t\t\t\t$search: oFilterInfo.search\n\t\t\t});\n\t\t\treturn countBinding.requestValue();\n\t\t})\n\t\t.then(function (iValue: any) {\n\t\t\tcountBinding.destroy();\n\t\t\toListBinding.destroy();\n\t\t\treturn iValue;\n\t\t});\n}\nfunction getCountFormatted(iCount: any) {\n\tconst oCountFormatter = NumberFormat.getIntegerInstance({ groupingEnabled: true });\n\treturn oCountFormatter.format(iCount);\n}\nfunction getFilterInfo(oTable: any) {\n\tconst oTableDefinition = oTable.getParent().getTableDefinition();\n\tlet aIgnoreProperties: any[] = [];\n\n\tfunction _getRelativePathArrayFromAggregates(oSubTable: Table) {\n\t\tconst mAggregates = (oSubTable.getParent() as TableAPI).getTableDefinition().aggregates as any;\n\t\treturn Object.keys(mAggregates).map(function (sAggregateName) {\n\t\t\treturn mAggregates[sAggregateName].relativePath;\n\t\t});\n\t}\n\n\tif (oTableDefinition.enableAnalytics) {\n\t\taIgnoreProperties = aIgnoreProperties.concat(_getRelativePathArrayFromAggregates(oTable));\n\n\t\tif (!oTableDefinition.enableAnalyticsSearch) {\n\t\t\t// Search isn't allow as a $apply transformation for this table\n\t\t\taIgnoreProperties = aIgnoreProperties.concat([\"search\"]);\n\t\t}\n\t}\n\treturn FilterUtils.getFilterInfo(oTable.getFilter(), {\n\t\tignoredProperties: aIgnoreProperties,\n\t\ttargetControl: oTable\n\t});\n}\n\n/**\n * Retrieves all filters configured in Table filter personalization dialog.\n *\n * @param oTable Table instance\n * @returns Filters configured in table personalization dialog\n * @private\n * @ui5-restricted\n */\nfunction getP13nFilters(oTable: Table) {\n\tconst aP13nMode = oTable.getP13nMode();\n\tif (aP13nMode && aP13nMode.indexOf(\"Filter\") > -1) {\n\t\tconst aP13nProperties = (DelegateUtil.getCustomData(oTable, \"sap_fe_TableDelegate_propertyInfoMap\") || []).filter(function (\n\t\t\t\toTableProperty: any\n\t\t\t) {\n\t\t\t\treturn oTableProperty && !(oTableProperty.filterable === false);\n\t\t\t}),\n\t\t\toFilterInfo = FilterUtils.getFilterInfo(oTable, { propertiesMetadata: aP13nProperties });\n\t\tif (oFilterInfo && oFilterInfo.filters) {\n\t\t\treturn oFilterInfo.filters;\n\t\t}\n\t}\n\treturn [];\n}\n\nfunction getAllFilterInfo(oTable: Table) {\n\tconst oIFilterInfo = getFilterInfo(oTable);\n\treturn {\n\t\tfilters: oIFilterInfo.filters.concat(getTableFilters(oTable), getP13nFilters(oTable)),\n\t\tsearch: oIFilterInfo.search,\n\t\tbindingPath: oIFilterInfo.bindingPath\n\t};\n}\n\n/**\n * Returns a promise that is resolved with the table itself when the table was bound.\n *\n * @param oTable The table to check for binding\n * @returns A Promise that will be resolved when table is bound\n */\nfunction whenBound(oTable: Table) {\n\treturn _getOrCreateBoundPromiseInfo(oTable).promise;\n}\n\n/**\n * If not yet happened, it resolves the table bound promise.\n *\n * @param oTable The table that was bound\n */\nfunction onTableBound(oTable: Table) {\n\tconst oBoundPromiseInfo = _getOrCreateBoundPromiseInfo(oTable);\n\tif (oBoundPromiseInfo.resolve) {\n\t\toBoundPromiseInfo.resolve(oTable);\n\t\toTable.data(\"boundPromiseResolve\", null);\n\t}\n}\n\nfunction _getOrCreateBoundPromiseInfo(oTable: Table) {\n\tif (!oTable.data(\"boundPromise\")) {\n\t\tlet fnResolve: any;\n\t\toTable.data(\n\t\t\t\"boundPromise\",\n\t\t\tnew Promise(function (resolve) {\n\t\t\t\tfnResolve = resolve;\n\t\t\t})\n\t\t);\n\t\tif ((oTable as any).isBound()) {\n\t\t\tfnResolve(oTable);\n\t\t} else {\n\t\t\toTable.data(\"boundPromiseResolve\", fnResolve);\n\t\t}\n\t}\n\treturn { promise: oTable.data(\"boundPromise\"), resolve: oTable.data(\"boundPromiseResolve\") };\n}\n\nfunction updateBindingInfo(oBindingInfo: any, oFilterInfo: any, oFilter: any) {\n\toBindingInfo.filters = oFilter;\n\tif (oFilterInfo.search) {\n\t\toBindingInfo.parameters.$search = CommonUtils.normalizeSearchTerm(oFilterInfo.search);\n\t} else {\n\t\toBindingInfo.parameters.$search = undefined;\n\t}\n}\n\nfunction fnGetSemanticTargetsFromTable(oController: PageController, oTable: Table) {\n\tconst oView = oController.getView();\n\tconst oInternalModelContext = oView.getBindingContext(\"internal\") as InternalModelContext;\n\tif (oInternalModelContext) {\n\t\tconst sEntitySet = DelegateUtil.getCustomData(oTable, \"targetCollectionPath\");\n\t\tif (sEntitySet) {\n\t\t\tconst oComponent = oController.getOwnerComponent();\n\t\t\tconst oAppComponent = Component.getOwnerComponentFor(oComponent) as AppComponent;\n\t\t\tconst oMetaModel = oAppComponent.getMetaModel();\n\t\t\tconst oShellServiceHelper = CommonUtils.getShellServices(oAppComponent);\n\t\t\tconst sCurrentHash = FieldRuntime._fnFixHashQueryString(CommonUtils.getHash());\n\t\t\tconst oColumns = (oTable.getParent() as TableAPI).getTableDefinition().columns;\n\t\t\tconst aSemanticObjectsForGetLinks = [];\n\t\t\tconst aSemanticObjects: any[] = [];\n\t\t\tconst aPathAlreadyProcessed: string[] = [];\n\t\t\tlet sPath: string = \"\",\n\t\t\t\tsAnnotationPath,\n\t\t\t\toProperty;\n\t\t\tlet _oSemanticObject;\n\t\t\tconst aSemanticObjectsPromises: Promise<any>[] = [];\n\t\t\tlet sQualifier: string, regexResult;\n\n\t\t\tfor (let i = 0; i < oColumns.length; i++) {\n\t\t\t\tsAnnotationPath = (oColumns[i] as any).annotationPath;\n\t\t\t\t//this check is required in cases where custom columns are configured via manifest where there is no provision for an annotation path.\n\t\t\t\tif (sAnnotationPath) {\n\t\t\t\t\toProperty = oMetaModel.getObject(sAnnotationPath);\n\t\t\t\t\tif (oProperty && oProperty.$kind === \"Property\") {\n\t\t\t\t\t\tsPath = (oColumns[i] as any).annotationPath;\n\t\t\t\t\t} else if (oProperty && oProperty.$Type === \"com.sap.vocabularies.UI.v1.DataField\") {\n\t\t\t\t\t\tsPath = `${sEntitySet}/${oMetaModel.getObject(`${sAnnotationPath}/Value/$Path`)}`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (sPath !== \"\") {\n\t\t\t\t\tconst _Keys = Object.keys(oMetaModel.getObject(sPath + \"@\"));\n\t\t\t\t\tfor (let index = 0; index < _Keys.length; index++) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!aPathAlreadyProcessed.includes(sPath) &&\n\t\t\t\t\t\t\t_Keys[index].indexOf(`@${CommonAnnotationTerms.SemanticObject}`) === 0 &&\n\t\t\t\t\t\t\t_Keys[index].indexOf(`@${CommonAnnotationTerms.SemanticObjectMapping}`) === -1 &&\n\t\t\t\t\t\t\t_Keys[index].indexOf(`@${CommonAnnotationTerms.SemanticObjectUnavailableActions}`) === -1\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tregexResult = /#(.*)/.exec(_Keys[index]);\n\t\t\t\t\t\t\tsQualifier = regexResult ? regexResult[1] : \"\";\n\t\t\t\t\t\t\taSemanticObjectsPromises.push(\n\t\t\t\t\t\t\t\tCommonUtils.getSemanticObjectPromise(oAppComponent, oView, oMetaModel, sPath, sQualifier)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\taPathAlreadyProcessed.push(sPath);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tsPath = \"\";\n\t\t\t}\n\n\t\t\tif (aSemanticObjectsPromises.length === 0) {\n\t\t\t\treturn Promise.resolve();\n\t\t\t} else {\n\t\t\t\tPromise.all(aSemanticObjectsPromises)\n\t\t\t\t\t.then(function (aValues: any[]) {\n\t\t\t\t\t\tconst aGetLinksPromises = [];\n\t\t\t\t\t\tlet sSemObjExpression;\n\t\t\t\t\t\tconst aSemanticObjectsResolved = aValues.filter(function (element: any) {\n\t\t\t\t\t\t\tif (element.semanticObject && typeof element.semanticObject.semanticObject === \"object\") {\n\t\t\t\t\t\t\t\tsSemObjExpression = compileExpression(pathInModel(element.semanticObject.semanticObject.$Path));\n\t\t\t\t\t\t\t\telement.semanticObject.semanticObject = sSemObjExpression;\n\t\t\t\t\t\t\t\telement.semanticObjectForGetLinks[0].semanticObject = sSemObjExpression;\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t} else if (element) {\n\t\t\t\t\t\t\t\treturn element.semanticObject !== undefined;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfor (let j = 0; j < aSemanticObjectsResolved.length; j++) {\n\t\t\t\t\t\t\t_oSemanticObject = aSemanticObjectsResolved[j];\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t_oSemanticObject &&\n\t\t\t\t\t\t\t\t_oSemanticObject.semanticObject &&\n\t\t\t\t\t\t\t\t!(_oSemanticObject.semanticObject.semanticObject.indexOf(\"{\") === 0)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\taSemanticObjectsForGetLinks.push(_oSemanticObject.semanticObjectForGetLinks);\n\t\t\t\t\t\t\t\taSemanticObjects.push({\n\t\t\t\t\t\t\t\t\tsemanticObject: _oSemanticObject.semanticObject && _oSemanticObject.semanticObject.semanticObject,\n\t\t\t\t\t\t\t\t\tunavailableActions: _oSemanticObject.unavailableActions,\n\t\t\t\t\t\t\t\t\tpath: aSemanticObjectsResolved[j].semanticObjectPath\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\taGetLinksPromises.push(oShellServiceHelper.getLinksWithCache([_oSemanticObject.semanticObjectForGetLinks])); //aSemanticObjectsForGetLinks));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn CommonUtils.updateSemanticTargets(aGetLinksPromises, aSemanticObjects, oInternalModelContext, sCurrentHash);\n\t\t\t\t\t})\n\t\t\t\t\t.catch(function (oError: any) {\n\t\t\t\t\t\tLog.error(\"fnGetSemanticTargetsFromTable: Cannot get Semantic Objects\", oError);\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\nfunction clearSelection(oTable: any) {\n\toTable.clearSelection();\n\tconst oInternalModelContext = oTable.getBindingContext(\"internal\");\n\tif (oInternalModelContext) {\n\t\toInternalModelContext.setProperty(\"deleteEnabled\", false);\n\t\toInternalModelContext.setProperty(\"numberOfSelectedContexts\", 0);\n\t\toInternalModelContext.setProperty(\"selectedContexts\", []);\n\t\toInternalModelContext.setProperty(\"deletableContexts\", []);\n\t}\n}\n\nconst oTableUtils = {\n\tgetCountFormatted: getCountFormatted,\n\tgetHiddenFilters: getHiddenFilters,\n\tgetFiltersInfoForSV: getFiltersInfoForSV,\n\tgetTableFilters: getTableFilters,\n\tgetListBindingForCount: getListBindingForCount,\n\tgetFilterInfo: getFilterInfo,\n\tgetP13nFilters: getP13nFilters,\n\tgetAllFilterInfo: getAllFilterInfo,\n\twhenBound: whenBound,\n\tonTableBound: onTableBound,\n\tgetSemanticTargetsFromTable: fnGetSemanticTargetsFromTable,\n\tupdateBindingInfo: updateBindingInfo,\n\tclearSelection: clearSelection\n};\n\nexport default oTableUtils;\n"],"mappings":"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"}},{"offset":{"line":26488,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","CommonUtils","BindingToolkit","DelegateUtil","FieldRuntime","FilterUtils","Component","NumberFormat","Filter","pathInModel","compileExpression","getFiltersInfoForSV","oTable","sSvPath","sEntityTypePath","data","oMetaModel","getAppComponent","getMetaModel","oSelectionVariant","getObject","mPropertyFilters","aFilters","aPaths","sText","Text","SelectOptions","filter","oSelectOption","PropertyName","$PropertyPath","forEach","sPath","includes","push","j","Ranges","oRange","concat","Option","$EnumMember","split","pop","Low","High","sPropertyPath","filters","and","properties","text","getHiddenFilters","hiddenFilters","Array","isArray","paths","mPath","oSvFilter","annotationPath","getQuickFilter","sQuickFilterKey","getCustomData","getTableFilters","getListBindingForCount","oPageBinding","oParams","countBinding","oBindingInfo","oDataModel","getModel","sBatchId","batchGroupId","oFilterInfo","getFilterInfo","additionalFilters","sBindingPath","bindingPath","path","getP13nFilters","oTableContextFilter","oListBinding","bindList","getPath","getBindingContext","fetchFilter","getContext","then","aStringFilters","bindProperty","$$groupId","$filter","$search","search","requestValue","iValue","destroy","getCountFormatted","iCount","oCountFormatter","getIntegerInstance","groupingEnabled","format","oTableDefinition","getParent","getTableDefinition","aIgnoreProperties","_getRelativePathArrayFromAggregates","oSubTable","mAggregates","aggregates","Object","keys","map","sAggregateName","relativePath","enableAnalytics","enableAnalyticsSearch","getFilter","ignoredProperties","targetControl","aP13nMode","getP13nMode","indexOf","aP13nProperties","oTableProperty","filterable","propertiesMetadata","getAllFilterInfo","oIFilterInfo","whenBound","_getOrCreateBoundPromiseInfo","promise","onTableBound","oBoundPromiseInfo","resolve","fnResolve","Promise","isBound","updateBindingInfo","oFilter","parameters","normalizeSearchTerm","undefined","fnGetSemanticTargetsFromTable","oController","oView","getView","oInternalModelContext","sEntitySet","oComponent","getOwnerComponent","oAppComponent","getOwnerComponentFor","oShellServiceHelper","getShellServices","sCurrentHash","_fnFixHashQueryString","getHash","oColumns","columns","aSemanticObjectsForGetLinks","aSemanticObjects","aPathAlreadyProcessed","sAnnotationPath","oProperty","_oSemanticObject","aSemanticObjectsPromises","sQualifier","regexResult","i","length","$kind","$Type","_Keys","index","exec","getSemanticObjectPromise","all","aValues","aGetLinksPromises","sSemObjExpression","aSemanticObjectsResolved","element","semanticObject","$Path","semanticObjectForGetLinks","unavailableActions","semanticObjectPath","getLinksWithCache","updateSemanticTargets","catch","oError","error","clearSelection","setProperty","oTableUtils","getSemanticTargetsFromTable"],"sources":["Utils-dbg.js"],"mappings":"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","sourceRoot":"table"}},{"offset":{"line":26493,"column":0},"map":{"version":3,"names":["ALPTableDelegate","Object","assign","TableDelegate","_internalUpdateBindingInfo","table","bindingInfo","filterInfo","chartFilterInfo","tableFilterInfo","chartFilters","deepClone","DelegateUtil","getCustomData","getRowBinding","suspended","view","CommonUtils","getTargetView","mdcChart","getController","getChartControl","chartSelectionsExist","ChartUtils","getChartSelectionsExist","TableUtils","getAllFilterInfo","tableFilters","filters","finalFilters","concat","oFilter","length","Filter","and","bindingPath","path","updateBindingInfo","rebind","internalModelContext","getBindingContext","templateContentView","getProperty","getPath"],"sourceRoot":"table/delegates","sources":["ALPTableDelegate.ts"],"sourcesContent":["import deepClone from \"sap/base/util/deepClone\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport ChartUtils from \"sap/fe/macros/chart/ChartUtils\";\nimport DelegateUtil from \"sap/fe/macros/DelegateUtil\";\nimport TableDelegate from \"sap/fe/macros/table/delegates/TableDelegate\";\nimport TableUtils from \"sap/fe/macros/table/Utils\";\nimport type { BasePropertyInfo } from \"sap/ui/base/ManagedObject\";\nimport type Table from \"sap/ui/mdc/Table\";\nimport Filter from \"sap/ui/model/Filter\";\n/**\n * Helper class for sap.ui.mdc.Table.\n * <h3><b>Note:</b></h3>\n * The class is experimental and the API/behaviour is not finalised and hence this should not be used for productive usage.\n *\n * @author SAP SE\n * @private\n * @experimental\n * @since 1.69\n * @alias sap.fe.macros.ALPTableDelegate\n */\nconst ALPTableDelegate = Object.assign({}, TableDelegate, {\n\t_internalUpdateBindingInfo: function (table: Table, bindingInfo: BasePropertyInfo) {\n\t\tlet filterInfo;\n\t\tlet chartFilterInfo: any = {},\n\t\t\ttableFilterInfo: any = {};\n\t\tlet chartFilters;\n\n\t\t// We need to deepClone the info we get from the custom data, otherwise some of its subobjects (e.g. parameters) will\n\t\t// be shared with oBindingInfo and modified later (Object.assign only does a shallow clone)\n\t\tObject.assign(bindingInfo, deepClone(DelegateUtil.getCustomData(table, \"rowsBindingInfo\")));\n\t\tif (table.getRowBinding()) {\n\t\t\tbindingInfo.suspended = false;\n\t\t}\n\t\tconst view = CommonUtils.getTargetView(table);\n\t\tconst mdcChart = (view.getController() as any).getChartControl?.();\n\t\tconst chartSelectionsExist = ChartUtils.getChartSelectionsExist(mdcChart, table);\n\t\ttableFilterInfo = TableUtils.getAllFilterInfo(table);\n\t\tconst tableFilters = tableFilterInfo && tableFilterInfo.filters;\n\t\tfilterInfo = tableFilterInfo;\n\t\tif (chartSelectionsExist) {\n\t\t\tchartFilterInfo = ChartUtils.getAllFilterInfo(mdcChart);\n\t\t\tchartFilters = chartFilterInfo && chartFilterInfo.filters;\n\t\t\tfilterInfo = chartFilterInfo;\n\t\t}\n\t\tconst finalFilters = (tableFilters && chartFilters ? tableFilters.concat(chartFilters) : chartFilters || tableFilters) || [];\n\t\tconst oFilter =\n\t\t\tfinalFilters.length > 0 &&\n\t\t\tnew Filter({\n\t\t\t\tfilters: finalFilters,\n\t\t\t\tand: true\n\t\t\t});\n\n\t\tif (filterInfo.bindingPath) {\n\t\t\t// In case of parameters\n\t\t\tbindingInfo.path = filterInfo.bindingPath;\n\t\t}\n\n\t\t// Prepare binding info with filter/search parameters\n\t\tTableUtils.updateBindingInfo(bindingInfo, filterInfo, oFilter);\n\t},\n\trebind: function (table: Table, bindingInfo: any) {\n\t\tconst internalModelContext = table.getBindingContext(\"pageInternal\");\n\t\tconst templateContentView = internalModelContext?.getProperty(`${internalModelContext.getPath()}/alpContentView`);\n\t\tif (templateContentView !== \"Chart\") {\n\t\t\tTableDelegate.rebind(table, bindingInfo);\n\t\t}\n\t}\n});\n\nexport default ALPTableDelegate;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;EASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA,MAAMA,gBAAgB,GAAGC,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEC,aAAa,EAAE;IACzDC,0BAA0B,EAAE,UAAUC,KAAY,EAAEC,WAA6B,EAAE;MAAA;MAClF,IAAIC,UAAU;MACd,IAAIC,eAAoB,GAAG,CAAC,CAAC;QAC5BC,eAAoB,GAAG,CAAC,CAAC;MAC1B,IAAIC,YAAY;;MAEhB;MACA;MACAT,MAAM,CAACC,MAAM,CAACI,WAAW,EAAEK,SAAS,CAACC,YAAY,CAACC,aAAa,CAACR,KAAK,EAAE,iBAAiB,CAAC,CAAC,CAAC;MAC3F,IAAIA,KAAK,CAACS,aAAa,EAAE,EAAE;QAC1BR,WAAW,CAACS,SAAS,GAAG,KAAK;MAC9B;MACA,MAAMC,IAAI,GAAGC,WAAW,CAACC,aAAa,CAACb,KAAK,CAAC;MAC7C,MAAMc,QAAQ,uBAAG,QAACH,IAAI,CAACI,aAAa,EAAE,EAASC,eAAe,qDAA7C,2BAAiD;MAClE,MAAMC,oBAAoB,GAAGC,UAAU,CAACC,uBAAuB,CAACL,QAAQ,EAAEd,KAAK,CAAC;MAChFI,eAAe,GAAGgB,UAAU,CAACC,gBAAgB,CAACrB,KAAK,CAAC;MACpD,MAAMsB,YAAY,GAAGlB,eAAe,IAAIA,eAAe,CAACmB,OAAO;MAC/DrB,UAAU,GAAGE,eAAe;MAC5B,IAAIa,oBAAoB,EAAE;QACzBd,eAAe,GAAGe,UAAU,CAACG,gBAAgB,CAACP,QAAQ,CAAC;QACvDT,YAAY,GAAGF,eAAe,IAAIA,eAAe,CAACoB,OAAO;QACzDrB,UAAU,GAAGC,eAAe;MAC7B;MACA,MAAMqB,YAAY,GAAG,CAACF,YAAY,IAAIjB,YAAY,GAAGiB,YAAY,CAACG,MAAM,CAACpB,YAAY,CAAC,GAAGA,YAAY,IAAIiB,YAAY,KAAK,EAAE;MAC5H,MAAMI,OAAO,GACZF,YAAY,CAACG,MAAM,GAAG,CAAC,IACvB,IAAIC,MAAM,CAAC;QACVL,OAAO,EAAEC,YAAY;QACrBK,GAAG,EAAE;MACN,CAAC,CAAC;MAEH,IAAI3B,UAAU,CAAC4B,WAAW,EAAE;QAC3B;QACA7B,WAAW,CAAC8B,IAAI,GAAG7B,UAAU,CAAC4B,WAAW;MAC1C;;MAEA;MACAV,UAAU,CAACY,iBAAiB,CAAC/B,WAAW,EAAEC,UAAU,EAAEwB,OAAO,CAAC;IAC/D,CAAC;IACDO,MAAM,EAAE,UAAUjC,KAAY,EAAEC,WAAgB,EAAE;MACjD,MAAMiC,oBAAoB,GAAGlC,KAAK,CAACmC,iBAAiB,CAAC,cAAc,CAAC;MACpE,MAAMC,mBAAmB,GAAGF,oBAAoB,aAApBA,oBAAoB,uBAApBA,oBAAoB,CAAEG,WAAW,CAAE,GAAEH,oBAAoB,CAACI,OAAO,EAAG,iBAAgB,CAAC;MACjH,IAAIF,mBAAmB,KAAK,OAAO,EAAE;QACpCtC,aAAa,CAACmC,MAAM,CAACjC,KAAK,EAAEC,WAAW,CAAC;MACzC;IACD;EACD,CAAC,CAAC;EAAC,OAEYN,gBAAgB;AAAA"}},{"offset":{"line":26559,"column":0},"map":{"version":3,"names":["sap","ui","define","deepClone","CommonUtils","ChartUtils","DelegateUtil","TableDelegate","TableUtils","Filter","ALPTableDelegate","Object","assign","_internalUpdateBindingInfo","table","bindingInfo","_getChartControl","_ref","filterInfo","chartFilterInfo","tableFilterInfo","chartFilters","getCustomData","getRowBinding","suspended","view","getTargetView","mdcChart","getController","getChartControl","call","chartSelectionsExist","getChartSelectionsExist","getAllFilterInfo","tableFilters","filters","finalFilters","concat","oFilter","length","and","bindingPath","path","updateBindingInfo","rebind","internalModelContext","getBindingContext","templateContentView","getProperty","getPath"],"sources":["ALPTableDelegate-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,4DAAO,CAAC,0BAA2B,0BAA2B,iCAAkC,6BAA8B,8CAA+C,4BAA6B,uBAAwB,SAAUC,EAAWC,EAAaC,EAAYC,EAAcC,EAAeC,EAAYC,GAC9T,aAaA,MAAMC,EAAmBC,OAAOC,OAAO,CAAC,EAAGL,EAAe,CACxDM,2BAA4B,SAAUC,EAAOC,GAC3C,IAAIC,EAAkBC,EACtB,IAAIC,EACJ,IAAIC,EAAkB,CAAC,EACrBC,EAAkB,CAAC,EACrB,IAAIC,EAIJV,OAAOC,OAAOG,EAAaZ,EAAUG,EAAagB,cAAcR,EAAO,qBACvE,GAAIA,EAAMS,gBAAiB,CACzBR,EAAYS,UAAY,KAC1B,CACA,MAAMC,EAAOrB,EAAYsB,cAAcZ,GACvC,MAAMa,GAAYX,GAAoBC,EAAOQ,EAAKG,iBAAiBC,mBAAqB,MAAQb,SAA0B,OAAS,EAAIA,EAAiBc,KAAKb,GAC7J,MAAMc,EAAuB1B,EAAW2B,wBAAwBL,EAAUb,GAC1EM,EAAkBZ,EAAWyB,iBAAiBnB,GAC9C,MAAMoB,EAAed,GAAmBA,EAAgBe,QACxDjB,EAAaE,EACb,GAAIW,EAAsB,CACxBZ,EAAkBd,EAAW4B,iBAAiBN,GAC9CN,EAAeF,GAAmBA,EAAgBgB,QAClDjB,EAAaC,CACf,CACA,MAAMiB,GAAgBF,GAAgBb,EAAea,EAAaG,OAAOhB,GAAgBA,GAAgBa,IAAiB,GAC1H,MAAMI,EAAUF,EAAaG,OAAS,GAAK,IAAI9B,EAAO,CACpD0B,QAASC,EACTI,IAAK,OAEP,GAAItB,EAAWuB,YAAa,CAE1B1B,EAAY2B,KAAOxB,EAAWuB,WAChC,CAGAjC,EAAWmC,kBAAkB5B,EAAaG,EAAYoB,EACxD,EACAM,OAAQ,SAAU9B,EAAOC,GACvB,MAAM8B,EAAuB/B,EAAMgC,kBAAkB,gBACrD,MAAMC,EAAsBF,IAAyB,MAAQA,SAA8B,OAAS,EAAIA,EAAqBG,YAAY,GAAGH,EAAqBI,4BACjK,GAAIF,IAAwB,QAAS,CACnCxC,EAAcqC,OAAO9B,EAAOC,EAC9B,CACF,IAEF,OAAOL,CACT,EAAG","sourceRoot":"table/delegates"}},{"offset":{"line":26564,"column":0},"map":{"version":3,"names":["SEMANTICKEY_HAS_DRAFTINDICATOR","Object","assign","TableDelegateBase","_computeVisualSettingsForFieldGroup","oTable","oProperty","aProperties","name","indexOf","oColumn","getColumns","find","oCol","getDataProperty","bShowDataFieldsLabel","data","oMetaModel","getModel","getMetaModel","involvedDataModelObjects","getInvolvedDataModelObjects","getContext","metadataPath","convertedMetaData","convertedTypes","oDataField","targetObject","oFieldGroup","Target","$target","aFieldWidth","Data","forEach","oData","oDataFieldWidth","$Type","TableSizeHelper","getWidthForDataFieldForAnnotation","getWidthForDataField","labelWidth","propertyWidth","getButtonWidth","Label","push","nWidest","reduce","acc","value","Math","max","visualSettings","deepExtend","widthCalculation","verticalArrangement","minWidth","ceil","_computeVisualSettingsForPropertyWithValueHelp","table","property","tableAPI","getParent","propertyInfos","metaModel","dataField","getObject","gap","getProperty","_computeVisualSettingsForPropertyWithUnit","oUnit","oUnitText","oTimezoneText","oTableAPI","sUnitText","getReadOnly","_computeLabel","labelMap","label","propertiesWithSameLabel","length","path","includes","additionalLabels","join","_updatePropertyInfo","properties","p13nMode","getP13nMode","sortable","filterable","groupable","undefined","concat","typeConfig","getColumnsFor","getTableDefinition","columns","_getAggregatedPropertyMap","aggregates","fetchExportCapabilities","oCapabilities","XLSX","oModel","DelegateUtil","fetchModel","then","model","aSupportedFormats","aLowerFormats","map","element","toLowerCase","oAnnotation","catch","err","Log","error","_isFilterableNavigationProperty","columnInfo","tableDataModelObjectPath","getCustomData","columnNavigationProperties","annotationPath","navigationProperties","tableTargetEntityIndex","findIndex","prop","targetType","targetEntityType","relativeNavigationProperties","slice","relativePath","isPartOfLineItem","some","navigationProperty","_type","isCollection","_fetchPropertyInfo","appComponent","sAbsoluteNavigationPath","oNavigationContext","createBindingContext","oTypeConfig","className","isTypeFilterable","TypeUtil","getTypeConfig","formatOptions","constraints","bFilterable","CommonHelper","isPropertyFilterable","isComplexType","bIsAnalyticalTable","aAggregatedPropertyMapUnfilterable","getLocalizedText","propertyInfo","groupLabel","group","tooltip","visible","availability","exportSettings","_setPropertyInfoExportSettings","unit","keys","exportDataPointTargetValue","wrap","_updateAnalyticalPropertyInfoAttributes","extension","technicallyGroupable","key","isKey","isGroupable","textArrangement","descriptionColumn","textProperty","mode","valueProperty","descriptionProperty","text","caseSensitive","additionalLabel","unitText","timezoneText","exportFormat","_getExportFormat","timezoneProperty","format","template","aggregatable","_fetchCustomPropertyInfo","oColumnInfo","oAppComponent","sLabel","header","oPropertyInfo","type","_bColumnHasPropertyWithDraftIndicator","hasDraftIndicator","fieldGroupDraftIndicatorPropertyPath","_updateDraftIndicatorModel","_oTable","_oColumnInfo","aVisibleColumns","oInternalBindingContext","getBindingContext","sInternalPath","getPath","index","setProperty","_fetchPropertiesForEntity","sEntityTypePath","sBindingPath","ModelHelper","getEntitySetPath","aFetchedProperties","oFR","CommonUtils","getFilterRestrictionsByPath","aNonFilterableProps","NonFilterableProperties","Promise","resolve","aColumns","maxConditions","isMultiValue","Error","_getCachedOrFetchPropertiesForEntity","entityTypePath","fetchedProperties","getCachedProperties","subFetchedProperties","setCachedProperties","_setTableNoDataText","oBindingInfo","sNoDataKey","oTableFilterInfo","TableUtils","getAllFilterInfo","suffixResourceKey","startsWith","substr","_getNoDataTextWithFilters","sFilterAssociation","getFilter","test","search","filters","getResourceBundle","oResourceBundle","setNoData","getTranslatedText","handleTableDataReceived","oInternalModelContext","oBinding","getRowBinding","bDataReceivedAttached","attachDataReceived","aSelectedContexts","getSelectedContexts","oActionOperationAvailableMap","JSON","parse","parseCustomData","ActionRuntime","setActionEnablement","DeleteHelper","updateDeleteInfoForSelectedContexts","setUpEmptyRows","rebind","bIsSuspended","clearSelection","apply","onTableBound","whenBound","oError","fetchProperties","preInit","oFastCreationRow","getCreationRow","setBindingContext","updateBindingInfo","_internalUpdateBindingInfo","events","dataReceived","onInternalDataReceived","bind","dataRequested","onInternalDataRequested","_manageSemanticTargets","oMDCTable","oRowBinding","attachEventOnce","setTimeout","_oView","getTargetView","getSemanticTargetsFromTable","getController","updateBinding","bNeedManualRefresh","sManualUpdatePropertyKey","bPendingManualUpdate","oldFilters","getFilters","deepEqual","getQueryOptionsFromParameters","$search","parameters","getViewData","converterType","fireEvent","requestRefresh","getGroupId","finally","_computeRowBindingInfoFromTemplate","rowBindingInfo","deepClone","$$getKeepAliveContext","collectionPath","internalModel","keptAliveLists","getId","suspended","oFilter","oFilterInfo","Filter","and","bindingPath","oDataStateIndicator","getDataStateIndicator","isFiltering","_templateCustomColumnFragment","oView","oModifier","sTableId","oColumnModel","JSONModel","oThis","id","oPreprocessorSettings","bindingContexts","this","column","models","templateControlFragment","view","oItem","destroy","_templateSlotColumnFragment","slotColumnsXML","isXML","slotXML","getElementsByTagName","mdcTableTemplateXML","removeChild","oTemplate","DOMParser","parseFromString","appendChild","firstElementChild","targets","Fragment","load","definition","dataType","ExcelFormat","getExcelDatefromJSDate","getExcelDateTimefromJSDateTime","getExcelTimefromJSTime","_getVHRelevantFields","sMetadataPath","aFields","oDataFieldData","$kind","oValue","iIndex","substring","getNavigationPath","_setDraftIndicatorOnVisibleColumn","aColumnsWithDraftIndicator","filter","sAddVisibleColumnName","sVisibleColumnName","bFoundColumnVisibleWithDraft","sColumnNameWithDraftIndicator","i","j","removeItem","oPropertyInfoName","mPropertyBag","doRemoveItem","modifier","sDataProperty","insertAggregation","isA","_setDraftIndicatorStatus","_getMetaModel","_getGroupId","sRetrievedGroupId","_getDependent","oDependent","sPropertyInfoName","_fnTemplateValueHelp","fnTemplateValueHelp","bValueHelpRequired","bValueHelpExists","_getDisplayMode","bDisplayMode","columnEditMode","displaymode","_insertAggregation","oValueHelp","addItem","sPath","sGroupId","oTableContext","oInfo","oPropertyContext","aVHProperties","oParameters","sValueHelpType","oControl","sFragmentName","requestGroupId","contextPath","message","fnTemplateFragment","oInPropertyInfo","sTableTypeCustomData","sOnChangeCustomData","sCreationModeCustomData","all","aCustomData","oDisplayModes","enableAutoColumnWidth","isOptimizedForSmallDevice","readOnly","tableType","onChange","navigationPropertyPath","collection","creationMode","entitySet","sPropertyName","mParameters","aResults","isValueHelpRequired","doesValueHelpExist","getCurrentPageView","getFilterDelegate","FilterBarDelegate","oParentControl","replace","getTypeUtil","formatGroupHeader","oContext","sProperty","mFormatInfos","oFormatInfo","obj","bExternalFormat","baseType","sValue","ValueFormatter","formatWithBrackets","ResourceModel","getText"],"sourceRoot":"table/delegates","sources":["TableDelegate.ts"],"sourcesContent":["import { DataFieldForAnnotation, FieldGroupType } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport deepClone from \"sap/base/util/deepClone\";\nimport deepEqual from \"sap/base/util/deepEqual\";\nimport deepExtend from \"sap/base/util/deepExtend\";\nimport ActionRuntime from \"sap/fe/core/ActionRuntime\";\nimport AppComponent from \"sap/fe/core/AppComponent\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type {\n\tAnnotationTableColumn,\n\tCustomBasedTableColumn,\n\texportSettings,\n\tTableColumn,\n\tTechnicalColumn\n} from \"sap/fe/core/converters/controls/Common/Table\";\nimport type { CustomElement } from \"sap/fe/core/converters/helpers/ConfigurableObject\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport ValueFormatter from \"sap/fe/core/formatters/ValueFormatter\";\nimport DeleteHelper from \"sap/fe/core/helpers/DeleteHelper\";\nimport ExcelFormat from \"sap/fe/core/helpers/ExcelFormatHelper\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport PageController from \"sap/fe/core/PageController\";\nimport { isTypeFilterable } from \"sap/fe/core/type/EDM\";\nimport TypeUtil from \"sap/fe/core/type/TypeUtil\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport type { PropertyInfo, tableDelegateModel } from \"sap/fe/macros/DelegateUtil\";\nimport DelegateUtil from \"sap/fe/macros/DelegateUtil\";\nimport FilterBarDelegate from \"sap/fe/macros/filterBar/FilterBarDelegate\";\nimport ResourceModel from \"sap/fe/macros/ResourceModel\";\nimport TableSizeHelper from \"sap/fe/macros/table/TableSizeHelper\";\nimport TableUtils from \"sap/fe/macros/table/Utils\";\nimport Fragment from \"sap/ui/core/Fragment\";\nimport TableDelegateBase from \"sap/ui/mdc/odata/v4/TableDelegate\";\nimport type Table from \"sap/ui/mdc/Table\";\nimport type Context from \"sap/ui/model/Context\";\nimport Filter from \"sap/ui/model/Filter\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport MetaModel from \"sap/ui/model/MetaModel\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport { V4Context } from \"types/extension_types\";\nimport type TableAPI from \"../TableAPI\";\n\nconst SEMANTICKEY_HAS_DRAFTINDICATOR = \"/semanticKeyHasDraftIndicator\";\n\n/**\n * Helper class for sap.ui.mdc.Table.\n * <h3><b>Note:</b></h3>\n * The class is experimental and the API and the behavior are not finalized. This class is not intended for productive usage.\n *\n * @author SAP SE\n * @private\n * @experimental\n * @since 1.69\n * @alias sap.fe.macros.TableDelegate\n */\nexport default Object.assign({}, TableDelegateBase, {\n\t/**\n\t * This function calculates the width for a FieldGroup column.\n\t * The width of the FieldGroup is the width of the widest property contained in the FieldGroup (including the label if showDataFieldsLabel is true)\n\t * The result of this calculation is stored in the visualSettings.widthCalculation.minWidth property, which is used by the MDCtable.\n\t *\n\t * @param oTable Instance of the MDCtable\n\t * @param oProperty Current property\n\t * @param aProperties Array of properties\n\t * @private\n\t * @alias sap.fe.macros.TableDelegate\n\t */\n\t_computeVisualSettingsForFieldGroup: function (oTable: Table, oProperty: any, aProperties: any[]) {\n\t\tif (oProperty.name.indexOf(\"DataFieldForAnnotation::FieldGroup::\") === 0) {\n\t\t\tconst oColumn = oTable.getColumns().find(function (oCol: any) {\n\t\t\t\treturn oCol.getDataProperty() === oProperty.name;\n\t\t\t});\n\t\t\tconst bShowDataFieldsLabel = oColumn ? oColumn.data(\"showDataFieldsLabel\") === \"true\" : false;\n\t\t\tconst oMetaModel = oTable.getModel().getMetaModel() as ODataMetaModel;\n\t\t\tconst involvedDataModelObjects = getInvolvedDataModelObjects(oMetaModel.getContext(oProperty.metadataPath));\n\t\t\tconst convertedMetaData = involvedDataModelObjects.convertedTypes;\n\t\t\tconst oDataField = involvedDataModelObjects.targetObject as DataFieldForAnnotation;\n\t\t\tconst oFieldGroup = oDataField.Target.$target as FieldGroupType;\n\t\t\tconst aFieldWidth: any = [];\n\t\t\toFieldGroup.Data.forEach(function (oData: any) {\n\t\t\t\tlet oDataFieldWidth: any;\n\t\t\t\tswitch (oData.$Type) {\n\t\t\t\t\tcase \"com.sap.vocabularies.UI.v1.DataFieldForAnnotation\":\n\t\t\t\t\t\toDataFieldWidth = TableSizeHelper.getWidthForDataFieldForAnnotation(\n\t\t\t\t\t\t\toData,\n\t\t\t\t\t\t\taProperties,\n\t\t\t\t\t\t\tconvertedMetaData,\n\t\t\t\t\t\t\tbShowDataFieldsLabel\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"com.sap.vocabularies.UI.v1.DataField\":\n\t\t\t\t\t\toDataFieldWidth = TableSizeHelper.getWidthForDataField(oData, bShowDataFieldsLabel, aProperties, convertedMetaData);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"com.sap.vocabularies.UI.v1.DataFieldForAction\":\n\t\t\t\t\t\toDataFieldWidth = {\n\t\t\t\t\t\t\tlabelWidth: 0,\n\t\t\t\t\t\t\tpropertyWidth: TableSizeHelper.getButtonWidth(oData.Label)\n\t\t\t\t\t\t};\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t}\n\t\t\t\tif (oDataFieldWidth) {\n\t\t\t\t\taFieldWidth.push(oDataFieldWidth.labelWidth + oDataFieldWidth.propertyWidth);\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst nWidest = aFieldWidth.reduce(function (acc: any, value: any) {\n\t\t\t\treturn Math.max(acc, value);\n\t\t\t}, 0);\n\t\t\toProperty.visualSettings = deepExtend(oProperty.visualSettings, {\n\t\t\t\twidthCalculation: {\n\t\t\t\t\tverticalArrangement: true,\n\t\t\t\t\tminWidth: Math.ceil(nWidest)\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\t_computeVisualSettingsForPropertyWithValueHelp: function (table: Table, property: PropertyInfo) {\n\t\tconst tableAPI = table.getParent() as TableAPI;\n\t\tif (!property.propertyInfos) {\n\t\t\tconst metaModel = table.getModel().getMetaModel();\n\t\t\tif (property.metadataPath && metaModel) {\n\t\t\t\tconst dataField = metaModel.getObject(`${property.metadataPath}@`);\n\t\t\t\tif (dataField && dataField[\"@com.sap.vocabularies.Common.v1.ValueList\"]) {\n\t\t\t\t\tproperty.visualSettings = deepExtend(property.visualSettings || {}, {\n\t\t\t\t\t\twidthCalculation: {\n\t\t\t\t\t\t\tgap: tableAPI.getProperty(\"readOnly\") ? 0 : 4\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t_computeVisualSettingsForPropertyWithUnit: function (\n\t\toTable: any,\n\t\toProperty: any,\n\t\toUnit?: string,\n\t\toUnitText?: string,\n\t\toTimezoneText?: string\n\t) {\n\t\tconst oTableAPI = oTable ? oTable.getParent() : null;\n\t\t// update gap for properties with string unit\n\t\tconst sUnitText = oUnitText || oTimezoneText;\n\t\tif (sUnitText) {\n\t\t\toProperty.visualSettings = deepExtend(oProperty.visualSettings, {\n\t\t\t\twidthCalculation: {\n\t\t\t\t\tgap: Math.ceil(TableSizeHelper.getButtonWidth(sUnitText))\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tif (oUnit) {\n\t\t\toProperty.visualSettings = deepExtend(oProperty.visualSettings, {\n\t\t\t\twidthCalculation: {\n\t\t\t\t\t// For properties with unit, a gap needs to be added to properly render the column width on edit mode\n\t\t\t\t\tgap: oTableAPI && oTableAPI.getReadOnly() ? 0 : 6\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\t_computeLabel: function (property: PropertyInfo, labelMap: { [label: string]: PropertyInfo[] }) {\n\t\tif (property.label) {\n\t\t\tconst propertiesWithSameLabel = labelMap[property.label];\n\t\t\tif (propertiesWithSameLabel?.length > 1 && property.path?.includes(\"/\") && property.additionalLabels) {\n\t\t\t\tproperty.label = property.label + \" (\" + property.additionalLabels.join(\" / \") + \")\";\n\t\t\t}\n\t\t\tdelete property.additionalLabels;\n\t\t}\n\t},\n\t//Update VisualSetting for columnWidth calculation and labels on navigation properties\n\t_updatePropertyInfo: function (table: Table, properties: PropertyInfo[]) {\n\t\tconst labelMap: { [label: string]: PropertyInfo[] } = {};\n\t\t// Check available p13n modes\n\t\tconst p13nMode = table.getP13nMode();\n\t\tproperties.forEach((property: PropertyInfo) => {\n\t\t\tif (!property.propertyInfos && property.label) {\n\t\t\t\t// Only for non-complex properties\n\t\t\t\tif (\n\t\t\t\t\t(p13nMode?.indexOf(\"Sort\") > -1 && property.sortable) ||\n\t\t\t\t\t(p13nMode?.indexOf(\"Filter\") > -1 && property.filterable) ||\n\t\t\t\t\t(p13nMode?.indexOf(\"Group\") > -1 && property.groupable)\n\t\t\t\t) {\n\t\t\t\t\tlabelMap[property.label] =\n\t\t\t\t\t\tlabelMap[property.label] !== undefined ? labelMap[property.label].concat([property]) : [property];\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tproperties.forEach((property: any) => {\n\t\t\tthis._computeVisualSettingsForFieldGroup(table, property, properties);\n\t\t\tthis._computeVisualSettingsForPropertyWithValueHelp(table, property);\n\t\t\t// bcp: 2270003577\n\t\t\t// Some columns (eg: custom columns) have no typeConfig property.\n\t\t\t// initializing it prevents an exception throw\n\t\t\tproperty.typeConfig = deepExtend(property.typeConfig, {});\n\t\t\tthis._computeLabel(property, labelMap);\n\t\t});\n\t\treturn properties;\n\t},\n\n\tgetColumnsFor: function (table: Table): TableColumn[] {\n\t\treturn (table.getParent() as TableAPI).getTableDefinition().columns;\n\t},\n\n\t_getAggregatedPropertyMap: function (oTable: any) {\n\t\treturn oTable.getParent().getTableDefinition().aggregates;\n\t},\n\n\t/**\n\t * Returns the export capabilities for the given sap.ui.mdc.Table instance.\n\t *\n\t * @param oTable Instance of the table\n\t * @returns Promise representing the export capabilities of the table instance\n\t */\n\tfetchExportCapabilities: function (oTable: any) {\n\t\tconst oCapabilities: any = { XLSX: {} };\n\t\tlet oModel!: any;\n\t\treturn DelegateUtil.fetchModel(oTable)\n\t\t\t.then(function (model: any) {\n\t\t\t\toModel = model;\n\t\t\t\treturn oModel.getMetaModel().getObject(\"/$EntityContainer@Org.OData.Capabilities.V1.SupportedFormats\");\n\t\t\t})\n\t\t\t.then(function (aSupportedFormats: string[] | undefined) {\n\t\t\t\tconst aLowerFormats = (aSupportedFormats || []).map((element) => {\n\t\t\t\t\treturn element.toLowerCase();\n\t\t\t\t});\n\t\t\t\tif (aLowerFormats.indexOf(\"application/pdf\") > -1) {\n\t\t\t\t\treturn oModel.getMetaModel().getObject(\"/$EntityContainer@com.sap.vocabularies.PDF.v1.Features\");\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t})\n\t\t\t.then(function (oAnnotation: any) {\n\t\t\t\tif (oAnnotation) {\n\t\t\t\t\toCapabilities[\"PDF\"] = Object.assign({}, oAnnotation);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(function (err: any) {\n\t\t\t\tLog.error(`An error occurs while computing export capabilities: ${err}`);\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\treturn oCapabilities;\n\t\t\t});\n\t},\n\n\t/**\n\t * Filtering on 1:n navigation properties and navigation\n\t * properties not part of the LineItem annotation is forbidden.\n\t *\n\t * @param columnInfo\n\t * @param metaModel\n\t * @param table\n\t * @returns Boolean true if filtering is allowed, false otherwise\n\t */\n\t_isFilterableNavigationProperty: function (columnInfo: AnnotationTableColumn, metaModel: MetaModel, table: Table) :Boolean {\n\t\t// get the DataModelObjectPath for the table\n\t\tconst tableDataModelObjectPath = getInvolvedDataModelObjects(metaModel.getContext(DelegateUtil.getCustomData(table, \"metaPath\"))),\n\t\t\t// get all navigation properties leading to the column\n\t\t\tcolumnNavigationProperties = getInvolvedDataModelObjects(metaModel.getContext(columnInfo.annotationPath)).navigationProperties,\n\t\t\t// we are only interested in navigation properties relative to the table, so all before and including the tables targetType can be filtered\n\t\t\ttableTargetEntityIndex = columnNavigationProperties.findIndex(\n\t\t\t\t(prop) => prop.targetType?.name === tableDataModelObjectPath.targetEntityType.name\n\t\t\t),\n\t\t\trelativeNavigationProperties = columnNavigationProperties.slice(tableTargetEntityIndex > 0 ? tableTargetEntityIndex : 0);\n\t\treturn (\n\t\t\t!columnInfo.relativePath.includes(\"/\") ||\n\t\t\t(columnInfo.isPartOfLineItem === true &&\n\t\t\t\t!relativeNavigationProperties.some(\n\t\t\t\t\t(navigationProperty) => navigationProperty._type == \"NavigationProperty\" && navigationProperty.isCollection\n\t\t\t\t))\n\t\t);\n\t},\n\n\t_fetchPropertyInfo: function (metaModel: MetaModel, columnInfo: AnnotationTableColumn, table: Table, appComponent: AppComponent) {\n\t\tconst sAbsoluteNavigationPath = columnInfo.annotationPath,\n\t\t\toDataField = metaModel.getObject(sAbsoluteNavigationPath),\n\t\t\toNavigationContext = metaModel.createBindingContext(sAbsoluteNavigationPath) as Context,\n\t\t\toTypeConfig =\n\t\t\t\tcolumnInfo.typeConfig?.className && isTypeFilterable(columnInfo.typeConfig.className)\n\t\t\t\t\t? TypeUtil.getTypeConfig(\n\t\t\t\t\t\t\tcolumnInfo.typeConfig.className,\n\t\t\t\t\t\t\tcolumnInfo.typeConfig.formatOptions,\n\t\t\t\t\t\t\tcolumnInfo.typeConfig.constraints\n\t\t\t\t\t  )\n\t\t\t\t\t: {},\n\t\t\tbFilterable = CommonHelper.isPropertyFilterable(oNavigationContext, oDataField),\n\t\t\tisComplexType =\n\t\t\t\tcolumnInfo.typeConfig && columnInfo.typeConfig.className && columnInfo.typeConfig.className?.indexOf(\"Edm.\") !== 0,\n\t\t\tbIsAnalyticalTable = DelegateUtil.getCustomData(table, \"enableAnalytics\") === \"true\",\n\t\t\taAggregatedPropertyMapUnfilterable = bIsAnalyticalTable ? this._getAggregatedPropertyMap(table) : {},\n\t\t\tlabel = DelegateUtil.getLocalizedText(columnInfo.label ?? \"\", appComponent ?? table);\n\n\t\tconst propertyInfo: PropertyInfo = {\n\t\t\tname: columnInfo.name,\n\t\t\tmetadataPath: sAbsoluteNavigationPath,\n\t\t\tgroupLabel: columnInfo.groupLabel,\n\t\t\tgroup: columnInfo.group,\n\t\t\tlabel: label,\n\t\t\ttooltip: columnInfo.tooltip,\n\t\t\ttypeConfig: oTypeConfig,\n\t\t\tvisible: columnInfo.availability !== \"Hidden\" && !isComplexType,\n\t\t\texportSettings: this._setPropertyInfoExportSettings(columnInfo.exportSettings, columnInfo),\n\t\t\tunit: columnInfo.unit\n\t\t};\n\n\t\t// Set visualSettings only if it exists\n\t\tif (columnInfo.visualSettings && Object.keys(columnInfo.visualSettings).length > 0) {\n\t\t\tpropertyInfo.visualSettings = columnInfo.visualSettings;\n\t\t}\n\n\t\tif (columnInfo.exportDataPointTargetValue) {\n\t\t\tpropertyInfo.exportDataPointTargetValue = columnInfo.exportDataPointTargetValue;\n\t\t}\n\n\t\t// MDC expects  'propertyInfos' only for complex properties.\n\t\t// An empty array throws validation error and undefined value is unhandled.\n\t\tif (columnInfo.propertyInfos?.length) {\n\t\t\tpropertyInfo.propertyInfos = columnInfo.propertyInfos;\n\t\t\t//only in case of complex properties, wrap the cell content\ton the excel exported file\n\t\t\tif (propertyInfo.exportSettings) {\n\t\t\t\tpropertyInfo.exportSettings.wrap = columnInfo.exportSettings?.wrap;\n\t\t\t}\n\t\t} else {\n\t\t\t// Add properties which are supported only by simple PropertyInfos.\n\t\t\tpropertyInfo.path = columnInfo.relativePath;\n\t\t\t// TODO with the new complex property info, a lot of \"Description\" fields are added as filter/sort fields\n\t\t\tpropertyInfo.sortable = columnInfo.sortable;\n\t\t\tif (bIsAnalyticalTable) {\n\t\t\t\tthis._updateAnalyticalPropertyInfoAttributes(propertyInfo, columnInfo);\n\t\t\t}\n\t\t\tpropertyInfo.filterable =\n\t\t\t\t!!bFilterable &&\n\t\t\t\tthis._isFilterableNavigationProperty(columnInfo, metaModel, table) &&\n\t\t\t\t// TODO ignoring all properties that are not also available for adaptation for now, but proper concept required\n\t\t\t\t(!bIsAnalyticalTable ||\n\t\t\t\t\t(!aAggregatedPropertyMapUnfilterable[propertyInfo.name] &&\n\t\t\t\t\t\t!(columnInfo as TechnicalColumn).extension?.technicallyGroupable));\n\t\t\tpropertyInfo.key = columnInfo.isKey;\n\t\t\tpropertyInfo.groupable = columnInfo.isGroupable;\n\t\t\tif (columnInfo.textArrangement) {\n\t\t\t\tconst descriptionColumn = (this.getColumnsFor(table) as AnnotationTableColumn[]).find(function (oCol) {\n\t\t\t\t\treturn oCol.name === columnInfo.textArrangement?.textProperty;\n\t\t\t\t});\n\t\t\t\tif (descriptionColumn) {\n\t\t\t\t\tpropertyInfo.mode = columnInfo.textArrangement.mode;\n\t\t\t\t\tpropertyInfo.valueProperty = columnInfo.relativePath;\n\t\t\t\t\tpropertyInfo.descriptionProperty = descriptionColumn.relativePath;\n\t\t\t\t}\n\t\t\t}\n\t\t\tpropertyInfo.text = columnInfo.textArrangement && columnInfo.textArrangement.textProperty;\n\t\t\tpropertyInfo.caseSensitive = columnInfo.caseSensitive;\n\t\t\tif (columnInfo.additionalLabels) {\n\t\t\t\tpropertyInfo.additionalLabels = columnInfo.additionalLabels.map((additionalLabel: string) => {\n\t\t\t\t\treturn DelegateUtil.getLocalizedText(additionalLabel, appComponent || table);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tthis._computeVisualSettingsForPropertyWithUnit(table, propertyInfo, columnInfo.unit, columnInfo.unitText, columnInfo.timezoneText);\n\n\t\treturn propertyInfo;\n\t},\n\n\t/**\n\t * Extend the export settings based on the column info.\n\t *\n\t * @param exportSettings The export settings to be extended\n\t * @param columnInfo The columnInfo object\n\t * @returns The extended export settings\n\t */\n\t_setPropertyInfoExportSettings: function (\n\t\texportSettings: exportSettings | undefined | null,\n\t\tcolumnInfo: AnnotationTableColumn\n\t): exportSettings | undefined | null {\n\t\tconst exportFormat = this._getExportFormat(columnInfo.typeConfig?.className);\n\t\tif (exportSettings) {\n\t\t\tif (exportFormat && !exportSettings.timezoneProperty) {\n\t\t\t\texportSettings.format = exportFormat;\n\t\t\t}\n\t\t\t// Set the exportSettings template only if it exists.\n\t\t\tif (exportSettings.template) {\n\t\t\t\texportSettings.template = columnInfo.exportSettings?.template;\n\t\t\t}\n\t\t}\n\t\treturn exportSettings;\n\t},\n\n\t_updateAnalyticalPropertyInfoAttributes(propertyInfo: PropertyInfo, columnInfo: AnnotationTableColumn) {\n\t\tif (columnInfo.aggregatable) {\n\t\t\tpropertyInfo.aggregatable = columnInfo.aggregatable;\n\t\t}\n\t\tif (columnInfo.extension) {\n\t\t\tpropertyInfo.extension = columnInfo.extension;\n\t\t}\n\t},\n\n\t_fetchCustomPropertyInfo: function (oColumnInfo: any, oTable: any, oAppComponent: any) {\n\t\tconst sLabel = DelegateUtil.getLocalizedText(oColumnInfo.header, oAppComponent || oTable); // Todo: To be removed once MDC provides translation support\n\t\tconst oPropertyInfo: any = {\n\t\t\tname: oColumnInfo.name,\n\t\t\tgroupLabel: undefined,\n\t\t\tgroup: undefined,\n\t\t\tlabel: sLabel,\n\t\t\ttype: \"Edm.String\", // TBD\n\t\t\tvisible: oColumnInfo.availability !== \"Hidden\",\n\t\t\texportSettings: oColumnInfo.exportSettings,\n\t\t\tvisualSettings: oColumnInfo.visualSettings\n\t\t};\n\n\t\t// MDC expects 'propertyInfos' only for complex properties.\n\t\t// An empty array throws validation error and undefined value is unhandled.\n\t\tif (oColumnInfo.propertyInfos && oColumnInfo.propertyInfos.length) {\n\t\t\toPropertyInfo.propertyInfos = oColumnInfo.propertyInfos;\n\t\t\t//only in case of complex properties, wrap the cell content on the excel exported file\n\t\t\toPropertyInfo.exportSettings = {\n\t\t\t\twrap: oColumnInfo.exportSettings.wrap,\n\t\t\t\ttemplate: oColumnInfo.exportSettings.template\n\t\t\t};\n\t\t} else {\n\t\t\t// Add properties which are supported only by simple PropertyInfos.\n\t\t\toPropertyInfo.path = oColumnInfo.name;\n\t\t\toPropertyInfo.sortable = false;\n\t\t\toPropertyInfo.filterable = false;\n\t\t}\n\t\treturn oPropertyInfo;\n\t},\n\t_bColumnHasPropertyWithDraftIndicator: function (oColumnInfo: any) {\n\t\treturn !!(\n\t\t\t(oColumnInfo.formatOptions && oColumnInfo.formatOptions.hasDraftIndicator) ||\n\t\t\t(oColumnInfo.formatOptions && oColumnInfo.formatOptions.fieldGroupDraftIndicatorPropertyPath)\n\t\t);\n\t},\n\t_updateDraftIndicatorModel: function (_oTable: any, _oColumnInfo: any) {\n\t\tconst aVisibleColumns = _oTable.getColumns();\n\t\tconst oInternalBindingContext = _oTable.getBindingContext(\"internal\");\n\t\tconst sInternalPath = oInternalBindingContext && oInternalBindingContext.getPath();\n\t\tif (aVisibleColumns && oInternalBindingContext) {\n\t\t\tfor (const index in aVisibleColumns) {\n\t\t\t\tif (\n\t\t\t\t\tthis._bColumnHasPropertyWithDraftIndicator(_oColumnInfo) &&\n\t\t\t\t\t_oColumnInfo.name === aVisibleColumns[index].getDataProperty()\n\t\t\t\t) {\n\t\t\t\t\tif (oInternalBindingContext.getProperty(sInternalPath + SEMANTICKEY_HAS_DRAFTINDICATOR) === undefined) {\n\t\t\t\t\t\toInternalBindingContext.setProperty(sInternalPath + SEMANTICKEY_HAS_DRAFTINDICATOR, _oColumnInfo.name);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t_fetchPropertiesForEntity: function (oTable: any, sEntityTypePath: any, oMetaModel: any, oAppComponent: any) {\n\t\t// when fetching properties, this binding context is needed - so lets create it only once and use if for all properties/data-fields/line-items\n\t\tconst sBindingPath = ModelHelper.getEntitySetPath(sEntityTypePath);\n\t\tlet aFetchedProperties: any[] = [];\n\t\tconst oFR = CommonUtils.getFilterRestrictionsByPath(sBindingPath, oMetaModel);\n\t\tconst aNonFilterableProps = oFR.NonFilterableProperties;\n\t\treturn Promise.resolve(this.getColumnsFor(oTable))\n\t\t\t.then((aColumns: TableColumn[]) => {\n\t\t\t\t// DraftAdministrativeData does not work via 'entitySet/$NavigationPropertyBinding/DraftAdministrativeData'\n\t\t\t\tif (aColumns) {\n\t\t\t\t\tlet oPropertyInfo;\n\t\t\t\t\taColumns.forEach((oColumnInfo) => {\n\t\t\t\t\t\tthis._updateDraftIndicatorModel(oTable, oColumnInfo);\n\t\t\t\t\t\tswitch (oColumnInfo.type) {\n\t\t\t\t\t\t\tcase \"Annotation\":\n\t\t\t\t\t\t\t\toPropertyInfo = this._fetchPropertyInfo(\n\t\t\t\t\t\t\t\t\toMetaModel,\n\t\t\t\t\t\t\t\t\toColumnInfo as AnnotationTableColumn,\n\t\t\t\t\t\t\t\t\toTable,\n\t\t\t\t\t\t\t\t\toAppComponent\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tif (oPropertyInfo && aNonFilterableProps.indexOf(oPropertyInfo.name) === -1) {\n\t\t\t\t\t\t\t\t\toPropertyInfo.maxConditions = DelegateUtil.isMultiValue(oPropertyInfo) ? -1 : 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"Slot\":\n\t\t\t\t\t\t\tcase \"Default\":\n\t\t\t\t\t\t\t\toPropertyInfo = this._fetchCustomPropertyInfo(oColumnInfo, oTable, oAppComponent);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tthrow new Error(`unhandled switch case ${oColumnInfo.type}`);\n\t\t\t\t\t\t}\n\t\t\t\t\t\taFetchedProperties.push(oPropertyInfo);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\taFetchedProperties = this._updatePropertyInfo(oTable, aFetchedProperties);\n\t\t\t})\n\t\t\t.catch(function (err: any) {\n\t\t\t\tLog.error(`An error occurs while updating fetched properties: ${err}`);\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\treturn aFetchedProperties;\n\t\t\t});\n\t},\n\n\t_getCachedOrFetchPropertiesForEntity: function (table: Table, entityTypePath: string, metaModel: any, appComponent?: AppComponent) {\n\t\tconst fetchedProperties = DelegateUtil.getCachedProperties(table);\n\n\t\tif (fetchedProperties) {\n\t\t\treturn Promise.resolve(fetchedProperties);\n\t\t}\n\t\treturn this._fetchPropertiesForEntity(table, entityTypePath, metaModel, appComponent).then(function (subFetchedProperties: any[]) {\n\t\t\tDelegateUtil.setCachedProperties(table, subFetchedProperties);\n\t\t\treturn subFetchedProperties;\n\t\t});\n\t},\n\n\t_setTableNoDataText: function (oTable: any, oBindingInfo: any) {\n\t\tlet sNoDataKey = \"\";\n\t\tconst oTableFilterInfo = TableUtils.getAllFilterInfo(oTable),\n\t\t\tsuffixResourceKey = oBindingInfo.path.startsWith(\"/\") ? oBindingInfo.path.substr(1) : oBindingInfo.path;\n\n\t\tconst _getNoDataTextWithFilters = function () {\n\t\t\tif (oTable.data(\"hiddenFilters\") || oTable.data(\"quickFilterKey\")) {\n\t\t\t\treturn \"M_TABLE_AND_CHART_NO_DATA_TEXT_MULTI_VIEW\";\n\t\t\t} else {\n\t\t\t\treturn \"T_TABLE_AND_CHART_NO_DATA_TEXT_WITH_FILTER\";\n\t\t\t}\n\t\t};\n\t\tconst sFilterAssociation = oTable.getFilter();\n\n\t\tif (sFilterAssociation && !/BasicSearch$/.test(sFilterAssociation)) {\n\t\t\t// check if a FilterBar is associated to the Table (basic search on toolBar is excluded)\n\t\t\tif (oTableFilterInfo.search || (oTableFilterInfo.filters && oTableFilterInfo.filters.length)) {\n\t\t\t\t// check if table has any Filterbar filters or personalization filters\n\t\t\t\tsNoDataKey = _getNoDataTextWithFilters();\n\t\t\t} else {\n\t\t\t\tsNoDataKey = \"T_TABLE_AND_CHART_NO_DATA_TEXT\";\n\t\t\t}\n\t\t} else if (oTableFilterInfo.search || (oTableFilterInfo.filters && oTableFilterInfo.filters.length)) {\n\t\t\t//check if table has any personalization filters\n\t\t\tsNoDataKey = _getNoDataTextWithFilters();\n\t\t} else {\n\t\t\tsNoDataKey = \"M_TABLE_AND_CHART_NO_FILTERS_NO_DATA_TEXT\";\n\t\t}\n\t\treturn oTable\n\t\t\t.getModel(\"sap.fe.i18n\")\n\t\t\t.getResourceBundle()\n\t\t\t.then(function (oResourceBundle: any) {\n\t\t\t\toTable.setNoData(CommonUtils.getTranslatedText(sNoDataKey, oResourceBundle, undefined, suffixResourceKey));\n\t\t\t})\n\t\t\t.catch(function (error: any) {\n\t\t\t\tLog.error(error);\n\t\t\t});\n\t},\n\n\thandleTableDataReceived: function (oTable: any, oInternalModelContext: any) {\n\t\tconst oBinding = oTable && oTable.getRowBinding(),\n\t\t\tbDataReceivedAttached = oInternalModelContext && oInternalModelContext.getProperty(\"dataReceivedAttached\");\n\n\t\tif (oInternalModelContext && !bDataReceivedAttached) {\n\t\t\toBinding.attachDataReceived(function () {\n\t\t\t\t// Refresh the selected contexts to trigger re-calculation of enabled state of actions.\n\t\t\t\toInternalModelContext.setProperty(\"selectedContexts\", []);\n\t\t\t\tconst aSelectedContexts = oTable.getSelectedContexts();\n\t\t\t\toInternalModelContext.setProperty(\"selectedContexts\", aSelectedContexts);\n\t\t\t\toInternalModelContext.setProperty(\"numberOfSelectedContexts\", aSelectedContexts.length);\n\t\t\t\tconst oActionOperationAvailableMap = JSON.parse(\n\t\t\t\t\tCommonHelper.parseCustomData(DelegateUtil.getCustomData(oTable, \"operationAvailableMap\"))\n\t\t\t\t);\n\t\t\t\tActionRuntime.setActionEnablement(oInternalModelContext, oActionOperationAvailableMap, aSelectedContexts, \"table\");\n\t\t\t\t// Refresh enablement of delete button\n\t\t\t\tDeleteHelper.updateDeleteInfoForSelectedContexts(oInternalModelContext, aSelectedContexts);\n\t\t\t\tconst oTableAPI = oTable ? oTable.getParent() : null;\n\t\t\t\tif (oTableAPI) {\n\t\t\t\t\toTableAPI.setUpEmptyRows(oTable);\n\t\t\t\t}\n\t\t\t});\n\t\t\toInternalModelContext.setProperty(\"dataReceivedAttached\", true);\n\t\t}\n\t},\n\n\trebind: function (oTable: any, oBindingInfo: any): Promise<any> {\n\t\tconst oTableAPI = oTable.getParent() as TableAPI;\n\t\tconst bIsSuspended = oTableAPI?.getProperty(\"bindingSuspended\");\n\t\toTableAPI?.setProperty(\"outDatedBinding\", bIsSuspended);\n\t\tif (!bIsSuspended) {\n\t\t\tTableUtils.clearSelection(oTable);\n\t\t\tTableDelegateBase.rebind.apply(this, [oTable, oBindingInfo]);\n\t\t\tTableUtils.onTableBound(oTable);\n\t\t\tthis._setTableNoDataText(oTable, oBindingInfo);\n\t\t\treturn TableUtils.whenBound(oTable)\n\t\t\t\t.then(this.handleTableDataReceived(oTable, oTable.getBindingContext(\"internal\")))\n\t\t\t\t.catch(function (oError: any) {\n\t\t\t\t\tLog.error(\"Error while waiting for the table to be bound\", oError);\n\t\t\t\t});\n\t\t}\n\t\treturn Promise.resolve();\n\t},\n\n\t/**\n\t * Fetches the relevant metadata for the table and returns property info array.\n\t *\n\t * @param table Instance of the MDCtable\n\t * @returns Array of property info\n\t */\n\tfetchProperties: function (table: Table) {\n\t\treturn DelegateUtil.fetchModel(table)\n\t\t\t.then((model) => {\n\t\t\t\treturn this._getCachedOrFetchPropertiesForEntity(\n\t\t\t\t\ttable,\n\t\t\t\t\tDelegateUtil.getCustomData(table, \"entityType\"),\n\t\t\t\t\tmodel.getMetaModel()\n\t\t\t\t);\n\t\t\t})\n\t\t\t.then((properties) => {\n\t\t\t\t(table.getBindingContext(\"internal\") as V4Context).setProperty(\"tablePropertiesAvailable\", true);\n\t\t\t\treturn properties;\n\t\t\t});\n\t},\n\n\tpreInit: function (oTable: Table) {\n\t\treturn TableDelegateBase.preInit.apply(this, [oTable]).then(function () {\n\t\t\t/**\n\t\t\t * Set the binding context to null for every fast creation row to avoid it inheriting\n\t\t\t * the wrong context and requesting the table columns on the parent entity\n\t\t\t * Set the correct binding context in ObjectPageController.enableFastCreationRow()\n\t\t\t */\n\t\t\tconst oFastCreationRow = oTable.getCreationRow();\n\t\t\tif (oFastCreationRow) {\n\t\t\t\toFastCreationRow.setBindingContext(null as any as Context);\n\t\t\t}\n\t\t});\n\t},\n\tupdateBindingInfo: function (oTable: any, oBindingInfo: any) {\n\t\tTableDelegateBase.updateBindingInfo.apply(this, [oTable, oBindingInfo]);\n\t\tthis._internalUpdateBindingInfo(oTable, oBindingInfo);\n\t\toBindingInfo.events.dataReceived = oTable.getParent().onInternalDataReceived.bind(oTable.getParent());\n\t\toBindingInfo.events.dataRequested = oTable.getParent().onInternalDataRequested.bind(oTable.getParent());\n\t\tthis._setTableNoDataText(oTable, oBindingInfo);\n\t},\n\n\t_manageSemanticTargets: function (oMDCTable: any) {\n\t\tconst oRowBinding = oMDCTable.getRowBinding();\n\t\tif (oRowBinding) {\n\t\t\toRowBinding.attachEventOnce(\"dataRequested\", function () {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tconst _oView = CommonUtils.getTargetView(oMDCTable);\n\t\t\t\t\tif (_oView) {\n\t\t\t\t\t\tTableUtils.getSemanticTargetsFromTable(_oView.getController() as PageController, oMDCTable);\n\t\t\t\t\t}\n\t\t\t\t}, 0);\n\t\t\t});\n\t\t}\n\t},\n\n\tupdateBinding: function (oTable: any, oBindingInfo: any, oBinding: any) {\n\t\tconst oTableAPI = oTable.getParent() as TableAPI;\n\t\tconst bIsSuspended = oTableAPI?.getProperty(\"bindingSuspended\");\n\t\tif (!bIsSuspended) {\n\t\t\tlet bNeedManualRefresh = false;\n\t\t\tconst _oView = CommonUtils.getTargetView(oTable);\n\t\t\tconst oInternalBindingContext = oTable.getBindingContext(\"internal\");\n\t\t\tconst sManualUpdatePropertyKey = \"pendingManualBindingUpdate\";\n\t\t\tconst bPendingManualUpdate = oInternalBindingContext.getProperty(sManualUpdatePropertyKey);\n\t\t\tconst oRowBinding = oTable.getRowBinding();\n\n\t\t\tif (oRowBinding) {\n\t\t\t\t/**\n\t\t\t\t * Manual refresh if filters are not changed by binding.refresh() since updating the bindingInfo\n\t\t\t\t * is not enough to trigger a batch request.\n\t\t\t\t * Removing columns creates one batch request that was not executed before\n\t\t\t\t */\n\t\t\t\tconst oldFilters = oRowBinding.getFilters(\"Application\");\n\t\t\t\tbNeedManualRefresh =\n\t\t\t\t\tdeepEqual(oBindingInfo.filters, oldFilters[0]) &&\n\t\t\t\t\toRowBinding.getQueryOptionsFromParameters().$search === oBindingInfo.parameters.$search &&\n\t\t\t\t\t!bPendingManualUpdate &&\n\t\t\t\t\t_oView &&\n\t\t\t\t\t(_oView.getViewData() as any).converterType === \"ListReport\";\n\t\t\t}\n\t\t\tTableDelegateBase.updateBinding.apply(this, [oTable, oBindingInfo, oBinding]);\n\t\t\toTable.fireEvent(\"bindingUpdated\");\n\t\t\tif (bNeedManualRefresh && oTable.getFilter() && oBinding) {\n\t\t\t\toRowBinding\n\t\t\t\t\t.requestRefresh(oRowBinding.getGroupId())\n\t\t\t\t\t.finally(function () {\n\t\t\t\t\t\toInternalBindingContext.setProperty(sManualUpdatePropertyKey, false);\n\t\t\t\t\t})\n\t\t\t\t\t.catch(function (oError: any) {\n\t\t\t\t\t\tLog.error(\"Error while refreshing the table\", oError);\n\t\t\t\t\t});\n\t\t\t\toInternalBindingContext.setProperty(sManualUpdatePropertyKey, true);\n\t\t\t}\n\t\t\tthis._manageSemanticTargets(oTable);\n\t\t}\n\t\toTableAPI?.setProperty(\"outDatedBinding\", bIsSuspended);\n\t},\n\n\t_computeRowBindingInfoFromTemplate: function (oTable: any) {\n\t\t// We need to deepClone the info we get from the custom data, otherwise some of its subobjects (e.g. parameters) will\n\t\t// be shared with oBindingInfo and modified later (Object.assign only does a shallow clone)\n\t\tconst rowBindingInfo = deepClone(DelegateUtil.getCustomData(oTable, \"rowsBindingInfo\"));\n\t\t// if the rowBindingInfo has a $$getKeepAliveContext parameter we need to check it is the only Table with such a\n\t\t// parameter for the collectionMetaPath\n\t\tif (rowBindingInfo.parameters.$$getKeepAliveContext) {\n\t\t\tconst collectionPath = DelegateUtil.getCustomData(oTable, \"targetCollectionPath\");\n\t\t\tconst internalModel = oTable.getModel(\"internal\");\n\t\t\tconst keptAliveLists = internalModel.getObject(\"/keptAliveLists\") || {};\n\t\t\tif (!keptAliveLists[collectionPath]) {\n\t\t\t\tkeptAliveLists[collectionPath] = oTable.getId();\n\t\t\t\tinternalModel.setProperty(\"/keptAliveLists\", keptAliveLists);\n\t\t\t} else if (keptAliveLists[collectionPath] !== oTable.getId()) {\n\t\t\t\tdelete rowBindingInfo.parameters.$$getKeepAliveContext;\n\t\t\t}\n\t\t}\n\t\treturn rowBindingInfo;\n\t},\n\t_internalUpdateBindingInfo: function (oTable: any, oBindingInfo: any) {\n\t\tconst oInternalModelContext = oTable.getBindingContext(\"internal\");\n\t\tObject.assign(oBindingInfo, this._computeRowBindingInfoFromTemplate(oTable));\n\t\t/**\n\t\t * Binding info might be suspended at the beginning when the first bindRows is called:\n\t\t * To avoid duplicate requests but still have a binding to create new entries.\t\t\t\t *\n\t\t * After the initial binding step, follow up bindings should not longer be suspended.\n\t\t */\n\t\tif (oTable.getRowBinding()) {\n\t\t\toBindingInfo.suspended = false;\n\t\t}\n\t\t// The previously added handler for the event 'dataReceived' is not anymore there\n\t\t// since the bindingInfo is recreated from scratch so we need to set the flag to false in order\n\t\t// to again add the handler on this event if needed\n\t\tif (oInternalModelContext) {\n\t\t\toInternalModelContext.setProperty(\"dataReceivedAttached\", false);\n\t\t}\n\n\t\tlet oFilter;\n\t\tconst oFilterInfo = TableUtils.getAllFilterInfo(oTable);\n\t\t// Prepare binding info with filter/search parameters\n\t\tif (oFilterInfo.filters.length > 0) {\n\t\t\toFilter = new Filter({ filters: oFilterInfo.filters, and: true });\n\t\t}\n\t\tif (oFilterInfo.bindingPath) {\n\t\t\toBindingInfo.path = oFilterInfo.bindingPath;\n\t\t}\n\n\t\tconst oDataStateIndicator = oTable.getDataStateIndicator();\n\t\tif (oDataStateIndicator && oDataStateIndicator.isFiltering()) {\n\t\t\t// Include filters on messageStrip\n\t\t\tif (oBindingInfo.filters.length > 0) {\n\t\t\t\toFilter = new Filter({ filters: oBindingInfo.filters.concat(oFilterInfo.filters), and: true });\n\t\t\t\tTableUtils.updateBindingInfo(oBindingInfo, oFilterInfo, oFilter);\n\t\t\t}\n\t\t} else {\n\t\t\tTableUtils.updateBindingInfo(oBindingInfo, oFilterInfo, oFilter);\n\t\t}\n\t},\n\n\t_templateCustomColumnFragment: function (oColumnInfo: TableColumn, oView: any, oModifier: any, sTableId: any) {\n\t\tconst oColumnModel = new JSONModel(oColumnInfo),\n\t\t\toThis = new JSONModel({\n\t\t\t\tid: sTableId\n\t\t\t}),\n\t\t\toPreprocessorSettings = {\n\t\t\t\tbindingContexts: {\n\t\t\t\t\tthis: oThis.createBindingContext(\"/\"),\n\t\t\t\t\tcolumn: oColumnModel.createBindingContext(\"/\")\n\t\t\t\t},\n\t\t\t\tmodels: {\n\t\t\t\t\tthis: oThis,\n\t\t\t\t\tcolumn: oColumnModel\n\t\t\t\t}\n\t\t\t};\n\n\t\treturn DelegateUtil.templateControlFragment(\n\t\t\t\"sap.fe.macros.table.CustomColumn\",\n\t\t\toPreprocessorSettings,\n\t\t\t{ view: oView },\n\t\t\toModifier\n\t\t).then(function (oItem: any) {\n\t\t\toColumnModel.destroy();\n\t\t\treturn oItem;\n\t\t});\n\t},\n\n\t_templateSlotColumnFragment: async function (\n\t\toColumnInfo: CustomElement<CustomBasedTableColumn>,\n\t\toView: any,\n\t\toModifier: any,\n\t\tsTableId: any\n\t) {\n\t\tconst oColumnModel = new JSONModel(oColumnInfo),\n\t\t\toThis = new JSONModel({\n\t\t\t\tid: sTableId\n\t\t\t}),\n\t\t\toPreprocessorSettings = {\n\t\t\t\tbindingContexts: {\n\t\t\t\t\tthis: oThis.createBindingContext(\"/\"),\n\t\t\t\t\tcolumn: oColumnModel.createBindingContext(\"/\")\n\t\t\t\t},\n\t\t\t\tmodels: {\n\t\t\t\t\tthis: oThis,\n\t\t\t\t\tcolumn: oColumnModel\n\t\t\t\t}\n\t\t\t};\n\t\tconst slotColumnsXML = (await DelegateUtil.templateControlFragment(\"sap.fe.macros.table.SlotColumn\", oPreprocessorSettings, {\n\t\t\tisXML: true\n\t\t})) as Element;\n\t\tif (!slotColumnsXML) {\n\t\t\treturn Promise.resolve(null);\n\t\t}\n\t\tconst slotXML = slotColumnsXML.getElementsByTagName(\"slot\")[0],\n\t\t\tmdcTableTemplateXML = slotColumnsXML.getElementsByTagName(\"mdcTable:template\")[0];\n\t\tmdcTableTemplateXML.removeChild(slotXML);\n\t\tif (oColumnInfo.template) {\n\t\t\tconst oTemplate = new DOMParser().parseFromString(oColumnInfo.template, \"text/xml\");\n\t\t\tmdcTableTemplateXML.appendChild(oTemplate.firstElementChild!);\n\t\t} else {\n\t\t\tLog.error(`Please provide content inside this Building Block Column: ${oColumnInfo.header}`);\n\t\t\treturn Promise.resolve(null);\n\t\t}\n\t\tif (oModifier.targets !== \"jsControlTree\") {\n\t\t\treturn slotColumnsXML;\n\t\t}\n\t\treturn Fragment.load({\n\t\t\ttype: \"XML\",\n\t\t\tdefinition: slotColumnsXML\n\t\t});\n\t},\n\n\t_getExportFormat: function (dataType: any) {\n\t\tswitch (dataType) {\n\t\t\tcase \"Edm.Date\":\n\t\t\t\treturn ExcelFormat.getExcelDatefromJSDate();\n\t\t\tcase \"Edm.DateTimeOffset\":\n\t\t\t\treturn ExcelFormat.getExcelDateTimefromJSDateTime();\n\t\t\tcase \"Edm.TimeOfDay\":\n\t\t\t\treturn ExcelFormat.getExcelTimefromJSTime();\n\t\t\tdefault:\n\t\t\t\treturn undefined;\n\t\t}\n\t},\n\n\t_getVHRelevantFields: function (oMetaModel: any, sMetadataPath: any, sBindingPath?: any) {\n\t\tlet aFields: any[] = [],\n\t\t\toDataFieldData = oMetaModel.getObject(sMetadataPath);\n\n\t\tif (oDataFieldData.$kind && oDataFieldData.$kind === \"Property\") {\n\t\t\toDataFieldData = oMetaModel.getObject(`${sMetadataPath}@com.sap.vocabularies.UI.v1.DataFieldDefault`);\n\t\t\tsMetadataPath = `${sMetadataPath}@com.sap.vocabularies.UI.v1.DataFieldDefault`;\n\t\t}\n\t\tswitch (oDataFieldData.$Type) {\n\t\t\tcase \"com.sap.vocabularies.UI.v1.DataFieldForAnnotation\":\n\t\t\t\tif (oMetaModel.getObject(`${sMetadataPath}/Target/$AnnotationPath`).includes(\"com.sap.vocabularies.UI.v1.FieldGroup\")) {\n\t\t\t\t\toMetaModel.getObject(`${sMetadataPath}/Target/$AnnotationPath/Data`).forEach((oValue: any, iIndex: any) => {\n\t\t\t\t\t\taFields = aFields.concat(\n\t\t\t\t\t\t\tthis._getVHRelevantFields(oMetaModel, `${sMetadataPath}/Target/$AnnotationPath/Data/${iIndex}`)\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath\":\n\t\t\tcase \"com.sap.vocabularies.UI.v1.DataFieldWithUrl\":\n\t\t\tcase \"com.sap.vocabularies.UI.v1.DataField\":\n\t\t\tcase \"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation\":\n\t\t\tcase \"com.sap.vocabularies.UI.v1.DataFieldWithAction\":\n\t\t\t\taFields.push(oMetaModel.getObject(`${sMetadataPath}/Value/$Path`));\n\t\t\t\tbreak;\n\t\t\tcase \"com.sap.vocabularies.UI.v1.DataFieldForAction\":\n\t\t\tcase \"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation\":\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t// property\n\t\t\t\t// temporary workaround to make sure VH relevant field path do not contain the bindingpath\n\t\t\t\tif (sMetadataPath.indexOf(sBindingPath) === 0) {\n\t\t\t\t\taFields.push(sMetadataPath.substring(sBindingPath.length + 1));\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\taFields.push(CommonHelper.getNavigationPath(sMetadataPath, true));\n\t\t\t\tbreak;\n\t\t}\n\t\treturn aFields;\n\t},\n\t_setDraftIndicatorOnVisibleColumn: function (oTable: any, aColumns: any, oColumnInfo: any) {\n\t\tconst oInternalBindingContext = oTable.getBindingContext(\"internal\");\n\t\tif (!oInternalBindingContext) {\n\t\t\treturn;\n\t\t}\n\t\tconst sInternalPath = oInternalBindingContext.getPath();\n\t\tconst aColumnsWithDraftIndicator = aColumns.filter((oColumn: any) => {\n\t\t\treturn this._bColumnHasPropertyWithDraftIndicator(oColumn);\n\t\t});\n\t\tconst aVisibleColumns = oTable.getColumns();\n\t\tlet sAddVisibleColumnName, sVisibleColumnName, bFoundColumnVisibleWithDraft, sColumnNameWithDraftIndicator;\n\t\tfor (const i in aVisibleColumns) {\n\t\t\tsVisibleColumnName = aVisibleColumns[i].getDataProperty();\n\t\t\tfor (const j in aColumnsWithDraftIndicator) {\n\t\t\t\tsColumnNameWithDraftIndicator = aColumnsWithDraftIndicator[j].name;\n\t\t\t\tif (sVisibleColumnName === sColumnNameWithDraftIndicator) {\n\t\t\t\t\tbFoundColumnVisibleWithDraft = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (oColumnInfo && oColumnInfo.name === sColumnNameWithDraftIndicator) {\n\t\t\t\t\tsAddVisibleColumnName = oColumnInfo.name;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (bFoundColumnVisibleWithDraft) {\n\t\t\t\toInternalBindingContext.setProperty(sInternalPath + SEMANTICKEY_HAS_DRAFTINDICATOR, sVisibleColumnName);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (!bFoundColumnVisibleWithDraft && sAddVisibleColumnName) {\n\t\t\toInternalBindingContext.setProperty(sInternalPath + SEMANTICKEY_HAS_DRAFTINDICATOR, sAddVisibleColumnName);\n\t\t}\n\t},\n\tremoveItem: function (oPropertyInfoName: any, oTable: any, mPropertyBag: any) {\n\t\tlet doRemoveItem = true;\n\t\tif (!oPropertyInfoName) {\n\t\t\t// 1. Application removed the property from their data model\n\t\t\t// 2. addItem failed before revertData created\n\t\t\treturn Promise.resolve(doRemoveItem);\n\t\t}\n\t\tconst oModifier = mPropertyBag.modifier;\n\t\tconst sDataProperty = oModifier.getProperty(oPropertyInfoName, \"dataProperty\");\n\t\tif (sDataProperty && sDataProperty.indexOf && sDataProperty.indexOf(\"InlineXML\") !== -1) {\n\t\t\toModifier.insertAggregation(oTable, \"dependents\", oPropertyInfoName);\n\t\t\tdoRemoveItem = false;\n\t\t}\n\t\tif (oTable.isA && oModifier.targets === \"jsControlTree\") {\n\t\t\tthis._setDraftIndicatorStatus(oModifier, oTable, this.getColumnsFor(oTable));\n\t\t}\n\t\treturn Promise.resolve(doRemoveItem);\n\t},\n\t_getMetaModel: function (mPropertyBag: any) {\n\t\treturn mPropertyBag.appComponent && mPropertyBag.appComponent.getModel().getMetaModel();\n\t},\n\t_setDraftIndicatorStatus: function (oModifier: any, oTable: any, aColumns: any, oColumnInfo?: any) {\n\t\tif (oModifier.targets === \"jsControlTree\") {\n\t\t\tthis._setDraftIndicatorOnVisibleColumn(oTable, aColumns, oColumnInfo);\n\t\t}\n\t},\n\t_getGroupId: function (sRetrievedGroupId: any) {\n\t\treturn sRetrievedGroupId || undefined;\n\t},\n\t_getDependent: function (oDependent: any, sPropertyInfoName: any, sDataProperty: any) {\n\t\tif (sPropertyInfoName === sDataProperty) {\n\t\t\treturn oDependent;\n\t\t}\n\t\treturn undefined;\n\t},\n\t_fnTemplateValueHelp: function (fnTemplateValueHelp: any, bValueHelpRequired: any, bValueHelpExists: any) {\n\t\tif (bValueHelpRequired && !bValueHelpExists) {\n\t\t\treturn fnTemplateValueHelp(\"sap.fe.macros.table.ValueHelp\");\n\t\t}\n\t\treturn Promise.resolve();\n\t},\n\t_getDisplayMode: function (bDisplayMode: any) {\n\t\tlet columnEditMode;\n\t\tif (bDisplayMode !== undefined) {\n\t\t\tbDisplayMode = typeof bDisplayMode === \"boolean\" ? bDisplayMode : bDisplayMode === \"true\";\n\t\t\tcolumnEditMode = bDisplayMode ? \"Display\" : \"Editable\";\n\t\t\treturn {\n\t\t\t\tdisplaymode: bDisplayMode,\n\t\t\t\tcolumnEditMode: columnEditMode\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\tdisplaymode: undefined,\n\t\t\tcolumnEditMode: undefined\n\t\t};\n\t},\n\t_insertAggregation: function (oValueHelp: any, oModifier: any, oTable: any) {\n\t\tif (oValueHelp) {\n\t\t\treturn oModifier.insertAggregation(oTable, \"dependents\", oValueHelp, 0);\n\t\t}\n\t\treturn undefined;\n\t},\n\t/**\n\t * Invoked when a column is added using the table personalization dialog.\n\t *\n\t * @param sPropertyInfoName Name of the property for which the column is added\n\t * @param oTable Instance of table control\n\t * @param mPropertyBag Instance of property bag from the flexibility API\n\t * @returns Once resolved, a table column definition is returned\n\t */\n\taddItem: async function (sPropertyInfoName: string, oTable: any, mPropertyBag: any) {\n\t\tconst oMetaModel = this._getMetaModel(mPropertyBag),\n\t\t\toModifier = mPropertyBag.modifier,\n\t\t\tsTableId = oModifier.getId(oTable),\n\t\t\taColumns = oTable.isA ? this.getColumnsFor(oTable) : null;\n\t\tif (!aColumns) {\n\t\t\treturn Promise.resolve(null);\n\t\t}\n\n\t\tconst oColumnInfo = aColumns.find(function (oColumn) {\n\t\t\treturn oColumn.name === sPropertyInfoName;\n\t\t});\n\t\tif (!oColumnInfo) {\n\t\t\tLog.error(`${sPropertyInfoName} not found while adding column`);\n\t\t\treturn Promise.resolve(null);\n\t\t}\n\t\tthis._setDraftIndicatorStatus(oModifier, oTable, aColumns, oColumnInfo);\n\t\t// render custom column\n\t\tif (oColumnInfo.type === \"Default\") {\n\t\t\treturn this._templateCustomColumnFragment(oColumnInfo, mPropertyBag.view, oModifier, sTableId);\n\t\t}\n\n\t\tif (oColumnInfo.type === \"Slot\") {\n\t\t\treturn this._templateSlotColumnFragment(\n\t\t\t\toColumnInfo as CustomElement<CustomBasedTableColumn>,\n\t\t\t\tmPropertyBag.view,\n\t\t\t\toModifier,\n\t\t\t\tsTableId\n\t\t\t);\n\t\t}\n\t\t// fall-back\n\t\tif (!oMetaModel) {\n\t\t\treturn Promise.resolve(null);\n\t\t}\n\n\t\tconst sPath: string = await DelegateUtil.getCustomData(oTable, \"metaPath\", oModifier);\n\t\tconst sEntityTypePath: string = await DelegateUtil.getCustomData(oTable, \"entityType\", oModifier);\n\t\tconst sRetrievedGroupId = await DelegateUtil.getCustomData(oTable, \"requestGroupId\", oModifier);\n\t\tconst sGroupId: string = this._getGroupId(sRetrievedGroupId);\n\t\tconst oTableContext: Context = oMetaModel.createBindingContext(sPath);\n\t\tconst aFetchedProperties = await this._getCachedOrFetchPropertiesForEntity(\n\t\t\toTable,\n\t\t\tsEntityTypePath,\n\t\t\toMetaModel,\n\t\t\tmPropertyBag.appComponent\n\t\t);\n\t\tconst oPropertyInfo = aFetchedProperties.find(function (oInfo: any) {\n\t\t\treturn oInfo.name === sPropertyInfoName;\n\t\t});\n\n\t\tconst oPropertyContext: Context = oMetaModel.createBindingContext(oPropertyInfo.metadataPath);\n\t\tconst aVHProperties = this._getVHRelevantFields(oMetaModel, oPropertyInfo.metadataPath, sPath);\n\t\tconst oParameters = {\n\t\t\tsBindingPath: sPath,\n\t\t\tsValueHelpType: \"TableValueHelp\",\n\t\t\toControl: oTable,\n\t\t\toMetaModel,\n\t\t\toModifier,\n\t\t\toPropertyInfo\n\t\t};\n\n\t\tconst fnTemplateValueHelp = async (sFragmentName: any) => {\n\t\t\tconst oThis = new JSONModel({\n\t\t\t\t\tid: sTableId,\n\t\t\t\t\trequestGroupId: sGroupId\n\t\t\t\t}),\n\t\t\t\toPreprocessorSettings = {\n\t\t\t\t\tbindingContexts: {\n\t\t\t\t\t\tthis: oThis.createBindingContext(\"/\"),\n\t\t\t\t\t\tdataField: oPropertyContext,\n\t\t\t\t\t\tcontextPath: oTableContext\n\t\t\t\t\t},\n\t\t\t\t\tmodels: {\n\t\t\t\t\t\tthis: oThis,\n\t\t\t\t\t\tdataField: oMetaModel,\n\t\t\t\t\t\tmetaModel: oMetaModel,\n\t\t\t\t\t\tcontextPath: oMetaModel\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\ttry {\n\t\t\t\tconst oValueHelp = await DelegateUtil.templateControlFragment(sFragmentName, oPreprocessorSettings, {}, oModifier);\n\t\t\t\treturn await this._insertAggregation(oValueHelp, oModifier, oTable);\n\t\t\t} catch (oError: any) {\n\t\t\t\t//We always resolve the promise to ensure that the app does not crash\n\t\t\t\tLog.error(`ValueHelp not loaded : ${oError.message}`);\n\t\t\t\treturn null;\n\t\t\t} finally {\n\t\t\t\toThis.destroy();\n\t\t\t}\n\t\t};\n\n\t\tconst fnTemplateFragment = (oInPropertyInfo: any, oView: any) => {\n\t\t\tconst sFragmentName = \"sap.fe.macros.table.Column\";\n\n\t\t\tlet bDisplayMode;\n\t\t\tlet sTableTypeCustomData;\n\t\t\tlet sOnChangeCustomData;\n\t\t\tlet sCreationModeCustomData;\n\n\t\t\treturn Promise.all([\n\t\t\t\tDelegateUtil.getCustomData(oTable, \"displayModePropertyBinding\", oModifier),\n\t\t\t\tDelegateUtil.getCustomData(oTable, \"tableType\", oModifier),\n\t\t\t\tDelegateUtil.getCustomData(oTable, \"onChange\", oModifier),\n\t\t\t\tDelegateUtil.getCustomData(oTable, \"creationMode\", oModifier)\n\t\t\t]).then((aCustomData: any[]) => {\n\t\t\t\tbDisplayMode = aCustomData[0];\n\t\t\t\tsTableTypeCustomData = aCustomData[1];\n\t\t\t\tsOnChangeCustomData = aCustomData[2];\n\t\t\t\tsCreationModeCustomData = aCustomData[3];\n\t\t\t\t// Read Only and Column Edit Mode can both have three state\n\t\t\t\t// Undefined means that the framework decides what to do\n\t\t\t\t// True / Display means always read only\n\t\t\t\t// False / Editable means editable but while still respecting the low level principle (immutable property will not be editable)\n\t\t\t\tconst oDisplayModes = this._getDisplayMode(bDisplayMode);\n\t\t\t\tbDisplayMode = oDisplayModes.displaymode;\n\t\t\t\tconst columnEditMode = oDisplayModes.columnEditMode;\n\n\t\t\t\tconst oThis = new JSONModel({\n\t\t\t\t\t\tenableAutoColumnWidth: (oTable.getParent() as TableAPI).enableAutoColumnWidth,\n\t\t\t\t\t\tisOptimizedForSmallDevice: (oTable.getParent() as TableAPI).isOptimizedForSmallDevice,\n\t\t\t\t\t\treadOnly: bDisplayMode,\n\t\t\t\t\t\tcolumnEditMode: columnEditMode,\n\t\t\t\t\t\ttableType: sTableTypeCustomData,\n\t\t\t\t\t\tonChange: sOnChangeCustomData,\n\t\t\t\t\t\tid: sTableId,\n\t\t\t\t\t\tnavigationPropertyPath: sPropertyInfoName,\n\t\t\t\t\t\tcolumnInfo: oColumnInfo,\n\t\t\t\t\t\tcollection: {\n\t\t\t\t\t\t\tsPath: sPath,\n\t\t\t\t\t\t\toModel: oMetaModel\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcreationMode: sCreationModeCustomData\n\t\t\t\t\t} as tableDelegateModel),\n\t\t\t\t\toPreprocessorSettings = {\n\t\t\t\t\t\tbindingContexts: {\n\t\t\t\t\t\t\tentitySet: oTableContext,\n\t\t\t\t\t\t\tcollection: oTableContext,\n\t\t\t\t\t\t\tdataField: oPropertyContext,\n\t\t\t\t\t\t\tthis: oThis.createBindingContext(\"/\"),\n\t\t\t\t\t\t\tcolumn: oThis.createBindingContext(\"/columnInfo\")\n\t\t\t\t\t\t},\n\t\t\t\t\t\tmodels: {\n\t\t\t\t\t\t\tthis: oThis,\n\t\t\t\t\t\t\tentitySet: oMetaModel,\n\t\t\t\t\t\t\tcollection: oMetaModel,\n\t\t\t\t\t\t\tdataField: oMetaModel,\n\t\t\t\t\t\t\tmetaModel: oMetaModel,\n\t\t\t\t\t\t\tcolumn: oThis\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\treturn DelegateUtil.templateControlFragment(sFragmentName, oPreprocessorSettings, { view: oView }, oModifier).finally(\n\t\t\t\t\tfunction () {\n\t\t\t\t\t\toThis.destroy();\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t});\n\t\t};\n\n\t\tawait Promise.all(\n\t\t\taVHProperties.map(async (sPropertyName: any) => {\n\t\t\t\tconst mParameters = Object.assign({}, oParameters, { sPropertyName: sPropertyName });\n\n\t\t\t\tconst aResults = await Promise.all([\n\t\t\t\t\tDelegateUtil.isValueHelpRequired(mParameters),\n\t\t\t\t\tDelegateUtil.doesValueHelpExist(mParameters)\n\t\t\t\t]);\n\n\t\t\t\tconst bValueHelpRequired = aResults[0],\n\t\t\t\t\tbValueHelpExists = aResults[1];\n\t\t\t\treturn this._fnTemplateValueHelp(fnTemplateValueHelp, bValueHelpRequired, bValueHelpExists);\n\t\t\t})\n\t\t);\n\t\t// If view is not provided try to get it by accessing to the parental hierarchy\n\t\t// If it doesn't work (table into an unattached OP section) get the view via the AppComponent\n\t\tconst view =\n\t\t\tmPropertyBag.view ||\n\t\t\tCommonUtils.getTargetView(oTable) ||\n\t\t\t(mPropertyBag.appComponent ? CommonUtils.getCurrentPageView(mPropertyBag.appComponent) : undefined);\n\t\treturn fnTemplateFragment(oPropertyInfo, view);\n\t},\n\n\t/**\n\t * Provide the Table's filter delegate to provide basic filter functionality such as adding FilterFields.\n\t *\n\t * @returns Object for the Tables filter personalization.\n\t */\n\tgetFilterDelegate: function () {\n\t\treturn Object.assign({}, FilterBarDelegate, {\n\t\t\taddItem: function (sPropertyInfoName: any, oParentControl: any) {\n\t\t\t\tif (sPropertyInfoName.indexOf(\"Property::\") === 0) {\n\t\t\t\t\t// Correct the name of complex property info references.\n\t\t\t\t\tsPropertyInfoName = sPropertyInfoName.replace(\"Property::\", \"\");\n\t\t\t\t}\n\t\t\t\treturn FilterBarDelegate.addItem(sPropertyInfoName, oParentControl);\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Returns the TypeUtil attached to this delegate.\n\t *\n\t * @returns Any instance of TypeUtil\n\t */\n\tgetTypeUtil: function (/*oPayload: object*/) {\n\t\treturn TypeUtil;\n\t},\n\n\tformatGroupHeader(oTable: any, oContext: any, sProperty: any) {\n\t\tconst mFormatInfos = DelegateUtil.getCachedProperties(oTable),\n\t\t\toFormatInfo =\n\t\t\t\tmFormatInfos &&\n\t\t\t\tmFormatInfos.filter((obj: any) => {\n\t\t\t\t\treturn obj.name === sProperty;\n\t\t\t\t})[0],\n\t\t\t/*For a Date or DateTime property, the value is returned in external format using a UI5 type for the\n\t        given property path that formats corresponding to the property's EDM type and constraints*/\n\t\t\tbExternalFormat = oFormatInfo?.typeConfig?.baseType === \"DateTime\" || oFormatInfo?.typeConfig?.baseType === \"Date\";\n\t\tlet sValue;\n\t\tif (oFormatInfo && oFormatInfo.mode) {\n\t\t\tswitch (oFormatInfo.mode) {\n\t\t\t\tcase \"Description\":\n\t\t\t\t\tsValue = oContext.getProperty(oFormatInfo.descriptionProperty, bExternalFormat);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"DescriptionValue\":\n\t\t\t\t\tsValue = ValueFormatter.formatWithBrackets(\n\t\t\t\t\t\toContext.getProperty(oFormatInfo.descriptionProperty, bExternalFormat),\n\t\t\t\t\t\toContext.getProperty(oFormatInfo.valueProperty, bExternalFormat)\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"ValueDescription\":\n\t\t\t\t\tsValue = ValueFormatter.formatWithBrackets(\n\t\t\t\t\t\toContext.getProperty(oFormatInfo.valueProperty, bExternalFormat),\n\t\t\t\t\t\toContext.getProperty(oFormatInfo.descriptionProperty, bExternalFormat)\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t} else {\n\t\t\tsValue = oContext.getProperty(oFormatInfo?.path, bExternalFormat);\n\t\t}\n\t\treturn ResourceModel.getText(\"M_TABLE_GROUP_HEADER_TITLE\", [oFormatInfo?.label, sValue]);\n\t}\n});\n"],"mappings":"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"}},{"offset":{"line":27601,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","deepClone","deepEqual","deepExtend","ActionRuntime","CommonUtils","MetaModelConverter","ValueFormatter","DeleteHelper","ExcelFormat","ModelHelper","EDM","TypeUtil","CommonHelper","DelegateUtil","FilterBarDelegate","ResourceModel","TableSizeHelper","TableUtils","Fragment","TableDelegateBase","Filter","JSONModel","isTypeFilterable","getInvolvedDataModelObjects","SEMANTICKEY_HAS_DRAFTINDICATOR","Object","assign","_computeVisualSettingsForFieldGroup","oTable","oProperty","aProperties","name","indexOf","oColumn","getColumns","find","oCol","getDataProperty","bShowDataFieldsLabel","data","oMetaModel","getModel","getMetaModel","involvedDataModelObjects","getContext","metadataPath","convertedMetaData","convertedTypes","oDataField","targetObject","oFieldGroup","Target","$target","aFieldWidth","Data","forEach","oData","oDataFieldWidth","$Type","getWidthForDataFieldForAnnotation","getWidthForDataField","labelWidth","propertyWidth","getButtonWidth","Label","push","nWidest","reduce","acc","value","Math","max","visualSettings","widthCalculation","verticalArrangement","minWidth","ceil","_computeVisualSettingsForPropertyWithValueHelp","table","property","tableAPI","getParent","propertyInfos","metaModel","dataField","getObject","gap","getProperty","_computeVisualSettingsForPropertyWithUnit","oUnit","oUnitText","oTimezoneText","oTableAPI","sUnitText","getReadOnly","_computeLabel","labelMap","label","_property$path","propertiesWithSameLabel","length","path","includes","additionalLabels","join","_updatePropertyInfo","properties","p13nMode","getP13nMode","sortable","filterable","groupable","undefined","concat","this","typeConfig","getColumnsFor","getTableDefinition","columns","_getAggregatedPropertyMap","aggregates","fetchExportCapabilities","oCapabilities","XLSX","oModel","fetchModel","then","model","aSupportedFormats","aLowerFormats","map","element","toLowerCase","oAnnotation","catch","err","error","_isFilterableNavigationProperty","columnInfo","tableDataModelObjectPath","getCustomData","columnNavigationProperties","annotationPath","navigationProperties","tableTargetEntityIndex","findIndex","prop","_prop$targetType","targetType","targetEntityType","relativeNavigationProperties","slice","relativePath","isPartOfLineItem","some","navigationProperty","_type","isCollection","_fetchPropertyInfo","appComponent","_columnInfo$typeConfi","_columnInfo$typeConfi2","_columnInfo$propertyI","sAbsoluteNavigationPath","oNavigationContext","createBindingContext","oTypeConfig","className","getTypeConfig","formatOptions","constraints","bFilterable","isPropertyFilterable","isComplexType","bIsAnalyticalTable","aAggregatedPropertyMapUnfilterable","getLocalizedText","propertyInfo","groupLabel","group","tooltip","visible","availability","exportSettings","_setPropertyInfoExportSettings","unit","keys","exportDataPointTargetValue","_columnInfo$exportSet","wrap","_extension","_updateAnalyticalPropertyInfoAttributes","extension","technicallyGroupable","key","isKey","isGroupable","textArrangement","descriptionColumn","_columnInfo$textArran","textProperty","mode","valueProperty","descriptionProperty","text","caseSensitive","additionalLabel","unitText","timezoneText","_columnInfo$typeConfi3","exportFormat","_getExportFormat","timezoneProperty","format","template","_columnInfo$exportSet2","aggregatable","_fetchCustomPropertyInfo","oColumnInfo","oAppComponent","sLabel","header","oPropertyInfo","type","_bColumnHasPropertyWithDraftIndicator","hasDraftIndicator","fieldGroupDraftIndicatorPropertyPath","_updateDraftIndicatorModel","_oTable","_oColumnInfo","aVisibleColumns","oInternalBindingContext","getBindingContext","sInternalPath","getPath","index","setProperty","_fetchPropertiesForEntity","sEntityTypePath","sBindingPath","getEntitySetPath","aFetchedProperties","oFR","getFilterRestrictionsByPath","aNonFilterableProps","NonFilterableProperties","Promise","resolve","aColumns","maxConditions","isMultiValue","Error","_getCachedOrFetchPropertiesForEntity","entityTypePath","fetchedProperties","getCachedProperties","subFetchedProperties","setCachedProperties","_setTableNoDataText","oBindingInfo","sNoDataKey","oTableFilterInfo","getAllFilterInfo","suffixResourceKey","startsWith","substr","_getNoDataTextWithFilters","sFilterAssociation","getFilter","test","search","filters","getResourceBundle","oResourceBundle","setNoData","getTranslatedText","handleTableDataReceived","oInternalModelContext","oBinding","getRowBinding","bDataReceivedAttached","attachDataReceived","aSelectedContexts","getSelectedContexts","oActionOperationAvailableMap","JSON","parse","parseCustomData","setActionEnablement","updateDeleteInfoForSelectedContexts","setUpEmptyRows","rebind","bIsSuspended","clearSelection","apply","onTableBound","whenBound","oError","fetchProperties","preInit","oFastCreationRow","getCreationRow","setBindingContext","updateBindingInfo","_internalUpdateBindingInfo","events","dataReceived","onInternalDataReceived","bind","dataRequested","onInternalDataRequested","_manageSemanticTargets","oMDCTable","oRowBinding","attachEventOnce","setTimeout","_oView","getTargetView","getSemanticTargetsFromTable","getController","updateBinding","bNeedManualRefresh","sManualUpdatePropertyKey","bPendingManualUpdate","oldFilters","getFilters","getQueryOptionsFromParameters","$search","parameters","getViewData","converterType","fireEvent","requestRefresh","getGroupId","finally","_computeRowBindingInfoFromTemplate","rowBindingInfo","$$getKeepAliveContext","collectionPath","internalModel","keptAliveLists","getId","suspended","oFilter","oFilterInfo","and","bindingPath","oDataStateIndicator","getDataStateIndicator","isFiltering","_templateCustomColumnFragment","oView","oModifier","sTableId","oColumnModel","oThis","id","oPreprocessorSettings","bindingContexts","column","models","templateControlFragment","view","oItem","destroy","_templateSlotColumnFragment","async","slotColumnsXML","isXML","slotXML","getElementsByTagName","mdcTableTemplateXML","removeChild","oTemplate","DOMParser","parseFromString","appendChild","firstElementChild","targets","load","definition","dataType","getExcelDatefromJSDate","getExcelDateTimefromJSDateTime","getExcelTimefromJSTime","_getVHRelevantFields","sMetadataPath","aFields","oDataFieldData","$kind","oValue","iIndex","substring","getNavigationPath","_setDraftIndicatorOnVisibleColumn","aColumnsWithDraftIndicator","filter","sAddVisibleColumnName","sVisibleColumnName","bFoundColumnVisibleWithDraft","sColumnNameWithDraftIndicator","i","j","removeItem","oPropertyInfoName","mPropertyBag","doRemoveItem","modifier","sDataProperty","insertAggregation","isA","_setDraftIndicatorStatus","_getMetaModel","_getGroupId","sRetrievedGroupId","_getDependent","oDependent","sPropertyInfoName","_fnTemplateValueHelp","fnTemplateValueHelp","bValueHelpRequired","bValueHelpExists","_getDisplayMode","bDisplayMode","columnEditMode","displaymode","_insertAggregation","oValueHelp","addItem","sPath","sGroupId","oTableContext","oInfo","oPropertyContext","aVHProperties","oParameters","sValueHelpType","oControl","requestGroupId","contextPath","sFragmentName","message","fnTemplateFragment","oInPropertyInfo","sTableTypeCustomData","sOnChangeCustomData","sCreationModeCustomData","all","aCustomData","oDisplayModes","enableAutoColumnWidth","isOptimizedForSmallDevice","readOnly","tableType","onChange","navigationPropertyPath","collection","creationMode","entitySet","mParameters","sPropertyName","aResults","isValueHelpRequired","doesValueHelpExist","getCurrentPageView","getFilterDelegate","oParentControl","replace","getTypeUtil","formatGroupHeader","oContext","sProperty","_oFormatInfo$typeConf","_oFormatInfo$typeConf2","mFormatInfos","oFormatInfo","obj","bExternalFormat","baseType","sValue","formatWithBrackets","getText"],"sources":["TableDelegate-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,yDAAO,CAAC,eAAgB,0BAA2B,0BAA2B,2BAA4B,4BAA6B,0BAA2B,4CAA6C,wCAAyC,mCAAoC,wCAAyC,kCAAmC,uBAAwB,4BAA6B,6BAA8B,6BAA8B,4CAA6C,8BAA+B,sCAAuC,4BAA6B,uBAAwB,oCAAqC,sBAAuB,+BAAgC,SAAUC,EAAKC,EAAWC,EAAWC,EAAYC,EAAeC,EAAaC,EAAoBC,EAAgBC,EAAcC,EAAaC,EAAaC,EAAKC,EAAUC,EAAcC,EAAcC,EAAmBC,EAAeC,EAAiBC,EAAYC,EAAUC,EAAmBC,EAAQC,GAC1gC,aAEA,IAAIC,EAAmBZ,EAAIY,iBAC3B,IAAIC,EAA8BlB,EAAmBkB,4BACrD,MAAMC,EAAiC,gCAavC,OAAOC,OAAOC,OAAO,CAAC,EAAGP,EAAmB,CAY1CQ,oCAAqC,SAAUC,EAAQC,EAAWC,GAChE,GAAID,EAAUE,KAAKC,QAAQ,0CAA4C,EAAG,CACxE,MAAMC,EAAUL,EAAOM,aAAaC,KAAK,SAAUC,GACjD,OAAOA,EAAKC,oBAAsBR,EAAUE,IAC9C,GACA,MAAMO,EAAuBL,EAAUA,EAAQM,KAAK,yBAA2B,OAAS,MACxF,MAAMC,EAAaZ,EAAOa,WAAWC,eACrC,MAAMC,EAA2BpB,EAA4BiB,EAAWI,WAAWf,EAAUgB,eAC7F,MAAMC,EAAoBH,EAAyBI,eACnD,MAAMC,EAAaL,EAAyBM,aAC5C,MAAMC,EAAcF,EAAWG,OAAOC,QACtC,MAAMC,EAAc,GACpBH,EAAYI,KAAKC,QAAQ,SAAUC,GACjC,IAAIC,EACJ,OAAQD,EAAME,OACZ,IAAK,oDACHD,EAAkBzC,EAAgB2C,kCAAkCH,EAAO1B,EAAagB,EAAmBR,GAC3G,MACF,IAAK,uCACHmB,EAAkBzC,EAAgB4C,qBAAqBJ,EAAOlB,EAAsBR,EAAagB,GACjG,MACF,IAAK,gDACHW,EAAkB,CAChBI,WAAY,EACZC,cAAe9C,EAAgB+C,eAAeP,EAAMQ,QAEtD,MACF,SAEF,GAAIP,EAAiB,CACnBJ,EAAYY,KAAKR,EAAgBI,WAAaJ,EAAgBK,cAChE,CACF,GACA,MAAMI,EAAUb,EAAYc,OAAO,SAAUC,EAAKC,GAChD,OAAOC,KAAKC,IAAIH,EAAKC,EACvB,EAAG,GACHxC,EAAU2C,eAAiBtE,EAAW2B,EAAU2C,eAAgB,CAC9DC,iBAAkB,CAChBC,oBAAqB,KACrBC,SAAUL,KAAKM,KAAKV,KAG1B,CACF,EACAW,+CAAgD,SAAUC,EAAOC,GAC/D,MAAMC,EAAWF,EAAMG,YACvB,IAAKF,EAASG,cAAe,CAC3B,MAAMC,EAAYL,EAAMrC,WAAWC,eACnC,GAAIqC,EAASlC,cAAgBsC,EAAW,CACtC,MAAMC,EAAYD,EAAUE,UAAU,GAAGN,EAASlC,iBAClD,GAAIuC,GAAaA,EAAU,6CAA8C,CACvEL,EAASP,eAAiBtE,EAAW6E,EAASP,gBAAkB,CAAC,EAAG,CAClEC,iBAAkB,CAChBa,IAAKN,EAASO,YAAY,YAAc,EAAI,IAGlD,CACF,CACF,CACF,EACAC,0CAA2C,SAAU5D,EAAQC,EAAW4D,EAAOC,EAAWC,GACxF,MAAMC,EAAYhE,EAASA,EAAOqD,YAAc,KAEhD,MAAMY,EAAYH,GAAaC,EAC/B,GAAIE,EAAW,CACbhE,EAAU2C,eAAiBtE,EAAW2B,EAAU2C,eAAgB,CAC9DC,iBAAkB,CAChBa,IAAKhB,KAAKM,KAAK5D,EAAgB+C,eAAe8B,MAGpD,CACA,GAAIJ,EAAO,CACT5D,EAAU2C,eAAiBtE,EAAW2B,EAAU2C,eAAgB,CAC9DC,iBAAkB,CAEhBa,IAAKM,GAAaA,EAAUE,cAAgB,EAAI,IAGtD,CACF,EACAC,cAAe,SAAUhB,EAAUiB,GACjC,GAAIjB,EAASkB,MAAO,CAClB,IAAIC,EACJ,MAAMC,EAA0BH,EAASjB,EAASkB,OAClD,IAAKE,IAA4B,MAAQA,SAAiC,OAAS,EAAIA,EAAwBC,QAAU,IAAMF,EAAiBnB,EAASsB,QAAU,MAAQH,SAAwB,GAAKA,EAAeI,SAAS,MAAQvB,EAASwB,iBAAkB,CACjQxB,EAASkB,MAAQlB,EAASkB,MAAQ,KAAOlB,EAASwB,iBAAiBC,KAAK,OAAS,GACnF,QACOzB,EAASwB,gBAClB,CACF,EAEAE,oBAAqB,SAAU3B,EAAO4B,GACpC,MAAMV,EAAW,CAAC,EAElB,MAAMW,EAAW7B,EAAM8B,cACvBF,EAAWnD,QAAQwB,IACjB,IAAKA,EAASG,eAAiBH,EAASkB,MAAO,CAE7C,IAAKU,IAAa,MAAQA,SAAkB,OAAS,EAAIA,EAAS3E,QAAQ,UAAY,GAAK+C,EAAS8B,WAAaF,IAAa,MAAQA,SAAkB,OAAS,EAAIA,EAAS3E,QAAQ,YAAc,GAAK+C,EAAS+B,aAAeH,IAAa,MAAQA,SAAkB,OAAS,EAAIA,EAAS3E,QAAQ,WAAa,GAAK+C,EAASgC,UAAW,CAC1Uf,EAASjB,EAASkB,OAASD,EAASjB,EAASkB,SAAWe,UAAYhB,EAASjB,EAASkB,OAAOgB,OAAO,CAAClC,IAAa,CAACA,EACrH,CACF,IAEF2B,EAAWnD,QAAQwB,IACjBmC,KAAKvF,oCAAoCmD,EAAOC,EAAU2B,GAC1DQ,KAAKrC,+CAA+CC,EAAOC,GAI3DA,EAASoC,WAAajH,EAAW6E,EAASoC,WAAY,CAAC,GACvDD,KAAKnB,cAAchB,EAAUiB,EAAS,GAExC,OAAOU,CACT,EACAU,cAAe,SAAUtC,GACvB,OAAOA,EAAMG,YAAYoC,qBAAqBC,OAChD,EACAC,0BAA2B,SAAU3F,GACnC,OAAOA,EAAOqD,YAAYoC,qBAAqBG,UACjD,EAOAC,wBAAyB,SAAU7F,GACjC,MAAM8F,EAAgB,CACpBC,KAAM,CAAC,GAET,IAAIC,EACJ,OAAO/G,EAAagH,WAAWjG,GAAQkG,KAAK,SAAUC,GACpDH,EAASG,EACT,OAAOH,EAAOlF,eAAe2C,UAAU,+DACzC,GAAGyC,KAAK,SAAUE,GAChB,MAAMC,GAAiBD,GAAqB,IAAIE,IAAIC,GAC3CA,EAAQC,eAEjB,GAAIH,EAAcjG,QAAQ,oBAAsB,EAAG,CACjD,OAAO4F,EAAOlF,eAAe2C,UAAU,yDACzC,CACA,OAAO2B,SACT,GAAGc,KAAK,SAAUO,GAChB,GAAIA,EAAa,CACfX,EAAc,OAASjG,OAAOC,OAAO,CAAC,EAAG2G,EAC3C,CACF,GAAGC,MAAM,SAAUC,GACjBxI,EAAIyI,MAAM,wDAAwDD,IACpE,GAAGT,KAAK,WACN,OAAOJ,CACT,EACF,EAUAe,gCAAiC,SAAUC,EAAYvD,EAAWL,GAEhE,MAAM6D,EAA2BpH,EAA4B4D,EAAUvC,WAAW/B,EAAa+H,cAAc9D,EAAO,cAElH+D,EAA6BtH,EAA4B4D,EAAUvC,WAAW8F,EAAWI,iBAAiBC,qBAE1GC,EAAyBH,EAA2BI,UAAUC,IAC5D,IAAIC,EACJ,QAASA,EAAmBD,EAAKE,cAAgB,MAAQD,SAA0B,OAAS,EAAIA,EAAiBpH,QAAU4G,EAAyBU,iBAAiBtH,IAAI,GAE3KuH,EAA+BT,EAA2BU,MAAMP,EAAyB,EAAIA,EAAyB,GACxH,OAAQN,EAAWc,aAAalD,SAAS,MAAQoC,EAAWe,mBAAqB,OAASH,EAA6BI,KAAKC,GAAsBA,EAAmBC,OAAS,sBAAwBD,EAAmBE,aAC3N,EACAC,mBAAoB,SAAU3E,EAAWuD,EAAY5D,EAAOiF,GAC1D,IAAIC,EAAuBC,EAAwBC,EACnD,MAAMC,EAA0BzB,EAAWI,eACzC9F,EAAamC,EAAUE,UAAU8E,GACjCC,EAAqBjF,EAAUkF,qBAAqBF,GACpDG,GAAeN,EAAwBtB,EAAWvB,cAAgB,MAAQ6C,SAA+B,GAAKA,EAAsBO,WAAajJ,EAAiBoH,EAAWvB,WAAWoD,WAAa5J,EAAS6J,cAAc9B,EAAWvB,WAAWoD,UAAW7B,EAAWvB,WAAWsD,cAAe/B,EAAWvB,WAAWuD,aAAe,CAAC,EACxUC,EAAc/J,EAAagK,qBAAqBR,EAAoBpH,GACpE6H,EAAgBnC,EAAWvB,YAAcuB,EAAWvB,WAAWoD,aAAeN,EAAyBvB,EAAWvB,WAAWoD,aAAe,MAAQN,SAAgC,OAAS,EAAIA,EAAuBjI,QAAQ,WAAa,EAC7O8I,EAAqBjK,EAAa+H,cAAc9D,EAAO,qBAAuB,OAC9EiG,EAAqCD,EAAqB5D,KAAKK,0BAA0BzC,GAAS,CAAC,EACnGmB,EAAQpF,EAAamK,iBAAiBtC,EAAWzC,OAAS,GAAI8D,GAAgBjF,GAChF,MAAMmG,EAAe,CACnBlJ,KAAM2G,EAAW3G,KACjBc,aAAcsH,EACde,WAAYxC,EAAWwC,WACvBC,MAAOzC,EAAWyC,MAClBlF,MAAOA,EACPmF,QAAS1C,EAAW0C,QACpBjE,WAAYmD,EACZe,QAAS3C,EAAW4C,eAAiB,WAAaT,EAClDU,eAAgBrE,KAAKsE,+BAA+B9C,EAAW6C,eAAgB7C,GAC/E+C,KAAM/C,EAAW+C,MAInB,GAAI/C,EAAWlE,gBAAkB/C,OAAOiK,KAAKhD,EAAWlE,gBAAgB4B,OAAS,EAAG,CAClF6E,EAAazG,eAAiBkE,EAAWlE,cAC3C,CACA,GAAIkE,EAAWiD,2BAA4B,CACzCV,EAAaU,2BAA6BjD,EAAWiD,0BACvD,CAIA,IAAKzB,EAAwBxB,EAAWxD,iBAAmB,MAAQgF,SAA+B,GAAKA,EAAsB9D,OAAQ,CACnI6E,EAAa/F,cAAgBwD,EAAWxD,cAExC,GAAI+F,EAAaM,eAAgB,CAC/B,IAAIK,EACJX,EAAaM,eAAeM,MAAQD,EAAwBlD,EAAW6C,kBAAoB,MAAQK,SAA+B,OAAS,EAAIA,EAAsBC,IACvK,CACF,KAAO,CACL,IAAIC,EAEJb,EAAa5E,KAAOqC,EAAWc,aAE/ByB,EAAapE,SAAW6B,EAAW7B,SACnC,GAAIiE,EAAoB,CACtB5D,KAAK6E,wCAAwCd,EAAcvC,EAC7D,CACAuC,EAAanE,aAAe6D,GAAezD,KAAKuB,gCAAgCC,EAAYvD,EAAWL,MAEtGgG,IAAuBC,EAAmCE,EAAalJ,UAAY+J,EAAapD,EAAWsD,aAAe,MAAQF,SAAoB,GAAKA,EAAWG,uBACvKhB,EAAaiB,IAAMxD,EAAWyD,MAC9BlB,EAAalE,UAAY2B,EAAW0D,YACpC,GAAI1D,EAAW2D,gBAAiB,CAC9B,MAAMC,EAAoBpF,KAAKE,cAActC,GAAO3C,KAAK,SAAUC,GACjE,IAAImK,EACJ,OAAOnK,EAAKL,SAAWwK,EAAwB7D,EAAW2D,mBAAqB,MAAQE,SAA+B,OAAS,EAAIA,EAAsBC,aAC3J,GACA,GAAIF,EAAmB,CACrBrB,EAAawB,KAAO/D,EAAW2D,gBAAgBI,KAC/CxB,EAAayB,cAAgBhE,EAAWc,aACxCyB,EAAa0B,oBAAsBL,EAAkB9C,YACvD,CACF,CACAyB,EAAa2B,KAAOlE,EAAW2D,iBAAmB3D,EAAW2D,gBAAgBG,aAC7EvB,EAAa4B,cAAgBnE,EAAWmE,cACxC,GAAInE,EAAWnC,iBAAkB,CAC/B0E,EAAa1E,iBAAmBmC,EAAWnC,iBAAiB2B,IAAI4E,GACvDjM,EAAamK,iBAAiB8B,EAAiB/C,GAAgBjF,GAE1E,CACF,CACAoC,KAAK1B,0CAA0CV,EAAOmG,EAAcvC,EAAW+C,KAAM/C,EAAWqE,SAAUrE,EAAWsE,cACrH,OAAO/B,CACT,EAQAO,+BAAgC,SAAUD,EAAgB7C,GACxD,IAAIuE,EACJ,MAAMC,EAAehG,KAAKiG,kBAAkBF,EAAyBvE,EAAWvB,cAAgB,MAAQ8F,SAAgC,OAAS,EAAIA,EAAuB1C,WAC5K,GAAIgB,EAAgB,CAClB,GAAI2B,IAAiB3B,EAAe6B,iBAAkB,CACpD7B,EAAe8B,OAASH,CAC1B,CAEA,GAAI3B,EAAe+B,SAAU,CAC3B,IAAIC,EACJhC,EAAe+B,UAAYC,EAAyB7E,EAAW6C,kBAAoB,MAAQgC,SAAgC,OAAS,EAAIA,EAAuBD,QACjK,CACF,CACA,OAAO/B,CACT,EACAQ,wCAAwCd,EAAcvC,GACpD,GAAIA,EAAW8E,aAAc,CAC3BvC,EAAauC,aAAe9E,EAAW8E,YACzC,CACA,GAAI9E,EAAWsD,UAAW,CACxBf,EAAae,UAAYtD,EAAWsD,SACtC,CACF,EACAyB,yBAA0B,SAAUC,EAAa9L,EAAQ+L,GACvD,MAAMC,EAAS/M,EAAamK,iBAAiB0C,EAAYG,OAAQF,GAAiB/L,GAClF,MAAMkM,EAAgB,CACpB/L,KAAM2L,EAAY3L,KAClBmJ,WAAYlE,UACZmE,MAAOnE,UACPf,MAAO2H,EACPG,KAAM,aAEN1C,QAASqC,EAAYpC,eAAiB,SACtCC,eAAgBmC,EAAYnC,eAC5B/G,eAAgBkJ,EAAYlJ,gBAK9B,GAAIkJ,EAAYxI,eAAiBwI,EAAYxI,cAAckB,OAAQ,CACjE0H,EAAc5I,cAAgBwI,EAAYxI,cAE1C4I,EAAcvC,eAAiB,CAC7BM,KAAM6B,EAAYnC,eAAeM,KACjCyB,SAAUI,EAAYnC,eAAe+B,SAEzC,KAAO,CAELQ,EAAczH,KAAOqH,EAAY3L,KACjC+L,EAAcjH,SAAW,MACzBiH,EAAchH,WAAa,KAC7B,CACA,OAAOgH,CACT,EACAE,sCAAuC,SAAUN,GAC/C,SAAUA,EAAYjD,eAAiBiD,EAAYjD,cAAcwD,mBAAqBP,EAAYjD,eAAiBiD,EAAYjD,cAAcyD,qCAC/I,EACAC,2BAA4B,SAAUC,EAASC,GAC7C,MAAMC,EAAkBF,EAAQlM,aAChC,MAAMqM,EAA0BH,EAAQI,kBAAkB,YAC1D,MAAMC,EAAgBF,GAA2BA,EAAwBG,UACzE,GAAIJ,GAAmBC,EAAyB,CAC9C,IAAK,MAAMI,KAASL,EAAiB,CACnC,GAAIpH,KAAK8G,sCAAsCK,IAAiBA,EAAatM,OAASuM,EAAgBK,GAAOtM,kBAAmB,CAC9H,GAAIkM,EAAwBhJ,YAAYkJ,EAAgBjN,KAAoCwF,UAAW,CACrGuH,EAAwBK,YAAYH,EAAgBjN,EAAgC6M,EAAatM,MACjG,KACF,CACF,CACF,CACF,CACF,EACA8M,0BAA2B,SAAUjN,EAAQkN,EAAiBtM,EAAYmL,GAExE,MAAMoB,EAAetO,EAAYuO,iBAAiBF,GAClD,IAAIG,EAAqB,GACzB,MAAMC,EAAM9O,EAAY+O,4BAA4BJ,EAAcvM,GAClE,MAAM4M,EAAsBF,EAAIG,wBAChC,OAAOC,QAAQC,QAAQrI,KAAKE,cAAcxF,IAASkG,KAAK0H,IAEtD,GAAIA,EAAU,CACZ,IAAI1B,EACJ0B,EAASjM,QAAQmK,IACfxG,KAAKiH,2BAA2BvM,EAAQ8L,GACxC,OAAQA,EAAYK,MAClB,IAAK,aACHD,EAAgB5G,KAAK4C,mBAAmBtH,EAAYkL,EAAa9L,EAAQ+L,GACzE,GAAIG,GAAiBsB,EAAoBpN,QAAQ8L,EAAc/L,SAAW,EAAG,CAC3E+L,EAAc2B,cAAgB5O,EAAa6O,aAAa5B,IAAkB,EAAI,CAChF,CACA,MACF,IAAK,OACL,IAAK,UACHA,EAAgB5G,KAAKuG,yBAAyBC,EAAa9L,EAAQ+L,GACnE,MACF,QACE,MAAM,IAAIgC,MAAM,yBAAyBjC,EAAYK,QAEzDkB,EAAmBhL,KAAK6J,EAAc,EAE1C,IACChG,KAAK,KACNmH,EAAqB/H,KAAKT,oBAAoB7E,EAAQqN,EAAmB,GACxE3G,MAAM,SAAUC,GACjBxI,EAAIyI,MAAM,sDAAsDD,IAClE,GAAGT,KAAK,WACN,OAAOmH,CACT,EACF,EACAW,qCAAsC,SAAU9K,EAAO+K,EAAgB1K,EAAW4E,GAChF,MAAM+F,EAAoBjP,EAAakP,oBAAoBjL,GAC3D,GAAIgL,EAAmB,CACrB,OAAOR,QAAQC,QAAQO,EACzB,CACA,OAAO5I,KAAK2H,0BAA0B/J,EAAO+K,EAAgB1K,EAAW4E,GAAcjC,KAAK,SAAUkI,GACnGnP,EAAaoP,oBAAoBnL,EAAOkL,GACxC,OAAOA,CACT,EACF,EACAE,oBAAqB,SAAUtO,EAAQuO,GACrC,IAAIC,EAAa,GACjB,MAAMC,EAAmBpP,EAAWqP,iBAAiB1O,GACnD2O,EAAoBJ,EAAa9J,KAAKmK,WAAW,KAAOL,EAAa9J,KAAKoK,OAAO,GAAKN,EAAa9J,KACrG,MAAMqK,EAA4B,WAChC,GAAI9O,EAAOW,KAAK,kBAAoBX,EAAOW,KAAK,kBAAmB,CACjE,MAAO,2CACT,KAAO,CACL,MAAO,4CACT,CACF,EACA,MAAMoO,EAAqB/O,EAAOgP,YAClC,GAAID,IAAuB,eAAeE,KAAKF,GAAqB,CAElE,GAAIN,EAAiBS,QAAUT,EAAiBU,SAAWV,EAAiBU,QAAQ3K,OAAQ,CAE1FgK,EAAaM,GACf,KAAO,CACLN,EAAa,gCACf,CACF,MAAO,GAAIC,EAAiBS,QAAUT,EAAiBU,SAAWV,EAAiBU,QAAQ3K,OAAQ,CAEjGgK,EAAaM,GACf,KAAO,CACLN,EAAa,2CACf,CACA,OAAOxO,EAAOa,SAAS,eAAeuO,oBAAoBlJ,KAAK,SAAUmJ,GACvErP,EAAOsP,UAAU9Q,EAAY+Q,kBAAkBf,EAAYa,EAAiBjK,UAAWuJ,GACzF,GAAGjI,MAAM,SAAUE,GACjBzI,EAAIyI,MAAMA,EACZ,EACF,EACA4I,wBAAyB,SAAUxP,EAAQyP,GACzC,MAAMC,EAAW1P,GAAUA,EAAO2P,gBAChCC,EAAwBH,GAAyBA,EAAsB9L,YAAY,wBACrF,GAAI8L,IAA0BG,EAAuB,CACnDF,EAASG,mBAAmB,WAE1BJ,EAAsBzC,YAAY,mBAAoB,IACtD,MAAM8C,EAAoB9P,EAAO+P,sBACjCN,EAAsBzC,YAAY,mBAAoB8C,GACtDL,EAAsBzC,YAAY,2BAA4B8C,EAAkBtL,QAChF,MAAMwL,EAA+BC,KAAKC,MAAMlR,EAAamR,gBAAgBlR,EAAa+H,cAAchH,EAAQ,2BAChHzB,EAAc6R,oBAAoBX,EAAuBO,EAA8BF,EAAmB,SAE1GnR,EAAa0R,oCAAoCZ,EAAuBK,GACxE,MAAM9L,EAAYhE,EAASA,EAAOqD,YAAc,KAChD,GAAIW,EAAW,CACbA,EAAUsM,eAAetQ,EAC3B,CACF,GACAyP,EAAsBzC,YAAY,uBAAwB,KAC5D,CACF,EACAuD,OAAQ,SAAUvQ,EAAQuO,GACxB,MAAMvK,EAAYhE,EAAOqD,YACzB,MAAMmN,EAAexM,IAAc,MAAQA,SAAmB,OAAS,EAAIA,EAAUL,YAAY,oBACjGK,IAAc,MAAQA,SAAmB,OAAS,EAAIA,EAAUgJ,YAAY,kBAAmBwD,GAC/F,IAAKA,EAAc,CACjBnR,EAAWoR,eAAezQ,GAC1BT,EAAkBgR,OAAOG,MAAMpL,KAAM,CAACtF,EAAQuO,IAC9ClP,EAAWsR,aAAa3Q,GACxBsF,KAAKgJ,oBAAoBtO,EAAQuO,GACjC,OAAOlP,EAAWuR,UAAU5Q,GAAQkG,KAAKZ,KAAKkK,wBAAwBxP,EAAQA,EAAO4M,kBAAkB,cAAclG,MAAM,SAAUmK,GACnI1S,EAAIyI,MAAM,gDAAiDiK,EAC7D,EACF,CACA,OAAOnD,QAAQC,SACjB,EAOAmD,gBAAiB,SAAU5N,GACzB,OAAOjE,EAAagH,WAAW/C,GAAOgD,KAAKC,GAClCb,KAAK0I,qCAAqC9K,EAAOjE,EAAa+H,cAAc9D,EAAO,cAAeiD,EAAMrF,iBAC9GoF,KAAKpB,IACN5B,EAAM0J,kBAAkB,YAAYI,YAAY,2BAA4B,MAC5E,OAAOlI,CAAU,EAErB,EACAiM,QAAS,SAAU/Q,GACjB,OAAOT,EAAkBwR,QAAQL,MAAMpL,KAAM,CAACtF,IAASkG,KAAK,WAM1D,MAAM8K,EAAmBhR,EAAOiR,iBAChC,GAAID,EAAkB,CACpBA,EAAiBE,kBAAkB,KACrC,CACF,EACF,EACAC,kBAAmB,SAAUnR,EAAQuO,GACnChP,EAAkB4R,kBAAkBT,MAAMpL,KAAM,CAACtF,EAAQuO,IACzDjJ,KAAK8L,2BAA2BpR,EAAQuO,GACxCA,EAAa8C,OAAOC,aAAetR,EAAOqD,YAAYkO,uBAAuBC,KAAKxR,EAAOqD,aACzFkL,EAAa8C,OAAOI,cAAgBzR,EAAOqD,YAAYqO,wBAAwBF,KAAKxR,EAAOqD,aAC3FiC,KAAKgJ,oBAAoBtO,EAAQuO,EACnC,EACAoD,uBAAwB,SAAUC,GAChC,MAAMC,EAAcD,EAAUjC,gBAC9B,GAAIkC,EAAa,CACfA,EAAYC,gBAAgB,gBAAiB,WAC3CC,WAAW,WACT,MAAMC,EAASxT,EAAYyT,cAAcL,GACzC,GAAII,EAAQ,CACV3S,EAAW6S,4BAA4BF,EAAOG,gBAAiBP,EACjE,CACF,EAAG,EACL,EACF,CACF,EACAQ,cAAe,SAAUpS,EAAQuO,EAAcmB,GAC7C,MAAM1L,EAAYhE,EAAOqD,YACzB,MAAMmN,EAAexM,IAAc,MAAQA,SAAmB,OAAS,EAAIA,EAAUL,YAAY,oBACjG,IAAK6M,EAAc,CACjB,IAAI6B,EAAqB,MACzB,MAAML,EAASxT,EAAYyT,cAAcjS,GACzC,MAAM2M,EAA0B3M,EAAO4M,kBAAkB,YACzD,MAAM0F,EAA2B,6BACjC,MAAMC,EAAuB5F,EAAwBhJ,YAAY2O,GACjE,MAAMT,EAAc7R,EAAO2P,gBAC3B,GAAIkC,EAAa,CAMf,MAAMW,EAAaX,EAAYY,WAAW,eAC1CJ,EAAqBhU,EAAUkQ,EAAaY,QAASqD,EAAW,KAAOX,EAAYa,gCAAgCC,UAAYpE,EAAaqE,WAAWD,UAAYJ,GAAwBP,GAAUA,EAAOa,cAAcC,gBAAkB,YAC9O,CACAvT,EAAkB6S,cAAc1B,MAAMpL,KAAM,CAACtF,EAAQuO,EAAcmB,IACnE1P,EAAO+S,UAAU,kBACjB,GAAIV,GAAsBrS,EAAOgP,aAAeU,EAAU,CACxDmC,EAAYmB,eAAenB,EAAYoB,cAAcC,QAAQ,WAC3DvG,EAAwBK,YAAYsF,EAA0B,MAChE,GAAG5L,MAAM,SAAUmK,GACjB1S,EAAIyI,MAAM,mCAAoCiK,EAChD,GACAlE,EAAwBK,YAAYsF,EAA0B,KAChE,CACAhN,KAAKqM,uBAAuB3R,EAC9B,CACAgE,IAAc,MAAQA,SAAmB,OAAS,EAAIA,EAAUgJ,YAAY,kBAAmBwD,EACjG,EACA2C,mCAAoC,SAAUnT,GAG5C,MAAMoT,EAAiBhV,EAAUa,EAAa+H,cAAchH,EAAQ,oBAGpE,GAAIoT,EAAeR,WAAWS,sBAAuB,CACnD,MAAMC,EAAiBrU,EAAa+H,cAAchH,EAAQ,wBAC1D,MAAMuT,EAAgBvT,EAAOa,SAAS,YACtC,MAAM2S,EAAiBD,EAAc9P,UAAU,oBAAsB,CAAC,EACtE,IAAK+P,EAAeF,GAAiB,CACnCE,EAAeF,GAAkBtT,EAAOyT,QACxCF,EAAcvG,YAAY,kBAAmBwG,EAC/C,MAAO,GAAIA,EAAeF,KAAoBtT,EAAOyT,QAAS,QACrDL,EAAeR,WAAWS,qBACnC,CACF,CACA,OAAOD,CACT,EACAhC,2BAA4B,SAAUpR,EAAQuO,GAC5C,MAAMkB,EAAwBzP,EAAO4M,kBAAkB,YACvD/M,OAAOC,OAAOyO,EAAcjJ,KAAK6N,mCAAmCnT,IAMpE,GAAIA,EAAO2P,gBAAiB,CAC1BpB,EAAamF,UAAY,KAC3B,CAIA,GAAIjE,EAAuB,CACzBA,EAAsBzC,YAAY,uBAAwB,MAC5D,CACA,IAAI2G,EACJ,MAAMC,EAAcvU,EAAWqP,iBAAiB1O,GAEhD,GAAI4T,EAAYzE,QAAQ3K,OAAS,EAAG,CAClCmP,EAAU,IAAInU,EAAO,CACnB2P,QAASyE,EAAYzE,QACrB0E,IAAK,MAET,CACA,GAAID,EAAYE,YAAa,CAC3BvF,EAAa9J,KAAOmP,EAAYE,WAClC,CACA,MAAMC,EAAsB/T,EAAOgU,wBACnC,GAAID,GAAuBA,EAAoBE,cAAe,CAE5D,GAAI1F,EAAaY,QAAQ3K,OAAS,EAAG,CACnCmP,EAAU,IAAInU,EAAO,CACnB2P,QAASZ,EAAaY,QAAQ9J,OAAOuO,EAAYzE,SACjD0E,IAAK,OAEPxU,EAAW8R,kBAAkB5C,EAAcqF,EAAaD,EAC1D,CACF,KAAO,CACLtU,EAAW8R,kBAAkB5C,EAAcqF,EAAaD,EAC1D,CACF,EACAO,8BAA+B,SAAUpI,EAAaqI,EAAOC,EAAWC,GACtE,MAAMC,EAAe,IAAI7U,EAAUqM,GACjCyI,EAAQ,IAAI9U,EAAU,CACpB+U,GAAIH,IAENI,EAAwB,CACtBC,gBAAiB,CACfpP,KAAMiP,EAAM9L,qBAAqB,KACjCkM,OAAQL,EAAa7L,qBAAqB,MAE5CmM,OAAQ,CACNtP,KAAMiP,EACNI,OAAQL,IAGd,OAAOrV,EAAa4V,wBAAwB,mCAAoCJ,EAAuB,CACrGK,KAAMX,GACLC,GAAWlO,KAAK,SAAU6O,GAC3BT,EAAaU,UACb,OAAOD,CACT,EACF,EACAE,4BAA6BC,eAAgBpJ,EAAaqI,EAAOC,EAAWC,GAC1E,MAAMC,EAAe,IAAI7U,EAAUqM,GACjCyI,EAAQ,IAAI9U,EAAU,CACpB+U,GAAIH,IAENI,EAAwB,CACtBC,gBAAiB,CACfpP,KAAMiP,EAAM9L,qBAAqB,KACjCkM,OAAQL,EAAa7L,qBAAqB,MAE5CmM,OAAQ,CACNtP,KAAMiP,EACNI,OAAQL,IAGd,MAAMa,QAAuBlW,EAAa4V,wBAAwB,iCAAkCJ,EAAuB,CACzHW,MAAO,OAET,IAAKD,EAAgB,CACnB,OAAOzH,QAAQC,QAAQ,KACzB,CACA,MAAM0H,EAAUF,EAAeG,qBAAqB,QAAQ,GAC1DC,EAAsBJ,EAAeG,qBAAqB,qBAAqB,GACjFC,EAAoBC,YAAYH,GAChC,GAAIvJ,EAAYJ,SAAU,CACxB,MAAM+J,GAAY,IAAIC,WAAYC,gBAAgB7J,EAAYJ,SAAU,YACxE6J,EAAoBK,YAAYH,EAAUI,kBAC5C,KAAO,CACL1X,EAAIyI,MAAM,6DAA6DkF,EAAYG,UACnF,OAAOyB,QAAQC,QAAQ,KACzB,CACA,GAAIyG,EAAU0B,UAAY,gBAAiB,CACzC,OAAOX,CACT,CACA,OAAO7V,EAASyW,KAAK,CACnB5J,KAAM,MACN6J,WAAYb,GAEhB,EACA5J,iBAAkB,SAAU0K,GAC1B,OAAQA,GACN,IAAK,WACH,OAAOrX,EAAYsX,yBACrB,IAAK,qBACH,OAAOtX,EAAYuX,iCACrB,IAAK,gBACH,OAAOvX,EAAYwX,yBACrB,QACE,OAAOhR,UAEb,EACAiR,qBAAsB,SAAUzV,EAAY0V,EAAenJ,GACzD,IAAIoJ,EAAU,GACZC,EAAiB5V,EAAW6C,UAAU6S,GACxC,GAAIE,EAAeC,OAASD,EAAeC,QAAU,WAAY,CAC/DD,EAAiB5V,EAAW6C,UAAU,GAAG6S,iDACzCA,EAAgB,GAAGA,+CACrB,CACA,OAAQE,EAAe1U,OACrB,IAAK,oDACH,GAAIlB,EAAW6C,UAAU,GAAG6S,4BAAwC5R,SAAS,yCAA0C,CACrH9D,EAAW6C,UAAU,GAAG6S,iCAA6C3U,QAAQ,CAAC+U,EAAQC,KACpFJ,EAAUA,EAAQlR,OAAOC,KAAK+Q,qBAAqBzV,EAAY,GAAG0V,iCAA6CK,KAAU,EAE7H,CACA,MACF,IAAK,yDACL,IAAK,8CACL,IAAK,uCACL,IAAK,gEACL,IAAK,iDACHJ,EAAQlU,KAAKzB,EAAW6C,UAAU,GAAG6S,kBACrC,MACF,IAAK,gDACL,IAAK,+DACH,MACF,QAGE,GAAIA,EAAclW,QAAQ+M,KAAkB,EAAG,CAC7CoJ,EAAQlU,KAAKiU,EAAcM,UAAUzJ,EAAa3I,OAAS,IAC3D,KACF,CACA+R,EAAQlU,KAAKrD,EAAa6X,kBAAkBP,EAAe,OAC3D,MAEJ,OAAOC,CACT,EACAO,kCAAmC,SAAU9W,EAAQ4N,EAAU9B,GAC7D,MAAMa,EAA0B3M,EAAO4M,kBAAkB,YACzD,IAAKD,EAAyB,CAC5B,MACF,CACA,MAAME,EAAgBF,EAAwBG,UAC9C,MAAMiK,EAA6BnJ,EAASoJ,OAAO3W,GAC1CiF,KAAK8G,sCAAsC/L,IAEpD,MAAMqM,EAAkB1M,EAAOM,aAC/B,IAAI2W,EAAuBC,EAAoBC,EAA8BC,EAC7E,IAAK,MAAMC,KAAK3K,EAAiB,CAC/BwK,EAAqBxK,EAAgB2K,GAAG5W,kBACxC,IAAK,MAAM6W,KAAKP,EAA4B,CAC1CK,EAAgCL,EAA2BO,GAAGnX,KAC9D,GAAI+W,IAAuBE,EAA+B,CACxDD,EAA+B,KAC/B,KACF,CACA,GAAIrL,GAAeA,EAAY3L,OAASiX,EAA+B,CACrEH,EAAwBnL,EAAY3L,IACtC,CACF,CACA,GAAIgX,EAA8B,CAChCxK,EAAwBK,YAAYH,EAAgBjN,EAAgCsX,GACpF,KACF,CACF,CACA,IAAKC,GAAgCF,EAAuB,CAC1DtK,EAAwBK,YAAYH,EAAgBjN,EAAgCqX,EACtF,CACF,EACAM,WAAY,SAAUC,EAAmBxX,EAAQyX,GAC/C,IAAIC,EAAe,KACnB,IAAKF,EAAmB,CAGtB,OAAO9J,QAAQC,QAAQ+J,EACzB,CACA,MAAMtD,EAAYqD,EAAaE,SAC/B,MAAMC,EAAgBxD,EAAUzQ,YAAY6T,EAAmB,gBAC/D,GAAII,GAAiBA,EAAcxX,SAAWwX,EAAcxX,QAAQ,gBAAkB,EAAG,CACvFgU,EAAUyD,kBAAkB7X,EAAQ,aAAcwX,GAClDE,EAAe,KACjB,CACA,GAAI1X,EAAO8X,KAAO1D,EAAU0B,UAAY,gBAAiB,CACvDxQ,KAAKyS,yBAAyB3D,EAAWpU,EAAQsF,KAAKE,cAAcxF,GACtE,CACA,OAAO0N,QAAQC,QAAQ+J,EACzB,EACAM,cAAe,SAAUP,GACvB,OAAOA,EAAatP,cAAgBsP,EAAatP,aAAatH,WAAWC,cAC3E,EACAiX,yBAA0B,SAAU3D,EAAWpU,EAAQ4N,EAAU9B,GAC/D,GAAIsI,EAAU0B,UAAY,gBAAiB,CACzCxQ,KAAKwR,kCAAkC9W,EAAQ4N,EAAU9B,EAC3D,CACF,EACAmM,YAAa,SAAUC,GACrB,OAAOA,GAAqB9S,SAC9B,EACA+S,cAAe,SAAUC,EAAYC,EAAmBT,GACtD,GAAIS,IAAsBT,EAAe,CACvC,OAAOQ,CACT,CACA,OAAOhT,SACT,EACAkT,qBAAsB,SAAUC,EAAqBC,EAAoBC,GACvE,GAAID,IAAuBC,EAAkB,CAC3C,OAAOF,EAAoB,gCAC7B,CACA,OAAO7K,QAAQC,SACjB,EACA+K,gBAAiB,SAAUC,GACzB,IAAIC,EACJ,GAAID,IAAiBvT,UAAW,CAC9BuT,SAAsBA,IAAiB,UAAYA,EAAeA,IAAiB,OACnFC,EAAiBD,EAAe,UAAY,WAC5C,MAAO,CACLE,YAAaF,EACbC,eAAgBA,EAEpB,CACA,MAAO,CACLC,YAAazT,UACbwT,eAAgBxT,UAEpB,EACA0T,mBAAoB,SAAUC,EAAY3E,EAAWpU,GACnD,GAAI+Y,EAAY,CACd,OAAO3E,EAAUyD,kBAAkB7X,EAAQ,aAAc+Y,EAAY,EACvE,CACA,OAAO3T,SACT,EASA4T,QAAS9D,eAAgBmD,EAAmBrY,EAAQyX,GAClD,MAAM7W,EAAa0E,KAAK0S,cAAcP,GACpCrD,EAAYqD,EAAaE,SACzBtD,EAAWD,EAAUX,MAAMzT,GAC3B4N,EAAW5N,EAAO8X,IAAMxS,KAAKE,cAAcxF,GAAU,KACvD,IAAK4N,EAAU,CACb,OAAOF,QAAQC,QAAQ,KACzB,CACA,MAAM7B,EAAc8B,EAASrN,KAAK,SAAUF,GAC1C,OAAOA,EAAQF,OAASkY,CAC1B,GACA,IAAKvM,EAAa,CAChB3N,EAAIyI,MAAM,GAAGyR,mCACb,OAAO3K,QAAQC,QAAQ,KACzB,CACArI,KAAKyS,yBAAyB3D,EAAWpU,EAAQ4N,EAAU9B,GAE3D,GAAIA,EAAYK,OAAS,UAAW,CAClC,OAAO7G,KAAK4O,8BAA8BpI,EAAa2L,EAAa3C,KAAMV,EAAWC,EACvF,CACA,GAAIvI,EAAYK,OAAS,OAAQ,CAC/B,OAAO7G,KAAK2P,4BAA4BnJ,EAAa2L,EAAa3C,KAAMV,EAAWC,EACrF,CAEA,IAAKzT,EAAY,CACf,OAAO8M,QAAQC,QAAQ,KACzB,CACA,MAAMsL,QAAcha,EAAa+H,cAAchH,EAAQ,WAAYoU,GACnE,MAAMlH,QAAwBjO,EAAa+H,cAAchH,EAAQ,aAAcoU,GAC/E,MAAM8D,QAA0BjZ,EAAa+H,cAAchH,EAAQ,iBAAkBoU,GACrF,MAAM8E,EAAW5T,KAAK2S,YAAYC,GAClC,MAAMiB,EAAgBvY,EAAW6H,qBAAqBwQ,GACtD,MAAM5L,QAA2B/H,KAAK0I,qCAAqChO,EAAQkN,EAAiBtM,EAAY6W,EAAatP,cAC7H,MAAM+D,EAAgBmB,EAAmB9M,KAAK,SAAU6Y,GACtD,OAAOA,EAAMjZ,OAASkY,CACxB,GACA,MAAMgB,EAAmBzY,EAAW6H,qBAAqByD,EAAcjL,cACvE,MAAMqY,EAAgBhU,KAAK+Q,qBAAqBzV,EAAYsL,EAAcjL,aAAcgY,GACxF,MAAMM,EAAc,CAClBpM,aAAc8L,EACdO,eAAgB,iBAChBC,SAAUzZ,EACVY,aACAwT,YACAlI,iBAEF,MAAMqM,EAAsBrD,UAC1B,MAAMX,EAAQ,IAAI9U,EAAU,CACxB+U,GAAIH,EACJqF,eAAgBR,IAElBzE,EAAwB,CACtBC,gBAAiB,CACfpP,KAAMiP,EAAM9L,qBAAqB,KACjCjF,UAAW6V,EACXM,YAAaR,GAEfvE,OAAQ,CACNtP,KAAMiP,EACN/Q,UAAW5C,EACX2C,UAAW3C,EACX+Y,YAAa/Y,IAGnB,IACE,MAAMmY,QAAmB9Z,EAAa4V,wBAAwB+E,EAAenF,EAAuB,CAAC,EAAGL,GACxG,aAAa9O,KAAKwT,mBAAmBC,EAAY3E,EAAWpU,EAO9D,CANE,MAAO6Q,GAEP1S,EAAIyI,MAAM,0BAA0BiK,EAAOgJ,WAC3C,OAAO,IACT,CAAE,QACAtF,EAAMS,SACR,GAEF,MAAM8E,EAAqB,CAACC,EAAiB5F,KAC3C,MAAMyF,EAAgB,6BACtB,IAAIjB,EACJ,IAAIqB,EACJ,IAAIC,EACJ,IAAIC,EACJ,OAAOxM,QAAQyM,IAAI,CAAClb,EAAa+H,cAAchH,EAAQ,6BAA8BoU,GAAYnV,EAAa+H,cAAchH,EAAQ,YAAaoU,GAAYnV,EAAa+H,cAAchH,EAAQ,WAAYoU,GAAYnV,EAAa+H,cAAchH,EAAQ,eAAgBoU,KAAalO,KAAKkU,IAC3RzB,EAAeyB,EAAY,GAC3BJ,EAAuBI,EAAY,GACnCH,EAAsBG,EAAY,GAClCF,EAA0BE,EAAY,GAKtC,MAAMC,EAAgB/U,KAAKoT,gBAAgBC,GAC3CA,EAAe0B,EAAcxB,YAC7B,MAAMD,EAAiByB,EAAczB,eACrC,MAAMrE,EAAQ,IAAI9U,EAAU,CACxB6a,sBAAuBta,EAAOqD,YAAYiX,sBAC1CC,0BAA2Bva,EAAOqD,YAAYkX,0BAC9CC,SAAU7B,EACVC,eAAgBA,EAChB6B,UAAWT,EACXU,SAAUT,EACVzF,GAAIH,EACJsG,uBAAwBtC,EACxBvR,WAAYgF,EACZ8O,WAAY,CACV3B,MAAOA,EACPjT,OAAQpF,GAEVia,aAAcX,IAEhBzF,EAAwB,CACtBC,gBAAiB,CACfoG,UAAW3B,EACXyB,WAAYzB,EACZ3V,UAAW6V,EACX/T,KAAMiP,EAAM9L,qBAAqB,KACjCkM,OAAQJ,EAAM9L,qBAAqB,gBAErCmM,OAAQ,CACNtP,KAAMiP,EACNuG,UAAWla,EACXga,WAAYha,EACZ4C,UAAW5C,EACX2C,UAAW3C,EACX+T,OAAQJ,IAGd,OAAOtV,EAAa4V,wBAAwB+E,EAAenF,EAAuB,CAChFK,KAAMX,GACLC,GAAWlB,QAAQ,WACpBqB,EAAMS,SACR,EAAE,EACF,QAEEtH,QAAQyM,IAAIb,EAAchT,IAAI4O,UAClC,MAAM6F,EAAclb,OAAOC,OAAO,CAAC,EAAGyZ,EAAa,CACjDyB,cAAeA,IAEjB,MAAMC,QAAiBvN,QAAQyM,IAAI,CAAClb,EAAaic,oBAAoBH,GAAc9b,EAAakc,mBAAmBJ,KACnH,MAAMvC,EAAqByC,EAAS,GAClCxC,EAAmBwC,EAAS,GAC9B,OAAO3V,KAAKgT,qBAAqBC,EAAqBC,EAAoBC,EAAiB,IAI7F,MAAM3D,EAAO2C,EAAa3C,MAAQtW,EAAYyT,cAAcjS,KAAYyX,EAAatP,aAAe3J,EAAY4c,mBAAmB3D,EAAatP,cAAgB/C,WAChK,OAAO0U,EAAmB5N,EAAe4I,EAC3C,EAMAuG,kBAAmB,WACjB,OAAOxb,OAAOC,OAAO,CAAC,EAAGZ,EAAmB,CAC1C8Z,QAAS,SAAUX,EAAmBiD,GACpC,GAAIjD,EAAkBjY,QAAQ,gBAAkB,EAAG,CAEjDiY,EAAoBA,EAAkBkD,QAAQ,aAAc,GAC9D,CACA,OAAOrc,EAAkB8Z,QAAQX,EAAmBiD,EACtD,GAEJ,EAMAE,YAAa,WAEX,OAAOzc,CACT,EACA0c,kBAAkBzb,EAAQ0b,EAAUC,GAClC,IAAIC,EAAuBC,EAC3B,MAAMC,EAAe7c,EAAakP,oBAAoBnO,GACpD+b,EAAcD,GAAgBA,EAAa9E,OAAOgF,GACzCA,EAAI7b,OAASwb,GACnB,GAGHM,GAAmBF,IAAgB,MAAQA,SAAqB,OAAS,GAAKH,EAAwBG,EAAYxW,cAAgB,MAAQqW,SAA+B,OAAS,EAAIA,EAAsBM,YAAc,aAAeH,IAAgB,MAAQA,SAAqB,OAAS,GAAKF,EAAyBE,EAAYxW,cAAgB,MAAQsW,SAAgC,OAAS,EAAIA,EAAuBK,YAAc,OACrb,IAAIC,EACJ,GAAIJ,GAAeA,EAAYlR,KAAM,CACnC,OAAQkR,EAAYlR,MAClB,IAAK,cACHsR,EAAST,EAAS/X,YAAYoY,EAAYhR,oBAAqBkR,GAC/D,MACF,IAAK,mBACHE,EAASzd,EAAe0d,mBAAmBV,EAAS/X,YAAYoY,EAAYhR,oBAAqBkR,GAAkBP,EAAS/X,YAAYoY,EAAYjR,cAAemR,IACnK,MACF,IAAK,mBACHE,EAASzd,EAAe0d,mBAAmBV,EAAS/X,YAAYoY,EAAYjR,cAAemR,GAAkBP,EAAS/X,YAAYoY,EAAYhR,oBAAqBkR,IACnK,MACF,QACE,MAEN,KAAO,CACLE,EAAST,EAAS/X,YAAYoY,IAAgB,MAAQA,SAAqB,OAAS,EAAIA,EAAYtX,KAAMwX,EAC5G,CACA,OAAO9c,EAAckd,QAAQ,6BAA8B,CAACN,IAAgB,MAAQA,SAAqB,OAAS,EAAIA,EAAY1X,MAAO8X,GAC3I,GAEJ,EAAG","sourceRoot":"table/delegates"}},{"offset":{"line":27606,"column":0},"map":{"version":3,"names":["TreeTableDelegate","Object","assign","TableDelegate","_internalUpdateBindingInfo","table","bindingInfo","apply","payload","getPayload","parameters","$$aggregation","hierarchyQualifier","initialExpansionLevel","expandTo"],"sourceRoot":"table/delegates","sources":["TreeTableDelegate.ts"],"sourcesContent":["import TableDelegate from \"sap/fe/macros/table/delegates/TableDelegate\";\n\n/**\n * Helper class for sap.ui.mdc.Table.\n * <h3><b>Note:</b></h3>\n * This class is experimental and not intended for productive usage, since the API/behavior has not been finalized.\n *\n * @author SAP SE\n * @private\n * @experimental\n * @since 1.69\n * @alias sap.fe.macros.TableDelegate\n */\nconst TreeTableDelegate = Object.assign({}, TableDelegate, {\n\t_internalUpdateBindingInfo: function (table: any, bindingInfo: any) {\n\t\tTableDelegate._internalUpdateBindingInfo.apply(this, [table, bindingInfo]);\n\n\t\tconst payload = table.getPayload();\n\t\tbindingInfo.parameters.$$aggregation = {\n\t\t\thierarchyQualifier: payload?.hierarchyQualifier\n\t\t};\n\n\t\tif (payload?.initialExpansionLevel) {\n\t\t\tbindingInfo.parameters.$$aggregation.expandTo = payload.initialExpansionLevel;\n\t\t}\n\t}\n});\n\nexport default TreeTableDelegate;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;EAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA,MAAMA,iBAAiB,GAAGC,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEC,aAAa,EAAE;IAC1DC,0BAA0B,EAAE,UAAUC,KAAU,EAAEC,WAAgB,EAAE;MACnEH,aAAa,CAACC,0BAA0B,CAACG,KAAK,CAAC,IAAI,EAAE,CAACF,KAAK,EAAEC,WAAW,CAAC,CAAC;MAE1E,MAAME,OAAO,GAAGH,KAAK,CAACI,UAAU,EAAE;MAClCH,WAAW,CAACI,UAAU,CAACC,aAAa,GAAG;QACtCC,kBAAkB,EAAEJ,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEI;MAC9B,CAAC;MAED,IAAIJ,OAAO,aAAPA,OAAO,eAAPA,OAAO,CAAEK,qBAAqB,EAAE;QACnCP,WAAW,CAACI,UAAU,CAACC,aAAa,CAACG,QAAQ,GAAGN,OAAO,CAACK,qBAAqB;MAC9E;IACD;EACD,CAAC,CAAC;EAAC,OAEYb,iBAAiB;AAAA"}},{"offset":{"line":27638,"column":0},"map":{"version":3,"names":["sap","ui","define","TableDelegate","TreeTableDelegate","Object","assign","_internalUpdateBindingInfo","table","bindingInfo","apply","this","payload","getPayload","parameters","$$aggregation","hierarchyQualifier","initialExpansionLevel","expandTo"],"sources":["TreeTableDelegate-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,6DAAO,CAAC,+CAAgD,SAAUC,GACvE,aAaA,MAAMC,EAAoBC,OAAOC,OAAO,CAAC,EAAGH,EAAe,CACzDI,2BAA4B,SAAUC,EAAOC,GAC3CN,EAAcI,2BAA2BG,MAAMC,KAAM,CAACH,EAAOC,IAC7D,MAAMG,EAAUJ,EAAMK,aACtBJ,EAAYK,WAAWC,cAAgB,CACrCC,mBAAoBJ,IAAY,MAAQA,SAAiB,OAAS,EAAIA,EAAQI,oBAEhF,GAAIJ,IAAY,MAAQA,SAAiB,GAAKA,EAAQK,sBAAuB,CAC3ER,EAAYK,WAAWC,cAAcG,SAAWN,EAAQK,qBAC1D,CACF,IAEF,OAAOb,CACT,EAAG","sourceRoot":"table/delegates"}},{"offset":{"line":27643,"column":0},"map":{"version":3,"names":["ValueHelp","MacroMetadata","extend","name","namespace","fragment","metadata","stereotype","designtime","properties","idPrefix","type","defaultValue","property","required","$kind","contextPath","conditionModel","filterFieldValueHelp","useSemanticDateRange","requestGroupId","computed","useMultiValueField","navigationPrefix","collaborationEnabled","requiresValidation","events","create","oProps","oControlConfiguration","oAppComponent","Object","keys","forEach","sPropertyName","oProperty","oMetaModel","models","metaModel","entitySet","ModelHelper","isCollaborationDraftSupported"],"sourceRoot":"valuehelp","sources":["ValueHelp.metadata.ts"],"sourcesContent":["/**\n * @classdesc\n * Macro for creating a ValueHelp based on the provided OData V4 metadata.\n *\n *\n * Usage example:\n * <pre>\n * &lt;macro:ValueHelp\n *   idPrefix=\"SomePrefix\"\n *   property=\"{someProperty&gt;}\"\n *   conditionModel=\"$filters\"\n * /&gt;\n * </pre>\n * @class sap.fe.macros.ValueHelp\n * @hideconstructor\n * @private\n * @experimental\n */\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport MacroMetadata from \"sap/fe/macros/MacroMetadata\";\n\nconst ValueHelp = MacroMetadata.extend(\"sap.fe.macros.ValueHelp\", {\n\t/**\n\t * Name of the macro control.\n\t */\n\tname: \"ValueHelp\",\n\t/**\n\t * Namespace of the macro control.\n\t */\n\tnamespace: \"sap.fe.macros\",\n\t/**\n\t * Fragment source of the macro (optional) - if not set, fragment is generated from namespace and name.\n\t */\n\tfragment: \"sap.fe.macros.internal.valuehelp.ValueHelp\",\n\n\t/**\n\t * The metadata describing the macro control.\n\t */\n\tmetadata: {\n\t\t/**\n\t\t * Macro stereotype for documentation generation. Not visible in documentation.\n\t\t */\n\t\tstereotype: \"xmlmacro\",\n\t\t/**\n\t\t * Location of the designtime information.\n\t\t */\n\t\tdesigntime: \"sap/fe/macros/valuehelp/ValueHelp.designtime\",\n\t\t/**\n\t\t * Properties.\n\t\t */\n\t\tproperties: {\n\t\t\t/**\n\t\t\t * A prefix that is added to the generated ID of the value help.\n\t\t\t */\n\t\t\tidPrefix: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdefaultValue: \"ValueHelp\"\n\t\t\t},\n\t\t\t/**\n\t\t\t * Defines the metadata path to the property.\n\t\t\t */\n\t\t\tproperty: {\n\t\t\t\ttype: \"sap.ui.model.Context\",\n\t\t\t\trequired: true,\n\t\t\t\t$kind: [\"Property\"]\n\t\t\t},\n\t\t\tcontextPath: {\n\t\t\t\ttype: \"sap.ui.model.Context\",\n\t\t\t\trequired: true\n\t\t\t},\n\t\t\t/**\n\t\t\t * Indicator whether the value help is for a filter field.\n\t\t\t */\n\t\t\tconditionModel: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdefaultValue: \"\"\n\t\t\t},\n\t\t\t/**\n\t\t\t * Indicates that this is a value help of a filter field. Necessary to decide if a\n\t\t\t * validation should occur on the back end or already on the client.\n\t\t\t */\n\t\t\tfilterFieldValueHelp: {\n\t\t\t\ttype: \"boolean\",\n\t\t\t\tdefaultValue: false\n\t\t\t},\n\t\t\t/**\n\t\t\t * Specifies the Sematic Date Range option for the filter field.\n\t\t\t */\n\t\t\tuseSemanticDateRange: {\n\t\t\t\ttype: \"boolean\",\n\t\t\t\tdefaultValue: true\n\t\t\t},\n\t\t\t/**\n\t\t\t * GroupId for the valueHelp table\n\t\t\t */\n\t\t\trequestGroupId: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdefaultValue: \"\",\n\t\t\t\tcomputed: true\n\t\t\t},\n\t\t\t/**\n\t\t\t * Specifies whether the ValueHelp can be used with a MultiValueField\n\t\t\t */\n\t\t\tuseMultiValueField: {\n\t\t\t\ttype: \"boolean\",\n\t\t\t\tdefaultValue: false\n\t\t\t},\n\n\t\t\tnavigationPrefix: {\n\t\t\t\ttype: \"string\"\n\t\t\t},\n\t\t\tcollaborationEnabled: {\n\t\t\t\ttype: \"boolean\",\n\t\t\t\tcomputed: true\n\t\t\t},\n\t\t\trequiresValidation: {\n\t\t\t\ttype: \"boolean\",\n\t\t\t\tdefaultValue: false\n\t\t\t}\n\t\t},\n\n\t\tevents: {}\n\t},\n\tcreate: function (oProps: any, oControlConfiguration: any, oAppComponent: any) {\n\t\tObject.keys(this.metadata.properties).forEach((sPropertyName) => {\n\t\t\tconst oProperty = this.metadata.properties[sPropertyName];\n\t\t\tif (oProperty.type === \"boolean\") {\n\t\t\t\tif (typeof oProps[sPropertyName] === \"string\") {\n\t\t\t\t\toProps[sPropertyName] = oProps[sPropertyName] === \"true\";\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\toProps.requestGroupId = \"$auto.Workers\";\n\n\t\tconst oMetaModel = oAppComponent.models.metaModel || oAppComponent.models.entitySet;\n\t\tif (ModelHelper.isCollaborationDraftSupported(oMetaModel)) {\n\t\t\toProps.collaborationEnabled = true;\n\t\t}\n\t\treturn oProps;\n\t}\n});\nexport default ValueHelp;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;EAqBA,MAAMA,SAAS,GAAGC,aAAa,CAACC,MAAM,CAAC,yBAAyB,EAAE;IACjE;AACD;AACA;IACCC,IAAI,EAAE,WAAW;IACjB;AACD;AACA;IACCC,SAAS,EAAE,eAAe;IAC1B;AACD;AACA;IACCC,QAAQ,EAAE,4CAA4C;IAEtD;AACD;AACA;IACCC,QAAQ,EAAE;MACT;AACF;AACA;MACEC,UAAU,EAAE,UAAU;MACtB;AACF;AACA;MACEC,UAAU,EAAE,8CAA8C;MAC1D;AACF;AACA;MACEC,UAAU,EAAE;QACX;AACH;AACA;QACGC,QAAQ,EAAE;UACTC,IAAI,EAAE,QAAQ;UACdC,YAAY,EAAE;QACf,CAAC;QACD;AACH;AACA;QACGC,QAAQ,EAAE;UACTF,IAAI,EAAE,sBAAsB;UAC5BG,QAAQ,EAAE,IAAI;UACdC,KAAK,EAAE,CAAC,UAAU;QACnB,CAAC;QACDC,WAAW,EAAE;UACZL,IAAI,EAAE,sBAAsB;UAC5BG,QAAQ,EAAE;QACX,CAAC;QACD;AACH;AACA;QACGG,cAAc,EAAE;UACfN,IAAI,EAAE,QAAQ;UACdC,YAAY,EAAE;QACf,CAAC;QACD;AACH;AACA;AACA;QACGM,oBAAoB,EAAE;UACrBP,IAAI,EAAE,SAAS;UACfC,YAAY,EAAE;QACf,CAAC;QACD;AACH;AACA;QACGO,oBAAoB,EAAE;UACrBR,IAAI,EAAE,SAAS;UACfC,YAAY,EAAE;QACf,CAAC;QACD;AACH;AACA;QACGQ,cAAc,EAAE;UACfT,IAAI,EAAE,QAAQ;UACdC,YAAY,EAAE,EAAE;UAChBS,QAAQ,EAAE;QACX,CAAC;QACD;AACH;AACA;QACGC,kBAAkB,EAAE;UACnBX,IAAI,EAAE,SAAS;UACfC,YAAY,EAAE;QACf,CAAC;QAEDW,gBAAgB,EAAE;UACjBZ,IAAI,EAAE;QACP,CAAC;QACDa,oBAAoB,EAAE;UACrBb,IAAI,EAAE,SAAS;UACfU,QAAQ,EAAE;QACX,CAAC;QACDI,kBAAkB,EAAE;UACnBd,IAAI,EAAE,SAAS;UACfC,YAAY,EAAE;QACf;MACD,CAAC;MAEDc,MAAM,EAAE,CAAC;IACV,CAAC;IACDC,MAAM,EAAE,UAAUC,MAAW,EAAEC,qBAA0B,EAAEC,aAAkB,EAAE;MAC9EC,MAAM,CAACC,IAAI,CAAC,IAAI,CAAC1B,QAAQ,CAACG,UAAU,CAAC,CAACwB,OAAO,CAAEC,aAAa,IAAK;QAChE,MAAMC,SAAS,GAAG,IAAI,CAAC7B,QAAQ,CAACG,UAAU,CAACyB,aAAa,CAAC;QACzD,IAAIC,SAAS,CAACxB,IAAI,KAAK,SAAS,EAAE;UACjC,IAAI,OAAOiB,MAAM,CAACM,aAAa,CAAC,KAAK,QAAQ,EAAE;YAC9CN,MAAM,CAACM,aAAa,CAAC,GAAGN,MAAM,CAACM,aAAa,CAAC,KAAK,MAAM;UACzD;QACD;MACD,CAAC,CAAC;MACFN,MAAM,CAACR,cAAc,GAAG,eAAe;MAEvC,MAAMgB,UAAU,GAAGN,aAAa,CAACO,MAAM,CAACC,SAAS,IAAIR,aAAa,CAACO,MAAM,CAACE,SAAS;MACnF,IAAIC,WAAW,CAACC,6BAA6B,CAACL,UAAU,CAAC,EAAE;QAC1DR,MAAM,CAACJ,oBAAoB,GAAG,IAAI;MACnC;MACA,OAAOI,MAAM;IACd;EACD,CAAC,CAAC;EAAC,OACY5B,SAAS;AAAA"}},{"offset":{"line":27768,"column":0},"map":{"version":3,"names":["sap","ui","define","ModelHelper","MacroMetadata","ValueHelp","extend","name","namespace","fragment","metadata","stereotype","designtime","properties","idPrefix","type","defaultValue","property","required","$kind","contextPath","conditionModel","filterFieldValueHelp","useSemanticDateRange","requestGroupId","computed","useMultiValueField","navigationPrefix","collaborationEnabled","requiresValidation","events","create","oProps","oControlConfiguration","oAppComponent","Object","keys","this","forEach","sPropertyName","oProperty","oMetaModel","models","metaModel","entitySet","isCollaborationDraftSupported"],"sources":["ValueHelp.metadata-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,wDAAO,CAAC,kCAAmC,+BAAgC,SAAUC,EAAaC,GACvG,aAEA,MAAMC,EAAYD,EAAcE,OAAO,0BAA2B,CAIhEC,KAAM,YAINC,UAAW,gBAIXC,SAAU,6CAIVC,SAAU,CAIRC,WAAY,WAIZC,WAAY,+CAIZC,WAAY,CAIVC,SAAU,CACRC,KAAM,SACNC,aAAc,aAKhBC,SAAU,CACRF,KAAM,uBACNG,SAAU,KACVC,MAAO,CAAC,aAEVC,YAAa,CACXL,KAAM,uBACNG,SAAU,MAKZG,eAAgB,CACdN,KAAM,SACNC,aAAc,IAMhBM,qBAAsB,CACpBP,KAAM,UACNC,aAAc,OAKhBO,qBAAsB,CACpBR,KAAM,UACNC,aAAc,MAKhBQ,eAAgB,CACdT,KAAM,SACNC,aAAc,GACdS,SAAU,MAKZC,mBAAoB,CAClBX,KAAM,UACNC,aAAc,OAEhBW,iBAAkB,CAChBZ,KAAM,UAERa,qBAAsB,CACpBb,KAAM,UACNU,SAAU,MAEZI,mBAAoB,CAClBd,KAAM,UACNC,aAAc,QAGlBc,OAAQ,CAAC,GAEXC,OAAQ,SAAUC,EAAQC,EAAuBC,GAC/CC,OAAOC,KAAKC,KAAK3B,SAASG,YAAYyB,QAAQC,IAC5C,MAAMC,EAAYH,KAAK3B,SAASG,WAAW0B,GAC3C,GAAIC,EAAUzB,OAAS,UAAW,CAChC,UAAWiB,EAAOO,KAAmB,SAAU,CAC7CP,EAAOO,GAAiBP,EAAOO,KAAmB,MACpD,CACF,IAEFP,EAAOR,eAAiB,gBACxB,MAAMiB,EAAaP,EAAcQ,OAAOC,WAAaT,EAAcQ,OAAOE,UAC1E,GAAIzC,EAAY0C,8BAA8BJ,GAAa,CACzDT,EAAOJ,qBAAuB,IAChC,CACA,OAAOI,CACT,IAEF,OAAO3B,CACT,EAAG","sourceRoot":"valuehelp"}},{"offset":{"line":27773,"column":0},"map":{"version":3,"names":["FeCoreControlsFilterBar","MdcFilterbarFilterBarBase","Object","assign","ValueHelpDelegate","isSearchSupported","_payload","content","_listBinding","getFilterFields","updateBindingInfo","payload","bindingInfo","search","getFilterValue","normalizedSearch","CommonUtils","normalizeSearchTerm","parameters","$search","undefined","updateBinding","listBinding","rootBinding","getRootBinding","isSuspended","suspend","changeParameters","filter","filters","FilterType","Application","resume","executeFilter","_filter","requestedItems","getContexts","checkListBindingPending","contexts","requestContexts","length","getTypeUtil","TypeUtil","retrieveContent","container","contentId","ValueListHelper","showValueList","_getConditionPayloadList","condition","conditionPayloadMap","valueHelpQualifiers","keys","conditionPayloadList","_onConditionPropagationToFilterBar","filterBarVH","conditions","outParameters","filterBar","state","StateUtil","retrieveExternalState","filterItemsVH","getFilterItems","outParameter","filterTarget","source","split","pop","find","item","getId","conditionPayload","newCondition","Condition","createCondition","helpPath","ConditionValidated","Validated","push","applyExternalState","err","message","Error","String","Log","error","_onConditionPropagationToBindingContext","context","metaModel","getModel","getMetaModel","outValues","warning","_onConditionPropagationUpdateProperty","getProperty","propertyPath","getPath","textAnnotation","getObject","textPath","$Path","requestSideEffects","setProperty","onConditionPropagation","valueHelp","reason","_config","qualifier","qualifiers","valueHelpQualifier","vhParameters","getOutParameters","field","getControl","fieldParent","getParent","getConditions","isA","getBindingContext","_createInitialFilterCondition","value","initialValueFilterEmpty","_getInitialFilterConditionsFromBinding","inConditions","control","inParameters","propertiesToRequest","map","inParameter","bindingContext","values","requestProperty","i","_getInitialFilterConditionsFromFilterBar","sourceField","_partitionInParameters","inParameterMap","constant","binding","constantValue","indexOf","_tableAfterRenderDelegate","onAfterRendering","event","table","srcControl","tableCellsDomRefs","$","mdcMTable","highlightDOMElements","getInitialFilterConditions","popoverTable","getTable","removeEventDelegate","addEventDelegate","getInParameters","isObjectPage","createConditionPayload","_values","entry","isMultiValueField","vhKeys","forEach","vhKey","isFilterableListItemSelected","isValueListWithFixedValues","getConfig","maxConditions","validated","selectedCondition","keyPath","getKeyPath","conditionSelectedRow","selectedKeys","every","key"],"sourceRoot":"valuehelp","sources":["ValueHelpDelegate.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport TypeUtil from \"sap/fe/core/type/TypeUtil\";\nimport type { InOutParameter, ValueHelpPayload } from \"sap/fe/macros/internal/valuehelp/ValueListHelper\";\nimport ValueListHelper from \"sap/fe/macros/internal/valuehelp/ValueListHelper\";\nimport highlightDOMElements from \"sap/m/inputUtils/highlightDOMElements\";\nimport type { AggregationBindingInfo } from \"sap/ui/base/ManagedObject\";\nimport type Control from \"sap/ui/core/Control\";\nimport type { ConditionObject } from \"sap/ui/mdc/condition/Condition\";\nimport Condition from \"sap/ui/mdc/condition/Condition\";\nimport ConditionValidated from \"sap/ui/mdc/enum/ConditionValidated\";\nimport type FieldBase from \"sap/ui/mdc/field/FieldBase\";\nimport type FilterBarBase from \"sap/ui/mdc/filterbar/FilterBarBase\";\nimport StateUtil from \"sap/ui/mdc/p13n/StateUtil\";\nimport type ValueHelp from \"sap/ui/mdc/ValueHelp\";\nimport type Container from \"sap/ui/mdc/valuehelp/base/Container\";\nimport type Content from \"sap/ui/mdc/valuehelp/base/Content\";\nimport type FilterableListContent from \"sap/ui/mdc/valuehelp/base/FilterableListContent\";\nimport type MTable from \"sap/ui/mdc/valuehelp/content/MTable\";\nimport ValueHelpDelegate from \"sap/ui/mdc/ValueHelpDelegate\";\nimport type Filter from \"sap/ui/model/Filter\";\nimport FilterType from \"sap/ui/model/FilterType\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataListBinding from \"sap/ui/model/odata/v4/ODataListBinding\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\n\nconst FeCoreControlsFilterBar = \"sap.fe.core.controls.FilterBar\";\nconst MdcFilterbarFilterBarBase = \"sap.ui.mdc.filterbar.FilterBarBase\";\n\ntype ConditionObjectMap = Record<string, ConditionObject[]>;\n\nexport type ExternalStateType = {\n\titems: { name: string }[];\n\tfilter: ConditionObjectMap;\n};\n\nexport type ConditionPayloadType = Record<string, string | boolean>;\n\nexport type ConditionPayloadMap = Record<string, ConditionPayloadType[]>;\n\nexport default Object.assign({}, ValueHelpDelegate, {\n\t/**\n\t * Checks if a <code>ListBinding</code> supports $Search.\n\t *\n\t * @param _payload Payload for delegate\n\t * @param content Content element\n\t * @param _listBinding\n\t * @returns True if $search is supported\n\t */\n\tisSearchSupported: function (_payload: ValueHelpPayload, content: FilterableListContent, _listBinding: ODataListBinding) {\n\t\treturn content.getFilterFields() === \"$search\";\n\t},\n\n\t/**\n\t * Adjustable filtering for list-based contents.\n\t *\n\t * @param payload Payload for delegate\n\t * @param content ValueHelp content requesting conditions configuration\n\t * @param bindingInfo The binding info object to be used to bind the list to the model\n\t */\n\tupdateBindingInfo: function (payload: ValueHelpPayload, content: FilterableListContent, bindingInfo: AggregationBindingInfo) {\n\t\tValueHelpDelegate.updateBindingInfo(payload, content, bindingInfo);\n\n\t\tif (content.getFilterFields() === \"$search\") {\n\t\t\tconst search = content.getFilterValue();\n\t\t\tconst normalizedSearch = CommonUtils.normalizeSearchTerm(search); // adjustSearch\n\n\t\t\tif (bindingInfo.parameters) {\n\t\t\t\t(bindingInfo.parameters as Record<string, unknown>).$search = normalizedSearch || undefined;\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Executes a filter in a <code>ListBinding</code> and resumes it, if suspended.\n\t *\n\t * @param _payload Payload for delegate\n\t * @param listBinding List binding\n\t * @param bindingInfo The binding info object to be used to bind the list to the model\n\t */\n\tupdateBinding: function (_payload: ValueHelpPayload, listBinding: ODataListBinding, bindingInfo: AggregationBindingInfo) {\n\t\tconst rootBinding = listBinding.getRootBinding() || listBinding;\n\t\tif (!rootBinding.isSuspended()) {\n\t\t\trootBinding.suspend();\n\t\t}\n\t\tif (bindingInfo.parameters) {\n\t\t\tlistBinding.changeParameters(bindingInfo.parameters);\n\t\t}\n\t\tlistBinding.filter(bindingInfo.filters, FilterType.Application);\n\n\t\tif (rootBinding.isSuspended()) {\n\t\t\trootBinding.resume();\n\t\t}\n\t},\n\n\t/**\n\t * Executes a filter in a <code>ListBinding</code>.\n\t *\n\t * @param payload Payload for delegate\n\t * @param listBinding List binding\n\t * @param _filter Filter\n\t * @param requestedItems Number of requested items\n\t * @returns Promise that is resolved if search is executed\n\t */\n\texecuteFilter: async function (payload: ValueHelpPayload, listBinding: ODataListBinding, _filter: Filter, requestedItems: number) {\n\t\tlistBinding.getContexts(0, requestedItems);\n\n\t\tawait this.checkListBindingPending(payload, listBinding, requestedItems);\n\t\treturn listBinding;\n\t},\n\n\t/**\n\t * Checks if the <code>ListBinding</code> is waiting for an update.\n\t * As long as the context has not been set for <code>ListBinding</code>,\n\t * <code>ValueHelp</code> needs to wait.\n\t *\n\t * @param _payload Payload for delegate\n\t * @param listBinding ListBinding to check\n\t * @param requestedItems Number of requested items\n\t * @returns Promise that is resolved once ListBinding has been updated\n\t */\n\tcheckListBindingPending: async function (\n\t\t_payload: ValueHelpPayload,\n\t\tlistBinding: ODataListBinding | undefined,\n\t\trequestedItems: number\n\t) {\n\t\tif (!listBinding || listBinding.isSuspended()) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst contexts = await listBinding.requestContexts(0, requestedItems);\n\t\treturn contexts.length === 0;\n\t},\n\n\tgetTypeUtil: function (_payload: ValueHelpPayload) {\n\t\treturn TypeUtil;\n\t},\n\n\t/**\n\t * Requests the content of the value help.\n\t *\n\t * This function is called when the value help is opened or a key or description is requested.\n\t *\n\t * So, depending on the value help content used, all content controls and data need to be assigned.\n\t * Once they are assigned and the data is set, the returned <code>Promise</code> needs to be resolved.\n\t * Only then does the value help continue opening or reading data.\n\t *\n\t * @param payload Payload for delegate\n\t * @param container Container instance\n\t * @param contentId Id of the content shown after this call to retrieveContent\n\t * @returns Promise that is resolved if all content is available\n\t */\n\tretrieveContent: function (payload: ValueHelpPayload, container: Container, contentId: string) {\n\t\treturn ValueListHelper.showValueList(payload, container, contentId);\n\t},\n\n\t_getConditionPayloadList: function (condition: ConditionObject) {\n\t\tconst conditionPayloadMap = (condition.payload || {}) as ConditionPayloadMap,\n\t\t\tvalueHelpQualifiers = Object.keys(conditionPayloadMap),\n\t\t\tconditionPayloadList = valueHelpQualifiers.length ? conditionPayloadMap[valueHelpQualifiers[0]] : [];\n\n\t\treturn conditionPayloadList;\n\t},\n\n\t_onConditionPropagationToFilterBar: async function (\n\t\tfilterBarVH: FilterBarBase,\n\t\tconditions: ConditionObject[],\n\t\toutParameters: InOutParameter[],\n\t\tfilterBar: FilterBarBase\n\t) {\n\t\ttry {\n\t\t\tconst state: ExternalStateType = await StateUtil.retrieveExternalState(filterBar);\n\t\t\tconst filterItemsVH = filterBarVH.getFilterItems();\n\t\t\tfor (const condition of conditions) {\n\t\t\t\tconst conditionPayloadList = this._getConditionPayloadList(condition);\n\t\t\t\tfor (const outParameter of outParameters) {\n\t\t\t\t\tconst filterTarget = outParameter.source.split(\"/\").pop() || \"\";\n\t\t\t\t\t// propagate OUT parameter only if the filter field is visible in the LR filterbar\n\t\t\t\t\tif (\n\t\t\t\t\t\t// LR FilterBar or LR AdaptFilter\n\t\t\t\t\t\tfilterItemsVH.find((item) => item.getId().split(\"::\").pop() === filterTarget)\n\t\t\t\t\t) {\n\t\t\t\t\t\tfor (const conditionPayload of conditionPayloadList) {\n\t\t\t\t\t\t\tconst newCondition = Condition.createCondition(\n\t\t\t\t\t\t\t\t\"EQ\",\n\t\t\t\t\t\t\t\t[conditionPayload[outParameter.helpPath]],\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\tConditionValidated.Validated\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tstate.filter[filterTarget] ||= [];\n\t\t\t\t\t\t\tstate.filter[filterTarget].push(newCondition);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tStateUtil.applyExternalState(filterBar, state);\n\t\t} catch (err) {\n\t\t\tconst message = (err instanceof Error) ? err.message : String(err);\n\t\t\tLog.error(`ValueHelpDelegate: ${message}`);\n\t\t}\n\t},\n\n\t_onConditionPropagationToBindingContext: function (\n\t\tconditions: ConditionObject[],\n\t\toutParameters: InOutParameter[],\n\t\tcontext: Context\n\t) {\n\t\tconst metaModel = context.getModel().getMetaModel();\n\n\t\tfor (const condition of conditions) {\n\t\t\tconst conditionPayloadList = this._getConditionPayloadList(condition),\n\t\t\t\toutValues = conditionPayloadList.length === 1 ? conditionPayloadList[0] : undefined;\n\n\t\t\tif (conditionPayloadList.length > 1) {\n\t\t\t\tLog.warning(\"ValueHelpDelegate: ParameterOut in multi-value-field not supported\");\n\t\t\t}\n\t\t\tif (outValues) {\n\t\t\t\tthis._onConditionPropagationUpdateProperty(metaModel, outValues, outParameters, context);\n\t\t\t}\n\t\t}\n\t},\n\n\t_onConditionPropagationUpdateProperty: function (\n\t\tmetaModel: ODataMetaModel,\n\t\toutValues: ConditionPayloadType,\n\t\toutParameters: InOutParameter[],\n\t\tcontext: Context\n\t) {\n\t\tfor (const outParameter of outParameters) {\n\t\t\t/* If the key gets updated via out-parameter, then the description needs also retrieved with requestSideEffects */\n\t\t\tif (context.getProperty(outParameter.source) !== outValues[outParameter.helpPath]) {\n\t\t\t\tconst propertyPath = context.getPath()?.split('(')[0] + `/${outParameter.source}`;\n\t\t\t\tconst textAnnotation = metaModel?.getObject(`${propertyPath}@com.sap.vocabularies.Common.v1.Text`);\n\t\t\t\tif (textAnnotation !== undefined) {\n\t\t\t\t\tconst textPath = textAnnotation?.$Path;\n\t\t\t\t\tcontext.requestSideEffects([textPath.split('/')[0]]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tcontext.setProperty(outParameter.source, outValues[outParameter.helpPath]);\n\t\t}\n\t},\n\n\t/**\n\t * Callback invoked every time a {@link sap.ui.mdc.ValueHelp ValueHelp} fires a select event or the value of the corresponding field changes\n\t * This callback may be used to update external fields.\n\t *\n\t * @param payload Payload for delegate\n\t * @param valueHelp ValueHelp control instance receiving the <code>controlChange</code>\n\t * @param reason Reason why the method was invoked\n\t * @param _config Current configuration provided by the calling control\n\t * @since 1.101.0\n\t */\n\tonConditionPropagation: async function (payload: ValueHelpPayload, valueHelp: ValueHelp, reason: string, _config: unknown) {\n\t\tif (reason !== \"ControlChange\") {\n\t\t\t// handle only ControlChange reason\n\t\t\treturn;\n\t\t}\n\t\tconst qualifier = payload.qualifiers[payload.valueHelpQualifier];\n\t\tconst outParameters = qualifier?.vhParameters !== undefined ? ValueListHelper.getOutParameters(qualifier.vhParameters) : [],\n\t\t\tfield = valueHelp.getControl() as FieldBase,\n\t\t\tfieldParent = field.getParent() as FilterBarBase | Control;\n\n\t\tlet conditions = field.getConditions() as ConditionObject[];\n\t\tconditions = conditions.filter(function (condition) {\n\t\t\tconst conditionPayloadMap = (condition.payload || {}) as ConditionPayloadMap;\n\t\t\treturn conditionPayloadMap[payload.valueHelpQualifier];\n\t\t});\n\n\t\tif (fieldParent.isA<FilterBarBase>(MdcFilterbarFilterBarBase)) {\n\t\t\t// field inside a FilterBar or AdaptationFilterBar (Settings Dialog)?\n\t\t\tconst filterBarVH = valueHelp.getParent() as FilterBarBase | Control; // Control e.g. FormContainer\n\t\t\tif (filterBarVH.isA(FeCoreControlsFilterBar)) {\n\t\t\t\t// only for LR FilterBar\n\t\t\t\tawait this._onConditionPropagationToFilterBar(\n\t\t\t\t\tfilterBarVH as FilterBarBase,\n\t\t\t\t\tconditions,\n\t\t\t\t\toutParameters,\n\t\t\t\t\tfieldParent\n\t\t\t\t);\n\t\t\t}\n\t\t\t// LR Settings Dialog or OP Settings Dialog shall not propagate value to the dialog filterfields or context\n\t\t} else {\n\t\t\t// Object Page\n\t\t\tconst context = valueHelp.getBindingContext() as Context | undefined;\n\t\t\tif (context) {\n\t\t\t\tthis._onConditionPropagationToBindingContext(conditions, outParameters, context);\n\t\t\t}\n\t\t}\n\t},\n\n\t_createInitialFilterCondition: function (value: unknown, initialValueFilterEmpty: boolean) {\n\t\tlet condition: ConditionObject | undefined;\n\n\t\tif (value === undefined || value === null) {\n\t\t\tLog.error(\"ValueHelpDelegate: value of the property could not be requested\");\n\t\t} else if (value === \"\") {\n\t\t\tif (initialValueFilterEmpty) {\n\t\t\t\tcondition = Condition.createCondition(\"Empty\", [], null, null, ConditionValidated.Validated);\n\t\t\t}\n\t\t} else {\n\t\t\tcondition = Condition.createCondition(\"EQ\", [value], null, null, ConditionValidated.Validated);\n\t\t}\n\t\treturn condition;\n\t},\n\n\t_getInitialFilterConditionsFromBinding: async function (\n\t\tinConditions: ConditionObjectMap,\n\t\tcontrol: Control,\n\t\tinParameters: InOutParameter[]\n\t) {\n\t\tconst propertiesToRequest = inParameters.map((inParameter) => inParameter.source);\n\t\tconst bindingContext = control.getBindingContext() as Context | undefined;\n\n\t\tif (!bindingContext) {\n\t\t\tLog.error(\"ValueHelpDelegate: No BindingContext\");\n\t\t\treturn inConditions;\n\t\t}\n\n\t\t// According to odata v4 api documentation for requestProperty: Property values that are not cached yet are requested from the back end\n\t\tconst values = await bindingContext.requestProperty(propertiesToRequest);\n\n\t\tfor (let i = 0; i < inParameters.length; i++) {\n\t\t\tconst inParameter = inParameters[i];\n\t\t\tconst condition = this._createInitialFilterCondition(values[i], inParameter.initialValueFilterEmpty);\n\n\t\t\tif (condition) {\n\t\t\t\tinConditions[inParameter.helpPath] = [condition];\n\t\t\t}\n\t\t}\n\t\treturn inConditions;\n\t},\n\n\t_getInitialFilterConditionsFromFilterBar: async function (\n\t\tinConditions: ConditionObjectMap,\n\t\tcontrol: Control,\n\t\tinParameters: InOutParameter[]\n\t) {\n\t\tconst filterBar = control.getParent() as FilterBarBase;\n\t\tconst state: ExternalStateType = await StateUtil.retrieveExternalState(filterBar);\n\n\t\tfor (const inParameter of inParameters) {\n\t\t\tconst sourceField = inParameter.source.split(\"/\").pop() as string;\n\t\t\tconst conditions = state.filter[sourceField];\n\n\t\t\tif (conditions) {\n\t\t\t\tinConditions[inParameter.helpPath] = conditions;\n\t\t\t}\n\t\t}\n\t\treturn inConditions;\n\t},\n\n\t_partitionInParameters: function (inParameters: InOutParameter[]) {\n\t\tconst inParameterMap: Record<string, InOutParameter[]> = {\n\t\t\tconstant: [],\n\t\t\tbinding: [],\n\t\t\tfilter: []\n\t\t};\n\n\t\tfor (const inParameter of inParameters) {\n\t\t\tif (inParameter.constantValue !== undefined) {\n\t\t\t\tinParameterMap.constant.push(inParameter);\n\t\t\t} else if (inParameter.source.indexOf(\"$filter\") === 0) {\n\t\t\t\tinParameterMap.filter.push(inParameter);\n\t\t\t} else {\n\t\t\t\tinParameterMap.binding.push(inParameter);\n\t\t\t}\n\t\t}\n\t\treturn inParameterMap;\n\t},\n\n\t_tableAfterRenderDelegate: {\n\t\tonAfterRendering: function (event: jQuery.Event & { srcControl: Control }) {\n\t\t\tconst table = event.srcControl, // m.Table\n\t\t\t\ttableCellsDomRefs = table.$().find(\"tbody .sapMText\"),\n\t\t\t\tmdcMTable = table.getParent() as MTable;\n\n\t\t\thighlightDOMElements(tableCellsDomRefs, mdcMTable.getFilterValue(), true);\n\t\t}\n\t},\n\n\t/**\n\t * Provides an initial condition configuration everytime a value help content is shown.\n\t *\n\t * @param payload Payload for delegate\n\t * @param content ValueHelp content requesting conditions configuration\n\t * @param control Instance of the calling control\n\t * @returns Returns a map of conditions suitable for a sap.ui.mdc.FilterBar control\n\t * @since 1.101.0\n\t */\n\tgetInitialFilterConditions: async function (payload: ValueHelpPayload, content: Content, control: Control | undefined) {\n\t\t// highlight text in ValueHelp popover\n\t\tif (content?.isA(\"sap.ui.mdc.valuehelp.content.MTable\")) {\n\t\t\tconst popoverTable = (content as MTable).getTable();\n\t\t\tpopoverTable?.removeEventDelegate(this._tableAfterRenderDelegate);\n\t\t\tpopoverTable?.addEventDelegate(this._tableAfterRenderDelegate, this);\n\t\t}\n\n\t\tconst inConditions: ConditionObjectMap = {};\n\n\t\tif (!control) {\n\t\t\tLog.error(\"ValueHelpDelegate: Control undefined\");\n\t\t\treturn inConditions;\n\t\t}\n\n\t\tconst qualifier = payload.qualifiers[payload.valueHelpQualifier];\n\t\tconst inParameters = qualifier?.vhParameters !== undefined ? ValueListHelper.getInParameters(qualifier.vhParameters) : [];\n\t\tconst inParameterMap = this._partitionInParameters(inParameters);\n\t\tconst isObjectPage = control.getBindingContext();\n\n\t\tfor (const inParameter of inParameterMap.constant) {\n\t\t\tconst condition = this._createInitialFilterCondition(\n\t\t\t\tinParameter.constantValue,\n\t\t\t\tisObjectPage ? inParameter.initialValueFilterEmpty : false // no filter with \"empty\" on ListReport\n\t\t\t);\n\t\t\tif (condition) {\n\t\t\t\tinConditions[inParameter.helpPath] = [condition];\n\t\t\t}\n\t\t}\n\n\t\tif (inParameterMap.binding.length) {\n\t\t\tawait this._getInitialFilterConditionsFromBinding(inConditions, control, inParameterMap.binding);\n\t\t}\n\n\t\tif (inParameterMap.filter.length) {\n\t\t\tawait this._getInitialFilterConditionsFromFilterBar(inConditions, control, inParameterMap.filter);\n\t\t}\n\t\treturn inConditions;\n\t},\n\n\t/**\n\t * Provides the possibility to convey custom data in conditions.\n\t * This enables an application to enhance conditions with data relevant for combined key or outparameter scenarios.\n\t *\n\t * @param payload Payload for delegate\n\t * @param content ValueHelp content instance\n\t * @param _values Description pair for the condition which is to be created\n\t * @param context Optional additional context\n\t * @returns Optionally returns a serializable object to be stored in the condition payload field\n\t * @since 1.101.0\n\t */\n\tcreateConditionPayload: function (\n\t\tpayload: ValueHelpPayload,\n\t\tcontent: Content,\n\t\t_values: unknown[],\n\t\tcontext: Context\n\t): ConditionPayloadMap | undefined {\n\t\tconst qualifier = payload.qualifiers[payload.valueHelpQualifier],\n\t\t\tentry: ConditionPayloadType = {},\n\t\t\tconditionPayload: ConditionPayloadMap = {};\n\t\tconst control = content.getControl();\n\t\tconst isMultiValueField = control?.isA(\"sap.ui.mdc.MultiValueField\");\n\t\tif (!qualifier.vhKeys || qualifier.vhKeys.length === 1 || isMultiValueField) {\n\t\t\treturn undefined;\n\t\t}\n\t\tqualifier.vhKeys.forEach(function (vhKey) {\n\t\t\tconst value = context.getObject(vhKey);\n\t\t\tif (value != null) {\n\t\t\t\tentry[vhKey] = value?.length === 0 ? \"\" : value;\n\t\t\t}\n\t\t});\n\t\tif (Object.keys(entry).length) {\n\t\t\t/* vh qualifier as key for relevant condition */\n\t\t\tconditionPayload[payload.valueHelpQualifier] = [entry];\n\t\t}\n\t\treturn conditionPayload;\n\t},\n\n\t/**\n\t * Provides the possibility to customize selections in 'Select from list' scenarios.\n\t * By default, only condition keys are considered. This may be extended with payload dependent filters.\n\t *\n\t * @param payload Payload for delegate\n\t * @param content ValueHelp content instance\n\t * @param item Entry of a given list\n\t * @param conditions Current conditions\n\t * @returns True, if item is selected\n\t * @since 1.101.0\n\t */\n\tisFilterableListItemSelected: function (payload: ValueHelpPayload, content: Content, item: Control, conditions: ConditionObject[]) {\n\t\t//In value help dialogs of single value fields the row for the key shouldnt be selected/highlight anymore BCP: 2270175246\n\t\tif (payload.isValueListWithFixedValues !== true && content.getConfig()?.maxConditions === 1) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst context = item.getBindingContext();\n\n\t\t/* Do not consider \"NotValidated\" conditions */\n\t\tconditions = conditions.filter((condition) => condition.validated === ConditionValidated.Validated);\n\n\t\tconst selectedCondition = conditions.find(function (condition) {\n\t\t\tconst conditionPayloadMap = condition.payload as ConditionPayloadMap | undefined,\n\t\t\t\tvalueHelpQualifier = payload.valueHelpQualifier || \"\";\n\t\t\tif (!conditionPayloadMap && Object.keys(payload.qualifiers)[0] === valueHelpQualifier) {\n\t\t\t\tconst keyPath = content.getKeyPath();\n\t\t\t\treturn context?.getObject(keyPath) === condition?.values[0];\n\t\t\t}\n\t\t\tconst conditionSelectedRow = conditionPayloadMap?.[valueHelpQualifier]?.[0] || {},\n\t\t\t\tselectedKeys = Object.keys(conditionSelectedRow);\n\t\t\tif (selectedKeys.length) {\n\t\t\t\treturn selectedKeys.every(function (key) {\n\t\t\t\t\treturn (conditionSelectedRow[key] as unknown) === context?.getObject(key);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\n\t\treturn selectedCondition ? true : false;\n\t}\n});\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;EA0BA,MAAMA,uBAAuB,GAAG,gCAAgC;EAChE,MAAMC,yBAAyB,GAAG,oCAAoC;EAAC,OAaxDC,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEC,iBAAiB,EAAE;IACnD;AACD;AACA;AACA;AACA;AACA;AACA;AACA;IACCC,iBAAiB,EAAE,UAAUC,QAA0B,EAAEC,OAA8B,EAAEC,YAA8B,EAAE;MACxH,OAAOD,OAAO,CAACE,eAAe,EAAE,KAAK,SAAS;IAC/C,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;AACA;IACCC,iBAAiB,EAAE,UAAUC,OAAyB,EAAEJ,OAA8B,EAAEK,WAAmC,EAAE;MAC5HR,iBAAiB,CAACM,iBAAiB,CAACC,OAAO,EAAEJ,OAAO,EAAEK,WAAW,CAAC;MAElE,IAAIL,OAAO,CAACE,eAAe,EAAE,KAAK,SAAS,EAAE;QAC5C,MAAMI,MAAM,GAAGN,OAAO,CAACO,cAAc,EAAE;QACvC,MAAMC,gBAAgB,GAAGC,WAAW,CAACC,mBAAmB,CAACJ,MAAM,CAAC,CAAC,CAAC;;QAElE,IAAID,WAAW,CAACM,UAAU,EAAE;UAC1BN,WAAW,CAACM,UAAU,CAA6BC,OAAO,GAAGJ,gBAAgB,IAAIK,SAAS;QAC5F;MACD;IACD,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;AACA;IACCC,aAAa,EAAE,UAAUf,QAA0B,EAAEgB,WAA6B,EAAEV,WAAmC,EAAE;MACxH,MAAMW,WAAW,GAAGD,WAAW,CAACE,cAAc,EAAE,IAAIF,WAAW;MAC/D,IAAI,CAACC,WAAW,CAACE,WAAW,EAAE,EAAE;QAC/BF,WAAW,CAACG,OAAO,EAAE;MACtB;MACA,IAAId,WAAW,CAACM,UAAU,EAAE;QAC3BI,WAAW,CAACK,gBAAgB,CAACf,WAAW,CAACM,UAAU,CAAC;MACrD;MACAI,WAAW,CAACM,MAAM,CAAChB,WAAW,CAACiB,OAAO,EAAEC,UAAU,CAACC,WAAW,CAAC;MAE/D,IAAIR,WAAW,CAACE,WAAW,EAAE,EAAE;QAC9BF,WAAW,CAACS,MAAM,EAAE;MACrB;IACD,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACCC,aAAa,EAAE,gBAAgBtB,OAAyB,EAAEW,WAA6B,EAAEY,OAAe,EAAEC,cAAsB,EAAE;MACjIb,WAAW,CAACc,WAAW,CAAC,CAAC,EAAED,cAAc,CAAC;MAE1C,MAAM,IAAI,CAACE,uBAAuB,CAAC1B,OAAO,EAAEW,WAAW,EAAEa,cAAc,CAAC;MACxE,OAAOb,WAAW;IACnB,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACCe,uBAAuB,EAAE,gBACxB/B,QAA0B,EAC1BgB,WAAyC,EACzCa,cAAsB,EACrB;MACD,IAAI,CAACb,WAAW,IAAIA,WAAW,CAACG,WAAW,EAAE,EAAE;QAC9C,OAAO,KAAK;MACb;MAEA,MAAMa,QAAQ,GAAG,MAAMhB,WAAW,CAACiB,eAAe,CAAC,CAAC,EAAEJ,cAAc,CAAC;MACrE,OAAOG,QAAQ,CAACE,MAAM,KAAK,CAAC;IAC7B,CAAC;IAEDC,WAAW,EAAE,UAAUnC,QAA0B,EAAE;MAClD,OAAOoC,QAAQ;IAChB,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACCC,eAAe,EAAE,UAAUhC,OAAyB,EAAEiC,SAAoB,EAAEC,SAAiB,EAAE;MAC9F,OAAOC,eAAe,CAACC,aAAa,CAACpC,OAAO,EAAEiC,SAAS,EAAEC,SAAS,CAAC;IACpE,CAAC;IAEDG,wBAAwB,EAAE,UAAUC,SAA0B,EAAE;MAC/D,MAAMC,mBAAmB,GAAID,SAAS,CAACtC,OAAO,IAAI,CAAC,CAAyB;QAC3EwC,mBAAmB,GAAGjD,MAAM,CAACkD,IAAI,CAACF,mBAAmB,CAAC;QACtDG,oBAAoB,GAAGF,mBAAmB,CAACX,MAAM,GAAGU,mBAAmB,CAACC,mBAAmB,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE;MAErG,OAAOE,oBAAoB;IAC5B,CAAC;IAEDC,kCAAkC,EAAE,gBACnCC,WAA0B,EAC1BC,UAA6B,EAC7BC,aAA+B,EAC/BC,SAAwB,EACvB;MACD,IAAI;QACH,MAAMC,KAAwB,GAAG,MAAMC,SAAS,CAACC,qBAAqB,CAACH,SAAS,CAAC;QACjF,MAAMI,aAAa,GAAGP,WAAW,CAACQ,cAAc,EAAE;QAClD,KAAK,MAAMd,SAAS,IAAIO,UAAU,EAAE;UACnC,MAAMH,oBAAoB,GAAG,IAAI,CAACL,wBAAwB,CAACC,SAAS,CAAC;UACrE,KAAK,MAAMe,YAAY,IAAIP,aAAa,EAAE;YACzC,MAAMQ,YAAY,GAAGD,YAAY,CAACE,MAAM,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,EAAE,IAAI,EAAE;YAC/D;YACA;YACC;YACAN,aAAa,CAACO,IAAI,CAAEC,IAAI,IAAKA,IAAI,CAACC,KAAK,EAAE,CAACJ,KAAK,CAAC,IAAI,CAAC,CAACC,GAAG,EAAE,KAAKH,YAAY,CAAC,EAC5E;cACD,KAAK,MAAMO,gBAAgB,IAAInB,oBAAoB,EAAE;gBACpD,MAAMoB,YAAY,GAAGC,SAAS,CAACC,eAAe,CAC7C,IAAI,EACJ,CAACH,gBAAgB,CAACR,YAAY,CAACY,QAAQ,CAAC,CAAC,EACzC,IAAI,EACJ,IAAI,EACJC,kBAAkB,CAACC,SAAS,CAC5B;gBACDnB,KAAK,CAAC/B,MAAM,CAACqC,YAAY,CAAC,KAAK,EAAE;gBACjCN,KAAK,CAAC/B,MAAM,CAACqC,YAAY,CAAC,CAACc,IAAI,CAACN,YAAY,CAAC;cAC9C;YACD;UACD;QACD;QACAb,SAAS,CAACoB,kBAAkB,CAACtB,SAAS,EAAEC,KAAK,CAAC;MAC/C,CAAC,CAAC,OAAOsB,GAAG,EAAE;QACb,MAAMC,OAAO,GAAID,GAAG,YAAYE,KAAK,GAAIF,GAAG,CAACC,OAAO,GAAGE,MAAM,CAACH,GAAG,CAAC;QAClEI,GAAG,CAACC,KAAK,CAAE,sBAAqBJ,OAAQ,EAAC,CAAC;MAC3C;IACD,CAAC;IAEDK,uCAAuC,EAAE,UACxC/B,UAA6B,EAC7BC,aAA+B,EAC/B+B,OAAgB,EACf;MACD,MAAMC,SAAS,GAAGD,OAAO,CAACE,QAAQ,EAAE,CAACC,YAAY,EAAE;MAEnD,KAAK,MAAM1C,SAAS,IAAIO,UAAU,EAAE;QACnC,MAAMH,oBAAoB,GAAG,IAAI,CAACL,wBAAwB,CAACC,SAAS,CAAC;UACpE2C,SAAS,GAAGvC,oBAAoB,CAACb,MAAM,KAAK,CAAC,GAAGa,oBAAoB,CAAC,CAAC,CAAC,GAAGjC,SAAS;QAEpF,IAAIiC,oBAAoB,CAACb,MAAM,GAAG,CAAC,EAAE;UACpC6C,GAAG,CAACQ,OAAO,CAAC,oEAAoE,CAAC;QAClF;QACA,IAAID,SAAS,EAAE;UACd,IAAI,CAACE,qCAAqC,CAACL,SAAS,EAAEG,SAAS,EAAEnC,aAAa,EAAE+B,OAAO,CAAC;QACzF;MACD;IACD,CAAC;IAEDM,qCAAqC,EAAE,UACtCL,SAAyB,EACzBG,SAA+B,EAC/BnC,aAA+B,EAC/B+B,OAAgB,EACf;MACD,KAAK,MAAMxB,YAAY,IAAIP,aAAa,EAAE;QACzC;QACA,IAAI+B,OAAO,CAACO,WAAW,CAAC/B,YAAY,CAACE,MAAM,CAAC,KAAK0B,SAAS,CAAC5B,YAAY,CAACY,QAAQ,CAAC,EAAE;UAAA;UAClF,MAAMoB,YAAY,GAAG,qBAAAR,OAAO,CAACS,OAAO,EAAE,qDAAjB,iBAAmB9B,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,IAAGH,YAAY,CAACE,MAAO,EAAC;UACjF,MAAMgC,cAAc,GAAGT,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEU,SAAS,CAAE,GAAEH,YAAa,sCAAqC,CAAC;UAClG,IAAIE,cAAc,KAAK9E,SAAS,EAAE;YACjC,MAAMgF,QAAQ,GAAGF,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAEG,KAAK;YACtCb,OAAO,CAACc,kBAAkB,CAAC,CAACF,QAAQ,CAACjC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;UACrD;QACD;QACAqB,OAAO,CAACe,WAAW,CAACvC,YAAY,CAACE,MAAM,EAAE0B,SAAS,CAAC5B,YAAY,CAACY,QAAQ,CAAC,CAAC;MAC3E;IACD,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACC4B,sBAAsB,EAAE,gBAAgB7F,OAAyB,EAAE8F,SAAoB,EAAEC,MAAc,EAAEC,OAAgB,EAAE;MAC1H,IAAID,MAAM,KAAK,eAAe,EAAE;QAC/B;QACA;MACD;MACA,MAAME,SAAS,GAAGjG,OAAO,CAACkG,UAAU,CAAClG,OAAO,CAACmG,kBAAkB,CAAC;MAChE,MAAMrD,aAAa,GAAG,CAAAmD,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEG,YAAY,MAAK3F,SAAS,GAAG0B,eAAe,CAACkE,gBAAgB,CAACJ,SAAS,CAACG,YAAY,CAAC,GAAG,EAAE;QAC1HE,KAAK,GAAGR,SAAS,CAACS,UAAU,EAAe;QAC3CC,WAAW,GAAGF,KAAK,CAACG,SAAS,EAA6B;MAE3D,IAAI5D,UAAU,GAAGyD,KAAK,CAACI,aAAa,EAAuB;MAC3D7D,UAAU,GAAGA,UAAU,CAAC5B,MAAM,CAAC,UAAUqB,SAAS,EAAE;QACnD,MAAMC,mBAAmB,GAAID,SAAS,CAACtC,OAAO,IAAI,CAAC,CAAyB;QAC5E,OAAOuC,mBAAmB,CAACvC,OAAO,CAACmG,kBAAkB,CAAC;MACvD,CAAC,CAAC;MAEF,IAAIK,WAAW,CAACG,GAAG,CAAgBrH,yBAAyB,CAAC,EAAE;QAC9D;QACA,MAAMsD,WAAW,GAAGkD,SAAS,CAACW,SAAS,EAA6B,CAAC,CAAC;QACtE,IAAI7D,WAAW,CAAC+D,GAAG,CAACtH,uBAAuB,CAAC,EAAE;UAC7C;UACA,MAAM,IAAI,CAACsD,kCAAkC,CAC5CC,WAAW,EACXC,UAAU,EACVC,aAAa,EACb0D,WAAW,CACX;QACF;QACA;MACD,CAAC,MAAM;QACN;QACA,MAAM3B,OAAO,GAAGiB,SAAS,CAACc,iBAAiB,EAAyB;QACpE,IAAI/B,OAAO,EAAE;UACZ,IAAI,CAACD,uCAAuC,CAAC/B,UAAU,EAAEC,aAAa,EAAE+B,OAAO,CAAC;QACjF;MACD;IACD,CAAC;IAEDgC,6BAA6B,EAAE,UAAUC,KAAc,EAAEC,uBAAgC,EAAE;MAC1F,IAAIzE,SAAsC;MAE1C,IAAIwE,KAAK,KAAKrG,SAAS,IAAIqG,KAAK,KAAK,IAAI,EAAE;QAC1CpC,GAAG,CAACC,KAAK,CAAC,iEAAiE,CAAC;MAC7E,CAAC,MAAM,IAAImC,KAAK,KAAK,EAAE,EAAE;QACxB,IAAIC,uBAAuB,EAAE;UAC5BzE,SAAS,GAAGyB,SAAS,CAACC,eAAe,CAAC,OAAO,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,EAAEE,kBAAkB,CAACC,SAAS,CAAC;QAC7F;MACD,CAAC,MAAM;QACN7B,SAAS,GAAGyB,SAAS,CAACC,eAAe,CAAC,IAAI,EAAE,CAAC8C,KAAK,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE5C,kBAAkB,CAACC,SAAS,CAAC;MAC/F;MACA,OAAO7B,SAAS;IACjB,CAAC;IAED0E,sCAAsC,EAAE,gBACvCC,YAAgC,EAChCC,OAAgB,EAChBC,YAA8B,EAC7B;MACD,MAAMC,mBAAmB,GAAGD,YAAY,CAACE,GAAG,CAAEC,WAAW,IAAKA,WAAW,CAAC/D,MAAM,CAAC;MACjF,MAAMgE,cAAc,GAAGL,OAAO,CAACN,iBAAiB,EAAyB;MAEzE,IAAI,CAACW,cAAc,EAAE;QACpB7C,GAAG,CAACC,KAAK,CAAC,sCAAsC,CAAC;QACjD,OAAOsC,YAAY;MACpB;;MAEA;MACA,MAAMO,MAAM,GAAG,MAAMD,cAAc,CAACE,eAAe,CAACL,mBAAmB,CAAC;MAExE,KAAK,IAAIM,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGP,YAAY,CAACtF,MAAM,EAAE6F,CAAC,EAAE,EAAE;QAC7C,MAAMJ,WAAW,GAAGH,YAAY,CAACO,CAAC,CAAC;QACnC,MAAMpF,SAAS,GAAG,IAAI,CAACuE,6BAA6B,CAACW,MAAM,CAACE,CAAC,CAAC,EAAEJ,WAAW,CAACP,uBAAuB,CAAC;QAEpG,IAAIzE,SAAS,EAAE;UACd2E,YAAY,CAACK,WAAW,CAACrD,QAAQ,CAAC,GAAG,CAAC3B,SAAS,CAAC;QACjD;MACD;MACA,OAAO2E,YAAY;IACpB,CAAC;IAEDU,wCAAwC,EAAE,gBACzCV,YAAgC,EAChCC,OAAgB,EAChBC,YAA8B,EAC7B;MACD,MAAMpE,SAAS,GAAGmE,OAAO,CAACT,SAAS,EAAmB;MACtD,MAAMzD,KAAwB,GAAG,MAAMC,SAAS,CAACC,qBAAqB,CAACH,SAAS,CAAC;MAEjF,KAAK,MAAMuE,WAAW,IAAIH,YAAY,EAAE;QACvC,MAAMS,WAAW,GAAGN,WAAW,CAAC/D,MAAM,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,EAAY;QACjE,MAAMZ,UAAU,GAAGG,KAAK,CAAC/B,MAAM,CAAC2G,WAAW,CAAC;QAE5C,IAAI/E,UAAU,EAAE;UACfoE,YAAY,CAACK,WAAW,CAACrD,QAAQ,CAAC,GAAGpB,UAAU;QAChD;MACD;MACA,OAAOoE,YAAY;IACpB,CAAC;IAEDY,sBAAsB,EAAE,UAAUV,YAA8B,EAAE;MACjE,MAAMW,cAAgD,GAAG;QACxDC,QAAQ,EAAE,EAAE;QACZC,OAAO,EAAE,EAAE;QACX/G,MAAM,EAAE;MACT,CAAC;MAED,KAAK,MAAMqG,WAAW,IAAIH,YAAY,EAAE;QACvC,IAAIG,WAAW,CAACW,aAAa,KAAKxH,SAAS,EAAE;UAC5CqH,cAAc,CAACC,QAAQ,CAAC3D,IAAI,CAACkD,WAAW,CAAC;QAC1C,CAAC,MAAM,IAAIA,WAAW,CAAC/D,MAAM,CAAC2E,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE;UACvDJ,cAAc,CAAC7G,MAAM,CAACmD,IAAI,CAACkD,WAAW,CAAC;QACxC,CAAC,MAAM;UACNQ,cAAc,CAACE,OAAO,CAAC5D,IAAI,CAACkD,WAAW,CAAC;QACzC;MACD;MACA,OAAOQ,cAAc;IACtB,CAAC;IAEDK,yBAAyB,EAAE;MAC1BC,gBAAgB,EAAE,UAAUC,KAA6C,EAAE;QAC1E,MAAMC,KAAK,GAAGD,KAAK,CAACE,UAAU;UAAE;UAC/BC,iBAAiB,GAAGF,KAAK,CAACG,CAAC,EAAE,CAAC/E,IAAI,CAAC,iBAAiB,CAAC;UACrDgF,SAAS,GAAGJ,KAAK,CAAC7B,SAAS,EAAY;QAExCkC,oBAAoB,CAACH,iBAAiB,EAAEE,SAAS,CAACvI,cAAc,EAAE,EAAE,IAAI,CAAC;MAC1E;IACD,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACCyI,0BAA0B,EAAE,gBAAgB5I,OAAyB,EAAEJ,OAAgB,EAAEsH,OAA4B,EAAE;MACtH;MACA,IAAItH,OAAO,aAAPA,OAAO,eAAPA,OAAO,CAAE+G,GAAG,CAAC,qCAAqC,CAAC,EAAE;QACxD,MAAMkC,YAAY,GAAIjJ,OAAO,CAAYkJ,QAAQ,EAAE;QACnDD,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAEE,mBAAmB,CAAC,IAAI,CAACZ,yBAAyB,CAAC;QACjEU,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAEG,gBAAgB,CAAC,IAAI,CAACb,yBAAyB,EAAE,IAAI,CAAC;MACrE;MAEA,MAAMlB,YAAgC,GAAG,CAAC,CAAC;MAE3C,IAAI,CAACC,OAAO,EAAE;QACbxC,GAAG,CAACC,KAAK,CAAC,sCAAsC,CAAC;QACjD,OAAOsC,YAAY;MACpB;MAEA,MAAMhB,SAAS,GAAGjG,OAAO,CAACkG,UAAU,CAAClG,OAAO,CAACmG,kBAAkB,CAAC;MAChE,MAAMgB,YAAY,GAAG,CAAAlB,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEG,YAAY,MAAK3F,SAAS,GAAG0B,eAAe,CAAC8G,eAAe,CAAChD,SAAS,CAACG,YAAY,CAAC,GAAG,EAAE;MACzH,MAAM0B,cAAc,GAAG,IAAI,CAACD,sBAAsB,CAACV,YAAY,CAAC;MAChE,MAAM+B,YAAY,GAAGhC,OAAO,CAACN,iBAAiB,EAAE;MAEhD,KAAK,MAAMU,WAAW,IAAIQ,cAAc,CAACC,QAAQ,EAAE;QAClD,MAAMzF,SAAS,GAAG,IAAI,CAACuE,6BAA6B,CACnDS,WAAW,CAACW,aAAa,EACzBiB,YAAY,GAAG5B,WAAW,CAACP,uBAAuB,GAAG,KAAK,CAAC;QAAA,CAC3D;;QACD,IAAIzE,SAAS,EAAE;UACd2E,YAAY,CAACK,WAAW,CAACrD,QAAQ,CAAC,GAAG,CAAC3B,SAAS,CAAC;QACjD;MACD;MAEA,IAAIwF,cAAc,CAACE,OAAO,CAACnG,MAAM,EAAE;QAClC,MAAM,IAAI,CAACmF,sCAAsC,CAACC,YAAY,EAAEC,OAAO,EAAEY,cAAc,CAACE,OAAO,CAAC;MACjG;MAEA,IAAIF,cAAc,CAAC7G,MAAM,CAACY,MAAM,EAAE;QACjC,MAAM,IAAI,CAAC8F,wCAAwC,CAACV,YAAY,EAAEC,OAAO,EAAEY,cAAc,CAAC7G,MAAM,CAAC;MAClG;MACA,OAAOgG,YAAY;IACpB,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACCkC,sBAAsB,EAAE,UACvBnJ,OAAyB,EACzBJ,OAAgB,EAChBwJ,OAAkB,EAClBvE,OAAgB,EACkB;MAClC,MAAMoB,SAAS,GAAGjG,OAAO,CAACkG,UAAU,CAAClG,OAAO,CAACmG,kBAAkB,CAAC;QAC/DkD,KAA2B,GAAG,CAAC,CAAC;QAChCxF,gBAAqC,GAAG,CAAC,CAAC;MAC3C,MAAMqD,OAAO,GAAGtH,OAAO,CAAC2G,UAAU,EAAE;MACpC,MAAM+C,iBAAiB,GAAGpC,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEP,GAAG,CAAC,4BAA4B,CAAC;MACpE,IAAI,CAACV,SAAS,CAACsD,MAAM,IAAItD,SAAS,CAACsD,MAAM,CAAC1H,MAAM,KAAK,CAAC,IAAIyH,iBAAiB,EAAE;QAC5E,OAAO7I,SAAS;MACjB;MACAwF,SAAS,CAACsD,MAAM,CAACC,OAAO,CAAC,UAAUC,KAAK,EAAE;QACzC,MAAM3C,KAAK,GAAGjC,OAAO,CAACW,SAAS,CAACiE,KAAK,CAAC;QACtC,IAAI3C,KAAK,IAAI,IAAI,EAAE;UAClBuC,KAAK,CAACI,KAAK,CAAC,GAAG,CAAA3C,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEjF,MAAM,MAAK,CAAC,GAAG,EAAE,GAAGiF,KAAK;QAChD;MACD,CAAC,CAAC;MACF,IAAIvH,MAAM,CAACkD,IAAI,CAAC4G,KAAK,CAAC,CAACxH,MAAM,EAAE;QAC9B;QACAgC,gBAAgB,CAAC7D,OAAO,CAACmG,kBAAkB,CAAC,GAAG,CAACkD,KAAK,CAAC;MACvD;MACA,OAAOxF,gBAAgB;IACxB,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACC6F,4BAA4B,EAAE,UAAU1J,OAAyB,EAAEJ,OAAgB,EAAE+D,IAAa,EAAEd,UAA6B,EAAE;MAAA;MAClI;MACA,IAAI7C,OAAO,CAAC2J,0BAA0B,KAAK,IAAI,IAAI,uBAAA/J,OAAO,CAACgK,SAAS,EAAE,uDAAnB,mBAAqBC,aAAa,MAAK,CAAC,EAAE;QAC5F,OAAO,KAAK;MACb;MAEA,MAAMhF,OAAO,GAAGlB,IAAI,CAACiD,iBAAiB,EAAE;;MAExC;MACA/D,UAAU,GAAGA,UAAU,CAAC5B,MAAM,CAAEqB,SAAS,IAAKA,SAAS,CAACwH,SAAS,KAAK5F,kBAAkB,CAACC,SAAS,CAAC;MAEnG,MAAM4F,iBAAiB,GAAGlH,UAAU,CAACa,IAAI,CAAC,UAAUpB,SAAS,EAAE;QAAA;QAC9D,MAAMC,mBAAmB,GAAGD,SAAS,CAACtC,OAA0C;UAC/EmG,kBAAkB,GAAGnG,OAAO,CAACmG,kBAAkB,IAAI,EAAE;QACtD,IAAI,CAAC5D,mBAAmB,IAAIhD,MAAM,CAACkD,IAAI,CAACzC,OAAO,CAACkG,UAAU,CAAC,CAAC,CAAC,CAAC,KAAKC,kBAAkB,EAAE;UACtF,MAAM6D,OAAO,GAAGpK,OAAO,CAACqK,UAAU,EAAE;UACpC,OAAO,CAAApF,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEW,SAAS,CAACwE,OAAO,CAAC,OAAK1H,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEkF,MAAM,CAAC,CAAC,CAAC;QAC5D;QACA,MAAM0C,oBAAoB,GAAG,CAAA3H,mBAAmB,aAAnBA,mBAAmB,gDAAnBA,mBAAmB,CAAG4D,kBAAkB,CAAC,0DAAzC,sBAA4C,CAAC,CAAC,KAAI,CAAC,CAAC;UAChFgE,YAAY,GAAG5K,MAAM,CAACkD,IAAI,CAACyH,oBAAoB,CAAC;QACjD,IAAIC,YAAY,CAACtI,MAAM,EAAE;UACxB,OAAOsI,YAAY,CAACC,KAAK,CAAC,UAAUC,GAAG,EAAE;YACxC,OAAQH,oBAAoB,CAACG,GAAG,CAAC,MAAiBxF,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEW,SAAS,CAAC6E,GAAG,CAAC;UAC1E,CAAC,CAAC;QACH;QACA,OAAO,KAAK;MACb,CAAC,CAAC;MAEF,OAAON,iBAAiB,GAAG,IAAI,GAAG,KAAK;IACxC;EACD,CAAC,CAAC;AAAA"}},{"offset":{"line":28168,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","CommonUtils","TypeUtil","ValueListHelper","highlightDOMElements","Condition","ConditionValidated","StateUtil","ValueHelpDelegate","FilterType","FeCoreControlsFilterBar","MdcFilterbarFilterBarBase","Object","assign","isSearchSupported","_payload","content","_listBinding","getFilterFields","updateBindingInfo","payload","bindingInfo","search","getFilterValue","normalizedSearch","normalizeSearchTerm","parameters","$search","undefined","updateBinding","listBinding","rootBinding","getRootBinding","isSuspended","suspend","changeParameters","filter","filters","Application","resume","executeFilter","async","_filter","requestedItems","getContexts","this","checkListBindingPending","contexts","requestContexts","length","getTypeUtil","retrieveContent","container","contentId","showValueList","_getConditionPayloadList","condition","conditionPayloadMap","valueHelpQualifiers","keys","conditionPayloadList","_onConditionPropagationToFilterBar","filterBarVH","conditions","outParameters","filterBar","state","retrieveExternalState","filterItemsVH","getFilterItems","outParameter","filterTarget","source","split","pop","find","item","getId","conditionPayload","newCondition","createCondition","helpPath","Validated","push","applyExternalState","err","message","Error","String","error","_onConditionPropagationToBindingContext","context","metaModel","getModel","getMetaModel","outValues","warning","_onConditionPropagationUpdateProperty","getProperty","_context$getPath","propertyPath","getPath","textAnnotation","getObject","textPath","$Path","requestSideEffects","setProperty","onConditionPropagation","valueHelp","reason","_config","qualifier","qualifiers","valueHelpQualifier","vhParameters","getOutParameters","field","getControl","fieldParent","getParent","getConditions","isA","getBindingContext","_createInitialFilterCondition","value","initialValueFilterEmpty","_getInitialFilterConditionsFromBinding","inConditions","control","inParameters","propertiesToRequest","map","inParameter","bindingContext","values","requestProperty","i","_getInitialFilterConditionsFromFilterBar","sourceField","_partitionInParameters","inParameterMap","constant","binding","constantValue","indexOf","_tableAfterRenderDelegate","onAfterRendering","event","table","srcControl","tableCellsDomRefs","$","mdcMTable","getInitialFilterConditions","popoverTable","getTable","removeEventDelegate","addEventDelegate","getInParameters","isObjectPage","createConditionPayload","_values","entry","isMultiValueField","vhKeys","forEach","vhKey","isFilterableListItemSelected","_content$getConfig","isValueListWithFixedValues","getConfig","maxConditions","validated","selectedCondition","_conditionPayloadMap$","keyPath","getKeyPath","conditionSelectedRow","selectedKeys","every","key"],"sources":["ValueHelpDelegate-dbg.js"],"mappings":"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","sourceRoot":"valuehelp"}},{"offset":{"line":28173,"column":0},"map":{"version":3,"names":["ValueHelpFilterBar","MacroMetadata","extend","name","namespace","fragment","metadata","stereotype","designtime","properties","id","type","contextPath","hideBasicSearch","defaultValue","enableFallback","p13nMode","useSemanticDateRange","liveMode","_valueList","required","selectionFields","filterConditions","suspendSelection","expandFilterFields","events","search","filterChanged","create","oProps","oControlConfiguration","mSettings","oContext","Log","error","sContextPath","getPath","sEntitySetPath","ModelHelper","getEntitySetPath","oMetaModel","getModel","oConverterContext","oMetaPathContext","metaPath","sMetaPath","oVisualizationObjectPath","getInvolvedDataModelObjects","getConverterContext","undefined","oSelectionFields","getSelectionFields","TemplateModel","createBindingContext","getObject","showDraftEditState","oFilterRestrictionsAnnotation","getExpandFilterFields"],"sourceRoot":"valuehelp","sources":["ValueHelpFilterBar.metadata.ts"],"sourcesContent":["/**\n * @classdesc\n * Building block for creating a FilterBar based on the provided OData V4 metadata.\n *\n *\n * Usage example:\n * <pre>\n * &lt;macro:FilterBar\n *   id=\"SomeID\"\n *   entitySet=\"{entitySet>}\"\n *   hideBasicSearch=\"false\"\n *   p13nMode=[\"Item\",\"Value\"]\n *   listBindingNames = \"sap.fe.tableBinding\"\n *   liveMode=\"true\"\n *   search=\".handlers.onSearch\"\n *   filterChanged=\".handlers.onFiltersChanged\"\n * /&gt;\n * </pre>\n *\n * Building block for creating a FilterBar based on the provided OData V4 metadata.\n * @class sap.fe.macros.FilterBar\n * @hideconstructor\n * @private\n * @experimental\n */\nimport Log from \"sap/base/Log\";\nimport { getExpandFilterFields, getSelectionFields } from \"sap/fe/core/converters/controls/ListReport/FilterBar\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport TemplateModel from \"sap/fe/core/TemplateModel\";\nimport MacroMetadata from \"sap/fe/macros/MacroMetadata\";\n\nconst ValueHelpFilterBar = MacroMetadata.extend(\"sap.fe.macros.valuehelp.ValueHelpFilterBar\", {\n\t/**\n\t * Name of the macro control.\n\t */\n\tname: \"ValueHelpFilterBar\",\n\t/**\n\t * Namespace of the macro control\n\t */\n\tnamespace: \"sap.fe.macros.valuehelp\",\n\t/**\n\t * Fragment source of the macro (optional) - if not set, fragment is generated from namespace and name\n\t */\n\tfragment: \"sap.fe.macros.valuehelp.ValueHelpFilterBar\",\n\n\t/**\n\t * The metadata describing the macro control.\n\t */\n\tmetadata: {\n\t\t/**\n\t\t * Define macro stereotype for documentation\n\t\t */\n\t\tstereotype: \"xmlmacro\",\n\t\t/**\n\t\t * Location of the designtime info\n\t\t */\n\t\tdesigntime: \"sap/fe/macros/valuehelp/ValueHelpFilterBar.designtime\",\n\t\t/**\n\t\t * Properties.\n\t\t */\n\t\tproperties: {\n\t\t\t/**\n\t\t\t * ID of the FilterBar\n\t\t\t */\n\t\t\tid: {\n\t\t\t\ttype: \"string\"\n\t\t\t},\n\t\t\tcontextPath: {\n\t\t\t\ttype: \"sap.ui.model.Context\"\n\t\t\t},\n\t\t\t/**\n\t\t\t * Don't show the basic search field\n\t\t\t */\n\t\t\thideBasicSearch: {\n\t\t\t\ttype: \"boolean\",\n\t\t\t\tdefaultValue: false\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Enables the fallback to show all fields of the EntityType as filter fields if com.sap.vocabularies.UI.v1.SelectionFields are not present\n\t\t\t */\n\t\t\tenableFallback: {\n\t\t\t\ttype: \"boolean\",\n\t\t\t\tdefaultValue: false\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Specifies the personalization options for the filter bar.\n\t\t\t */\n\t\t\tp13nMode: {\n\t\t\t\ttype: \"sap.ui.mdc.FilterBarP13nMode[]\"\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Specifies the Sematic Date Range option for the filter bar.\n\t\t\t */\n\t\t\tuseSemanticDateRange: {\n\t\t\t\ttype: \"boolean\",\n\t\t\t\tdefaultValue: true\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * If set the search will be automatically triggered, when a filter value was changed.\n\t\t\t */\n\t\t\tliveMode: {\n\t\t\t\ttype: \"boolean\",\n\t\t\t\tdefaultValue: false\n\t\t\t},\n\t\t\t/**\n\t\t\t * Temporary workaround only\n\t\t\t * path to valuelist\n\t\t\t */\n\t\t\t_valueList: {\n\t\t\t\ttype: \"sap.ui.model.Context\",\n\t\t\t\trequired: false\n\t\t\t},\n\t\t\t/**\n\t\t\t * selectionFields to be displayed\n\t\t\t */\n\t\t\tselectionFields: {\n\t\t\t\ttype: \"sap.ui.model.Context\",\n\t\t\t\trequired: false\n\t\t\t},\n\t\t\t/**\n\t\t\t * Filter conditions to be applied to the filter bar\n\t\t\t */\n\t\t\tfilterConditions: {\n\t\t\t\ttype: \"string\",\n\t\t\t\trequired: false\n\t\t\t},\n\t\t\t/**\n\t\t\t * If set to <code>true</code>, all search requests are ignored. Once it has been set to <code>false</code>,\n\t\t\t * a search is triggered immediately if one or more search requests have been triggered in the meantime\n\t\t\t * but were ignored based on the setting.\n\t\t\t */\n\t\t\tsuspendSelection: {\n\t\t\t\ttype: \"boolean\",\n\t\t\t\tdefaultValue: false\n\t\t\t},\n\t\t\t/**\n\t\t\t * Determines whether the Show/Hide Filters button is in the state show or hide.\n\t\t\t */\n\t\t\texpandFilterFields: {\n\t\t\t\ttype: \"boolean\",\n\t\t\t\tdefaultValue: true\n\t\t\t}\n\t\t},\n\t\tevents: {\n\t\t\t/**\n\t\t\t * Search handler name\n\t\t\t */\n\t\t\tsearch: {\n\t\t\t\ttype: \"function\"\n\t\t\t},\n\t\t\t/**\n\t\t\t * Filters changed handler name\n\t\t\t */\n\t\t\tfilterChanged: {\n\t\t\t\ttype: \"function\"\n\t\t\t}\n\t\t}\n\t},\n\tcreate: function (oProps: any, oControlConfiguration: any, mSettings: any) {\n\t\tconst oContext = oProps.contextPath;\n\n\t\tif (!oContext) {\n\t\t\tLog.error(\"Context Path not available for FilterBar Macro.\");\n\t\t\treturn;\n\t\t}\n\t\tconst sContextPath = oContext.getPath();\n\t\tconst sEntitySetPath = ModelHelper.getEntitySetPath(sContextPath);\n\t\tconst oMetaModel = oContext.getModel();\n\t\tlet oConverterContext;\n\t\tif (!oProps.selectionFields) {\n\t\t\tconst oMetaPathContext = oProps.metaPath;\n\t\t\tconst sMetaPath = oMetaPathContext && oMetaPathContext.getPath();\n\t\t\tconst oVisualizationObjectPath = getInvolvedDataModelObjects(oContext);\n\t\t\toConverterContext = this.getConverterContext(oVisualizationObjectPath, undefined, mSettings);\n\n\t\t\tconst oSelectionFields = getSelectionFields(oConverterContext, [], sMetaPath).selectionFields;\n\t\t\toProps.selectionFields = new TemplateModel(oSelectionFields, oMetaModel).createBindingContext(\"/\");\n\t\t}\n\n\t\t// TODO: this could be also moved into a central place\n\t\tif (\n\t\t\toMetaModel.getObject(sEntitySetPath + \"@com.sap.vocabularies.Common.v1.DraftRoot\") ||\n\t\t\toMetaModel.getObject(sEntitySetPath + \"@com.sap.vocabularies.Common.v1.DraftNode\")\n\t\t) {\n\t\t\toProps.showDraftEditState = true;\n\t\t}\n\n\t\tconst oFilterRestrictionsAnnotation = oMetaModel.getObject(sEntitySetPath + \"@Org.OData.Capabilities.V1.FilterRestrictions\");\n\t\toProps.expandFilterFields = getExpandFilterFields(oConverterContext, oFilterRestrictionsAnnotation, oProps._valueList);\n\n\t\treturn oProps;\n\t}\n});\nexport default ValueHelpFilterBar;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;EAgCA,MAAMA,kBAAkB,GAAGC,aAAa,CAACC,MAAM,CAAC,4CAA4C,EAAE;IAC7F;AACD;AACA;IACCC,IAAI,EAAE,oBAAoB;IAC1B;AACD;AACA;IACCC,SAAS,EAAE,yBAAyB;IACpC;AACD;AACA;IACCC,QAAQ,EAAE,4CAA4C;IAEtD;AACD;AACA;IACCC,QAAQ,EAAE;MACT;AACF;AACA;MACEC,UAAU,EAAE,UAAU;MACtB;AACF;AACA;MACEC,UAAU,EAAE,uDAAuD;MACnE;AACF;AACA;MACEC,UAAU,EAAE;QACX;AACH;AACA;QACGC,EAAE,EAAE;UACHC,IAAI,EAAE;QACP,CAAC;QACDC,WAAW,EAAE;UACZD,IAAI,EAAE;QACP,CAAC;QACD;AACH;AACA;QACGE,eAAe,EAAE;UAChBF,IAAI,EAAE,SAAS;UACfG,YAAY,EAAE;QACf,CAAC;QAED;AACH;AACA;QACGC,cAAc,EAAE;UACfJ,IAAI,EAAE,SAAS;UACfG,YAAY,EAAE;QACf,CAAC;QAED;AACH;AACA;QACGE,QAAQ,EAAE;UACTL,IAAI,EAAE;QACP,CAAC;QAED;AACH;AACA;QACGM,oBAAoB,EAAE;UACrBN,IAAI,EAAE,SAAS;UACfG,YAAY,EAAE;QACf,CAAC;QAED;AACH;AACA;QACGI,QAAQ,EAAE;UACTP,IAAI,EAAE,SAAS;UACfG,YAAY,EAAE;QACf,CAAC;QACD;AACH;AACA;AACA;QACGK,UAAU,EAAE;UACXR,IAAI,EAAE,sBAAsB;UAC5BS,QAAQ,EAAE;QACX,CAAC;QACD;AACH;AACA;QACGC,eAAe,EAAE;UAChBV,IAAI,EAAE,sBAAsB;UAC5BS,QAAQ,EAAE;QACX,CAAC;QACD;AACH;AACA;QACGE,gBAAgB,EAAE;UACjBX,IAAI,EAAE,QAAQ;UACdS,QAAQ,EAAE;QACX,CAAC;QACD;AACH;AACA;AACA;AACA;QACGG,gBAAgB,EAAE;UACjBZ,IAAI,EAAE,SAAS;UACfG,YAAY,EAAE;QACf,CAAC;QACD;AACH;AACA;QACGU,kBAAkB,EAAE;UACnBb,IAAI,EAAE,SAAS;UACfG,YAAY,EAAE;QACf;MACD,CAAC;MACDW,MAAM,EAAE;QACP;AACH;AACA;QACGC,MAAM,EAAE;UACPf,IAAI,EAAE;QACP,CAAC;QACD;AACH;AACA;QACGgB,aAAa,EAAE;UACdhB,IAAI,EAAE;QACP;MACD;IACD,CAAC;IACDiB,MAAM,EAAE,UAAUC,MAAW,EAAEC,qBAA0B,EAAEC,SAAc,EAAE;MAC1E,MAAMC,QAAQ,GAAGH,MAAM,CAACjB,WAAW;MAEnC,IAAI,CAACoB,QAAQ,EAAE;QACdC,GAAG,CAACC,KAAK,CAAC,iDAAiD,CAAC;QAC5D;MACD;MACA,MAAMC,YAAY,GAAGH,QAAQ,CAACI,OAAO,EAAE;MACvC,MAAMC,cAAc,GAAGC,WAAW,CAACC,gBAAgB,CAACJ,YAAY,CAAC;MACjE,MAAMK,UAAU,GAAGR,QAAQ,CAACS,QAAQ,EAAE;MACtC,IAAIC,iBAAiB;MACrB,IAAI,CAACb,MAAM,CAACR,eAAe,EAAE;QAC5B,MAAMsB,gBAAgB,GAAGd,MAAM,CAACe,QAAQ;QACxC,MAAMC,SAAS,GAAGF,gBAAgB,IAAIA,gBAAgB,CAACP,OAAO,EAAE;QAChE,MAAMU,wBAAwB,GAAGC,2BAA2B,CAACf,QAAQ,CAAC;QACtEU,iBAAiB,GAAG,IAAI,CAACM,mBAAmB,CAACF,wBAAwB,EAAEG,SAAS,EAAElB,SAAS,CAAC;QAE5F,MAAMmB,gBAAgB,GAAGC,kBAAkB,CAACT,iBAAiB,EAAE,EAAE,EAAEG,SAAS,CAAC,CAACxB,eAAe;QAC7FQ,MAAM,CAACR,eAAe,GAAG,IAAI+B,aAAa,CAACF,gBAAgB,EAAEV,UAAU,CAAC,CAACa,oBAAoB,CAAC,GAAG,CAAC;MACnG;;MAEA;MACA,IACCb,UAAU,CAACc,SAAS,CAACjB,cAAc,GAAG,2CAA2C,CAAC,IAClFG,UAAU,CAACc,SAAS,CAACjB,cAAc,GAAG,2CAA2C,CAAC,EACjF;QACDR,MAAM,CAAC0B,kBAAkB,GAAG,IAAI;MACjC;MAEA,MAAMC,6BAA6B,GAAGhB,UAAU,CAACc,SAAS,CAACjB,cAAc,GAAG,+CAA+C,CAAC;MAC5HR,MAAM,CAACL,kBAAkB,GAAGiC,qBAAqB,CAACf,iBAAiB,EAAEc,6BAA6B,EAAE3B,MAAM,CAACV,UAAU,CAAC;MAEtH,OAAOU,MAAM;IACd;EACD,CAAC,CAAC;EAAC,OACY7B,kBAAkB;AAAA"}},{"offset":{"line":28339,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","FilterBar","MetaModelConverter","ModelHelper","TemplateModel","MacroMetadata","getInvolvedDataModelObjects","getSelectionFields","getExpandFilterFields","ValueHelpFilterBar","extend","name","namespace","fragment","metadata","stereotype","designtime","properties","id","type","contextPath","hideBasicSearch","defaultValue","enableFallback","p13nMode","useSemanticDateRange","liveMode","_valueList","required","selectionFields","filterConditions","suspendSelection","expandFilterFields","events","search","filterChanged","create","oProps","oControlConfiguration","mSettings","oContext","error","sContextPath","getPath","sEntitySetPath","getEntitySetPath","oMetaModel","getModel","oConverterContext","oMetaPathContext","metaPath","sMetaPath","oVisualizationObjectPath","this","getConverterContext","undefined","oSelectionFields","createBindingContext","getObject","showDraftEditState","oFilterRestrictionsAnnotation"],"sources":["ValueHelpFilterBar.metadata-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,iEAAO,CAAC,eAAgB,uDAAwD,4CAA6C,kCAAmC,4BAA6B,+BAAgC,SAAUC,EAAKC,EAAWC,EAAoBC,EAAaC,EAAeC,GAC5S,aAEA,IAAIC,EAA8BJ,EAAmBI,4BACrD,IAAIC,EAAqBN,EAAUM,mBACnC,IAAIC,EAAwBP,EAAUO,sBACtC,MAAMC,EAAqBJ,EAAcK,OAAO,6CAA8C,CAI5FC,KAAM,qBAINC,UAAW,0BAIXC,SAAU,6CAIVC,SAAU,CAIRC,WAAY,WAIZC,WAAY,wDAIZC,WAAY,CAIVC,GAAI,CACFC,KAAM,UAERC,YAAa,CACXD,KAAM,wBAKRE,gBAAiB,CACfF,KAAM,UACNG,aAAc,OAKhBC,eAAgB,CACdJ,KAAM,UACNG,aAAc,OAKhBE,SAAU,CACRL,KAAM,kCAKRM,qBAAsB,CACpBN,KAAM,UACNG,aAAc,MAKhBI,SAAU,CACRP,KAAM,UACNG,aAAc,OAMhBK,WAAY,CACVR,KAAM,uBACNS,SAAU,OAKZC,gBAAiB,CACfV,KAAM,uBACNS,SAAU,OAKZE,iBAAkB,CAChBX,KAAM,SACNS,SAAU,OAOZG,iBAAkB,CAChBZ,KAAM,UACNG,aAAc,OAKhBU,mBAAoB,CAClBb,KAAM,UACNG,aAAc,OAGlBW,OAAQ,CAINC,OAAQ,CACNf,KAAM,YAKRgB,cAAe,CACbhB,KAAM,cAIZiB,OAAQ,SAAUC,EAAQC,EAAuBC,GAC/C,MAAMC,EAAWH,EAAOjB,YACxB,IAAKoB,EAAU,CACbxC,EAAIyC,MAAM,mDACV,MACF,CACA,MAAMC,EAAeF,EAASG,UAC9B,MAAMC,EAAiBzC,EAAY0C,iBAAiBH,GACpD,MAAMI,EAAaN,EAASO,WAC5B,IAAIC,EACJ,IAAKX,EAAOR,gBAAiB,CAC3B,MAAMoB,EAAmBZ,EAAOa,SAChC,MAAMC,EAAYF,GAAoBA,EAAiBN,UACvD,MAAMS,EAA2B9C,EAA4BkC,GAC7DQ,EAAoBK,KAAKC,oBAAoBF,EAA0BG,UAAWhB,GAClF,MAAMiB,EAAmBjD,EAAmByC,EAAmB,GAAIG,GAAWtB,gBAC9EQ,EAAOR,gBAAkB,IAAIzB,EAAcoD,EAAkBV,GAAYW,qBAAqB,IAChG,CAGA,GAAIX,EAAWY,UAAUd,EAAiB,8CAAgDE,EAAWY,UAAUd,EAAiB,6CAA8C,CAC5KP,EAAOsB,mBAAqB,IAC9B,CACA,MAAMC,EAAgCd,EAAWY,UAAUd,EAAiB,iDAC5EP,EAAOL,mBAAqBxB,EAAsBwC,EAAmBY,EAA+BvB,EAAOV,YAC3G,OAAOU,CACT,IAEF,OAAO5B,CACT,EAAG","sourceRoot":"valuehelp"}},{"offset":{"line":28344,"column":0},"map":{"version":3,"names":["InteractiveChartHelper","getChartDisplayedValue","value","oValueFormat","sMetaPath","sInfoPath","generate","ScaleFactor","$Decimal","NumberOfFractionalDigits","getChartValue","oValue","getChart","oMetaPath","oModel","getModel","oPresentationVariant","getObject","getPath","aVisualizations","Visualizations","i","length","$AnnotationPath","indexOf","sCollectionPath","ODataModelAnnotationHelper","getNavigationPath","createBindingContext","undefined","getChartLabel","_getMeasurePath","oChartAnnotation","bCustomAggregate","sMeasurePath","DynamicMeasures","Measures","getAggregationBinding","oInterface","oChartAnnotations","oCollection","oTextAssociation","oDimensionType","aSortOrder","selectionVariantAnnotation","oAggregation","bUoMHasCustomAggregate","aParameters","oFilterBarContext","bDraftSupported","sChartMeasure","sEntityType","sDimension","Dimensions","$PropertyPath","aFilters","sAggregationExpression","sUOMExpression","filterConditions","sBindingPath","sCollectionName","$kind","vUOM","getUoM","sEntitySetPath","getInterface","oMetaModel","push","operator","value1","value2","path","isParameter","getFiltersConditionsFromSelectionVariant","VisualFilterUtils","getCustomConditions","bind","sPath","aConditions","forEach","oCondition","aParams","convertedFilterConditions","convertFilterCondions","parameterProperties","CommonUtils","getParameterInfo","parameter","oProperty","sEntityPath","split","oPropertyContext","oFormatOptions","JSTokenizer","parseJS","FilterFieldHelper","formatOptions","context","oConstraints","constraints","typeConfig","TypeUtil","getTypeConfig","$Type","oConditionInternal","mInternalParameterCondition","ConditionConverter","toType","sEdmType","sValue","encodeURIComponent","ODataUtils","formatLiteral","values","replaceAll","sParameterEntitySet","slice","lastIndexOf","sTargetNavigation","substring","toString","$Path","AggregatableProperty","AggregationMethod","sTextAssociationExpression","sFilterExpression","JSON","stringify","getSortOrder","getMaxItems","sDimensionType","sSortPropertyName","ChartType","$EnumMember","DynamicProperty","Name","Property","Descending","getColorBinding","iContext","oDataPoint","oDimension","oDimensionPath","aValueCriticality","targetObject","Criticality","buildExpressionForCriticalityColorMicroChart","CriticalityCalculation","oDirection","ImprovementDirection","oDataPointValue","Value","oDeviationRangeLowValue","DeviationRangeLowValue","oToleranceRangeLowValue","ToleranceRangeLowValue","oAcceptanceRangeLowValue","AcceptanceRangeLowValue","oAcceptanceRangeHighValue","AcceptanceRangeHighValue","oToleranceRangeHighValue","ToleranceRangeHighValue","oDeviationRangeHighValue","DeviationRangeHighValue","CommonHelper","getCriticalityCalculationBinding","getValueCriticality","getScaleUoMTitle","sSeperator","bIsToolTip","sScaleFactor","fixedInteger","NumberFormat","getIntegerInstance","style","showScale","shortRefNumber","sScale","getScale","sExpression","getMeasureDimensionTitle","sMeasureLabel","sMeasurePathExpression","sDimensionPath","sDimensionLabel","getLabel","annotations","Common","Label","ResourceModel","getText","sProperty","getToolTip","bRenderLineChart","sChartType","sMeasureDimensionToolTip","escapeSingleQuotes","sScaleUOMTooltip","isCustomData","vISOCurrency","vUnit","sAggregatablePropertyPath","_getUOM","sAnnotation","sUOM","oUOM","getScaleFactor","getUoMVisiblity","bShowError","getInParameterFiltersBinding","aInParameters","aParts","sPaths","oInParameter","localDataProperty","join","getfilterCountBinding","$target","name","requiresIContext"],"sourceRoot":"visualfilters","sources":["InteractiveChartHelper.ts"],"sourcesContent":["import JSTokenizer from \"sap/base/util/JSTokenizer\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport VisualFilterUtils from \"sap/fe/core/controls/filterbar/utils/VisualFilterUtils\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport { buildExpressionForCriticalityColorMicroChart } from \"sap/fe/core/templating/CriticalityFormatters\";\nimport { getFiltersConditionsFromSelectionVariant } from \"sap/fe/core/templating/FilterHelper\";\nimport TypeUtil from \"sap/fe/core/type/TypeUtil\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport FilterFieldHelper from \"sap/fe/macros/filter/FilterFieldHelper\";\nimport ResourceModel from \"sap/fe/macros/ResourceModel\";\nimport NumberFormat from \"sap/ui/core/format/NumberFormat\";\nimport ConditionConverter from \"sap/ui/mdc/condition/ConditionConverter\";\nimport ODataModelAnnotationHelper from \"sap/ui/model/odata/v4/AnnotationHelper\";\nimport ODataUtils from \"sap/ui/model/odata/v4/ODataUtils\";\n\nconst InteractiveChartHelper = {\n\tgetChartDisplayedValue: function (value: any, oValueFormat: any, sMetaPath: any) {\n\t\t//var sType = \"\" + value + \"@odata.type\";\n\t\tconst sInfoPath = generate([sMetaPath]);\n\t\treturn (\n\t\t\t\"{parts:[{path:'\" +\n\t\t\tvalue +\n\t\t\t\"',type:'sap.ui.model.odata.type.Decimal', constraints:{'nullable':false}}\" +\n\t\t\t(oValueFormat && oValueFormat.ScaleFactor\n\t\t\t\t? \",{value:'\" + oValueFormat.ScaleFactor.$Decimal + \"'}\"\n\t\t\t\t: \",{path:'internal>scalefactorNumber/\" + sInfoPath + \"'}\") +\n\t\t\t(oValueFormat && oValueFormat.NumberOfFractionalDigits\n\t\t\t\t? \",{value:'\" + oValueFormat.NumberOfFractionalDigits + \"'}\"\n\t\t\t\t: \",{value:'0'}\") +\n\t\t\t\",{path:'internal>currency/\" +\n\t\t\tsInfoPath +\n\t\t\t\"'}\" +\n\t\t\t\",{path:'\" +\n\t\t\tvalue +\n\t\t\t\"',type:'sap.ui.model.odata.type.String', constraints:{'nullable':false}}\" +\n\t\t\t\"], formatter:'VisualFilterRuntime.scaleVisualFilterValue'}\"\n\t\t); //+ sType.split('#').length ? sType.split('#')[1] : 'Decimal' + \"}\";\n\t},\n\tgetChartValue: function (oValue: any) {\n\t\treturn \"{path:'\" + oValue + \"',type:'sap.ui.model.odata.type.Decimal', constraints:{'nullable':false}}\";\n\t},\n\tgetChart: function (oMetaPath: any) {\n\t\tconst oModel = oMetaPath.getModel();\n\t\tconst oPresentationVariant = oModel.getObject(oMetaPath.getPath());\n\t\tconst aVisualizations = oPresentationVariant.Visualizations;\n\t\tfor (let i = 0; i < aVisualizations.length; i++) {\n\t\t\tif (aVisualizations[i].$AnnotationPath.indexOf(\"com.sap.vocabularies.UI.v1.Chart\") > -1) {\n\t\t\t\tconst sCollectionPath = ODataModelAnnotationHelper.getNavigationPath(oMetaPath.getPath());\n\t\t\t\treturn oModel.createBindingContext(sCollectionPath + \"/\" + aVisualizations[i].$AnnotationPath);\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t},\n\tgetChartLabel: function (...args: any[]) {\n\t\treturn args[2];\n\t},\n\t/**\n\t * Build the expression for measure path based on whether CustomAggregate/Dynamic/TransformationAggregate measures exists.\n\t *\n\t * @param oChartAnnotation Chart configurations.\n\t * @param bCustomAggregate Indicator for existence for custom aggregates in chart measures.\n\t * @returns Measure Path\n\t */\n\t_getMeasurePath: function (oChartAnnotation: any, bCustomAggregate: Boolean): String {\n\t\tlet sMeasurePath;\n\t\tif (bCustomAggregate) {\n\t\t\tsMeasurePath = \"/Measures/0/$PropertyPath\";\n\t\t}\n\t\tif (oChartAnnotation.DynamicMeasures && oChartAnnotation.DynamicMeasures.length > 0) {\n\t\t\tsMeasurePath = \"/DynamicMeasures/0/$AnnotationPath/AggregatableProperty/$PropertyPath\";\n\t\t} else if (!bCustomAggregate && oChartAnnotation.Measures && oChartAnnotation.Measures.length > 0) {\n\t\t\tsMeasurePath = \"/Measures/0/$PropertyPath\";\n\t\t}\n\t\treturn sMeasurePath as String;\n\t},\n\tgetAggregationBinding: function (\n\t\toInterface: any,\n\t\toChartAnnotations: any,\n\t\toCollection: any,\n\t\toTextAssociation: any,\n\t\toDimensionType: any,\n\t\taSortOrder: any,\n\t\tselectionVariantAnnotation: any,\n\t\tbCustomAggregate: any,\n\t\toAggregation: any,\n\t\tbUoMHasCustomAggregate: any,\n\t\taParameters: any,\n\t\toFilterBarContext: any,\n\t\tbDraftSupported: any,\n\t\tsChartMeasure: any\n\t) {\n\t\tconst sEntityType = oFilterBarContext ? oFilterBarContext.getPath() : \"\";\n\t\tconst sDimension = oChartAnnotations.Dimensions[0].$PropertyPath;\n\t\tconst aFilters: any[] = [];\n\t\tlet sAggregationExpression, sUOMExpression, filterConditions, sBindingPath;\n\t\tlet sCollectionName =\n\t\t\toCollection.$kind == \"NavigationProperty\"\n\t\t\t\t? oInterface.getPath(1)\n\t\t\t\t: (oCollection.$kind == \"EntitySet\" ? \"/\" : \"\") + oInterface.getModel(1).getObject(`${oInterface.getPath(1)}@sapui.name`);\n\t\tconst vUOM = InteractiveChartHelper.getUoM(oInterface, oChartAnnotations, oCollection, undefined, bCustomAggregate, oAggregation);\n\t\tconst sEntitySetPath = oInterface.getInterface(1).getPath(),\n\t\t\toMetaModel = oInterface.getInterface(1).getModel();\n\t\tif (bDraftSupported) {\n\t\t\taFilters.push({\n\t\t\t\toperator: \"EQ\",\n\t\t\t\tvalue1: \"true\",\n\t\t\t\tvalue2: null,\n\t\t\t\tpath: \"IsActiveEntity\",\n\t\t\t\tisParameter: true\n\t\t\t});\n\t\t}\n\t\tif (selectionVariantAnnotation && selectionVariantAnnotation.getObject()) {\n\t\t\tfilterConditions = getFiltersConditionsFromSelectionVariant(\n\t\t\t\tsEntitySetPath,\n\t\t\t\toMetaModel,\n\t\t\t\tselectionVariantAnnotation.getObject(),\n\t\t\t\tVisualFilterUtils.getCustomConditions.bind(VisualFilterUtils)\n\t\t\t);\n\t\t\tfor (const sPath in filterConditions) {\n\t\t\t\tconst aConditions = filterConditions[sPath];\n\t\t\t\taConditions.forEach(function (oCondition: any) {\n\t\t\t\t\tif (!oCondition.isParameter) {\n\t\t\t\t\t\taFilters.push(oCondition);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tif (sEntityType !== `${sCollectionName}/` && aParameters && aParameters.length && filterConditions) {\n\t\t\tconst aParams = [];\n\t\t\tconst convertedFilterConditions = VisualFilterUtils.convertFilterCondions(filterConditions);\n\t\t\tconst parameterProperties = CommonUtils.getParameterInfo(oMetaModel, sCollectionName).parameterProperties;\n\t\t\tif (parameterProperties) {\n\t\t\t\tfor (const i in aParameters) {\n\t\t\t\t\tconst parameter = aParameters[i];\n\t\t\t\t\tconst oProperty = parameterProperties[parameter];\n\t\t\t\t\tconst sEntityPath = sEntitySetPath.split(\"/\")[1];\n\t\t\t\t\tconst oPropertyContext = oMetaModel.createBindingContext(`/${sEntityPath}/${parameter}`);\n\t\t\t\t\tconst oFormatOptions = JSTokenizer.parseJS(\n\t\t\t\t\t\tFilterFieldHelper.formatOptions(oProperty, { context: oPropertyContext }) || \"{}\"\n\t\t\t\t\t);\n\t\t\t\t\tconst oConstraints = JSTokenizer.parseJS(\n\t\t\t\t\t\tFilterFieldHelper.constraints(oProperty, { context: oPropertyContext }) || \"{}\"\n\t\t\t\t\t);\n\t\t\t\t\tconst typeConfig = TypeUtil.getTypeConfig(oProperty.$Type, oFormatOptions, oConstraints);\n\t\t\t\t\tconst oCondition = convertedFilterConditions[parameter];\n\t\t\t\t\tconst oConditionInternal = oCondition ? oCondition[0] : undefined;\n\t\t\t\t\tif (oConditionInternal) {\n\t\t\t\t\t\tconst mInternalParameterCondition = ConditionConverter.toType(oConditionInternal, typeConfig, TypeUtil as any);\n\t\t\t\t\t\tconst sEdmType = oProperty.$Type;\n\t\t\t\t\t\tlet sValue = encodeURIComponent(ODataUtils.formatLiteral(mInternalParameterCondition.values[0], sEdmType));\n\t\t\t\t\t\tsValue = (sValue as any).replaceAll(\"'\", \"\\\\'\");\n\t\t\t\t\t\taParams.push(`${parameter}=${sValue}`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst sParameterEntitySet = sCollectionName.slice(0, sCollectionName.lastIndexOf(\"/\"));\n\t\t\tconst sTargetNavigation = sCollectionName.substring(sCollectionName.lastIndexOf(\"/\") + 1);\n\t\t\t// create parameter context\n\t\t\tsBindingPath = `${sParameterEntitySet}(${aParams.toString()})/${sTargetNavigation}`;\n\t\t\tsCollectionName = sBindingPath;\n\t\t}\n\t\tif (bCustomAggregate) {\n\t\t\t//custom aggregate for a currency or unit of measure corresponding to this aggregatable property\n\t\t\tif (bUoMHasCustomAggregate) {\n\t\t\t\tsAggregationExpression = vUOM && vUOM.$Path ? `{ 'unit' : '${vUOM.$Path}' }` : \"{}\";\n\t\t\t\tsUOMExpression = \"\";\n\t\t\t} else {\n\t\t\t\tsAggregationExpression = \"{}\";\n\t\t\t\tsUOMExpression = vUOM && vUOM.$Path ? `, '${vUOM.$Path}' : {}` : \"\";\n\t\t\t}\n\t\t} else if (\n\t\t\toAggregation &&\n\t\t\toAggregation.AggregatableProperty &&\n\t\t\toAggregation.AggregatableProperty.value &&\n\t\t\toAggregation.AggregationMethod\n\t\t) {\n\t\t\tsAggregationExpression =\n\t\t\t\t\"{ 'name' : '\" + oAggregation.AggregatableProperty.value + \"', 'with' : '\" + oAggregation.AggregationMethod + \"'}\";\n\t\t\tsUOMExpression = vUOM && vUOM.$Path ? \", '\" + vUOM.$Path + \"' : {}\" : \"\";\n\t\t}\n\t\tconst sTextAssociationExpression = oTextAssociation ? \"' : { 'additionally' : ['\" + oTextAssociation.$Path + \"'] }\" : \"' : { }\";\n\t\tconst sFilterExpression = JSON.stringify(aFilters);\n\t\treturn (\n\t\t\t\"{path: '\" +\n\t\t\tsCollectionName +\n\t\t\t\"', templateShareable: true, suspended : true, 'filters' : \" +\n\t\t\tsFilterExpression +\n\t\t\t\",'parameters' : {\" +\n\t\t\tInteractiveChartHelper.getSortOrder(oInterface, oMetaModel, oChartAnnotations, oDimensionType, aSortOrder, sChartMeasure) +\n\t\t\t\", '$$aggregation' : {'aggregate' : {'\" +\n\t\t\tsChartMeasure +\n\t\t\t\"' : \" +\n\t\t\tsAggregationExpression +\n\t\t\t\"},'group' : {'\" +\n\t\t\tsDimension +\n\t\t\tsTextAssociationExpression +\n\t\t\tsUOMExpression +\n\t\t\t\"} } }\" +\n\t\t\tInteractiveChartHelper.getMaxItems(oChartAnnotations) +\n\t\t\t\"}\"\n\t\t);\n\t},\n\tgetSortOrder: function (\n\t\toInterface: any,\n\t\toMetaModel: any,\n\t\toChartAnnotations: any,\n\t\tsDimensionType: any,\n\t\taSortOrder: any,\n\t\tsChartMeasure: any\n\t) {\n\t\tlet sSortPropertyName;\n\t\tif (\n\t\t\toChartAnnotations.ChartType.$EnumMember === \"com.sap.vocabularies.UI.v1.ChartType/Donut\" ||\n\t\t\toChartAnnotations.ChartType.$EnumMember === \"com.sap.vocabularies.UI.v1.ChartType/Bar\"\n\t\t) {\n\t\t\tif (aSortOrder && aSortOrder.length) {\n\t\t\t\tif (aSortOrder[0].DynamicProperty) {\n\t\t\t\t\tsSortPropertyName = oMetaModel.getObject(\n\t\t\t\t\t\toInterface.getPath(0).split(\"@\")[0] + aSortOrder[0].DynamicProperty.$AnnotationPath\n\t\t\t\t\t).Name;\n\t\t\t\t} else {\n\t\t\t\t\tsSortPropertyName = aSortOrder[0].Property.$PropertyPath;\n\t\t\t\t}\n\t\t\t\tif (sSortPropertyName === sChartMeasure) {\n\t\t\t\t\treturn \"'$orderby' : '\" + sChartMeasure + (aSortOrder[0].Descending ? \" desc'\" : \"'\");\n\t\t\t\t}\n\t\t\t\treturn \"'$orderby' : '\" + sChartMeasure + \" desc'\";\n\t\t\t}\n\t\t\treturn \"'$orderby' : '\" + sChartMeasure + \" desc'\";\n\t\t} else if (sDimensionType === \"Edm.Date\" || sDimensionType === \"Edm.Time\" || sDimensionType === \"Edm.DateTimeOffset\") {\n\t\t\treturn \"'$orderby' : '\" + oChartAnnotations.Dimensions[0].$PropertyPath + \"'\";\n\t\t} else if (\n\t\t\taSortOrder &&\n\t\t\taSortOrder.length &&\n\t\t\taSortOrder[0].Property.$PropertyPath === oChartAnnotations.Dimensions[0].$PropertyPath\n\t\t) {\n\t\t\treturn \"'$orderby' : '\" + aSortOrder[0].Property.$PropertyPath + (aSortOrder[0].Descending ? \" desc'\" : \"'\");\n\t\t} else {\n\t\t\treturn \"'$orderby' : '\" + oChartAnnotations.Dimensions[0].$PropertyPath + \"'\";\n\t\t}\n\t},\n\tgetMaxItems: function (oChartAnnotations: any) {\n\t\tif (oChartAnnotations.ChartType.$EnumMember === \"com.sap.vocabularies.UI.v1.ChartType/Bar\") {\n\t\t\treturn \",'startIndex' : 0,'length' : 3\";\n\t\t} else if (oChartAnnotations.ChartType.$EnumMember === \"com.sap.vocabularies.UI.v1.ChartType/Line\") {\n\t\t\treturn \",'startIndex' : 0,'length' : 6\";\n\t\t} else {\n\t\t\treturn \"\";\n\t\t}\n\t},\n\tgetColorBinding: function (iContext: any, oDataPoint: any, oDimension: any) {\n\t\tconst oModel = iContext.getModel(0);\n\t\tconst oDimensionPath = iContext.getPath(1);\n\t\tconst aValueCriticality = oModel.getObject(`${oDimensionPath}$PropertyPath@com.sap.vocabularies.UI.v1.ValueCriticality`);\n\t\toDataPoint = oDataPoint.targetObject;\n\t\tif (oDataPoint.Criticality) {\n\t\t\treturn buildExpressionForCriticalityColorMicroChart(oDataPoint);\n\t\t} else if (oDataPoint.CriticalityCalculation) {\n\t\t\tconst oDirection =\n\t\t\t\toDataPoint.CriticalityCalculation.ImprovementDirection &&\n\t\t\t\toDataPoint.CriticalityCalculation.ImprovementDirection.$EnumMember;\n\t\t\tconst oDataPointValue = ODataModelAnnotationHelper.value(oDataPoint.Value, { context: iContext.getInterface(0) });\n\t\t\tconst oDeviationRangeLowValue = ODataModelAnnotationHelper.value(oDataPoint.CriticalityCalculation.DeviationRangeLowValue, {\n\t\t\t\tcontext: iContext.getInterface(0)\n\t\t\t});\n\t\t\tconst oToleranceRangeLowValue = ODataModelAnnotationHelper.value(oDataPoint.CriticalityCalculation.ToleranceRangeLowValue, {\n\t\t\t\tcontext: iContext.getInterface(0)\n\t\t\t});\n\t\t\tconst oAcceptanceRangeLowValue = ODataModelAnnotationHelper.value(oDataPoint.CriticalityCalculation.AcceptanceRangeLowValue, {\n\t\t\t\tcontext: iContext.getInterface(0)\n\t\t\t});\n\t\t\tconst oAcceptanceRangeHighValue = ODataModelAnnotationHelper.value(oDataPoint.CriticalityCalculation.AcceptanceRangeHighValue, {\n\t\t\t\tcontext: iContext.getInterface(0)\n\t\t\t});\n\t\t\tconst oToleranceRangeHighValue = ODataModelAnnotationHelper.value(oDataPoint.CriticalityCalculation.ToleranceRangeHighValue, {\n\t\t\t\tcontext: iContext.getInterface(0)\n\t\t\t});\n\t\t\tconst oDeviationRangeHighValue = ODataModelAnnotationHelper.value(oDataPoint.CriticalityCalculation.DeviationRangeHighValue, {\n\t\t\t\tcontext: iContext.getInterface(0)\n\t\t\t});\n\t\t\treturn CommonHelper.getCriticalityCalculationBinding(\n\t\t\t\toDirection,\n\t\t\t\toDataPointValue,\n\t\t\t\toDeviationRangeLowValue,\n\t\t\t\toToleranceRangeLowValue,\n\t\t\t\toAcceptanceRangeLowValue,\n\t\t\t\toAcceptanceRangeHighValue,\n\t\t\t\toToleranceRangeHighValue,\n\t\t\t\toDeviationRangeHighValue\n\t\t\t);\n\t\t} else if (aValueCriticality && aValueCriticality.length) {\n\t\t\treturn CommonHelper.getValueCriticality(oDimension.$PropertyPath, aValueCriticality);\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t},\n\tgetScaleUoMTitle: function (\n\t\toInterface: any,\n\t\toChartAnnotation: any,\n\t\toCollection: any,\n\t\tsMetaPath: any,\n\t\tbCustomAggregate: any,\n\t\toAggregation: any,\n\t\tsSeperator?: any,\n\t\tbIsToolTip?: any\n\t) {\n\t\tconst oModel = oInterface.getModel(0);\n\t\tconst sScaleFactor = oModel.getObject(\n\t\t\t`${oInterface.getPath(0)}/MeasureAttributes/0/DataPoint/$AnnotationPath/ValueFormat/ScaleFactor/$Decimal`\n\t\t);\n\t\tconst sInfoPath = generate([sMetaPath]);\n\t\tconst fixedInteger = NumberFormat.getIntegerInstance({\n\t\t\tstyle: \"short\",\n\t\t\tshowScale: false,\n\t\t\tshortRefNumber: sScaleFactor\n\t\t});\n\t\tlet sScale = (fixedInteger as any).getScale();\n\t\tlet vUOM = InteractiveChartHelper.getUoM(oInterface, oChartAnnotation, oCollection, undefined, bCustomAggregate, oAggregation);\n\t\tvUOM = vUOM && (vUOM.$Path ? \"${internal>uom/\" + sInfoPath + \"}\" : \"'\" + vUOM + \"'\");\n\t\tsScale = sScale ? \"'\" + sScale + \"'\" : \"${internal>scalefactor/\" + sInfoPath + \"}\";\n\t\tif (!sSeperator) {\n\t\t\tsSeperator = \"|\";\n\t\t}\n\t\tsSeperator = vUOM ? \"' \" + sSeperator + \" ' + \" : \"\";\n\t\tconst sExpression = sScale && vUOM ? sSeperator + sScale + \" + ' ' + \" + vUOM : sSeperator + (sScale || vUOM);\n\t\treturn bIsToolTip ? sExpression : \"{= \" + sExpression + \"}\";\n\t},\n\tgetMeasureDimensionTitle: function (\n\t\toInterface: any,\n\t\toChartAnnotation: any,\n\t\toCollection: any,\n\t\tbCustomAggregate: any,\n\t\toAggregation: any\n\t) {\n\t\tconst oModel = oInterface.getModel(0);\n\t\tlet sMeasureLabel;\n\t\tconst sMeasurePathExpression = InteractiveChartHelper._getMeasurePath(oChartAnnotation, bCustomAggregate);\n\t\tconst sMeasurePath = oModel.getObject(`${oInterface.getPath(0)}` + sMeasurePathExpression);\n\t\tconst sDimensionPath = oModel.getObject(`${oInterface.getPath(0)}/Dimensions/0/$PropertyPath`);\n\t\tlet sDimensionLabel = InteractiveChartHelper.getLabel(oModel, oInterface, \"Dimensions\");\n\t\tif (!bCustomAggregate && oAggregation) {\n\t\t\t// check if the label is part of aggregated properties (Transformation aggregates)\n\t\t\tsMeasureLabel = oAggregation.annotations && oAggregation.annotations.Common && oAggregation.annotations.Common.Label;\n\t\t\tif (sMeasureLabel === undefined) {\n\t\t\t\tsMeasureLabel = sMeasureLabel = InteractiveChartHelper.getLabel(oModel, oInterface, \"Measures\");\n\t\t\t}\n\t\t} else {\n\t\t\tsMeasureLabel = InteractiveChartHelper.getLabel(oModel, oInterface, \"Measures\");\n\t\t}\n\t\tif (sMeasureLabel === undefined) {\n\t\t\tsMeasureLabel = sMeasurePath;\n\t\t}\n\t\tif (sDimensionLabel === undefined) {\n\t\t\tsDimensionLabel = sDimensionPath;\n\t\t}\n\t\treturn (\n\t\t\tResourceModel &&\n\t\t\tResourceModel.getText(\"M_INTERACTIVE_CHART_HELPER_VISUALFILTER_MEASURE_DIMENSION_TITLE\", [sMeasureLabel, sDimensionLabel])\n\t\t);\n\t},\n\tgetLabel: function (oModel: any, oInterface: any, sProperty: any) {\n\t\treturn oModel.getObject(`${oInterface.getPath(0)}/${sProperty}/0/$PropertyPath@com.sap.vocabularies.Common.v1.Label`);\n\t},\n\n\tgetToolTip: function (\n\t\toInterface: any,\n\t\toChartAnnotation: any,\n\t\toCollection: any,\n\t\tsMetaPath: any,\n\t\tbCustomAggregate: any,\n\t\toAggregation: any,\n\t\tbRenderLineChart: any\n\t) {\n\t\tconst sChartType = oChartAnnotation && oChartAnnotation[\"ChartType\"];\n\n\t\tlet sMeasureDimensionToolTip = InteractiveChartHelper.getMeasureDimensionTitle(\n\t\t\toInterface,\n\t\t\toChartAnnotation,\n\t\t\toCollection,\n\t\t\tbCustomAggregate,\n\t\t\toAggregation\n\t\t);\n\t\tsMeasureDimensionToolTip = CommonHelper.escapeSingleQuotes(sMeasureDimensionToolTip);\n\t\tif (bRenderLineChart === \"false\" && sChartType === \"UI.ChartType/Line\") {\n\t\t\treturn `{= '${sMeasureDimensionToolTip}'}`;\n\t\t}\n\n\t\tconst sSeperator = ResourceModel.getText(\"M_INTERACTIVE_CHART_HELPER_VISUALFILTER_TOOLTIP_SEPERATOR\");\n\t\tconst sInfoPath = generate([sMetaPath]);\n\t\tconst sScaleUOMTooltip = InteractiveChartHelper.getScaleUoMTitle(\n\t\t\toInterface,\n\t\t\toChartAnnotation,\n\t\t\toCollection,\n\t\t\tsInfoPath,\n\t\t\tbCustomAggregate,\n\t\t\toAggregation,\n\t\t\tsSeperator,\n\t\t\ttrue\n\t\t);\n\t\treturn \"{= '\" + sMeasureDimensionToolTip + (sScaleUOMTooltip ? \"' + \" + sScaleUOMTooltip : \"'\") + \"}\";\n\t},\n\tgetUoM: function (\n\t\toInterface: any,\n\t\toChartAnnotation: any,\n\t\toCollection: any,\n\t\tisCustomData: any,\n\t\tbCustomAggregate: any,\n\t\toAggregation: any\n\t) {\n\t\tconst oModel = oInterface.getModel(0);\n\t\tconst sMeasurePathExpression = InteractiveChartHelper._getMeasurePath(oChartAnnotation, bCustomAggregate);\n\t\tconst vISOCurrency = oModel.getObject(`${oInterface.getPath(0)}` + sMeasurePathExpression + `@Org.OData.Measures.V1.ISOCurrency`);\n\t\tconst vUnit = oModel.getObject(`${oInterface.getPath(0)}` + sMeasurePathExpression + `@Org.OData.Measures.V1.Unit`);\n\t\tconst sMeasurePath = oModel.getObject(`${oInterface.getPath(0)}` + sMeasurePathExpression);\n\t\tlet sAggregatablePropertyPath: any;\n\t\tif (!bCustomAggregate && oAggregation) {\n\t\t\tsAggregatablePropertyPath = oAggregation.AggregatableProperty && oAggregation.AggregatableProperty.value;\n\t\t} else {\n\t\t\tsAggregatablePropertyPath = sMeasurePath;\n\t\t}\n\t\tconst _getUOM = function (vUOM: any, sAnnotation: any) {\n\t\t\tconst sUOM = sAnnotation && sAnnotation.split(\"V1.\")[1];\n\t\t\tconst oUOM: any = {};\n\t\t\tif (vUOM) {\n\t\t\t\t// check if the UOM is part of Measure annotations(Custom aggregates)\n\t\t\t\toUOM[sUOM] = vUOM;\n\t\t\t\treturn isCustomData && vUOM.$Path ? JSON.stringify(oUOM) : vUOM;\n\t\t\t} else if (sAggregatablePropertyPath) {\n\t\t\t\t// check if the UOM is part of base property annotations(Transformation aggregates)\n\t\t\t\tvUOM = oInterface.getModel(1).getObject(`${oInterface.getPath(1)}/${sAggregatablePropertyPath}${sAnnotation}`);\n\t\t\t\toUOM[sUOM] = vUOM;\n\t\t\t\treturn vUOM && isCustomData && vUOM.$Path ? JSON.stringify(oUOM) : vUOM;\n\t\t\t}\n\t\t};\n\t\treturn _getUOM(vISOCurrency, \"@Org.OData.Measures.V1.ISOCurrency\") || _getUOM(vUnit, \"@Org.OData.Measures.V1.Unit\");\n\t},\n\tgetScaleFactor: function (oValueFormat: any) {\n\t\tif (oValueFormat && oValueFormat.ScaleFactor) {\n\t\t\treturn oValueFormat.ScaleFactor.$Decimal;\n\t\t}\n\t\treturn undefined;\n\t},\n\tgetUoMVisiblity: function (oChartAnnotation: any, bShowError: any) {\n\t\tconst sChartType = oChartAnnotation && oChartAnnotation[\"ChartType\"];\n\t\tif (bShowError) {\n\t\t\treturn false;\n\t\t} else if (!(sChartType === \"UI.ChartType/Bar\" || sChartType === \"UI.ChartType/Line\")) {\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t},\n\tgetInParameterFiltersBinding: function (aInParameters: any) {\n\t\tif (aInParameters.length > 0) {\n\t\t\tconst aParts: any[] = [];\n\t\t\tlet sPaths = \"\";\n\t\t\taInParameters.forEach(function (oInParameter: any) {\n\t\t\t\tif (oInParameter.localDataProperty) {\n\t\t\t\t\taParts.push(`{path:'$filters>/conditions/${oInParameter.localDataProperty}'}`);\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (aParts.length > 0) {\n\t\t\t\tsPaths = aParts.join();\n\t\t\t\treturn `{parts:[${sPaths}], formatter:'sap.fe.macros.visualfilters.VisualFilterRuntime.getFiltersFromConditions'}`;\n\t\t\t} else {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t},\n\n\tgetfilterCountBinding: function (oChartAnnotation: any) {\n\t\tconst sDimension = oChartAnnotation.Dimensions[0]?.$target?.name;\n\t\treturn (\n\t\t\t\"{path:'$filters>/conditions/\" + sDimension + \"', formatter:'sap.fe.macros.visualfilters.VisualFilterRuntime.getFilterCounts'}\"\n\t\t);\n\t}\n};\n(InteractiveChartHelper.getColorBinding as any).requiresIContext = true;\n(InteractiveChartHelper.getAggregationBinding as any).requiresIContext = true;\n(InteractiveChartHelper.getUoM as any).requiresIContext = true;\n(InteractiveChartHelper.getScaleUoMTitle as any).requiresIContext = true;\n(InteractiveChartHelper.getToolTip as any).requiresIContext = true;\n(InteractiveChartHelper.getMeasureDimensionTitle as any).requiresIContext = true;\n\nexport default InteractiveChartHelper;\n"],"mappings":"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"}},{"offset":{"line":28683,"column":0},"map":{"version":3,"names":["sap","ui","define","JSTokenizer","CommonUtils","VisualFilterUtils","StableIdHelper","CriticalityFormatters","FilterHelper","TypeUtil","CommonHelper","FilterFieldHelper","ResourceModel","NumberFormat","ConditionConverter","ODataModelAnnotationHelper","ODataUtils","getFiltersConditionsFromSelectionVariant","buildExpressionForCriticalityColorMicroChart","generate","InteractiveChartHelper","getChartDisplayedValue","value","oValueFormat","sMetaPath","sInfoPath","ScaleFactor","$Decimal","NumberOfFractionalDigits","getChartValue","oValue","getChart","oMetaPath","oModel","getModel","oPresentationVariant","getObject","getPath","aVisualizations","Visualizations","i","length","$AnnotationPath","indexOf","sCollectionPath","getNavigationPath","createBindingContext","undefined","getChartLabel","arguments","_getMeasurePath","oChartAnnotation","bCustomAggregate","sMeasurePath","DynamicMeasures","Measures","getAggregationBinding","oInterface","oChartAnnotations","oCollection","oTextAssociation","oDimensionType","aSortOrder","selectionVariantAnnotation","oAggregation","bUoMHasCustomAggregate","aParameters","oFilterBarContext","bDraftSupported","sChartMeasure","sEntityType","sDimension","Dimensions","$PropertyPath","aFilters","sAggregationExpression","sUOMExpression","filterConditions","sBindingPath","sCollectionName","$kind","vUOM","getUoM","sEntitySetPath","getInterface","oMetaModel","push","operator","value1","value2","path","isParameter","getCustomConditions","bind","sPath","aConditions","forEach","oCondition","aParams","convertedFilterConditions","convertFilterCondions","parameterProperties","getParameterInfo","parameter","oProperty","sEntityPath","split","oPropertyContext","oFormatOptions","parseJS","formatOptions","context","oConstraints","constraints","typeConfig","getTypeConfig","$Type","oConditionInternal","mInternalParameterCondition","toType","sEdmType","sValue","encodeURIComponent","formatLiteral","values","replaceAll","sParameterEntitySet","slice","lastIndexOf","sTargetNavigation","substring","toString","$Path","AggregatableProperty","AggregationMethod","sTextAssociationExpression","sFilterExpression","JSON","stringify","getSortOrder","getMaxItems","sDimensionType","sSortPropertyName","ChartType","$EnumMember","DynamicProperty","Name","Property","Descending","getColorBinding","iContext","oDataPoint","oDimension","oDimensionPath","aValueCriticality","targetObject","Criticality","CriticalityCalculation","oDirection","ImprovementDirection","oDataPointValue","Value","oDeviationRangeLowValue","DeviationRangeLowValue","oToleranceRangeLowValue","ToleranceRangeLowValue","oAcceptanceRangeLowValue","AcceptanceRangeLowValue","oAcceptanceRangeHighValue","AcceptanceRangeHighValue","oToleranceRangeHighValue","ToleranceRangeHighValue","oDeviationRangeHighValue","DeviationRangeHighValue","getCriticalityCalculationBinding","getValueCriticality","getScaleUoMTitle","sSeperator","bIsToolTip","sScaleFactor","fixedInteger","getIntegerInstance","style","showScale","shortRefNumber","sScale","getScale","sExpression","getMeasureDimensionTitle","sMeasureLabel","sMeasurePathExpression","sDimensionPath","sDimensionLabel","getLabel","annotations","Common","Label","getText","sProperty","getToolTip","bRenderLineChart","sChartType","sMeasureDimensionToolTip","escapeSingleQuotes","sScaleUOMTooltip","isCustomData","vISOCurrency","vUnit","sAggregatablePropertyPath","_getUOM","sAnnotation","sUOM","oUOM","getScaleFactor","getUoMVisiblity","bShowError","getInParameterFiltersBinding","aInParameters","aParts","sPaths","oInParameter","localDataProperty","join","getfilterCountBinding","_oChartAnnotation$Dim","_oChartAnnotation$Dim2","$target","name","requiresIContext"],"sources":["InteractiveChartHelper-dbg.js"],"mappings":"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","sourceRoot":"visualfilters"}},{"offset":{"line":28688,"column":0},"map":{"version":3,"names":["VisualFilterBuildingBlock","defineBuildingBlock","name","namespace","blockAttribute","type","defaultValue","required","$kind","oProps","configuration","mSettings","groupId","inParameters","metaPath","sMetaPath","getPath","oContextObjectPath","getInvolvedDataModelObjects","contextPath","oConverterContext","getConverterContext","undefined","aggregationHelper","AggregationHelper","getEntityType","customAggregates","getCustomAggregateDefinitions","pvAnnotation","targetObject","chartAnnotation","sMeasure","aVisualizations","Visualizations","i","length","sAnnotationPath","value","getEntityTypeAnnotation","annotation","aAggregations","aCustAggMeasure","Measures","filter","custAgg","qualifier","getAggregatedProperties","DynamicMeasures","Log","warning","getConverterContextFor","getAbsoluteAnnotationPath","getDataModelObjectPath","Name","validChartType","ChartType","some","bCustomAggregate","selectionVariant","selectionVariantAnnotation","selectionVariantContext","getModel","createBindingContext","iSelectOptionsForDimension","multipleSelectionAllowed","j","SelectOptions","PropertyName","Dimensions","Error","oAggregation","getAggregateProperties","aggregateProperties","propertyAnnotations","$target","annotations","aggregatablePropertyAnnotations","AggregatableProperty","measures","aggregatablePropertyMeasures","vUOM","getUoM","bUoMHasCustomAggregate","propertyHidden","UI","Hidden","aggregatablePropertyHidden","bHiddenMeasure","getHiddenMeasure","sDimensionType","sChartType","showValueHelp","renderLineChart","chartType","draftSupported","ModelHelper","isDraftSupported","models","metaModel","showError","errorMessageTitle","ResourceModel","getText","errorMessage","chartMeasure","chartPath","chartAnnotationContext","_measureDimensionTitle","InteractiveChartHelper","getMeasureDimensionTitle","_toolTip","getToolTip","_UoMVisibility","getUoMVisiblity","_scaleUoMTitle","getScaleUoMTitle","_filterCountBinding","getfilterCountBinding","oMatchedAggregate","oAggregate","vISOCurrency","ISOCurrency","vUnit","Unit","path","valueOf","getRequired","xml","getUoMTitle","showErrorExpression","generate","id","getValueHelp","getInteractiveChartFragment","getTemplate","BuildingBlockBase"],"sourceRoot":"visualfilters","sources":["VisualFilterBuildingBlock.ts"],"sourcesContent":["import { PathAnnotationExpression } from \"@sap-ux/vocabularies-types\";\nimport { AggregatedPropertyType } from \"@sap-ux/vocabularies-types/vocabularies/Analytics\";\nimport { PropertyAnnotations_Measures } from \"@sap-ux/vocabularies-types/vocabularies/Measures_Edm\";\nimport { Chart, Hidden } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport { blockAttribute, BuildingBlockBase, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockRuntime\";\nimport { AggregationHelper } from \"sap/fe/core/converters/helpers/Aggregation\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport { PropertiesOf } from \"sap/fe/core/helpers/ClassSupport\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport Context from \"sap/ui/model/odata/v4/Context\";\nimport ResourceModel from \"../ResourceModel\";\nimport InteractiveChartHelper from \"./InteractiveChartHelper\";\n\n/**\n * @classdesc\n * Building block for creating a VisualFilter based on the metadata provided by OData V4.\n * <br>\n * A Chart annotation is required to bring up an interactive chart\n *\n *\n * Usage example:\n * <pre>\n * &lt;macro:VisualFilter\n *   collection=\"{entitySet&gt;}\"\n *   chartAnnotation=\"{chartAnnotation&gt;}\"\n *   id=\"someID\"\n *   groupId=\"someGroupID\"\n *   title=\"some Title\"\n * /&gt;\n * </pre>\n * @class sap.fe.macros.VisualFilter\n * @hideconstructor\n * @private\n * @experimental\n */\n@defineBuildingBlock({\n\tname: \"VisualFilter\",\n\tnamespace: \"sap.fe.macros\"\n})\nexport default class VisualFilterBuildingBlock extends BuildingBlockBase {\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tid!: string;\n\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tdefaultValue: \"\"\n\t})\n\ttitle!: string;\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true,\n\t\t$kind: [\"EntitySet\", \"NavigationProperty\"]\n\t})\n\tcontextPath!: Context;\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\"\n\t})\n\tmetaPath?: Context;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\toutParameter!: string;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tvaluelistProperty!: string;\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\"\n\t})\n\tselectionVariantAnnotation!: Context;\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\"\n\t})\n\tinParameters?: Context;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tmultipleSelectionAllowed!: boolean;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\trequired!: boolean;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tshowOverlayInitially!: boolean;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\trenderLineChart!: string;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\trequiredProperties!: string;\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\"\n\t})\n\tfilterBarEntityType!: Context;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tshowError!: boolean;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tchartMeasure?: string;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tbUoMHasCustomAggregate!: boolean;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tshowValueHelp!: boolean;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\tdefaultValue: false\n\t})\n\tbCustomAggregate!: boolean;\n\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tdefaultValue: \"$auto.visualFilters\"\n\t})\n\tgroupId!: string;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\terrorMessageTitle?: string;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\terrorMessage?: string;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tdraftSupported: boolean;\n\n\taggregateProperties: AggregatedPropertyType | undefined;\n\tchartType: string | undefined;\n\tsMetaPath: string | undefined;\n\t_measureDimensionTitle: string | undefined;\n\t_toolTip: string | undefined;\n\t_UoMVisibility: boolean | undefined;\n\t_scaleUoMTitle: string | undefined;\n\t_filterCountBinding: string | undefined;\n\n\tconstructor(oProps: PropertiesOf<VisualFilterBuildingBlock>, configuration: any, mSettings: any) {\n\t\tsuper(oProps, configuration, mSettings);\n\t\tthis.groupId = \"$auto.visualFilters\";\n\t\tthis.inParameters = oProps.inParameters;\n\t\tthis.metaPath = oProps.metaPath;\n\t\tthis.sMetaPath = this.metaPath?.getPath();\n\t\tconst oContextObjectPath = getInvolvedDataModelObjects(this.metaPath as Context, oProps.contextPath);\n\t\tconst oConverterContext = this.getConverterContext(oContextObjectPath, undefined, mSettings);\n\t\tconst aggregationHelper = new AggregationHelper(oConverterContext.getEntityType(), oConverterContext);\n\t\tconst customAggregates = aggregationHelper.getCustomAggregateDefinitions();\n\t\tconst pvAnnotation = oContextObjectPath.targetObject;\n\t\tlet chartAnnotation: Chart | undefined;\n\t\tlet sMeasure: string | undefined;\n\t\tconst aVisualizations = pvAnnotation && pvAnnotation.Visualizations;\n\t\tif (aVisualizations) {\n\t\t\tfor (let i = 0; i < aVisualizations.length; i++) {\n\t\t\t\tconst sAnnotationPath = pvAnnotation.Visualizations[i] && pvAnnotation.Visualizations[i].value;\n\t\t\t\tchartAnnotation =\n\t\t\t\t\toConverterContext.getEntityTypeAnnotation(sAnnotationPath) &&\n\t\t\t\t\toConverterContext.getEntityTypeAnnotation(sAnnotationPath).annotation;\n\t\t\t}\n\t\t}\n\t\tlet aAggregations,\n\t\t\taCustAggMeasure = [];\n\n\t\tif (chartAnnotation?.Measures?.length) {\n\t\t\taCustAggMeasure = customAggregates.filter(function (custAgg) {\n\t\t\t\treturn custAgg.qualifier === chartAnnotation?.Measures[0].value;\n\t\t\t});\n\t\t\tsMeasure = aCustAggMeasure.length > 0 ? aCustAggMeasure[0].qualifier : chartAnnotation.Measures[0].value;\n\t\t\taAggregations = aggregationHelper.getAggregatedProperties(\"AggregatedProperties\")[0];\n\t\t}\n\t\t// if there are AggregatedProperty objects but no dynamic measures, rather there are transformation aggregates found in measures\n\t\tif (\n\t\t\taAggregations &&\n\t\t\taAggregations.length > 0 &&\n\t\t\t!chartAnnotation?.DynamicMeasures &&\n\t\t\taCustAggMeasure.length === 0 &&\n\t\t\tchartAnnotation?.Measures &&\n\t\t\tchartAnnotation?.Measures.length > 0\n\t\t) {\n\t\t\tLog.warning(\n\t\t\t\t\"The transformational aggregate measures are configured as Chart.Measures but should be configured as Chart.DynamicMeasures instead. Please check the SAP Help documentation and correct the configuration accordingly.\"\n\t\t\t);\n\t\t}\n\t\t//if the chart has dynamic measures, but with no other custom aggregate measures then consider the dynamic measures\n\t\tif (chartAnnotation?.DynamicMeasures) {\n\t\t\tif (aCustAggMeasure.length === 0) {\n\t\t\t\tsMeasure = oConverterContext\n\t\t\t\t\t.getConverterContextFor(oConverterContext.getAbsoluteAnnotationPath(chartAnnotation.DynamicMeasures[0].value))\n\t\t\t\t\t.getDataModelObjectPath().targetObject.Name;\n\t\t\t\taAggregations = aggregationHelper.getAggregatedProperties(\"AggregatedProperty\");\n\t\t\t} else {\n\t\t\t\tLog.warning(\n\t\t\t\t\t\"The dynamic measures have been ignored as visual filters can deal with only 1 measure and the first (custom aggregate) measure defined under Chart.Measures is considered.\"\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tlet validChartType;\n\t\tif (chartAnnotation) {\n\t\t\tif (chartAnnotation.ChartType === \"UI.ChartType/Line\" || chartAnnotation.ChartType === \"UI.ChartType/Bar\") {\n\t\t\t\tvalidChartType = true;\n\t\t\t} else {\n\t\t\t\tvalidChartType = false;\n\t\t\t}\n\t\t}\n\t\tif (\n\t\t\tcustomAggregates.some(function (custAgg) {\n\t\t\t\treturn custAgg.qualifier === sMeasure;\n\t\t\t})\n\t\t) {\n\t\t\tthis.bCustomAggregate = true;\n\t\t}\n\n\t\tlet selectionVariant;\n\t\tif (oProps.selectionVariantAnnotation) {\n\t\t\tconst selectionVariantContext = this.metaPath?.getModel().createBindingContext(oProps.selectionVariantAnnotation.getPath());\n\t\t\tselectionVariant =\n\t\t\t\tselectionVariantContext && getInvolvedDataModelObjects(selectionVariantContext, oProps.contextPath).targetObject;\n\t\t}\n\t\tlet iSelectOptionsForDimension = 0;\n\t\tif (selectionVariant && !oProps.multipleSelectionAllowed) {\n\t\t\tfor (let j = 0; j < selectionVariant.SelectOptions.length; j++) {\n\t\t\t\tif (selectionVariant.SelectOptions[j].PropertyName.value === chartAnnotation?.Dimensions[0].value) {\n\t\t\t\t\tiSelectOptionsForDimension++;\n\t\t\t\t\tif (iSelectOptionsForDimension > 1) {\n\t\t\t\t\t\tthrow new Error(\"Multiple SelectOptions for FilterField having SingleValue Allowed Expression\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst oAggregation = this.getAggregateProperties(aAggregations, sMeasure);\n\n\t\tif (oAggregation) {\n\t\t\tthis.aggregateProperties = oAggregation;\n\t\t}\n\t\tconst propertyAnnotations = aVisualizations[0]?.$target?.Measures && aVisualizations[0]?.$target?.Measures[0]?.$target?.annotations;\n\t\tconst aggregatablePropertyAnnotations = oAggregation?.AggregatableProperty?.$target?.annotations;\n\t\tconst measures = propertyAnnotations?.Measures;\n\t\tconst aggregatablePropertyMeasures = aggregatablePropertyAnnotations?.Measures;\n\t\tconst vUOM = this.getUoM(measures, aggregatablePropertyMeasures);\n\t\tif (\n\t\t\tvUOM &&\n\t\t\tcustomAggregates.some(function (custAgg) {\n\t\t\t\treturn custAgg.qualifier === vUOM;\n\t\t\t})\n\t\t) {\n\t\t\tthis.bUoMHasCustomAggregate = true;\n\t\t} else {\n\t\t\tthis.bUoMHasCustomAggregate = false;\n\t\t}\n\t\tconst propertyHidden = propertyAnnotations?.UI?.Hidden;\n\t\tconst aggregatablePropertyHidden = aggregatablePropertyAnnotations?.UI?.Hidden;\n\t\tconst bHiddenMeasure = this.getHiddenMeasure(propertyHidden, aggregatablePropertyHidden, this.bCustomAggregate);\n\t\tconst sDimensionType =\n\t\t\tchartAnnotation?.Dimensions[0] && chartAnnotation?.Dimensions[0].$target && chartAnnotation.Dimensions[0].$target.type;\n\t\tconst sChartType = chartAnnotation?.ChartType;\n\t\tif (sDimensionType === \"Edm.Date\" || sDimensionType === \"Edm.Time\" || sDimensionType === \"Edm.DateTimeOffset\") {\n\t\t\tthis.showValueHelp = false;\n\t\t} else if (typeof bHiddenMeasure === \"boolean\" && bHiddenMeasure) {\n\t\t\tthis.showValueHelp = false;\n\t\t} else if (!(sChartType === \"UI.ChartType/Bar\" || sChartType === \"UI.ChartType/Line\")) {\n\t\t\tthis.showValueHelp = false;\n\t\t} else if (oProps.renderLineChart === \"false\" && sChartType === \"UI.ChartType/Line\") {\n\t\t\tthis.showValueHelp = false;\n\t\t} else {\n\t\t\tthis.showValueHelp = true;\n\t\t}\n\t\tthis.chartType = sChartType;\n\t\tthis.draftSupported = ModelHelper.isDraftSupported(mSettings.models.metaModel, oProps.contextPath?.getPath() as string);\n\t\t/**\n\t\t * If the measure of the chart is marked as 'hidden', or if the chart type is invalid, or if the data type for the line chart is invalid,\n\t\t * the call is made to the InteractiveChartWithError fragment (using error-message related APIs, but avoiding batch calls)\n\t\t */\n\t\tif ((typeof bHiddenMeasure === \"boolean\" && bHiddenMeasure) || !validChartType || oProps.renderLineChart === \"false\") {\n\t\t\tthis.showError = true;\n\t\t\tthis.errorMessageTitle =\n\t\t\t\tbHiddenMeasure || !validChartType\n\t\t\t\t\t? ResourceModel.getText(\"M_VISUAL_FILTERS_ERROR_MESSAGE_TITLE\")\n\t\t\t\t\t: ResourceModel.getText(\"M_VISUAL_FILTER_LINE_CHART_INVALID_DATATYPE\");\n\t\t\tif (bHiddenMeasure) {\n\t\t\t\tthis.errorMessage = ResourceModel.getText(\"M_VISUAL_FILTER_HIDDEN_MEASURE\", [sMeasure]);\n\t\t\t} else if (!validChartType) {\n\t\t\t\tthis.errorMessage = ResourceModel.getText(\"M_VISUAL_FILTER_UNSUPPORTED_CHART_TYPE\");\n\t\t\t} else {\n\t\t\t\tthis.errorMessage = ResourceModel.getText(\"M_VISUAL_FILTER_LINE_CHART_UNSUPPORTED_DIMENSION\");\n\t\t\t}\n\t\t}\n\t\tthis.chartMeasure = sMeasure;\n\t\tconst chartPath = this.sMetaPath + \"Visualizations/0/$AnnotationPath\";\n\t\tconst chartAnnotationContext = this.metaPath?.getModel().createBindingContext(chartPath, chartAnnotation as any);\n\t\tthis._measureDimensionTitle = InteractiveChartHelper.getMeasureDimensionTitle(\n\t\t\tchartAnnotationContext,\n\t\t\tchartAnnotation,\n\t\t\toProps.contextPath,\n\t\t\tthis.bCustomAggregate,\n\t\t\tthis.aggregateProperties\n\t\t);\n\t\tthis._toolTip = InteractiveChartHelper.getToolTip(\n\t\t\tchartAnnotationContext,\n\t\t\tchartAnnotation,\n\t\t\toProps.contextPath,\n\t\t\tthis.sMetaPath,\n\t\t\tthis.bCustomAggregate,\n\t\t\tthis.aggregateProperties,\n\t\t\tthis.renderLineChart\n\t\t);\n\t\tthis._UoMVisibility = InteractiveChartHelper.getUoMVisiblity(chartAnnotation, this.showError);\n\t\tthis._scaleUoMTitle = InteractiveChartHelper.getScaleUoMTitle(\n\t\t\tchartAnnotationContext,\n\t\t\tchartAnnotation,\n\t\t\toProps.contextPath,\n\t\t\tthis.sMetaPath,\n\t\t\tthis.bCustomAggregate,\n\t\t\tthis.aggregateProperties\n\t\t);\n\t\tthis._filterCountBinding = InteractiveChartHelper.getfilterCountBinding(chartAnnotation);\n\t}\n\n\tgetAggregateProperties(aAggregations: AggregatedPropertyType[], sMeasure?: string) {\n\t\tlet oMatchedAggregate: AggregatedPropertyType | undefined;\n\t\tif (!aAggregations) {\n\t\t\treturn;\n\t\t}\n\t\taAggregations.some(function (oAggregate) {\n\t\t\tif (oAggregate.Name === sMeasure) {\n\t\t\t\toMatchedAggregate = oAggregate;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\t\treturn oMatchedAggregate;\n\t}\n\n\tgetUoM(measures?: PropertyAnnotations_Measures, aggregatablePropertyMeasures?: PropertyAnnotations_Measures) {\n\t\tlet vISOCurrency = measures?.ISOCurrency;\n\t\tlet vUnit = measures?.Unit;\n\t\tif (!vISOCurrency && !vUnit && aggregatablePropertyMeasures) {\n\t\t\tvISOCurrency = aggregatablePropertyMeasures.ISOCurrency;\n\t\t\tvUnit = aggregatablePropertyMeasures.Unit;\n\t\t}\n\t\treturn (vISOCurrency as PathAnnotationExpression<String>)?.path || (vUnit as PathAnnotationExpression<String>)?.path;\n\t}\n\n\tgetHiddenMeasure(propertyHidden: Hidden, aggregatablePropertyHidden?: Hidden, bCustomAggregate?: boolean) {\n\t\tif (!bCustomAggregate && aggregatablePropertyHidden) {\n\t\t\treturn aggregatablePropertyHidden.valueOf();\n\t\t} else {\n\t\t\treturn propertyHidden?.valueOf();\n\t\t}\n\t}\n\n\tgetRequired() {\n\t\tif (this.required) {\n\t\t\treturn xml`<Label text=\"\" width=\"0.5rem\" required=\"true\">\n\t\t\t\t\t\t\t<layoutData>\n\t\t\t\t\t\t\t\t<OverflowToolbarLayoutData priority=\"Never\" />\n\t\t\t\t\t\t\t</layoutData>\n\t\t\t\t\t\t</Label>`;\n\t\t} else {\n\t\t\treturn xml``;\n\t\t}\n\t}\n\n\tgetUoMTitle(showErrorExpression: string) {\n\t\tif (this._UoMVisibility) {\n\t\t\treturn xml`<Title\n\t\t\t\t\t\t\tid=\"${generate([this.id, \"ScaleUoMTitle\"])}\"\n\t\t\t\t\t\t\tvisible=\"{= !${showErrorExpression}}\"\n\t\t\t\t\t\t\ttext=\"${this._scaleUoMTitle}\"\n\t\t\t\t\t\t\ttitleStyle=\"H6\"\n\t\t\t\t\t\t\tlevel=\"H3\"\n\t\t\t\t\t\t\twidth=\"4.15rem\"\n\t\t\t\t\t\t/>`;\n\t\t} else {\n\t\t\treturn xml``;\n\t\t}\n\t}\n\n\tgetValueHelp(showErrorExpression: string) {\n\t\tif (this.showValueHelp) {\n\t\t\treturn xml`<ToolbarSpacer />\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tid=\"${generate([this.id, \"VisualFilterValueHelpButton\"])}\"\n\t\t\t\t\t\t\ttype=\"Transparent\"\n\t\t\t\t\t\t\tariaHasPopup=\"Dialog\"\n\t\t\t\t\t\t\ttext=\"${this._filterCountBinding}\"\n\t\t\t\t\t\t\tpress=\"VisualFilterRuntime.fireValueHelp\"\n\t\t\t\t\t\t\tenabled=\"{= !${showErrorExpression}}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<layoutData>\n\t\t\t\t\t\t\t\t<OverflowToolbarLayoutData priority=\"Never\" />\n\t\t\t\t\t\t\t</layoutData>\n\t\t\t\t\t\t</Button>`;\n\t\t} else {\n\t\t\treturn xml``;\n\t\t}\n\t}\n\n\tgetInteractiveChartFragment() {\n\t\tif (this.showError) {\n\t\t\treturn xml`<core:Fragment fragmentName=\"sap.fe.macros.visualfilters.fragments.InteractiveChartWithError\" type=\"XML\" />`;\n\t\t} else if (this.chartType === \"UI.ChartType/Bar\") {\n\t\t\treturn xml`<core:Fragment fragmentName=\"sap.fe.macros.visualfilters.fragments.InteractiveBarChart\" type=\"XML\" />`;\n\t\t} else {\n\t\t\treturn xml`<core:Fragment fragmentName=\"sap.fe.macros.visualfilters.fragments.InteractiveLineChart\" type=\"XML\" />`;\n\t\t}\n\t}\n\n\tgetTemplate() {\n\t\tconst id = generate([this.sMetaPath]);\n\t\tconst showErrorExpression = \"${internal>\" + id + \"/showError}\";\n\t\tconst sMetaPath = this.metaPath?.getPath();\n\n\t\treturn xml`\n\t\t<control:VisualFilter\n\t\tcore:require=\"{VisualFilterRuntime: 'sap/fe/macros/visualfilters/VisualFilterRuntime'}\"\n\t\txmlns=\"sap.m\"\n\t\txmlns:control=\"sap.fe.core.controls.filterbar\"\n\t\txmlns:customData=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\"\n\t\txmlns:core=\"sap.ui.core\"\n\t\tid=\"${this.id}\"\n\t\theight=\"13rem\"\n\t\twidth=\"20.5rem\"\n\t\tclass=\"sapUiSmallMarginBeginEnd\"\n\t\tcustomData:infoPath=\"${generate([sMetaPath])}\"\n\t>\n\t\t<VBox height=\"2rem\" class=\"sapUiSmallMarginBottom\">\n\t\t\t<OverflowToolbar style=\"Clear\">\n\t\t\t\t${this.getRequired()}\n\t\t\t\t<Title\n\t\t\t\t\tid=\"${generate([this.id, \"MeasureDimensionTitle\"])}\"\n\t\t\t\t\ttext=\"${this._measureDimensionTitle}\"\n\t\t\t\t\ttooltip=\"${this._toolTip}\"\n\t\t\t\t\ttitleStyle=\"H6\"\n\t\t\t\t\tlevel=\"H3\"\n\t\t\t\t\tclass=\"sapUiTinyMarginEnd sapUiNoMarginBegin\"\n\t\t\t\t/>\n\t\t\t\t${this.getUoMTitle(showErrorExpression)}\n\t\t\t\t${this.getValueHelp(showErrorExpression)}\n\t\t\t</OverflowToolbar>\n\t\t</VBox>\n\t\t<VBox height=\"100%\" width=\"100%\">\n\t\t\t${this.getInteractiveChartFragment()}\n\t\t</VBox>\n\t</control:VisualFilter>`;\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":29190,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","BuildingBlock","BuildingBlockRuntime","Aggregation","MetaModelConverter","ModelHelper","StableIdHelper","ResourceModel","InteractiveChartHelper","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_dec18","_dec19","_dec20","_dec21","_dec22","_dec23","_dec24","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_descriptor15","_descriptor16","_descriptor17","_descriptor18","_descriptor19","_descriptor20","_descriptor21","_descriptor22","_descriptor23","_exports","generate","getInvolvedDataModelObjects","AggregationHelper","xml","defineBuildingBlock","BuildingBlockBase","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","VisualFilterBuildingBlock","name","namespace","type","defaultValue","required","$kind","_BuildingBlockBase","oProps","configuration","mSettings","_this$metaPath","_chartAnnotation","_chartAnnotation$Meas","_chartAnnotation3","_chartAnnotation4","_chartAnnotation5","_chartAnnotation6","_aVisualizations$","_aVisualizations$$$ta","_aVisualizations$2","_aVisualizations$2$$t","_aVisualizations$2$$t2","_aVisualizations$2$$t3","_oAggregation$Aggrega","_oAggregation$Aggrega2","_propertyAnnotations$","_aggregatableProperty","_chartAnnotation8","_chartAnnotation9","_chartAnnotation10","_oProps$contextPath","_this$metaPath3","_this","this","groupId","inParameters","metaPath","sMetaPath","getPath","oContextObjectPath","contextPath","oConverterContext","getConverterContext","aggregationHelper","getEntityType","customAggregates","getCustomAggregateDefinitions","pvAnnotation","targetObject","chartAnnotation","sMeasure","aVisualizations","Visualizations","i","length","sAnnotationPath","getEntityTypeAnnotation","annotation","aAggregations","aCustAggMeasure","Measures","filter","custAgg","_chartAnnotation2","qualifier","getAggregatedProperties","DynamicMeasures","warning","getConverterContextFor","getAbsoluteAnnotationPath","getDataModelObjectPath","Name","validChartType","ChartType","some","bCustomAggregate","selectionVariant","selectionVariantAnnotation","_this$metaPath2","selectionVariantContext","getModel","createBindingContext","iSelectOptionsForDimension","multipleSelectionAllowed","j","SelectOptions","_chartAnnotation7","PropertyName","Dimensions","oAggregation","getAggregateProperties","aggregateProperties","propertyAnnotations","$target","annotations","aggregatablePropertyAnnotations","AggregatableProperty","measures","aggregatablePropertyMeasures","vUOM","getUoM","bUoMHasCustomAggregate","propertyHidden","UI","Hidden","aggregatablePropertyHidden","bHiddenMeasure","getHiddenMeasure","sDimensionType","sChartType","showValueHelp","renderLineChart","chartType","draftSupported","isDraftSupported","models","metaModel","showError","errorMessageTitle","getText","errorMessage","chartMeasure","chartPath","chartAnnotationContext","_measureDimensionTitle","getMeasureDimensionTitle","_toolTip","getToolTip","_UoMVisibility","getUoMVisiblity","_scaleUoMTitle","getScaleUoMTitle","_filterCountBinding","getfilterCountBinding","_proto","oMatchedAggregate","oAggregate","_vISOCurrency","_vUnit","vISOCurrency","ISOCurrency","vUnit","Unit","path","valueOf","getRequired","getUoMTitle","showErrorExpression","id","getValueHelp","getInteractiveChartFragment","getTemplate","_this$metaPath4"],"sources":["VisualFilterBuildingBlock-dbg.js"],"mappings":"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","sourceRoot":"visualfilters"}},{"offset":{"line":29249,"column":0},"map":{"version":3,"names":["VisualFilterRuntime","selectionChanged","oEvent","oInteractiveChart","getSource","sOutParameter","data","sValueListProperty","sDimension","sDimensionText","bMultipleSelectionAllowed","sDimensionType","oSelectedAggregation","getParameter","bIsAggregationSelected","oConditionModel","getModel","aConditions","getProperty","Log","error","sSelectionChangedValue","getBindingContext","getObject","sSelectionChangedValueText","String","undefined","VisualFilterUtils","_parseDateTime","oCondition","Condition","createItemCondition","push","filter","operator","Date","parse","values","setProperty","getAggregationSelected","aSelectableValues","i","length","getParent","sDimensionValue","indexOf","getFiltersFromConditions","aArguments","oFilterBar","aInParameters","customData","bIsDraftSupported","aPropertyInfoSet","getPropertyInfo","mConditions","aValueListPropertyInfoSet","oFilters","aFilters","aParameters","oSelectionVariantAnnotation","CommonHelper","parseCustomData","oInteractiveChartListBinding","getBinding","sPath","getPath","oMetaModel","getMetaModel","sEntitySetPath","filterConditions","getFiltersConditionsFromSelectionVariant","getCustomConditions","bind","typeConfig","TypeUtil","getTypeConfig","dataType","oSelectionVariantConditions","convertFilterCondions","Object","keys","forEach","sKey","inParameterForKey","find","inParameter","valueListProperty","localDataProperty","propertyInfoSet","name","baseType","condition","_formatDateTime","oInParameter","index","oInternalModelContext","sInfoPath","bEnableBinding","oResourceBundle","Core","getLibraryResourceBundle","aRequiredProperties","aNotMatchedConditions","requiredPropertyPath","errorMessageTitle","errorMessage","showError","getText","sLabel","sFilterEntityName","split","sChartEntityName","sBindingPath","FilterUtils","getBindingPathForParameters","parameter","key","slice","MdcFilterUtil","getFilterInfo","filters","Filter","FilterOperator","EQ","isSuspended","resume","getFilterCounts","oConditions","scaleVisualFilterValue","oValue","scaleFactor","numberOfFractionalDigits","currency","oRawValue","getFormattedNumber","fireValueHelp","fireValueHelpRequest"],"sourceRoot":"visualfilters","sources":["VisualFilterRuntime.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport VisualFilterUtils from \"sap/fe/core/controls/filterbar/utils/VisualFilterUtils\";\nimport type { InternalModelContext } from \"sap/fe/core/helpers/ModelHelper\";\nimport { getFiltersConditionsFromSelectionVariant } from \"sap/fe/core/templating/FilterHelper\";\nimport TypeUtil from \"sap/fe/core/type/TypeUtil\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport FilterUtils from \"sap/fe/macros/filter/FilterUtils\";\nimport type ManagedObject from \"sap/ui/base/ManagedObject\";\nimport type Control from \"sap/ui/core/Control\";\nimport Core from \"sap/ui/core/Core\";\nimport Condition from \"sap/ui/mdc/condition/Condition\";\nimport MdcFilterUtil from \"sap/ui/mdc/util/FilterUtil\";\nimport Filter from \"sap/ui/model/Filter\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\n\n/**\n * Static class used by Visual Filter during runtime\n *\n * @private\n * @experimental This module is only for internal/experimental use!\n */\nconst VisualFilterRuntime = {\n\tselectionChanged(oEvent: any) {\n\t\tconst oInteractiveChart = oEvent.getSource();\n\t\tconst sOutParameter = oInteractiveChart.data(\"outParameter\");\n\t\tconst sValueListProperty = oInteractiveChart.data(\"valuelistProperty\");\n\t\tconst sDimension = oInteractiveChart.data(\"dimension\");\n\t\tconst sDimensionText = oInteractiveChart.data(\"dimensionText\");\n\t\tconst bMultipleSelectionAllowed = oInteractiveChart.data(\"multipleSelectionAllowed\");\n\t\tconst sDimensionType = oInteractiveChart.data(\"dimensionType\");\n\t\tconst oSelectedAggregation = oEvent.getParameter(\"bar\") || oEvent.getParameter(\"point\") || oEvent.getParameter(\"segment\");\n\t\tconst bIsAggregationSelected = oEvent.getParameter(\"selected\");\n\t\tconst oConditionModel = oInteractiveChart.getModel(\"$field\");\n\t\tlet aConditions = oConditionModel.getProperty(\"/conditions\");\n\n\t\tif (!sOutParameter || sValueListProperty !== sDimension) {\n\t\t\tLog.error(\"VisualFilter: Cannot sync values with regular filter as out parameter is not configured properly!\");\n\t\t} else {\n\t\t\tlet sSelectionChangedValue = oSelectedAggregation.getBindingContext().getObject(sValueListProperty);\n\t\t\tif (sSelectionChangedValue) {\n\t\t\t\tlet sSelectionChangedValueText = oSelectedAggregation.getBindingContext().getObject(sDimensionText);\n\t\t\t\tif (typeof sSelectionChangedValueText !== \"string\" && !(sSelectionChangedValueText instanceof String)) {\n\t\t\t\t\tsSelectionChangedValueText = undefined;\n\t\t\t\t}\n\t\t\t\t// if selection has been done on the aggregation then add to conditions\n\t\t\t\tif (bIsAggregationSelected) {\n\t\t\t\t\tif (bMultipleSelectionAllowed === \"false\") {\n\t\t\t\t\t\taConditions = [];\n\t\t\t\t\t}\n\t\t\t\t\tif (sDimensionType === \"Edm.DateTimeOffset\") {\n\t\t\t\t\t\tsSelectionChangedValue = VisualFilterUtils._parseDateTime(sSelectionChangedValue);\n\t\t\t\t\t}\n\t\t\t\t\tconst oCondition = Condition.createItemCondition(\n\t\t\t\t\t\tsSelectionChangedValue,\n\t\t\t\t\t\tsSelectionChangedValueText || undefined,\n\t\t\t\t\t\t{},\n\t\t\t\t\t\t{}\n\t\t\t\t\t);\n\t\t\t\t\taConditions.push(oCondition);\n\t\t\t\t} else {\n\t\t\t\t\t// because selection was removed on the aggregation hence remove this from conditions\n\t\t\t\t\taConditions = aConditions.filter(function (oCondition: any) {\n\t\t\t\t\t\tif (sDimensionType === \"Edm.DateTimeOffset\") {\n\t\t\t\t\t\t\treturn oCondition.operator !== \"EQ\" || Date.parse(oCondition.values[0]) !== Date.parse(sSelectionChangedValue);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn oCondition.operator !== \"EQ\" || oCondition.values[0] !== sSelectionChangedValue;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\toConditionModel.setProperty(\"/conditions\", aConditions);\n\t\t\t} else {\n\t\t\t\tLog.error(\"VisualFilter: No vaue found for the outParameter\");\n\t\t\t}\n\t\t}\n\t},\n\t// THIS IS A FORMATTER\n\tgetAggregationSelected(this: ManagedObject, aConditions: any) {\n\t\tconst aSelectableValues = [];\n\t\tif (!this.getBindingContext()) {\n\t\t\treturn;\n\t\t}\n\t\tfor (let i = 0; i <= aConditions.length - 1; i++) {\n\t\t\tconst oCondition = aConditions[i];\n\t\t\t// 1. get conditions with EQ operator (since visual filter can only deal with EQ operators) and get their values\n\t\t\tif (oCondition.operator === \"EQ\") {\n\t\t\t\taSelectableValues.push(oCondition.values[0]);\n\t\t\t}\n\t\t}\n\n\t\t// access the interactive chart from the control.\n\t\tconst oInteractiveChart = this.getParent() as Control;\n\t\tconst sDimension = oInteractiveChart.data(\"dimension\");\n\t\tconst sDimensionType = oInteractiveChart.data(\"dimensionType\");\n\t\tlet sDimensionValue = this.getBindingContext()?.getObject(sDimension);\n\t\tif (sDimensionType === \"Edm.DateTimeOffset\") {\n\t\t\tsDimensionValue = VisualFilterUtils._parseDateTime(sDimensionValue) as any;\n\t\t}\n\t\treturn aSelectableValues.indexOf(sDimensionValue) > -1;\n\t},\n\t// THIS IS A FORMATTER\n\tgetFiltersFromConditions(this: ManagedObject, ...aArguments: any[]) {\n\t\tconst oInteractiveChart = this.getParent() as Control;\n\t\tconst oFilterBar = oInteractiveChart.getParent()?.getParent()?.getParent()?.getParent() as any;\n\t\tconst aInParameters = oInteractiveChart.data(\"inParameters\").customData;\n\t\tconst bIsDraftSupported = oInteractiveChart.data(\"draftSupported\") === \"true\";\n\t\tconst aPropertyInfoSet = oFilterBar.getPropertyInfo();\n\t\tconst mConditions: any = {};\n\t\tconst aValueListPropertyInfoSet: any[] = [];\n\t\tlet oFilters;\n\t\tlet aFilters = [];\n\t\tconst aParameters = oInteractiveChart.data(\"parameters\").customData;\n\t\tconst oSelectionVariantAnnotation = CommonHelper.parseCustomData(oInteractiveChart.data(\"selectionVariantAnnotation\"));\n\t\tconst oInteractiveChartListBinding = (oInteractiveChart.getBinding(\"bars\") ||\n\t\t\toInteractiveChart.getBinding(\"points\") ||\n\t\t\toInteractiveChart.getBinding(\"segments\")) as any;\n\t\tconst sPath = oInteractiveChartListBinding.getPath();\n\t\tconst oMetaModel = oInteractiveChart.getModel().getMetaModel() as ODataMetaModel;\n\t\tconst sEntitySetPath = oInteractiveChartListBinding.getPath();\n\t\tconst filterConditions = getFiltersConditionsFromSelectionVariant(\n\t\t\tsEntitySetPath,\n\t\t\toMetaModel,\n\t\t\toSelectionVariantAnnotation,\n\t\t\tVisualFilterUtils.getCustomConditions.bind(VisualFilterUtils)\n\t\t);\n\t\tfor (const i in aPropertyInfoSet) {\n\t\t\taPropertyInfoSet[i].typeConfig = TypeUtil.getTypeConfig(aPropertyInfoSet[i].dataType, {}, {});\n\t\t}\n\t\tconst oSelectionVariantConditions = VisualFilterUtils.convertFilterCondions(filterConditions);\n\t\t// aInParameters and the bindings to in parameters are in the same order so we can rely on it to create our conditions\n\t\tObject.keys(oSelectionVariantConditions).forEach(function (sKey: string) {\n\t\t\tmConditions[sKey] = oSelectionVariantConditions[sKey];\n\t\t\t//fetch localDataProperty if selection variant key is based on vaue list property\n\t\t\tconst inParameterForKey = aInParameters.find(function (inParameter: any) {\n\t\t\t\treturn inParameter.valueListProperty === sKey;\n\t\t\t});\n\t\t\tconst localDataProperty = inParameterForKey ? inParameterForKey.localDataProperty : sKey;\n\t\t\tif (!aParameters || (aParameters && aParameters.indexOf(sKey) === -1)) {\n\t\t\t\tfor (const i in aPropertyInfoSet) {\n\t\t\t\t\tconst propertyInfoSet = aPropertyInfoSet[i];\n\t\t\t\t\tif (localDataProperty === propertyInfoSet.name) {\n\t\t\t\t\t\tif (propertyInfoSet.typeConfig.baseType === \"DateTime\") {\n\t\t\t\t\t\t\tif (mConditions[sKey]) {\n\t\t\t\t\t\t\t\tmConditions[sKey].forEach(function (condition: any) {\n\t\t\t\t\t\t\t\t\tcondition.values[0] = VisualFilterUtils._formatDateTime(condition.values[0]);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\taValueListPropertyInfoSet.push({\n\t\t\t\t\t\t\tname: sKey,\n\t\t\t\t\t\t\ttypeConfig: propertyInfoSet.typeConfig\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\taInParameters.forEach(function (oInParameter: any, index: any) {\n\t\t\tif (aArguments[index].length > 0) {\n\t\t\t\t// store conditions with value list property since we are filtering on the value list collection path\n\t\t\t\tmConditions[oInParameter.valueListProperty] = aArguments[index];\n\t\t\t\tif (!aParameters || (aParameters && aParameters.indexOf(oInParameter.valueListProperty) === -1)) {\n\t\t\t\t\t// aPropertyInfoSet is list of properties from the filter bar but we need to create conditions for the value list\n\t\t\t\t\t// which could have a different collectionPath.\n\t\t\t\t\t// Only typeConfig from aPropertyInfoSet is required for getting the converted filters from conditions\n\t\t\t\t\t// so we update aPropertyInfoSet to have the valueListProperties only\n\t\t\t\t\t// This way conditions will be converted to sap.ui.model.Filter for the value list\n\t\t\t\t\t// This works because for in parameter mapping the property from the main entity type should be of the same type as the value list entity type\n\t\t\t\t\t// TODO: Follow up with MDC to check if they can provide a clean api to convert conditions into filters\n\t\t\t\t\tfor (const i in aPropertyInfoSet) {\n\t\t\t\t\t\t// store conditions with value list property since we are filtering on the value list collection path\n\t\t\t\t\t\tconst propertyInfoSet = aPropertyInfoSet[i];\n\t\t\t\t\t\tif (propertyInfoSet.name === oInParameter.localDataProperty) {\n\t\t\t\t\t\t\tif (propertyInfoSet.typeConfig.baseType === \"DateTime\") {\n\t\t\t\t\t\t\t\tif (mConditions[oInParameter.valueListProperty]) {\n\t\t\t\t\t\t\t\t\tmConditions[oInParameter.valueListProperty].forEach(function (condition: any) {\n\t\t\t\t\t\t\t\t\t\tcondition.values[0] = VisualFilterUtils._formatDateTime(condition.values[0]);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taValueListPropertyInfoSet.push({\n\t\t\t\t\t\t\t\tname: oInParameter.valueListProperty,\n\t\t\t\t\t\t\t\ttypeConfig: propertyInfoSet.typeConfig\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst oInternalModelContext = oInteractiveChart.getBindingContext(\"internal\") as InternalModelContext;\n\t\tconst sInfoPath = oInteractiveChart.data(\"infoPath\");\n\t\tlet bEnableBinding;\n\t\tconst oResourceBundle = Core.getLibraryResourceBundle(\"sap.fe.macros\");\n\t\tconst aRequiredProperties = CommonHelper.parseCustomData(oInteractiveChart.data(\"requiredProperties\"));\n\t\tif (aRequiredProperties.length) {\n\t\t\tconst aConditions = Object.keys(mConditions) || [];\n\t\t\tconst aNotMatchedConditions: any[] = [];\n\t\t\taRequiredProperties.forEach(function (requiredPropertyPath: any) {\n\t\t\t\tif (aConditions.indexOf(requiredPropertyPath) === -1) {\n\t\t\t\t\taNotMatchedConditions.push(requiredPropertyPath);\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (!aNotMatchedConditions.length) {\n\t\t\t\tbEnableBinding = oInternalModelContext.getProperty(`${sInfoPath}/showError`);\n\t\t\t\toInternalModelContext.setProperty(sInfoPath, {\n\t\t\t\t\terrorMessageTitle: \"\",\n\t\t\t\t\terrorMessage: \"\",\n\t\t\t\t\tshowError: false\n\t\t\t\t});\n\t\t\t} else if (aNotMatchedConditions.length > 1) {\n\t\t\t\toInternalModelContext.setProperty(sInfoPath, {\n\t\t\t\t\terrorMessageTitle: oResourceBundle.getText(\"M_VISUAL_FILTERS_ERROR_MESSAGE_TITLE\"),\n\t\t\t\t\terrorMessage: oResourceBundle.getText(\"M_VISUAL_FILTERS_PROVIDE_FILTER_VAL_MULTIPLEVF\"),\n\t\t\t\t\tshowError: true\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tconst sLabel =\n\t\t\t\t\toMetaModel.getObject(`${sEntitySetPath}/${aNotMatchedConditions[0]}@com.sap.vocabularies.Common.v1.Label`) ||\n\t\t\t\t\taNotMatchedConditions[0];\n\t\t\t\toInternalModelContext.setProperty(sInfoPath, {\n\t\t\t\t\terrorMessageTitle: oResourceBundle.getText(\"M_VISUAL_FILTERS_ERROR_MESSAGE_TITLE\"),\n\t\t\t\t\terrorMessage: oResourceBundle.getText(\"M_VISUAL_FILTERS_PROVIDE_FILTER_VAL_SINGLEVF\", sLabel),\n\t\t\t\t\tshowError: true\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else {\n\t\t\tbEnableBinding = oInternalModelContext.getProperty(`${sInfoPath}/showError`);\n\t\t\toInternalModelContext.setProperty(sInfoPath, { errorMessageTitle: \"\", errorMessage: \"\", showError: false });\n\t\t}\n\n\t\tconst sFilterEntityName = oFilterBar.data(\"entityType\").split(\"/\")[1];\n\t\tconst sChartEntityName = sPath.split(\"/\")[1].split(\"(\")[0];\n\t\tif (aParameters && aParameters.length && sFilterEntityName === sChartEntityName) {\n\t\t\tconst sBindingPath = bEnableBinding\n\t\t\t\t? FilterUtils.getBindingPathForParameters(oFilterBar, mConditions, aPropertyInfoSet, aParameters)\n\t\t\t\t: undefined;\n\n\t\t\tif (sBindingPath) {\n\t\t\t\toInteractiveChartListBinding.sPath = sBindingPath;\n\t\t\t}\n\t\t}\n\n\t\tif (aParameters && aParameters.length) {\n\t\t\t//Remove parameters from mConditions since it should not be a part of $filter\n\t\t\taParameters.forEach(function (parameter: any) {\n\t\t\t\tif (mConditions[parameter]) {\n\t\t\t\t\tdelete mConditions[parameter];\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t//Only keep the actual value of filters and remove type informations\n\t\tObject.keys(mConditions).forEach(function (key: string) {\n\t\t\tmConditions[key].forEach(function (condition: any) {\n\t\t\t\tif (condition.values.length > 1) {\n\t\t\t\t\tcondition.values = condition.values.slice(0, 1);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\t// On InitialLoad when initiallayout is visual, aPropertyInfoSet is always empty and we cannot get filters from MDCFilterUtil.\n\t\t// Also when SVQualifier is there then we should not change the listbinding filters to empty as we are not getting filters from MDCFilterUtil but\n\t\t// instead we need to not call listbinding.filter and use the template time binding itself.\n\t\tif (Object.keys(mConditions).length > 0 && aValueListPropertyInfoSet.length) {\n\t\t\toFilters = (MdcFilterUtil.getFilterInfo(oFilterBar, mConditions, aValueListPropertyInfoSet, []) as any).filters;\n\t\t\tif (oFilters) {\n\t\t\t\tif (!oFilters.aFilters) {\n\t\t\t\t\taFilters.push(oFilters);\n\t\t\t\t} else if (oFilters.aFilters) {\n\t\t\t\t\taFilters = oFilters.aFilters;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (bIsDraftSupported) {\n\t\t\taFilters.push(new Filter(\"IsActiveEntity\", FilterOperator.EQ, true));\n\t\t}\n\t\tif (aFilters && aFilters.length > 0) {\n\t\t\toInteractiveChartListBinding.filter(aFilters);\n\t\t} else if (!Object.keys(mConditions).length) {\n\t\t\toInteractiveChartListBinding.filter();\n\t\t}\n\t\t// update the interactive chart binding\n\t\tif (bEnableBinding && oInteractiveChartListBinding.isSuspended()) {\n\t\t\toInteractiveChartListBinding.resume();\n\t\t}\n\t\treturn aFilters;\n\t},\n\tgetFilterCounts(oConditions: any) {\n\t\tif (oConditions.length > 0) {\n\t\t\treturn `(${oConditions.length})`;\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t},\n\n\tscaleVisualFilterValue(oValue: any, scaleFactor: any, numberOfFractionalDigits: any, currency: any, oRawValue: any) {\n\t\t// ScaleFactor if defined is priority for formatting\n\t\tif (scaleFactor) {\n\t\t\treturn VisualFilterUtils.getFormattedNumber(oRawValue, scaleFactor, numberOfFractionalDigits);\n\t\t\t// If Scale Factor is not defined, use currency formatting\n\t\t} else if (currency) {\n\t\t\treturn VisualFilterUtils.getFormattedNumber(oRawValue, undefined, undefined, currency);\n\t\t\t// No ScaleFactor and no Currency, use numberOfFractionalDigits defined in DataPoint\n\t\t} else if (numberOfFractionalDigits > 0) {\n\t\t\t// Number of fractional digits shall not exceed 2, unless required by currency\n\t\t\tnumberOfFractionalDigits = numberOfFractionalDigits > 2 ? 2 : numberOfFractionalDigits;\n\t\t\treturn VisualFilterUtils.getFormattedNumber(oRawValue, undefined, numberOfFractionalDigits);\n\t\t} else {\n\t\t\treturn oValue;\n\t\t}\n\t},\n\tfireValueHelp(oEvent: any) {\n\t\toEvent.getSource().getParent().getParent().getParent().fireValueHelpRequest();\n\t}\n};\n\n/**\n * @global\n */\nexport default VisualFilterRuntime;\n"],"mappings":"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"}},{"offset":{"line":29549,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","VisualFilterUtils","FilterHelper","TypeUtil","CommonHelper","FilterUtils","Core","Condition","MdcFilterUtil","Filter","FilterOperator","getFiltersConditionsFromSelectionVariant","VisualFilterRuntime","selectionChanged","oEvent","oInteractiveChart","getSource","sOutParameter","data","sValueListProperty","sDimension","sDimensionText","bMultipleSelectionAllowed","sDimensionType","oSelectedAggregation","getParameter","bIsAggregationSelected","oConditionModel","getModel","aConditions","getProperty","error","sSelectionChangedValue","getBindingContext","getObject","sSelectionChangedValueText","String","undefined","_parseDateTime","oCondition","createItemCondition","push","filter","operator","Date","parse","values","setProperty","getAggregationSelected","_this$getBindingConte","aSelectableValues","this","i","length","getParent","sDimensionValue","indexOf","getFiltersFromConditions","_oInteractiveChart$ge","_oInteractiveChart$ge2","_oInteractiveChart$ge3","_len","arguments","aArguments","Array","_key","oFilterBar","aInParameters","customData","bIsDraftSupported","aPropertyInfoSet","getPropertyInfo","mConditions","aValueListPropertyInfoSet","oFilters","aFilters","aParameters","oSelectionVariantAnnotation","parseCustomData","oInteractiveChartListBinding","getBinding","sPath","getPath","oMetaModel","getMetaModel","sEntitySetPath","filterConditions","getCustomConditions","bind","typeConfig","getTypeConfig","dataType","oSelectionVariantConditions","convertFilterCondions","Object","keys","forEach","sKey","inParameterForKey","find","inParameter","valueListProperty","localDataProperty","propertyInfoSet","name","baseType","condition","_formatDateTime","oInParameter","index","oInternalModelContext","sInfoPath","bEnableBinding","oResourceBundle","getLibraryResourceBundle","aRequiredProperties","aNotMatchedConditions","requiredPropertyPath","errorMessageTitle","errorMessage","showError","getText","sLabel","sFilterEntityName","split","sChartEntityName","sBindingPath","getBindingPathForParameters","parameter","key","slice","getFilterInfo","filters","EQ","isSuspended","resume","getFilterCounts","oConditions","scaleVisualFilterValue","oValue","scaleFactor","numberOfFractionalDigits","currency","oRawValue","getFormattedNumber","fireValueHelp","fireValueHelpRequest"],"sources":["VisualFilterRuntime-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,6DAAO,CAAC,eAAgB,yDAA0D,sCAAuC,4BAA6B,6BAA8B,mCAAoC,mBAAoB,iCAAkC,6BAA8B,sBAAuB,+BAAgC,SAAUC,EAAKC,EAAmBC,EAAcC,EAAUC,EAAcC,EAAaC,EAAMC,EAAWC,EAAeC,EAAQC,GACre,aAEA,IAAIC,EAA2CT,EAAaS,yCAO5D,MAAMC,EAAsB,CAC1BC,iBAAiBC,GACf,MAAMC,EAAoBD,EAAOE,YACjC,MAAMC,EAAgBF,EAAkBG,KAAK,gBAC7C,MAAMC,EAAqBJ,EAAkBG,KAAK,qBAClD,MAAME,EAAaL,EAAkBG,KAAK,aAC1C,MAAMG,EAAiBN,EAAkBG,KAAK,iBAC9C,MAAMI,EAA4BP,EAAkBG,KAAK,4BACzD,MAAMK,EAAiBR,EAAkBG,KAAK,iBAC9C,MAAMM,EAAuBV,EAAOW,aAAa,QAAUX,EAAOW,aAAa,UAAYX,EAAOW,aAAa,WAC/G,MAAMC,EAAyBZ,EAAOW,aAAa,YACnD,MAAME,EAAkBZ,EAAkBa,SAAS,UACnD,IAAIC,EAAcF,EAAgBG,YAAY,eAC9C,IAAKb,GAAiBE,IAAuBC,EAAY,CACvDpB,EAAI+B,MAAM,oGACZ,KAAO,CACL,IAAIC,EAAyBR,EAAqBS,oBAAoBC,UAAUf,GAChF,GAAIa,EAAwB,CAC1B,IAAIG,EAA6BX,EAAqBS,oBAAoBC,UAAUb,GACpF,UAAWc,IAA+B,YAAcA,aAAsCC,QAAS,CACrGD,EAA6BE,SAC/B,CAEA,GAAIX,EAAwB,CAC1B,GAAIJ,IAA8B,QAAS,CACzCO,EAAc,EAChB,CACA,GAAIN,IAAmB,qBAAsB,CAC3CS,EAAyB/B,EAAkBqC,eAAeN,EAC5D,CACA,MAAMO,EAAahC,EAAUiC,oBAAoBR,EAAwBG,GAA8BE,UAAW,CAAC,EAAG,CAAC,GACvHR,EAAYY,KAAKF,EACnB,KAAO,CAELV,EAAcA,EAAYa,OAAO,SAAUH,GACzC,GAAIhB,IAAmB,qBAAsB,CAC3C,OAAOgB,EAAWI,WAAa,MAAQC,KAAKC,MAAMN,EAAWO,OAAO,MAAQF,KAAKC,MAAMb,EACzF,CACA,OAAOO,EAAWI,WAAa,MAAQJ,EAAWO,OAAO,KAAOd,CAClE,EACF,CACAL,EAAgBoB,YAAY,cAAelB,EAC7C,KAAO,CACL7B,EAAI+B,MAAM,mDACZ,CACF,CACF,EAEAiB,uBAAuBnB,GACrB,IAAIoB,EACJ,MAAMC,EAAoB,GAC1B,IAAKC,KAAKlB,oBAAqB,CAC7B,MACF,CACA,IAAK,IAAImB,EAAI,EAAGA,GAAKvB,EAAYwB,OAAS,EAAGD,IAAK,CAChD,MAAMb,EAAaV,EAAYuB,GAE/B,GAAIb,EAAWI,WAAa,KAAM,CAChCO,EAAkBT,KAAKF,EAAWO,OAAO,GAC3C,CACF,CAGA,MAAM/B,EAAoBoC,KAAKG,YAC/B,MAAMlC,EAAaL,EAAkBG,KAAK,aAC1C,MAAMK,EAAiBR,EAAkBG,KAAK,iBAC9C,IAAIqC,GAAmBN,EAAwBE,KAAKlB,uBAAyB,MAAQgB,SAA+B,OAAS,EAAIA,EAAsBf,UAAUd,GACjK,GAAIG,IAAmB,qBAAsB,CAC3CgC,EAAkBtD,EAAkBqC,eAAeiB,EACrD,CACA,OAAOL,EAAkBM,QAAQD,IAAoB,CACvD,EAEAE,2BACE,IAAIC,EAAuBC,EAAwBC,EACnD,IAAK,IAAIC,EAAOC,UAAUT,OAAQU,EAAa,IAAIC,MAAMH,GAAOI,EAAO,EAAGA,EAAOJ,EAAMI,IAAQ,CAC7FF,EAAWE,GAAQH,UAAUG,EAC/B,CACA,MAAMlD,EAAoBoC,KAAKG,YAC/B,MAAMY,GAAcR,EAAwB3C,EAAkBuC,eAAiB,MAAQI,SAA+B,OAAS,GAAKC,EAAyBD,EAAsBJ,eAAiB,MAAQK,SAAgC,OAAS,GAAKC,EAAyBD,EAAuBL,eAAiB,MAAQM,SAAgC,OAAS,EAAIA,EAAuBN,YACvY,MAAMa,EAAgBpD,EAAkBG,KAAK,gBAAgBkD,WAC7D,MAAMC,EAAoBtD,EAAkBG,KAAK,oBAAsB,OACvE,MAAMoD,EAAmBJ,EAAWK,kBACpC,MAAMC,EAAc,CAAC,EACrB,MAAMC,EAA4B,GAClC,IAAIC,EACJ,IAAIC,EAAW,GACf,MAAMC,EAAc7D,EAAkBG,KAAK,cAAckD,WACzD,MAAMS,EAA8BzE,EAAa0E,gBAAgB/D,EAAkBG,KAAK,+BACxF,MAAM6D,EAA+BhE,EAAkBiE,WAAW,SAAWjE,EAAkBiE,WAAW,WAAajE,EAAkBiE,WAAW,YACpJ,MAAMC,EAAQF,EAA6BG,UAC3C,MAAMC,EAAapE,EAAkBa,WAAWwD,eAChD,MAAMC,EAAiBN,EAA6BG,UACpD,MAAMI,EAAmB3E,EAAyC0E,EAAgBF,EAAYN,EAA6B5E,EAAkBsF,oBAAoBC,KAAKvF,IACtK,IAAK,MAAMmD,KAAKkB,EAAkB,CAChCA,EAAiBlB,GAAGqC,WAAatF,EAASuF,cAAcpB,EAAiBlB,GAAGuC,SAAU,CAAC,EAAG,CAAC,EAC7F,CACA,MAAMC,EAA8B3F,EAAkB4F,sBAAsBP,GAE5EQ,OAAOC,KAAKH,GAA6BI,QAAQ,SAAUC,GACzDzB,EAAYyB,GAAQL,EAA4BK,GAEhD,MAAMC,EAAoB/B,EAAcgC,KAAK,SAAUC,GACrD,OAAOA,EAAYC,oBAAsBJ,CAC3C,GACA,MAAMK,EAAoBJ,EAAoBA,EAAkBI,kBAAoBL,EACpF,IAAKrB,GAAeA,GAAeA,EAAYpB,QAAQyC,MAAW,EAAG,CACnE,IAAK,MAAM7C,KAAKkB,EAAkB,CAChC,MAAMiC,EAAkBjC,EAAiBlB,GACzC,GAAIkD,IAAsBC,EAAgBC,KAAM,CAC9C,GAAID,EAAgBd,WAAWgB,WAAa,WAAY,CACtD,GAAIjC,EAAYyB,GAAO,CACrBzB,EAAYyB,GAAMD,QAAQ,SAAUU,GAClCA,EAAU5D,OAAO,GAAK7C,EAAkB0G,gBAAgBD,EAAU5D,OAAO,GAC3E,EACF,CACF,CACA2B,EAA0BhC,KAAK,CAC7B+D,KAAMP,EACNR,WAAYc,EAAgBd,YAEhC,CACF,CACF,CACF,GACAtB,EAAc6B,QAAQ,SAAUY,EAAcC,GAC5C,GAAI9C,EAAW8C,GAAOxD,OAAS,EAAG,CAEhCmB,EAAYoC,EAAaP,mBAAqBtC,EAAW8C,GACzD,IAAKjC,GAAeA,GAAeA,EAAYpB,QAAQoD,EAAaP,sBAAwB,EAAG,CAQ7F,IAAK,MAAMjD,KAAKkB,EAAkB,CAEhC,MAAMiC,EAAkBjC,EAAiBlB,GACzC,GAAImD,EAAgBC,OAASI,EAAaN,kBAAmB,CAC3D,GAAIC,EAAgBd,WAAWgB,WAAa,WAAY,CACtD,GAAIjC,EAAYoC,EAAaP,mBAAoB,CAC/C7B,EAAYoC,EAAaP,mBAAmBL,QAAQ,SAAUU,GAC5DA,EAAU5D,OAAO,GAAK7C,EAAkB0G,gBAAgBD,EAAU5D,OAAO,GAC3E,EACF,CACF,CACA2B,EAA0BhC,KAAK,CAC7B+D,KAAMI,EAAaP,kBACnBZ,WAAYc,EAAgBd,YAEhC,CACF,CACF,CACF,CACF,GACA,MAAMqB,EAAwB/F,EAAkBkB,kBAAkB,YAClE,MAAM8E,EAAYhG,EAAkBG,KAAK,YACzC,IAAI8F,EACJ,MAAMC,EAAkB3G,EAAK4G,yBAAyB,iBACtD,MAAMC,EAAsB/G,EAAa0E,gBAAgB/D,EAAkBG,KAAK,uBAChF,GAAIiG,EAAoB9D,OAAQ,CAC9B,MAAMxB,EAAciE,OAAOC,KAAKvB,IAAgB,GAChD,MAAM4C,EAAwB,GAC9BD,EAAoBnB,QAAQ,SAAUqB,GACpC,GAAIxF,EAAY2B,QAAQ6D,MAA2B,EAAG,CACpDD,EAAsB3E,KAAK4E,EAC7B,CACF,GACA,IAAKD,EAAsB/D,OAAQ,CACjC2D,EAAiBF,EAAsBhF,YAAY,GAAGiF,eACtDD,EAAsB/D,YAAYgE,EAAW,CAC3CO,kBAAmB,GACnBC,aAAc,GACdC,UAAW,OAEf,MAAO,GAAIJ,EAAsB/D,OAAS,EAAG,CAC3CyD,EAAsB/D,YAAYgE,EAAW,CAC3CO,kBAAmBL,EAAgBQ,QAAQ,wCAC3CF,aAAcN,EAAgBQ,QAAQ,kDACtCD,UAAW,OAEb,MACF,KAAO,CACL,MAAME,EAASvC,EAAWjD,UAAU,GAAGmD,KAAkB+B,EAAsB,4CAA8CA,EAAsB,GACnJN,EAAsB/D,YAAYgE,EAAW,CAC3CO,kBAAmBL,EAAgBQ,QAAQ,wCAC3CF,aAAcN,EAAgBQ,QAAQ,+CAAgDC,GACtFF,UAAW,OAEb,MACF,CACF,KAAO,CACLR,EAAiBF,EAAsBhF,YAAY,GAAGiF,eACtDD,EAAsB/D,YAAYgE,EAAW,CAC3CO,kBAAmB,GACnBC,aAAc,GACdC,UAAW,OAEf,CACA,MAAMG,EAAoBzD,EAAWhD,KAAK,cAAc0G,MAAM,KAAK,GACnE,MAAMC,EAAmB5C,EAAM2C,MAAM,KAAK,GAAGA,MAAM,KAAK,GACxD,GAAIhD,GAAeA,EAAYvB,QAAUsE,IAAsBE,EAAkB,CAC/E,MAAMC,EAAed,EAAiB3G,EAAY0H,4BAA4B7D,EAAYM,EAAaF,EAAkBM,GAAevC,UACxI,GAAIyF,EAAc,CAChB/C,EAA6BE,MAAQ6C,CACvC,CACF,CACA,GAAIlD,GAAeA,EAAYvB,OAAQ,CAErCuB,EAAYoB,QAAQ,SAAUgC,GAC5B,GAAIxD,EAAYwD,GAAY,QACnBxD,EAAYwD,EACrB,CACF,EACF,CAGAlC,OAAOC,KAAKvB,GAAawB,QAAQ,SAAUiC,GACzCzD,EAAYyD,GAAKjC,QAAQ,SAAUU,GACjC,GAAIA,EAAU5D,OAAOO,OAAS,EAAG,CAC/BqD,EAAU5D,OAAS4D,EAAU5D,OAAOoF,MAAM,EAAG,EAC/C,CACF,EACF,GAIA,GAAIpC,OAAOC,KAAKvB,GAAanB,OAAS,GAAKoB,EAA0BpB,OAAQ,CAC3EqB,EAAWlE,EAAc2H,cAAcjE,EAAYM,EAAaC,EAA2B,IAAI2D,QAC/F,GAAI1D,EAAU,CACZ,IAAKA,EAASC,SAAU,CACtBA,EAASlC,KAAKiC,EAChB,MAAO,GAAIA,EAASC,SAAU,CAC5BA,EAAWD,EAASC,QACtB,CACF,CACF,CACA,GAAIN,EAAmB,CACrBM,EAASlC,KAAK,IAAIhC,EAAO,iBAAkBC,EAAe2H,GAAI,MAChE,CACA,GAAI1D,GAAYA,EAAStB,OAAS,EAAG,CACnC0B,EAA6BrC,OAAOiC,EACtC,MAAO,IAAKmB,OAAOC,KAAKvB,GAAanB,OAAQ,CAC3C0B,EAA6BrC,QAC/B,CAEA,GAAIsE,GAAkBjC,EAA6BuD,cAAe,CAChEvD,EAA6BwD,QAC/B,CACA,OAAO5D,CACT,EACA6D,gBAAgBC,GACd,GAAIA,EAAYpF,OAAS,EAAG,CAC1B,MAAO,IAAIoF,EAAYpF,SACzB,KAAO,CACL,OAAOhB,SACT,CACF,EACAqG,uBAAuBC,EAAQC,EAAaC,EAA0BC,EAAUC,GAE9E,GAAIH,EAAa,CACf,OAAO3I,EAAkB+I,mBAAmBD,EAAWH,EAAaC,EAEtE,MAAO,GAAIC,EAAU,CACnB,OAAO7I,EAAkB+I,mBAAmBD,EAAW1G,UAAWA,UAAWyG,EAE/E,MAAO,GAAID,EAA2B,EAAG,CAEvCA,EAA2BA,EAA2B,EAAI,EAAIA,EAC9D,OAAO5I,EAAkB+I,mBAAmBD,EAAW1G,UAAWwG,EACpE,KAAO,CACL,OAAOF,CACT,CACF,EACAM,cAAcnI,GACZA,EAAOE,YAAYsC,YAAYA,YAAYA,YAAY4F,sBACzD,GAMF,OAAOtI,CACT,EAAG","sourceRoot":"visualfilters"}},{"offset":{"line":29554,"column":0},"map":{"version":3,"sources":["library-preload.js?bundle-code-0"],"mappings":"AAAA;AACA","sourcesContent":["sap.ui.require.preload({\n"],"sourceRoot":""}}]}