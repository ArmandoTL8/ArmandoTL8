/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/util/deepClone", "sap/base/util/merge", "sap/base/util/uid", "sap/fe/core/converters/ConverterContext"], function (deepClone, merge, uid, ConverterContext) {
  "use strict";

  const fnGetOverrides = function (mControlConfiguration, sID) {
    const oProps = {};
    if (mControlConfiguration) {
      const oControlConfig = mControlConfiguration[sID];
      if (oControlConfig) {
        Object.keys(oControlConfig).forEach(function (sConfigKey) {
          oProps[sConfigKey] = oControlConfig[sConfigKey];
        });
      }
    }
    return oProps;
  };
  const fnSetDefaultValue = function (oProps, sPropName, oOverrideValue, bForceUpdate) {
    if (oProps[sPropName] === undefined || bForceUpdate) {
      oProps[sPropName] = oOverrideValue;
    }
  };
  const MacroMetadata = {
    metadata: {
      properties: {
        _flexId: {
          type: "string"
        }
      }
    },
    extend: function (fnName, oContent) {
      oContent.metadata.properties._flexId = MacroMetadata.metadata.properties._flexId;
      oContent.hasValidation = true;
      oContent.getOverrides = fnGetOverrides.bind(oContent);
      oContent.setDefaultValue = fnSetDefaultValue.bind(oContent);
      oContent.getConverterContext = function (oVisualizationObjectPath, contextPath, mSettings, mExtraParams) {
        const oAppComponent = mSettings.appComponent;
        const originalViewData = mSettings.models.viewData && mSettings.models.viewData.getData();
        let viewData = Object.assign({}, originalViewData);
        delete viewData.resourceBundle;
        viewData = deepClone(viewData);
        viewData.controlConfiguration = merge(viewData.controlConfiguration, mExtraParams);
        return ConverterContext.createConverterContextForMacro(oVisualizationObjectPath.startingEntitySet.name, mSettings.models.metaModel, oAppComponent && oAppComponent.getDiagnostics(), merge, oVisualizationObjectPath.contextLocation, viewData);
      };
      oContent.createBindingContext = function (oData, mSettings) {
        const sContextPath = `/uid--${uid()}`;
        mSettings.models.converterContext.setProperty(sContextPath, oData);
        return mSettings.models.converterContext.createBindingContext(sContextPath);
      };
      oContent.parseAggregation = function (oAggregation, fnCallback) {
        const oOutObjects = {};
        if (oAggregation && oAggregation.children.length > 0) {
          const children = oAggregation.children;
          for (let childIdx = 0; childIdx < children.length; childIdx++) {
            const childObject = fnCallback(children[childIdx], childIdx);
            if (childObject) {
              oOutObjects[childObject.key] = childObject;
            }
          }
        }
        return oOutObjects;
      };
      oContent.getContentId = function (sMacroId) {
        return `${sMacroId}-content`;
      };
      return oContent;
    }
  };
  return MacroMetadata;
}, false);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmbkdldE92ZXJyaWRlcyIsIm1Db250cm9sQ29uZmlndXJhdGlvbiIsInNJRCIsIm9Qcm9wcyIsIm9Db250cm9sQ29uZmlnIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJzQ29uZmlnS2V5IiwiZm5TZXREZWZhdWx0VmFsdWUiLCJzUHJvcE5hbWUiLCJvT3ZlcnJpZGVWYWx1ZSIsImJGb3JjZVVwZGF0ZSIsInVuZGVmaW5lZCIsIk1hY3JvTWV0YWRhdGEiLCJtZXRhZGF0YSIsInByb3BlcnRpZXMiLCJfZmxleElkIiwidHlwZSIsImV4dGVuZCIsImZuTmFtZSIsIm9Db250ZW50IiwiaGFzVmFsaWRhdGlvbiIsImdldE92ZXJyaWRlcyIsImJpbmQiLCJzZXREZWZhdWx0VmFsdWUiLCJnZXRDb252ZXJ0ZXJDb250ZXh0Iiwib1Zpc3VhbGl6YXRpb25PYmplY3RQYXRoIiwiY29udGV4dFBhdGgiLCJtU2V0dGluZ3MiLCJtRXh0cmFQYXJhbXMiLCJvQXBwQ29tcG9uZW50IiwiYXBwQ29tcG9uZW50Iiwib3JpZ2luYWxWaWV3RGF0YSIsIm1vZGVscyIsInZpZXdEYXRhIiwiZ2V0RGF0YSIsImFzc2lnbiIsInJlc291cmNlQnVuZGxlIiwiZGVlcENsb25lIiwiY29udHJvbENvbmZpZ3VyYXRpb24iLCJtZXJnZSIsIkNvbnZlcnRlckNvbnRleHQiLCJjcmVhdGVDb252ZXJ0ZXJDb250ZXh0Rm9yTWFjcm8iLCJzdGFydGluZ0VudGl0eVNldCIsIm5hbWUiLCJtZXRhTW9kZWwiLCJnZXREaWFnbm9zdGljcyIsImNvbnRleHRMb2NhdGlvbiIsImNyZWF0ZUJpbmRpbmdDb250ZXh0Iiwib0RhdGEiLCJzQ29udGV4dFBhdGgiLCJ1aWQiLCJjb252ZXJ0ZXJDb250ZXh0Iiwic2V0UHJvcGVydHkiLCJwYXJzZUFnZ3JlZ2F0aW9uIiwib0FnZ3JlZ2F0aW9uIiwiZm5DYWxsYmFjayIsIm9PdXRPYmplY3RzIiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJjaGlsZElkeCIsImNoaWxkT2JqZWN0Iiwia2V5IiwiZ2V0Q29udGVudElkIiwic01hY3JvSWQiXSwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIk1hY3JvTWV0YWRhdGEudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRlZXBDbG9uZSBmcm9tIFwic2FwL2Jhc2UvdXRpbC9kZWVwQ2xvbmVcIjtcbmltcG9ydCBtZXJnZSBmcm9tIFwic2FwL2Jhc2UvdXRpbC9tZXJnZVwiO1xuaW1wb3J0IHVpZCBmcm9tIFwic2FwL2Jhc2UvdXRpbC91aWRcIjtcbmltcG9ydCBDb252ZXJ0ZXJDb250ZXh0IGZyb20gXCJzYXAvZmUvY29yZS9jb252ZXJ0ZXJzL0NvbnZlcnRlckNvbnRleHRcIjtcbmNvbnN0IGZuR2V0T3ZlcnJpZGVzID0gZnVuY3Rpb24gKG1Db250cm9sQ29uZmlndXJhdGlvbjogYW55LCBzSUQ6IHN0cmluZykge1xuXHRjb25zdCBvUHJvcHM6IGFueSA9IHt9O1xuXHRpZiAobUNvbnRyb2xDb25maWd1cmF0aW9uKSB7XG5cdFx0Y29uc3Qgb0NvbnRyb2xDb25maWcgPSBtQ29udHJvbENvbmZpZ3VyYXRpb25bc0lEXTtcblx0XHRpZiAob0NvbnRyb2xDb25maWcpIHtcblx0XHRcdE9iamVjdC5rZXlzKG9Db250cm9sQ29uZmlnKS5mb3JFYWNoKGZ1bmN0aW9uIChzQ29uZmlnS2V5OiBzdHJpbmcpIHtcblx0XHRcdFx0b1Byb3BzW3NDb25maWdLZXldID0gb0NvbnRyb2xDb25maWdbc0NvbmZpZ0tleV07XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIG9Qcm9wcztcbn07XG5jb25zdCBmblNldERlZmF1bHRWYWx1ZSA9IGZ1bmN0aW9uIChvUHJvcHM6IGFueSwgc1Byb3BOYW1lOiBzdHJpbmcsIG9PdmVycmlkZVZhbHVlOiBhbnksIGJGb3JjZVVwZGF0ZTogYm9vbGVhbikge1xuXHRpZiAob1Byb3BzW3NQcm9wTmFtZV0gPT09IHVuZGVmaW5lZCB8fCBiRm9yY2VVcGRhdGUpIHtcblx0XHRvUHJvcHNbc1Byb3BOYW1lXSA9IG9PdmVycmlkZVZhbHVlO1xuXHR9XG59O1xuY29uc3QgTWFjcm9NZXRhZGF0YSA9IHtcblx0bWV0YWRhdGE6IHtcblx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRfZmxleElkOiB7XG5cdFx0XHRcdHR5cGU6IFwic3RyaW5nXCJcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cdGV4dGVuZDogZnVuY3Rpb24gKGZuTmFtZTogYW55LCBvQ29udGVudDogYW55KSB7XG5cdFx0b0NvbnRlbnQubWV0YWRhdGEucHJvcGVydGllcy5fZmxleElkID0gTWFjcm9NZXRhZGF0YS5tZXRhZGF0YS5wcm9wZXJ0aWVzLl9mbGV4SWQ7XG5cdFx0b0NvbnRlbnQuaGFzVmFsaWRhdGlvbiA9IHRydWU7XG5cdFx0b0NvbnRlbnQuZ2V0T3ZlcnJpZGVzID0gZm5HZXRPdmVycmlkZXMuYmluZChvQ29udGVudCk7XG5cdFx0b0NvbnRlbnQuc2V0RGVmYXVsdFZhbHVlID0gZm5TZXREZWZhdWx0VmFsdWUuYmluZChvQ29udGVudCk7XG5cdFx0b0NvbnRlbnQuZ2V0Q29udmVydGVyQ29udGV4dCA9IGZ1bmN0aW9uIChvVmlzdWFsaXphdGlvbk9iamVjdFBhdGg6IGFueSwgY29udGV4dFBhdGg6IGFueSwgbVNldHRpbmdzOiBhbnksIG1FeHRyYVBhcmFtczogYW55KSB7XG5cdFx0XHRjb25zdCBvQXBwQ29tcG9uZW50ID0gbVNldHRpbmdzLmFwcENvbXBvbmVudDtcblx0XHRcdGNvbnN0IG9yaWdpbmFsVmlld0RhdGEgPSBtU2V0dGluZ3MubW9kZWxzLnZpZXdEYXRhICYmIG1TZXR0aW5ncy5tb2RlbHMudmlld0RhdGEuZ2V0RGF0YSgpO1xuXHRcdFx0bGV0IHZpZXdEYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgb3JpZ2luYWxWaWV3RGF0YSk7XG5cdFx0XHRkZWxldGUgdmlld0RhdGEucmVzb3VyY2VCdW5kbGU7XG5cdFx0XHR2aWV3RGF0YSA9IGRlZXBDbG9uZSh2aWV3RGF0YSk7XG5cdFx0XHR2aWV3RGF0YS5jb250cm9sQ29uZmlndXJhdGlvbiA9IG1lcmdlKHZpZXdEYXRhLmNvbnRyb2xDb25maWd1cmF0aW9uLCBtRXh0cmFQYXJhbXMpO1xuXHRcdFx0cmV0dXJuIENvbnZlcnRlckNvbnRleHQuY3JlYXRlQ29udmVydGVyQ29udGV4dEZvck1hY3JvKFxuXHRcdFx0XHRvVmlzdWFsaXphdGlvbk9iamVjdFBhdGguc3RhcnRpbmdFbnRpdHlTZXQubmFtZSxcblx0XHRcdFx0bVNldHRpbmdzLm1vZGVscy5tZXRhTW9kZWwsXG5cdFx0XHRcdG9BcHBDb21wb25lbnQgJiYgb0FwcENvbXBvbmVudC5nZXREaWFnbm9zdGljcygpLFxuXHRcdFx0XHRtZXJnZSxcblx0XHRcdFx0b1Zpc3VhbGl6YXRpb25PYmplY3RQYXRoLmNvbnRleHRMb2NhdGlvbixcblx0XHRcdFx0dmlld0RhdGFcblx0XHRcdCk7XG5cdFx0fTtcblx0XHRvQ29udGVudC5jcmVhdGVCaW5kaW5nQ29udGV4dCA9IGZ1bmN0aW9uIChvRGF0YTogYW55LCBtU2V0dGluZ3M6IGFueSkge1xuXHRcdFx0Y29uc3Qgc0NvbnRleHRQYXRoID0gYC91aWQtLSR7dWlkKCl9YDtcblx0XHRcdG1TZXR0aW5ncy5tb2RlbHMuY29udmVydGVyQ29udGV4dC5zZXRQcm9wZXJ0eShzQ29udGV4dFBhdGgsIG9EYXRhKTtcblx0XHRcdHJldHVybiBtU2V0dGluZ3MubW9kZWxzLmNvbnZlcnRlckNvbnRleHQuY3JlYXRlQmluZGluZ0NvbnRleHQoc0NvbnRleHRQYXRoKTtcblx0XHR9O1xuXHRcdG9Db250ZW50LnBhcnNlQWdncmVnYXRpb24gPSBmdW5jdGlvbiAob0FnZ3JlZ2F0aW9uOiBhbnksIGZuQ2FsbGJhY2s6IEZ1bmN0aW9uKSB7XG5cdFx0XHRjb25zdCBvT3V0T2JqZWN0czogYW55ID0ge307XG5cdFx0XHRpZiAob0FnZ3JlZ2F0aW9uICYmIG9BZ2dyZWdhdGlvbi5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGNvbnN0IGNoaWxkcmVuID0gb0FnZ3JlZ2F0aW9uLmNoaWxkcmVuO1xuXHRcdFx0XHRmb3IgKGxldCBjaGlsZElkeCA9IDA7IGNoaWxkSWR4IDwgY2hpbGRyZW4ubGVuZ3RoOyBjaGlsZElkeCsrKSB7XG5cdFx0XHRcdFx0Y29uc3QgY2hpbGRPYmplY3QgPSBmbkNhbGxiYWNrKGNoaWxkcmVuW2NoaWxkSWR4XSwgY2hpbGRJZHgpO1xuXHRcdFx0XHRcdGlmIChjaGlsZE9iamVjdCkge1xuXHRcdFx0XHRcdFx0b091dE9iamVjdHNbY2hpbGRPYmplY3Qua2V5XSA9IGNoaWxkT2JqZWN0O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG9PdXRPYmplY3RzO1xuXHRcdH07XG5cblx0XHRvQ29udGVudC5nZXRDb250ZW50SWQgPSBmdW5jdGlvbiAoc01hY3JvSWQ6IHN0cmluZykge1xuXHRcdFx0cmV0dXJuIGAke3NNYWNyb0lkfS1jb250ZW50YDtcblx0XHR9O1xuXG5cdFx0cmV0dXJuIG9Db250ZW50O1xuXHR9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBNYWNyb01ldGFkYXRhO1xuIl0sIm1hcHBpbmdzIjoiO0FBQUE7QUFBQTtBQUFBOzs7O0VBSUEsTUFBTUEsY0FBYyxHQUFHLFVBQVVDLHFCQUEwQixFQUFFQyxHQUFXLEVBQUU7SUFDekUsTUFBTUMsTUFBVyxHQUFHLENBQUMsQ0FBQztJQUN0QixJQUFJRixxQkFBcUIsRUFBRTtNQUMxQixNQUFNRyxjQUFjLEdBQUdILHFCQUFxQixDQUFDQyxHQUFHLENBQUM7TUFDakQsSUFBSUUsY0FBYyxFQUFFO1FBQ25CQyxNQUFNLENBQUNDLElBQUksQ0FBQ0YsY0FBYyxDQUFDLENBQUNHLE9BQU8sQ0FBQyxVQUFVQyxVQUFrQixFQUFFO1VBQ2pFTCxNQUFNLENBQUNLLFVBQVUsQ0FBQyxHQUFHSixjQUFjLENBQUNJLFVBQVUsQ0FBQztRQUNoRCxDQUFDLENBQUM7TUFDSDtJQUNEO0lBQ0EsT0FBT0wsTUFBTTtFQUNkLENBQUM7RUFDRCxNQUFNTSxpQkFBaUIsR0FBRyxVQUFVTixNQUFXLEVBQUVPLFNBQWlCLEVBQUVDLGNBQW1CLEVBQUVDLFlBQXFCLEVBQUU7SUFDL0csSUFBSVQsTUFBTSxDQUFDTyxTQUFTLENBQUMsS0FBS0csU0FBUyxJQUFJRCxZQUFZLEVBQUU7TUFDcERULE1BQU0sQ0FBQ08sU0FBUyxDQUFDLEdBQUdDLGNBQWM7SUFDbkM7RUFDRCxDQUFDO0VBQ0QsTUFBTUcsYUFBYSxHQUFHO0lBQ3JCQyxRQUFRLEVBQUU7TUFDVEMsVUFBVSxFQUFFO1FBQ1hDLE9BQU8sRUFBRTtVQUNSQyxJQUFJLEVBQUU7UUFDUDtNQUNEO0lBQ0QsQ0FBQztJQUNEQyxNQUFNLEVBQUUsVUFBVUMsTUFBVyxFQUFFQyxRQUFhLEVBQUU7TUFDN0NBLFFBQVEsQ0FBQ04sUUFBUSxDQUFDQyxVQUFVLENBQUNDLE9BQU8sR0FBR0gsYUFBYSxDQUFDQyxRQUFRLENBQUNDLFVBQVUsQ0FBQ0MsT0FBTztNQUNoRkksUUFBUSxDQUFDQyxhQUFhLEdBQUcsSUFBSTtNQUM3QkQsUUFBUSxDQUFDRSxZQUFZLEdBQUd2QixjQUFjLENBQUN3QixJQUFJLENBQUNILFFBQVEsQ0FBQztNQUNyREEsUUFBUSxDQUFDSSxlQUFlLEdBQUdoQixpQkFBaUIsQ0FBQ2UsSUFBSSxDQUFDSCxRQUFRLENBQUM7TUFDM0RBLFFBQVEsQ0FBQ0ssbUJBQW1CLEdBQUcsVUFBVUMsd0JBQTZCLEVBQUVDLFdBQWdCLEVBQUVDLFNBQWMsRUFBRUMsWUFBaUIsRUFBRTtRQUM1SCxNQUFNQyxhQUFhLEdBQUdGLFNBQVMsQ0FBQ0csWUFBWTtRQUM1QyxNQUFNQyxnQkFBZ0IsR0FBR0osU0FBUyxDQUFDSyxNQUFNLENBQUNDLFFBQVEsSUFBSU4sU0FBUyxDQUFDSyxNQUFNLENBQUNDLFFBQVEsQ0FBQ0MsT0FBTyxFQUFFO1FBQ3pGLElBQUlELFFBQVEsR0FBRzlCLE1BQU0sQ0FBQ2dDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRUosZ0JBQWdCLENBQUM7UUFDbEQsT0FBT0UsUUFBUSxDQUFDRyxjQUFjO1FBQzlCSCxRQUFRLEdBQUdJLFNBQVMsQ0FBQ0osUUFBUSxDQUFDO1FBQzlCQSxRQUFRLENBQUNLLG9CQUFvQixHQUFHQyxLQUFLLENBQUNOLFFBQVEsQ0FBQ0ssb0JBQW9CLEVBQUVWLFlBQVksQ0FBQztRQUNsRixPQUFPWSxnQkFBZ0IsQ0FBQ0MsOEJBQThCLENBQ3JEaEIsd0JBQXdCLENBQUNpQixpQkFBaUIsQ0FBQ0MsSUFBSSxFQUMvQ2hCLFNBQVMsQ0FBQ0ssTUFBTSxDQUFDWSxTQUFTLEVBQzFCZixhQUFhLElBQUlBLGFBQWEsQ0FBQ2dCLGNBQWMsRUFBRSxFQUMvQ04sS0FBSyxFQUNMZCx3QkFBd0IsQ0FBQ3FCLGVBQWUsRUFDeENiLFFBQVEsQ0FDUjtNQUNGLENBQUM7TUFDRGQsUUFBUSxDQUFDNEIsb0JBQW9CLEdBQUcsVUFBVUMsS0FBVSxFQUFFckIsU0FBYyxFQUFFO1FBQ3JFLE1BQU1zQixZQUFZLEdBQUksU0FBUUMsR0FBRyxFQUFHLEVBQUM7UUFDckN2QixTQUFTLENBQUNLLE1BQU0sQ0FBQ21CLGdCQUFnQixDQUFDQyxXQUFXLENBQUNILFlBQVksRUFBRUQsS0FBSyxDQUFDO1FBQ2xFLE9BQU9yQixTQUFTLENBQUNLLE1BQU0sQ0FBQ21CLGdCQUFnQixDQUFDSixvQkFBb0IsQ0FBQ0UsWUFBWSxDQUFDO01BQzVFLENBQUM7TUFDRDlCLFFBQVEsQ0FBQ2tDLGdCQUFnQixHQUFHLFVBQVVDLFlBQWlCLEVBQUVDLFVBQW9CLEVBQUU7UUFDOUUsTUFBTUMsV0FBZ0IsR0FBRyxDQUFDLENBQUM7UUFDM0IsSUFBSUYsWUFBWSxJQUFJQSxZQUFZLENBQUNHLFFBQVEsQ0FBQ0MsTUFBTSxHQUFHLENBQUMsRUFBRTtVQUNyRCxNQUFNRCxRQUFRLEdBQUdILFlBQVksQ0FBQ0csUUFBUTtVQUN0QyxLQUFLLElBQUlFLFFBQVEsR0FBRyxDQUFDLEVBQUVBLFFBQVEsR0FBR0YsUUFBUSxDQUFDQyxNQUFNLEVBQUVDLFFBQVEsRUFBRSxFQUFFO1lBQzlELE1BQU1DLFdBQVcsR0FBR0wsVUFBVSxDQUFDRSxRQUFRLENBQUNFLFFBQVEsQ0FBQyxFQUFFQSxRQUFRLENBQUM7WUFDNUQsSUFBSUMsV0FBVyxFQUFFO2NBQ2hCSixXQUFXLENBQUNJLFdBQVcsQ0FBQ0MsR0FBRyxDQUFDLEdBQUdELFdBQVc7WUFDM0M7VUFDRDtRQUNEO1FBQ0EsT0FBT0osV0FBVztNQUNuQixDQUFDO01BRURyQyxRQUFRLENBQUMyQyxZQUFZLEdBQUcsVUFBVUMsUUFBZ0IsRUFBRTtRQUNuRCxPQUFRLEdBQUVBLFFBQVMsVUFBUztNQUM3QixDQUFDO01BRUQsT0FBTzVDLFFBQVE7SUFDaEI7RUFDRCxDQUFDO0VBQUMsT0FFYVAsYUFBYTtBQUFBIn0=