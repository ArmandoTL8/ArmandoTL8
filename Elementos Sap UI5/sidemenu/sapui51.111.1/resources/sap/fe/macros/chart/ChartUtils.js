/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/macros/filter/FilterUtils","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(t,e,n){"use strict";let i=[];const r={getChartSelectionsExist:function(t,e){const n=e||t;if(t){try{const e=t.getControlDelegate()._getChart(t);if(e){const r=this.getDimensionsFromDrillStack(e);const s=r.length>i.length;const o=r.length<i.length;const l=r.toString()===i.toString();let c;if(o&&r.length===1){c=this.getChartSelections(t,true)}else{c=this.getChartSelections(t)}if(s||o){i=r;return c.length>0}else if(l&&n.isA("sap.ui.mdc.Table")){return c.length>0}}}catch(t){return false}}return false},getChartSelections:function(t,e){if(e){this.getChartModel(t,"",{})}const n=this.getChartModel(t,"filters");return n||[]},getChartFilters:function(t){const n=this.getChartSelections(t)||[];return new e(n)},setChartFilters:function(t){const i=this.getChartModel(t,"drillStack")||{};const r=t.getControlDelegate()._getChart(t);const s=[];let o;function l(t){for(const i in t){const r=[];for(const s in o){const l=o[s];const c=t[i].data[l];if(c!==undefined){r.push(new e({path:l,operator:n.EQ,value1:c}))}}if(r.length>0){s.push(new e(r,true))}}}if(r){const e=this.getVizSelection(r);o=r.getVisibleDimensions();const n=this.getDimensionsFromDrillStack(r);if(n.length>0){this.getChartModel(t,"drillStack",{});i[n.toString()]=e;this.getChartModel(t,"drillStack",i)}if(e.length>0){l(e)}else{const t=Object.keys(i)||[];const e=i[t[t.length-2]]||[];l(e)}this.getChartModel(t,"filters",s)}},getFilterBarFilterInfo:function(e){return t.getFilterInfo(e.getFilter(),{targetControl:e})},getAllFilterInfo:function(t){const e=this.getFilterBarFilterInfo(t);const n=this.getChartFilters(t);if(n&&n.aFilters&&n.aFilters.length){e.filters.push(n)}return e},getChartSelectedData:function(t){let e=[];switch(t.getSelectionBehavior()){case"DATAPOINT":e=t.getSelectedDataPoints().dataPoints;break;case"CATEGORY":e=t.getSelectedCategories().categories;break;case"SERIES":e=t.getSelectedSeries().series;break}return e},getChartModel:function(t,e,n){const i=t.getBindingContext("internal");if(!i){return false}if(n){i.setProperty(e,n)}return i&&i.getObject(e)},getDimensionsFromDrillStack:function(t){const e=t.getDrillStack()||[];const n=e.pop()||{};return n.dimension||[]},getVizSelection:function(t){return t&&t._getVizFrame()&&t._getVizFrame().vizSelection()||[]}};return r},false);
//# sourceMappingURL=ChartUtils.js.map