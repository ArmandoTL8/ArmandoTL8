/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/util/JSTokenizer", "sap/fe/core/CommonUtils", "sap/fe/core/controls/filterbar/utils/VisualFilterUtils", "sap/fe/core/helpers/StableIdHelper", "sap/fe/core/templating/CriticalityFormatters", "sap/fe/core/templating/FilterHelper", "sap/fe/core/type/TypeUtil", "sap/fe/macros/CommonHelper", "sap/fe/macros/filter/FilterFieldHelper", "sap/fe/macros/ResourceModel", "sap/ui/core/format/NumberFormat", "sap/ui/mdc/condition/ConditionConverter", "sap/ui/model/odata/v4/AnnotationHelper", "sap/ui/model/odata/v4/ODataUtils"], function (JSTokenizer, CommonUtils, VisualFilterUtils, StableIdHelper, CriticalityFormatters, FilterHelper, TypeUtil, CommonHelper, FilterFieldHelper, ResourceModel, NumberFormat, ConditionConverter, ODataModelAnnotationHelper, ODataUtils) {
  "use strict";

  var getFiltersConditionsFromSelectionVariant = FilterHelper.getFiltersConditionsFromSelectionVariant;
  var buildExpressionForCriticalityColorMicroChart = CriticalityFormatters.buildExpressionForCriticalityColorMicroChart;
  var generate = StableIdHelper.generate;
  const InteractiveChartHelper = {
    getChartDisplayedValue: function (value, oValueFormat, sMetaPath) {
      //var sType = "" + value + "@odata.type";
      const sInfoPath = generate([sMetaPath]);
      return "{parts:[{path:'" + value + "',type:'sap.ui.model.odata.type.Decimal', constraints:{'nullable':false}}" + (oValueFormat && oValueFormat.ScaleFactor ? ",{value:'" + oValueFormat.ScaleFactor.$Decimal + "'}" : ",{path:'internal>scalefactorNumber/" + sInfoPath + "'}") + (oValueFormat && oValueFormat.NumberOfFractionalDigits ? ",{value:'" + oValueFormat.NumberOfFractionalDigits + "'}" : ",{value:'0'}") + ",{path:'internal>currency/" + sInfoPath + "'}" + ",{path:'" + value + "',type:'sap.ui.model.odata.type.String', constraints:{'nullable':false}}" + "], formatter:'VisualFilterRuntime.scaleVisualFilterValue'}"; //+ sType.split('#').length ? sType.split('#')[1] : 'Decimal' + "}";
    },

    getChartValue: function (oValue) {
      return "{path:'" + oValue + "',type:'sap.ui.model.odata.type.Decimal', constraints:{'nullable':false}}";
    },
    getChart: function (oMetaPath) {
      const oModel = oMetaPath.getModel();
      const oPresentationVariant = oModel.getObject(oMetaPath.getPath());
      const aVisualizations = oPresentationVariant.Visualizations;
      for (let i = 0; i < aVisualizations.length; i++) {
        if (aVisualizations[i].$AnnotationPath.indexOf("com.sap.vocabularies.UI.v1.Chart") > -1) {
          const sCollectionPath = ODataModelAnnotationHelper.getNavigationPath(oMetaPath.getPath());
          return oModel.createBindingContext(sCollectionPath + "/" + aVisualizations[i].$AnnotationPath);
        }
      }
      return undefined;
    },
    getChartLabel: function () {
      return arguments.length <= 2 ? undefined : arguments[2];
    },
    /**
     * Build the expression for measure path based on whether CustomAggregate/Dynamic/TransformationAggregate measures exists.
     *
     * @param oChartAnnotation Chart configurations.
     * @param bCustomAggregate Indicator for existence for custom aggregates in chart measures.
     * @returns Measure Path
     */
    _getMeasurePath: function (oChartAnnotation, bCustomAggregate) {
      let sMeasurePath;
      if (bCustomAggregate) {
        sMeasurePath = "/Measures/0/$PropertyPath";
      }
      if (oChartAnnotation.DynamicMeasures && oChartAnnotation.DynamicMeasures.length > 0) {
        sMeasurePath = "/DynamicMeasures/0/$AnnotationPath/AggregatableProperty/$PropertyPath";
      } else if (!bCustomAggregate && oChartAnnotation.Measures && oChartAnnotation.Measures.length > 0) {
        sMeasurePath = "/Measures/0/$PropertyPath";
      }
      return sMeasurePath;
    },
    getAggregationBinding: function (oInterface, oChartAnnotations, oCollection, oTextAssociation, oDimensionType, aSortOrder, selectionVariantAnnotation, bCustomAggregate, oAggregation, bUoMHasCustomAggregate, aParameters, oFilterBarContext, bDraftSupported, sChartMeasure) {
      const sEntityType = oFilterBarContext ? oFilterBarContext.getPath() : "";
      const sDimension = oChartAnnotations.Dimensions[0].$PropertyPath;
      const aFilters = [];
      let sAggregationExpression, sUOMExpression, filterConditions, sBindingPath;
      let sCollectionName = oCollection.$kind == "NavigationProperty" ? oInterface.getPath(1) : (oCollection.$kind == "EntitySet" ? "/" : "") + oInterface.getModel(1).getObject(`${oInterface.getPath(1)}@sapui.name`);
      const vUOM = InteractiveChartHelper.getUoM(oInterface, oChartAnnotations, oCollection, undefined, bCustomAggregate, oAggregation);
      const sEntitySetPath = oInterface.getInterface(1).getPath(),
        oMetaModel = oInterface.getInterface(1).getModel();
      if (bDraftSupported) {
        aFilters.push({
          operator: "EQ",
          value1: "true",
          value2: null,
          path: "IsActiveEntity",
          isParameter: true
        });
      }
      if (selectionVariantAnnotation && selectionVariantAnnotation.getObject()) {
        filterConditions = getFiltersConditionsFromSelectionVariant(sEntitySetPath, oMetaModel, selectionVariantAnnotation.getObject(), VisualFilterUtils.getCustomConditions.bind(VisualFilterUtils));
        for (const sPath in filterConditions) {
          const aConditions = filterConditions[sPath];
          aConditions.forEach(function (oCondition) {
            if (!oCondition.isParameter) {
              aFilters.push(oCondition);
            }
          });
        }
      }
      if (sEntityType !== `${sCollectionName}/` && aParameters && aParameters.length && filterConditions) {
        const aParams = [];
        const convertedFilterConditions = VisualFilterUtils.convertFilterCondions(filterConditions);
        const parameterProperties = CommonUtils.getParameterInfo(oMetaModel, sCollectionName).parameterProperties;
        if (parameterProperties) {
          for (const i in aParameters) {
            const parameter = aParameters[i];
            const oProperty = parameterProperties[parameter];
            const sEntityPath = sEntitySetPath.split("/")[1];
            const oPropertyContext = oMetaModel.createBindingContext(`/${sEntityPath}/${parameter}`);
            const oFormatOptions = JSTokenizer.parseJS(FilterFieldHelper.formatOptions(oProperty, {
              context: oPropertyContext
            }) || "{}");
            const oConstraints = JSTokenizer.parseJS(FilterFieldHelper.constraints(oProperty, {
              context: oPropertyContext
            }) || "{}");
            const typeConfig = TypeUtil.getTypeConfig(oProperty.$Type, oFormatOptions, oConstraints);
            const oCondition = convertedFilterConditions[parameter];
            const oConditionInternal = oCondition ? oCondition[0] : undefined;
            if (oConditionInternal) {
              const mInternalParameterCondition = ConditionConverter.toType(oConditionInternal, typeConfig, TypeUtil);
              const sEdmType = oProperty.$Type;
              let sValue = encodeURIComponent(ODataUtils.formatLiteral(mInternalParameterCondition.values[0], sEdmType));
              sValue = sValue.replaceAll("'", "\\'");
              aParams.push(`${parameter}=${sValue}`);
            }
          }
        }
        const sParameterEntitySet = sCollectionName.slice(0, sCollectionName.lastIndexOf("/"));
        const sTargetNavigation = sCollectionName.substring(sCollectionName.lastIndexOf("/") + 1);
        // create parameter context
        sBindingPath = `${sParameterEntitySet}(${aParams.toString()})/${sTargetNavigation}`;
        sCollectionName = sBindingPath;
      }
      if (bCustomAggregate) {
        //custom aggregate for a currency or unit of measure corresponding to this aggregatable property
        if (bUoMHasCustomAggregate) {
          sAggregationExpression = vUOM && vUOM.$Path ? `{ 'unit' : '${vUOM.$Path}' }` : "{}";
          sUOMExpression = "";
        } else {
          sAggregationExpression = "{}";
          sUOMExpression = vUOM && vUOM.$Path ? `, '${vUOM.$Path}' : {}` : "";
        }
      } else if (oAggregation && oAggregation.AggregatableProperty && oAggregation.AggregatableProperty.value && oAggregation.AggregationMethod) {
        sAggregationExpression = "{ 'name' : '" + oAggregation.AggregatableProperty.value + "', 'with' : '" + oAggregation.AggregationMethod + "'}";
        sUOMExpression = vUOM && vUOM.$Path ? ", '" + vUOM.$Path + "' : {}" : "";
      }
      const sTextAssociationExpression = oTextAssociation ? "' : { 'additionally' : ['" + oTextAssociation.$Path + "'] }" : "' : { }";
      const sFilterExpression = JSON.stringify(aFilters);
      return "{path: '" + sCollectionName + "', templateShareable: true, suspended : true, 'filters' : " + sFilterExpression + ",'parameters' : {" + InteractiveChartHelper.getSortOrder(oInterface, oMetaModel, oChartAnnotations, oDimensionType, aSortOrder, sChartMeasure) + ", '$$aggregation' : {'aggregate' : {'" + sChartMeasure + "' : " + sAggregationExpression + "},'group' : {'" + sDimension + sTextAssociationExpression + sUOMExpression + "} } }" + InteractiveChartHelper.getMaxItems(oChartAnnotations) + "}";
    },
    getSortOrder: function (oInterface, oMetaModel, oChartAnnotations, sDimensionType, aSortOrder, sChartMeasure) {
      let sSortPropertyName;
      if (oChartAnnotations.ChartType.$EnumMember === "com.sap.vocabularies.UI.v1.ChartType/Donut" || oChartAnnotations.ChartType.$EnumMember === "com.sap.vocabularies.UI.v1.ChartType/Bar") {
        if (aSortOrder && aSortOrder.length) {
          if (aSortOrder[0].DynamicProperty) {
            sSortPropertyName = oMetaModel.getObject(oInterface.getPath(0).split("@")[0] + aSortOrder[0].DynamicProperty.$AnnotationPath).Name;
          } else {
            sSortPropertyName = aSortOrder[0].Property.$PropertyPath;
          }
          if (sSortPropertyName === sChartMeasure) {
            return "'$orderby' : '" + sChartMeasure + (aSortOrder[0].Descending ? " desc'" : "'");
          }
          return "'$orderby' : '" + sChartMeasure + " desc'";
        }
        return "'$orderby' : '" + sChartMeasure + " desc'";
      } else if (sDimensionType === "Edm.Date" || sDimensionType === "Edm.Time" || sDimensionType === "Edm.DateTimeOffset") {
        return "'$orderby' : '" + oChartAnnotations.Dimensions[0].$PropertyPath + "'";
      } else if (aSortOrder && aSortOrder.length && aSortOrder[0].Property.$PropertyPath === oChartAnnotations.Dimensions[0].$PropertyPath) {
        return "'$orderby' : '" + aSortOrder[0].Property.$PropertyPath + (aSortOrder[0].Descending ? " desc'" : "'");
      } else {
        return "'$orderby' : '" + oChartAnnotations.Dimensions[0].$PropertyPath + "'";
      }
    },
    getMaxItems: function (oChartAnnotations) {
      if (oChartAnnotations.ChartType.$EnumMember === "com.sap.vocabularies.UI.v1.ChartType/Bar") {
        return ",'startIndex' : 0,'length' : 3";
      } else if (oChartAnnotations.ChartType.$EnumMember === "com.sap.vocabularies.UI.v1.ChartType/Line") {
        return ",'startIndex' : 0,'length' : 6";
      } else {
        return "";
      }
    },
    getColorBinding: function (iContext, oDataPoint, oDimension) {
      const oModel = iContext.getModel(0);
      const oDimensionPath = iContext.getPath(1);
      const aValueCriticality = oModel.getObject(`${oDimensionPath}$PropertyPath@com.sap.vocabularies.UI.v1.ValueCriticality`);
      oDataPoint = oDataPoint.targetObject;
      if (oDataPoint.Criticality) {
        return buildExpressionForCriticalityColorMicroChart(oDataPoint);
      } else if (oDataPoint.CriticalityCalculation) {
        const oDirection = oDataPoint.CriticalityCalculation.ImprovementDirection && oDataPoint.CriticalityCalculation.ImprovementDirection.$EnumMember;
        const oDataPointValue = ODataModelAnnotationHelper.value(oDataPoint.Value, {
          context: iContext.getInterface(0)
        });
        const oDeviationRangeLowValue = ODataModelAnnotationHelper.value(oDataPoint.CriticalityCalculation.DeviationRangeLowValue, {
          context: iContext.getInterface(0)
        });
        const oToleranceRangeLowValue = ODataModelAnnotationHelper.value(oDataPoint.CriticalityCalculation.ToleranceRangeLowValue, {
          context: iContext.getInterface(0)
        });
        const oAcceptanceRangeLowValue = ODataModelAnnotationHelper.value(oDataPoint.CriticalityCalculation.AcceptanceRangeLowValue, {
          context: iContext.getInterface(0)
        });
        const oAcceptanceRangeHighValue = ODataModelAnnotationHelper.value(oDataPoint.CriticalityCalculation.AcceptanceRangeHighValue, {
          context: iContext.getInterface(0)
        });
        const oToleranceRangeHighValue = ODataModelAnnotationHelper.value(oDataPoint.CriticalityCalculation.ToleranceRangeHighValue, {
          context: iContext.getInterface(0)
        });
        const oDeviationRangeHighValue = ODataModelAnnotationHelper.value(oDataPoint.CriticalityCalculation.DeviationRangeHighValue, {
          context: iContext.getInterface(0)
        });
        return CommonHelper.getCriticalityCalculationBinding(oDirection, oDataPointValue, oDeviationRangeLowValue, oToleranceRangeLowValue, oAcceptanceRangeLowValue, oAcceptanceRangeHighValue, oToleranceRangeHighValue, oDeviationRangeHighValue);
      } else if (aValueCriticality && aValueCriticality.length) {
        return CommonHelper.getValueCriticality(oDimension.$PropertyPath, aValueCriticality);
      } else {
        return undefined;
      }
    },
    getScaleUoMTitle: function (oInterface, oChartAnnotation, oCollection, sMetaPath, bCustomAggregate, oAggregation, sSeperator, bIsToolTip) {
      const oModel = oInterface.getModel(0);
      const sScaleFactor = oModel.getObject(`${oInterface.getPath(0)}/MeasureAttributes/0/DataPoint/$AnnotationPath/ValueFormat/ScaleFactor/$Decimal`);
      const sInfoPath = generate([sMetaPath]);
      const fixedInteger = NumberFormat.getIntegerInstance({
        style: "short",
        showScale: false,
        shortRefNumber: sScaleFactor
      });
      let sScale = fixedInteger.getScale();
      let vUOM = InteractiveChartHelper.getUoM(oInterface, oChartAnnotation, oCollection, undefined, bCustomAggregate, oAggregation);
      vUOM = vUOM && (vUOM.$Path ? "${internal>uom/" + sInfoPath + "}" : "'" + vUOM + "'");
      sScale = sScale ? "'" + sScale + "'" : "${internal>scalefactor/" + sInfoPath + "}";
      if (!sSeperator) {
        sSeperator = "|";
      }
      sSeperator = vUOM ? "' " + sSeperator + " ' + " : "";
      const sExpression = sScale && vUOM ? sSeperator + sScale + " + ' ' + " + vUOM : sSeperator + (sScale || vUOM);
      return bIsToolTip ? sExpression : "{= " + sExpression + "}";
    },
    getMeasureDimensionTitle: function (oInterface, oChartAnnotation, oCollection, bCustomAggregate, oAggregation) {
      const oModel = oInterface.getModel(0);
      let sMeasureLabel;
      const sMeasurePathExpression = InteractiveChartHelper._getMeasurePath(oChartAnnotation, bCustomAggregate);
      const sMeasurePath = oModel.getObject(`${oInterface.getPath(0)}` + sMeasurePathExpression);
      const sDimensionPath = oModel.getObject(`${oInterface.getPath(0)}/Dimensions/0/$PropertyPath`);
      let sDimensionLabel = InteractiveChartHelper.getLabel(oModel, oInterface, "Dimensions");
      if (!bCustomAggregate && oAggregation) {
        // check if the label is part of aggregated properties (Transformation aggregates)
        sMeasureLabel = oAggregation.annotations && oAggregation.annotations.Common && oAggregation.annotations.Common.Label;
        if (sMeasureLabel === undefined) {
          sMeasureLabel = sMeasureLabel = InteractiveChartHelper.getLabel(oModel, oInterface, "Measures");
        }
      } else {
        sMeasureLabel = InteractiveChartHelper.getLabel(oModel, oInterface, "Measures");
      }
      if (sMeasureLabel === undefined) {
        sMeasureLabel = sMeasurePath;
      }
      if (sDimensionLabel === undefined) {
        sDimensionLabel = sDimensionPath;
      }
      return ResourceModel && ResourceModel.getText("M_INTERACTIVE_CHART_HELPER_VISUALFILTER_MEASURE_DIMENSION_TITLE", [sMeasureLabel, sDimensionLabel]);
    },
    getLabel: function (oModel, oInterface, sProperty) {
      return oModel.getObject(`${oInterface.getPath(0)}/${sProperty}/0/$PropertyPath@com.sap.vocabularies.Common.v1.Label`);
    },
    getToolTip: function (oInterface, oChartAnnotation, oCollection, sMetaPath, bCustomAggregate, oAggregation, bRenderLineChart) {
      const sChartType = oChartAnnotation && oChartAnnotation["ChartType"];
      let sMeasureDimensionToolTip = InteractiveChartHelper.getMeasureDimensionTitle(oInterface, oChartAnnotation, oCollection, bCustomAggregate, oAggregation);
      sMeasureDimensionToolTip = CommonHelper.escapeSingleQuotes(sMeasureDimensionToolTip);
      if (bRenderLineChart === "false" && sChartType === "UI.ChartType/Line") {
        return `{= '${sMeasureDimensionToolTip}'}`;
      }
      const sSeperator = ResourceModel.getText("M_INTERACTIVE_CHART_HELPER_VISUALFILTER_TOOLTIP_SEPERATOR");
      const sInfoPath = generate([sMetaPath]);
      const sScaleUOMTooltip = InteractiveChartHelper.getScaleUoMTitle(oInterface, oChartAnnotation, oCollection, sInfoPath, bCustomAggregate, oAggregation, sSeperator, true);
      return "{= '" + sMeasureDimensionToolTip + (sScaleUOMTooltip ? "' + " + sScaleUOMTooltip : "'") + "}";
    },
    getUoM: function (oInterface, oChartAnnotation, oCollection, isCustomData, bCustomAggregate, oAggregation) {
      const oModel = oInterface.getModel(0);
      const sMeasurePathExpression = InteractiveChartHelper._getMeasurePath(oChartAnnotation, bCustomAggregate);
      const vISOCurrency = oModel.getObject(`${oInterface.getPath(0)}` + sMeasurePathExpression + `@Org.OData.Measures.V1.ISOCurrency`);
      const vUnit = oModel.getObject(`${oInterface.getPath(0)}` + sMeasurePathExpression + `@Org.OData.Measures.V1.Unit`);
      const sMeasurePath = oModel.getObject(`${oInterface.getPath(0)}` + sMeasurePathExpression);
      let sAggregatablePropertyPath;
      if (!bCustomAggregate && oAggregation) {
        sAggregatablePropertyPath = oAggregation.AggregatableProperty && oAggregation.AggregatableProperty.value;
      } else {
        sAggregatablePropertyPath = sMeasurePath;
      }
      const _getUOM = function (vUOM, sAnnotation) {
        const sUOM = sAnnotation && sAnnotation.split("V1.")[1];
        const oUOM = {};
        if (vUOM) {
          // check if the UOM is part of Measure annotations(Custom aggregates)
          oUOM[sUOM] = vUOM;
          return isCustomData && vUOM.$Path ? JSON.stringify(oUOM) : vUOM;
        } else if (sAggregatablePropertyPath) {
          // check if the UOM is part of base property annotations(Transformation aggregates)
          vUOM = oInterface.getModel(1).getObject(`${oInterface.getPath(1)}/${sAggregatablePropertyPath}${sAnnotation}`);
          oUOM[sUOM] = vUOM;
          return vUOM && isCustomData && vUOM.$Path ? JSON.stringify(oUOM) : vUOM;
        }
      };
      return _getUOM(vISOCurrency, "@Org.OData.Measures.V1.ISOCurrency") || _getUOM(vUnit, "@Org.OData.Measures.V1.Unit");
    },
    getScaleFactor: function (oValueFormat) {
      if (oValueFormat && oValueFormat.ScaleFactor) {
        return oValueFormat.ScaleFactor.$Decimal;
      }
      return undefined;
    },
    getUoMVisiblity: function (oChartAnnotation, bShowError) {
      const sChartType = oChartAnnotation && oChartAnnotation["ChartType"];
      if (bShowError) {
        return false;
      } else if (!(sChartType === "UI.ChartType/Bar" || sChartType === "UI.ChartType/Line")) {
        return false;
      } else {
        return true;
      }
    },
    getInParameterFiltersBinding: function (aInParameters) {
      if (aInParameters.length > 0) {
        const aParts = [];
        let sPaths = "";
        aInParameters.forEach(function (oInParameter) {
          if (oInParameter.localDataProperty) {
            aParts.push(`{path:'$filters>/conditions/${oInParameter.localDataProperty}'}`);
          }
        });
        if (aParts.length > 0) {
          sPaths = aParts.join();
          return `{parts:[${sPaths}], formatter:'sap.fe.macros.visualfilters.VisualFilterRuntime.getFiltersFromConditions'}`;
        } else {
          return undefined;
        }
      } else {
        return undefined;
      }
    },
    getfilterCountBinding: function (oChartAnnotation) {
      var _oChartAnnotation$Dim, _oChartAnnotation$Dim2;
      const sDimension = (_oChartAnnotation$Dim = oChartAnnotation.Dimensions[0]) === null || _oChartAnnotation$Dim === void 0 ? void 0 : (_oChartAnnotation$Dim2 = _oChartAnnotation$Dim.$target) === null || _oChartAnnotation$Dim2 === void 0 ? void 0 : _oChartAnnotation$Dim2.name;
      return "{path:'$filters>/conditions/" + sDimension + "', formatter:'sap.fe.macros.visualfilters.VisualFilterRuntime.getFilterCounts'}";
    }
  };
  InteractiveChartHelper.getColorBinding.requiresIContext = true;
  InteractiveChartHelper.getAggregationBinding.requiresIContext = true;
  InteractiveChartHelper.getUoM.requiresIContext = true;
  InteractiveChartHelper.getScaleUoMTitle.requiresIContext = true;
  InteractiveChartHelper.getToolTip.requiresIContext = true;
  InteractiveChartHelper.getMeasureDimensionTitle.requiresIContext = true;
  return InteractiveChartHelper;
}, false);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJJbnRlcmFjdGl2ZUNoYXJ0SGVscGVyIiwiZ2V0Q2hhcnREaXNwbGF5ZWRWYWx1ZSIsInZhbHVlIiwib1ZhbHVlRm9ybWF0Iiwic01ldGFQYXRoIiwic0luZm9QYXRoIiwiZ2VuZXJhdGUiLCJTY2FsZUZhY3RvciIsIiREZWNpbWFsIiwiTnVtYmVyT2ZGcmFjdGlvbmFsRGlnaXRzIiwiZ2V0Q2hhcnRWYWx1ZSIsIm9WYWx1ZSIsImdldENoYXJ0Iiwib01ldGFQYXRoIiwib01vZGVsIiwiZ2V0TW9kZWwiLCJvUHJlc2VudGF0aW9uVmFyaWFudCIsImdldE9iamVjdCIsImdldFBhdGgiLCJhVmlzdWFsaXphdGlvbnMiLCJWaXN1YWxpemF0aW9ucyIsImkiLCJsZW5ndGgiLCIkQW5ub3RhdGlvblBhdGgiLCJpbmRleE9mIiwic0NvbGxlY3Rpb25QYXRoIiwiT0RhdGFNb2RlbEFubm90YXRpb25IZWxwZXIiLCJnZXROYXZpZ2F0aW9uUGF0aCIsImNyZWF0ZUJpbmRpbmdDb250ZXh0IiwidW5kZWZpbmVkIiwiZ2V0Q2hhcnRMYWJlbCIsIl9nZXRNZWFzdXJlUGF0aCIsIm9DaGFydEFubm90YXRpb24iLCJiQ3VzdG9tQWdncmVnYXRlIiwic01lYXN1cmVQYXRoIiwiRHluYW1pY01lYXN1cmVzIiwiTWVhc3VyZXMiLCJnZXRBZ2dyZWdhdGlvbkJpbmRpbmciLCJvSW50ZXJmYWNlIiwib0NoYXJ0QW5ub3RhdGlvbnMiLCJvQ29sbGVjdGlvbiIsIm9UZXh0QXNzb2NpYXRpb24iLCJvRGltZW5zaW9uVHlwZSIsImFTb3J0T3JkZXIiLCJzZWxlY3Rpb25WYXJpYW50QW5ub3RhdGlvbiIsIm9BZ2dyZWdhdGlvbiIsImJVb01IYXNDdXN0b21BZ2dyZWdhdGUiLCJhUGFyYW1ldGVycyIsIm9GaWx0ZXJCYXJDb250ZXh0IiwiYkRyYWZ0U3VwcG9ydGVkIiwic0NoYXJ0TWVhc3VyZSIsInNFbnRpdHlUeXBlIiwic0RpbWVuc2lvbiIsIkRpbWVuc2lvbnMiLCIkUHJvcGVydHlQYXRoIiwiYUZpbHRlcnMiLCJzQWdncmVnYXRpb25FeHByZXNzaW9uIiwic1VPTUV4cHJlc3Npb24iLCJmaWx0ZXJDb25kaXRpb25zIiwic0JpbmRpbmdQYXRoIiwic0NvbGxlY3Rpb25OYW1lIiwiJGtpbmQiLCJ2VU9NIiwiZ2V0VW9NIiwic0VudGl0eVNldFBhdGgiLCJnZXRJbnRlcmZhY2UiLCJvTWV0YU1vZGVsIiwicHVzaCIsIm9wZXJhdG9yIiwidmFsdWUxIiwidmFsdWUyIiwicGF0aCIsImlzUGFyYW1ldGVyIiwiZ2V0RmlsdGVyc0NvbmRpdGlvbnNGcm9tU2VsZWN0aW9uVmFyaWFudCIsIlZpc3VhbEZpbHRlclV0aWxzIiwiZ2V0Q3VzdG9tQ29uZGl0aW9ucyIsImJpbmQiLCJzUGF0aCIsImFDb25kaXRpb25zIiwiZm9yRWFjaCIsIm9Db25kaXRpb24iLCJhUGFyYW1zIiwiY29udmVydGVkRmlsdGVyQ29uZGl0aW9ucyIsImNvbnZlcnRGaWx0ZXJDb25kaW9ucyIsInBhcmFtZXRlclByb3BlcnRpZXMiLCJDb21tb25VdGlscyIsImdldFBhcmFtZXRlckluZm8iLCJwYXJhbWV0ZXIiLCJvUHJvcGVydHkiLCJzRW50aXR5UGF0aCIsInNwbGl0Iiwib1Byb3BlcnR5Q29udGV4dCIsIm9Gb3JtYXRPcHRpb25zIiwiSlNUb2tlbml6ZXIiLCJwYXJzZUpTIiwiRmlsdGVyRmllbGRIZWxwZXIiLCJmb3JtYXRPcHRpb25zIiwiY29udGV4dCIsIm9Db25zdHJhaW50cyIsImNvbnN0cmFpbnRzIiwidHlwZUNvbmZpZyIsIlR5cGVVdGlsIiwiZ2V0VHlwZUNvbmZpZyIsIiRUeXBlIiwib0NvbmRpdGlvbkludGVybmFsIiwibUludGVybmFsUGFyYW1ldGVyQ29uZGl0aW9uIiwiQ29uZGl0aW9uQ29udmVydGVyIiwidG9UeXBlIiwic0VkbVR5cGUiLCJzVmFsdWUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJPRGF0YVV0aWxzIiwiZm9ybWF0TGl0ZXJhbCIsInZhbHVlcyIsInJlcGxhY2VBbGwiLCJzUGFyYW1ldGVyRW50aXR5U2V0Iiwic2xpY2UiLCJsYXN0SW5kZXhPZiIsInNUYXJnZXROYXZpZ2F0aW9uIiwic3Vic3RyaW5nIiwidG9TdHJpbmciLCIkUGF0aCIsIkFnZ3JlZ2F0YWJsZVByb3BlcnR5IiwiQWdncmVnYXRpb25NZXRob2QiLCJzVGV4dEFzc29jaWF0aW9uRXhwcmVzc2lvbiIsInNGaWx0ZXJFeHByZXNzaW9uIiwiSlNPTiIsInN0cmluZ2lmeSIsImdldFNvcnRPcmRlciIsImdldE1heEl0ZW1zIiwic0RpbWVuc2lvblR5cGUiLCJzU29ydFByb3BlcnR5TmFtZSIsIkNoYXJ0VHlwZSIsIiRFbnVtTWVtYmVyIiwiRHluYW1pY1Byb3BlcnR5IiwiTmFtZSIsIlByb3BlcnR5IiwiRGVzY2VuZGluZyIsImdldENvbG9yQmluZGluZyIsImlDb250ZXh0Iiwib0RhdGFQb2ludCIsIm9EaW1lbnNpb24iLCJvRGltZW5zaW9uUGF0aCIsImFWYWx1ZUNyaXRpY2FsaXR5IiwidGFyZ2V0T2JqZWN0IiwiQ3JpdGljYWxpdHkiLCJidWlsZEV4cHJlc3Npb25Gb3JDcml0aWNhbGl0eUNvbG9yTWljcm9DaGFydCIsIkNyaXRpY2FsaXR5Q2FsY3VsYXRpb24iLCJvRGlyZWN0aW9uIiwiSW1wcm92ZW1lbnREaXJlY3Rpb24iLCJvRGF0YVBvaW50VmFsdWUiLCJWYWx1ZSIsIm9EZXZpYXRpb25SYW5nZUxvd1ZhbHVlIiwiRGV2aWF0aW9uUmFuZ2VMb3dWYWx1ZSIsIm9Ub2xlcmFuY2VSYW5nZUxvd1ZhbHVlIiwiVG9sZXJhbmNlUmFuZ2VMb3dWYWx1ZSIsIm9BY2NlcHRhbmNlUmFuZ2VMb3dWYWx1ZSIsIkFjY2VwdGFuY2VSYW5nZUxvd1ZhbHVlIiwib0FjY2VwdGFuY2VSYW5nZUhpZ2hWYWx1ZSIsIkFjY2VwdGFuY2VSYW5nZUhpZ2hWYWx1ZSIsIm9Ub2xlcmFuY2VSYW5nZUhpZ2hWYWx1ZSIsIlRvbGVyYW5jZVJhbmdlSGlnaFZhbHVlIiwib0RldmlhdGlvblJhbmdlSGlnaFZhbHVlIiwiRGV2aWF0aW9uUmFuZ2VIaWdoVmFsdWUiLCJDb21tb25IZWxwZXIiLCJnZXRDcml0aWNhbGl0eUNhbGN1bGF0aW9uQmluZGluZyIsImdldFZhbHVlQ3JpdGljYWxpdHkiLCJnZXRTY2FsZVVvTVRpdGxlIiwic1NlcGVyYXRvciIsImJJc1Rvb2xUaXAiLCJzU2NhbGVGYWN0b3IiLCJmaXhlZEludGVnZXIiLCJOdW1iZXJGb3JtYXQiLCJnZXRJbnRlZ2VySW5zdGFuY2UiLCJzdHlsZSIsInNob3dTY2FsZSIsInNob3J0UmVmTnVtYmVyIiwic1NjYWxlIiwiZ2V0U2NhbGUiLCJzRXhwcmVzc2lvbiIsImdldE1lYXN1cmVEaW1lbnNpb25UaXRsZSIsInNNZWFzdXJlTGFiZWwiLCJzTWVhc3VyZVBhdGhFeHByZXNzaW9uIiwic0RpbWVuc2lvblBhdGgiLCJzRGltZW5zaW9uTGFiZWwiLCJnZXRMYWJlbCIsImFubm90YXRpb25zIiwiQ29tbW9uIiwiTGFiZWwiLCJSZXNvdXJjZU1vZGVsIiwiZ2V0VGV4dCIsInNQcm9wZXJ0eSIsImdldFRvb2xUaXAiLCJiUmVuZGVyTGluZUNoYXJ0Iiwic0NoYXJ0VHlwZSIsInNNZWFzdXJlRGltZW5zaW9uVG9vbFRpcCIsImVzY2FwZVNpbmdsZVF1b3RlcyIsInNTY2FsZVVPTVRvb2x0aXAiLCJpc0N1c3RvbURhdGEiLCJ2SVNPQ3VycmVuY3kiLCJ2VW5pdCIsInNBZ2dyZWdhdGFibGVQcm9wZXJ0eVBhdGgiLCJfZ2V0VU9NIiwic0Fubm90YXRpb24iLCJzVU9NIiwib1VPTSIsImdldFNjYWxlRmFjdG9yIiwiZ2V0VW9NVmlzaWJsaXR5IiwiYlNob3dFcnJvciIsImdldEluUGFyYW1ldGVyRmlsdGVyc0JpbmRpbmciLCJhSW5QYXJhbWV0ZXJzIiwiYVBhcnRzIiwic1BhdGhzIiwib0luUGFyYW1ldGVyIiwibG9jYWxEYXRhUHJvcGVydHkiLCJqb2luIiwiZ2V0ZmlsdGVyQ291bnRCaW5kaW5nIiwiJHRhcmdldCIsIm5hbWUiLCJyZXF1aXJlc0lDb250ZXh0Il0sInNvdXJjZVJvb3QiOiIuIiwic291cmNlcyI6WyJJbnRlcmFjdGl2ZUNoYXJ0SGVscGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBKU1Rva2VuaXplciBmcm9tIFwic2FwL2Jhc2UvdXRpbC9KU1Rva2VuaXplclwiO1xuaW1wb3J0IENvbW1vblV0aWxzIGZyb20gXCJzYXAvZmUvY29yZS9Db21tb25VdGlsc1wiO1xuaW1wb3J0IFZpc3VhbEZpbHRlclV0aWxzIGZyb20gXCJzYXAvZmUvY29yZS9jb250cm9scy9maWx0ZXJiYXIvdXRpbHMvVmlzdWFsRmlsdGVyVXRpbHNcIjtcbmltcG9ydCB7IGdlbmVyYXRlIH0gZnJvbSBcInNhcC9mZS9jb3JlL2hlbHBlcnMvU3RhYmxlSWRIZWxwZXJcIjtcbmltcG9ydCB7IGJ1aWxkRXhwcmVzc2lvbkZvckNyaXRpY2FsaXR5Q29sb3JNaWNyb0NoYXJ0IH0gZnJvbSBcInNhcC9mZS9jb3JlL3RlbXBsYXRpbmcvQ3JpdGljYWxpdHlGb3JtYXR0ZXJzXCI7XG5pbXBvcnQgeyBnZXRGaWx0ZXJzQ29uZGl0aW9uc0Zyb21TZWxlY3Rpb25WYXJpYW50IH0gZnJvbSBcInNhcC9mZS9jb3JlL3RlbXBsYXRpbmcvRmlsdGVySGVscGVyXCI7XG5pbXBvcnQgVHlwZVV0aWwgZnJvbSBcInNhcC9mZS9jb3JlL3R5cGUvVHlwZVV0aWxcIjtcbmltcG9ydCBDb21tb25IZWxwZXIgZnJvbSBcInNhcC9mZS9tYWNyb3MvQ29tbW9uSGVscGVyXCI7XG5pbXBvcnQgRmlsdGVyRmllbGRIZWxwZXIgZnJvbSBcInNhcC9mZS9tYWNyb3MvZmlsdGVyL0ZpbHRlckZpZWxkSGVscGVyXCI7XG5pbXBvcnQgUmVzb3VyY2VNb2RlbCBmcm9tIFwic2FwL2ZlL21hY3Jvcy9SZXNvdXJjZU1vZGVsXCI7XG5pbXBvcnQgTnVtYmVyRm9ybWF0IGZyb20gXCJzYXAvdWkvY29yZS9mb3JtYXQvTnVtYmVyRm9ybWF0XCI7XG5pbXBvcnQgQ29uZGl0aW9uQ29udmVydGVyIGZyb20gXCJzYXAvdWkvbWRjL2NvbmRpdGlvbi9Db25kaXRpb25Db252ZXJ0ZXJcIjtcbmltcG9ydCBPRGF0YU1vZGVsQW5ub3RhdGlvbkhlbHBlciBmcm9tIFwic2FwL3VpL21vZGVsL29kYXRhL3Y0L0Fubm90YXRpb25IZWxwZXJcIjtcbmltcG9ydCBPRGF0YVV0aWxzIGZyb20gXCJzYXAvdWkvbW9kZWwvb2RhdGEvdjQvT0RhdGFVdGlsc1wiO1xuXG5jb25zdCBJbnRlcmFjdGl2ZUNoYXJ0SGVscGVyID0ge1xuXHRnZXRDaGFydERpc3BsYXllZFZhbHVlOiBmdW5jdGlvbiAodmFsdWU6IGFueSwgb1ZhbHVlRm9ybWF0OiBhbnksIHNNZXRhUGF0aDogYW55KSB7XG5cdFx0Ly92YXIgc1R5cGUgPSBcIlwiICsgdmFsdWUgKyBcIkBvZGF0YS50eXBlXCI7XG5cdFx0Y29uc3Qgc0luZm9QYXRoID0gZ2VuZXJhdGUoW3NNZXRhUGF0aF0pO1xuXHRcdHJldHVybiAoXG5cdFx0XHRcIntwYXJ0czpbe3BhdGg6J1wiICtcblx0XHRcdHZhbHVlICtcblx0XHRcdFwiJyx0eXBlOidzYXAudWkubW9kZWwub2RhdGEudHlwZS5EZWNpbWFsJywgY29uc3RyYWludHM6eydudWxsYWJsZSc6ZmFsc2V9fVwiICtcblx0XHRcdChvVmFsdWVGb3JtYXQgJiYgb1ZhbHVlRm9ybWF0LlNjYWxlRmFjdG9yXG5cdFx0XHRcdD8gXCIse3ZhbHVlOidcIiArIG9WYWx1ZUZvcm1hdC5TY2FsZUZhY3Rvci4kRGVjaW1hbCArIFwiJ31cIlxuXHRcdFx0XHQ6IFwiLHtwYXRoOidpbnRlcm5hbD5zY2FsZWZhY3Rvck51bWJlci9cIiArIHNJbmZvUGF0aCArIFwiJ31cIikgK1xuXHRcdFx0KG9WYWx1ZUZvcm1hdCAmJiBvVmFsdWVGb3JtYXQuTnVtYmVyT2ZGcmFjdGlvbmFsRGlnaXRzXG5cdFx0XHRcdD8gXCIse3ZhbHVlOidcIiArIG9WYWx1ZUZvcm1hdC5OdW1iZXJPZkZyYWN0aW9uYWxEaWdpdHMgKyBcIid9XCJcblx0XHRcdFx0OiBcIix7dmFsdWU6JzAnfVwiKSArXG5cdFx0XHRcIix7cGF0aDonaW50ZXJuYWw+Y3VycmVuY3kvXCIgK1xuXHRcdFx0c0luZm9QYXRoICtcblx0XHRcdFwiJ31cIiArXG5cdFx0XHRcIix7cGF0aDonXCIgK1xuXHRcdFx0dmFsdWUgK1xuXHRcdFx0XCInLHR5cGU6J3NhcC51aS5tb2RlbC5vZGF0YS50eXBlLlN0cmluZycsIGNvbnN0cmFpbnRzOnsnbnVsbGFibGUnOmZhbHNlfX1cIiArXG5cdFx0XHRcIl0sIGZvcm1hdHRlcjonVmlzdWFsRmlsdGVyUnVudGltZS5zY2FsZVZpc3VhbEZpbHRlclZhbHVlJ31cIlxuXHRcdCk7IC8vKyBzVHlwZS5zcGxpdCgnIycpLmxlbmd0aCA/IHNUeXBlLnNwbGl0KCcjJylbMV0gOiAnRGVjaW1hbCcgKyBcIn1cIjtcblx0fSxcblx0Z2V0Q2hhcnRWYWx1ZTogZnVuY3Rpb24gKG9WYWx1ZTogYW55KSB7XG5cdFx0cmV0dXJuIFwie3BhdGg6J1wiICsgb1ZhbHVlICsgXCInLHR5cGU6J3NhcC51aS5tb2RlbC5vZGF0YS50eXBlLkRlY2ltYWwnLCBjb25zdHJhaW50czp7J251bGxhYmxlJzpmYWxzZX19XCI7XG5cdH0sXG5cdGdldENoYXJ0OiBmdW5jdGlvbiAob01ldGFQYXRoOiBhbnkpIHtcblx0XHRjb25zdCBvTW9kZWwgPSBvTWV0YVBhdGguZ2V0TW9kZWwoKTtcblx0XHRjb25zdCBvUHJlc2VudGF0aW9uVmFyaWFudCA9IG9Nb2RlbC5nZXRPYmplY3Qob01ldGFQYXRoLmdldFBhdGgoKSk7XG5cdFx0Y29uc3QgYVZpc3VhbGl6YXRpb25zID0gb1ByZXNlbnRhdGlvblZhcmlhbnQuVmlzdWFsaXphdGlvbnM7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBhVmlzdWFsaXphdGlvbnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmIChhVmlzdWFsaXphdGlvbnNbaV0uJEFubm90YXRpb25QYXRoLmluZGV4T2YoXCJjb20uc2FwLnZvY2FidWxhcmllcy5VSS52MS5DaGFydFwiKSA+IC0xKSB7XG5cdFx0XHRcdGNvbnN0IHNDb2xsZWN0aW9uUGF0aCA9IE9EYXRhTW9kZWxBbm5vdGF0aW9uSGVscGVyLmdldE5hdmlnYXRpb25QYXRoKG9NZXRhUGF0aC5nZXRQYXRoKCkpO1xuXHRcdFx0XHRyZXR1cm4gb01vZGVsLmNyZWF0ZUJpbmRpbmdDb250ZXh0KHNDb2xsZWN0aW9uUGF0aCArIFwiL1wiICsgYVZpc3VhbGl6YXRpb25zW2ldLiRBbm5vdGF0aW9uUGF0aCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiB1bmRlZmluZWQ7XG5cdH0sXG5cdGdldENoYXJ0TGFiZWw6IGZ1bmN0aW9uICguLi5hcmdzOiBhbnlbXSkge1xuXHRcdHJldHVybiBhcmdzWzJdO1xuXHR9LFxuXHQvKipcblx0ICogQnVpbGQgdGhlIGV4cHJlc3Npb24gZm9yIG1lYXN1cmUgcGF0aCBiYXNlZCBvbiB3aGV0aGVyIEN1c3RvbUFnZ3JlZ2F0ZS9EeW5hbWljL1RyYW5zZm9ybWF0aW9uQWdncmVnYXRlIG1lYXN1cmVzIGV4aXN0cy5cblx0ICpcblx0ICogQHBhcmFtIG9DaGFydEFubm90YXRpb24gQ2hhcnQgY29uZmlndXJhdGlvbnMuXG5cdCAqIEBwYXJhbSBiQ3VzdG9tQWdncmVnYXRlIEluZGljYXRvciBmb3IgZXhpc3RlbmNlIGZvciBjdXN0b20gYWdncmVnYXRlcyBpbiBjaGFydCBtZWFzdXJlcy5cblx0ICogQHJldHVybnMgTWVhc3VyZSBQYXRoXG5cdCAqL1xuXHRfZ2V0TWVhc3VyZVBhdGg6IGZ1bmN0aW9uIChvQ2hhcnRBbm5vdGF0aW9uOiBhbnksIGJDdXN0b21BZ2dyZWdhdGU6IEJvb2xlYW4pOiBTdHJpbmcge1xuXHRcdGxldCBzTWVhc3VyZVBhdGg7XG5cdFx0aWYgKGJDdXN0b21BZ2dyZWdhdGUpIHtcblx0XHRcdHNNZWFzdXJlUGF0aCA9IFwiL01lYXN1cmVzLzAvJFByb3BlcnR5UGF0aFwiO1xuXHRcdH1cblx0XHRpZiAob0NoYXJ0QW5ub3RhdGlvbi5EeW5hbWljTWVhc3VyZXMgJiYgb0NoYXJ0QW5ub3RhdGlvbi5EeW5hbWljTWVhc3VyZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0c01lYXN1cmVQYXRoID0gXCIvRHluYW1pY01lYXN1cmVzLzAvJEFubm90YXRpb25QYXRoL0FnZ3JlZ2F0YWJsZVByb3BlcnR5LyRQcm9wZXJ0eVBhdGhcIjtcblx0XHR9IGVsc2UgaWYgKCFiQ3VzdG9tQWdncmVnYXRlICYmIG9DaGFydEFubm90YXRpb24uTWVhc3VyZXMgJiYgb0NoYXJ0QW5ub3RhdGlvbi5NZWFzdXJlcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRzTWVhc3VyZVBhdGggPSBcIi9NZWFzdXJlcy8wLyRQcm9wZXJ0eVBhdGhcIjtcblx0XHR9XG5cdFx0cmV0dXJuIHNNZWFzdXJlUGF0aCBhcyBTdHJpbmc7XG5cdH0sXG5cdGdldEFnZ3JlZ2F0aW9uQmluZGluZzogZnVuY3Rpb24gKFxuXHRcdG9JbnRlcmZhY2U6IGFueSxcblx0XHRvQ2hhcnRBbm5vdGF0aW9uczogYW55LFxuXHRcdG9Db2xsZWN0aW9uOiBhbnksXG5cdFx0b1RleHRBc3NvY2lhdGlvbjogYW55LFxuXHRcdG9EaW1lbnNpb25UeXBlOiBhbnksXG5cdFx0YVNvcnRPcmRlcjogYW55LFxuXHRcdHNlbGVjdGlvblZhcmlhbnRBbm5vdGF0aW9uOiBhbnksXG5cdFx0YkN1c3RvbUFnZ3JlZ2F0ZTogYW55LFxuXHRcdG9BZ2dyZWdhdGlvbjogYW55LFxuXHRcdGJVb01IYXNDdXN0b21BZ2dyZWdhdGU6IGFueSxcblx0XHRhUGFyYW1ldGVyczogYW55LFxuXHRcdG9GaWx0ZXJCYXJDb250ZXh0OiBhbnksXG5cdFx0YkRyYWZ0U3VwcG9ydGVkOiBhbnksXG5cdFx0c0NoYXJ0TWVhc3VyZTogYW55XG5cdCkge1xuXHRcdGNvbnN0IHNFbnRpdHlUeXBlID0gb0ZpbHRlckJhckNvbnRleHQgPyBvRmlsdGVyQmFyQ29udGV4dC5nZXRQYXRoKCkgOiBcIlwiO1xuXHRcdGNvbnN0IHNEaW1lbnNpb24gPSBvQ2hhcnRBbm5vdGF0aW9ucy5EaW1lbnNpb25zWzBdLiRQcm9wZXJ0eVBhdGg7XG5cdFx0Y29uc3QgYUZpbHRlcnM6IGFueVtdID0gW107XG5cdFx0bGV0IHNBZ2dyZWdhdGlvbkV4cHJlc3Npb24sIHNVT01FeHByZXNzaW9uLCBmaWx0ZXJDb25kaXRpb25zLCBzQmluZGluZ1BhdGg7XG5cdFx0bGV0IHNDb2xsZWN0aW9uTmFtZSA9XG5cdFx0XHRvQ29sbGVjdGlvbi4ka2luZCA9PSBcIk5hdmlnYXRpb25Qcm9wZXJ0eVwiXG5cdFx0XHRcdD8gb0ludGVyZmFjZS5nZXRQYXRoKDEpXG5cdFx0XHRcdDogKG9Db2xsZWN0aW9uLiRraW5kID09IFwiRW50aXR5U2V0XCIgPyBcIi9cIiA6IFwiXCIpICsgb0ludGVyZmFjZS5nZXRNb2RlbCgxKS5nZXRPYmplY3QoYCR7b0ludGVyZmFjZS5nZXRQYXRoKDEpfUBzYXB1aS5uYW1lYCk7XG5cdFx0Y29uc3QgdlVPTSA9IEludGVyYWN0aXZlQ2hhcnRIZWxwZXIuZ2V0VW9NKG9JbnRlcmZhY2UsIG9DaGFydEFubm90YXRpb25zLCBvQ29sbGVjdGlvbiwgdW5kZWZpbmVkLCBiQ3VzdG9tQWdncmVnYXRlLCBvQWdncmVnYXRpb24pO1xuXHRcdGNvbnN0IHNFbnRpdHlTZXRQYXRoID0gb0ludGVyZmFjZS5nZXRJbnRlcmZhY2UoMSkuZ2V0UGF0aCgpLFxuXHRcdFx0b01ldGFNb2RlbCA9IG9JbnRlcmZhY2UuZ2V0SW50ZXJmYWNlKDEpLmdldE1vZGVsKCk7XG5cdFx0aWYgKGJEcmFmdFN1cHBvcnRlZCkge1xuXHRcdFx0YUZpbHRlcnMucHVzaCh7XG5cdFx0XHRcdG9wZXJhdG9yOiBcIkVRXCIsXG5cdFx0XHRcdHZhbHVlMTogXCJ0cnVlXCIsXG5cdFx0XHRcdHZhbHVlMjogbnVsbCxcblx0XHRcdFx0cGF0aDogXCJJc0FjdGl2ZUVudGl0eVwiLFxuXHRcdFx0XHRpc1BhcmFtZXRlcjogdHJ1ZVxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGlmIChzZWxlY3Rpb25WYXJpYW50QW5ub3RhdGlvbiAmJiBzZWxlY3Rpb25WYXJpYW50QW5ub3RhdGlvbi5nZXRPYmplY3QoKSkge1xuXHRcdFx0ZmlsdGVyQ29uZGl0aW9ucyA9IGdldEZpbHRlcnNDb25kaXRpb25zRnJvbVNlbGVjdGlvblZhcmlhbnQoXG5cdFx0XHRcdHNFbnRpdHlTZXRQYXRoLFxuXHRcdFx0XHRvTWV0YU1vZGVsLFxuXHRcdFx0XHRzZWxlY3Rpb25WYXJpYW50QW5ub3RhdGlvbi5nZXRPYmplY3QoKSxcblx0XHRcdFx0VmlzdWFsRmlsdGVyVXRpbHMuZ2V0Q3VzdG9tQ29uZGl0aW9ucy5iaW5kKFZpc3VhbEZpbHRlclV0aWxzKVxuXHRcdFx0KTtcblx0XHRcdGZvciAoY29uc3Qgc1BhdGggaW4gZmlsdGVyQ29uZGl0aW9ucykge1xuXHRcdFx0XHRjb25zdCBhQ29uZGl0aW9ucyA9IGZpbHRlckNvbmRpdGlvbnNbc1BhdGhdO1xuXHRcdFx0XHRhQ29uZGl0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChvQ29uZGl0aW9uOiBhbnkpIHtcblx0XHRcdFx0XHRpZiAoIW9Db25kaXRpb24uaXNQYXJhbWV0ZXIpIHtcblx0XHRcdFx0XHRcdGFGaWx0ZXJzLnB1c2gob0NvbmRpdGlvbik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKHNFbnRpdHlUeXBlICE9PSBgJHtzQ29sbGVjdGlvbk5hbWV9L2AgJiYgYVBhcmFtZXRlcnMgJiYgYVBhcmFtZXRlcnMubGVuZ3RoICYmIGZpbHRlckNvbmRpdGlvbnMpIHtcblx0XHRcdGNvbnN0IGFQYXJhbXMgPSBbXTtcblx0XHRcdGNvbnN0IGNvbnZlcnRlZEZpbHRlckNvbmRpdGlvbnMgPSBWaXN1YWxGaWx0ZXJVdGlscy5jb252ZXJ0RmlsdGVyQ29uZGlvbnMoZmlsdGVyQ29uZGl0aW9ucyk7XG5cdFx0XHRjb25zdCBwYXJhbWV0ZXJQcm9wZXJ0aWVzID0gQ29tbW9uVXRpbHMuZ2V0UGFyYW1ldGVySW5mbyhvTWV0YU1vZGVsLCBzQ29sbGVjdGlvbk5hbWUpLnBhcmFtZXRlclByb3BlcnRpZXM7XG5cdFx0XHRpZiAocGFyYW1ldGVyUHJvcGVydGllcykge1xuXHRcdFx0XHRmb3IgKGNvbnN0IGkgaW4gYVBhcmFtZXRlcnMpIHtcblx0XHRcdFx0XHRjb25zdCBwYXJhbWV0ZXIgPSBhUGFyYW1ldGVyc1tpXTtcblx0XHRcdFx0XHRjb25zdCBvUHJvcGVydHkgPSBwYXJhbWV0ZXJQcm9wZXJ0aWVzW3BhcmFtZXRlcl07XG5cdFx0XHRcdFx0Y29uc3Qgc0VudGl0eVBhdGggPSBzRW50aXR5U2V0UGF0aC5zcGxpdChcIi9cIilbMV07XG5cdFx0XHRcdFx0Y29uc3Qgb1Byb3BlcnR5Q29udGV4dCA9IG9NZXRhTW9kZWwuY3JlYXRlQmluZGluZ0NvbnRleHQoYC8ke3NFbnRpdHlQYXRofS8ke3BhcmFtZXRlcn1gKTtcblx0XHRcdFx0XHRjb25zdCBvRm9ybWF0T3B0aW9ucyA9IEpTVG9rZW5pemVyLnBhcnNlSlMoXG5cdFx0XHRcdFx0XHRGaWx0ZXJGaWVsZEhlbHBlci5mb3JtYXRPcHRpb25zKG9Qcm9wZXJ0eSwgeyBjb250ZXh0OiBvUHJvcGVydHlDb250ZXh0IH0pIHx8IFwie31cIlxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0Y29uc3Qgb0NvbnN0cmFpbnRzID0gSlNUb2tlbml6ZXIucGFyc2VKUyhcblx0XHRcdFx0XHRcdEZpbHRlckZpZWxkSGVscGVyLmNvbnN0cmFpbnRzKG9Qcm9wZXJ0eSwgeyBjb250ZXh0OiBvUHJvcGVydHlDb250ZXh0IH0pIHx8IFwie31cIlxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0Y29uc3QgdHlwZUNvbmZpZyA9IFR5cGVVdGlsLmdldFR5cGVDb25maWcob1Byb3BlcnR5LiRUeXBlLCBvRm9ybWF0T3B0aW9ucywgb0NvbnN0cmFpbnRzKTtcblx0XHRcdFx0XHRjb25zdCBvQ29uZGl0aW9uID0gY29udmVydGVkRmlsdGVyQ29uZGl0aW9uc1twYXJhbWV0ZXJdO1xuXHRcdFx0XHRcdGNvbnN0IG9Db25kaXRpb25JbnRlcm5hbCA9IG9Db25kaXRpb24gPyBvQ29uZGl0aW9uWzBdIDogdW5kZWZpbmVkO1xuXHRcdFx0XHRcdGlmIChvQ29uZGl0aW9uSW50ZXJuYWwpIHtcblx0XHRcdFx0XHRcdGNvbnN0IG1JbnRlcm5hbFBhcmFtZXRlckNvbmRpdGlvbiA9IENvbmRpdGlvbkNvbnZlcnRlci50b1R5cGUob0NvbmRpdGlvbkludGVybmFsLCB0eXBlQ29uZmlnLCBUeXBlVXRpbCBhcyBhbnkpO1xuXHRcdFx0XHRcdFx0Y29uc3Qgc0VkbVR5cGUgPSBvUHJvcGVydHkuJFR5cGU7XG5cdFx0XHRcdFx0XHRsZXQgc1ZhbHVlID0gZW5jb2RlVVJJQ29tcG9uZW50KE9EYXRhVXRpbHMuZm9ybWF0TGl0ZXJhbChtSW50ZXJuYWxQYXJhbWV0ZXJDb25kaXRpb24udmFsdWVzWzBdLCBzRWRtVHlwZSkpO1xuXHRcdFx0XHRcdFx0c1ZhbHVlID0gKHNWYWx1ZSBhcyBhbnkpLnJlcGxhY2VBbGwoXCInXCIsIFwiXFxcXCdcIik7XG5cdFx0XHRcdFx0XHRhUGFyYW1zLnB1c2goYCR7cGFyYW1ldGVyfT0ke3NWYWx1ZX1gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Y29uc3Qgc1BhcmFtZXRlckVudGl0eVNldCA9IHNDb2xsZWN0aW9uTmFtZS5zbGljZSgwLCBzQ29sbGVjdGlvbk5hbWUubGFzdEluZGV4T2YoXCIvXCIpKTtcblx0XHRcdGNvbnN0IHNUYXJnZXROYXZpZ2F0aW9uID0gc0NvbGxlY3Rpb25OYW1lLnN1YnN0cmluZyhzQ29sbGVjdGlvbk5hbWUubGFzdEluZGV4T2YoXCIvXCIpICsgMSk7XG5cdFx0XHQvLyBjcmVhdGUgcGFyYW1ldGVyIGNvbnRleHRcblx0XHRcdHNCaW5kaW5nUGF0aCA9IGAke3NQYXJhbWV0ZXJFbnRpdHlTZXR9KCR7YVBhcmFtcy50b1N0cmluZygpfSkvJHtzVGFyZ2V0TmF2aWdhdGlvbn1gO1xuXHRcdFx0c0NvbGxlY3Rpb25OYW1lID0gc0JpbmRpbmdQYXRoO1xuXHRcdH1cblx0XHRpZiAoYkN1c3RvbUFnZ3JlZ2F0ZSkge1xuXHRcdFx0Ly9jdXN0b20gYWdncmVnYXRlIGZvciBhIGN1cnJlbmN5IG9yIHVuaXQgb2YgbWVhc3VyZSBjb3JyZXNwb25kaW5nIHRvIHRoaXMgYWdncmVnYXRhYmxlIHByb3BlcnR5XG5cdFx0XHRpZiAoYlVvTUhhc0N1c3RvbUFnZ3JlZ2F0ZSkge1xuXHRcdFx0XHRzQWdncmVnYXRpb25FeHByZXNzaW9uID0gdlVPTSAmJiB2VU9NLiRQYXRoID8gYHsgJ3VuaXQnIDogJyR7dlVPTS4kUGF0aH0nIH1gIDogXCJ7fVwiO1xuXHRcdFx0XHRzVU9NRXhwcmVzc2lvbiA9IFwiXCI7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzQWdncmVnYXRpb25FeHByZXNzaW9uID0gXCJ7fVwiO1xuXHRcdFx0XHRzVU9NRXhwcmVzc2lvbiA9IHZVT00gJiYgdlVPTS4kUGF0aCA/IGAsICcke3ZVT00uJFBhdGh9JyA6IHt9YCA6IFwiXCI7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmIChcblx0XHRcdG9BZ2dyZWdhdGlvbiAmJlxuXHRcdFx0b0FnZ3JlZ2F0aW9uLkFnZ3JlZ2F0YWJsZVByb3BlcnR5ICYmXG5cdFx0XHRvQWdncmVnYXRpb24uQWdncmVnYXRhYmxlUHJvcGVydHkudmFsdWUgJiZcblx0XHRcdG9BZ2dyZWdhdGlvbi5BZ2dyZWdhdGlvbk1ldGhvZFxuXHRcdCkge1xuXHRcdFx0c0FnZ3JlZ2F0aW9uRXhwcmVzc2lvbiA9XG5cdFx0XHRcdFwieyAnbmFtZScgOiAnXCIgKyBvQWdncmVnYXRpb24uQWdncmVnYXRhYmxlUHJvcGVydHkudmFsdWUgKyBcIicsICd3aXRoJyA6ICdcIiArIG9BZ2dyZWdhdGlvbi5BZ2dyZWdhdGlvbk1ldGhvZCArIFwiJ31cIjtcblx0XHRcdHNVT01FeHByZXNzaW9uID0gdlVPTSAmJiB2VU9NLiRQYXRoID8gXCIsICdcIiArIHZVT00uJFBhdGggKyBcIicgOiB7fVwiIDogXCJcIjtcblx0XHR9XG5cdFx0Y29uc3Qgc1RleHRBc3NvY2lhdGlvbkV4cHJlc3Npb24gPSBvVGV4dEFzc29jaWF0aW9uID8gXCInIDogeyAnYWRkaXRpb25hbGx5JyA6IFsnXCIgKyBvVGV4dEFzc29jaWF0aW9uLiRQYXRoICsgXCInXSB9XCIgOiBcIicgOiB7IH1cIjtcblx0XHRjb25zdCBzRmlsdGVyRXhwcmVzc2lvbiA9IEpTT04uc3RyaW5naWZ5KGFGaWx0ZXJzKTtcblx0XHRyZXR1cm4gKFxuXHRcdFx0XCJ7cGF0aDogJ1wiICtcblx0XHRcdHNDb2xsZWN0aW9uTmFtZSArXG5cdFx0XHRcIicsIHRlbXBsYXRlU2hhcmVhYmxlOiB0cnVlLCBzdXNwZW5kZWQgOiB0cnVlLCAnZmlsdGVycycgOiBcIiArXG5cdFx0XHRzRmlsdGVyRXhwcmVzc2lvbiArXG5cdFx0XHRcIiwncGFyYW1ldGVycycgOiB7XCIgK1xuXHRcdFx0SW50ZXJhY3RpdmVDaGFydEhlbHBlci5nZXRTb3J0T3JkZXIob0ludGVyZmFjZSwgb01ldGFNb2RlbCwgb0NoYXJ0QW5ub3RhdGlvbnMsIG9EaW1lbnNpb25UeXBlLCBhU29ydE9yZGVyLCBzQ2hhcnRNZWFzdXJlKSArXG5cdFx0XHRcIiwgJyQkYWdncmVnYXRpb24nIDogeydhZ2dyZWdhdGUnIDogeydcIiArXG5cdFx0XHRzQ2hhcnRNZWFzdXJlICtcblx0XHRcdFwiJyA6IFwiICtcblx0XHRcdHNBZ2dyZWdhdGlvbkV4cHJlc3Npb24gK1xuXHRcdFx0XCJ9LCdncm91cCcgOiB7J1wiICtcblx0XHRcdHNEaW1lbnNpb24gK1xuXHRcdFx0c1RleHRBc3NvY2lhdGlvbkV4cHJlc3Npb24gK1xuXHRcdFx0c1VPTUV4cHJlc3Npb24gK1xuXHRcdFx0XCJ9IH0gfVwiICtcblx0XHRcdEludGVyYWN0aXZlQ2hhcnRIZWxwZXIuZ2V0TWF4SXRlbXMob0NoYXJ0QW5ub3RhdGlvbnMpICtcblx0XHRcdFwifVwiXG5cdFx0KTtcblx0fSxcblx0Z2V0U29ydE9yZGVyOiBmdW5jdGlvbiAoXG5cdFx0b0ludGVyZmFjZTogYW55LFxuXHRcdG9NZXRhTW9kZWw6IGFueSxcblx0XHRvQ2hhcnRBbm5vdGF0aW9uczogYW55LFxuXHRcdHNEaW1lbnNpb25UeXBlOiBhbnksXG5cdFx0YVNvcnRPcmRlcjogYW55LFxuXHRcdHNDaGFydE1lYXN1cmU6IGFueVxuXHQpIHtcblx0XHRsZXQgc1NvcnRQcm9wZXJ0eU5hbWU7XG5cdFx0aWYgKFxuXHRcdFx0b0NoYXJ0QW5ub3RhdGlvbnMuQ2hhcnRUeXBlLiRFbnVtTWVtYmVyID09PSBcImNvbS5zYXAudm9jYWJ1bGFyaWVzLlVJLnYxLkNoYXJ0VHlwZS9Eb251dFwiIHx8XG5cdFx0XHRvQ2hhcnRBbm5vdGF0aW9ucy5DaGFydFR5cGUuJEVudW1NZW1iZXIgPT09IFwiY29tLnNhcC52b2NhYnVsYXJpZXMuVUkudjEuQ2hhcnRUeXBlL0JhclwiXG5cdFx0KSB7XG5cdFx0XHRpZiAoYVNvcnRPcmRlciAmJiBhU29ydE9yZGVyLmxlbmd0aCkge1xuXHRcdFx0XHRpZiAoYVNvcnRPcmRlclswXS5EeW5hbWljUHJvcGVydHkpIHtcblx0XHRcdFx0XHRzU29ydFByb3BlcnR5TmFtZSA9IG9NZXRhTW9kZWwuZ2V0T2JqZWN0KFxuXHRcdFx0XHRcdFx0b0ludGVyZmFjZS5nZXRQYXRoKDApLnNwbGl0KFwiQFwiKVswXSArIGFTb3J0T3JkZXJbMF0uRHluYW1pY1Byb3BlcnR5LiRBbm5vdGF0aW9uUGF0aFxuXHRcdFx0XHRcdCkuTmFtZTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRzU29ydFByb3BlcnR5TmFtZSA9IGFTb3J0T3JkZXJbMF0uUHJvcGVydHkuJFByb3BlcnR5UGF0aDtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoc1NvcnRQcm9wZXJ0eU5hbWUgPT09IHNDaGFydE1lYXN1cmUpIHtcblx0XHRcdFx0XHRyZXR1cm4gXCInJG9yZGVyYnknIDogJ1wiICsgc0NoYXJ0TWVhc3VyZSArIChhU29ydE9yZGVyWzBdLkRlc2NlbmRpbmcgPyBcIiBkZXNjJ1wiIDogXCInXCIpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBcIickb3JkZXJieScgOiAnXCIgKyBzQ2hhcnRNZWFzdXJlICsgXCIgZGVzYydcIjtcblx0XHRcdH1cblx0XHRcdHJldHVybiBcIickb3JkZXJieScgOiAnXCIgKyBzQ2hhcnRNZWFzdXJlICsgXCIgZGVzYydcIjtcblx0XHR9IGVsc2UgaWYgKHNEaW1lbnNpb25UeXBlID09PSBcIkVkbS5EYXRlXCIgfHwgc0RpbWVuc2lvblR5cGUgPT09IFwiRWRtLlRpbWVcIiB8fCBzRGltZW5zaW9uVHlwZSA9PT0gXCJFZG0uRGF0ZVRpbWVPZmZzZXRcIikge1xuXHRcdFx0cmV0dXJuIFwiJyRvcmRlcmJ5JyA6ICdcIiArIG9DaGFydEFubm90YXRpb25zLkRpbWVuc2lvbnNbMF0uJFByb3BlcnR5UGF0aCArIFwiJ1wiO1xuXHRcdH0gZWxzZSBpZiAoXG5cdFx0XHRhU29ydE9yZGVyICYmXG5cdFx0XHRhU29ydE9yZGVyLmxlbmd0aCAmJlxuXHRcdFx0YVNvcnRPcmRlclswXS5Qcm9wZXJ0eS4kUHJvcGVydHlQYXRoID09PSBvQ2hhcnRBbm5vdGF0aW9ucy5EaW1lbnNpb25zWzBdLiRQcm9wZXJ0eVBhdGhcblx0XHQpIHtcblx0XHRcdHJldHVybiBcIickb3JkZXJieScgOiAnXCIgKyBhU29ydE9yZGVyWzBdLlByb3BlcnR5LiRQcm9wZXJ0eVBhdGggKyAoYVNvcnRPcmRlclswXS5EZXNjZW5kaW5nID8gXCIgZGVzYydcIiA6IFwiJ1wiKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIFwiJyRvcmRlcmJ5JyA6ICdcIiArIG9DaGFydEFubm90YXRpb25zLkRpbWVuc2lvbnNbMF0uJFByb3BlcnR5UGF0aCArIFwiJ1wiO1xuXHRcdH1cblx0fSxcblx0Z2V0TWF4SXRlbXM6IGZ1bmN0aW9uIChvQ2hhcnRBbm5vdGF0aW9uczogYW55KSB7XG5cdFx0aWYgKG9DaGFydEFubm90YXRpb25zLkNoYXJ0VHlwZS4kRW51bU1lbWJlciA9PT0gXCJjb20uc2FwLnZvY2FidWxhcmllcy5VSS52MS5DaGFydFR5cGUvQmFyXCIpIHtcblx0XHRcdHJldHVybiBcIiwnc3RhcnRJbmRleCcgOiAwLCdsZW5ndGgnIDogM1wiO1xuXHRcdH0gZWxzZSBpZiAob0NoYXJ0QW5ub3RhdGlvbnMuQ2hhcnRUeXBlLiRFbnVtTWVtYmVyID09PSBcImNvbS5zYXAudm9jYWJ1bGFyaWVzLlVJLnYxLkNoYXJ0VHlwZS9MaW5lXCIpIHtcblx0XHRcdHJldHVybiBcIiwnc3RhcnRJbmRleCcgOiAwLCdsZW5ndGgnIDogNlwiO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gXCJcIjtcblx0XHR9XG5cdH0sXG5cdGdldENvbG9yQmluZGluZzogZnVuY3Rpb24gKGlDb250ZXh0OiBhbnksIG9EYXRhUG9pbnQ6IGFueSwgb0RpbWVuc2lvbjogYW55KSB7XG5cdFx0Y29uc3Qgb01vZGVsID0gaUNvbnRleHQuZ2V0TW9kZWwoMCk7XG5cdFx0Y29uc3Qgb0RpbWVuc2lvblBhdGggPSBpQ29udGV4dC5nZXRQYXRoKDEpO1xuXHRcdGNvbnN0IGFWYWx1ZUNyaXRpY2FsaXR5ID0gb01vZGVsLmdldE9iamVjdChgJHtvRGltZW5zaW9uUGF0aH0kUHJvcGVydHlQYXRoQGNvbS5zYXAudm9jYWJ1bGFyaWVzLlVJLnYxLlZhbHVlQ3JpdGljYWxpdHlgKTtcblx0XHRvRGF0YVBvaW50ID0gb0RhdGFQb2ludC50YXJnZXRPYmplY3Q7XG5cdFx0aWYgKG9EYXRhUG9pbnQuQ3JpdGljYWxpdHkpIHtcblx0XHRcdHJldHVybiBidWlsZEV4cHJlc3Npb25Gb3JDcml0aWNhbGl0eUNvbG9yTWljcm9DaGFydChvRGF0YVBvaW50KTtcblx0XHR9IGVsc2UgaWYgKG9EYXRhUG9pbnQuQ3JpdGljYWxpdHlDYWxjdWxhdGlvbikge1xuXHRcdFx0Y29uc3Qgb0RpcmVjdGlvbiA9XG5cdFx0XHRcdG9EYXRhUG9pbnQuQ3JpdGljYWxpdHlDYWxjdWxhdGlvbi5JbXByb3ZlbWVudERpcmVjdGlvbiAmJlxuXHRcdFx0XHRvRGF0YVBvaW50LkNyaXRpY2FsaXR5Q2FsY3VsYXRpb24uSW1wcm92ZW1lbnREaXJlY3Rpb24uJEVudW1NZW1iZXI7XG5cdFx0XHRjb25zdCBvRGF0YVBvaW50VmFsdWUgPSBPRGF0YU1vZGVsQW5ub3RhdGlvbkhlbHBlci52YWx1ZShvRGF0YVBvaW50LlZhbHVlLCB7IGNvbnRleHQ6IGlDb250ZXh0LmdldEludGVyZmFjZSgwKSB9KTtcblx0XHRcdGNvbnN0IG9EZXZpYXRpb25SYW5nZUxvd1ZhbHVlID0gT0RhdGFNb2RlbEFubm90YXRpb25IZWxwZXIudmFsdWUob0RhdGFQb2ludC5Dcml0aWNhbGl0eUNhbGN1bGF0aW9uLkRldmlhdGlvblJhbmdlTG93VmFsdWUsIHtcblx0XHRcdFx0Y29udGV4dDogaUNvbnRleHQuZ2V0SW50ZXJmYWNlKDApXG5cdFx0XHR9KTtcblx0XHRcdGNvbnN0IG9Ub2xlcmFuY2VSYW5nZUxvd1ZhbHVlID0gT0RhdGFNb2RlbEFubm90YXRpb25IZWxwZXIudmFsdWUob0RhdGFQb2ludC5Dcml0aWNhbGl0eUNhbGN1bGF0aW9uLlRvbGVyYW5jZVJhbmdlTG93VmFsdWUsIHtcblx0XHRcdFx0Y29udGV4dDogaUNvbnRleHQuZ2V0SW50ZXJmYWNlKDApXG5cdFx0XHR9KTtcblx0XHRcdGNvbnN0IG9BY2NlcHRhbmNlUmFuZ2VMb3dWYWx1ZSA9IE9EYXRhTW9kZWxBbm5vdGF0aW9uSGVscGVyLnZhbHVlKG9EYXRhUG9pbnQuQ3JpdGljYWxpdHlDYWxjdWxhdGlvbi5BY2NlcHRhbmNlUmFuZ2VMb3dWYWx1ZSwge1xuXHRcdFx0XHRjb250ZXh0OiBpQ29udGV4dC5nZXRJbnRlcmZhY2UoMClcblx0XHRcdH0pO1xuXHRcdFx0Y29uc3Qgb0FjY2VwdGFuY2VSYW5nZUhpZ2hWYWx1ZSA9IE9EYXRhTW9kZWxBbm5vdGF0aW9uSGVscGVyLnZhbHVlKG9EYXRhUG9pbnQuQ3JpdGljYWxpdHlDYWxjdWxhdGlvbi5BY2NlcHRhbmNlUmFuZ2VIaWdoVmFsdWUsIHtcblx0XHRcdFx0Y29udGV4dDogaUNvbnRleHQuZ2V0SW50ZXJmYWNlKDApXG5cdFx0XHR9KTtcblx0XHRcdGNvbnN0IG9Ub2xlcmFuY2VSYW5nZUhpZ2hWYWx1ZSA9IE9EYXRhTW9kZWxBbm5vdGF0aW9uSGVscGVyLnZhbHVlKG9EYXRhUG9pbnQuQ3JpdGljYWxpdHlDYWxjdWxhdGlvbi5Ub2xlcmFuY2VSYW5nZUhpZ2hWYWx1ZSwge1xuXHRcdFx0XHRjb250ZXh0OiBpQ29udGV4dC5nZXRJbnRlcmZhY2UoMClcblx0XHRcdH0pO1xuXHRcdFx0Y29uc3Qgb0RldmlhdGlvblJhbmdlSGlnaFZhbHVlID0gT0RhdGFNb2RlbEFubm90YXRpb25IZWxwZXIudmFsdWUob0RhdGFQb2ludC5Dcml0aWNhbGl0eUNhbGN1bGF0aW9uLkRldmlhdGlvblJhbmdlSGlnaFZhbHVlLCB7XG5cdFx0XHRcdGNvbnRleHQ6IGlDb250ZXh0LmdldEludGVyZmFjZSgwKVxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gQ29tbW9uSGVscGVyLmdldENyaXRpY2FsaXR5Q2FsY3VsYXRpb25CaW5kaW5nKFxuXHRcdFx0XHRvRGlyZWN0aW9uLFxuXHRcdFx0XHRvRGF0YVBvaW50VmFsdWUsXG5cdFx0XHRcdG9EZXZpYXRpb25SYW5nZUxvd1ZhbHVlLFxuXHRcdFx0XHRvVG9sZXJhbmNlUmFuZ2VMb3dWYWx1ZSxcblx0XHRcdFx0b0FjY2VwdGFuY2VSYW5nZUxvd1ZhbHVlLFxuXHRcdFx0XHRvQWNjZXB0YW5jZVJhbmdlSGlnaFZhbHVlLFxuXHRcdFx0XHRvVG9sZXJhbmNlUmFuZ2VIaWdoVmFsdWUsXG5cdFx0XHRcdG9EZXZpYXRpb25SYW5nZUhpZ2hWYWx1ZVxuXHRcdFx0KTtcblx0XHR9IGVsc2UgaWYgKGFWYWx1ZUNyaXRpY2FsaXR5ICYmIGFWYWx1ZUNyaXRpY2FsaXR5Lmxlbmd0aCkge1xuXHRcdFx0cmV0dXJuIENvbW1vbkhlbHBlci5nZXRWYWx1ZUNyaXRpY2FsaXR5KG9EaW1lbnNpb24uJFByb3BlcnR5UGF0aCwgYVZhbHVlQ3JpdGljYWxpdHkpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHRcdH1cblx0fSxcblx0Z2V0U2NhbGVVb01UaXRsZTogZnVuY3Rpb24gKFxuXHRcdG9JbnRlcmZhY2U6IGFueSxcblx0XHRvQ2hhcnRBbm5vdGF0aW9uOiBhbnksXG5cdFx0b0NvbGxlY3Rpb246IGFueSxcblx0XHRzTWV0YVBhdGg6IGFueSxcblx0XHRiQ3VzdG9tQWdncmVnYXRlOiBhbnksXG5cdFx0b0FnZ3JlZ2F0aW9uOiBhbnksXG5cdFx0c1NlcGVyYXRvcj86IGFueSxcblx0XHRiSXNUb29sVGlwPzogYW55XG5cdCkge1xuXHRcdGNvbnN0IG9Nb2RlbCA9IG9JbnRlcmZhY2UuZ2V0TW9kZWwoMCk7XG5cdFx0Y29uc3Qgc1NjYWxlRmFjdG9yID0gb01vZGVsLmdldE9iamVjdChcblx0XHRcdGAke29JbnRlcmZhY2UuZ2V0UGF0aCgwKX0vTWVhc3VyZUF0dHJpYnV0ZXMvMC9EYXRhUG9pbnQvJEFubm90YXRpb25QYXRoL1ZhbHVlRm9ybWF0L1NjYWxlRmFjdG9yLyREZWNpbWFsYFxuXHRcdCk7XG5cdFx0Y29uc3Qgc0luZm9QYXRoID0gZ2VuZXJhdGUoW3NNZXRhUGF0aF0pO1xuXHRcdGNvbnN0IGZpeGVkSW50ZWdlciA9IE51bWJlckZvcm1hdC5nZXRJbnRlZ2VySW5zdGFuY2Uoe1xuXHRcdFx0c3R5bGU6IFwic2hvcnRcIixcblx0XHRcdHNob3dTY2FsZTogZmFsc2UsXG5cdFx0XHRzaG9ydFJlZk51bWJlcjogc1NjYWxlRmFjdG9yXG5cdFx0fSk7XG5cdFx0bGV0IHNTY2FsZSA9IChmaXhlZEludGVnZXIgYXMgYW55KS5nZXRTY2FsZSgpO1xuXHRcdGxldCB2VU9NID0gSW50ZXJhY3RpdmVDaGFydEhlbHBlci5nZXRVb00ob0ludGVyZmFjZSwgb0NoYXJ0QW5ub3RhdGlvbiwgb0NvbGxlY3Rpb24sIHVuZGVmaW5lZCwgYkN1c3RvbUFnZ3JlZ2F0ZSwgb0FnZ3JlZ2F0aW9uKTtcblx0XHR2VU9NID0gdlVPTSAmJiAodlVPTS4kUGF0aCA/IFwiJHtpbnRlcm5hbD51b20vXCIgKyBzSW5mb1BhdGggKyBcIn1cIiA6IFwiJ1wiICsgdlVPTSArIFwiJ1wiKTtcblx0XHRzU2NhbGUgPSBzU2NhbGUgPyBcIidcIiArIHNTY2FsZSArIFwiJ1wiIDogXCIke2ludGVybmFsPnNjYWxlZmFjdG9yL1wiICsgc0luZm9QYXRoICsgXCJ9XCI7XG5cdFx0aWYgKCFzU2VwZXJhdG9yKSB7XG5cdFx0XHRzU2VwZXJhdG9yID0gXCJ8XCI7XG5cdFx0fVxuXHRcdHNTZXBlcmF0b3IgPSB2VU9NID8gXCInIFwiICsgc1NlcGVyYXRvciArIFwiICcgKyBcIiA6IFwiXCI7XG5cdFx0Y29uc3Qgc0V4cHJlc3Npb24gPSBzU2NhbGUgJiYgdlVPTSA/IHNTZXBlcmF0b3IgKyBzU2NhbGUgKyBcIiArICcgJyArIFwiICsgdlVPTSA6IHNTZXBlcmF0b3IgKyAoc1NjYWxlIHx8IHZVT00pO1xuXHRcdHJldHVybiBiSXNUb29sVGlwID8gc0V4cHJlc3Npb24gOiBcIns9IFwiICsgc0V4cHJlc3Npb24gKyBcIn1cIjtcblx0fSxcblx0Z2V0TWVhc3VyZURpbWVuc2lvblRpdGxlOiBmdW5jdGlvbiAoXG5cdFx0b0ludGVyZmFjZTogYW55LFxuXHRcdG9DaGFydEFubm90YXRpb246IGFueSxcblx0XHRvQ29sbGVjdGlvbjogYW55LFxuXHRcdGJDdXN0b21BZ2dyZWdhdGU6IGFueSxcblx0XHRvQWdncmVnYXRpb246IGFueVxuXHQpIHtcblx0XHRjb25zdCBvTW9kZWwgPSBvSW50ZXJmYWNlLmdldE1vZGVsKDApO1xuXHRcdGxldCBzTWVhc3VyZUxhYmVsO1xuXHRcdGNvbnN0IHNNZWFzdXJlUGF0aEV4cHJlc3Npb24gPSBJbnRlcmFjdGl2ZUNoYXJ0SGVscGVyLl9nZXRNZWFzdXJlUGF0aChvQ2hhcnRBbm5vdGF0aW9uLCBiQ3VzdG9tQWdncmVnYXRlKTtcblx0XHRjb25zdCBzTWVhc3VyZVBhdGggPSBvTW9kZWwuZ2V0T2JqZWN0KGAke29JbnRlcmZhY2UuZ2V0UGF0aCgwKX1gICsgc01lYXN1cmVQYXRoRXhwcmVzc2lvbik7XG5cdFx0Y29uc3Qgc0RpbWVuc2lvblBhdGggPSBvTW9kZWwuZ2V0T2JqZWN0KGAke29JbnRlcmZhY2UuZ2V0UGF0aCgwKX0vRGltZW5zaW9ucy8wLyRQcm9wZXJ0eVBhdGhgKTtcblx0XHRsZXQgc0RpbWVuc2lvbkxhYmVsID0gSW50ZXJhY3RpdmVDaGFydEhlbHBlci5nZXRMYWJlbChvTW9kZWwsIG9JbnRlcmZhY2UsIFwiRGltZW5zaW9uc1wiKTtcblx0XHRpZiAoIWJDdXN0b21BZ2dyZWdhdGUgJiYgb0FnZ3JlZ2F0aW9uKSB7XG5cdFx0XHQvLyBjaGVjayBpZiB0aGUgbGFiZWwgaXMgcGFydCBvZiBhZ2dyZWdhdGVkIHByb3BlcnRpZXMgKFRyYW5zZm9ybWF0aW9uIGFnZ3JlZ2F0ZXMpXG5cdFx0XHRzTWVhc3VyZUxhYmVsID0gb0FnZ3JlZ2F0aW9uLmFubm90YXRpb25zICYmIG9BZ2dyZWdhdGlvbi5hbm5vdGF0aW9ucy5Db21tb24gJiYgb0FnZ3JlZ2F0aW9uLmFubm90YXRpb25zLkNvbW1vbi5MYWJlbDtcblx0XHRcdGlmIChzTWVhc3VyZUxhYmVsID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0c01lYXN1cmVMYWJlbCA9IHNNZWFzdXJlTGFiZWwgPSBJbnRlcmFjdGl2ZUNoYXJ0SGVscGVyLmdldExhYmVsKG9Nb2RlbCwgb0ludGVyZmFjZSwgXCJNZWFzdXJlc1wiKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0c01lYXN1cmVMYWJlbCA9IEludGVyYWN0aXZlQ2hhcnRIZWxwZXIuZ2V0TGFiZWwob01vZGVsLCBvSW50ZXJmYWNlLCBcIk1lYXN1cmVzXCIpO1xuXHRcdH1cblx0XHRpZiAoc01lYXN1cmVMYWJlbCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRzTWVhc3VyZUxhYmVsID0gc01lYXN1cmVQYXRoO1xuXHRcdH1cblx0XHRpZiAoc0RpbWVuc2lvbkxhYmVsID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHNEaW1lbnNpb25MYWJlbCA9IHNEaW1lbnNpb25QYXRoO1xuXHRcdH1cblx0XHRyZXR1cm4gKFxuXHRcdFx0UmVzb3VyY2VNb2RlbCAmJlxuXHRcdFx0UmVzb3VyY2VNb2RlbC5nZXRUZXh0KFwiTV9JTlRFUkFDVElWRV9DSEFSVF9IRUxQRVJfVklTVUFMRklMVEVSX01FQVNVUkVfRElNRU5TSU9OX1RJVExFXCIsIFtzTWVhc3VyZUxhYmVsLCBzRGltZW5zaW9uTGFiZWxdKVxuXHRcdCk7XG5cdH0sXG5cdGdldExhYmVsOiBmdW5jdGlvbiAob01vZGVsOiBhbnksIG9JbnRlcmZhY2U6IGFueSwgc1Byb3BlcnR5OiBhbnkpIHtcblx0XHRyZXR1cm4gb01vZGVsLmdldE9iamVjdChgJHtvSW50ZXJmYWNlLmdldFBhdGgoMCl9LyR7c1Byb3BlcnR5fS8wLyRQcm9wZXJ0eVBhdGhAY29tLnNhcC52b2NhYnVsYXJpZXMuQ29tbW9uLnYxLkxhYmVsYCk7XG5cdH0sXG5cblx0Z2V0VG9vbFRpcDogZnVuY3Rpb24gKFxuXHRcdG9JbnRlcmZhY2U6IGFueSxcblx0XHRvQ2hhcnRBbm5vdGF0aW9uOiBhbnksXG5cdFx0b0NvbGxlY3Rpb246IGFueSxcblx0XHRzTWV0YVBhdGg6IGFueSxcblx0XHRiQ3VzdG9tQWdncmVnYXRlOiBhbnksXG5cdFx0b0FnZ3JlZ2F0aW9uOiBhbnksXG5cdFx0YlJlbmRlckxpbmVDaGFydDogYW55XG5cdCkge1xuXHRcdGNvbnN0IHNDaGFydFR5cGUgPSBvQ2hhcnRBbm5vdGF0aW9uICYmIG9DaGFydEFubm90YXRpb25bXCJDaGFydFR5cGVcIl07XG5cblx0XHRsZXQgc01lYXN1cmVEaW1lbnNpb25Ub29sVGlwID0gSW50ZXJhY3RpdmVDaGFydEhlbHBlci5nZXRNZWFzdXJlRGltZW5zaW9uVGl0bGUoXG5cdFx0XHRvSW50ZXJmYWNlLFxuXHRcdFx0b0NoYXJ0QW5ub3RhdGlvbixcblx0XHRcdG9Db2xsZWN0aW9uLFxuXHRcdFx0YkN1c3RvbUFnZ3JlZ2F0ZSxcblx0XHRcdG9BZ2dyZWdhdGlvblxuXHRcdCk7XG5cdFx0c01lYXN1cmVEaW1lbnNpb25Ub29sVGlwID0gQ29tbW9uSGVscGVyLmVzY2FwZVNpbmdsZVF1b3RlcyhzTWVhc3VyZURpbWVuc2lvblRvb2xUaXApO1xuXHRcdGlmIChiUmVuZGVyTGluZUNoYXJ0ID09PSBcImZhbHNlXCIgJiYgc0NoYXJ0VHlwZSA9PT0gXCJVSS5DaGFydFR5cGUvTGluZVwiKSB7XG5cdFx0XHRyZXR1cm4gYHs9ICcke3NNZWFzdXJlRGltZW5zaW9uVG9vbFRpcH0nfWA7XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc1NlcGVyYXRvciA9IFJlc291cmNlTW9kZWwuZ2V0VGV4dChcIk1fSU5URVJBQ1RJVkVfQ0hBUlRfSEVMUEVSX1ZJU1VBTEZJTFRFUl9UT09MVElQX1NFUEVSQVRPUlwiKTtcblx0XHRjb25zdCBzSW5mb1BhdGggPSBnZW5lcmF0ZShbc01ldGFQYXRoXSk7XG5cdFx0Y29uc3Qgc1NjYWxlVU9NVG9vbHRpcCA9IEludGVyYWN0aXZlQ2hhcnRIZWxwZXIuZ2V0U2NhbGVVb01UaXRsZShcblx0XHRcdG9JbnRlcmZhY2UsXG5cdFx0XHRvQ2hhcnRBbm5vdGF0aW9uLFxuXHRcdFx0b0NvbGxlY3Rpb24sXG5cdFx0XHRzSW5mb1BhdGgsXG5cdFx0XHRiQ3VzdG9tQWdncmVnYXRlLFxuXHRcdFx0b0FnZ3JlZ2F0aW9uLFxuXHRcdFx0c1NlcGVyYXRvcixcblx0XHRcdHRydWVcblx0XHQpO1xuXHRcdHJldHVybiBcIns9ICdcIiArIHNNZWFzdXJlRGltZW5zaW9uVG9vbFRpcCArIChzU2NhbGVVT01Ub29sdGlwID8gXCInICsgXCIgKyBzU2NhbGVVT01Ub29sdGlwIDogXCInXCIpICsgXCJ9XCI7XG5cdH0sXG5cdGdldFVvTTogZnVuY3Rpb24gKFxuXHRcdG9JbnRlcmZhY2U6IGFueSxcblx0XHRvQ2hhcnRBbm5vdGF0aW9uOiBhbnksXG5cdFx0b0NvbGxlY3Rpb246IGFueSxcblx0XHRpc0N1c3RvbURhdGE6IGFueSxcblx0XHRiQ3VzdG9tQWdncmVnYXRlOiBhbnksXG5cdFx0b0FnZ3JlZ2F0aW9uOiBhbnlcblx0KSB7XG5cdFx0Y29uc3Qgb01vZGVsID0gb0ludGVyZmFjZS5nZXRNb2RlbCgwKTtcblx0XHRjb25zdCBzTWVhc3VyZVBhdGhFeHByZXNzaW9uID0gSW50ZXJhY3RpdmVDaGFydEhlbHBlci5fZ2V0TWVhc3VyZVBhdGgob0NoYXJ0QW5ub3RhdGlvbiwgYkN1c3RvbUFnZ3JlZ2F0ZSk7XG5cdFx0Y29uc3QgdklTT0N1cnJlbmN5ID0gb01vZGVsLmdldE9iamVjdChgJHtvSW50ZXJmYWNlLmdldFBhdGgoMCl9YCArIHNNZWFzdXJlUGF0aEV4cHJlc3Npb24gKyBgQE9yZy5PRGF0YS5NZWFzdXJlcy5WMS5JU09DdXJyZW5jeWApO1xuXHRcdGNvbnN0IHZVbml0ID0gb01vZGVsLmdldE9iamVjdChgJHtvSW50ZXJmYWNlLmdldFBhdGgoMCl9YCArIHNNZWFzdXJlUGF0aEV4cHJlc3Npb24gKyBgQE9yZy5PRGF0YS5NZWFzdXJlcy5WMS5Vbml0YCk7XG5cdFx0Y29uc3Qgc01lYXN1cmVQYXRoID0gb01vZGVsLmdldE9iamVjdChgJHtvSW50ZXJmYWNlLmdldFBhdGgoMCl9YCArIHNNZWFzdXJlUGF0aEV4cHJlc3Npb24pO1xuXHRcdGxldCBzQWdncmVnYXRhYmxlUHJvcGVydHlQYXRoOiBhbnk7XG5cdFx0aWYgKCFiQ3VzdG9tQWdncmVnYXRlICYmIG9BZ2dyZWdhdGlvbikge1xuXHRcdFx0c0FnZ3JlZ2F0YWJsZVByb3BlcnR5UGF0aCA9IG9BZ2dyZWdhdGlvbi5BZ2dyZWdhdGFibGVQcm9wZXJ0eSAmJiBvQWdncmVnYXRpb24uQWdncmVnYXRhYmxlUHJvcGVydHkudmFsdWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHNBZ2dyZWdhdGFibGVQcm9wZXJ0eVBhdGggPSBzTWVhc3VyZVBhdGg7XG5cdFx0fVxuXHRcdGNvbnN0IF9nZXRVT00gPSBmdW5jdGlvbiAodlVPTTogYW55LCBzQW5ub3RhdGlvbjogYW55KSB7XG5cdFx0XHRjb25zdCBzVU9NID0gc0Fubm90YXRpb24gJiYgc0Fubm90YXRpb24uc3BsaXQoXCJWMS5cIilbMV07XG5cdFx0XHRjb25zdCBvVU9NOiBhbnkgPSB7fTtcblx0XHRcdGlmICh2VU9NKSB7XG5cdFx0XHRcdC8vIGNoZWNrIGlmIHRoZSBVT00gaXMgcGFydCBvZiBNZWFzdXJlIGFubm90YXRpb25zKEN1c3RvbSBhZ2dyZWdhdGVzKVxuXHRcdFx0XHRvVU9NW3NVT01dID0gdlVPTTtcblx0XHRcdFx0cmV0dXJuIGlzQ3VzdG9tRGF0YSAmJiB2VU9NLiRQYXRoID8gSlNPTi5zdHJpbmdpZnkob1VPTSkgOiB2VU9NO1xuXHRcdFx0fSBlbHNlIGlmIChzQWdncmVnYXRhYmxlUHJvcGVydHlQYXRoKSB7XG5cdFx0XHRcdC8vIGNoZWNrIGlmIHRoZSBVT00gaXMgcGFydCBvZiBiYXNlIHByb3BlcnR5IGFubm90YXRpb25zKFRyYW5zZm9ybWF0aW9uIGFnZ3JlZ2F0ZXMpXG5cdFx0XHRcdHZVT00gPSBvSW50ZXJmYWNlLmdldE1vZGVsKDEpLmdldE9iamVjdChgJHtvSW50ZXJmYWNlLmdldFBhdGgoMSl9LyR7c0FnZ3JlZ2F0YWJsZVByb3BlcnR5UGF0aH0ke3NBbm5vdGF0aW9ufWApO1xuXHRcdFx0XHRvVU9NW3NVT01dID0gdlVPTTtcblx0XHRcdFx0cmV0dXJuIHZVT00gJiYgaXNDdXN0b21EYXRhICYmIHZVT00uJFBhdGggPyBKU09OLnN0cmluZ2lmeShvVU9NKSA6IHZVT007XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRyZXR1cm4gX2dldFVPTSh2SVNPQ3VycmVuY3ksIFwiQE9yZy5PRGF0YS5NZWFzdXJlcy5WMS5JU09DdXJyZW5jeVwiKSB8fCBfZ2V0VU9NKHZVbml0LCBcIkBPcmcuT0RhdGEuTWVhc3VyZXMuVjEuVW5pdFwiKTtcblx0fSxcblx0Z2V0U2NhbGVGYWN0b3I6IGZ1bmN0aW9uIChvVmFsdWVGb3JtYXQ6IGFueSkge1xuXHRcdGlmIChvVmFsdWVGb3JtYXQgJiYgb1ZhbHVlRm9ybWF0LlNjYWxlRmFjdG9yKSB7XG5cdFx0XHRyZXR1cm4gb1ZhbHVlRm9ybWF0LlNjYWxlRmFjdG9yLiREZWNpbWFsO1xuXHRcdH1cblx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHR9LFxuXHRnZXRVb01WaXNpYmxpdHk6IGZ1bmN0aW9uIChvQ2hhcnRBbm5vdGF0aW9uOiBhbnksIGJTaG93RXJyb3I6IGFueSkge1xuXHRcdGNvbnN0IHNDaGFydFR5cGUgPSBvQ2hhcnRBbm5vdGF0aW9uICYmIG9DaGFydEFubm90YXRpb25bXCJDaGFydFR5cGVcIl07XG5cdFx0aWYgKGJTaG93RXJyb3IpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9IGVsc2UgaWYgKCEoc0NoYXJ0VHlwZSA9PT0gXCJVSS5DaGFydFR5cGUvQmFyXCIgfHwgc0NoYXJ0VHlwZSA9PT0gXCJVSS5DaGFydFR5cGUvTGluZVwiKSkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdH0sXG5cdGdldEluUGFyYW1ldGVyRmlsdGVyc0JpbmRpbmc6IGZ1bmN0aW9uIChhSW5QYXJhbWV0ZXJzOiBhbnkpIHtcblx0XHRpZiAoYUluUGFyYW1ldGVycy5sZW5ndGggPiAwKSB7XG5cdFx0XHRjb25zdCBhUGFydHM6IGFueVtdID0gW107XG5cdFx0XHRsZXQgc1BhdGhzID0gXCJcIjtcblx0XHRcdGFJblBhcmFtZXRlcnMuZm9yRWFjaChmdW5jdGlvbiAob0luUGFyYW1ldGVyOiBhbnkpIHtcblx0XHRcdFx0aWYgKG9JblBhcmFtZXRlci5sb2NhbERhdGFQcm9wZXJ0eSkge1xuXHRcdFx0XHRcdGFQYXJ0cy5wdXNoKGB7cGF0aDonJGZpbHRlcnM+L2NvbmRpdGlvbnMvJHtvSW5QYXJhbWV0ZXIubG9jYWxEYXRhUHJvcGVydHl9J31gKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRpZiAoYVBhcnRzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0c1BhdGhzID0gYVBhcnRzLmpvaW4oKTtcblx0XHRcdFx0cmV0dXJuIGB7cGFydHM6WyR7c1BhdGhzfV0sIGZvcm1hdHRlcjonc2FwLmZlLm1hY3Jvcy52aXN1YWxmaWx0ZXJzLlZpc3VhbEZpbHRlclJ1bnRpbWUuZ2V0RmlsdGVyc0Zyb21Db25kaXRpb25zJ31gO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0XHR9XG5cdH0sXG5cblx0Z2V0ZmlsdGVyQ291bnRCaW5kaW5nOiBmdW5jdGlvbiAob0NoYXJ0QW5ub3RhdGlvbjogYW55KSB7XG5cdFx0Y29uc3Qgc0RpbWVuc2lvbiA9IG9DaGFydEFubm90YXRpb24uRGltZW5zaW9uc1swXT8uJHRhcmdldD8ubmFtZTtcblx0XHRyZXR1cm4gKFxuXHRcdFx0XCJ7cGF0aDonJGZpbHRlcnM+L2NvbmRpdGlvbnMvXCIgKyBzRGltZW5zaW9uICsgXCInLCBmb3JtYXR0ZXI6J3NhcC5mZS5tYWNyb3MudmlzdWFsZmlsdGVycy5WaXN1YWxGaWx0ZXJSdW50aW1lLmdldEZpbHRlckNvdW50cyd9XCJcblx0XHQpO1xuXHR9XG59O1xuKEludGVyYWN0aXZlQ2hhcnRIZWxwZXIuZ2V0Q29sb3JCaW5kaW5nIGFzIGFueSkucmVxdWlyZXNJQ29udGV4dCA9IHRydWU7XG4oSW50ZXJhY3RpdmVDaGFydEhlbHBlci5nZXRBZ2dyZWdhdGlvbkJpbmRpbmcgYXMgYW55KS5yZXF1aXJlc0lDb250ZXh0ID0gdHJ1ZTtcbihJbnRlcmFjdGl2ZUNoYXJ0SGVscGVyLmdldFVvTSBhcyBhbnkpLnJlcXVpcmVzSUNvbnRleHQgPSB0cnVlO1xuKEludGVyYWN0aXZlQ2hhcnRIZWxwZXIuZ2V0U2NhbGVVb01UaXRsZSBhcyBhbnkpLnJlcXVpcmVzSUNvbnRleHQgPSB0cnVlO1xuKEludGVyYWN0aXZlQ2hhcnRIZWxwZXIuZ2V0VG9vbFRpcCBhcyBhbnkpLnJlcXVpcmVzSUNvbnRleHQgPSB0cnVlO1xuKEludGVyYWN0aXZlQ2hhcnRIZWxwZXIuZ2V0TWVhc3VyZURpbWVuc2lvblRpdGxlIGFzIGFueSkucmVxdWlyZXNJQ29udGV4dCA9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