/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/Utils","sap/ui/fl/write/_internal/Storage","sap/ui/fl/write/_internal/Versions","sap/ui/model/json/JSONModel"],function(e,r,t,n,o){"use strict";var a={};function i(t){var n=e.getFlexReferenceForControl(t);if(!n){throw Error("The application ID could not be determined")}return r.normalizeReference(n)}function l(e,r,t){if(e.status===r){n.onAllChangesSaved({reference:t.reference,layer:t.layer,contextBasedAdaptation:true})}return e}a.create=function(e){if(!e.layer){return Promise.reject("No layer was provided")}if(!e.control){return Promise.reject("No control was provided")}if(!e.contextBasedAdaptation){return Promise.reject("No contextBasedAdaptation was provided")}e.contextBasedAdaptation.id=r.createDefaultFileName();e.reference=i(e.control);return t.contextBasedAdaptation.create({layer:e.layer,flexObject:e.contextBasedAdaptation,reference:e.reference,parentVersion:n.getVersionsModel({layer:e.layer,reference:e.reference}).getProperty("/displayedVersion")}).then(function(r){return l(r,201,e)})};a.reorder=function(e){if(!e.layer){return Promise.reject("No layer was provided")}if(!e.control){return Promise.reject("No control was provided")}if(!e.parameters||!e.parameters.priorities){return Promise.reject("No valid priority list was provided")}e.reference=i(e.control);return t.contextBasedAdaptation.reorder({layer:e.layer,flexObjects:e.parameters,reference:e.reference,parentVersion:n.getVersionsModel({layer:e.layer,reference:e.reference}).getProperty("/displayedVersion")}).then(function(r){return l(r,204,e)})};a.load=function(e){if(!e.layer){return Promise.reject("No layer was provided")}if(!e.control){return Promise.reject("No control was provided")}e.reference=i(e.control);return t.contextBasedAdaptation.load({layer:e.layer,flexObject:e.parameters,reference:e.reference,version:n.getVersionsModel({layer:e.layer,reference:e.reference}).getProperty("/displayedVersion")}).then(function(e){if(!e){e={adaptations:[]}}return new o(e)})};return a});
//# sourceMappingURL=ContextBasedAdaptationsAPI.js.map