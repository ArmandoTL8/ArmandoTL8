{"version":3,"file":"DraftController.js","names":["sap","ui","define","jQuery","BaseController","DraftContext","Log","Context","ActionUtil","DraftController","extend","metadata","publicMethods","constructor","oModel","oQueue","apply","this","sName","_oContext","prototype","getDraftContext","_oModel","createDraft","sEntitySet","sPath","mParameters","that","Error","Promise","resolve","reject","fnSuccess","oData","oResponse","responseData","httpResponse","createdContext","fnError","oError","deleteCreatedEntry","createEntry","properties","predefinedValues","success","error","batchGroupId","changeSetId","canonicalRequest","expand","validateDraft","oContext","getModel","getObject","getPath","IsActiveEntity","oImport","getODataDraftFunctionImportName","_callAction","prepareDraft","urlParameters","activateDraft","oPrepareParameters","oActivateParameters","pPrepare","pActivate","all","editDraft","sImportName","discardDraft","mParam","sFunctionImport","_remove","getDraftForActive","$expand","_read","then","hasOwnProperty","context","getContext","getKey","SiblingEntity","getDraftForActiveEntity","oPromise","oPromise2","noShowSuccessToast","forceSubmit","_normalizeError","triggerSubmitChanges","_returnPromiseAll","createNewDraftEntity","vPredefinedValues","bCanonicalRequest","oParameters","fnSetBusy","Function","sId4BatchGroupAndChangeSet","mParameters1","sRootExpand","oFunctionImport","_oMeta","getODataFunctionImport","oPromise0","bUseNewActionForCreate","oLibraryResourceBundle","getCore","getLibraryResourceBundle","sFunctionImportDialogTitleText","String","oFunctionImportDialogInfo","getTitleText","getText","sFunctionImportDialogActionButtonText","getActionButtonText","oSkipProperties","ResultIsActiveEntity","bIsDraft","isDraftEnabled","oActionProcessor","controller","oController","contexts","applicationController","oApplicationController","operationGrouping","undefined","mAdditionalParamData","call","executionPromise","oPromise1","aResponse","Array","isArray","_normalizeResponse","response","oResponseOut","fnPromise1Callback","bIsActiveEntity","bHasDraftEntity","oResponseEntity","_oDraftUtil","isActiveEntity","hasDraftEntity","mParameters2","failedMsg","createEditDraftEntity","bPreserveChanges","successMsg","PreserveChanges","validateDraftEntity","saveAndPrepareDraftEntity","binding","refresh","prepareDraftEntity","activateDraftEntity","bIsLenient","sExpand","oActivateDraftPromise","oTriggerSubmitPromise","sHandling","headers","Prefer","sETag","getETag","oActivationPromise","fnResolve","fnReject","fnCallerFunc","detachOnQueueCompleted","aResponses","_oQueue","_aQueue","length","attachOnQueueCompleted","hasDraft","hasActiveEntity","destroy"],"sources":["DraftController-dbg.js"],"mappings":"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"}