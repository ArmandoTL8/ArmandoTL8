{"version":3,"file":"Viewport.js","names":["sap","ui","define","vkCore","ViewportBase","ResizeHandler","KeyCodes","Loco","ViewStateManagerVK","ViewStateManagerSVG","ViewportHandler","VisibilityMode","ZoomTo","SelectionMode","NodeContentType","getResourceBundle","Messages","Scene","OrthographicCamera","MeasurementSurface","Rectangle","HotspotHelper","colorToCSSColor","cssColorToColor","colorToABGR","abgrToColor","Log","core","Viewport","extend","metadata","library","events","cameraChanged","parameters","offset","zoom","enableEventBubbling","hotspotEnter","nodeRef","hotspotLeave","basePrototype","getMetadata","getParent","getClass","prototype","init","call","this","_measurementSurface","_resizeListenerId","_animLoopRequestId","_animLoopFunction","_animLoop","bind","_width","_height","_camera","_gestureX","_gestureY","_scene","_selectionRect","material","lineColor","lineStyle","dashPattern","_styles","Map","raster","rasterImage","Image","vectorImage","bmpCanvas","rasterMode","useRasterMode","delayEnd","timer","nodesThreshold","onload","ctx","getContext","clearRect","width","height","drawImage","src","toDataURL","_viewportHandler","_loco","addHandler","_hotspotHelper","_currentViewIndex","_currentView","getEventBus","subscribe","_onViewStateApplied","attachLocalizationChanged","_onLocalizationChanged","exit","detachLocalizationChanged","unsubscribe","destroy","removeHandler","deregister","setScene","_renderer","tools","getTools","i","length","tool","byId","setActive","event","surface","getMeasurements","update","getCamera","onBeforeRendering","onAfterRendering","register","_handleResize","domRef","getDomRef","append","root","getRootElement","_setDomRef","document","getElementById","uid","_svgElement","parentNode","size","clientWidth","clientHeight","oldWidth","oldHeight","_initialPosition","zoomTo","All","_updateViewBox","fireCameraChanged","viewBox","_getViewBox","measurementSurfaceDomRef","style","fireResize","previousSibling","_updateRasterImage","scene","getDefaultNodeHierarchy","detachNodeCreated","_nodeCreatedHandler","clear","setCamera","nh","findNodesByName","attachNodeCreated","initialView","getInitialView","activateView","_onContentLoadingFinished","camera","createdNode","getParameter","_vkGetNodeContentType","Annotation","children","type","invalidate","getScene","onSetViewStateManager","viewStateManager","_viewStateManager","attachOutliningChanged","_onOutliningOrSelectionChanged","attachSelectionChanged","onUnsetViewStateManager","detachOutliningChanged","detachSelectionChanged","_getViewStateManagerSVG","_implementation","hitTest","x","y","withTolerance","exactHitObject","ignoreHotspots","vsm","rootElement","viewportRect","getBoundingClientRect","htmlElement","htmlElements","elementsFromPoint","hit","id","elem","_getSceneTreeElement","Hotspot","elementFromPoint","toleranceX","toleranceY","y2","x2","tap","isDoubleClick","node","tapObject","fireNodeClicked","getFreezeCamera","zoomedObject","Node","Visible","picked","fireNodesPicked","getSelectionMode","Exclusive","exclusiveSelectionHandler","Sticky","stickySelectionHandler","offscreenPosition","rotateDelta","panDelta","onkeydown","isMarked","keyCode","ARROW_LEFT","ARROW_RIGHT","ARROW_UP","ARROW_DOWN","ctrlKey","altKey","metaKey","delta","beginGesture","shiftKey","pan","rotate","endGesture","preventDefault","stopPropagation","PLUS","NUMPAD_MINUS","NUMPAD_PLUS","D","_dumpSceneData","gizmo","getGizmoForContainer","handleSelectionChanged","setSelectionRect","rect","removeAttribute","_transformRect","setAttribute","x1","y1","_select","selection","Set","_findRectElementsRecursive","_mask","Array","from","getImage","topColor","bottomColor","includeSelection","_setContent","content","apply","arguments","setScale","onSetContentConnector","contentConnector","attachContentLoadingFinished","onUnsetContentConnector","detachContentLoadingFinished","nodeHierarchy","vsmMask","color","getShowAllHotspots","getShowAllHotspotsTintColor","hotspotNodes","getHotspotNodeIds","forEach","hotspotNode","updateHotspot","undefined","setHotspotColor","getDisableHotspotHovering","addClass","_initialZoom","getZoomFactor","getPosition","lerp","a","b","f","smootherStep","edge0","edge1","Math","min","max","anim","_anim","start","end","timeNow","Date","now","time","duration","oldOffsetX","offsetX","oldOffsetY","offsetY","oldZoom","_redlineHandler","window","requestAnimationFrame","_endRasterMode","getCurrentView","channel","eventId","source","view","viewGroups","getViewGroups","that","viewGroup","getViews","modelView","indexOf","fireViewActivated","viewIndex","publish","getTopColor","isArray","setBackgroundColorTop","red","floor","green","blue","alpha","getBottomColor","setBackgroundColorBottom","ignoreAnimationPosition","rerender","fireViewFinished","resetCurrentView","_resetNodesStatusByCurrentView","what","crossFadeSeconds","margin","boundingBox","Infinity","_expandBoundingBoxRecursive","Selected","enumerateSelection","Restore","error","getText","NodeSetIsolation","RestoreRemoveIsolation","ViewLeft","ViewRight","ViewTop","ViewBottom","ViewBack","ViewFront","newCamera","_zoomTo","_activateCamera","flyToDuration","_startRasterMode","devicePixelRatio","Device","browser","firefox","svgContent","XMLSerializer","serializeToString","data","encodeURIComponent","clearTimeout","display","clearRasterMode","setTimeout","dx","dy","z","_MIN_ZOOM","hover","_hotspotElement","fireHotspotLeave","getHotspotColorABGR","fireHotspotEnter","_bmpDraw","oldPos","_worldToScreen","newPos","translate","scale","join","getViewInfo","query","viewInfo","visibility","visibilityMode","mode","Complete","allVisibility","getVisibilityComplete","visible","hidden","getShouldTrackVisibilityChanges","changes","getVisibilityChanges","warning","VIT32","summary","code","_getSelectionComplete","setViewInfo","_setViewBox","veIdToNodeRefMap","getNodeHierarchy","allNodeRefs","nodeProxy","createNodeProxy","veId","getVeId","destroyNodeProxy","set","visibleVeIds","hiddenVeIds","setVisibilityState","get","Differences","resetVisibility","getVisibilityState","VIT28","info","selected","unselected","push","setSelectionStates","queueCommand","command","getOutputSize","boundingClientRect","viewportWidth","viewportHeight","relevantDimension","left","top","sideLength","setShouldRenderFrame","_isPanoramicActivated","setShowAllHotspots","value","setProperty","nodes","hotspotElement","setDisableHotspotHovering","removeClass","setHotspotColorABGR","showHotspots","nodeRefs","show","hotspotColor","setCustomHotspotColor","_getFillStyleId","element","highlightColor","tintColor","fillStyle","veid","fill","has","attributes","_setFillStyleAttributes","name","_getLineStyleId","materialId","_setLineStyleAttributes","getMeasurementSurface","getShowAllHotspotsTintColorDef","rgbaToCSS","r","g","hex","toString","padStart","level","getLevel","setLevel","Level","INFO","count","treeDepth","leafNodes","emptyLeafNodes","e","getElementsByTagName","n","parent","t","tagName","projectToScreen","screenPos"],"sources":["Viewport-dbg.js"],"mappings":"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"}