{"version":3,"file":"CrossSectionToolGizmo.js","names":["sap","ui","define","getResourceBundle","threejs","Gizmo","AxisColours","ThreeUtils","assert","CrossSectionToolGizmo","extend","metadata","library","prototype","init","apply","this","_createEditingForm","getText","_handleIndex","_viewport","_tool","_position","THREE","Vector3","_plane","Plane","_flip","_matViewProj","Matrix4","_gizmoSize","_firstShowPress","setAxis","hasDomElement","show","viewport","tool","bbox","_scene","_computeBoundingBox","Box3","getCenter","constant","normal","dot","setClippingPlanes","hide","_updateEditingForm","_getOffset","getComponent","_axis","getAxis","i","dir","setComponent","set","geometry","BufferGeometry","vertices","Array","dirX","y","z","x","dirY","p","sub","multiplyScalar","toArray","add","setAttribute","Float32BufferAttribute","_gizmoPlane","Line","LineBasicMaterial","color","transparent","linewidth","window","devicePixelRatio","arrowLength","lineRadius","coneHeight","coneRadius","touchRadius","clone","lineGeometry","CylinderGeometry","m","makeBasis","setPosition","applyMatrix4","_gizmoArrow","Mesh","MeshBasicMaterial","userData","coneGeometry","cone","matrixAutoUpdate","touchGeometry","_touchMesh","visible","side","DoubleSide","setShouldRenderFrame","setFlip","flip","handleIndex","getTouchObject","size","_getDelta","getSize","Math","max","_setOffset","offset","MathUtils","clamp","min","getValue","setValue","value","highlightArrowHandle","highlight","material","setHex","children","selectHandle","index","_adjustBoundingBox","boundingBox","delta","expandByScalar","_updateGizmo","position","scale","updateMatrixWorld","camera","getCamera","getCameraRef","copy","multiplyMatrices","projectionMatrix","matrixWorldInverse","setScalar","_getGizmoScale","expandBoundingBox","sceneBoundingBox","expandByPoint","multiply","_getEditingFormPosition","matrixWorld","render","getMetadata","getName","renderer","getRenderer","clearDepth","_gizmo","exit","disposeObject","call"],"sources":["CrossSectionToolGizmo-dbg.js"],"mappings":"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"}