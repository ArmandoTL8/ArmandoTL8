{"version":3,"file":"Gizmo.js","names":["sap","ui","define","vkLibrary","mLibrary","Input","Label","coreLibrary","Control","CoordinateSystem","AxisColours","ToolNodeSet","three","GizmoPlacementMode","AnimationTrackType","InputType","Gizmo","extend","metadata","library","renderer","render","rm","control","prototype","hasDomElement","_drawText","canvas","text","fontSize","drawBorder","pixelRatio","window","devicePixelRatio","w","width","h","height","halfWidth","halfHeight","ctx","getContext","clearRect","font","textAlign","textBaseline","fillStyle","globalAlpha","filter","fillText","beginPath","arc","Math","PI","closePath","lineWidth","strokeStyle","stroke","_createTextMesh","color","document","createElement","this","texture","THREE","Texture","needsUpdate","material","MeshBasicMaterial","map","transparent","alphaTest","premultipliedAlpha","side","DoubleSide","mesh","Mesh","PlaneGeometry","userData","_createAxisTitles","size","drawCircle","addNegativeAxes","group","Group","add","x","y","z","_extractBasis","matrix","basis","Vector3","extractBasis","normalize","_updateAxisTitles","obj","gizmo","camera","distance","scale","matrixWorld","children","forEach","child","i","offset","constructor","getComponent","position","copy","multiplyScalar","quaternion","setScalar","_updateSelection","viewStateManager","nodes","_tool","getNodeSet","Highlight","enumerateSelection","nodeRef","push","node","enumerateOutlinedNodes","_nodes","length","every","v","_cleanTempData","nodeInfo","ignore","parent","l","_getOffsetForRestTransformation","bind","setPlacementMode","placementMode","_placementMode","_getAnchorPoint","_viewport","_anchorPoint","_getSelectionCenter","target","setFromMatrixPosition","_nodeUserDataMap","get","Rest","offsetWTranslation","center","boundingBox","getCenter","applyMatrix4","_getGizmoScale","getRenderer","getCamera","getCameraRef","pos4","Vector4","_matViewProj","getSize","Vector2","projectionMatrix","elements","_getEffectiveParent","_viewStateManager","joints","getJoints","n","joint","skipUpdateJointNode","clear","_sequence","_prepareForCreatingKey","playback","_playback","Map","set","trans","getTransformation","restTrans","getRestTransformation","wrestTrans","getRestTransformationWorld","wtrans","getTransformationWorld","pos","translation","sc","quatRest","Quaternion","matRest","Matrix4","compose","matRestInv","invert","initialTranslation","slice","initialScale","initialQuaternion","matInitial","clone","matInitialInv","quatInitialDiff","multiply","quatInitialDiffInv","matInitialDiff","Box3","expandByObject","offsetWTranslationCenter","euler","animationPlayer","getAnimationPlayer","data","getAnimatedProperty","Rotate","offsetToPrevious","Euler","startEuler","eulerInParentCoors","startEulerInParentCoors","_updateGizmoObjectTransformation","moveToCenter","anchorPoint","nodeWorldMatrix","parentWorldMatrix","_coordinateSystem","Custom","Local","Parent","effParent","decompose","setPosition","Screen","_gizmoSize","makeBasis","copyPosition","matrixAutoUpdate","updateMatrixWorld","_expandBoundingBox","visibleOnly","gizmoCount","getGizmoCount","multiplyMatrices","matrixWorldInverse","_updateGizmoTransformation","_sceneGizmo","_createEditingForm","units","_label","m","addStyleClass","_units","_input","type","Number","maxLength","TextAlign","Right","change","event","setValue","getParameter","_editingForm","HBox","items","onkeydown","ontap","ontouchstart","setMarked","_getValueLocaleOptions","useGrouping","_updateEditingForm","active","axisIndex","label","domRef","getDomRef","getShowEditingUI","setText","rerender","labelDomRef","style","Color","getStyle","getValue","toLocaleString","_getEditingFormPosition","gizmoPosition","_gizmo","sub","viewportRect","getBoundingClientRect","formRect","alignRight","dx","dy","MathUtils","clamp","max","min","left","round","top","transform","display"],"sources":["Gizmo-dbg.js"],"mappings":"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"}