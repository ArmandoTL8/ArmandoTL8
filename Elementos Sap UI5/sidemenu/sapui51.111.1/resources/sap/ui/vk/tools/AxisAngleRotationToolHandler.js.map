{"version":3,"file":"AxisAngleRotationToolHandler.js","names":["sap","ui","define","EventProvider","Menu","MenuItem","getResourceBundle","threejs","CoordinateSystem","AxisAngleRotationToolHandler","extend","metadata","library","constructor","tool","this","_priority","_tool","_gizmo","getGizmo","_rect","_rayCaster","THREE","Raycaster","linePrecision","_handleIndex","_gizmoIndex","_matrixOrigin","Matrix4","_mouse","Vector2","_mouseOrigin","prototype","_updateMouse","event","size","getViewport","getRenderer","getSize","x","width","y","height","setFromCamera","getCamera","getCameraRef","_updateHandles","hoverMode","prevHandleIndex","n","type","i","l","getGizmoCount","touchObj","getTouchObject","intersects","intersectObject","length","children","indexOf","object","copy","matrixWorld","_objectSize","_getObjectSize","_getGizmoScale","position","highlightHandle","setShouldRenderFrame","hover","_inside","_gesture","handled","click","selectHandle","_getMouseAngle","ray","delta","_rotationPoint","clone","sub","origin","dist","_rotationAxis","dot","direction","mouseDirection","multiplyScalar","normalize","Math","atan2","_axis2","_axis1","beginGesture","Vector3","setFromMatrixColumn","crossVectors","setFromMatrixPosition","abs","cos","PI","matCamera","_startAngle","MathUtils","degToRad","getValue","_prevAngle","_deltaAngle","move","mouseAngle","moveDelta","angle1","angle2","getEnableStepping","step","steps","sizes","round","getEnableSnapping","getDetector","detect","viewport","_viewport","gizmo","detectType","handleIndex","isFinite","_setRotationAxisAngle","endGesture","contextMenu","getAllowContextMenu","_getOffset","obj","rectangle","getBoundingClientRect","p","left","window","pageXOffset","top","pageYOffset","id","getIdForLabel","domobj","document","getElementById","o","w","offsetWidth","h","offsetHeight"],"sources":["AxisAngleRotationToolHandler-dbg.js"],"mappings":"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"}