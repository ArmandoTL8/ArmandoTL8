{"version":3,"file":"RectSelectTool.js","names":["sap","ui","define","Tool","RectSelectToolHandler","SelectionDisplayMode","Loco","RectSelectTool","extend","metadata","library","properties","subtractMode","type","defaultValue","constructor","sId","mSettings","_instance","apply","this","arguments","_viewport","_handler","_loco","prototype","init","call","setFootprint","setActive","value","activeViewport","gizmoContainer","_prepare","activate","deactivate","isViewportType","_dvl","_scene","getSceneRef","queueCommand","command","cropProjection","matProj","cropRect","viewportSize","m","elements","isOrthographic","rightMinusLeft","topMinusBottom","rightPlusLeft","topPlusBottom","right","left","top","bottom","cropLeft","THREE","MathUtils","lerp","Math","min","x1","x2","width","cropRight","max","cropTop","y1","y2","height","cropBottom","select","scene","camera","_select","viewport","nodes","viewportClassName","getMetadata","getName","length","fireNodesPicked","picked","getSelectionDisplayMode","Outline","getSubtractMode","_viewStateManager","setOutliningStates","setSelectionStates","rectSelect","parametersdvl","sceneRef","undefined","cameraRef","getCameraRef","vsm","_getViewStateManagerThreeJS","rect","projectionMatrix","clone","_renderer","getSize","Vector2","matViewProj","Matrix4","multiplyMatrices","matrixWorldInverse","frustum","Frustum","setFromProjectionMatrix","v1","Vector3","checkNodeGeometry","node","geometry","intersectsObject","i","l","isGeometry","vertices","copy","applyMatrix4","matrixWorld","containsPoint","isBufferGeometry","attribute","attributes","position","count","fromBufferAttribute","traverseVisibleNode","parentData","parentClosed","visible","userData","selectable","data","skipIt","totalCount","passedCount","children","closed","push","parameters"],"sources":["RectSelectTool-dbg.js"],"mappings":"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"}