{"version":3,"file":"MoveToolGizmo.js","names":["sap","ui","define","getResourceBundle","threejs","BufferGeometryUtils","Gizmo","MoveToolGizmoRenderer","CoordinateSystem","GizmoPlacementMode","AxisColours","AnimationTrackType","assert","Log","MoveToolGizmo","extend","metadata","library","prototype","init","apply","this","_createEditingForm","getText","_gizmoIndex","_handleIndex","_value","THREE","Vector3","_moveDelta","_viewport","_tool","_sceneGizmo","Scene","light","DirectionalLight","position","set","add","AmbientLight","_gizmo","Group","_touchAreas","_coordinateSystem","World","_placementMode","Default","_nodes","_matViewProj","Matrix4","_gizmoSize","createGizmoArrow","dir","color","touchAreas","arrowLength","lineRadius","coneHeight","coneRadius","touchRadius","multiplyScalar","material","MeshLambertMaterial","transparent","lineGeometry","CylinderGeometry","m","makeBasis","y","z","x","setPosition","clone","applyMatrix4","line","Mesh","matrixAutoUpdate","userData","coneGeometry","cone","touchGeometry","touchGeometry2","mergedGeometry","mergeBufferGeometries","createGizmoPlane","a","b","colors","Float32Array","geometry","BufferGeometry","vertices","setAttribute","Float32BufferAttribute","setIndex","MeshBasicMaterial","opacity","visible","side","DoubleSide","plane","lineVertices","Line","LineBasicMaterial","vertexColors","linewidth","window","devicePixelRatio","_axisTitles","_createAxisTitles","_line","LineSegments","frustumCulled","hasDomElement","resetValues","setScalar","setCoordinateSystem","coordinateSystem","screenSystem","Screen","gizmoObjects","children","touchObjects","show","viewport","tool","length","_updateSelection","_viewStateManager","nodesProperties","_getNodesProperties","fireEvent","hide","_cleanTempData","_updateEditingForm","getGizmoCount","Local","Parent","getTouchObject","i","_updateGizmoObjectTransformation","arrowHighlighting","highlightHandle","index","hoverMode","arrow","highlight","setHex","axisTitle","colorAttr","attributes","copyArray","needsUpdate","selectHandle","gizmoIndex","getAutoResetValues","setShouldRenderFrame","beginGesture","_beginValue","_matOrigin","matrixWorld","forEach","nodeInfo","node","matOrigin","originLocal","origin","setFromMatrixPosition","parent","matParentInv","copy","invert","_printEventInfo","event","debug","properties","name","offsetToRest","offsetToPrevious","absolute","world","restDifference","restDifferenceInCoordinates","_getOffsetToRestInCoordinateSystem","offsetInWorld","toArray","Custom","gmat","extractRotation","gmatInv","nmat","nmatInv","size","getRenderer","getSize","Vector2","camera","getCamera","getCameraRef","Vector4","mat","Matrix3","setFromMatrix4","matInv","offsetInCamera","applyMatrix3","dx","w","projectionMatrix","elements","width","dy","height","property","_getEffectiveParent","pMat","rtransform","getRelativeTransformation","offsetToRestInParent","translation","slice","offsetToPreviousInParent","sequenceOffset","_playback","_getEndPropertyInPreviousPlayback","Translate","restTrans","getRestTransformation","previous","quat","Quaternion","scale","matrix","decompose","MatPreviousTInv","makeTranslation","MatRestTInv","MatSInv","makeScale","MatRInv","makeRotationFromQuaternion","MatTOffsetToPrevious","multiply","MatTOffsetToRest","skipUpdateJointNode","_setJointNodeOffsets","offsetTranslation","_setJointNodeMatrix","joint","getRestTransformationUsingJoint","pos","sc","qu","quaternion","offsetScale","offsetQuaternion","offsetQuat","matRot","matTrans","matRest","matT","transform","getTransformation","wtrans","getTransformationWorld","_nodeUserDataMap","get","initialTranslation","restDifferenceInWorld","push","bind","endGesture","offsetInParam","fireMoved","_setOffset","offset","effParent","setFromMatrixScale","originPos","sub","pos1","pos2","Math","round","_move","setFromMatrixColumn","normalize","dot","anchorPoint","_getAnchorPoint","matInvAnchor","scaleAnchor","newPos","posAttribute","getAttribute","array","computeBoundingBox","abs","max","setRGB","addVectors","basis","_extractBasis","multiplyMatrices","matrixWorldNeedsUpdate","ignore","move","getValue","getComponent","setValue","value","setComponent","expandBoundingBox","boundingBox","_expandBoundingBox","viewStateManager","call","getEnableSnapping","getDetector","setSource","handleSelectionChanged","_getSelectionCenter","target","arguments","that","toScreenXYZ","vector","widthHalf","heightHalf","project","fromScreenXYZ","unproject","getScreenCenter","leftTop","rightTop","rightBottom","leftBottom","cornerPoints","OnScreen","viewportRect","getDomRef","getBoundingClientRect","posOnScreen","edgePos","checkOnScreen","setX","setY","some","c","ObjectCenter","center","getCenter","Box3","expandByObject","_updateGizmoTransformation","_updateAxisTitles","_getEditingFormPosition","direction","render","getMetadata","getName","renderer","matrixWorldInverse","clearDepth","l"],"sources":["MoveToolGizmo-dbg.js"],"mappings":"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"}