{"version":3,"file":"ScaleToolGizmo.js","names":["sap","ui","define","threejs","Gizmo","ScaleToolGizmoRenderer","CoordinateSystem","AxisColours","AnimationTrackType","assert","Log","ScaleToolGizmo","extend","metadata","library","prototype","init","apply","this","_createEditingForm","_gizmoIndex","_handleIndex","_value","THREE","Vector3","setScalar","_scaleDelta","_viewport","_tool","_nonUniformScaleEnabled","_sceneGizmo","Scene","light","DirectionalLight","position","set","add","AmbientLight","_gizmo","Group","_touchAreas","_coordinateSystem","World","_nodes","_matViewProj","Matrix4","_gizmoSize","arrowLength","boxSize","touchBoxSize","createGizmoBox","dir","color","touchAreas","m","makeBasis","y","z","x","boxGeometry","BoxGeometry","applyMatrix4","material","MeshLambertMaterial","transparent","box","Mesh","userData","copy","lineRadius","lineGeometry","CylinderGeometry","setPosition","clone","multiplyScalar","line","renderOrder","touchGeometry","createGizmoTriangle","a","b","BufferGeometry","vertices","Float32Array","setAttribute","Float32BufferAttribute","colors","Line","LineBasicMaterial","vertexColors","linewidth","window","devicePixelRatio","triangleGeometry","triVertices","setIndex","triangle","MeshBasicMaterial","opacity","side","DoubleSide","visible","boxMaterial","_axisTitles","_createAxisTitles","_updateGizmoPartVisibility","hasDomElement","screenSystem","Screen","gizmoObjects","children","touchObjects","resetValues","setCoordinateSystem","coordinateSystem","setNonUniformScaleEnabled","value","show","viewport","tool","length","_sequence","_updateSelection","_viewStateManager","nodesProperties","_getNodesProperties","fireEvent","hide","_cleanTempData","_updateEditingForm","getGizmoCount","Local","Parent","getTouchObject","i","_updateGizmoObjectTransformation","arrowHighlighting","highlightHandle","index","hoverMode","highlightAll","obj","highlight","setHex","axisTitle","colorAttr","geometry","attributes","copyArray","needsUpdate","selectHandle","gizmoIndex","getAutoResetValues","setShouldRenderFrame","beginGesture","_beginValue","_matOrigin","matrixWorld","forEach","nodeInfo","scaleOrigin","node","scale","matOrigin","parent","matParentInv","invert","_prepareForCreatingScaleKey","sequence","_printEventInfo","event","debug","properties","name","offsetToRest","offsetToPrevious","absolute","world","restDifference","restDifferenceInCoordinates","property","rtransform","getRelativeTransformation","slice","_getEffectiveParent","skipUpdateJointNode","_setJointNodeOffsets","Scale","offsetScale","_setJointNodeMatrix","_playback","sequenceOffset","_getEndPropertyInPreviousPlayback","transform","getTransformation","wtrans","getTransformationWorld","_nodeUserDataMap","get","gmat","sc","wmatScale","matScale","initialScale","quaternionVector","Quaternion","quaternion","rotMat","makeRotationFromQuaternion","initialRotMat","initialQuaternion","vx","vy","vz","extractBasis","rvx","rvy","rvz","dot","multiply","decompose","indices","_alignAxesBetweenGizmoAndNodeCoordinates","Math","abs","push","bind","endGesture","fireScaled","withNode","getClosestAligned","v","v1","v2","v3","d1","d2","d3","nodeMat","normalize","gizmoMat","gvx","gvy","gvz","_scale","changeSigns","scaleVector","appliedScalePositive","multiplyVectors","updateMatrix","ignore","multiplyMatrices","matrix","nmat","elements","smat","te","_setScale","getValue","getComponent","setValue","axisScale","setComponent","expandBoundingBox","boundingBox","_expandBoundingBox","getCamera","getCameraRef","viewStateManager","call","getEnableSnapping","getDetector","setSource","handleSelectionChanged","_getObjectScale","objectIndex","_getObjectSize","Box3","isEmpty","size","getSize","_updateGizmoTransformation","gi","camera","_updateAxisTitles","_getEditingFormPosition","direction","setFromMatrixColumn","render","getMetadata","getName","renderer","getRenderer","projectionMatrix","matrixWorldInverse","clearDepth","l"],"sources":["ScaleToolGizmo-dbg.js"],"mappings":"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"}