{"version":3,"file":"AnchorPointToolGizmo.js","names":["sap","ui","define","getResourceBundle","threejs","BufferGeometryUtils","Gizmo","AnchorPointToolGizmoRenderer","CoordinateSystem","AxisColours","AnchorPointToolOperation","assert","AnchorPointToolGizmo","extend","metadata","library","prototype","init","apply","this","_createEditingForm","_gizmoIndex","_handleIndex","_viewport","_tool","_sceneGizmo","THREE","Scene","light","DirectionalLight","position","set","add","AmbientLight","_touchAreas","Group","_gizmo","_matViewProj","Matrix4","_gizmoSize","_moveDelta","Vector3","_rotationDelta","createGizmoArrow","dir","color","touchAreas","arrowLength","lineRadius","coneHeight","coneRadius","touchRadius","multiplyScalar","lineGeometry","CylinderGeometry","m","makeBasis","y","z","x","setPosition","clone","applyMatrix4","material","MeshLambertMaterial","transparent","line","Mesh","matrixAutoUpdate","userData","coneGeometry","cone","touchGeometry","touchGeometry2","mergedGeometry","mergeBufferGeometries","createGizmoPlane","a","b","colors","Float32Array","geometry","BufferGeometry","vertices","setAttribute","Float32BufferAttribute","setIndex","MeshBasicMaterial","opacity","visible","side","DoubleSide","plane","lineVertices","Line","LineBasicMaterial","vertexColors","linewidth","window","devicePixelRatio","createGizmoArc","axis","radius","segments","TorusGeometry","Math","PI","rotateY","rotateX","arc","createTouchArc","i","arcMaterial","_arcMesh","_axisTitles","_createAxisTitles","_line","LineSegments","frustumCulled","hasDomElement","_updateHandlesVisibility","allowOperation","getAllowOperation","enableMovement","Rotate","enableRotation","Move","children","_initAnchorPoint","viewport","_anchorPoint","show","tool","hide","pos","copy","updateMatrixWorld","setQuaternion","quaternion","getGizmoCount","getTouchObject","scale","arrowHighlighting","highlightHandle","index","hoverMode","arrow","highlight","setHex","colorAttr","attributes","copyArray","needsUpdate","selectHandle","_units","setText","getText","String","fromCharCode","_editingForm","rerender","setShouldRenderFrame","beginGesture","_isMoved","_isRotated","_originPosition","setFromMatrixPosition","matrixWorld","_originQuaternion","endGesture","fireMoved","fireRotated","_setOffset","offset","gizmoIndex","fireEvent","_move","matInv","invert","setFromMatrixScale","newPos","sub","multiply","posAttribute","getAttribute","array","toArray","computeBoundingBox","abs","max","setRGB","move","_setRotationAxisAngle","axisIndex","angle1","angle2","deltaAngle","euler","Euler","fromArray","MathUtils","radToDeg","_rotate","i1","i2","n","ceil","setComponent","cos","sin","push","indices","geom","_deactivateScreenAlignment","quat","Quaternion","setFromEuler","rotate","degToRad","_getValueLocaleOptions","useGrouping","minimumFractionDigits","maximumFractionDigits","getValue","setFromMatrixColumn","normalize","dot","rotation","reorder","setValue","value","quat2","setFromQuaternion","expandBoundingBox","boundingBox","_expandBoundingBox","getCamera","getCameraRef","_updateGizmoTransformation","camera","multiplyMatrices","projectionMatrix","matrixWorldInverse","_getGizmoScale","setScalar","_updateAxisTitles","_getEditingFormPosition","direction","basis","_extractBasis","render","getMetadata","getName","renderer","getRenderer","clearDepth","_updateEditingForm"],"sources":["AnchorPointToolGizmo-dbg.js"],"mappings":"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"}