{"version":3,"file":"Scene.js","names":["sap","ui","define","Log","SceneBase","NodeHierarchy","RenderMode","BufferGeometryUtils","ThreeExtensions","ThreeUtils","uid","Scene","extend","metadata","library","constructor","scene","call","this","_id","_scene","_sceneBuilder","_defaultNodeHierarchy","_currentViewStateManager","_animationSequenceMap","Map","_initialView","_materialMap","_annotationMap","prototype","init","_outlineColor","THREE","Vector4","_outlineMaterial","ShaderMaterial","uniforms","color","value","vertexShader","join","fragmentShader","depthWrite","depthFunc","LessEqualDepth","polygonOffset","polygonOffsetFactor","blending","NormalBlending","clipping","_solidWhiteMaterial","MeshBasicMaterial","clearThreeScene","all3DNodes","allGroupNodes","getAllTHREENodes","disposedBufferGeometries","disposedMaterials","forEach","n3d","Mesh","has","geometry","uuid","disposeGeometry","set","material","disposeMaterial","userData","originalMaterial","parent","remove","gn","clear","destroy","setDoubleSided","setProperty","traverse","node","undefined","originalMaterialSide","FrontSide","materialUserData","side","DoubleSide","setViewStateManager","getViewStateManager","getId","getDefaultNodeHierarchy","_computeBoundingBox","visibleOnly","ignoreDynamicObjects","ignore2DObjects","boundingBox","Box3","_expandBoundingBox","getSceneRef","setSceneBuilder","sceneBuilder","getSceneBuilder","nodeRefToPersistentId","nodeRefs","Array","isArray","map","nodeRef","_vkPersistentId","persistentIdToNodeRef","pIDs","pID","getNode","setNodePersistentId","sid","sceneId","_addAnnotation","annotationId","annotationInfo","_hasAnnotation","_getAnnotations","_removeAnnotationsForNode","delete","annotation","id","setAnnotationPersistentId","get","enumerateMaterials","topNode","createNodeProxy","distEpsilon","compare","a","b","dx","x","dy","y","z","quickSort","array","beginIndex","endIndex","partitionIndex","partition","pivotValue","i","swap","j","temp","OutlineGeometry","thresholdAngle","_this","BufferGeometry","Object","setPrototypeOf","type","positionAttribute","isBufferGeometry","getAttribute","index","computeBoundingBox","size","Vector3","getSize","Math","max","vertexCount","count","indices","indexCount","length","ei","fi","vertices","fromArray","itemSize","uniqueVertices","changes","push","newIndices","c","edges","key","v","dir1","dir2","faceNormals","copy","sub","crossVectors","normalize","edge1","edge2","min","index1","index2","face1","face2","thresholdDot","cos","MathUtils","DEG2RAD","positions","normals1","normals2","e","dot","cross","vertex","normal1","normal2","setAttribute","Float32BufferAttribute","create","box3IsNull","box","validateGeometry","clone","l","setIndex","createMergedGeometry","isMesh","skipIt","nodeGeometry","children","child","childGeometry","updateMatrix","applyMatrix4","matrix","mergeBufferGeometries","setMeshMaterial","newMaterial","defaultMaterial","_vkUpdateMaterialColor","_vkUpdateMaterialOpacity","restoreMeshMaterial","_createOutlineGeometry","renderMode","_vkTraverseMeshNodes","isOutline","visible","hasOutline","mergedGeometry","outlineGeometry","line","LineSegments","renderOrder","matrixWorldNeedsUpdate","add","err","error","name","isLineBasicMaterial","isLineMaterial","LineIllustration","ShadedIllustration","emissive","multiplyScalar","addScalar","bind","_hideOutlineGeometry","getInitialView","setInitialView","view","getMaterial","materialId","setMaterial","clearMaterials","_getNativeMaterial","getMaterialRef","_setNodeMaterial","_setSubmeshMaterial","initialMaterialId","initialMaterial"],"sources":["Scene-dbg.js"],"mappings":"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"}