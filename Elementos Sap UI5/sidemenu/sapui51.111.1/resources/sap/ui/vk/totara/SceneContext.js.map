{"version":3,"file":"SceneContext.js","names":["sap","ui","define","Log","CallbackHandler","TotaraUtils","GeometryFactory","ProgressCounter","RequestQueue","getResourceBundle","AnimationRotateType","SceneContext","sceneId","params","loader","this","root","onActiveCameraCallbacks","onInitialSceneFinishedCallbacks","onPartialRetrievalFinishedCallbacks","onSceneCompletedCallbacks","onSetPlaybackCallbacks","onViewFinishedCallbacks","onViewGroupFinishedCallbacks","onContentChangesProgressCallbacks","onInitialViewCompletedCallbacks","Object","assign","sceneBuilder","requestQueue","phase","Phase","Started","retrievalType","RetrievalType","Initial","rootNodeId","meshNodes","Map","parametricNodeMap","annotationNodeMap","leaderLineMaterialIdMap","imageNoteMaterialIdMap","thumbnailViewMap","viewThumbnailMap","viewAnimatedThumbnailMap","progressCount","treeNodes","viewIdTreeNodesMap","viewIdBoxMap","nodeSidsForPartialTree","Set","replacedNodes","updatedNodes","currentViewId","initialViewId","initialViewDecided","initialViewFired","eventObject","percentage","loadingGeometry","FinishedHierarchy","FinishedMesh","FinishedGeometry","Partial","ProgressPhase","FinishedTree","getText","FinishedMeshes","FinishedMaterials","FinishedGeomMeshes","LoadingGeomMeshes","FinishedTextures","prototype","setOnProgressChanged","callback","isLoadingFinished","isEmpty","isWaitingForContent","size","isSceneCompleted","meshes","isWaiting","annotations","materials","parametric","geomMeshes","geometries","textures","isInitialViewCompleted","texturesDone","meshesDone","geomMeshesDone","info","_checkSceneCompletion","execute","mark","logPerformance","_fireProgress","globalList","dispose","suppressedBoundingBoxListMap","name","progressLogger","token","setCameraSingle","cameraInfo","createCamera","getCamera","id","getPartialTreeNodes","partialTreeRoots","partialTreeNodes","i","j","treeNode","length","children","entityId","childNode","visualisable","visible","childIndex","parentNode","renderOrder","parent","push","has","sid","clear","node","getNode","buildTree","isInitial","result","error","retryList","parentSid","buildNode","updateViewsForReplacedNodes","mesh","total","tNode","parentId","recursively","reportError","existingTreeNode","remove","suppressed","createNode","parametricId","meshId","preferMeshes","get","set","hasMesh","pushElementIntoMapArray","getSkipLowLODRendering","annotationId","hasAnnotation","_requestAnnotationForNode","newTreeNode","setTree","jsonContent","rootGroup","userData","skipIt","setRootNode","vkScene","camera","measure","setTreeNode","Array","isArray","nodes","concat","suppressSendRequests","setSuppressSendRequests","unsuppressSendRequests","sendRequest","notifyFinishedTree","command","initialView","setViewGroup","insertViewGroup","views","viewGroupId","view","currentViewGroupId","existingView","getView","ti","param","thumbnailId","undefined","toString","hasImage","setViewThumbnail","onViewGroupUpdatedCallbacks","thumbnails","imageId","viewId","viewInfo","animatedThumbnailId","finalizeViewGroups","sequences","setView","box","cameraId","delete","insertView","viewNodes","setViewCamera","setViewNode","binaryContent","context","notifyFinishedView","pop","activeCameraId","setCamera","viewResult","buildView","setViewNodeInfos","nodeInfos","from","processNodeRecursively","parentVisible","annotationType","materialId","_checkIfNeededAndOrderMaterial","target","opacity","transform","arrayToColumnMajorMatrixArray16","existingChildrenSids","getChildNodeIds","incomingChildrenSids","map","index","currentSid","childSid","childVisibility","highlightStyleId","recordHighlightedNodeInView","highlightStyleExists","highlights","setAnnotationSingle","singleAnnotation","nodeIds","createAnnotation","nodeId","annotation","JSON","parse","stringify","detailView","cutaway","createDetailView","labelMaterialId","label","checkMaterialExists","createImageNote","onAnnotationFinishedCallbacks","leaderLines","l","leaderLine","insertLeaderLine","bind","cameras","forEach","setMeshSingle","submesh","viewBoundingBox","submeshes","insertSubmesh","count","bbox","Infinity","lods","li","boundingBox","Math","min","max","x","y","z","totalScale","matrixWorld","getMaxScaleOnAxis","geometrySize","geometry","setMesh","binaryData","dataView","DataView","buffer","byteOffset","byteLength","bufferCount","getUint16","offset","geomInfo","getUint32","getFloat32","geometryType","flags","quality","pointCount","elementCount","bufferLength","subarray","setGeometry","setMaterialSingle","material","texturesToLoad","createMaterial","imageNotes","onMaterialFinishedCallbacks","setMaterial","m","geometryId","data","base64ToUint8Array","geometryInfo","getGeometryInfo","onSetGeometryCallbacks","setImage","createImage","onImageFinishedCallbacks","tileWidth","setAnnotation","setHighlightStyle","insertHighlightStyle","setLineStyle","lineStyles","lineStyle","insertLineStyle","setFillStyle","fillStyles","fillStyle","insertFillStyle","setTextStyle","textStyles","textStyle","insertTextStyle","temporaryMaterialNeeded","parametricContent","materialNeeded","setParametric","parametrics","shapes","k","materialID","setParametricContent","setPlayback","playbacks","onlyLoadingPlaybacks","playback","playbackIds","notLoading","sortPlaybacks","resetPlaybacksStartTimes","joints","insertJoints","sequence","sequenceId","setSequence","insertPlayback","existingSequence","getSequence","hasAnimation","finalizeAnimation","finalizePlaybacks","setSequenceSingle","tracks","obj","key","hasOwnProperty","nj","seqNode","rotate","rrotate","rotateNode","trackId","track","binding","pivot","isAbsoluteValue","empty","translate","rtranslate","translateNode","scale","rscale","scaleNode","ropacity","opacityNode","insertSequence","setTrack","onSetSequenceCallbacks","times","time","vector3","values","quaternion","rotateType","Quaternion","angleAxis","AngleAxis","euler","Euler","scalar","cyclicInfo","cyclicStart","cyclicEnd","insertTracks","onSetTrackCallbacks","notifyError","includes"],"sources":["SceneContext-dbg.js"],"mappings":"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"}