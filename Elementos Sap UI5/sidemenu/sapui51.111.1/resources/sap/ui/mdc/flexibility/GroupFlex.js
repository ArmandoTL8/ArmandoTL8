/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/m/p13n/Engine","sap/ui/mdc/flexibility/Util","sap/ui/fl/changeHandler/Base"],function(e,n,r){"use strict";var t=function(n){var r=n&&n.isA&&n.isA("sap.ui.mdc.Table")&&n.isTableBound();var t=n&&n.isA&&n.isA("sap.ui.mdc.Chart");if(r||t){if(!n._bWaitForBindChanges){n._bWaitForBindChanges=true;e.getInstance().waitForChanges(n).then(function(){if(r){n.rebind()}else if(t){n.rebind()}delete n._bWaitForBindChanges})}}};var i=function(e,n,r,i){if(i){e.resetRevertData()}else{e.setRevertData(r)}t(n)};var a=function(e,r,t,a){return new Promise(function(o,s){var u=a===n.REVERT;var v=t.modifier;var p=u?e.getRevertData():e.getContent();Promise.resolve().then(v.getProperty.bind(v,r,"groupConditions")).then(function(n){var t=n?n.groupLevels:[];var a={name:p.name};t.splice(p.index,0,a);n={groupLevels:t};v.setProperty(r,"groupConditions",n);i(e,r,a,u);o()}).catch(function(e){s(e)})})};var o=function(e,t,a,o){return new Promise(function(s,u){var v=o===n.REVERT;var p=a.modifier;var c=v?e.getRevertData():e.getContent();Promise.resolve().then(p.getProperty.bind(p,t,"groupConditions")).then(function(n){var a=n?n.groupLevels:[];if(!a){u()}var o=a.filter(function(e){return e.name===c.name});var d=a.indexOf(o[0]);if(d>-1){a.splice(d,1)}else{return r.markAsNotApplicable("The specified change is already existing - change appliance ignored",true)}n={groupLevels:a};p.setProperty(t,"groupConditions",n);i(e,t,c,v);s()}).catch(function(e){u(e)})})};var s=function(e,r,t,a){return new Promise(function(o,s){var u=a===n.REVERT;var v=t.modifier;var p=u?e.getRevertData():e.getContent();Promise.resolve().then(v.getProperty.bind(v,r,"groupConditions")).then(function(n){var t=n?n.groupLevels:[];var a=t.filter(function(e){return e.name===p.name});var s=t.indexOf(a[0]);t.splice(p.index,0,t.splice(s,1)[0]);n={groupLevels:t};v.setProperty(r,"groupConditions",n);i(e,r,p,u);o()}).catch(function(e){s(e)})})};var u={};u.removeGroup=n.createChangeHandler({apply:o,revert:a});u.addGroup=n.createChangeHandler({apply:a,revert:o});u.moveGroup=n.createChangeHandler({apply:s,revert:s});return u});
//# sourceMappingURL=GroupFlex.js.map