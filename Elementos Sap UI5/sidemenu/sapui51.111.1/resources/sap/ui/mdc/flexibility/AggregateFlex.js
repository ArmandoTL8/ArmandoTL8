/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/m/p13n/Engine","sap/ui/mdc/flexibility/Util","sap/ui/fl/changeHandler/condenser/Classification"],function(e,n,t){"use strict";var a=function(n){var t=n&&n.isA&&n.isA("sap.ui.mdc.Table")&&n.isTableBound();var a=n&&n.isA&&n.isA("sap.ui.mdc.Chart");if(t||a){if(!n._bWaitForBindChanges){n._bWaitForBindChanges=true;e.getInstance().waitForChanges(n).then(function(){if(t){n.rebind()}else if(a){n.rebind()}delete n._bWaitForBindChanges})}}};var r=function(e,n,t,r){if(r){e.resetRevertData()}else{e.setRevertData(t)}a(n)};var i=function(e,t,a,i){return new Promise(function(o,s){var g=i===n.REVERT;var c=a.modifier;var f=g?e.getRevertData():e.getContent();Promise.resolve().then(c.getProperty.bind(c,t,"aggregateConditions")).then(function(n){var a=n?n:{};a[f.name]={};var i={name:f.name};c.setProperty(t,"aggregateConditions",a);r(e,t,i,g);o()}).catch(function(e){s(e)})})};var o=function(e,t,a,i){return new Promise(function(o,s){var g=i===n.REVERT;var c=a.modifier;var f=g?e.getRevertData():e.getContent();Promise.resolve().then(c.getProperty.bind(c,t,"aggregateConditions")).then(function(n){var a=n?n:{};if(!a){s()}delete a[f.name];c.setProperty(t,"aggregateConditions",a);r(e,t,f,g);o()}).catch(function(e){s(e)})})};var s={};var g=function(e,n){var a=e.getContent();return{classification:t.Reverse,affectedControl:e.getSelector(),uniqueKey:"aggregate"+"_"+a.name}};s.addAggregate=n.createChangeHandler({apply:i,revert:o,getCondenserInfo:g});s.removeAggregate=n.createChangeHandler({apply:o,revert:i,getCondenserInfo:g});return s});
//# sourceMappingURL=AggregateFlex.js.map