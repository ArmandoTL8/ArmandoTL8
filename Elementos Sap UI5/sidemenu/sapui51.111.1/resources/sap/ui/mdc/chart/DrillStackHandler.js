/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Core","sap/m/ResponsivePopover","sap/m/List","sap/m/Bar","sap/m/StandardListItem","sap/ui/core/InvisibleText","sap/m/library","sap/ui/Device","sap/base/Log","sap/m/IllustratedMessage"],function(e,t,n,r,a,o,i,s,l,d){"use strict";var c=i.PlacementType;var u=i.ListType;var p=i.ListMode;function m(e){var t=e.getControlDelegate().getDrillStack(e);var n=[];t.forEach(function(e){e.dimension.forEach(function(e){if(e!=null&&e!=""&&n.indexOf(e)==-1){n.push(e)}})});return n}var g=function(){};g.createDrillDownPopover=function(r){var a=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");var l=new t({id:r.getId()+"-drilldownPopover",contentWidth:"25rem",contentHeight:"20rem",placement:c.Bottom});var u=new n({noData:new d({enableVerticalResponsiveness:true,title:a.getText("chart.NO_DRILLABLE_DIMENSION"),description:a.getText("chart.NO_DRILLABLE_DIMENSION_DESC"),illustrationType:i.IllustratedMessageType.NoDimensionsSet}),mode:p.SingleSelectMaster,selectionChange:function(e){var t=e.getParameter("listItem");if(t){r.getEngine().createChanges({control:r,key:"Item",state:[{name:t.data("dim").dim.name,position:r.getItems().length}]})}l.close()}});l.attachAfterClose(function(){l.destroy()});var m=e.getLibraryResourceBundle("sap.ui.mdc");if(s.system.desktop){var g=new o({text:m.getText("chart.CHART_DRILLDOWN_TITLE")});l.setShowHeader(false);l.addContent(g);l.addAriaLabelledBy(g)}else{l.setTitle(m.getText("chart.CHART_DRILLDOWN_TITLE"))}l.addContent(u);r._oDrillDownPopover=l;return l};g.showDrillDownPopover=function(e,t){var r=e.getControlDelegate().getSortedDimensions(e);return r.then(function(r){var o=e._oDrillDownPopover;var i,s,d;var c=o.getContent().filter(function(e){return e.getMetadata().getClass()==n});var p=c.length>0?c[0]:null;if(!p){l.error("MDC Chart: Could not determine list to show drilldown. This should not happen. Did the application modify the drill-down popover?");return}p.destroyItems();i=m(e);for(var g=0;g<r.length;g++){s=r[g];if(i.indexOf(s.name)>-1){continue}d=new a({title:s.label,type:u.Active});d.data("dim",{dim:s});p.addItem(d)}return new Promise(function(e,n){o.attachEventOnce("afterOpen",function t(n){e(o)});o.openBy(t)})})};return g});
//# sourceMappingURL=DrillStackHandler.js.map