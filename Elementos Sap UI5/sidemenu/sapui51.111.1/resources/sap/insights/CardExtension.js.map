{"version":3,"file":"CardExtension.js","names":["sap","ui","define","Extension","NumberFormat","SelectionVariant","Log","DateFormat","ValueState","ValueColor","IntegrationUtils","DynamicDateUtil","Core","NavError","UrlGenerateHelper","criticalityConstants","StateValues","None","Negative","Critical","Positive","ColorValues","oLogger","getLogger","endsWith","sString","sSuffix","indexOf","length","criticality2state","criticality","oCriticalityConfigValues","sState","EnumMember","val","calculateCriticalityState","value","sImproveDirection","deviationLow","deviationHigh","toleranceLow","toleranceHigh","oCriticality","nMinValue","Number","NEGATIVE_INFINITY","nMaxValue","POSITIVE_INFINITY","undefined","parseFloat","calculateTrendDirection","aggregateValue","referenceValue","downDifference","upDifference","kpiformatter","sPath","ovpProperties","bUnit","oStaticValue","kpiValue","numberFormat","getFloatInstance","minFractionDigits","NumberOfFractionalDigits","maxFractionDigits","style","showScale","shortRefNumber","sNum","format","sNumberScale","getScale","sLastNumber","slice","percentageAvailable","formatHeaderUrl","oParams","this","getCard","getCombinedParameters","_headerDataUrl","formatContentUrl","_contentDataUrl","targetValueFormatter","iKpiValue","iTargetValue","oStaticValues","iValue","iFractionalDigits","iScaleFactor","isNaN","manifestTarget","fnNumberFormat","returnPercentageChange","iReferenceValue","iPercentNumber","fnPercentFormatter","getPercentInstance","kpiValueCriticality","nCriticality","formatValueColor","arguments","index","sImprovementDirection","bIsDeviationLowBinding","bIsDeviationHighBinding","bIsToleranceLowBinding","bIsToleranceHighBinding","formatTrendIcon","bIsRefValBinding","bIsDownDiffBinding","bIsUpDiffBinding","formatDateValue","sPropertyValue","result","sPropertyType","propertyType","year","parseInt","substr","month","monthIndex","Date","UTC","quarter","monthFromQuarter","week","startOfWeekDay","formatDate","sDateValue","formatterProperties","oDate","parseJsonDateTime","getInstance","bUTC","formatHeaderCount","sValue","formatNumber","getIntegerInstance","decimalSeparator","textFragments","sValue1","sValue2","oFormatter","numberOfFractionalDigits","scaleFactor","aParts","push","sFinalValue","forEach","textFragment","formatCriticality","sCriticality","sType","String","Error","Warning","Success","Good","Neutral","getMinMax","aContextData","getModel","getProperty","aItems","map","oData","Math","apply","_mixAttributesToSelVariant","mSemanticAttributes","oSelVariant","iSuppressionBehavior","ignoreEmptyString","raiseErrorOnNull","raiseErrorOnUndefined","sPropertyName","hasOwnProperty","vSemanticAttributeValue","toJSON","Array","isArray","JSON","stringify","toString","info","error","warning","addSelectOption","mixAttributesAndSelectionVariant","vSemanticAttributes","sSelectionVariant","oSelectionVariant","oNewSelVariant","getFilterContextUrl","setFilterContextUrl","getParameterContextUrl","setParameterContextUrl","aParameters","getParameterNames","i","getSelectOption","getParameter","aSelOptionNames","getSelectOptionsPropertyNames","aSelectOption","j","Sign","Option","Low","High","enhanceVariant","oValue","SelectionVariantID","PresentationVariantID","Text","ODataFilterExpression","Version","FilterContextUrl","ParameterContextUrl","isJSONData","oVariant","parse","err","singleAndSimpleFilter","aRanges","bSingleRange","oRange","addPropertyValueToAppState","oNavData","oContext","oCard","getManifestEntry","oCardParams","configuration","parameters","cardSV","fe","navigation","aFilters","_relevantODataFilters","oSensitiveProps","sensitiveProps","oHeaderIbnParams","header","actions","ibnParams","oContentIbnParams","content","sFilterName","bJSONData","tempFilterSV","SelectOptions","Ranges","bSingleAndSimpleRange","massAddSelectOption","aContextKeys","Object","keys","toJSONObject","selectionVariant","formatStringTypeForSemanticDate","oDateTimeFormat","getDateInstance","pattern","calendarType","replace","formatDateTimeTypeForSemanticDate","oDateTimeFormatMs","addSelectionOptionForSemanticDate","oCardSV","sParamName","aRangeValues","operation","value1","toDates","values","operator","oValue1","oValue2","sLowValue","sHighValue","type","_getURLParametersFromSelectionVariant","vSelectionVariant","mURLParameters","aSelectProperties","aSelectOptions","aParameterNames","sParameterValue","getNavigationContext","sNavData","aMandatoryParams","_mandatoryODataParameters","oParameters","oIbnParams","aSensitiveProps","oSemanticDateRangeSetting","_semanticDateRangeSetting","oSemanticDateSetting","aSemanticDateFields","oXAppStateData","includes","oCardMandatoryFilterParamSV","_relevantODataParameters","oCurrentContext","presentationVariant","Parameters","key","formatHeaderDataUrlForSemanticDate","descriptorContent","sUrl","semanticHeaderContentUrl","formatContentDataUrlForSemanticDate","sUrlPrefix","data","request","url","oUrl","processPrivateParams","extend","init","prototype","setFormatters","bind","loadDependencies","Promise","resolve","loadLibrary","async","then","require","OVPChartFormatter","registerCustomFormatters"],"sources":["CardExtension-dbg.js"],"mappings":"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"}